var Z5=function(X,Y){return Z5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,J){Z.__proto__=J}||function(Z,J){for(var G in J)if(Object.prototype.hasOwnProperty.call(J,G))Z[G]=J[G]},Z5(X,Y)};function o(X,Y){if(typeof Y!=="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");Z5(X,Y);function Z(){this.constructor=X}X.prototype=Y===null?Object.create(Y):(Z.prototype=Y.prototype,new Z)}var E=function(){return E=Object.assign||function X(Y){for(var Z,J=1,G=arguments.length;J<G;J++){Z=arguments[J];for(var $ in Z)if(Object.prototype.hasOwnProperty.call(Z,$))Y[$]=Z[$]}return Y},E.apply(this,arguments)};function t(X,Y){var Z={};for(var J in X)if(Object.prototype.hasOwnProperty.call(X,J)&&Y.indexOf(J)<0)Z[J]=X[J];if(X!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var G=0,J=Object.getOwnPropertySymbols(X);G<J.length;G++)if(Y.indexOf(J[G])<0&&Object.prototype.propertyIsEnumerable.call(X,J[G]))Z[J[G]]=X[J[G]]}return Z}function EY(X,Y,Z,J){function G($){return $ instanceof Z?$:new Z(function(H){H($)})}return new(Z||(Z=Promise))(function($,H){function B(U){try{W(J.next(U))}catch(Q){H(Q)}}function z(U){try{W(J.throw(U))}catch(Q){H(Q)}}function W(U){U.done?$(U.value):G(U.value).then(B,z)}W((J=J.apply(X,Y||[])).next())})}function AY(X,Y){var Z={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},J,G,$,H=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return H.next=B(0),H.throw=B(1),H.return=B(2),typeof Symbol==="function"&&(H[Symbol.iterator]=function(){return this}),H;function B(W){return function(U){return z([W,U])}}function z(W){if(J)throw new TypeError("Generator is already executing.");while(H&&(H=0,W[0]&&(Z=0)),Z)try{if(J=1,G&&($=W[0]&2?G.return:W[0]?G.throw||(($=G.return)&&$.call(G),0):G.next)&&!($=$.call(G,W[1])).done)return $;if(G=0,$)W=[W[0]&2,$.value];switch(W[0]){case 0:case 1:$=W;break;case 4:return Z.label++,{value:W[1],done:!1};case 5:Z.label++,G=W[1],W=[0];continue;case 7:W=Z.ops.pop(),Z.trys.pop();continue;default:if(($=Z.trys,!($=$.length>0&&$[$.length-1]))&&(W[0]===6||W[0]===2)){Z=0;continue}if(W[0]===3&&(!$||W[1]>$[0]&&W[1]<$[3])){Z.label=W[1];break}if(W[0]===6&&Z.label<$[1]){Z.label=$[1],$=W;break}if($&&Z.label<$[2]){Z.label=$[2],Z.ops.push(W);break}if($[2])Z.ops.pop();Z.trys.pop();continue}W=Y.call(X,Z)}catch(U){W=[6,U],G=0}finally{J=$=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}}function m(X,Y,Z){if(Z||arguments.length===2){for(var J=0,G=Y.length,$;J<G;J++)if($||!(J in Y)){if(!$)$=Array.prototype.slice.call(Y,0,J);$[J]=Y[J]}}return X.concat($||Array.prototype.slice.call(Y))}var J5="Invariant Violation",T6=Object.setPrototypeOf,v9=T6===void 0?function(X,Y){return X.__proto__=Y,X}:T6,$Z=function(X){o(Y,X);function Y(Z){if(Z===void 0)Z=J5;var J=X.call(this,typeof Z==="number"?J5+": "+Z+" (see https://github.com/apollographql/invariant-packages)":Z)||this;return J.framesToPop=1,J.name=J5,v9(J,Y.prototype),J}return Y}(Error);function hY(X,Y){if(!X)throw new $Z(Y)}var GZ=["debug","log","warn","error","silent"],G5=GZ.indexOf("log");function JZ(X){return function(){if(GZ.indexOf(X)>=G5){var Y=console[X]||console.log;return Y.apply(console,arguments)}}}(function(X){X.debug=JZ("debug"),X.log=JZ("log"),X.warn=JZ("warn"),X.error=JZ("error")})(hY||(hY={}));function F6(X){var Y=GZ[G5];return G5=Math.max(0,GZ.indexOf(X)),Y}var wX="3.14.0";function e(X){try{return X()}catch(Y){}}var bY=e(function(){return globalThis})||e(function(){return window})||e(function(){return self})||e(function(){return global})||e(function(){return e.constructor("return this")()});var K6=new Map;function CX(X){var Y=K6.get(X)||1;return K6.set(X,Y+1),"".concat(X,":").concat(Y,":").concat(Math.random().toString(36).slice(2))}function HZ(X,Y){if(Y===void 0)Y=0;var Z=CX("stringifyForDisplay");return JSON.stringify(X,function(J,G){return G===void 0?Z:G},Y).split(JSON.stringify(Z)).join("<undefined>")}function BZ(X){return function(Y){var Z=[];for(var J=1;J<arguments.length;J++)Z[J-1]=arguments[J];if(typeof Y==="number"){var G=Y;if(Y=$5(G),!Y)Y=H5(G,Z),Z=[]}X.apply(void 0,[Y].concat(Z))}}var K=Object.assign(function X(Y,Z){var J=[];for(var G=2;G<arguments.length;G++)J[G-2]=arguments[G];if(!Y)hY(Y,$5(Z,J)||H5(Z,J))},{debug:BZ(hY.debug),log:BZ(hY.log),warn:BZ(hY.warn),error:BZ(hY.error)});function f(X){var Y=[];for(var Z=1;Z<arguments.length;Z++)Y[Z-1]=arguments[Z];return new $Z($5(X,Y)||H5(X,Y))}var w6=Symbol.for("ApolloErrorMessageHandler_"+wX);function C6(X){if(typeof X=="string")return X;try{return HZ(X,2).slice(0,1000)}catch(Y){return"<non-serializable>"}}function $5(X,Y){if(Y===void 0)Y=[];if(!X)return;return bY[w6]&&bY[w6](X,Y.map(C6))}function H5(X,Y){if(Y===void 0)Y=[];if(!X)return;return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:wX,message:X,args:Y.map(C6)})))}var f9=globalThis.__DEV__!==!1;function GX(X,Y){if(!Boolean(X))throw new Error(Y)}function R6(X){return typeof X=="object"&&X!==null}function N6(X,Y){if(!Boolean(X))throw new Error(Y!=null?Y:"Unexpected invariant triggered.")}var g9=/\r\n|[\n\r]/g;function $X(X,Y){let Z=0,J=1;for(let G of X.body.matchAll(g9)){if(typeof G.index==="number"||N6(!1),G.index>=Y)break;Z=G.index+G[0].length,J+=1}return{line:J,column:Y+1-Z}}function B5(X){return WZ(X.source,$X(X.source,X.start))}function WZ(X,Y){let Z=X.locationOffset.column-1,J="".padStart(Z)+X.body,G=Y.line-1,$=X.locationOffset.line-1,H=Y.line+$,B=Y.line===1?Z:0,z=Y.column+B,W=`${X.name}:${H}:${z}\n`,U=J.split(/\r\n|[\n\r]/g),Q=U[G];if(Q.length>120){let P=Math.floor(z/80),V=z%80,q=[];for(let D=0;D<Q.length;D+=80)q.push(Q.slice(D,D+80));return W+I6([[`${H} |`,q[0]],...q.slice(1,P+1).map((D)=>["|",D]),["|","^".padStart(V)],["|",q[P+1]]])}return W+I6([[`${H-1} |`,U[G-1]],[`${H} |`,Q],["|","^".padStart(z)],[`${H+1} |`,U[G+1]]])}function I6(X){let Y=X.filter(([J,G])=>G!==void 0),Z=Math.max(...Y.map(([J])=>J.length));return Y.map(([J,G])=>J.padStart(Z)+(G?" "+G:"")).join("\n")}function y9(X){let Y=X[0];if(Y==null||"kind"in Y||"length"in Y)return{nodes:Y,source:X[1],positions:X[2],path:X[3],originalError:X[4],extensions:X[5]};return Y}class zZ extends Error{constructor(X,...Y){var Z,J,G;let{nodes:$,source:H,positions:B,path:z,originalError:W,extensions:U}=y9(Y);super(X);this.name="GraphQLError",this.path=z!==null&&z!==void 0?z:void 0,this.originalError=W!==null&&W!==void 0?W:void 0,this.nodes=O6(Array.isArray($)?$:$?[$]:void 0);let Q=O6((Z=this.nodes)===null||Z===void 0?void 0:Z.map((V)=>V.loc).filter((V)=>V!=null));this.source=H!==null&&H!==void 0?H:Q===null||Q===void 0?void 0:(J=Q[0])===null||J===void 0?void 0:J.source,this.positions=B!==null&&B!==void 0?B:Q===null||Q===void 0?void 0:Q.map((V)=>V.start),this.locations=B&&H?B.map((V)=>$X(H,V)):Q===null||Q===void 0?void 0:Q.map((V)=>$X(V.source,V.start));let P=R6(W===null||W===void 0?void 0:W.extensions)?W===null||W===void 0?void 0:W.extensions:void 0;if(this.extensions=(G=U!==null&&U!==void 0?U:P)!==null&&G!==void 0?G:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),W!==null&&W!==void 0&&W.stack)Object.defineProperty(this,"stack",{value:W.stack,writable:!0,configurable:!0});else if(Error.captureStackTrace)Error.captureStackTrace(this,zZ);else Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let X=this.message;if(this.nodes){for(let Y of this.nodes)if(Y.loc)X+="\n\n"+B5(Y.loc)}else if(this.source&&this.locations)for(let Y of this.locations)X+="\n\n"+WZ(this.source,Y);return X}toJSON(){let X={message:this.message};if(this.locations!=null)X.locations=this.locations;if(this.path!=null)X.path=this.path;if(this.extensions!=null&&Object.keys(this.extensions).length>0)X.extensions=this.extensions;return X}}function O6(X){return X===void 0||X.length===0?void 0:X}function c(X,Y,Z){return new zZ(`Syntax Error: ${Z}`,{source:X,positions:[Y]})}class UZ{constructor(X,Y,Z){this.start=X.start,this.end=Y.end,this.startToken=X,this.endToken=Y,this.source=Z}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class RX{constructor(X,Y,Z,J,G,$){this.kind=X,this.start=Y,this.end=Z,this.line=J,this.column=G,this.value=$,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}var W5={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},m9=new Set(Object.keys(W5));function z5(X){let Y=X===null||X===void 0?void 0:X.kind;return typeof Y==="string"&&m9.has(Y)}var _Y;(function(X){X.QUERY="query",X.MUTATION="mutation",X.SUBSCRIPTION="subscription"})(_Y||(_Y={}));var NX;(function(X){X.QUERY="QUERY",X.MUTATION="MUTATION",X.SUBSCRIPTION="SUBSCRIPTION",X.FIELD="FIELD",X.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",X.FRAGMENT_SPREAD="FRAGMENT_SPREAD",X.INLINE_FRAGMENT="INLINE_FRAGMENT",X.VARIABLE_DEFINITION="VARIABLE_DEFINITION",X.SCHEMA="SCHEMA",X.SCALAR="SCALAR",X.OBJECT="OBJECT",X.FIELD_DEFINITION="FIELD_DEFINITION",X.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",X.INTERFACE="INTERFACE",X.UNION="UNION",X.ENUM="ENUM",X.ENUM_VALUE="ENUM_VALUE",X.INPUT_OBJECT="INPUT_OBJECT",X.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(NX||(NX={}));var R;(function(X){X.NAME="Name",X.DOCUMENT="Document",X.OPERATION_DEFINITION="OperationDefinition",X.VARIABLE_DEFINITION="VariableDefinition",X.SELECTION_SET="SelectionSet",X.FIELD="Field",X.ARGUMENT="Argument",X.FRAGMENT_SPREAD="FragmentSpread",X.INLINE_FRAGMENT="InlineFragment",X.FRAGMENT_DEFINITION="FragmentDefinition",X.VARIABLE="Variable",X.INT="IntValue",X.FLOAT="FloatValue",X.STRING="StringValue",X.BOOLEAN="BooleanValue",X.NULL="NullValue",X.ENUM="EnumValue",X.LIST="ListValue",X.OBJECT="ObjectValue",X.OBJECT_FIELD="ObjectField",X.DIRECTIVE="Directive",X.NAMED_TYPE="NamedType",X.LIST_TYPE="ListType",X.NON_NULL_TYPE="NonNullType",X.SCHEMA_DEFINITION="SchemaDefinition",X.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",X.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",X.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",X.FIELD_DEFINITION="FieldDefinition",X.INPUT_VALUE_DEFINITION="InputValueDefinition",X.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",X.UNION_TYPE_DEFINITION="UnionTypeDefinition",X.ENUM_TYPE_DEFINITION="EnumTypeDefinition",X.ENUM_VALUE_DEFINITION="EnumValueDefinition",X.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",X.DIRECTIVE_DEFINITION="DirectiveDefinition",X.SCHEMA_EXTENSION="SchemaExtension",X.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",X.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",X.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",X.UNION_TYPE_EXTENSION="UnionTypeExtension",X.ENUM_TYPE_EXTENSION="EnumTypeExtension",X.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(R||(R={}));function QZ(X){return X===9||X===32}function HX(X){return X>=48&&X<=57}function j6(X){return X>=97&&X<=122||X>=65&&X<=90}function U5(X){return j6(X)||X===95}function S6(X){return j6(X)||HX(X)||X===95}function x6(X){var Y;let Z=Number.MAX_SAFE_INTEGER,J=null,G=-1;for(let H=0;H<X.length;++H){var $;let B=X[H],z=u9(B);if(z===B.length)continue;if(J=($=J)!==null&&$!==void 0?$:H,G=H,H!==0&&z<Z)Z=z}return X.map((H,B)=>B===0?H:H.slice(Z)).slice((Y=J)!==null&&Y!==void 0?Y:0,G+1)}function u9(X){let Y=0;while(Y<X.length&&QZ(X.charCodeAt(Y)))++Y;return Y}function k6(X,Y){let Z=X.replace(/"""/g,'\\"""'),J=Z.split(/\r\n|[\n\r]/g),G=J.length===1,$=J.length>1&&J.slice(1).every((V)=>V.length===0||QZ(V.charCodeAt(0))),H=Z.endsWith('\\"""'),B=X.endsWith('"')&&!H,z=X.endsWith("\\"),W=B||z,U=!(Y!==null&&Y!==void 0&&Y.minimize)&&(!G||X.length>70||W||$||H),Q="",P=G&&QZ(X.charCodeAt(0));if(U&&!P||$)Q+="\n";if(Q+=Z,U||W)Q+="\n";return'"""'+Q+'"""'}var L;(function(X){X.SOF="<SOF>",X.EOF="<EOF>",X.BANG="!",X.DOLLAR="$",X.AMP="&",X.PAREN_L="(",X.PAREN_R=")",X.SPREAD="...",X.COLON=":",X.EQUALS="=",X.AT="@",X.BRACKET_L="[",X.BRACKET_R="]",X.BRACE_L="{",X.PIPE="|",X.BRACE_R="}",X.NAME="Name",X.INT="Int",X.FLOAT="Float",X.STRING="String",X.BLOCK_STRING="BlockString",X.COMMENT="Comment"})(L||(L={}));class PZ{constructor(X){let Y=new RX(L.SOF,0,0,0,0);this.source=X,this.lastToken=Y,this.token=Y,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let X=this.token;if(X.kind!==L.EOF)do if(X.next)X=X.next;else{let Y=p9(this,X.end);X.next=Y,Y.prev=X,X=Y}while(X.kind===L.COMMENT);return X}}function b6(X){return X===L.BANG||X===L.DOLLAR||X===L.AMP||X===L.PAREN_L||X===L.PAREN_R||X===L.SPREAD||X===L.COLON||X===L.EQUALS||X===L.AT||X===L.BRACKET_L||X===L.BRACKET_R||X===L.BRACE_L||X===L.PIPE||X===L.BRACE_R}function BX(X){return X>=0&&X<=55295||X>=57344&&X<=1114111}function VZ(X,Y){return _6(X.charCodeAt(Y))&&v6(X.charCodeAt(Y+1))}function _6(X){return X>=55296&&X<=56319}function v6(X){return X>=56320&&X<=57343}function aY(X,Y){let Z=X.source.body.codePointAt(Y);if(Z===void 0)return L.EOF;else if(Z>=32&&Z<=126){let J=String.fromCodePoint(Z);return J==='"'?"'\"'":`"${J}"`}return"U+"+Z.toString(16).toUpperCase().padStart(4,"0")}function l(X,Y,Z,J,G){let $=X.line,H=1+Z-X.lineStart;return new RX(Y,Z,J,$,H,G)}function p9(X,Y){let Z=X.source.body,J=Z.length,G=Y;while(G<J){let $=Z.charCodeAt(G);switch($){case 65279:case 9:case 32:case 44:++G;continue;case 10:++G,++X.line,X.lineStart=G;continue;case 13:if(Z.charCodeAt(G+1)===10)G+=2;else++G;++X.line,X.lineStart=G;continue;case 35:return d9(X,G);case 33:return l(X,L.BANG,G,G+1);case 36:return l(X,L.DOLLAR,G,G+1);case 38:return l(X,L.AMP,G,G+1);case 40:return l(X,L.PAREN_L,G,G+1);case 41:return l(X,L.PAREN_R,G,G+1);case 46:if(Z.charCodeAt(G+1)===46&&Z.charCodeAt(G+2)===46)return l(X,L.SPREAD,G,G+3);break;case 58:return l(X,L.COLON,G,G+1);case 61:return l(X,L.EQUALS,G,G+1);case 64:return l(X,L.AT,G,G+1);case 91:return l(X,L.BRACKET_L,G,G+1);case 93:return l(X,L.BRACKET_R,G,G+1);case 123:return l(X,L.BRACE_L,G,G+1);case 124:return l(X,L.PIPE,G,G+1);case 125:return l(X,L.BRACE_R,G,G+1);case 34:if(Z.charCodeAt(G+1)===34&&Z.charCodeAt(G+2)===34)return o9(X,G);return l9(X,G)}if(HX($)||$===45)return c9(X,G,$);if(U5($))return r9(X,G);throw c(X.source,G,$===39?'Unexpected single quote character (\'), did you mean to use a double quote (")?':BX($)||VZ(Z,G)?`Unexpected character: ${aY(X,G)}.`:`Invalid character: ${aY(X,G)}.`)}return l(X,L.EOF,J,J)}function d9(X,Y){let Z=X.source.body,J=Z.length,G=Y+1;while(G<J){let $=Z.charCodeAt(G);if($===10||$===13)break;if(BX($))++G;else if(VZ(Z,G))G+=2;else break}return l(X,L.COMMENT,Y,G,Z.slice(Y+1,G))}function c9(X,Y,Z){let J=X.source.body,G=Y,$=Z,H=!1;if($===45)$=J.charCodeAt(++G);if($===48){if($=J.charCodeAt(++G),HX($))throw c(X.source,G,`Invalid number, unexpected digit after 0: ${aY(X,G)}.`)}else G=Q5(X,G,$),$=J.charCodeAt(G);if($===46)H=!0,$=J.charCodeAt(++G),G=Q5(X,G,$),$=J.charCodeAt(G);if($===69||$===101){if(H=!0,$=J.charCodeAt(++G),$===43||$===45)$=J.charCodeAt(++G);G=Q5(X,G,$),$=J.charCodeAt(G)}if($===46||U5($))throw c(X.source,G,`Invalid number, expected digit but got: ${aY(X,G)}.`);return l(X,H?L.FLOAT:L.INT,Y,G,J.slice(Y,G))}function Q5(X,Y,Z){if(!HX(Z))throw c(X.source,Y,`Invalid number, expected digit but got: ${aY(X,Y)}.`);let J=X.source.body,G=Y+1;while(HX(J.charCodeAt(G)))++G;return G}function l9(X,Y){let Z=X.source.body,J=Z.length,G=Y+1,$=G,H="";while(G<J){let B=Z.charCodeAt(G);if(B===34)return H+=Z.slice($,G),l(X,L.STRING,Y,G+1,H);if(B===92){H+=Z.slice($,G);let z=Z.charCodeAt(G+1)===117?Z.charCodeAt(G+2)===123?s9(X,G):a9(X,G):n9(X,G);H+=z.value,G+=z.size,$=G;continue}if(B===10||B===13)break;if(BX(B))++G;else if(VZ(Z,G))G+=2;else throw c(X.source,G,`Invalid character within String: ${aY(X,G)}.`)}throw c(X.source,G,"Unterminated string.")}function s9(X,Y){let Z=X.source.body,J=0,G=3;while(G<12){let $=Z.charCodeAt(Y+G++);if($===125){if(G<5||!BX(J))break;return{value:String.fromCodePoint(J),size:G}}if(J=J<<4|IX($),J<0)break}throw c(X.source,Y,`Invalid Unicode escape sequence: "${Z.slice(Y,Y+G)}".`)}function a9(X,Y){let Z=X.source.body,J=h6(Z,Y+2);if(BX(J))return{value:String.fromCodePoint(J),size:6};if(_6(J)){if(Z.charCodeAt(Y+6)===92&&Z.charCodeAt(Y+7)===117){let G=h6(Z,Y+8);if(v6(G))return{value:String.fromCodePoint(J,G),size:12}}}throw c(X.source,Y,`Invalid Unicode escape sequence: "${Z.slice(Y,Y+6)}".`)}function h6(X,Y){return IX(X.charCodeAt(Y))<<12|IX(X.charCodeAt(Y+1))<<8|IX(X.charCodeAt(Y+2))<<4|IX(X.charCodeAt(Y+3))}function IX(X){return X>=48&&X<=57?X-48:X>=65&&X<=70?X-55:X>=97&&X<=102?X-87:-1}function n9(X,Y){let Z=X.source.body;switch(Z.charCodeAt(Y+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:`\r`,size:2};case 116:return{value:"\t",size:2}}throw c(X.source,Y,`Invalid character escape sequence: "${Z.slice(Y,Y+2)}".`)}function o9(X,Y){let Z=X.source.body,J=Z.length,G=X.lineStart,$=Y+3,H=$,B="",z=[];while($<J){let W=Z.charCodeAt($);if(W===34&&Z.charCodeAt($+1)===34&&Z.charCodeAt($+2)===34){B+=Z.slice(H,$),z.push(B);let U=l(X,L.BLOCK_STRING,Y,$+3,x6(z).join("\n"));return X.line+=z.length-1,X.lineStart=G,U}if(W===92&&Z.charCodeAt($+1)===34&&Z.charCodeAt($+2)===34&&Z.charCodeAt($+3)===34){B+=Z.slice(H,$),H=$+1,$+=4;continue}if(W===10||W===13){if(B+=Z.slice(H,$),z.push(B),W===13&&Z.charCodeAt($+1)===10)$+=2;else++$;B="",H=$,G=$;continue}if(BX(W))++$;else if(VZ(Z,$))$+=2;else throw c(X.source,$,`Invalid character within String: ${aY(X,$)}.`)}throw c(X.source,$,"Unterminated string.")}function r9(X,Y){let Z=X.source.body,J=Z.length,G=Y+1;while(G<J){let $=Z.charCodeAt(G);if(S6($))++G;else break}return l(X,L.NAME,Y,G,Z.slice(Y,G))}function WX(X){return EZ(X,[])}function EZ(X,Y){switch(typeof X){case"string":return JSON.stringify(X);case"function":return X.name?`[function ${X.name}]`:"[function]";case"object":return i9(X,Y);default:return String(X)}}function i9(X,Y){if(X===null)return"null";if(Y.includes(X))return"[Circular]";let Z=[...Y,X];if(t9(X)){let J=X.toJSON();if(J!==X)return typeof J==="string"?J:EZ(J,Z)}else if(Array.isArray(X))return YJ(X,Z);return e9(X,Z)}function t9(X){return typeof X.toJSON==="function"}function e9(X,Y){let Z=Object.entries(X);if(Z.length===0)return"{}";if(Y.length>2)return"["+XJ(X)+"]";return"{ "+Z.map(([G,$])=>G+": "+EZ($,Y)).join(", ")+" }"}function YJ(X,Y){if(X.length===0)return"[]";if(Y.length>2)return"[Array]";let Z=Math.min(10,X.length),J=X.length-Z,G=[];for(let $=0;$<Z;++$)G.push(EZ(X[$],Y));if(J===1)G.push("... 1 more item");else if(J>1)G.push(`... ${J} more items`);return"["+G.join(", ")+"]"}function XJ(X){let Y=Object.prototype.toString.call(X).replace(/^\[object /,"").replace(/]$/,"");if(Y==="Object"&&typeof X.constructor==="function"){let Z=X.constructor.name;if(typeof Z==="string"&&Z!=="")return Z}return Y}var ZJ=globalThis.process&&!1,f6=ZJ?function X(Y,Z){return Y instanceof Z}:function X(Y,Z){if(Y instanceof Z)return!0;if(typeof Y==="object"&&Y!==null){var J;let G=Z.prototype[Symbol.toStringTag],$=Symbol.toStringTag in Y?Y[Symbol.toStringTag]:(J=Y.constructor)===null||J===void 0?void 0:J.name;if(G===$){let H=WX(Y);throw new Error(`Cannot use ${G} "${H}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class OX{constructor(X,Y="GraphQL request",Z={line:1,column:1}){typeof X==="string"||GX(!1,`Body must be a string. Received: ${WX(X)}.`),this.body=X,this.name=Y,this.locationOffset=Z,this.locationOffset.line>0||GX(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||GX(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function g6(X){return f6(X,OX)}function qZ(X,Y){let Z=new y6(X,Y),J=Z.parseDocument();return Object.defineProperty(J,"tokenCount",{enumerable:!1,value:Z.tokenCount}),J}class y6{constructor(X,Y={}){let Z=g6(X)?X:new OX(X);this._lexer=new PZ(Z),this._options=Y,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){let X=this.expectToken(L.NAME);return this.node(X,{kind:R.NAME,value:X.value})}parseDocument(){return this.node(this._lexer.token,{kind:R.DOCUMENT,definitions:this.many(L.SOF,this.parseDefinition,L.EOF)})}parseDefinition(){if(this.peek(L.BRACE_L))return this.parseOperationDefinition();let X=this.peekDescription(),Y=X?this._lexer.lookahead():this._lexer.token;if(Y.kind===L.NAME){switch(Y.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(X)throw c(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(Y.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(Y)}parseOperationDefinition(){let X=this._lexer.token;if(this.peek(L.BRACE_L))return this.node(X,{kind:R.OPERATION_DEFINITION,operation:_Y.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});let Y=this.parseOperationType(),Z;if(this.peek(L.NAME))Z=this.parseName();return this.node(X,{kind:R.OPERATION_DEFINITION,operation:Y,name:Z,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){let X=this.expectToken(L.NAME);switch(X.value){case"query":return _Y.QUERY;case"mutation":return _Y.MUTATION;case"subscription":return _Y.SUBSCRIPTION}throw this.unexpected(X)}parseVariableDefinitions(){return this.optionalMany(L.PAREN_L,this.parseVariableDefinition,L.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:R.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(L.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(L.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){let X=this._lexer.token;return this.expectToken(L.DOLLAR),this.node(X,{kind:R.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:R.SELECTION_SET,selections:this.many(L.BRACE_L,this.parseSelection,L.BRACE_R)})}parseSelection(){return this.peek(L.SPREAD)?this.parseFragment():this.parseField()}parseField(){let X=this._lexer.token,Y=this.parseName(),Z,J;if(this.expectOptionalToken(L.COLON))Z=Y,J=this.parseName();else J=Y;return this.node(X,{kind:R.FIELD,alias:Z,name:J,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(L.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(X){let Y=X?this.parseConstArgument:this.parseArgument;return this.optionalMany(L.PAREN_L,Y,L.PAREN_R)}parseArgument(X=!1){let Y=this._lexer.token,Z=this.parseName();return this.expectToken(L.COLON),this.node(Y,{kind:R.ARGUMENT,name:Z,value:this.parseValueLiteral(X)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){let X=this._lexer.token;this.expectToken(L.SPREAD);let Y=this.expectOptionalKeyword("on");if(!Y&&this.peek(L.NAME))return this.node(X,{kind:R.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)});return this.node(X,{kind:R.INLINE_FRAGMENT,typeCondition:Y?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){let X=this._lexer.token;if(this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0)return this.node(X,{kind:R.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()});return this.node(X,{kind:R.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(X){let Y=this._lexer.token;switch(Y.kind){case L.BRACKET_L:return this.parseList(X);case L.BRACE_L:return this.parseObject(X);case L.INT:return this.advanceLexer(),this.node(Y,{kind:R.INT,value:Y.value});case L.FLOAT:return this.advanceLexer(),this.node(Y,{kind:R.FLOAT,value:Y.value});case L.STRING:case L.BLOCK_STRING:return this.parseStringLiteral();case L.NAME:switch(this.advanceLexer(),Y.value){case"true":return this.node(Y,{kind:R.BOOLEAN,value:!0});case"false":return this.node(Y,{kind:R.BOOLEAN,value:!1});case"null":return this.node(Y,{kind:R.NULL});default:return this.node(Y,{kind:R.ENUM,value:Y.value})}case L.DOLLAR:if(X)if(this.expectToken(L.DOLLAR),this._lexer.token.kind===L.NAME){let Z=this._lexer.token.value;throw c(this._lexer.source,Y.start,`Unexpected variable "\$${Z}" in constant value.`)}else throw this.unexpected(Y);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){let X=this._lexer.token;return this.advanceLexer(),this.node(X,{kind:R.STRING,value:X.value,block:X.kind===L.BLOCK_STRING})}parseList(X){let Y=()=>this.parseValueLiteral(X);return this.node(this._lexer.token,{kind:R.LIST,values:this.any(L.BRACKET_L,Y,L.BRACKET_R)})}parseObject(X){let Y=()=>this.parseObjectField(X);return this.node(this._lexer.token,{kind:R.OBJECT,fields:this.any(L.BRACE_L,Y,L.BRACE_R)})}parseObjectField(X){let Y=this._lexer.token,Z=this.parseName();return this.expectToken(L.COLON),this.node(Y,{kind:R.OBJECT_FIELD,name:Z,value:this.parseValueLiteral(X)})}parseDirectives(X){let Y=[];while(this.peek(L.AT))Y.push(this.parseDirective(X));return Y}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(X){let Y=this._lexer.token;return this.expectToken(L.AT),this.node(Y,{kind:R.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(X)})}parseTypeReference(){let X=this._lexer.token,Y;if(this.expectOptionalToken(L.BRACKET_L)){let Z=this.parseTypeReference();this.expectToken(L.BRACKET_R),Y=this.node(X,{kind:R.LIST_TYPE,type:Z})}else Y=this.parseNamedType();if(this.expectOptionalToken(L.BANG))return this.node(X,{kind:R.NON_NULL_TYPE,type:Y});return Y}parseNamedType(){return this.node(this._lexer.token,{kind:R.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(L.STRING)||this.peek(L.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){let X=this._lexer.token,Y=this.parseDescription();this.expectKeyword("schema");let Z=this.parseConstDirectives(),J=this.many(L.BRACE_L,this.parseOperationTypeDefinition,L.BRACE_R);return this.node(X,{kind:R.SCHEMA_DEFINITION,description:Y,directives:Z,operationTypes:J})}parseOperationTypeDefinition(){let X=this._lexer.token,Y=this.parseOperationType();this.expectToken(L.COLON);let Z=this.parseNamedType();return this.node(X,{kind:R.OPERATION_TYPE_DEFINITION,operation:Y,type:Z})}parseScalarTypeDefinition(){let X=this._lexer.token,Y=this.parseDescription();this.expectKeyword("scalar");let Z=this.parseName(),J=this.parseConstDirectives();return this.node(X,{kind:R.SCALAR_TYPE_DEFINITION,description:Y,name:Z,directives:J})}parseObjectTypeDefinition(){let X=this._lexer.token,Y=this.parseDescription();this.expectKeyword("type");let Z=this.parseName(),J=this.parseImplementsInterfaces(),G=this.parseConstDirectives(),$=this.parseFieldsDefinition();return this.node(X,{kind:R.OBJECT_TYPE_DEFINITION,description:Y,name:Z,interfaces:J,directives:G,fields:$})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(L.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(L.BRACE_L,this.parseFieldDefinition,L.BRACE_R)}parseFieldDefinition(){let X=this._lexer.token,Y=this.parseDescription(),Z=this.parseName(),J=this.parseArgumentDefs();this.expectToken(L.COLON);let G=this.parseTypeReference(),$=this.parseConstDirectives();return this.node(X,{kind:R.FIELD_DEFINITION,description:Y,name:Z,arguments:J,type:G,directives:$})}parseArgumentDefs(){return this.optionalMany(L.PAREN_L,this.parseInputValueDef,L.PAREN_R)}parseInputValueDef(){let X=this._lexer.token,Y=this.parseDescription(),Z=this.parseName();this.expectToken(L.COLON);let J=this.parseTypeReference(),G;if(this.expectOptionalToken(L.EQUALS))G=this.parseConstValueLiteral();let $=this.parseConstDirectives();return this.node(X,{kind:R.INPUT_VALUE_DEFINITION,description:Y,name:Z,type:J,defaultValue:G,directives:$})}parseInterfaceTypeDefinition(){let X=this._lexer.token,Y=this.parseDescription();this.expectKeyword("interface");let Z=this.parseName(),J=this.parseImplementsInterfaces(),G=this.parseConstDirectives(),$=this.parseFieldsDefinition();return this.node(X,{kind:R.INTERFACE_TYPE_DEFINITION,description:Y,name:Z,interfaces:J,directives:G,fields:$})}parseUnionTypeDefinition(){let X=this._lexer.token,Y=this.parseDescription();this.expectKeyword("union");let Z=this.parseName(),J=this.parseConstDirectives(),G=this.parseUnionMemberTypes();return this.node(X,{kind:R.UNION_TYPE_DEFINITION,description:Y,name:Z,directives:J,types:G})}parseUnionMemberTypes(){return this.expectOptionalToken(L.EQUALS)?this.delimitedMany(L.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){let X=this._lexer.token,Y=this.parseDescription();this.expectKeyword("enum");let Z=this.parseName(),J=this.parseConstDirectives(),G=this.parseEnumValuesDefinition();return this.node(X,{kind:R.ENUM_TYPE_DEFINITION,description:Y,name:Z,directives:J,values:G})}parseEnumValuesDefinition(){return this.optionalMany(L.BRACE_L,this.parseEnumValueDefinition,L.BRACE_R)}parseEnumValueDefinition(){let X=this._lexer.token,Y=this.parseDescription(),Z=this.parseEnumValueName(),J=this.parseConstDirectives();return this.node(X,{kind:R.ENUM_VALUE_DEFINITION,description:Y,name:Z,directives:J})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw c(this._lexer.source,this._lexer.token.start,`${AZ(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){let X=this._lexer.token,Y=this.parseDescription();this.expectKeyword("input");let Z=this.parseName(),J=this.parseConstDirectives(),G=this.parseInputFieldsDefinition();return this.node(X,{kind:R.INPUT_OBJECT_TYPE_DEFINITION,description:Y,name:Z,directives:J,fields:G})}parseInputFieldsDefinition(){return this.optionalMany(L.BRACE_L,this.parseInputValueDef,L.BRACE_R)}parseTypeSystemExtension(){let X=this._lexer.lookahead();if(X.kind===L.NAME)switch(X.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(X)}parseSchemaExtension(){let X=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");let Y=this.parseConstDirectives(),Z=this.optionalMany(L.BRACE_L,this.parseOperationTypeDefinition,L.BRACE_R);if(Y.length===0&&Z.length===0)throw this.unexpected();return this.node(X,{kind:R.SCHEMA_EXTENSION,directives:Y,operationTypes:Z})}parseScalarTypeExtension(){let X=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");let Y=this.parseName(),Z=this.parseConstDirectives();if(Z.length===0)throw this.unexpected();return this.node(X,{kind:R.SCALAR_TYPE_EXTENSION,name:Y,directives:Z})}parseObjectTypeExtension(){let X=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");let Y=this.parseName(),Z=this.parseImplementsInterfaces(),J=this.parseConstDirectives(),G=this.parseFieldsDefinition();if(Z.length===0&&J.length===0&&G.length===0)throw this.unexpected();return this.node(X,{kind:R.OBJECT_TYPE_EXTENSION,name:Y,interfaces:Z,directives:J,fields:G})}parseInterfaceTypeExtension(){let X=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");let Y=this.parseName(),Z=this.parseImplementsInterfaces(),J=this.parseConstDirectives(),G=this.parseFieldsDefinition();if(Z.length===0&&J.length===0&&G.length===0)throw this.unexpected();return this.node(X,{kind:R.INTERFACE_TYPE_EXTENSION,name:Y,interfaces:Z,directives:J,fields:G})}parseUnionTypeExtension(){let X=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");let Y=this.parseName(),Z=this.parseConstDirectives(),J=this.parseUnionMemberTypes();if(Z.length===0&&J.length===0)throw this.unexpected();return this.node(X,{kind:R.UNION_TYPE_EXTENSION,name:Y,directives:Z,types:J})}parseEnumTypeExtension(){let X=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");let Y=this.parseName(),Z=this.parseConstDirectives(),J=this.parseEnumValuesDefinition();if(Z.length===0&&J.length===0)throw this.unexpected();return this.node(X,{kind:R.ENUM_TYPE_EXTENSION,name:Y,directives:Z,values:J})}parseInputObjectTypeExtension(){let X=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");let Y=this.parseName(),Z=this.parseConstDirectives(),J=this.parseInputFieldsDefinition();if(Z.length===0&&J.length===0)throw this.unexpected();return this.node(X,{kind:R.INPUT_OBJECT_TYPE_EXTENSION,name:Y,directives:Z,fields:J})}parseDirectiveDefinition(){let X=this._lexer.token,Y=this.parseDescription();this.expectKeyword("directive"),this.expectToken(L.AT);let Z=this.parseName(),J=this.parseArgumentDefs(),G=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");let $=this.parseDirectiveLocations();return this.node(X,{kind:R.DIRECTIVE_DEFINITION,description:Y,name:Z,arguments:J,repeatable:G,locations:$})}parseDirectiveLocations(){return this.delimitedMany(L.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){let X=this._lexer.token,Y=this.parseName();if(Object.prototype.hasOwnProperty.call(NX,Y.value))return Y;throw this.unexpected(X)}node(X,Y){if(this._options.noLocation!==!0)Y.loc=new UZ(X,this._lexer.lastToken,this._lexer.source);return Y}peek(X){return this._lexer.token.kind===X}expectToken(X){let Y=this._lexer.token;if(Y.kind===X)return this.advanceLexer(),Y;throw c(this._lexer.source,Y.start,`Expected ${m6(X)}, found ${AZ(Y)}.`)}expectOptionalToken(X){if(this._lexer.token.kind===X)return this.advanceLexer(),!0;return!1}expectKeyword(X){let Y=this._lexer.token;if(Y.kind===L.NAME&&Y.value===X)this.advanceLexer();else throw c(this._lexer.source,Y.start,`Expected "${X}", found ${AZ(Y)}.`)}expectOptionalKeyword(X){let Y=this._lexer.token;if(Y.kind===L.NAME&&Y.value===X)return this.advanceLexer(),!0;return!1}unexpected(X){let Y=X!==null&&X!==void 0?X:this._lexer.token;return c(this._lexer.source,Y.start,`Unexpected ${AZ(Y)}.`)}any(X,Y,Z){this.expectToken(X);let J=[];while(!this.expectOptionalToken(Z))J.push(Y.call(this));return J}optionalMany(X,Y,Z){if(this.expectOptionalToken(X)){let J=[];do J.push(Y.call(this));while(!this.expectOptionalToken(Z));return J}return[]}many(X,Y,Z){this.expectToken(X);let J=[];do J.push(Y.call(this));while(!this.expectOptionalToken(Z));return J}delimitedMany(X,Y){this.expectOptionalToken(X);let Z=[];do Z.push(Y.call(this));while(this.expectOptionalToken(X));return Z}advanceLexer(){let{maxTokens:X}=this._options,Y=this._lexer.advance();if(Y.kind!==L.EOF){if(++this._tokenCounter,X!==void 0&&this._tokenCounter>X)throw c(this._lexer.source,Y.start,`Document contains more that ${X} tokens. Parsing aborted.`)}}}function AZ(X){let Y=X.value;return m6(X.kind)+(Y!=null?` "${Y}"`:"")}function m6(X){return b6(X)?`"${X}"`:X}function u6(X){return`"${X.replace(JJ,GJ)}"`}var JJ=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function GJ(X){return $J[X.charCodeAt(0)]}var $J=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];var wY=Object.freeze({});function a(X,Y,Z=W5){let J=new Map;for(let A of Object.values(R))J.set(A,P5(Y,A));let G=void 0,$=Array.isArray(X),H=[X],B=-1,z=[],W=X,U=void 0,Q=void 0,P=[],V=[];do{B++;let A=B===H.length,F=A&&z.length!==0;if(A){if(U=V.length===0?void 0:P[P.length-1],W=Q,Q=V.pop(),F)if($){W=W.slice();let w=0;for(let[C,N]of z){let O=C-w;if(N===null)W.splice(O,1),w++;else W[O]=N}}else{W={...W};for(let[w,C]of z)W[w]=C}B=G.index,H=G.keys,z=G.edits,$=G.inArray,G=G.prev}else if(Q){if(U=$?B:H[B],W=Q[U],W===null||W===void 0)continue;P.push(U)}let T;if(!Array.isArray(W)){var q,D;z5(W)||GX(!1,`Invalid AST Node: ${WX(W)}.`);let w=A?(q=J.get(W.kind))===null||q===void 0?void 0:q.leave:(D=J.get(W.kind))===null||D===void 0?void 0:D.enter;if(T=w===null||w===void 0?void 0:w.call(Y,W,U,Q,P,V),T===wY)break;if(T===!1){if(!A){P.pop();continue}}else if(T!==void 0){if(z.push([U,T]),!A)if(z5(T))W=T;else{P.pop();continue}}}if(T===void 0&&F)z.push([U,W]);if(A)P.pop();else{var M;if(G={inArray:$,index:B,keys:H,edits:z,prev:G},$=Array.isArray(W),H=$?W:(M=Z[W.kind])!==null&&M!==void 0?M:[],B=-1,z=[],Q)V.push(Q);Q=W}}while(G!==void 0);if(z.length!==0)return z[z.length-1][1];return X}function P5(X,Y){let Z=X[Y];if(typeof Z==="object")return Z;else if(typeof Z==="function")return{enter:Z,leave:void 0};return{enter:X.enter,leave:X.leave}}function MZ(X){return a(X,BJ)}var HJ=80,BJ={Name:{leave:(X)=>X.value},Variable:{leave:(X)=>"$"+X.name},Document:{leave:(X)=>I(X.definitions,"\n\n")},OperationDefinition:{leave(X){let Y=k("(",I(X.variableDefinitions,", "),")"),Z=I([X.operation,I([X.name,Y]),I(X.directives," ")]," ");return(Z==="query"?"":Z+" ")+X.selectionSet}},VariableDefinition:{leave:({variable:X,type:Y,defaultValue:Z,directives:J})=>X+": "+Y+k(" = ",Z)+k(" ",I(J," "))},SelectionSet:{leave:({selections:X})=>qY(X)},Field:{leave({alias:X,name:Y,arguments:Z,directives:J,selectionSet:G}){let $=k("",X,": ")+Y,H=$+k("(",I(Z,", "),")");if(H.length>HJ)H=$+k("(\n",DZ(I(Z,"\n")),"\n)");return I([H,I(J," "),G]," ")}},Argument:{leave:({name:X,value:Y})=>X+": "+Y},FragmentSpread:{leave:({name:X,directives:Y})=>"..."+X+k(" ",I(Y," "))},InlineFragment:{leave:({typeCondition:X,directives:Y,selectionSet:Z})=>I(["...",k("on ",X),I(Y," "),Z]," ")},FragmentDefinition:{leave:({name:X,typeCondition:Y,variableDefinitions:Z,directives:J,selectionSet:G})=>`fragment ${X}${k("(",I(Z,", "),")")} on ${Y} ${k("",I(J," ")," ")}`+G},IntValue:{leave:({value:X})=>X},FloatValue:{leave:({value:X})=>X},StringValue:{leave:({value:X,block:Y})=>Y?k6(X):u6(X)},BooleanValue:{leave:({value:X})=>X?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:X})=>X},ListValue:{leave:({values:X})=>"["+I(X,", ")+"]"},ObjectValue:{leave:({fields:X})=>"{"+I(X,", ")+"}"},ObjectField:{leave:({name:X,value:Y})=>X+": "+Y},Directive:{leave:({name:X,arguments:Y})=>"@"+X+k("(",I(Y,", "),")")},NamedType:{leave:({name:X})=>X},ListType:{leave:({type:X})=>"["+X+"]"},NonNullType:{leave:({type:X})=>X+"!"},SchemaDefinition:{leave:({description:X,directives:Y,operationTypes:Z})=>k("",X,"\n")+I(["schema",I(Y," "),qY(Z)]," ")},OperationTypeDefinition:{leave:({operation:X,type:Y})=>X+": "+Y},ScalarTypeDefinition:{leave:({description:X,name:Y,directives:Z})=>k("",X,"\n")+I(["scalar",Y,I(Z," ")]," ")},ObjectTypeDefinition:{leave:({description:X,name:Y,interfaces:Z,directives:J,fields:G})=>k("",X,"\n")+I(["type",Y,k("implements ",I(Z," & ")),I(J," "),qY(G)]," ")},FieldDefinition:{leave:({description:X,name:Y,arguments:Z,type:J,directives:G})=>k("",X,"\n")+Y+(p6(Z)?k("(\n",DZ(I(Z,"\n")),"\n)"):k("(",I(Z,", "),")"))+": "+J+k(" ",I(G," "))},InputValueDefinition:{leave:({description:X,name:Y,type:Z,defaultValue:J,directives:G})=>k("",X,"\n")+I([Y+": "+Z,k("= ",J),I(G," ")]," ")},InterfaceTypeDefinition:{leave:({description:X,name:Y,interfaces:Z,directives:J,fields:G})=>k("",X,"\n")+I(["interface",Y,k("implements ",I(Z," & ")),I(J," "),qY(G)]," ")},UnionTypeDefinition:{leave:({description:X,name:Y,directives:Z,types:J})=>k("",X,"\n")+I(["union",Y,I(Z," "),k("= ",I(J," | "))]," ")},EnumTypeDefinition:{leave:({description:X,name:Y,directives:Z,values:J})=>k("",X,"\n")+I(["enum",Y,I(Z," "),qY(J)]," ")},EnumValueDefinition:{leave:({description:X,name:Y,directives:Z})=>k("",X,"\n")+I([Y,I(Z," ")]," ")},InputObjectTypeDefinition:{leave:({description:X,name:Y,directives:Z,fields:J})=>k("",X,"\n")+I(["input",Y,I(Z," "),qY(J)]," ")},DirectiveDefinition:{leave:({description:X,name:Y,arguments:Z,repeatable:J,locations:G})=>k("",X,"\n")+"directive @"+Y+(p6(Z)?k("(\n",DZ(I(Z,"\n")),"\n)"):k("(",I(Z,", "),")"))+(J?" repeatable":"")+" on "+I(G," | ")},SchemaExtension:{leave:({directives:X,operationTypes:Y})=>I(["extend schema",I(X," "),qY(Y)]," ")},ScalarTypeExtension:{leave:({name:X,directives:Y})=>I(["extend scalar",X,I(Y," ")]," ")},ObjectTypeExtension:{leave:({name:X,interfaces:Y,directives:Z,fields:J})=>I(["extend type",X,k("implements ",I(Y," & ")),I(Z," "),qY(J)]," ")},InterfaceTypeExtension:{leave:({name:X,interfaces:Y,directives:Z,fields:J})=>I(["extend interface",X,k("implements ",I(Y," & ")),I(Z," "),qY(J)]," ")},UnionTypeExtension:{leave:({name:X,directives:Y,types:Z})=>I(["extend union",X,I(Y," "),k("= ",I(Z," | "))]," ")},EnumTypeExtension:{leave:({name:X,directives:Y,values:Z})=>I(["extend enum",X,I(Y," "),qY(Z)]," ")},InputObjectTypeExtension:{leave:({name:X,directives:Y,fields:Z})=>I(["extend input",X,I(Y," "),qY(Z)]," ")}};function I(X,Y=""){var Z;return(Z=X===null||X===void 0?void 0:X.filter((J)=>J).join(Y))!==null&&Z!==void 0?Z:""}function qY(X){return k("{\n",DZ(I(X,"\n")),"\n}")}function k(X,Y,Z=""){return Y!=null&&Y!==""?X+Y+Z:""}function DZ(X){return k("  ",X.replace(/\n/g,"\n  "))}function p6(X){var Y;return(Y=X===null||X===void 0?void 0:X.some((Z)=>Z.includes("\n")))!==null&&Y!==void 0?Y:!1}function jX(X){return X.kind===R.FIELD||X.kind===R.FRAGMENT_SPREAD||X.kind===R.INLINE_FRAGMENT}function DY(X,Y){var Z=X.directives;if(!Z||!Z.length)return!0;return d6(Z).every(function(J){var{directive:G,ifArgument:$}=J,H=!1;if($.value.kind==="Variable")H=Y&&Y[$.value.name.value],K(H!==void 0,106,G.name.value);else H=$.value.value;return G.name.value==="skip"?!H:H})}function CY(X,Y,Z){var J=new Set(X),G=J.size;return a(Y,{Directive:function($){if(J.delete($.name.value)&&(!Z||!J.size))return wY}}),Z?!J.size:J.size<G}function V5(X){return X&&CY(["client","export"],X,!0)}function KJ(X){var Y=X.name.value;return Y==="skip"||Y==="include"}function d6(X){var Y=[];if(X&&X.length)X.forEach(function(Z){if(!KJ(Z))return;var J=Z.arguments,G=Z.name.value;K(J&&J.length===1,107,G);var $=J[0];K($.name&&$.name.value==="if",108,G);var H=$.value;K(H&&(H.kind==="Variable"||H.kind==="BooleanValue"),109,G),Y.push({directive:Z,ifArgument:$})});return Y}function E5(X){var Y,Z,J=(Y=X.directives)===null||Y===void 0?void 0:Y.find(function($){var H=$.name;return H.value==="unmask"});if(!J)return"mask";var G=(Z=J.arguments)===null||Z===void 0?void 0:Z.find(function($){var H=$.name;return H.value==="mode"});if(globalThis.__DEV__!==!1){if(G){if(G.value.kind===R.VARIABLE)globalThis.__DEV__!==!1&&K.warn(110);else if(G.value.kind!==R.STRING)globalThis.__DEV__!==!1&&K.warn(111);else if(G.value.value!=="migrate")globalThis.__DEV__!==!1&&K.warn(112,G.value.value)}}if(G&&"value"in G.value&&G.value.value==="migrate")return"migrate";return"unmask"}var wJ=()=>Object.create(null),{forEach:CJ,slice:c6}=Array.prototype,{hasOwnProperty:RJ}=Object.prototype;class XY{constructor(X=!0,Y=wJ){this.weakness=X,this.makeData=Y}lookup(){return this.lookupArray(arguments)}lookupArray(X){let Y=this;return CJ.call(X,(Z)=>Y=Y.getChildTrie(Z)),RJ.call(Y,"data")?Y.data:Y.data=this.makeData(c6.call(X))}peek(){return this.peekArray(arguments)}peekArray(X){let Y=this;for(let Z=0,J=X.length;Y&&Z<J;++Z){let G=Y.mapFor(X[Z],!1);Y=G&&G.get(X[Z])}return Y&&Y.data}remove(){return this.removeArray(arguments)}removeArray(X){let Y;if(X.length){let Z=X[0],J=this.mapFor(Z,!1),G=J&&J.get(Z);if(G){if(Y=G.removeArray(c6.call(X,1)),!G.data&&!G.weak&&!(G.strong&&G.strong.size))J.delete(Z)}}else Y=this.data,delete this.data;return Y}getChildTrie(X){let Y=this.mapFor(X,!0),Z=Y.get(X);if(!Z)Y.set(X,Z=new XY(this.weakness,this.makeData));return Z}mapFor(X,Y){return this.weakness&&NJ(X)?this.weak||(Y?this.weak=new WeakMap:void 0):this.strong||(Y?this.strong=new Map:void 0)}}function NJ(X){switch(typeof X){case"object":if(X===null)break;case"function":return!0}return!1}var IJ=e(function(){return navigator.product})=="ReactNative",$Y=typeof WeakMap==="function"&&!(IJ&&!global.HermesInternal),zX=typeof WeakSet==="function",A5=typeof Symbol==="function"&&typeof Symbol.for==="function",vY=A5&&Symbol.asyncIterator,l4=typeof e(function(){return window.document.createElement})==="function",s4=e(function(){return navigator.userAgent.indexOf("jsdom")>=0})||!1;function h(X){return X!==null&&typeof X==="object"}function q5(X,Y){var Z=Y,J=[];if(X.definitions.forEach(function($){if($.kind==="OperationDefinition")throw f(113,$.operation,$.name?" named '".concat($.name.value,"'"):"");if($.kind==="FragmentDefinition")J.push($)}),typeof Z==="undefined")K(J.length===1,114,J.length),Z=J[0].name.value;var G=E(E({},X),{definitions:m([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:Z}}]}}],X.definitions,!0)});return G}function HY(X){if(X===void 0)X=[];var Y={};return X.forEach(function(Z){Y[Z.name.value]=Z}),Y}function RY(X,Y){switch(X.kind){case"InlineFragment":return X;case"FragmentSpread":{var Z=X.name.value;if(typeof Y==="function")return Y(Z);var J=Y&&Y[Z];return K(J,115,Z),J||null}default:return null}}function D5(X){var Y=!0;return a(X,{FragmentSpread:function(Z){if(Y=!!Z.directives&&Z.directives.some(function(J){return J.name.value==="unmask"}),!Y)return wY}}),Y}function OJ(){}class nY{constructor(X=1/0,Y=OJ){this.max=X,this.dispose=Y,this.map=new Map,this.newest=null,this.oldest=null}has(X){return this.map.has(X)}get(X){let Y=this.getNode(X);return Y&&Y.value}get size(){return this.map.size}getNode(X){let Y=this.map.get(X);if(Y&&Y!==this.newest){let{older:Z,newer:J}=Y;if(J)J.older=Z;if(Z)Z.newer=J;if(Y.older=this.newest,Y.older.newer=Y,Y.newer=null,this.newest=Y,Y===this.oldest)this.oldest=J}return Y}set(X,Y){let Z=this.getNode(X);if(Z)return Z.value=Y;if(Z={key:X,value:Y,newer:null,older:this.newest},this.newest)this.newest.newer=Z;return this.newest=Z,this.oldest=this.oldest||Z,this.map.set(X,Z),Z.value}clean(){while(this.oldest&&this.map.size>this.max)this.delete(this.oldest.key)}delete(X){let Y=this.map.get(X);if(Y){if(Y===this.newest)this.newest=Y.older;if(Y===this.oldest)this.oldest=Y.newer;if(Y.newer)Y.newer.older=Y.older;if(Y.older)Y.older.newer=Y.newer;return this.map.delete(X),this.dispose(Y.value,X),!0}return!1}}function M5(){}var jJ=M5,SJ=typeof WeakRef!=="undefined"?WeakRef:function(X){return{deref:()=>X}},xJ=typeof WeakMap!=="undefined"?WeakMap:Map,kJ=typeof FinalizationRegistry!=="undefined"?FinalizationRegistry:function(){return{register:M5,unregister:M5}},hJ=10024;class NY{constructor(X=1/0,Y=jJ){this.max=X,this.dispose=Y,this.map=new xJ,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{let Z=this.unfinalizedNodes.values();for(let J=0;J<hJ;J++){let G=Z.next().value;if(!G)break;this.unfinalizedNodes.delete(G);let $=G.key;delete G.key,G.keyRef=new SJ($),this.registry.register($,G,G)}if(this.unfinalizedNodes.size>0)queueMicrotask(this.finalize);else this.finalizationScheduled=!1},this.registry=new kJ(this.deleteNode.bind(this))}has(X){return this.map.has(X)}get(X){let Y=this.getNode(X);return Y&&Y.value}getNode(X){let Y=this.map.get(X);if(Y&&Y!==this.newest){let{older:Z,newer:J}=Y;if(J)J.older=Z;if(Z)Z.newer=J;if(Y.older=this.newest,Y.older.newer=Y,Y.newer=null,this.newest=Y,Y===this.oldest)this.oldest=J}return Y}set(X,Y){let Z=this.getNode(X);if(Z)return Z.value=Y;if(Z={key:X,value:Y,newer:null,older:this.newest},this.newest)this.newest.newer=Z;return this.newest=Z,this.oldest=this.oldest||Z,this.scheduleFinalization(Z),this.map.set(X,Z),this.size++,Z.value}clean(){while(this.oldest&&this.size>this.max)this.deleteNode(this.oldest)}deleteNode(X){if(X===this.newest)this.newest=X.older;if(X===this.oldest)this.oldest=X.newer;if(X.newer)X.newer.older=X.older;if(X.older)X.older.newer=X.newer;this.size--;let Y=X.key||X.keyRef&&X.keyRef.deref();if(this.dispose(X.value,Y),!X.keyRef)this.unfinalizedNodes.delete(X);else this.registry.unregister(X);if(Y)this.map.delete(Y)}delete(X){let Y=this.map.get(X);if(Y)return this.deleteNode(Y),!0;return!1}scheduleFinalization(X){if(this.unfinalizedNodes.add(X),!this.finalizationScheduled)this.finalizationScheduled=!0,queueMicrotask(this.finalize)}}var L5=new WeakSet;function l6(X){if(X.size<=(X.max||-1))return;if(!L5.has(X))L5.add(X),setTimeout(function(){X.clean(),L5.delete(X)},100)}var UX=function(X,Y){var Z=new NY(X,Y);return Z.set=function(J,G){var $=NY.prototype.set.call(this,J,G);return l6(this),$},Z},LZ=function(X,Y){var Z=new nY(X,Y);return Z.set=function(J,G){var $=nY.prototype.set.call(this,J,G);return l6(this),$},Z};var bJ=Symbol.for("apollo.cacheSize"),n=E({},bY[bJ]);var oY={};function TZ(X,Y){oY[X]=Y}var s6=globalThis.__DEV__!==!1?vJ:void 0,a6=globalThis.__DEV__!==!1?fJ:void 0,n6=globalThis.__DEV__!==!1?o6:void 0;function _J(){var X={parser:1000,canonicalStringify:1000,print:2000,"documentTransform.cache":2000,"queryManager.getDocumentInfo":2000,"PersistedQueryLink.persistedQueryHashes":2000,"fragmentRegistry.transform":2000,"fragmentRegistry.lookup":1000,"fragmentRegistry.findFragmentSpreads":4000,"cache.fragmentQueryDocuments":1000,"removeTypenameFromVariables.getVariableDefinitions":2000,"inMemoryCache.maybeBroadcastWatch":5000,"inMemoryCache.executeSelectionSet":50000,"inMemoryCache.executeSubSelectedArray":1e4};return Object.fromEntries(Object.entries(X).map(function(Y){var Z=Y[0],J=Y[1];return[Z,n[Z]||J]}))}function vJ(){var X,Y,Z,J,G;if(globalThis.__DEV__===!1)throw new Error("only supported in development mode");return{limits:_J(),sizes:E({print:(X=oY.print)===null||X===void 0?void 0:X.call(oY),parser:(Y=oY.parser)===null||Y===void 0?void 0:Y.call(oY),canonicalStringify:(Z=oY.canonicalStringify)===null||Z===void 0?void 0:Z.call(oY),links:F5(this.link),queryManager:{getDocumentInfo:this.queryManager.transformCache.size,documentTransforms:i6(this.queryManager.documentTransform)}},(G=(J=this.cache).getMemoryInternals)===null||G===void 0?void 0:G.call(J))}}function o6(){return{cache:{fragmentQueryDocuments:fY(this.getFragmentDoc)}}}function fJ(){var X=this.config.fragments;return E(E({},o6.apply(this)),{addTypenameDocumentTransform:i6(this.addTypenameTransform),inMemoryCache:{executeSelectionSet:fY(this.storeReader.executeSelectionSet),executeSubSelectedArray:fY(this.storeReader.executeSubSelectedArray),maybeBroadcastWatch:fY(this.maybeBroadcastWatch)},fragmentRegistry:{findFragmentSpreads:fY(X===null||X===void 0?void 0:X.findFragmentSpreads),lookup:fY(X===null||X===void 0?void 0:X.lookup),transform:fY(X===null||X===void 0?void 0:X.transform)}})}function gJ(X){return!!X&&"dirtyKey"in X}function fY(X){return gJ(X)?X.size:void 0}function r6(X){return X!=null}function i6(X){return T5(X).map(function(Y){return{cache:Y}})}function T5(X){return X?m(m([fY(X===null||X===void 0?void 0:X.performWork)],T5(X===null||X===void 0?void 0:X.left),!0),T5(X===null||X===void 0?void 0:X.right),!0).filter(r6):[]}function F5(X){var Y;return X?m(m([(Y=X===null||X===void 0?void 0:X.getMemoryInternals)===null||Y===void 0?void 0:Y.call(X)],F5(X===null||X===void 0?void 0:X.left),!0),F5(X===null||X===void 0?void 0:X.right),!0).filter(r6):[]}var ZY=Object.assign(function X(Y){return JSON.stringify(Y,yJ)},{reset:function(){QX=new LZ(n.canonicalStringify||1000)}});if(globalThis.__DEV__!==!1)TZ("canonicalStringify",function(){return QX.size});var QX;ZY.reset();function yJ(X,Y){if(Y&&typeof Y==="object"){var Z=Object.getPrototypeOf(Y);if(Z===Object.prototype||Z===null){var J=Object.keys(Y);if(J.every(mJ))return Y;var G=JSON.stringify(J),$=QX.get(G);if(!$){J.sort();var H=JSON.stringify(J);$=QX.get(H)||J,QX.set(G,$),QX.set(H,$)}var B=Object.create(Z);return $.forEach(function(z){B[z]=Y[z]}),B}}return Y}function mJ(X,Y,Z){return Y===0||Z[Y-1]<=X}function MY(X){return{__ref:String(X)}}function x(X){return Boolean(X&&typeof X==="object"&&typeof X.__ref==="string")}function K5(X){return h(X)&&X.kind==="Document"&&Array.isArray(X.definitions)}function uJ(X){return X.kind==="StringValue"}function pJ(X){return X.kind==="BooleanValue"}function dJ(X){return X.kind==="IntValue"}function cJ(X){return X.kind==="FloatValue"}function lJ(X){return X.kind==="Variable"}function sJ(X){return X.kind==="ObjectValue"}function aJ(X){return X.kind==="ListValue"}function nJ(X){return X.kind==="EnumValue"}function oJ(X){return X.kind==="NullValue"}function gY(X,Y,Z,J){if(dJ(Z)||cJ(Z))X[Y.value]=Number(Z.value);else if(pJ(Z)||uJ(Z))X[Y.value]=Z.value;else if(sJ(Z)){var G={};Z.fields.map(function(H){return gY(G,H.name,H.value,J)}),X[Y.value]=G}else if(lJ(Z)){var $=(J||{})[Z.name.value];X[Y.value]=$}else if(aJ(Z))X[Y.value]=Z.values.map(function(H){var B={};return gY(B,Y,H,J),B[Y.value]});else if(nJ(Z))X[Y.value]=Z.value;else if(oJ(Z))X[Y.value]=null;else throw f(124,Y.value,Z.kind)}function w5(X,Y){var Z=null;if(X.directives)Z={},X.directives.forEach(function(G){if(Z[G.name.value]={},G.arguments)G.arguments.forEach(function($){var{name:H,value:B}=$;return gY(Z[G.name.value],H,B,Y)})});var J=null;if(X.arguments&&X.arguments.length)J={},X.arguments.forEach(function(G){var{name:$,value:H}=G;return gY(J,$,H,Y)});return FZ(X.name.value,J,Z)}var rJ=["connection","include","skip","client","rest","export","nonreactive"],SX=ZY,FZ=Object.assign(function(X,Y,Z){if(Y&&Z&&Z.connection&&Z.connection.key)if(Z.connection.filter&&Z.connection.filter.length>0){var J=Z.connection.filter?Z.connection.filter:[];J.sort();var G={};return J.forEach(function(B){G[B]=Y[B]}),"".concat(Z.connection.key,"(").concat(SX(G),")")}else return Z.connection.key;var $=X;if(Y){var H=SX(Y);$+="(".concat(H,")")}if(Z)Object.keys(Z).forEach(function(B){if(rJ.indexOf(B)!==-1)return;if(Z[B]&&Object.keys(Z[B]).length)$+="@".concat(B,"(").concat(SX(Z[B]),")");else $+="@".concat(B)});return $},{setStringify:function(X){var Y=SX;return SX=X,Y}});function IY(X,Y){if(X.arguments&&X.arguments.length){var Z={};return X.arguments.forEach(function(J){var{name:G,value:$}=J;return gY(Z,G,$,Y)}),Z}return null}function YY(X){return X.alias?X.alias.value:X.name.value}function xX(X,Y,Z){var J;for(var G=0,$=Y.selections;G<$.length;G++){var H=$[G];if(JY(H)){if(H.name.value==="__typename")return X[YY(H)]}else if(J)J.push(H);else J=[H]}if(typeof X.__typename==="string")return X.__typename;if(J)for(var B=0,z=J;B<z.length;B++){var H=z[B],W=xX(X,RY(H,Z).selectionSet,Z);if(typeof W==="string")return W}}function JY(X){return X.kind==="Field"}function C5(X){return X.kind==="InlineFragment"}function OY(X){K(X&&X.kind==="Document",116);var Y=X.definitions.filter(function(Z){return Z.kind!=="FragmentDefinition"}).map(function(Z){if(Z.kind!=="OperationDefinition")throw f(117,Z.kind);return Z});return K(Y.length<=1,118,Y.length),X}function BY(X){return OY(X),X.definitions.filter(function(Y){return Y.kind==="OperationDefinition"})[0]}function yY(X){return X.definitions.filter(function(Y){return Y.kind==="OperationDefinition"&&!!Y.name}).map(function(Y){return Y.name.value})[0]||null}function WY(X){return X.definitions.filter(function(Y){return Y.kind==="FragmentDefinition"})}function kX(X){var Y=BY(X);return K(Y&&Y.operation==="query",119),Y}function hX(X){K(X.kind==="Document",120),K(X.definitions.length<=1,121);var Y=X.definitions[0];return K(Y.kind==="FragmentDefinition",122),Y}function LY(X){OY(X);var Y;for(var Z=0,J=X.definitions;Z<J.length;Z++){var G=J[Z];if(G.kind==="OperationDefinition"){var $=G.operation;if($==="query"||$==="mutation"||$==="subscription")return G}if(G.kind==="FragmentDefinition"&&!Y)Y=G}if(Y)return Y;throw f(123)}function rY(X){var Y=Object.create(null),Z=X&&X.variableDefinitions;if(Z&&Z.length)Z.forEach(function(J){if(J.defaultValue)gY(Y,J.variable.name,J.defaultValue)});return Y}var r=null,t6={},iJ=1,tJ=()=>class X{constructor(){this.id=["slot",iJ++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let Y=r;Y;Y=Y.parent)if(this.id in Y.slots){let Z=Y.slots[this.id];if(Z===t6)break;if(Y!==r)r.slots[this.id]=Z;return!0}if(r)r.slots[this.id]=t6;return!1}getValue(){if(this.hasValue())return r.slots[this.id]}withValue(Y,Z,J,G){let $={__proto__:null,[this.id]:Y},H=r;r={parent:H,slots:$};try{return Z.apply(G,J)}finally{r=H}}static bind(Y){let Z=r;return function(){let J=r;try{return r=Z,Y.apply(this,arguments)}finally{r=J}}}static noContext(Y,Z,J){if(r){let G=r;try{return r=null,Y.apply(J,Z)}finally{r=G}}else return Y.apply(J,Z)}};function e6(X){try{return X()}catch(Y){}}var R5="@wry/context:Slot",eJ=e6(()=>globalThis)||e6(()=>global)||Object.create(null),Y8=eJ,QY=Y8[R5]||Array[R5]||function(X){try{Object.defineProperty(Y8,R5,{value:X,enumerable:!1,writable:!1,configurable:!0})}finally{return X}}(tJ());var iY=new QY;var{hasOwnProperty:X8}=Object.prototype,bX=Array.from||function(X){let Y=[];return X.forEach((Z)=>Y.push(Z)),Y};function PX(X){let{unsubscribe:Y}=X;if(typeof Y==="function")X.unsubscribe=void 0,Y()}var _X=[],G0=100;function VX(X,Y){if(!X)throw new Error(Y||"assertion failure")}function J8(X,Y){let Z=X.length;return Z>0&&Z===Y.length&&X[Z-1]===Y[Z-1]}function G8(X){switch(X.length){case 0:throw new Error("unknown value");case 1:return X[0];case 2:throw X[1]}}function $8(X){return X.slice(0)}class vX{constructor(X){this.fn=X,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++vX.count}peek(){if(this.value.length===1&&!mY(this))return Z8(this),this.value[0]}recompute(X){return VX(!this.recomputing,"already recomputing"),Z8(this),mY(this)?$0(this,X):G8(this.value)}setDirty(){if(this.dirty)return;this.dirty=!0,H8(this),PX(this)}dispose(){this.setDirty(),Q8(this),N5(this,(X,Y)=>{X.setDirty(),P8(X,this)})}forget(){this.dispose()}dependOn(X){if(X.add(this),!this.deps)this.deps=_X.pop()||new Set;this.deps.add(X)}forgetDeps(){if(this.deps)bX(this.deps).forEach((X)=>X.delete(this)),this.deps.clear(),_X.push(this.deps),this.deps=null}}vX.count=0;function Z8(X){let Y=iY.getValue();if(Y){if(X.parents.add(Y),!Y.childValues.has(X))Y.childValues.set(X,[]);if(mY(X))W8(Y,X);else z8(Y,X);return Y}}function $0(X,Y){if(Q8(X),iY.withValue(X,H0,[X,Y]),W0(X,Y))B0(X);return G8(X.value)}function H0(X,Y){X.recomputing=!0;let{normalizeResult:Z}=X,J;if(Z&&X.value.length===1)J=$8(X.value);X.value.length=0;try{if(X.value[0]=X.fn.apply(null,Y),Z&&J&&!J8(J,X.value))try{X.value[0]=Z(X.value[0],J[0])}catch(G){}}catch(G){X.value[1]=G}X.recomputing=!1}function mY(X){return X.dirty||!!(X.dirtyChildren&&X.dirtyChildren.size)}function B0(X){if(X.dirty=!1,mY(X))return;B8(X)}function H8(X){N5(X,W8)}function B8(X){N5(X,z8)}function N5(X,Y){let Z=X.parents.size;if(Z){let J=bX(X.parents);for(let G=0;G<Z;++G)Y(J[G],X)}}function W8(X,Y){VX(X.childValues.has(Y)),VX(mY(Y));let Z=!mY(X);if(!X.dirtyChildren)X.dirtyChildren=_X.pop()||new Set;else if(X.dirtyChildren.has(Y))return;if(X.dirtyChildren.add(Y),Z)H8(X)}function z8(X,Y){VX(X.childValues.has(Y)),VX(!mY(Y));let Z=X.childValues.get(Y);if(Z.length===0)X.childValues.set(Y,$8(Y.value));else if(!J8(Z,Y.value))X.setDirty();if(U8(X,Y),mY(X))return;B8(X)}function U8(X,Y){let Z=X.dirtyChildren;if(Z){if(Z.delete(Y),Z.size===0){if(_X.length<G0)_X.push(Z);X.dirtyChildren=null}}}function Q8(X){if(X.childValues.size>0)X.childValues.forEach((Y,Z)=>{P8(X,Z)});X.forgetDeps(),VX(X.dirtyChildren===null)}function P8(X,Y){Y.parents.delete(X),X.childValues.delete(Y),U8(X,Y)}function W0(X,Y){if(typeof X.subscribe==="function")try{PX(X),X.unsubscribe=X.subscribe.apply(null,Y)}catch(Z){return X.setDirty(),!1}return!0}var z0={setDirty:!0,dispose:!0,forget:!0};function fX(X){let Y=new Map,Z=X&&X.subscribe;function J(G){let $=iY.getValue();if($){let H=Y.get(G);if(!H)Y.set(G,H=new Set);if($.dependOn(H),typeof Z==="function")PX(H),H.unsubscribe=Z(G)}}return J.dirty=function G($,H){let B=Y.get($);if(B){let z=H&&X8.call(z0,H)?H:"setDirty";bX(B).forEach((W)=>W[z]()),Y.delete($),PX(B)}},J}var V8;function U0(...X){return(V8||(V8=new XY(typeof WeakMap==="function"))).lookupArray(X)}var I5=new Set;function jY(X,{max:Y=Math.pow(2,16),keyArgs:Z,makeCacheKey:J=U0,normalizeResult:G,subscribe:$,cache:H=nY}=Object.create(null)){let B=typeof H==="function"?new H(Y,(P)=>P.dispose()):H,z=function(){let P=J.apply(null,Z?Z.apply(null,arguments):arguments);if(P===void 0)return X.apply(null,arguments);let V=B.get(P);if(!V)B.set(P,V=new vX(X)),V.normalizeResult=G,V.subscribe=$,V.forget=()=>B.delete(P);let q=V.recompute(Array.prototype.slice.call(arguments));if(B.set(P,V),I5.add(B),!iY.hasValue())I5.forEach((D)=>D.clean()),I5.clear();return q};Object.defineProperty(z,"size",{get:()=>B.size,configurable:!1,enumerable:!1}),Object.freeze(z.options={max:Y,keyArgs:Z,makeCacheKey:J,normalizeResult:G,subscribe:$,cache:B});function W(P){let V=P&&B.get(P);if(V)V.setDirty()}z.dirtyKey=W,z.dirty=function P(){W(J.apply(null,arguments))};function U(P){let V=P&&B.get(P);if(V)return V.peek()}z.peekKey=U,z.peek=function P(){return U(J.apply(null,arguments))};function Q(P){return P?B.delete(P):!1}return z.forgetKey=Q,z.forget=function P(){return Q(J.apply(null,arguments))},z.makeCacheKey=J,z.getKey=Z?function P(){return J.apply(null,Z.apply(null,arguments))}:J,Object.freeze(z)}function Q0(X){return X}var gX=function(){function X(Y,Z){if(Z===void 0)Z=Object.create(null);if(this.resultCache=zX?new WeakSet:new Set,this.transform=Y,Z.getCacheKey)this.getCacheKey=Z.getCacheKey;this.cached=Z.cache!==!1,this.resetCache()}return X.prototype.getCacheKey=function(Y){return[Y]},X.identity=function(){return new X(Q0,{cache:!1})},X.split=function(Y,Z,J){if(J===void 0)J=X.identity();return Object.assign(new X(function(G){var $=Y(G)?Z:J;return $.transformDocument(G)},{cache:!1}),{left:Z,right:J})},X.prototype.resetCache=function(){var Y=this;if(this.cached){var Z=new XY($Y);this.performWork=jY(X.prototype.performWork.bind(this),{makeCacheKey:function(J){var G=Y.getCacheKey(J);if(G)return K(Array.isArray(G),105),Z.lookupArray(G)},max:n["documentTransform.cache"],cache:NY})}},X.prototype.performWork=function(Y){return OY(Y),this.transform(Y)},X.prototype.transformDocument=function(Y){if(this.resultCache.has(Y))return Y;var Z=this.performWork(Y);return this.resultCache.add(Z),Z},X.prototype.concat=function(Y){var Z=this;return Object.assign(new X(function(J){return Y.transformDocument(Z.transformDocument(J))},{cache:!1}),{left:this,right:Y})},X}();var yX,TY=Object.assign(function(X){var Y=yX.get(X);if(!Y)Y=MZ(X),yX.set(X,Y);return Y},{reset:function(){yX=new UX(n.print||2000)}});TY.reset();if(globalThis.__DEV__!==!1)TZ("print",function(){return yX?yX.size:0});var v=Array.isArray;function i(X){return Array.isArray(X)&&X.length>0}var E8={kind:R.FIELD,name:{kind:R.NAME,value:"__typename"}};function q8(X,Y){return!X||X.selectionSet.selections.every(function(Z){return Z.kind===R.FRAGMENT_SPREAD&&q8(Y[Z.name.value],Y)})}function P0(X){return q8(BY(X)||hX(X),HY(WY(X)))?null:X}function V0(X){var Y=new Map,Z=new Map;return X.forEach(function(J){if(J){if(J.name)Y.set(J.name,J);else if(J.test)Z.set(J.test,J)}}),function(J){var G=Y.get(J.name.value);if(!G&&Z.size)Z.forEach(function($,H){if(H(J))G=$});return G}}function A8(X){var Y=new Map;return function Z(J){if(J===void 0)J=X;var G=Y.get(J);if(!G)Y.set(J,G={variables:new Set,fragmentSpreads:new Set});return G}}function KZ(X,Y){OY(Y);var Z=A8(""),J=A8(""),G=function(A){for(var F=0,T=void 0;F<A.length&&(T=A[F]);++F){if(v(T))continue;if(T.kind===R.OPERATION_DEFINITION)return Z(T.name&&T.name.value);if(T.kind===R.FRAGMENT_DEFINITION)return J(T.name.value)}return globalThis.__DEV__!==!1&&K.error(125),null},$=0;for(var H=Y.definitions.length-1;H>=0;--H)if(Y.definitions[H].kind===R.OPERATION_DEFINITION)++$;var B=V0(X),z=function(A){return i(A)&&A.map(B).some(function(F){return F&&F.remove})},W=new Map,U=!1,Q={enter:function(A){if(z(A.directives))return U=!0,null}},P=a(Y,{Field:Q,InlineFragment:Q,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(A,F,T,w,C){var N=G(C);if(N)N.variables.add(A.name.value)}},FragmentSpread:{enter:function(A,F,T,w,C){if(z(A.directives))return U=!0,null;var N=G(C);if(N)N.fragmentSpreads.add(A.name.value)}},FragmentDefinition:{enter:function(A,F,T,w){W.set(JSON.stringify(w),A)},leave:function(A,F,T,w){var C=W.get(JSON.stringify(w));if(A===C)return A;if($>0&&A.selectionSet.selections.every(function(N){return N.kind===R.FIELD&&N.name.value==="__typename"}))return J(A.name.value).removed=!0,U=!0,null}},Directive:{leave:function(A){if(B(A))return U=!0,null}}});if(!U)return Y;var V=function(A){if(!A.transitiveVars){if(A.transitiveVars=new Set(A.variables),!A.removed)A.fragmentSpreads.forEach(function(F){V(J(F)).transitiveVars.forEach(function(T){A.transitiveVars.add(T)})})}return A},q=new Set;P.definitions.forEach(function(A){if(A.kind===R.OPERATION_DEFINITION)V(Z(A.name&&A.name.value)).fragmentSpreads.forEach(function(F){q.add(F)});else if(A.kind===R.FRAGMENT_DEFINITION&&$===0&&!J(A.name.value).removed)q.add(A.name.value)}),q.forEach(function(A){V(J(A)).fragmentSpreads.forEach(function(F){q.add(F)})});var D=function(A){return!!(!q.has(A)||J(A).removed)},M={enter:function(A){if(D(A.name.value))return null}};return P0(a(P,{FragmentSpread:M,FragmentDefinition:M,OperationDefinition:{leave:function(A){if(A.variableDefinitions){var F=V(Z(A.name&&A.name.value)).transitiveVars;if(F.size<A.variableDefinitions.length)return E(E({},A),{variableDefinitions:A.variableDefinitions.filter(function(T){return F.has(T.variable.name.value)})})}}}}))}var tY=Object.assign(function(X){return a(X,{SelectionSet:{enter:function(Y,Z,J){if(J&&J.kind===R.OPERATION_DEFINITION)return;var G=Y.selections;if(!G)return;var $=G.some(function(B){return JY(B)&&(B.name.value==="__typename"||B.name.value.lastIndexOf("__",0)===0)});if($)return;var H=J;if(JY(H)&&H.directives&&H.directives.some(function(B){return B.name.value==="export"}))return;return E(E({},Y),{selections:m(m([],G,!0),[E8],!1)})}}})},{added:function(X){return X===E8}});function O5(X){var Y=LY(X),Z=Y.operation;if(Z==="query")return X;var J=a(X,{OperationDefinition:{enter:function(G){return E(E({},G),{operation:"query"})}}});return J}function mX(X){OY(X);var Y=KZ([{test:function(Z){return Z.name.value==="client"},remove:!0}],X);return Y}function j5(X){return OY(X),a(X,{FragmentSpread:function(Y){var Z;if((Z=Y.directives)===null||Z===void 0?void 0:Z.some(function(J){return J.name.value==="unmask"}))return;return E(E({},Y),{directives:m(m([],Y.directives||[],!0),[{kind:R.DIRECTIVE,name:{kind:R.NAME,value:"nonreactive"}}],!1)})}})}var E0=Object.prototype.hasOwnProperty;function S5(){var X=[];for(var Y=0;Y<arguments.length;Y++)X[Y]=arguments[Y];return eY(X)}function eY(X){var Y=X[0]||{},Z=X.length;if(Z>1){var J=new GY;for(var G=1;G<Z;++G)Y=J.merge(Y,X[G])}return Y}var A0=function(X,Y,Z){return this.merge(X[Z],Y[Z])},GY=function(){function X(Y){if(Y===void 0)Y=A0;this.reconciler=Y,this.isObject=h,this.pastCopies=new Set}return X.prototype.merge=function(Y,Z){var J=this,G=[];for(var $=2;$<arguments.length;$++)G[$-2]=arguments[$];if(h(Z)&&h(Y))return Object.keys(Z).forEach(function(H){if(E0.call(Y,H)){var B=Y[H];if(Z[H]!==B){var z=J.reconciler.apply(J,m([Y,Z,H],G,!1));if(z!==B)Y=J.shallowCopyForMerge(Y),Y[H]=z}}else Y=J.shallowCopyForMerge(Y),Y[H]=Z[H]}),Y;return Z},X.prototype.shallowCopyForMerge=function(Y){if(h(Y)){if(!this.pastCopies.has(Y)){if(Array.isArray(Y))Y=Y.slice(0);else Y=E({__proto__:Object.getPrototypeOf(Y)},Y);this.pastCopies.add(Y)}}return Y},X}();function q0(X,Y){var Z=typeof Symbol!=="undefined"&&X[Symbol.iterator]||X["@@iterator"];if(Z)return(Z=Z.call(X)).next.bind(Z);if(Array.isArray(X)||(Z=D0(X))||Y&&X&&typeof X.length==="number"){if(Z)X=Z;var J=0;return function(){if(J>=X.length)return{done:!0};return{done:!1,value:X[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D0(X,Y){if(!X)return;if(typeof X==="string")return D8(X,Y);var Z=Object.prototype.toString.call(X).slice(8,-1);if(Z==="Object"&&X.constructor)Z=X.constructor.name;if(Z==="Map"||Z==="Set")return Array.from(X);if(Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return D8(X,Y)}function D8(X,Y){if(Y==null||Y>X.length)Y=X.length;for(var Z=0,J=new Array(Y);Z<Y;Z++)J[Z]=X[Z];return J}function M8(X,Y){for(var Z=0;Z<Y.length;Z++){var J=Y[Z];if(J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J)J.writable=!0;Object.defineProperty(X,J.key,J)}}function b5(X,Y,Z){if(Y)M8(X.prototype,Y);if(Z)M8(X,Z);return Object.defineProperty(X,"prototype",{writable:!1}),X}var _5=function(){return typeof Symbol==="function"},v5=function(X){return _5()&&Boolean(Symbol[X])},f5=function(X){return v5(X)?Symbol[X]:"@@"+X};if(_5()&&!v5("observable"))Symbol.observable=Symbol("observable");var M0=f5("iterator"),k5=f5("observable"),L8=f5("species");function CZ(X,Y){var Z=X[Y];if(Z==null)return;if(typeof Z!=="function")throw new TypeError(Z+" is not a function");return Z}function uX(X){var Y=X.constructor;if(Y!==void 0){if(Y=Y[L8],Y===null)Y=void 0}return Y!==void 0?Y:S}function L0(X){return X instanceof S}function EX(X){if(EX.log)EX.log(X);else setTimeout(function(){throw X})}function wZ(X){Promise.resolve().then(function(){try{X()}catch(Y){EX(Y)}})}function T8(X){var Y=X._cleanup;if(Y===void 0)return;if(X._cleanup=void 0,!Y)return;try{if(typeof Y==="function")Y();else{var Z=CZ(Y,"unsubscribe");if(Z)Z.call(Y)}}catch(J){EX(J)}}function h5(X){X._observer=void 0,X._queue=void 0,X._state="closed"}function T0(X){var Y=X._queue;if(!Y)return;X._queue=void 0,X._state="ready";for(var Z=0;Z<Y.length;++Z)if(F8(X,Y[Z].type,Y[Z].value),X._state==="closed")break}function F8(X,Y,Z){X._state="running";var J=X._observer;try{var G=CZ(J,Y);switch(Y){case"next":if(G)G.call(J,Z);break;case"error":if(h5(X),G)G.call(J,Z);else throw Z;break;case"complete":if(h5(X),G)G.call(J);break}}catch($){EX($)}if(X._state==="closed")T8(X);else if(X._state==="running")X._state="ready"}function x5(X,Y,Z){if(X._state==="closed")return;if(X._state==="buffering"){X._queue.push({type:Y,value:Z});return}if(X._state!=="ready"){X._state="buffering",X._queue=[{type:Y,value:Z}],wZ(function(){return T0(X)});return}F8(X,Y,Z)}var F0=function(){function X(Z,J){this._cleanup=void 0,this._observer=Z,this._queue=void 0,this._state="initializing";var G=new K0(this);try{this._cleanup=J.call(void 0,G)}catch($){G.error($)}if(this._state==="initializing")this._state="ready"}var Y=X.prototype;return Y.unsubscribe=function Z(){if(this._state!=="closed")h5(this),T8(this)},b5(X,[{key:"closed",get:function(){return this._state==="closed"}}]),X}(),K0=function(){function X(Z){this._subscription=Z}var Y=X.prototype;return Y.next=function Z(J){x5(this._subscription,"next",J)},Y.error=function Z(J){x5(this._subscription,"error",J)},Y.complete=function Z(){x5(this._subscription,"complete")},b5(X,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),X}(),S=function(){function X(Z){if(!(this instanceof X))throw new TypeError("Observable cannot be called as a function");if(typeof Z!=="function")throw new TypeError("Observable initializer must be a function");this._subscriber=Z}var Y=X.prototype;return Y.subscribe=function Z(J){if(typeof J!=="object"||J===null)J={next:J,error:arguments[1],complete:arguments[2]};return new F0(J,this._subscriber)},Y.forEach=function Z(J){var G=this;return new Promise(function($,H){if(typeof J!=="function"){H(new TypeError(J+" is not a function"));return}function B(){z.unsubscribe(),$()}var z=G.subscribe({next:function(W){try{J(W,B)}catch(U){H(U),z.unsubscribe()}},error:H,complete:$})})},Y.map=function Z(J){var G=this;if(typeof J!=="function")throw new TypeError(J+" is not a function");var $=uX(this);return new $(function(H){return G.subscribe({next:function(B){try{B=J(B)}catch(z){return H.error(z)}H.next(B)},error:function(B){H.error(B)},complete:function(){H.complete()}})})},Y.filter=function Z(J){var G=this;if(typeof J!=="function")throw new TypeError(J+" is not a function");var $=uX(this);return new $(function(H){return G.subscribe({next:function(B){try{if(!J(B))return}catch(z){return H.error(z)}H.next(B)},error:function(B){H.error(B)},complete:function(){H.complete()}})})},Y.reduce=function Z(J){var G=this;if(typeof J!=="function")throw new TypeError(J+" is not a function");var $=uX(this),H=arguments.length>1,B=!1,z=arguments[1],W=z;return new $(function(U){return G.subscribe({next:function(Q){var P=!B;if(B=!0,!P||H)try{W=J(W,Q)}catch(V){return U.error(V)}else W=Q},error:function(Q){U.error(Q)},complete:function(){if(!B&&!H)return U.error(new TypeError("Cannot reduce an empty sequence"));U.next(W),U.complete()}})})},Y.concat=function Z(){var J=this;for(var G=arguments.length,$=new Array(G),H=0;H<G;H++)$[H]=arguments[H];var B=uX(this);return new B(function(z){var W,U=0;function Q(P){W=P.subscribe({next:function(V){z.next(V)},error:function(V){z.error(V)},complete:function(){if(U===$.length)W=void 0,z.complete();else Q(B.from($[U++]))}})}return Q(J),function(){if(W)W.unsubscribe(),W=void 0}})},Y.flatMap=function Z(J){var G=this;if(typeof J!=="function")throw new TypeError(J+" is not a function");var $=uX(this);return new $(function(H){var B=[],z=G.subscribe({next:function(U){if(J)try{U=J(U)}catch(P){return H.error(P)}var Q=$.from(U).subscribe({next:function(P){H.next(P)},error:function(P){H.error(P)},complete:function(){var P=B.indexOf(Q);if(P>=0)B.splice(P,1);W()}});B.push(Q)},error:function(U){H.error(U)},complete:function(){W()}});function W(){if(z.closed&&B.length===0)H.complete()}return function(){B.forEach(function(U){return U.unsubscribe()}),z.unsubscribe()}})},Y[k5]=function(){return this},X.from=function Z(J){var G=typeof this==="function"?this:X;if(J==null)throw new TypeError(J+" is not an object");var $=CZ(J,k5);if($){var H=$.call(J);if(Object(H)!==H)throw new TypeError(H+" is not an object");if(L0(H)&&H.constructor===G)return H;return new G(function(B){return H.subscribe(B)})}if(v5("iterator")){if($=CZ(J,M0),$)return new G(function(B){wZ(function(){if(B.closed)return;for(var z=q0($.call(J)),W;!(W=z()).done;){var U=W.value;if(B.next(U),B.closed)return}B.complete()})})}if(Array.isArray(J))return new G(function(B){wZ(function(){if(B.closed)return;for(var z=0;z<J.length;++z)if(B.next(J[z]),B.closed)return;B.complete()})});throw new TypeError(J+" is not observable")},X.of=function Z(){for(var J=arguments.length,G=new Array(J),$=0;$<J;$++)G[$]=arguments[$];var H=typeof this==="function"?this:X;return new H(function(B){wZ(function(){if(B.closed)return;for(var z=0;z<G.length;++z)if(B.next(G[z]),B.closed)return;B.complete()})})},b5(X,null,[{key:L8,get:function(){return this}}]),X}();if(_5())Object.defineProperty(S,Symbol("extensions"),{value:{symbol:k5,hostReportError:EX},configurable:!0});function g5(X){var Y,Z=X.Symbol;if(typeof Z==="function")if(Z.observable)Y=Z.observable;else{if(typeof Z.for==="function")Y=Z.for("https://github.com/benlesh/symbol-observable");else Y=Z("https://github.com/benlesh/symbol-observable");try{Z.observable=Y}catch(J){}}else Y="@@observable";return Y}var AX;if(typeof self!=="undefined")AX=self;else if(typeof window!=="undefined")AX=window;else if(typeof global!=="undefined")AX=global;else if(typeof K8!=="undefined")AX=K8;else AX=Function("return this")();var TG=g5(AX);var w8=S.prototype,C8="@@observable";if(!w8[C8])w8[C8]=function(){return this};function y5(X){return X.catch(function(){}),X}var w0=Object.prototype.toString;function RZ(X){return m5(X)}function m5(X,Y){switch(w0.call(X)){case"[object Array]":{if(Y=Y||new Map,Y.has(X))return Y.get(X);var Z=X.slice(0);return Y.set(X,Z),Z.forEach(function(G,$){Z[$]=m5(G,Y)}),Z}case"[object Object]":{if(Y=Y||new Map,Y.has(X))return Y.get(X);var J=Object.create(Object.getPrototypeOf(X));return Y.set(X,J),Object.keys(X).forEach(function(G){J[G]=m5(X[G],Y)}),J}default:return X}}function C0(X){var Y=new Set([X]);return Y.forEach(function(Z){if(h(Z)&&R0(Z)===Z)Object.getOwnPropertyNames(Z).forEach(function(J){if(h(Z[J]))Y.add(Z[J])})}),X}function R0(X){if(globalThis.__DEV__!==!1&&!Object.isFrozen(X))try{Object.freeze(X)}catch(Y){if(Y instanceof TypeError)return null;throw Y}return X}function uY(X){if(globalThis.__DEV__!==!1)C0(X);return X}function YX(X,Y,Z){var J=[];X.forEach(function(G){return G[Y]&&J.push(G)}),J.forEach(function(G){return G[Y](Z)})}function NZ(X,Y,Z){return new S(function(J){var G={then:function(z){return new Promise(function(W){return W(z())})}};function $(z,W){return function(U){if(z){var Q=function(){return J.closed?0:z(U)};G=G.then(Q,Q).then(function(P){return J.next(P)},function(P){return J.error(P)})}else J[W](U)}}var H={next:$(Y,"next"),error:$(Z,"error"),complete:function(){G.then(function(){return J.complete()})}},B=X.subscribe(H);return function(){return B.unsubscribe()}})}function IZ(X){function Y(Z){Object.defineProperty(X,Z,{value:S})}if(A5&&Symbol.species)Y(Symbol.species);return Y("@@species"),X}function R8(X){return X&&typeof X.then==="function"}var XX=function(X){o(Y,X);function Y(Z){var J=X.call(this,function(G){return J.addObserver(G),function(){return J.removeObserver(G)}})||this;if(J.observers=new Set,J.promise=new Promise(function(G,$){J.resolve=G,J.reject=$}),J.handlers={next:function(G){if(J.sub!==null)J.latest=["next",G],J.notify("next",G),YX(J.observers,"next",G)},error:function(G){var $=J.sub;if($!==null){if($)setTimeout(function(){return $.unsubscribe()});J.sub=null,J.latest=["error",G],J.reject(G),J.notify("error",G),YX(J.observers,"error",G)}},complete:function(){var G=J,$=G.sub,H=G.sources,B=H===void 0?[]:H;if($!==null){var z=B.shift();if(!z){if($)setTimeout(function(){return $.unsubscribe()});if(J.sub=null,J.latest&&J.latest[0]==="next")J.resolve(J.latest[1]);else J.resolve();J.notify("complete"),YX(J.observers,"complete")}else if(R8(z))z.then(function(W){return J.sub=W.subscribe(J.handlers)},J.handlers.error);else J.sub=z.subscribe(J.handlers)}}},J.nextResultListeners=new Set,J.cancel=function(G){J.reject(G),J.sources=[],J.handlers.error(G)},J.promise.catch(function(G){}),typeof Z==="function")Z=[new S(Z)];if(R8(Z))Z.then(function(G){return J.start(G)},J.handlers.error);else J.start(Z);return J}return Y.prototype.start=function(Z){if(this.sub!==void 0)return;this.sources=Array.from(Z),this.handlers.complete()},Y.prototype.deliverLastMessage=function(Z){if(this.latest){var J=this.latest[0],G=Z[J];if(G)G.call(Z,this.latest[1]);if(this.sub===null&&J==="next"&&Z.complete)Z.complete()}},Y.prototype.addObserver=function(Z){if(!this.observers.has(Z))this.deliverLastMessage(Z),this.observers.add(Z)},Y.prototype.removeObserver=function(Z){if(this.observers.delete(Z)&&this.observers.size<1)this.handlers.complete()},Y.prototype.notify=function(Z,J){var G=this.nextResultListeners;if(G.size)this.nextResultListeners=new Set,G.forEach(function($){return $(Z,J)})},Y.prototype.beforeNext=function(Z){var J=!1;this.nextResultListeners.add(function(G,$){if(!J)J=!0,Z(G,$)})},Y}(S);IZ(XX);function pY(X){return"incremental"in X}function N0(X){return"hasNext"in X&&"data"in X}function N8(X){return pY(X)||N0(X)}function I8(X){return h(X)&&"payload"in X}function OZ(X,Y){var Z=X,J=new GY;if(pY(Y)&&i(Y.incremental))Y.incremental.forEach(function(G){var{data:$,path:H}=G;for(var B=H.length-1;B>=0;--B){var z=H[B],W=!isNaN(+z),U=W?[]:{};U[z]=$,$=U}Z=J.merge(Z,$)});return Z}function qX(X){var Y=jZ(X);return i(Y)}function jZ(X){var Y=i(X.errors)?X.errors.slice(0):[];if(pY(X)&&i(X.incremental))X.incremental.forEach(function(Z){if(Z.errors)Y.push.apply(Y,Z.errors)});return Y}function KY(){var X=[];for(var Y=0;Y<arguments.length;Y++)X[Y]=arguments[Y];var Z=Object.create(null);return X.forEach(function(J){if(!J)return;Object.keys(J).forEach(function(G){var $=J[G];if($!==void 0)Z[G]=$})}),Z}function pX(X,Y){return KY(X,Y,Y.variables&&{variables:KY(E(E({},X&&X.variables),Y.variables))})}function dX(X){return new S(function(Y){Y.error(X)})}var SZ=function(X,Y,Z){var J=new Error(Z);throw J.name="ServerError",J.response=X,J.statusCode=X.status,J.result=Y,J};function u5(X){var Y=["query","operationName","variables","extensions","context"];for(var Z=0,J=Object.keys(X);Z<J.length;Z++){var G=J[Z];if(Y.indexOf(G)<0)throw f(58,G)}return X}function p5(X,Y){var Z=E({},X),J=function($){if(typeof $==="function")Z=E(E({},Z),$(Z));else Z=E(E({},Z),$)},G=function(){return E({},Z)};return Object.defineProperty(Y,"setContext",{enumerable:!1,value:J}),Object.defineProperty(Y,"getContext",{enumerable:!1,value:G}),Y}function d5(X){var Y={variables:X.variables||{},extensions:X.extensions||{},operationName:X.operationName,query:X.query};if(!Y.operationName)Y.operationName=typeof Y.query!=="string"?yY(Y.query)||void 0:"";return Y}function c5(X,Y){var Z=E({},X),J=new Set(Object.keys(X));return a(Y,{Variable:function(G,$,H){if(H&&H.kind!=="VariableDefinition")J.delete(G.name.value)}}),J.forEach(function(G){delete Z[G]}),Z}var I0=Symbol.for("apollo.deprecations"),O0=bY,l5=new QY;function j0(X){return O0[I0]||(l5.getValue()||[]).includes(X)}function d(X){var Y=[];for(var Z=1;Z<arguments.length;Z++)Y[Z-1]=arguments[Z];return l5.withValue.apply(l5,m([Array.isArray(X)?X:[X]],Y,!1))}function y(X,Y,Z,J){if(J===void 0)J="Please remove this option.";SY(Y,function(){if(Y in X)globalThis.__DEV__!==!1&&K.warn(104,Z,Y,J)})}function SY(X,Y){if(!j0(X))Y()}function O8(X,Y){return Y?Y(X):S.of()}function cX(X){return typeof X==="function"?new PY(X):X}function xZ(X){return X.request.length<=1}var PY=function(){function X(Y){if(Y)this.request=Y}return X.empty=function(){return new X(function(){return S.of()})},X.from=function(Y){if(Y.length===0)return X.empty();return Y.map(cX).reduce(function(Z,J){return Z.concat(J)})},X.split=function(Y,Z,J){var G=cX(Z),$=cX(J||new X(O8)),H;if(xZ(G)&&xZ($))H=new X(function(B){return Y(B)?G.request(B)||S.of():$.request(B)||S.of()});else H=new X(function(B,z){return Y(B)?G.request(B,z)||S.of():$.request(B,z)||S.of()});return Object.assign(H,{left:G,right:$})},X.execute=function(Y,Z){return Y.request(p5(Z.context,d5(u5(Z))))||S.of()},X.concat=function(Y,Z){var J=cX(Y);if(xZ(J))return globalThis.__DEV__!==!1&&K.warn(47,J),J;var G=cX(Z),$;if(xZ(G))$=new X(function(H){return J.request(H,function(B){return G.request(B)||S.of()})||S.of()});else $=new X(function(H,B){return J.request(H,function(z){return G.request(z,B)||S.of()})||S.of()});return Object.assign($,{left:J,right:G})},X.prototype.split=function(Y,Z,J){return this.concat(X.split(Y,Z,J||new X(O8)))},X.prototype.concat=function(Y){return X.concat(this,Y)},X.prototype.request=function(Y,Z){throw f(48)},X.prototype.onError=function(Y,Z){if(globalThis.__DEV__!==!1)SY("onError",function(){globalThis.__DEV__!==!1&&K.warn(49)});if(Z&&Z.error)return Z.error(Y),!1;throw Y},X.prototype.setOnError=function(Y){if(globalThis.__DEV__!==!1)globalThis.__DEV__!==!1&&K.warn(50);return this.onError=Y,this},X}();var DX=PY.execute;function s5(X){var Y,Z=X[Symbol.asyncIterator]();return Y={next:function(){return Z.next()}},Y[Symbol.asyncIterator]=function(){return this},Y}function a5(X){var Y=null,Z=null,J=!1,G=[],$=[];function H(Q){if(Z)return;if($.length){var P=$.shift();if(Array.isArray(P)&&P[0])return P[0]({value:Q,done:!1})}G.push(Q)}function B(Q){Z=Q;var P=$.slice();P.forEach(function(V){V[1](Q)}),!Y||Y()}function z(){J=!0;var Q=$.slice();Q.forEach(function(P){P[0]({value:void 0,done:!0})}),!Y||Y()}Y=function(){Y=null,X.removeListener("data",H),X.removeListener("error",B),X.removeListener("end",z),X.removeListener("finish",z),X.removeListener("close",z)},X.on("data",H),X.on("error",B),X.on("end",z),X.on("finish",z),X.on("close",z);function W(){return new Promise(function(Q,P){if(Z)return P(Z);if(G.length)return Q({value:G.shift(),done:!1});if(J)return Q({value:void 0,done:!0});$.push([Q,P])})}var U={next:function(){return W()}};if(vY)U[Symbol.asyncIterator]=function(){return this};return U}function n5(X){var Y=!1,Z={next:function(){if(Y)return Promise.resolve({value:void 0,done:!0});return Y=!0,new Promise(function(J,G){X.then(function($){J({value:$,done:!1})}).catch(G)})}};if(vY)Z[Symbol.asyncIterator]=function(){return this};return Z}function kZ(X){var Y={next:function(){return X.read()}};if(vY)Y[Symbol.asyncIterator]=function(){return this};return Y}function S0(X){return!!X.body}function x0(X){return!!X.getReader}function k0(X){return!!(vY&&X[Symbol.asyncIterator])}function h0(X){return!!X.stream}function b0(X){return!!X.arrayBuffer}function _0(X){return!!X.pipe}function j8(X){var Y=X;if(S0(X))Y=X.body;if(k0(Y))return s5(Y);if(x0(Y))return kZ(Y.getReader());if(h0(Y))return kZ(Y.stream().getReader());if(b0(Y))return n5(Y.arrayBuffer());if(_0(Y))return a5(Y);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var lX=Symbol();function S8(X){if(X.extensions)return Array.isArray(X.extensions[lX]);return!1}function hZ(X){return X.hasOwnProperty("graphQLErrors")}var v0=function(X){var Y=m(m(m([],X.graphQLErrors,!0),X.clientErrors,!0),X.protocolErrors,!0);if(X.networkError)Y.push(X.networkError);return Y.map(function(Z){return h(Z)&&Z.message||"Error message not found."}).join("\n")},xY=function(X){o(Y,X);function Y(Z){var{graphQLErrors:J,protocolErrors:G,clientErrors:$,networkError:H,errorMessage:B,extraInfo:z}=Z,W=X.call(this,B)||this;return W.name="ApolloError",W.graphQLErrors=J||[],W.protocolErrors=G||[],W.clientErrors=$||[],W.networkError=H||null,W.message=B||v0(W),W.extraInfo=z,W.cause=m(m(m([H],J||[],!0),G||[],!0),$||[],!0).find(function(U){return!!U})||null,W.__proto__=Y.prototype,W}return Y}(Error);var x8=Object.prototype.hasOwnProperty;function k8(X,Y){return EY(this,void 0,void 0,function(){var Z,J,G,$,H,B,z,W,U,Q,P,V,q,D,M,A,F,T,w,C,N,O,j,g;return AY(this,function(p){switch(p.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");Z=new TextDecoder("utf-8"),J=(g=X.headers)===null||g===void 0?void 0:g.get("content-type"),G="boundary=",$=(J===null||J===void 0?void 0:J.includes(G))?J===null||J===void 0?void 0:J.substring((J===null||J===void 0?void 0:J.indexOf(G))+G.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",H="\r\n--".concat($),B="",z=j8(X),W=!0,p.label=1;case 1:if(!W)return[3,3];return[4,z.next()];case 2:U=p.sent(),Q=U.value,P=U.done,V=typeof Q==="string"?Q:Z.decode(Q),q=B.length-H.length+1,W=!P,B+=V,D=B.indexOf(H,q);while(D>-1){if(M=void 0,O=[B.slice(0,D),B.slice(D+H.length)],M=O[0],B=O[1],A=M.indexOf("\r\n\r\n"),F=f0(M.slice(0,A)),T=F["content-type"],T&&T.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");if(w=M.slice(A),w){if(C=h8(X,w),Object.keys(C).length>1||"data"in C||"incremental"in C||"errors"in C||"payload"in C)if(I8(C)){if(N={},"payload"in C){if(Object.keys(C).length===1&&C.payload===null)return[2];N=E({},C.payload)}if("errors"in C)N=E(E({},N),{extensions:E(E({},"extensions"in N?N.extensions:null),(j={},j[lX]=C.errors,j))});Y(N)}else Y(C);else if(Object.keys(C).length===1&&"hasNext"in C&&!C.hasNext)return[2]}D=B.indexOf(H)}return[3,1];case 3:return[2]}})})}function f0(X){var Y={};return X.split("\n").forEach(function(Z){var J=Z.indexOf(":");if(J>-1){var G=Z.slice(0,J).trim().toLowerCase(),$=Z.slice(J+1).trim();Y[G]=$}}),Y}function h8(X,Y){if(X.status>=300){var Z=function(){try{return JSON.parse(Y)}catch(G){return Y}};SZ(X,Z(),"Response not successful: Received status code ".concat(X.status))}try{return JSON.parse(Y)}catch(G){var J=G;throw J.name="ServerParseError",J.response=X,J.statusCode=X.status,J.bodyText=Y,J}}function b8(X,Y){if(X.result&&X.result.errors&&X.result.data)Y.next(X.result);Y.error(X)}function _8(X){return function(Y){return Y.text().then(function(Z){return h8(Y,Z)}).then(function(Z){if(!Array.isArray(Z)&&!x8.call(Z,"data")&&!x8.call(Z,"errors"))SZ(Y,Z,"Server response was missing for query '".concat(Array.isArray(X)?X.map(function(J){return J.operationName}):X.operationName,"'."));return Z})}}var sX=function(X,Y){var Z;try{Z=JSON.stringify(X)}catch(G){var J=f(54,Y,G.message);throw J.parseError=G,J}return Z};var g0={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},y0={accept:"*/*","content-type":"application/json"},m0={method:"POST"},v8={http:g0,headers:y0,options:m0},f8=function(X,Y){return Y(X)};function g8(X,Y){var Z=[];for(var J=2;J<arguments.length;J++)Z[J-2]=arguments[J];var G={},$={};if(Z.forEach(function(Q){if(G=E(E(E({},G),Q.options),{headers:E(E({},G.headers),Q.headers)}),Q.credentials)G.credentials=Q.credentials;$=E(E({},$),Q.http)}),G.headers)G.headers=u0(G.headers,$.preserveHeaderCase);var{operationName:H,extensions:B,variables:z,query:W}=X,U={operationName:H,variables:z};if($.includeExtensions)U.extensions=B;if($.includeQuery)U.query=Y(W,TY);return{options:G,body:U}}function u0(X,Y){if(!Y){var Z={};return Object.keys(Object(X)).forEach(function($){Z[$.toLowerCase()]=X[$]}),Z}var J={};Object.keys(Object(X)).forEach(function($){J[$.toLowerCase()]={originalName:$,value:X[$]}});var G={};return Object.keys(J).forEach(function($){G[J[$].originalName]=J[$].value}),G}var y8=function(X){if(!X&&typeof fetch==="undefined")throw f(51)};var m8=function(X,Y){var Z=X.getContext(),J=Z.uri;if(J)return J;else if(typeof Y==="function")return Y(X);else return Y||"/graphql"};function u8(X,Y){var Z=[],J=function(Q,P){Z.push("".concat(Q,"=").concat(encodeURIComponent(P)))};if("query"in Y)J("query",Y.query);if(Y.operationName)J("operationName",Y.operationName);if(Y.variables){var G=void 0;try{G=sX(Y.variables,"Variables map")}catch(Q){return{parseError:Q}}J("variables",G)}if(Y.extensions){var $=void 0;try{$=sX(Y.extensions,"Extensions map")}catch(Q){return{parseError:Q}}J("extensions",$)}var H="",B=X,z=X.indexOf("#");if(z!==-1)H=X.substr(z),B=X.substr(0,z);var W=B.indexOf("?")===-1?"?":"&",U=B+W+Z.join("&")+H;return{newURI:U}}var p8=e(function(){return fetch}),d8=function(X){if(X===void 0)X={};var Y=X.uri,Z=Y===void 0?"/graphql":Y,J=X.fetch,G=X.print,$=G===void 0?f8:G,H=X.includeExtensions,B=X.preserveHeaderCase,z=X.useGETForQueries,W=X.includeUnusedVariables,U=W===void 0?!1:W,Q=t(X,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);if(globalThis.__DEV__!==!1)y8(J||p8);var P={http:{includeExtensions:H,preserveHeaderCase:B},options:Q.fetchOptions,credentials:Q.credentials,headers:Q.headers};return new PY(function(V){var q=m8(V,Z),D=V.getContext(),M={};if(D.clientAwareness){var A=D.clientAwareness,F=A.name,T=A.version;if(F)M["apollographql-client-name"]=F;if(T)M["apollographql-client-version"]=T}var w=E(E({},M),D.headers),C={http:D.http,options:D.fetchOptions,credentials:D.credentials,headers:w};if(CY(["client"],V.query)){if(globalThis.__DEV__!==!1)globalThis.__DEV__!==!1&&K.warn(52);var N=mX(V.query);if(!N)return dX(new Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));V.query=N}var O=g8(V,$,v8,P,C),j=O.options,g=O.body;if(g.variables&&!U)g.variables=c5(g.variables,V.query);var p;if(!j.signal&&typeof AbortController!=="undefined")p=new AbortController,j.signal=p.signal;var kY=function(UY){return UY.kind==="OperationDefinition"&&UY.operation==="mutation"},VY=function(UY){return UY.kind==="OperationDefinition"&&UY.operation==="subscription"},s=VY(LY(V.query)),zY=CY(["defer"],V.query);if(z&&!V.query.definitions.some(kY))j.method="GET";if(zY||s){j.headers=j.headers||{};var Y5="multipart/mixed;";if(s&&zY)globalThis.__DEV__!==!1&&K.warn(53);if(s)Y5+="boundary=graphql;subscriptionSpec=1.0,application/json";else if(zY)Y5+="deferSpec=20220824,application/json";j.headers.accept=Y5}if(j.method==="GET"){var q6=u8(q,g),b9=q6.newURI,D6=q6.parseError;if(D6)return dX(D6);q=b9}else try{j.body=sX(g,"Payload")}catch(UY){return dX(UY)}return new S(function(UY){var _9=J||e(function(){return fetch})||p8,M6=UY.next.bind(UY);return _9(q,j).then(function(JX){var X5;V.setContext({response:JX});var L6=(X5=JX.headers)===null||X5===void 0?void 0:X5.get("content-type");if(L6!==null&&/^multipart\/mixed/i.test(L6))return k8(JX,M6);else return _8(V)(JX).then(M6)}).then(function(){p=void 0,UY.complete()}).catch(function(JX){p=void 0,b8(JX,UY)}),function(){if(p)p.abort()}})})};var aX=function(X){o(Y,X);function Y(Z){if(Z===void 0)Z={};var J=X.call(this,d8(Z).request)||this;return J.options=Z,J}return Y}(PY);var{toString:c8,hasOwnProperty:p0}=Object.prototype,l8=Function.prototype.toString,o5=new Map;function _(X,Y){try{return r5(X,Y)}finally{o5.clear()}}var nX=_;function r5(X,Y){if(X===Y)return!0;let Z=c8.call(X),J=c8.call(Y);if(Z!==J)return!1;switch(Z){case"[object Array]":if(X.length!==Y.length)return!1;case"[object Object]":{if(a8(X,Y))return!0;let G=s8(X),$=s8(Y),H=G.length;if(H!==$.length)return!1;for(let B=0;B<H;++B)if(!p0.call(Y,G[B]))return!1;for(let B=0;B<H;++B){let z=G[B];if(!r5(X[z],Y[z]))return!1}return!0}case"[object Error]":return X.name===Y.name&&X.message===Y.message;case"[object Number]":if(X!==X)return Y!==Y;case"[object Boolean]":case"[object Date]":return+X===+Y;case"[object RegExp]":case"[object String]":return X==`${Y}`;case"[object Map]":case"[object Set]":{if(X.size!==Y.size)return!1;if(a8(X,Y))return!0;let G=X.entries(),$=Z==="[object Map]";while(!0){let H=G.next();if(H.done)break;let[B,z]=H.value;if(!Y.has(B))return!1;if($&&!r5(z,Y.get(B)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":X=new Uint8Array(X),Y=new Uint8Array(Y);case"[object DataView]":{let G=X.byteLength;if(G===Y.byteLength)while(G--&&X[G]===Y[G]);return G===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{let G=l8.call(X);if(G!==l8.call(Y))return!1;return!l0(G,c0)}}return!1}function s8(X){return Object.keys(X).filter(d0,X)}function d0(X){return this[X]!==void 0}var c0="{ [native code] }";function l0(X,Y){let Z=X.length-Y.length;return Z>=0&&X.indexOf(Y,Z)===Z}function a8(X,Y){let Z=o5.get(X);if(Z){if(Z.has(Y))return!0}else o5.set(X,Z=new Set);return Z.add(Y),!1}function _Z(X,Y,Z,J){var G=Y.data,$=t(Y,["data"]),H=Z.data,B=t(Z,["data"]);return nX($,B)&&bZ(LY(X).selectionSet,G,H,{fragmentMap:HY(WY(X)),variables:J})}function bZ(X,Y,Z,J){if(Y===Z)return!0;var G=new Set;return X.selections.every(function($){if(G.has($))return!0;if(G.add($),!DY($,J.variables))return!0;if(n8($))return!0;if(JY($)){var H=YY($),B=Y&&Y[H],z=Z&&Z[H],W=$.selectionSet;if(!W)return nX(B,z);var U=Array.isArray(B),Q=Array.isArray(z);if(U!==Q)return!1;if(U&&Q){var P=B.length;if(z.length!==P)return!1;for(var V=0;V<P;++V)if(!bZ(W,B[V],z[V],J))return!1;return!0}return bZ(W,B,z,J)}else{var q=RY($,J.fragmentMap);if(q){if(n8(q))return!0;return bZ(q.selectionSet,Y,Z,J)}}})}function n8(X){return!!X.directives&&X.directives.some(s0)}function s0(X){return X.name.value==="nonreactive"}var vZ=$Y?WeakMap:Map,fZ=zX?WeakSet:Set,MX=new QY,o8=!1;function gZ(){if(!o8)o8=!0,globalThis.__DEV__!==!1&&K.warn(64)}function yZ(X,Y,Z){return MX.withValue(!0,function(){var J=oX(X,Y,Z,!1);if(Object.isFrozen(X))uY(J);return J})}function a0(X,Y){if(Y.has(X))return Y.get(X);var Z=Array.isArray(X)?[]:Object.create(null);return Y.set(X,Z),Z}function oX(X,Y,Z,J,G){var $,H=Z.knownChanged,B=a0(X,Z.mutableTargets);if(Array.isArray(X)){for(var z=0,W=Array.from(X.entries());z<W.length;z++){var U=W[z],Q=U[0],P=U[1];if(P===null){B[Q]=null;continue}var V=oX(P,Y,Z,J,globalThis.__DEV__!==!1?"".concat(G||"","[").concat(Q,"]"):void 0);if(H.has(V))H.add(B);B[Q]=V}return H.has(B)?B:X}for(var q=0,D=Y.selections;q<D.length;q++){var M=D[q],A=void 0;if(J)H.add(B);if(M.kind===R.FIELD){var F=YY(M),T=M.selectionSet;if(A=B[F]||X[F],A===void 0)continue;if(T&&A!==null){var V=oX(X[F],T,Z,J,globalThis.__DEV__!==!1?"".concat(G||"",".").concat(F):void 0);if(H.has(V))A=V}if(globalThis.__DEV__===!1)B[F]=A;if(globalThis.__DEV__!==!1)if(J&&F!=="__typename"&&!(($=Object.getOwnPropertyDescriptor(B,F))===null||$===void 0?void 0:$.value))Object.defineProperty(B,F,n0(F,A,G||"",Z.operationName,Z.operationType));else delete B[F],B[F]=A}if(M.kind===R.INLINE_FRAGMENT&&(!M.typeCondition||Z.cache.fragmentMatches(M,X.__typename)))A=oX(X,M.selectionSet,Z,J,G);if(M.kind===R.FRAGMENT_SPREAD){var w=M.name.value,C=Z.fragmentMap[w]||(Z.fragmentMap[w]=Z.cache.lookupFragment(w));K(C,59,w);var N=E5(M);if(N!=="mask")A=oX(X,C.selectionSet,Z,N==="migrate",G)}if(H.has(A))H.add(B)}if("__typename"in X&&!("__typename"in B))B.__typename=X.__typename;if(Object.keys(B).length!==Object.keys(X).length)H.add(B);return H.has(B)?B:X}function n0(X,Y,Z,J,G){var $=function(){if(MX.getValue())return Y;return globalThis.__DEV__!==!1&&K.warn(60,J?"".concat(G," '").concat(J,"'"):"anonymous ".concat(G),"".concat(Z,".").concat(X).replace(/^\./,"")),$=function(){return Y},Y};return{get:function(){return $()},set:function(H){$=function(){return H}},enumerable:!0,configurable:!0}}function rX(X,Y,Z,J){if(!Z.fragmentMatches){if(globalThis.__DEV__!==!1)gZ();return X}var G=Y.definitions.filter(function(H){return H.kind===R.FRAGMENT_DEFINITION});if(typeof J==="undefined")K(G.length===1,61,G.length),J=G[0].name.value;var $=G.find(function(H){return H.name.value===J});if(K(!!$,62,J),X==null)return X;if(nX(X,{}))return X;return yZ(X,$.selectionSet,{operationType:"fragment",operationName:$.name.value,fragmentMap:HY(WY(Y)),cache:Z,mutableTargets:new vZ,knownChanged:new fZ})}function i5(X,Y,Z){var J;if(!Z.fragmentMatches){if(globalThis.__DEV__!==!1)gZ();return X}var G=BY(Y);if(K(G,63),X==null)return X;return yZ(X,G.selectionSet,{operationType:G.operation,operationName:(J=G.name)===null||J===void 0?void 0:J.value,fragmentMap:HY(WY(Y)),cache:Z,mutableTargets:new vZ,knownChanged:new fZ})}var mZ=function(){function X(){this.assumeImmutableResults=!1,this.getFragmentDoc=jY(q5,{max:n["cache.fragmentQueryDocuments"]||1000,cache:NY})}return X.prototype.lookupFragment=function(Y){return null},X.prototype.batch=function(Y){var Z=this,J=typeof Y.optimistic==="string"?Y.optimistic:Y.optimistic===!1?null:void 0,G;return this.performTransaction(function(){return G=Y.update(Z)},J),G},X.prototype.recordOptimisticTransaction=function(Y,Z){this.performTransaction(Y,Z)},X.prototype.transformDocument=function(Y){return Y},X.prototype.transformForLink=function(Y){return Y},X.prototype.identify=function(Y){return},X.prototype.gc=function(){return[]},X.prototype.modify=function(Y){return!1},X.prototype.readQuery=function(Y,Z){var J=this;if(Z===void 0)Z=!!Y.optimistic;if(globalThis.__DEV__!==!1)y(Y,"canonizeResults","cache.readQuery");return d("canonizeResults",function(){return J.read(E(E({},Y),{rootId:Y.id||"ROOT_QUERY",optimistic:Z}))})},X.prototype.watchFragment=function(Y){var Z=this,J=Y.fragment,G=Y.fragmentName,$=Y.from,H=Y.optimistic,B=H===void 0?!0:H,z=t(Y,["fragment","fragmentName","from","optimistic"]),W=this.getFragmentDoc(J,G),U=typeof $==="undefined"||typeof $==="string"?$:this.identify($),Q=!!Y[Symbol.for("apollo.dataMasking")];if(globalThis.__DEV__!==!1){var P=G||hX(J).name.value;if(!U)globalThis.__DEV__!==!1&&K.warn(1,P)}var V=E(E({},z),{returnPartialData:!0,id:U,query:W,optimistic:B}),q;return new S(function(D){return Z.watch(E(E({},V),{immediate:!0,callback:function(M){var A=Q?rX(M.result,J,Z,G):M.result;if(q&&_Z(W,{data:q.result},{data:A},Y.variables))return;var F={data:A,complete:!!M.complete};if(M.missing)F.missing=eY(M.missing.map(function(T){return T.missing}));q=E(E({},M),{result:A}),D.next(F)}}))})},X.prototype.readFragment=function(Y,Z){var J=this;if(Z===void 0)Z=!!Y.optimistic;if(globalThis.__DEV__!==!1)y(Y,"canonizeResults","cache.readFragment");return d("canonizeResults",function(){return J.read(E(E({},Y),{query:J.getFragmentDoc(Y.fragment,Y.fragmentName),rootId:Y.id,optimistic:Z}))})},X.prototype.writeQuery=function(Y){var{id:Z,data:J}=Y,G=t(Y,["id","data"]);return this.write(Object.assign(G,{dataId:Z||"ROOT_QUERY",result:J}))},X.prototype.writeFragment=function(Y){var{id:Z,data:J,fragment:G,fragmentName:$}=Y,H=t(Y,["id","data","fragment","fragmentName"]);return this.write(Object.assign(H,{query:this.getFragmentDoc(G,$),dataId:Z,result:J}))},X.prototype.updateQuery=function(Y,Z){if(globalThis.__DEV__!==!1)y(Y,"canonizeResults","cache.updateQuery");return this.batch({update:function(J){var G=d("canonizeResults",function(){return J.readQuery(Y)}),$=Z(G);if($===void 0||$===null)return G;return J.writeQuery(E(E({},Y),{data:$})),$}})},X.prototype.updateFragment=function(Y,Z){if(globalThis.__DEV__!==!1)y(Y,"canonizeResults","cache.updateFragment");return this.batch({update:function(J){var G=d("canonizeResults",function(){return J.readFragment(Y)}),$=Z(G);if($===void 0||$===null)return G;return J.writeFragment(E(E({},Y),{data:$})),$}})},X}();if(globalThis.__DEV__!==!1)mZ.prototype.getMemoryInternals=n6;var iX=function(X){o(Y,X);function Y(Z,J,G,$){var H,B=X.call(this,Z)||this;if(B.message=Z,B.path=J,B.query=G,B.variables=$,Array.isArray(B.path)){B.missing=B.message;for(var z=B.path.length-1;z>=0;--z)B.missing=(H={},H[B.path[z]]=B.missing,H)}else B.missing=B.path;return B.__proto__=Y.prototype,B}return Y}(Error);var u=Object.prototype.hasOwnProperty;function tX(X){return X===null||X===void 0}function pZ(X,Y){var{__typename:Z,id:J,_id:G}=X;if(typeof Z==="string"){if(Y)Y.keyObject=!tX(J)?{id:J}:!tX(G)?{_id:G}:void 0;if(tX(J)&&!tX(G))J=G;if(!tX(J))return"".concat(Z,":").concat(typeof J==="number"||typeof J==="string"?J:JSON.stringify(J))}}var r8={dataIdFromObject:pZ,addTypename:!0,resultCaching:!0,canonizeResults:!1};function i8(X){return KY(r8,X)}function dZ(X){var Y=X.canonizeResults;return Y===void 0?r8.canonizeResults:Y}function t8(X,Y){return x(Y)?X.get(Y.__ref,"__typename"):Y&&Y.__typename}var t5=/^[_a-z][_0-9a-z]*/i;function FY(X){var Y=X.match(t5);return Y?Y[0]:X}function uZ(X,Y,Z){if(h(Y))return v(Y)?Y.every(function(J){return uZ(X,J,Z)}):X.selections.every(function(J){if(JY(J)&&DY(J,Z)){var G=YY(J);return u.call(Y,G)&&(!J.selectionSet||uZ(J.selectionSet,Y[G],Z))}return!0});return!1}function dY(X){return h(X)&&!x(X)&&!v(X)}function e8(){return new GY}function cZ(X,Y){var Z=HY(WY(X));return{fragmentMap:Z,lookupFragment:function(J){var G=Z[J];if(!G&&Y)G=Y.lookup(J);return G||null}}}var lZ=Object.create(null),e5=function(){return lZ},Y9=Object.create(null),LX=function(){function X(Y,Z){var J=this;this.policies=Y,this.group=Z,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(G,$){return uY(x(G)?J.get(G.__ref,$):G&&G[$])},this.canRead=function(G){return x(G)?J.has(G.__ref):typeof G==="object"},this.toReference=function(G,$){if(typeof G==="string")return MY(G);if(x(G))return G;var H=J.policies.identify(G)[0];if(H){var B=MY(H);if($)J.merge(H,G);return B}}}return X.prototype.toObject=function(){return E({},this.data)},X.prototype.has=function(Y){return this.lookup(Y,!0)!==void 0},X.prototype.get=function(Y,Z){if(this.group.depend(Y,Z),u.call(this.data,Y)){var J=this.data[Y];if(J&&u.call(J,Z))return J[Z]}if(Z==="__typename"&&u.call(this.policies.rootTypenamesById,Y))return this.policies.rootTypenamesById[Y];if(this instanceof cY)return this.parent.get(Y,Z)},X.prototype.lookup=function(Y,Z){if(Z)this.group.depend(Y,"__exists");if(u.call(this.data,Y))return this.data[Y];if(this instanceof cY)return this.parent.lookup(Y,Z);if(this.policies.rootTypenamesById[Y])return Object.create(null)},X.prototype.merge=function(Y,Z){var J=this,G;if(x(Y))Y=Y.__ref;if(x(Z))Z=Z.__ref;var $=typeof Y==="string"?this.lookup(G=Y):Y,H=typeof Z==="string"?this.lookup(G=Z):Z;if(!H)return;K(typeof G==="string",2);var B=new GY(r0).merge($,H);if(this.data[G]=B,B!==$){if(delete this.refs[G],this.group.caching){var z=Object.create(null);if(!$)z.__exists=1;if(Object.keys(H).forEach(function(W){if(!$||$[W]!==B[W]){z[W]=1;var U=FY(W);if(U!==W&&!J.policies.hasKeyArgs(B.__typename,U))z[U]=1;if(B[W]===void 0&&!(J instanceof cY))delete B[W]}}),z.__typename&&!($&&$.__typename)&&this.policies.rootTypenamesById[G]===B.__typename)delete z.__typename;Object.keys(z).forEach(function(W){return J.group.dirty(G,W)})}}},X.prototype.modify=function(Y,Z){var J=this,G=this.lookup(Y);if(G){var $=Object.create(null),H=!1,B=!0,z={DELETE:lZ,INVALIDATE:Y9,isReference:x,toReference:this.toReference,canRead:this.canRead,readField:function(W,U){return J.policies.readField(typeof W==="string"?{fieldName:W,from:U||MY(Y)}:W,{store:J})}};if(Object.keys(G).forEach(function(W){var U=FY(W),Q=G[W];if(Q===void 0)return;var P=typeof Z==="function"?Z:Z[W]||Z[U];if(P){var V=P===e5?lZ:P(uY(Q),E(E({},z),{fieldName:U,storeFieldName:W,storage:J.getStorage(Y,W)}));if(V===Y9)J.group.dirty(Y,W);else{if(V===lZ)V=void 0;if(V!==Q){if($[W]=V,H=!0,Q=V,globalThis.__DEV__!==!1){var q=function(C){if(J.lookup(C.__ref)===void 0)return globalThis.__DEV__!==!1&&K.warn(3,C),!0};if(x(V))q(V);else if(Array.isArray(V)){var D=!1,M=void 0;for(var A=0,F=V;A<F.length;A++){var T=F[A];if(x(T)){if(D=!0,q(T))break}else if(typeof T==="object"&&!!T){var w=J.policies.identify(T)[0];if(w)M=T}if(D&&M!==void 0){globalThis.__DEV__!==!1&&K.warn(4,M);break}}}}}}}if(Q!==void 0)B=!1}),H){if(this.merge(Y,$),B){if(this instanceof cY)this.data[Y]=void 0;else delete this.data[Y];this.group.dirty(Y,"__exists")}return!0}}return!1},X.prototype.delete=function(Y,Z,J){var G,$=this.lookup(Y);if($){var H=this.getFieldValue($,"__typename"),B=Z&&J?this.policies.getStoreFieldName({typename:H,fieldName:Z,args:J}):Z;return this.modify(Y,B?(G={},G[B]=e5,G):e5)}return!1},X.prototype.evict=function(Y,Z){var J=!1;if(Y.id){if(u.call(this.data,Y.id))J=this.delete(Y.id,Y.fieldName,Y.args);if(this instanceof cY&&this!==Z)J=this.parent.evict(Y,Z)||J;if(Y.fieldName||J)this.group.dirty(Y.id,Y.fieldName||"__exists")}return J},X.prototype.clear=function(){this.replace(null)},X.prototype.extract=function(){var Y=this,Z=this.toObject(),J=[];if(this.getRootIdSet().forEach(function(G){if(!u.call(Y.policies.rootTypenamesById,G))J.push(G)}),J.length)Z.__META={extraRootIds:J.sort()};return Z},X.prototype.replace=function(Y){var Z=this;if(Object.keys(this.data).forEach(function($){if(!(Y&&u.call(Y,$)))Z.delete($)}),Y){var J=Y.__META,G=t(Y,["__META"]);if(Object.keys(G).forEach(function($){Z.merge($,G[$])}),J)J.extraRootIds.forEach(this.retain,this)}},X.prototype.retain=function(Y){return this.rootIds[Y]=(this.rootIds[Y]||0)+1},X.prototype.release=function(Y){if(this.rootIds[Y]>0){var Z=--this.rootIds[Y];if(!Z)delete this.rootIds[Y];return Z}return 0},X.prototype.getRootIdSet=function(Y){if(Y===void 0)Y=new Set;if(Object.keys(this.rootIds).forEach(Y.add,Y),this instanceof cY)this.parent.getRootIdSet(Y);else Object.keys(this.policies.rootTypenamesById).forEach(Y.add,Y);return Y},X.prototype.gc=function(){var Y=this,Z=this.getRootIdSet(),J=this.toObject();Z.forEach(function(H){if(u.call(J,H))Object.keys(Y.findChildRefIds(H)).forEach(Z.add,Z),delete J[H]});var G=Object.keys(J);if(G.length){var $=this;while($ instanceof cY)$=$.parent;G.forEach(function(H){return $.delete(H)})}return G},X.prototype.findChildRefIds=function(Y){if(!u.call(this.refs,Y)){var Z=this.refs[Y]=Object.create(null),J=this.data[Y];if(!J)return Z;var G=new Set([J]);G.forEach(function($){if(x($))Z[$.__ref]=!0;if(h($))Object.keys($).forEach(function(H){var B=$[H];if(h(B))G.add(B)})})}return this.refs[Y]},X.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},X}();var X9=function(){function X(Y,Z){if(Z===void 0)Z=null;this.caching=Y,this.parent=Z,this.d=null,this.resetCaching()}return X.prototype.resetCaching=function(){this.d=this.caching?fX():null,this.keyMaker=new XY($Y)},X.prototype.depend=function(Y,Z){if(this.d){this.d(Y6(Y,Z));var J=FY(Z);if(J!==Z)this.d(Y6(Y,J));if(this.parent)this.parent.depend(Y,Z)}},X.prototype.dirty=function(Y,Z){if(this.d)this.d.dirty(Y6(Y,Z),Z==="__exists"?"forget":"setDirty")},X}();function Y6(X,Y){return Y+"#"+X}function X6(X,Y){if(ZX(X))X.group.depend(Y,"__exists")}(function(X){var Y=function(Z){o(J,Z);function J(G){var{policies:$,resultCaching:H}=G,B=H===void 0?!0:H,z=G.seed,W=Z.call(this,$,new X9(B))||this;if(W.stump=new o0(W),W.storageTrie=new XY($Y),z)W.replace(z);return W}return J.prototype.addLayer=function(G,$){return this.stump.addLayer(G,$)},J.prototype.removeLayer=function(){return this},J.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},J}(X);X.Root=Y})(LX||(LX={}));var cY=function(X){o(Y,X);function Y(Z,J,G,$){var H=X.call(this,J.policies,$)||this;return H.id=Z,H.parent=J,H.replay=G,H.group=$,G(H),H}return Y.prototype.addLayer=function(Z,J){return new Y(Z,this,J,this.group)},Y.prototype.removeLayer=function(Z){var J=this,G=this.parent.removeLayer(Z);if(Z===this.id){if(this.group.caching)Object.keys(this.data).forEach(function($){var H=J.data[$],B=G.lookup($);if(!B)J.delete($);else if(!H)J.group.dirty($,"__exists"),Object.keys(B).forEach(function(z){J.group.dirty($,z)});else if(H!==B)Object.keys(H).forEach(function(z){if(!_(H[z],B[z]))J.group.dirty($,z)})});return G}if(G===this.parent)return this;return G.addLayer(this.id,this.replay)},Y.prototype.toObject=function(){return E(E({},this.parent.toObject()),this.data)},Y.prototype.findChildRefIds=function(Z){var J=this.parent.findChildRefIds(Z);return u.call(this.data,Z)?E(E({},J),X.prototype.findChildRefIds.call(this,Z)):J},Y.prototype.getStorage=function(){var Z=this.parent;while(Z.parent)Z=Z.parent;return Z.getStorage.apply(Z,arguments)},Y}(LX),o0=function(X){o(Y,X);function Y(Z){return X.call(this,"EntityStore.Stump",Z,function(){},new X9(Z.group.caching,Z.group))||this}return Y.prototype.removeLayer=function(){return this},Y.prototype.merge=function(Z,J){return this.parent.merge(Z,J)},Y}(cY);function r0(X,Y,Z){var J=X[Z],G=Y[Z];return _(J,G)?J:G}function ZX(X){return!!(X instanceof LX&&X.group.caching)}function i0(X){if(h(X))return v(X)?X.slice(0):E({__proto__:Object.getPrototypeOf(X)},X);return X}var Z6=function(){function X(){this.known=new(zX?WeakSet:Set),this.pool=new XY($Y),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return X.prototype.isKnown=function(Y){return h(Y)&&this.known.has(Y)},X.prototype.pass=function(Y){if(h(Y)){var Z=i0(Y);return this.passes.set(Z,Y),Z}return Y},X.prototype.admit=function(Y){var Z=this;if(h(Y)){var J=this.passes.get(Y);if(J)return J;var G=Object.getPrototypeOf(Y);switch(G){case Array.prototype:{if(this.known.has(Y))return Y;var $=Y.map(this.admit,this),H=this.pool.lookupArray($);if(!H.array){if(this.known.add(H.array=$),globalThis.__DEV__!==!1)Object.freeze($)}return H.array}case null:case Object.prototype:{if(this.known.has(Y))return Y;var B=Object.getPrototypeOf(Y),z=[B],W=this.sortedKeys(Y);z.push(W.json);var U=z.length;W.sorted.forEach(function(V){z.push(Z.admit(Y[V]))});var H=this.pool.lookupArray(z);if(!H.object){var Q=H.object=Object.create(B);if(this.known.add(Q),W.sorted.forEach(function(V,q){Q[V]=z[U+q]}),globalThis.__DEV__!==!1)Object.freeze(Q)}return H.object}}}return Y},X.prototype.sortedKeys=function(Y){var Z=Object.keys(Y),J=this.pool.lookupArray(Z);if(!J.keys){Z.sort();var G=JSON.stringify(Z);if(!(J.keys=this.keysByJSON.get(G)))this.keysByJSON.set(G,J.keys={sorted:Z,json:G})}return J.keys},X}();function Z9(X){return[X.selectionSet,X.objectOrReference,X.context,X.context.canonizeResults]}var J9=function(){function X(Y){var Z=this;this.knownResults=new($Y?WeakMap:Map),this.config=KY(Y,{addTypename:Y.addTypename!==!1,canonizeResults:dZ(Y)}),this.canon=Y.canon||new Z6,this.executeSelectionSet=jY(function(J){var G,$=J.context.canonizeResults,H=Z9(J);H[3]=!$;var B=(G=Z.executeSelectionSet).peek.apply(G,H);if(B){if($)return E(E({},B),{result:Z.canon.admit(B.result)});return B}return X6(J.context.store,J.enclosingRef.__ref),Z.execSelectionSetImpl(J)},{max:this.config.resultCacheMaxSize||n["inMemoryCache.executeSelectionSet"]||50000,keyArgs:Z9,makeCacheKey:function(J,G,$,H){if(ZX($.store))return $.store.makeCacheKey(J,x(G)?G.__ref:G,$.varString,H)}}),this.executeSubSelectedArray=jY(function(J){return X6(J.context.store,J.enclosingRef.__ref),Z.execSubSelectedArrayImpl(J)},{max:this.config.resultCacheMaxSize||n["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(J){var{field:G,array:$,context:H}=J;if(ZX(H.store))return H.store.makeCacheKey(G,$,H.varString)}})}return X.prototype.resetCanon=function(){this.canon=new Z6},X.prototype.diffQueryAgainstStore=function(Y){var{store:Z,query:J,rootId:G}=Y,$=G===void 0?"ROOT_QUERY":G,H=Y.variables,B=Y.returnPartialData,z=B===void 0?!0:B,W=Y.canonizeResults,U=W===void 0?this.config.canonizeResults:W,Q=this.config.cache.policies;H=E(E({},rY(kX(J))),H);var P=MY($),V=this.executeSelectionSet({selectionSet:LY(J).selectionSet,objectOrReference:P,enclosingRef:P,context:E({store:Z,query:J,policies:Q,variables:H,varString:ZY(H),canonizeResults:U},cZ(J,this.config.fragments))}),q;if(V.missing){if(q=[new iX(t0(V.missing),V.missing,J,H)],!z)throw q[0]}return{result:V.result,complete:!q,missing:q}},X.prototype.isFresh=function(Y,Z,J,G){if(ZX(G.store)&&this.knownResults.get(Y)===J){var $=this.executeSelectionSet.peek(J,Z,G,this.canon.isKnown(Y));if($&&Y===$.result)return!0}return!1},X.prototype.execSelectionSetImpl=function(Y){var Z=this,J=Y.selectionSet,G=Y.objectOrReference,$=Y.enclosingRef,H=Y.context;if(x(G)&&!H.policies.rootTypenamesById[G.__ref]&&!H.store.has(G.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(G.__ref," object")};var{variables:B,policies:z,store:W}=H,U=W.getFieldValue(G,"__typename"),Q=[],P,V=new GY;if(this.config.addTypename&&typeof U==="string"&&!z.rootIdsByTypename[U])Q.push({__typename:U});function q(T,w){var C;if(T.missing)P=V.merge(P,(C={},C[w]=T.missing,C));return T.result}var D=new Set(J.selections);D.forEach(function(T){var w,C;if(!DY(T,B))return;if(JY(T)){var N=z.readField({fieldName:T.name.value,field:T,variables:H.variables,from:G},H),O=YY(T);if(N===void 0){if(!tY.added(T))P=V.merge(P,(w={},w[O]="Can't find field '".concat(T.name.value,"' on ").concat(x(G)?G.__ref+" object":"object "+JSON.stringify(G,null,2)),w))}else if(v(N)){if(N.length>0)N=q(Z.executeSubSelectedArray({field:T,array:N,enclosingRef:$,context:H}),O)}else if(!T.selectionSet){if(H.canonizeResults)N=Z.canon.pass(N)}else if(N!=null)N=q(Z.executeSelectionSet({selectionSet:T.selectionSet,objectOrReference:N,enclosingRef:x(N)?N:$,context:H}),O);if(N!==void 0)Q.push((C={},C[O]=N,C))}else{var j=RY(T,H.lookupFragment);if(!j&&T.kind===R.FRAGMENT_SPREAD)throw f(10,T.name.value);if(j&&z.fragmentMatches(j,U))j.selectionSet.selections.forEach(D.add,D)}});var M=eY(Q),A={result:M,missing:P},F=H.canonizeResults?this.canon.admit(A):uY(A);if(F.result)this.knownResults.set(F.result,J);return F},X.prototype.execSubSelectedArrayImpl=function(Y){var Z=this,J=Y.field,G=Y.array,$=Y.enclosingRef,H=Y.context,B,z=new GY;function W(U,Q){var P;if(U.missing)B=z.merge(B,(P={},P[Q]=U.missing,P));return U.result}if(J.selectionSet)G=G.filter(H.store.canRead);return G=G.map(function(U,Q){if(U===null)return null;if(v(U))return W(Z.executeSubSelectedArray({field:J,array:U,enclosingRef:$,context:H}),Q);if(J.selectionSet)return W(Z.executeSelectionSet({selectionSet:J.selectionSet,objectOrReference:U,enclosingRef:x(U)?U:$,context:H}),Q);if(globalThis.__DEV__!==!1)e0(H.store,J,U);return U}),{result:H.canonizeResults?this.canon.admit(G):G,missing:B}},X}();function t0(X){try{JSON.stringify(X,function(Y,Z){if(typeof Z==="string")throw Z;return Z})}catch(Y){return Y}}function e0(X,Y,Z){if(!Y.selectionSet){var J=new Set([Z]);J.forEach(function(G){if(h(G))K(!x(G),11,t8(X,G),Y.name.value),Object.values(G).forEach(J.add,J)})}}var TX=new QY,G9=new WeakMap;function eX(X){var Y=G9.get(X);if(!Y)G9.set(X,Y={vars:new Set,dep:fX()});return Y}function J6(X){eX(X).vars.forEach(function(Y){return Y.forgetCache(X)})}function $9(X){eX(X).vars.forEach(function(Y){return Y.attachCache(X)})}function sZ(X){var Y=new Set,Z=new Set,J=function($){if(arguments.length>0){if(X!==$){X=$,Y.forEach(function(z){eX(z).dep.dirty(J),Y1(z)});var H=Array.from(Z);Z.clear(),H.forEach(function(z){return z(X)})}}else{var B=TX.getValue();if(B)G(B),eX(B).dep(J)}return X};J.onNextChange=function($){return Z.add($),function(){Z.delete($)}};var G=J.attachCache=function($){return Y.add($),eX($).vars.add(J),J};return J.forgetCache=function($){return Y.delete($)},J}function Y1(X){if(X.broadcastWatches)X.broadcastWatches()}var H9=Object.create(null);function G6(X){var Y=JSON.stringify(X);return H9[Y]||(H9[Y]=Object.create(null))}function $6(X){var Y=G6(X);return Y.keyFieldsFn||(Y.keyFieldsFn=function(Z,J){var G=function(H,B){return J.readField(B,H)},$=J.keyObject=B6(X,function(H){var B=FX(J.storeObject,H,G);if(B===void 0&&Z!==J.storeObject&&u.call(Z,H[0]))B=FX(Z,H,W9);return K(B!==void 0,5,H.join("."),Z),B});return"".concat(J.typename,":").concat(JSON.stringify($))})}function H6(X){var Y=G6(X);return Y.keyArgsFn||(Y.keyArgsFn=function(Z,J){var{field:G,variables:$,fieldName:H}=J,B=B6(X,function(W){var U=W[0],Q=U.charAt(0);if(Q==="@"){if(G&&i(G.directives)){var P=U.slice(1),V=G.directives.find(function(A){return A.name.value===P}),q=V&&IY(V,$);return q&&FX(q,W.slice(1))}return}if(Q==="$"){var D=U.slice(1);if($&&u.call($,D)){var M=W.slice(0);return M[0]=D,FX($,M)}return}if(Z)return FX(Z,W)}),z=JSON.stringify(B);if(Z||z!=="{}")H+=":"+z;return H})}function B6(X,Y){var Z=new GY;return B9(X).reduce(function(J,G){var $,H=Y(G);if(H!==void 0){for(var B=G.length-1;B>=0;--B)H=($={},$[G[B]]=H,$);J=Z.merge(J,H)}return J},Object.create(null))}function B9(X){var Y=G6(X);if(!Y.paths){var Z=Y.paths=[],J=[];X.forEach(function(G,$){if(v(G))B9(G).forEach(function(H){return Z.push(J.concat(H))}),J.length=0;else if(J.push(G),!v(X[$+1]))Z.push(J.slice(0)),J.length=0})}return Y.paths}function W9(X,Y){return X[Y]}function FX(X,Y,Z){return Z=Z||W9,z9(Y.reduce(function J(G,$){return v(G)?G.map(function(H){return J(H,$)}):G&&Z(G,$)},X))}function z9(X){if(h(X)){if(v(X))return X.map(z9);return B6(Object.keys(X).sort(),function(Y){return FX(X,Y)})}return X}function W6(X){return X.args!==void 0?X.args:X.field?IY(X.field,X.variables):null}var X1=function(){return},U9=function(X,Y){return Y.fieldName},Q9=function(X,Y,Z){var J=Z.mergeObjects;return J(X,Y)},P9=function(X,Y){return Y},E9=function(){function X(Y){if(this.config=Y,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=E({dataIdFromObject:pZ},Y),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),Y.possibleTypes)this.addPossibleTypes(Y.possibleTypes);if(Y.typePolicies)this.addTypePolicies(Y.typePolicies)}return X.prototype.identify=function(Y,Z){var J,G=this,$=Z&&(Z.typename||((J=Z.storeObject)===null||J===void 0?void 0:J.__typename))||Y.__typename;if($===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var H=Z&&Z.storeObject||Y,B=E(E({},Z),{typename:$,storeObject:H,readField:Z&&Z.readField||function(){var Q=aZ(arguments,H);return G.readField(Q,{store:G.cache.data,variables:Q.variables})}}),z,W=$&&this.getTypePolicy($),U=W&&W.keyFn||this.config.dataIdFromObject;return MX.withValue(!0,function(){while(U){var Q=U(E(E({},Y),H),B);if(v(Q))U=$6(Q);else{z=Q;break}}}),z=z?String(z):void 0,B.keyObject?[z,B.keyObject]:[z]},X.prototype.addTypePolicies=function(Y){var Z=this;Object.keys(Y).forEach(function(J){var G=Y[J],$=G.queryType,H=G.mutationType,B=G.subscriptionType,z=t(G,["queryType","mutationType","subscriptionType"]);if($)Z.setRootTypename("Query",J);if(H)Z.setRootTypename("Mutation",J);if(B)Z.setRootTypename("Subscription",J);if(u.call(Z.toBeAdded,J))Z.toBeAdded[J].push(z);else Z.toBeAdded[J]=[z]})},X.prototype.updateTypePolicy=function(Y,Z,J){var G=this.getTypePolicy(Y),$=Z.keyFields,H=Z.fields;function B(z,W){z.merge=typeof W==="function"?W:W===!0?Q9:W===!1?P9:z.merge}if(B(G,Z.merge),G.keyFn=$===!1?X1:v($)?$6($):typeof $==="function"?$:G.keyFn,H)Object.keys(H).forEach(function(z){var W=J[z];if(!W||(W===null||W===void 0?void 0:W.typename)!==Y)W=J[z]={typename:Y};var U=H[z];if(typeof U==="function")W.read=U;else{var{keyArgs:Q,read:P,merge:V}=U;if(W.keyFn=Q===!1?U9:v(Q)?H6(Q):typeof Q==="function"?Q:W.keyFn,typeof P==="function")W.read=P;B(W,V)}if(W.read&&W.merge)W.keyFn=W.keyFn||U9})},X.prototype.setRootTypename=function(Y,Z){if(Z===void 0)Z=Y;var J="ROOT_"+Y.toUpperCase(),G=this.rootTypenamesById[J];if(Z!==G){if(K(!G||G===Y,6,Y),G)delete this.rootIdsByTypename[G];this.rootIdsByTypename[Z]=J,this.rootTypenamesById[J]=Z}},X.prototype.addPossibleTypes=function(Y){var Z=this;this.usingPossibleTypes=!0,Object.keys(Y).forEach(function(J){Z.getSupertypeSet(J,!0),Y[J].forEach(function(G){Z.getSupertypeSet(G,!0).add(J);var $=G.match(t5);if(!$||$[0]!==G)Z.fuzzySubtypes.set(G,new RegExp(G))})})},X.prototype.getTypePolicy=function(Y){var Z=this;if(!u.call(this.typePolicies,Y)){var J=this.typePolicies[Y]=Object.create(null);J.fields=Object.create(null);var G=this.supertypeMap.get(Y);if(!G&&this.fuzzySubtypes.size)G=this.getSupertypeSet(Y,!0),this.fuzzySubtypes.forEach(function(H,B){if(H.test(Y)){var z=Z.supertypeMap.get(B);if(z)z.forEach(function(W){return G.add(W)})}});if(G&&G.size)G.forEach(function(H){var B=Z.getTypePolicy(H),z=B.fields,W=t(B,["fields"]);Object.assign(J,W),Object.assign(J.fields,z)})}var $=this.toBeAdded[Y];if($&&$.length)$.splice(0).forEach(function(H){Z.updateTypePolicy(Y,H,Z.typePolicies[Y].fields)});return this.typePolicies[Y]},X.prototype.getFieldPolicy=function(Y,Z){if(Y)return this.getTypePolicy(Y).fields[Z]},X.prototype.getSupertypeSet=function(Y,Z){var J=this.supertypeMap.get(Y);if(!J&&Z)this.supertypeMap.set(Y,J=new Set);return J},X.prototype.fragmentMatches=function(Y,Z,J,G){var $=this;if(!Y.typeCondition)return!0;if(!Z)return!1;var H=Y.typeCondition.name.value;if(Z===H)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(H)){var B=this.getSupertypeSet(Z,!0),z=[B],W=function(q){var D=$.getSupertypeSet(q,!1);if(D&&D.size&&z.indexOf(D)<0)z.push(D)},U=!!(J&&this.fuzzySubtypes.size),Q=!1;for(var P=0;P<z.length;++P){var V=z[P];if(V.has(H)){if(!B.has(H)){if(Q)globalThis.__DEV__!==!1&&K.warn(7,Z,H);B.add(H)}return!0}if(V.forEach(W),U&&P===z.length-1&&uZ(Y.selectionSet,J,G))U=!1,Q=!0,this.fuzzySubtypes.forEach(function(q,D){var M=Z.match(q);if(M&&M[0]===Z)W(D)})}}return!1},X.prototype.hasKeyArgs=function(Y,Z){var J=this.getFieldPolicy(Y,Z);return!!(J&&J.keyFn)},X.prototype.getStoreFieldName=function(Y){var{typename:Z,fieldName:J}=Y,G=this.getFieldPolicy(Z,J),$,H=G&&G.keyFn;if(H&&Z){var B={typename:Z,fieldName:J,field:Y.field||null,variables:Y.variables},z=W6(Y);while(H){var W=H(z,B);if(v(W))H=H6(W);else{$=W||J;break}}}if($===void 0)$=Y.field?w5(Y.field,Y.variables):FZ(J,W6(Y));if($===!1)return J;return J===FY($)?$:J+":"+$},X.prototype.readField=function(Y,Z){var J=Y.from;if(!J)return;var G=Y.field||Y.fieldName;if(!G)return;if(Y.typename===void 0){var $=Z.store.getFieldValue(J,"__typename");if($)Y.typename=$}var H=this.getStoreFieldName(Y),B=FY(H),z=Z.store.getFieldValue(J,H),W=this.getFieldPolicy(Y.typename,B),U=W&&W.read;if(U){var Q=V9(this,J,Y,Z,Z.store.getStorage(x(J)?J.__ref:J,H));return TX.withValue(this.cache,U,[z,Q])}return z},X.prototype.getReadFunction=function(Y,Z){var J=this.getFieldPolicy(Y,Z);return J&&J.read},X.prototype.getMergeFunction=function(Y,Z,J){var G=this.getFieldPolicy(Y,Z),$=G&&G.merge;if(!$&&J)G=this.getTypePolicy(J),$=G&&G.merge;return $},X.prototype.runMergeFunction=function(Y,Z,J,G,$){var{field:H,typename:B,merge:z}=J;if(z===Q9)return A9(G.store)(Y,Z);if(z===P9)return Z;if(G.overwrite)Y=void 0;return z(Y,Z,V9(this,void 0,{typename:B,fieldName:H.name.value,field:H,variables:G.variables},G,$||Object.create(null)))},X}();function V9(X,Y,Z,J,G){var $=X.getStoreFieldName(Z),H=FY($),B=Z.variables||J.variables,z=J.store,W=z.toReference,U=z.canRead;return{args:W6(Z),field:Z.field||null,fieldName:H,storeFieldName:$,variables:B,isReference:x,toReference:W,storage:G,cache:X.cache,canRead:U,readField:function(){return X.readField(aZ(arguments,Y,B),J)},mergeObjects:A9(J.store)}}function aZ(X,Y,Z){var J=X[0],G=X[1],$=X.length,H;if(typeof J==="string")H={fieldName:J,from:$>1?G:Y};else if(H=E({},J),!u.call(H,"from"))H.from=Y;if(globalThis.__DEV__!==!1&&H.from===void 0)globalThis.__DEV__!==!1&&K.warn(8,HZ(Array.from(X)));if(H.variables===void 0)H.variables=Z;return H}function A9(X){return function Y(Z,J){if(v(Z)||v(J))throw f(9);if(h(Z)&&h(J)){var G=X.getFieldValue(Z,"__typename"),$=X.getFieldValue(J,"__typename"),H=G&&$&&G!==$;if(H)return J;if(x(Z)&&dY(J))return X.merge(Z.__ref,J),Z;if(dY(Z)&&x(J))return X.merge(Z,J.__ref),J;if(dY(Z)&&dY(J))return E(E({},Z),J)}return J}}function z6(X,Y,Z){var J="".concat(Y).concat(Z),G=X.flavors.get(J);if(!G)X.flavors.set(J,G=X.clientOnly===Y&&X.deferred===Z?X:E(E({},X),{clientOnly:Y,deferred:Z}));return G}var L9=function(){function X(Y,Z,J){this.cache=Y,this.reader=Z,this.fragments=J}return X.prototype.writeToStore=function(Y,Z){var J=this,G=Z.query,$=Z.result,H=Z.dataId,B=Z.variables,z=Z.overwrite,W=BY(G),U=e8();B=E(E({},rY(W)),B);var Q=E(E({store:Y,written:Object.create(null),merge:function(V,q){return U.merge(V,q)},variables:B,varString:ZY(B)},cZ(G,this.fragments)),{overwrite:!!z,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),P=this.processSelectionSet({result:$||Object.create(null),dataId:H,selectionSet:W.selectionSet,mergeTree:{map:new Map},context:Q});if(!x(P))throw f(12,$);return Q.incomingById.forEach(function(V,q){var{storeObject:D,mergeTree:M,fieldNodeSet:A}=V,F=MY(q);if(M&&M.map.size){var T=J.applyMerges(M,F,D,Q);if(x(T))return;D=T}if(globalThis.__DEV__!==!1&&!Q.overwrite){var w=Object.create(null);A.forEach(function(O){if(O.selectionSet)w[O.name.value]=!0});var C=function(O){return w[FY(O)]===!0},N=function(O){var j=M&&M.map.get(O);return Boolean(j&&j.info&&j.info.merge)};Object.keys(D).forEach(function(O){if(C(O)&&!N(O))Z1(F,D,O,Q.store)})}Y.merge(q,D)}),Y.retain(P.__ref),P},X.prototype.processSelectionSet=function(Y){var Z=this,J=Y.dataId,G=Y.result,$=Y.selectionSet,H=Y.context,B=Y.mergeTree,z=this.cache.policies,W=Object.create(null),U=J&&z.rootTypenamesById[J]||xX(G,$,H.fragmentMap)||J&&H.store.get(J,"__typename");if(typeof U==="string")W.__typename=U;var Q=function(){var T=aZ(arguments,W,H.variables);if(x(T.from)){var w=H.incomingById.get(T.from.__ref);if(w){var C=z.readField(E(E({},T),{from:w.storeObject}),H);if(C!==void 0)return C}}return z.readField(T,H)},P=new Set;this.flattenFields($,G,H,U).forEach(function(T,w){var C,N=YY(w),O=G[N];if(P.add(w),O!==void 0){var j=z.getStoreFieldName({typename:U,fieldName:w.name.value,field:w,variables:T.variables}),g=q9(B,j),p=Z.processFieldValue(O,w,w.selectionSet?z6(T,!1,!1):T,g),kY=void 0;if(w.selectionSet&&(x(p)||dY(p)))kY=Q("__typename",p);var VY=z.getMergeFunction(U,w.name.value,kY);if(VY)g.info={field:w,typename:U,merge:VY};else D9(B,j);W=T.merge(W,(C={},C[j]=p,C))}else if(globalThis.__DEV__!==!1&&!T.clientOnly&&!T.deferred&&!tY.added(w)&&!z.getReadFunction(U,w.name.value))globalThis.__DEV__!==!1&&K.error(13,YY(w),G)});try{var V=z.identify(G,{typename:U,selectionSet:$,fragmentMap:H.fragmentMap,storeObject:W,readField:Q}),q=V[0],D=V[1];if(J=J||q,D)W=H.merge(W,D)}catch(T){if(!J)throw T}if(typeof J==="string"){var M=MY(J),A=H.written[J]||(H.written[J]=[]);if(A.indexOf($)>=0)return M;if(A.push($),this.reader&&this.reader.isFresh(G,M,$,H))return M;var F=H.incomingById.get(J);if(F)F.storeObject=H.merge(F.storeObject,W),F.mergeTree=U6(F.mergeTree,B),P.forEach(function(T){return F.fieldNodeSet.add(T)});else H.incomingById.set(J,{storeObject:W,mergeTree:nZ(B)?void 0:B,fieldNodeSet:P});return M}return W},X.prototype.processFieldValue=function(Y,Z,J,G){var $=this;if(!Z.selectionSet||Y===null)return globalThis.__DEV__!==!1?RZ(Y):Y;if(v(Y))return Y.map(function(H,B){var z=$.processFieldValue(H,Z,J,q9(G,B));return D9(G,B),z});return this.processSelectionSet({result:Y,selectionSet:Z.selectionSet,context:J,mergeTree:G})},X.prototype.flattenFields=function(Y,Z,J,G){if(G===void 0)G=xX(Z,Y,J.fragmentMap);var $=new Map,H=this.cache.policies,B=new XY(!1);return function z(W,U){var Q=B.lookup(W,U.clientOnly,U.deferred);if(Q.visited)return;Q.visited=!0,W.selections.forEach(function(P){if(!DY(P,J.variables))return;var{clientOnly:V,deferred:q}=U;if(!(V&&q)&&i(P.directives))P.directives.forEach(function(A){var F=A.name.value;if(F==="client")V=!0;if(F==="defer"){var T=IY(A,J.variables);if(!T||T.if!==!1)q=!0}});if(JY(P)){var D=$.get(P);if(D)V=V&&D.clientOnly,q=q&&D.deferred;$.set(P,z6(J,V,q))}else{var M=RY(P,J.lookupFragment);if(!M&&P.kind===R.FRAGMENT_SPREAD)throw f(14,P.name.value);if(M&&H.fragmentMatches(M,G,Z,J.variables))z(M.selectionSet,z6(J,V,q))}})}(Y,J),$},X.prototype.applyMerges=function(Y,Z,J,G,$){var H,B=this;if(Y.map.size&&!x(J)){var z=!v(J)&&(x(Z)||dY(Z))?Z:void 0,W=J;if(z&&!$)$=[x(z)?z.__ref:z];var U,Q=function(P,V){return v(P)?typeof V==="number"?P[V]:void 0:G.store.getFieldValue(P,String(V))};if(Y.map.forEach(function(P,V){var q=Q(z,V),D=Q(W,V);if(D===void 0)return;if($)$.push(V);var M=B.applyMerges(P,q,D,G,$);if(M!==D)U=U||new Map,U.set(V,M);if($)K($.pop()===V)}),U)J=v(W)?W.slice(0):E({},W),U.forEach(function(P,V){J[V]=P})}if(Y.info)return this.cache.policies.runMergeFunction(Z,J,Y.info,G,$&&(H=G.store).getStorage.apply(H,$));return J},X}();var T9=[];function q9(X,Y){var Z=X.map;if(!Z.has(Y))Z.set(Y,T9.pop()||{map:new Map});return Z.get(Y)}function U6(X,Y){if(X===Y||!Y||nZ(Y))return X;if(!X||nZ(X))return Y;var Z=X.info&&Y.info?E(E({},X.info),Y.info):X.info||Y.info,J=X.map.size&&Y.map.size,G=J?new Map:X.map.size?X.map:Y.map,$={info:Z,map:G};if(J){var H=new Set(Y.map.keys());X.map.forEach(function(B,z){$.map.set(z,U6(B,Y.map.get(z))),H.delete(z)}),H.forEach(function(B){$.map.set(B,U6(Y.map.get(B),X.map.get(B)))})}return $}function nZ(X){return!X||!(X.info||X.map.size)}function D9(X,Y){var Z=X.map,J=Z.get(Y);if(J&&nZ(J))T9.push(J),Z.delete(Y)}var M9=new Set;function Z1(X,Y,Z,J){var G=function(Q){var P=J.getFieldValue(Q,Z);return typeof P==="object"&&P},$=G(X);if(!$)return;var H=G(Y);if(!H)return;if(x($))return;if(_($,H))return;if(Object.keys($).every(function(Q){return J.getFieldValue(H,Q)!==void 0}))return;var B=J.getFieldValue(X,"__typename")||J.getFieldValue(Y,"__typename"),z=FY(Z),W="".concat(B,".").concat(z);if(M9.has(W))return;M9.add(W);var U=[];if(!v($)&&!v(H))[$,H].forEach(function(Q){var P=J.getFieldValue(Q,"__typename");if(typeof P==="string"&&!U.includes(P))U.push(P)});globalThis.__DEV__!==!1&&K.warn(15,z,B,U.length?"either ensure all objects of type "+U.join(" and ")+" have an ID or a custom merge function, or ":"",W,E({},$),E({},H))}var YZ=function(X){o(Y,X);function Y(Z){if(Z===void 0)Z={};var J=X.call(this)||this;if(J.watches=new Set,J.addTypenameTransform=new gX(tY),J.assumeImmutableResults=!0,J.makeVar=sZ,J.txCount=0,globalThis.__DEV__!==!1)y(Z,"addTypename","InMemoryCache","Please remove the `addTypename` option when initializing `InMemoryCache`."),y(Z,"canonizeResults","InMemoryCache","Please remove the `canonizeResults` option when initializing `InMemoryCache`.");return J.config=i8(Z),J.addTypename=!!J.config.addTypename,J.policies=new E9({cache:J,dataIdFromObject:J.config.dataIdFromObject,possibleTypes:J.config.possibleTypes,typePolicies:J.config.typePolicies}),J.init(),J}return Y.prototype.init=function(){var Z=this.data=new LX.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=Z.stump,this.resetResultCache()},Y.prototype.resetResultCache=function(Z){var J=this,G=this.storeReader,$=this.config.fragments;this.addTypenameTransform.resetCache(),$===null||$===void 0||$.resetCaches(),this.storeWriter=new L9(this,this.storeReader=new J9({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:dZ(this.config),canon:Z?void 0:G&&G.canon,fragments:$}),$),this.maybeBroadcastWatch=jY(function(H,B){return J.broadcastWatch(H,B)},{max:this.config.resultCacheMaxSize||n["inMemoryCache.maybeBroadcastWatch"]||5000,makeCacheKey:function(H){var B=H.optimistic?J.optimisticData:J.data;if(ZX(B)){var{optimistic:z,id:W,variables:U}=H;return B.makeCacheKey(H.query,H.callback,ZY({optimistic:z,id:W,variables:U}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(H){return H.resetCaching()})},Y.prototype.restore=function(Z){if(this.init(),Z)this.data.replace(Z);return this},Y.prototype.extract=function(Z){if(Z===void 0)Z=!1;return(Z?this.optimisticData:this.data).extract()},Y.prototype.read=function(Z){if(globalThis.__DEV__!==!1)y(Z,"canonizeResults","cache.read");var J=Z.returnPartialData,G=J===void 0?!1:J;try{return this.storeReader.diffQueryAgainstStore(E(E({},Z),{store:Z.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:G})).result||null}catch($){if($ instanceof iX)return null;throw $}},Y.prototype.write=function(Z){try{return++this.txCount,this.storeWriter.writeToStore(this.data,Z)}finally{if(!--this.txCount&&Z.broadcast!==!1)this.broadcastWatches()}},Y.prototype.modify=function(Z){if(u.call(Z,"id")&&!Z.id)return!1;var J=Z.optimistic?this.optimisticData:this.data;try{return++this.txCount,J.modify(Z.id||"ROOT_QUERY",Z.fields)}finally{if(!--this.txCount&&Z.broadcast!==!1)this.broadcastWatches()}},Y.prototype.diff=function(Z){if(globalThis.__DEV__!==!1)y(Z,"canonizeResults","cache.diff");return this.storeReader.diffQueryAgainstStore(E(E({},Z),{store:Z.optimistic?this.optimisticData:this.data,rootId:Z.id||"ROOT_QUERY",config:this.config}))},Y.prototype.watch=function(Z){var J=this;if(!this.watches.size)$9(this);if(this.watches.add(Z),Z.immediate)this.maybeBroadcastWatch(Z);return function(){if(J.watches.delete(Z)&&!J.watches.size)J6(J);J.maybeBroadcastWatch.forget(Z)}},Y.prototype.gc=function(Z){if(globalThis.__DEV__!==!1)y(Z||{},"resetResultIdentities","cache.gc","First ensure all usages of `canonizeResults` are removed, then remove this option.");ZY.reset(),TY.reset();var J=this.optimisticData.gc();if(Z&&!this.txCount){if(Z.resetResultCache)this.resetResultCache(Z.resetResultIdentities);else if(Z.resetResultIdentities)this.storeReader.resetCanon()}return J},Y.prototype.retain=function(Z,J){return(J?this.optimisticData:this.data).retain(Z)},Y.prototype.release=function(Z,J){return(J?this.optimisticData:this.data).release(Z)},Y.prototype.identify=function(Z){if(x(Z))return Z.__ref;try{return this.policies.identify(Z)[0]}catch(J){globalThis.__DEV__!==!1&&K.warn(J)}},Y.prototype.evict=function(Z){if(!Z.id){if(u.call(Z,"id"))return!1;Z=E(E({},Z),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(Z,this.data)}finally{if(!--this.txCount&&Z.broadcast!==!1)this.broadcastWatches()}},Y.prototype.reset=function(Z){var J=this;if(this.init(),ZY.reset(),Z&&Z.discardWatches)this.watches.forEach(function(G){return J.maybeBroadcastWatch.forget(G)}),this.watches.clear(),J6(this);else this.broadcastWatches();return Promise.resolve()},Y.prototype.removeOptimistic=function(Z){var J=this.optimisticData.removeLayer(Z);if(J!==this.optimisticData)this.optimisticData=J,this.broadcastWatches()},Y.prototype.batch=function(Z){var J=this,G=Z.update,$=Z.optimistic,H=$===void 0?!0:$,B=Z.removeOptimistic,z=Z.onWatchUpdated,W,U=function(P){var V=J,q=V.data,D=V.optimisticData;if(++J.txCount,P)J.data=J.optimisticData=P;try{return W=G(J)}finally{--J.txCount,J.data=q,J.optimisticData=D}},Q=new Set;if(z&&!this.txCount)this.broadcastWatches(E(E({},Z),{onWatchUpdated:function(P){return Q.add(P),!1}}));if(typeof H==="string")this.optimisticData=this.optimisticData.addLayer(H,U);else if(H===!1)U(this.data);else U();if(typeof B==="string")this.optimisticData=this.optimisticData.removeLayer(B);if(z&&Q.size){if(this.broadcastWatches(E(E({},Z),{onWatchUpdated:function(P,V){var q=z.call(this,P,V);if(q!==!1)Q.delete(P);return q}})),Q.size)Q.forEach(function(P){return J.maybeBroadcastWatch.dirty(P)})}else this.broadcastWatches(Z);return W},Y.prototype.performTransaction=function(Z,J){return this.batch({update:Z,optimistic:J||J!==null})},Y.prototype.transformDocument=function(Z){return this.addTypenameToDocument(this.addFragmentsToDocument(Z))},Y.prototype.fragmentMatches=function(Z,J){return this.policies.fragmentMatches(Z,J)},Y.prototype.lookupFragment=function(Z){var J;return((J=this.config.fragments)===null||J===void 0?void 0:J.lookup(Z))||null},Y.prototype.broadcastWatches=function(Z){var J=this;if(!this.txCount)this.watches.forEach(function(G){return J.maybeBroadcastWatch(G,Z)})},Y.prototype.addFragmentsToDocument=function(Z){var J=this.config.fragments;return J?J.transform(Z):Z},Y.prototype.addTypenameToDocument=function(Z){if(this.addTypename)return this.addTypenameTransform.transformDocument(Z);return Z},Y.prototype.broadcastWatch=function(Z,J){var G=this,$=Z.lastDiff,H=d("canonizeResults",function(){return G.diff(Z)});if(J){if(Z.optimistic&&typeof J.optimistic==="string")H.fromOptimisticTransaction=!0;if(J.onWatchUpdated&&J.onWatchUpdated.call(this,Z,H,$)===!1)return}if(!$||!_($.result,H.result))Z.callback(Z.lastDiff=H,$)},Y}(mZ);if(globalThis.__DEV__!==!1)YZ.prototype.getMemoryInternals=a6;var b;(function(X){X[X.loading=1]="loading",X[X.setVariables=2]="setVariables",X[X.fetchMore=3]="fetchMore",X[X.refetch=4]="refetch",X[X.poll=6]="poll",X[X.ready=7]="ready",X[X.error=8]="error"})(b||(b={}));function lY(X){return X?X<7:!1}var{assign:F9,hasOwnProperty:J1}=Object,XZ=function(X){o(Y,X);function Y(Z){var{queryManager:J,queryInfo:G,options:$}=Z,H=this,B=Y.inactiveOnCreation.getValue();H=X.call(this,function(A){H._getOrCreateQuery();try{var F=A._subscription._observer;if(F&&!F.error)F.error=G1}catch(C){}var T=!H.observers.size;H.observers.add(A);var w=H.last;if(w&&w.error)A.error&&A.error(w.error);else if(w&&w.result)A.next&&A.next(H.maskResult(w.result));if(T)H.reobserve().catch(function(){});return function(){if(H.observers.delete(A)&&!H.observers.size)H.tearDownQuery()}})||this,H.observers=new Set,H.subscriptions=new Set,H.dirty=!1,H._getOrCreateQuery=function(){if(B)J.queries.set(H.queryId,G),B=!1;return H.queryManager.getOrCreateQuery(H.queryId)},H.queryInfo=G,H.queryManager=J,H.waitForOwnResult=Q6($.fetchPolicy),H.isTornDown=!1,H.subscribeToMore=H.subscribeToMore.bind(H),H.maskResult=H.maskResult.bind(H);var z=J.defaultOptions.watchQuery,W=z===void 0?{}:z,U=W.fetchPolicy,Q=U===void 0?"cache-first":U,P=$.fetchPolicy,V=P===void 0?Q:P,q=$.initialFetchPolicy,D=q===void 0?V==="standby"?Q:V:q;H.options=E(E({},$),{initialFetchPolicy:D,fetchPolicy:V}),H.queryId=G.queryId||J.generateQueryId();var M=BY(H.query);return H.queryName=M&&M.name&&M.name.value,H}return Object.defineProperty(Y.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),Y.prototype.result=function(){var Z=this;if(globalThis.__DEV__!==!1)SY("observableQuery.result",function(){globalThis.__DEV__!==!1&&K.warn(23)});return new Promise(function(J,G){var $={next:function(B){if(J(B),Z.observers.delete($),!Z.observers.size)Z.queryManager.removeQuery(Z.queryId);setTimeout(function(){H.unsubscribe()},0)},error:G},H=Z.subscribe($)})},Y.prototype.resetDiff=function(){this.queryInfo.resetDiff()},Y.prototype.getCurrentFullResult=function(Z){var J=this;if(Z===void 0)Z=!0;var G=d("getLastResult",function(){return J.getLastResult(!0)}),$=this.queryInfo.networkStatus||G&&G.networkStatus||b.ready,H=E(E({},G),{loading:lY($),networkStatus:$}),B=this.options.fetchPolicy,z=B===void 0?"cache-first":B;if(Q6(z)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers);else if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var W=this.queryInfo.getDiff();if(W.complete||this.options.returnPartialData)H.data=W.result;if(_(H.data,{}))H.data=void 0;if(W.complete){if(delete H.partial,W.complete&&H.networkStatus===b.loading&&(z==="cache-first"||z==="cache-only"))H.networkStatus=b.ready,H.loading=!1}else H.partial=!0;if(H.networkStatus===b.ready&&(H.error||H.errors))H.networkStatus=b.error;if(globalThis.__DEV__!==!1&&!W.complete&&!this.options.partialRefetch&&!H.loading&&!H.data&&!H.error)P6(W.missing)}if(Z)this.updateLastResult(H);return H},Y.prototype.getCurrentResult=function(Z){if(Z===void 0)Z=!0;return this.maskResult(this.getCurrentFullResult(Z))},Y.prototype.isDifferentFromLastResult=function(Z,J){if(!this.last)return!0;var G=this.queryManager.getDocumentInfo(this.query),$=this.queryManager.dataMasking,H=$?G.nonReactiveQuery:this.query,B=$||G.hasNonreactiveDirective?!_Z(H,this.last.result,Z,this.variables):!_(this.last.result,Z);return B||J&&!_(this.last.variables,J)},Y.prototype.getLast=function(Z,J){var G=this.last;if(G&&G[Z]&&(!J||_(G.variables,this.variables)))return G[Z]},Y.prototype.getLastResult=function(Z){if(globalThis.__DEV__!==!1)SY("getLastResult",function(){globalThis.__DEV__!==!1&&K.warn(24)});return this.getLast("result",Z)},Y.prototype.getLastError=function(Z){if(globalThis.__DEV__!==!1)SY("getLastError",function(){globalThis.__DEV__!==!1&&K.warn(25)});return this.getLast("error",Z)},Y.prototype.resetLastResults=function(){if(globalThis.__DEV__!==!1)SY("resetLastResults",function(){globalThis.__DEV__!==!1&&K.warn(26)});delete this.last,this.isTornDown=!1},Y.prototype.resetQueryStoreErrors=function(){if(globalThis.__DEV__!==!1)globalThis.__DEV__!==!1&&K.warn(27);this.queryManager.resetErrors(this.queryId)},Y.prototype.refetch=function(Z){var J,G={pollInterval:0},$=this.options.fetchPolicy;if($==="no-cache")G.fetchPolicy="no-cache";else G.fetchPolicy="network-only";if(globalThis.__DEV__!==!1&&Z&&J1.call(Z,"variables")){var H=kX(this.query),B=H.variableDefinitions;if(!B||!B.some(function(z){return z.variable.name.value==="variables"}))globalThis.__DEV__!==!1&&K.warn(28,Z,((J=H.name)===null||J===void 0?void 0:J.value)||H)}if(Z&&!_(this.options.variables,Z))G.variables=this.options.variables=E(E({},this.options.variables),Z);return this.queryInfo.resetLastWrite(),this.reobserve(G,b.refetch)},Y.prototype.fetchMore=function(Z){var J=this,G=E(E({},Z.query?Z:E(E(E(E({},this.options),{query:this.options.query}),Z),{variables:E(E({},this.options.variables),Z.variables)})),{fetchPolicy:"no-cache"});G.query=this.transformDocument(G.query);var $=this.queryManager.generateQueryId();this.lastQuery=Z.query?this.transformDocument(this.options.query):G.query;var H=this.queryInfo,B=H.networkStatus;if(H.networkStatus=b.fetchMore,G.notifyOnNetworkStatusChange)this.observe();var z=new Set,W=Z===null||Z===void 0?void 0:Z.updateQuery,U=this.options.fetchPolicy!=="no-cache";if(!U)K(W,29);return this.queryManager.fetchQuery($,G,b.fetchMore).then(function(Q){if(J.queryManager.removeQuery($),H.networkStatus===b.fetchMore)H.networkStatus=B;if(U)J.queryManager.cache.batch({update:function(q){var D=Z.updateQuery;if(D)q.updateQuery({query:J.query,variables:J.variables,returnPartialData:!0,optimistic:!1},function(M){return D(M,{fetchMoreResult:Q.data,variables:G.variables})});else q.writeQuery({query:G.query,variables:G.variables,data:Q.data})},onWatchUpdated:function(q){z.add(q.query)}});else{var P=J.getLast("result"),V=W(P.data,{fetchMoreResult:Q.data,variables:G.variables});J.reportResult(E(E({},P),{networkStatus:B,loading:lY(B),data:V}),J.variables)}return J.maskResult(Q)}).finally(function(){if(U&&!z.has(J.query))J.reobserveCacheFirst()})},Y.prototype.subscribeToMore=function(Z){var J=this,G=this.queryManager.startGraphQLSubscription({query:Z.document,variables:Z.variables,context:Z.context}).subscribe({next:function($){var H=Z.updateQuery;if(H)J.updateQuery(function(B,z){return H(B,E({subscriptionData:$},z))})},error:function($){if(Z.onError){Z.onError($);return}globalThis.__DEV__!==!1&&K.error(30,$)}});return this.subscriptions.add(G),function(){if(J.subscriptions.delete(G))G.unsubscribe()}},Y.prototype.setOptions=function(Z){if(globalThis.__DEV__!==!1)y(Z,"canonizeResults","setOptions"),SY("setOptions",function(){globalThis.__DEV__!==!1&&K.warn(31)});return this.reobserve(Z)},Y.prototype.silentSetOptions=function(Z){var J=KY(this.options,Z||{});F9(this.options,J)},Y.prototype.setVariables=function(Z){var J=this;if(_(this.variables,Z))return this.observers.size?d("observableQuery.result",function(){return J.result()}):Promise.resolve();if(this.options.variables=Z,!this.observers.size)return Promise.resolve();return this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:Z},b.setVariables)},Y.prototype.updateQuery=function(Z){var J=this.queryManager,G=J.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}),$=G.result,H=G.complete,B=Z($,{variables:this.variables,complete:!!H,previousData:$});if(B)J.cache.writeQuery({query:this.options.query,data:B,variables:this.variables}),J.broadcastQueries()},Y.prototype.startPolling=function(Z){this.options.pollInterval=Z,this.updatePolling()},Y.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},Y.prototype.applyNextFetchPolicy=function(Z,J){if(J.nextFetchPolicy){var G=J.fetchPolicy,$=G===void 0?"cache-first":G,H=J.initialFetchPolicy,B=H===void 0?$:H;if($==="standby");else if(typeof J.nextFetchPolicy==="function")J.fetchPolicy=J.nextFetchPolicy($,{reason:Z,options:J,observable:this,initialFetchPolicy:B});else if(Z==="variables-changed")J.fetchPolicy=B;else J.fetchPolicy=J.nextFetchPolicy}return J.fetchPolicy},Y.prototype.fetch=function(Z,J,G){var $=this._getOrCreateQuery();return $.setObservableQuery(this),this.queryManager.fetchConcastWithInfo($,Z,J,G)},Y.prototype.updatePolling=function(){var Z=this;if(this.queryManager.ssrMode)return;var J=this,G=J.pollingInfo,$=J.options.pollInterval;if(!$||!this.hasObservers()){if(G)clearTimeout(G.timeout),delete this.pollingInfo;return}if(G&&G.interval===$)return;K($,32);var H=G||(this.pollingInfo={});H.interval=$;var B=function(){var W,U;if(Z.pollingInfo)if(!lY(Z.queryInfo.networkStatus)&&!((U=(W=Z.options).skipPollAttempt)===null||U===void 0?void 0:U.call(W)))Z.reobserve({fetchPolicy:Z.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},b.poll).then(z,z);else z()},z=function(){var W=Z.pollingInfo;if(W)clearTimeout(W.timeout),W.timeout=setTimeout(B,W.interval)};z()},Y.prototype.updateLastResult=function(Z,J){var G=this;if(J===void 0)J=this.variables;var $=d("getLastError",function(){return G.getLastError()});if($&&this.last&&!_(J,this.last.variables))$=void 0;return this.last=E({result:this.queryManager.assumeImmutableResults?Z:RZ(Z),variables:J},$?{error:$}:null)},Y.prototype.reobserveAsConcast=function(Z,J){var G=this;this.isTornDown=!1;var $=J===b.refetch||J===b.fetchMore||J===b.poll,H=this.options.variables,B=this.options.fetchPolicy,z=KY(this.options,Z||{}),W=$?z:F9(this.options,z),U=this.transformDocument(W.query);if(this.lastQuery=U,!$){if(this.updatePolling(),Z&&Z.variables&&!_(Z.variables,H)&&W.fetchPolicy!=="standby"&&(W.fetchPolicy===B||typeof W.nextFetchPolicy==="function")){if(this.applyNextFetchPolicy("variables-changed",W),J===void 0)J=b.setVariables}}this.waitForOwnResult&&(this.waitForOwnResult=Q6(W.fetchPolicy));var Q=function(){if(G.concast===q)G.waitForOwnResult=!1},P=W.variables&&E({},W.variables),V=this.fetch(W,J,U),q=V.concast,D=V.fromLink,M={next:function(A){if(_(G.variables,P))Q(),G.reportResult(A,P)},error:function(A){if(_(G.variables,P)){if(!hZ(A))A=new xY({networkError:A});Q(),G.reportError(A,P)}}};if(!$&&(D||!this.concast)){if(this.concast&&this.observer)this.concast.removeObserver(this.observer);this.concast=q,this.observer=M}return q.addObserver(M),q},Y.prototype.reobserve=function(Z,J){return y5(this.reobserveAsConcast(Z,J).promise.then(this.maskResult))},Y.prototype.resubscribeAfterError=function(){var Z=this,J=[];for(var G=0;G<arguments.length;G++)J[G]=arguments[G];var $=this.last;d("resetLastResults",function(){return Z.resetLastResults()});var H=this.subscribe.apply(this,J);return this.last=$,H},Y.prototype.observe=function(){this.reportResult(this.getCurrentFullResult(!1),this.variables)},Y.prototype.reportResult=function(Z,J){var G=this,$=d("getLastError",function(){return G.getLastError()}),H=this.isDifferentFromLastResult(Z,J);if($||!Z.partial||this.options.returnPartialData)this.updateLastResult(Z,J);if($||H)YX(this.observers,"next",this.maskResult(Z))},Y.prototype.reportError=function(Z,J){var G=this,$=E(E({},d("getLastResult",function(){return G.getLastResult()})),{error:Z,errors:Z.graphQLErrors,networkStatus:b.error,loading:!1});this.updateLastResult($,J),YX(this.observers,"error",this.last.error=Z)},Y.prototype.hasObservers=function(){return this.observers.size>0},Y.prototype.tearDownQuery=function(){if(this.isTornDown)return;if(this.concast&&this.observer)this.concast.removeObserver(this.observer),delete this.concast,delete this.observer;this.stopPolling(),this.subscriptions.forEach(function(Z){return Z.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0},Y.prototype.transformDocument=function(Z){return this.queryManager.transform(Z)},Y.prototype.maskResult=function(Z){return Z&&"data"in Z?E(E({},Z),{data:this.queryManager.maskOperation({document:this.query,data:Z.data,fetchPolicy:this.options.fetchPolicy,id:this.queryId})}):Z},Y.prototype.resetNotifications=function(){this.cancelNotifyTimeout(),this.dirty=!1},Y.prototype.cancelNotifyTimeout=function(){if(this.notifyTimeout)clearTimeout(this.notifyTimeout),this.notifyTimeout=void 0},Y.prototype.scheduleNotify=function(){var Z=this;if(this.dirty)return;if(this.dirty=!0,!this.notifyTimeout)this.notifyTimeout=setTimeout(function(){return Z.notify()},0)},Y.prototype.notify=function(){if(this.cancelNotifyTimeout(),this.dirty){if(this.options.fetchPolicy=="cache-only"||this.options.fetchPolicy=="cache-and-network"||!lY(this.queryInfo.networkStatus)){var Z=this.queryInfo.getDiff();if(Z.fromOptimisticTransaction)this.observe();else this.reobserveCacheFirst()}}this.dirty=!1},Y.prototype.reobserveCacheFirst=function(){var Z=this.options,J=Z.fetchPolicy,G=Z.nextFetchPolicy;if(J==="cache-and-network"||J==="network-only")return this.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function($,H){if(this.nextFetchPolicy=G,typeof this.nextFetchPolicy==="function")return this.nextFetchPolicy($,H);return J}});return this.reobserve()},Y.inactiveOnCreation=new QY,Y}(S);IZ(XZ);function G1(X){globalThis.__DEV__!==!1&&K.error(33,X.message,X.stack)}function P6(X){if(globalThis.__DEV__!==!1&&X)globalThis.__DEV__!==!1&&K.debug(34,X)}function Q6(X){return X==="network-only"||X==="no-cache"||X==="standby"}var KX=new($Y?WeakMap:Map);function V6(X,Y){var Z=X[Y];if(typeof Z==="function")X[Y]=function(){return KX.set(X,(KX.get(X)+1)%1000000000000000),Z.apply(this,arguments)}}var oZ=function(){function X(Y,Z){if(Z===void 0)Z=Y.generateQueryId();this.queryId=Z,this.document=null,this.lastRequestId=1,this.stopped=!1,this.observableQuery=null;var J=this.cache=Y.cache;if(!KX.has(J))KX.set(J,0),V6(J,"evict"),V6(J,"modify"),V6(J,"reset")}return X.prototype.init=function(Y){var Z=Y.networkStatus||b.loading;if(this.variables&&this.networkStatus!==b.loading&&!_(this.variables,Y.variables))Z=b.setVariables;if(!_(Y.variables,this.variables))this.lastDiff=void 0,this.cancel();if(Object.assign(this,{document:Y.document,variables:Y.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:Z}),Y.observableQuery)this.setObservableQuery(Y.observableQuery);if(Y.lastRequestId)this.lastRequestId=Y.lastRequestId;return this},X.prototype.resetDiff=function(){this.lastDiff=void 0},X.prototype.getDiff=function(){var Y=this,Z=this.getDiffOptions();if(this.lastDiff&&_(Z,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var J=this.observableQuery;if(J&&J.options.fetchPolicy==="no-cache")return{complete:!1};var G=d("canonizeResults",function(){return Y.cache.diff(Z)});return this.updateLastDiff(G,Z),G},X.prototype.updateLastDiff=function(Y,Z){this.lastDiff=Y?{diff:Y,options:Z||this.getDiffOptions()}:void 0},X.prototype.getDiffOptions=function(Y){var Z;if(Y===void 0)Y=this.variables;return{query:this.document,variables:Y,returnPartialData:!0,optimistic:!0,canonizeResults:(Z=this.observableQuery)===null||Z===void 0?void 0:Z.options.canonizeResults}},X.prototype.setDiff=function(Y){var Z=this,J,G=this.lastDiff&&this.lastDiff.diff;if(Y&&!Y.complete&&d("getLastError",function(){var $;return($=Z.observableQuery)===null||$===void 0?void 0:$.getLastError()}))return;if(this.updateLastDiff(Y),!_(G&&G.result,Y&&Y.result))(J=this.observableQuery)===null||J===void 0||J.scheduleNotify()},X.prototype.setObservableQuery=function(Y){if(Y===this.observableQuery)return;if(this.observableQuery=Y,Y)Y.queryInfo=this},X.prototype.stop=function(){var Y;if(!this.stopped){this.stopped=!0,(Y=this.observableQuery)===null||Y===void 0||Y.resetNotifications(),this.cancel();var Z=this.observableQuery;if(Z)Z.stopPolling()}},X.prototype.cancel=function(){var Y;(Y=this.cancelWatch)===null||Y===void 0||Y.call(this),this.cancelWatch=void 0},X.prototype.updateWatch=function(Y){var Z=this;if(Y===void 0)Y=this.variables;var J=this.observableQuery;if(J&&J.options.fetchPolicy==="no-cache")return;var G=E(E({},this.getDiffOptions(Y)),{watcher:this,callback:function($){return Z.setDiff($)}});if(!this.lastWatch||!_(G,this.lastWatch))this.cancel(),this.cancelWatch=this.cache.watch(this.lastWatch=G)},X.prototype.resetLastWrite=function(){this.lastWrite=void 0},X.prototype.shouldWrite=function(Y,Z){var J=this.lastWrite;return!(J&&J.dmCount===KX.get(this.cache)&&_(Z,J.variables)&&_(Y.data,J.result.data))},X.prototype.markResult=function(Y,Z,J,G){var $=this,H,B=new GY,z=i(Y.errors)?Y.errors.slice(0):[];if((H=this.observableQuery)===null||H===void 0||H.resetNotifications(),"incremental"in Y&&i(Y.incremental)){var W=OZ(this.getDiff().result,Y);Y.data=W}else if("hasNext"in Y&&Y.hasNext){var U=this.getDiff();Y.data=B.merge(U.result,Y.data)}if(this.graphQLErrors=z,J.fetchPolicy==="no-cache")this.updateLastDiff({result:Y.data,complete:!0},this.getDiffOptions(J.variables));else if(G!==0)if(rZ(Y,J.errorPolicy))this.cache.performTransaction(function(Q){if($.shouldWrite(Y,J.variables))Q.writeQuery({query:Z,data:Y.data,variables:J.variables,overwrite:G===1}),$.lastWrite={result:Y,variables:J.variables,dmCount:KX.get($.cache)};else if($.lastDiff&&$.lastDiff.diff.complete){Y.data=$.lastDiff.diff.result;return}var P=$.getDiffOptions(J.variables),V=d("canonizeResults",function(){return Q.diff(P)});if(!$.stopped&&_($.variables,J.variables))$.updateWatch(J.variables);if($.updateLastDiff(V,P),V.complete)Y.data=V.result});else this.lastWrite=void 0},X.prototype.markReady=function(){return this.networkError=null,this.networkStatus=b.ready},X.prototype.markError=function(Y){var Z;if(this.networkStatus=b.error,this.lastWrite=void 0,(Z=this.observableQuery)===null||Z===void 0||Z.resetNotifications(),Y.graphQLErrors)this.graphQLErrors=Y.graphQLErrors;if(Y.networkError)this.networkError=Y.networkError;return Y},X}();function rZ(X,Y){if(Y===void 0)Y="none";var Z=Y==="ignore"||Y==="all",J=!qX(X);if(!J&&Z&&X.data)J=!0;return J}var $1=Object.prototype.hasOwnProperty,K9=Object.create(null),w9=function(){function X(Y){var Z=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new UX(n["queryManager.getDocumentInfo"]||2000),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new XY(!1),this.noCacheWarningsByQueryId=new Set;var J=new gX(function($){return Z.cache.transformDocument($)},{cache:!1});this.cache=Y.cache,this.link=Y.link,this.defaultOptions=Y.defaultOptions,this.queryDeduplication=Y.queryDeduplication,this.clientAwareness=Y.clientAwareness,this.localState=Y.localState,this.ssrMode=Y.ssrMode,this.assumeImmutableResults=Y.assumeImmutableResults,this.dataMasking=Y.dataMasking;var G=Y.documentTransform;if(this.documentTransform=G?J.concat(G).concat(J):J,this.defaultContext=Y.defaultContext||Object.create(null),this.onBroadcast=Y.onBroadcast)this.mutationStore=Object.create(null)}return X.prototype.stop=function(){var Y=this;this.queries.forEach(function(Z,J){Y.stopQueryNoBroadcast(J)}),this.cancelPendingFetches(f(35))},X.prototype.cancelPendingFetches=function(Y){this.fetchCancelFns.forEach(function(Z){return Z(Y)}),this.fetchCancelFns.clear()},X.prototype.mutate=function(Y){return EY(this,arguments,void 0,function(Z){var J,G,$,H,B,z,W,U=Z.mutation,Q=Z.variables,P=Z.optimisticResponse,V=Z.updateQueries,q=Z.refetchQueries,D=q===void 0?[]:q,M=Z.awaitRefetchQueries,A=M===void 0?!1:M,F=Z.update,T=Z.onQueryUpdated,w=Z.fetchPolicy,C=w===void 0?((z=this.defaultOptions.mutate)===null||z===void 0?void 0:z.fetchPolicy)||"network-only":w,N=Z.errorPolicy,O=N===void 0?((W=this.defaultOptions.mutate)===null||W===void 0?void 0:W.errorPolicy)||"none":N,j=Z.keepRootFields,g=Z.context;return AY(this,function(p){switch(p.label){case 0:if(K(U,36),K(C==="network-only"||C==="no-cache",37),J=this.generateMutationId(),U=this.cache.transformForLink(this.transform(U)),G=this.getDocumentInfo(U).hasClientExports,Q=this.getVariables(U,Q),!G)return[3,2];return[4,this.localState.addExportedVariables(U,Q,g)];case 1:Q=p.sent(),p.label=2;case 2:return $=this.mutationStore&&(this.mutationStore[J]={mutation:U,variables:Q,loading:!0,error:null}),H=P&&this.markMutationOptimistic(P,{mutationId:J,document:U,variables:Q,fetchPolicy:C,errorPolicy:O,context:g,updateQueries:V,update:F,keepRootFields:j}),this.broadcastQueries(),B=this,[2,new Promise(function(kY,VY){return NZ(B.getObservableFromLink(U,E(E({},g),{optimisticResponse:H?P:void 0}),Q,{},!1),function(s){if(qX(s)&&O==="none")throw new xY({graphQLErrors:jZ(s)});if($)$.loading=!1,$.error=null;var zY=E({},s);if(typeof D==="function")D=D(zY);if(O==="ignore"&&qX(zY))delete zY.errors;return B.markMutationResult({mutationId:J,result:zY,document:U,variables:Q,fetchPolicy:C,errorPolicy:O,context:g,update:F,updateQueries:V,awaitRefetchQueries:A,refetchQueries:D,removeOptimistic:H?J:void 0,onQueryUpdated:T,keepRootFields:j})}).subscribe({next:function(s){if(B.broadcastQueries(),!("hasNext"in s)||s.hasNext===!1)kY(E(E({},s),{data:B.maskOperation({document:U,data:s.data,fetchPolicy:C,id:J})}))},error:function(s){if($)$.loading=!1,$.error=s;if(H)B.cache.removeOptimistic(J);B.broadcastQueries(),VY(s instanceof xY?s:new xY({networkError:s}))}})})]}})})},X.prototype.markMutationResult=function(Y,Z){var J=this;if(Z===void 0)Z=this.cache;var G=Y.result,$=[],H=Y.fetchPolicy==="no-cache";if(!H&&rZ(G,Y.errorPolicy)){if(!pY(G))$.push({result:G.data,dataId:"ROOT_MUTATION",query:Y.document,variables:Y.variables});if(pY(G)&&i(G.incremental)){var B=Z.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(Y.document).asQuery,variables:Y.variables,optimistic:!1,returnPartialData:!0}),z=void 0;if(B.result)z=OZ(B.result,G);if(typeof z!=="undefined")G.data=z,$.push({result:z,dataId:"ROOT_MUTATION",query:Y.document,variables:Y.variables})}var W=Y.updateQueries;if(W)this.queries.forEach(function(Q,P){var V=Q.observableQuery,q=V&&V.queryName;if(!q||!$1.call(W,q))return;var D=W[q],M=J.queries.get(P),A=M.document,F=M.variables,T=Z.diff({query:A,variables:F,returnPartialData:!0,optimistic:!1}),w=T.result,C=T.complete;if(C&&w){var N=D(w,{mutationResult:G,queryName:A&&yY(A)||void 0,queryVariables:F});if(N)$.push({result:N,dataId:"ROOT_QUERY",query:A,variables:F})}})}if($.length>0||(Y.refetchQueries||"").length>0||Y.update||Y.onQueryUpdated||Y.removeOptimistic){var U=[];if(this.refetchQueries({updateCache:function(Q){if(!H)$.forEach(function(D){return Q.write(D)});var P=Y.update,V=!N8(G)||pY(G)&&!G.hasNext;if(P){if(!H){var q=Q.diff({id:"ROOT_MUTATION",query:J.getDocumentInfo(Y.document).asQuery,variables:Y.variables,optimistic:!1,returnPartialData:!0});if(q.complete){if(G=E(E({},G),{data:q.result}),"incremental"in G)delete G.incremental;if("hasNext"in G)delete G.hasNext}}if(V)P(Q,G,{context:Y.context,variables:Y.variables})}if(!H&&!Y.keepRootFields&&V)Q.modify({id:"ROOT_MUTATION",fields:function(D,M){var{fieldName:A,DELETE:F}=M;return A==="__typename"?D:F}})},include:Y.refetchQueries,optimistic:!1,removeOptimistic:Y.removeOptimistic,onQueryUpdated:Y.onQueryUpdated||null}).forEach(function(Q){return U.push(Q)}),Y.awaitRefetchQueries||Y.onQueryUpdated)return Promise.all(U).then(function(){return G})}return Promise.resolve(G)},X.prototype.markMutationOptimistic=function(Y,Z){var J=this,G=typeof Y==="function"?Y(Z.variables,{IGNORE:K9}):Y;if(G===K9)return!1;return this.cache.recordOptimisticTransaction(function($){try{J.markMutationResult(E(E({},Z),{result:{data:G}}),$)}catch(H){globalThis.__DEV__!==!1&&K.error(H)}},Z.mutationId),!0},X.prototype.fetchQuery=function(Y,Z,J){return this.fetchConcastWithInfo(this.getOrCreateQuery(Y),Z,J).concast.promise},X.prototype.getQueryStore=function(){var Y=Object.create(null);return this.queries.forEach(function(Z,J){Y[J]={variables:Z.variables,networkStatus:Z.networkStatus,networkError:Z.networkError,graphQLErrors:Z.graphQLErrors}}),Y},X.prototype.resetErrors=function(Y){var Z=this.queries.get(Y);if(Z)Z.networkError=void 0,Z.graphQLErrors=[]},X.prototype.transform=function(Y){return this.documentTransform.transformDocument(Y)},X.prototype.getDocumentInfo=function(Y){var Z=this.transformCache;if(!Z.has(Y)){var J={hasClientExports:V5(Y),hasForcedResolvers:this.localState.shouldForceResolvers(Y),hasNonreactiveDirective:CY(["nonreactive"],Y),nonReactiveQuery:j5(Y),clientQuery:this.localState.clientQuery(Y),serverQuery:KZ([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],Y),defaultVars:rY(BY(Y)),asQuery:E(E({},Y),{definitions:Y.definitions.map(function(G){if(G.kind==="OperationDefinition"&&G.operation!=="query")return E(E({},G),{operation:"query"});return G})})};Z.set(Y,J)}return Z.get(Y)},X.prototype.getVariables=function(Y,Z){return E(E({},this.getDocumentInfo(Y).defaultVars),Z)},X.prototype.watchQuery=function(Y){var Z=this.transform(Y.query);if(Y=E(E({},Y),{variables:this.getVariables(Z,Y.variables)}),typeof Y.notifyOnNetworkStatusChange==="undefined")Y.notifyOnNetworkStatusChange=!1;var J=new oZ(this),G=new XZ({queryManager:this,queryInfo:J,options:Y});if(G.lastQuery=Z,!XZ.inactiveOnCreation.getValue())this.queries.set(G.queryId,J);return J.init({document:Z,observableQuery:G,variables:G.variables}),G},X.prototype.query=function(Y,Z){var J=this;if(Z===void 0)Z=this.generateQueryId();K(Y.query,38),K(Y.query.kind==="Document",39),K(!Y.returnPartialData,40),K(!Y.pollInterval,41);var G=this.transform(Y.query);return this.fetchQuery(Z,E(E({},Y),{query:G})).then(function($){return $&&E(E({},$),{data:J.maskOperation({document:G,data:$.data,fetchPolicy:Y.fetchPolicy,id:Z})})}).finally(function(){return J.stopQuery(Z)})},X.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},X.prototype.generateRequestId=function(){return this.requestIdCounter++},X.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},X.prototype.stopQueryInStore=function(Y){this.stopQueryInStoreNoBroadcast(Y),this.broadcastQueries()},X.prototype.stopQueryInStoreNoBroadcast=function(Y){var Z=this.queries.get(Y);if(Z)Z.stop()},X.prototype.clearStore=function(Y){if(Y===void 0)Y={discardWatches:!0};if(this.cancelPendingFetches(f(42)),this.queries.forEach(function(Z){if(Z.observableQuery)Z.networkStatus=b.loading;else Z.stop()}),this.mutationStore)this.mutationStore=Object.create(null);return this.cache.reset(Y)},X.prototype.getObservableQueries=function(Y){var Z=this;if(Y===void 0)Y="active";var J=new Map,G=new Map,$=new Map,H=new Set;if(Array.isArray(Y))Y.forEach(function(B){if(typeof B==="string")G.set(B,B),$.set(B,!1);else if(K5(B)){var z=TY(Z.transform(B));G.set(z,yY(B)),$.set(z,!1)}else if(h(B)&&B.query)H.add(B)});if(this.queries.forEach(function(B,z){var{observableQuery:W,document:U}=B;if(W){if(Y==="all"){J.set(z,W);return}var Q=W.queryName,P=W.options.fetchPolicy;if(P==="standby"||Y==="active"&&!W.hasObservers())return;if(Y==="active"||Q&&$.has(Q)||U&&$.has(TY(U))){if(J.set(z,W),Q)$.set(Q,!0);if(U)$.set(TY(U),!0)}}}),H.size)H.forEach(function(B){var z=CX("legacyOneTimeQuery"),W=Z.getOrCreateQuery(z).init({document:B.query,variables:B.variables}),U=new XZ({queryManager:Z,queryInfo:W,options:E(E({},B),{fetchPolicy:"network-only"})});K(U.queryId===z),W.setObservableQuery(U),J.set(z,U)});if(globalThis.__DEV__!==!1&&$.size)$.forEach(function(B,z){if(!B){var W=G.get(z);if(W)globalThis.__DEV__!==!1&&K.warn(43,W);else globalThis.__DEV__!==!1&&K.warn(44)}});return J},X.prototype.reFetchObservableQueries=function(Y){var Z=this;if(Y===void 0)Y=!1;var J=[];return this.getObservableQueries(Y?"all":"active").forEach(function(G,$){var H=G.options.fetchPolicy;if(d("resetLastResults",function(){return G.resetLastResults()}),Y||H!=="standby"&&H!=="cache-only")J.push(G.refetch());(Z.queries.get($)||G.queryInfo).setDiff(null)}),this.broadcastQueries(),Promise.all(J)},X.prototype.startGraphQLSubscription=function(Y){var Z=this,J=Y.query,G=Y.variables,$=Y.fetchPolicy,H=Y.errorPolicy,B=H===void 0?"none":H,z=Y.context,W=z===void 0?{}:z,U=Y.extensions,Q=U===void 0?{}:U;J=this.transform(J),G=this.getVariables(J,G);var P=function(q){return Z.getObservableFromLink(J,W,q,Q).map(function(D){if($!=="no-cache"){if(rZ(D,B))Z.cache.write({query:J,result:D.data,dataId:"ROOT_SUBSCRIPTION",variables:q});Z.broadcastQueries()}var M=qX(D),A=S8(D);if(M||A){var F={};if(M)F.graphQLErrors=D.errors;if(A)F.protocolErrors=D.extensions[lX];if(B==="none"||A)throw new xY(F)}if(B==="ignore")delete D.errors;return D})};if(this.getDocumentInfo(J).hasClientExports){var V=this.localState.addExportedVariables(J,G,W).then(P);return new S(function(q){var D=null;return V.then(function(M){return D=M.subscribe(q)},q.error),function(){return D&&D.unsubscribe()}})}return P(G)},X.prototype.stopQuery=function(Y){this.stopQueryNoBroadcast(Y),this.broadcastQueries()},X.prototype.stopQueryNoBroadcast=function(Y){this.stopQueryInStoreNoBroadcast(Y),this.removeQuery(Y)},X.prototype.removeQuery=function(Y){var Z;if(this.fetchCancelFns.delete(Y),this.queries.has(Y))(Z=this.queries.get(Y))===null||Z===void 0||Z.stop(),this.queries.delete(Y)},X.prototype.broadcastQueries=function(){if(this.onBroadcast)this.onBroadcast();this.queries.forEach(function(Y){var Z;return(Z=Y.observableQuery)===null||Z===void 0?void 0:Z.notify()})},X.prototype.getLocalState=function(){return this.localState},X.prototype.getObservableFromLink=function(Y,Z,J,G,$){var H=this,B;if($===void 0)$=(B=Z===null||Z===void 0?void 0:Z.queryDeduplication)!==null&&B!==void 0?B:this.queryDeduplication;var z,W=this.getDocumentInfo(Y),U=W.serverQuery,Q=W.clientQuery;if(U){var P=this,V=P.inFlightLinkObservables,q=P.link,D={query:U,variables:J,operationName:yY(U)||void 0,context:this.prepareContext(E(E({},Z),{forceFetch:!$})),extensions:G};if(Z=D.context,$){var M=TY(U),A=ZY(J),F=V.lookup(M,A);if(z=F.observable,!z){var T=new XX([DX(q,D)]);z=F.observable=T,T.beforeNext(function w(C,N){if(C==="next"&&"hasNext"in N&&N.hasNext)T.beforeNext(w);else V.remove(M,A)})}}else z=new XX([DX(q,D)])}else z=new XX([S.of({data:{}})]),Z=this.prepareContext(Z);if(Q)z=NZ(z,function(w){return H.localState.runResolvers({document:Q,remoteResult:w,context:Z,variables:J})});return z},X.prototype.getResultsFromLink=function(Y,Z,J){var G=Y.lastRequestId=this.generateRequestId(),$=this.cache.transformForLink(J.query);return NZ(this.getObservableFromLink($,J.context,J.variables),function(H){var B=jZ(H),z=B.length>0,W=J.errorPolicy;if(G>=Y.lastRequestId){if(z&&W==="none")throw Y.markError(new xY({graphQLErrors:B}));Y.markResult(H,$,J,Z),Y.markReady()}var U={data:H.data,loading:!1,networkStatus:b.ready};if(z&&W==="none")U.data=void 0;if(z&&W!=="ignore")U.errors=B,U.networkStatus=b.error;return U},function(H){var B=hZ(H)?H:new xY({networkError:H});if(G>=Y.lastRequestId)Y.markError(B);throw B})},X.prototype.fetchConcastWithInfo=function(Y,Z,J,G){var $=this;if(J===void 0)J=b.loading;if(G===void 0)G=Z.query;var H=this.getVariables(G,Z.variables),B=this.defaultOptions.watchQuery,z=Z.fetchPolicy,W=z===void 0?B&&B.fetchPolicy||"cache-first":z,U=Z.errorPolicy,Q=U===void 0?B&&B.errorPolicy||"none":U,P=Z.returnPartialData,V=P===void 0?!1:P,q=Z.notifyOnNetworkStatusChange,D=q===void 0?!1:q,M=Z.context,A=M===void 0?{}:M,F=Object.assign({},Z,{query:G,variables:H,fetchPolicy:W,errorPolicy:Q,returnPartialData:V,notifyOnNetworkStatusChange:D,context:A}),T=function(j){F.variables=j;var g=$.fetchQueryByPolicy(Y,F,J);if(F.fetchPolicy!=="standby"&&g.sources.length>0&&Y.observableQuery)Y.observableQuery.applyNextFetchPolicy("after-fetch",Z);return g},w=function(){return $.fetchCancelFns.delete(Y.queryId)};this.fetchCancelFns.set(Y.queryId,function(j){w(),setTimeout(function(){return C.cancel(j)})});var C,N;if(this.getDocumentInfo(F.query).hasClientExports)C=new XX(this.localState.addExportedVariables(F.query,F.variables,F.context).then(T).then(function(j){return j.sources})),N=!0;else{var O=T(F.variables);N=O.fromLink,C=new XX(O.sources)}return C.promise.then(w,w),{concast:C,fromLink:N}},X.prototype.refetchQueries=function(Y){var Z=this,J=Y.updateCache,G=Y.include,$=Y.optimistic,H=$===void 0?!1:$,B=Y.removeOptimistic,z=B===void 0?H?CX("refetchQueries"):void 0:B,W=Y.onQueryUpdated,U=new Map;if(G)this.getObservableQueries(G).forEach(function(P,V){U.set(V,{oq:P,lastDiff:(Z.queries.get(V)||P.queryInfo).getDiff()})});var Q=new Map;if(J)this.cache.batch({update:J,optimistic:H&&z||!1,removeOptimistic:z,onWatchUpdated:function(P,V,q){var D=P.watcher instanceof oZ&&P.watcher.observableQuery;if(D){if(W){U.delete(D.queryId);var M=W(D,V,q);if(M===!0)M=D.refetch();if(M!==!1)Q.set(D,M);return M}if(W!==null)U.set(D.queryId,{oq:D,lastDiff:q,diff:V})}}});if(U.size)U.forEach(function(P,V){var{oq:q,lastDiff:D,diff:M}=P,A;if(W){if(!M)M=d("canonizeResults",function(){return Z.cache.diff(q.queryInfo.getDiffOptions())});A=W(q,M,D)}if(!W||A===!0)A=q.refetch();if(A!==!1)Q.set(q,A);if(V.indexOf("legacyOneTimeQuery")>=0)Z.stopQueryNoBroadcast(V)});if(z)this.cache.removeOptimistic(z);return Q},X.prototype.maskOperation=function(Y){var Z,J,G,$=Y.document,H=Y.data;if(globalThis.__DEV__!==!1){var{fetchPolicy:B,id:z}=Y,W=(Z=BY($))===null||Z===void 0?void 0:Z.operation,U=((J=W===null||W===void 0?void 0:W[0])!==null&&J!==void 0?J:"o")+z;if(this.dataMasking&&B==="no-cache"&&!D5($)&&!this.noCacheWarningsByQueryId.has(U))this.noCacheWarningsByQueryId.add(U),globalThis.__DEV__!==!1&&K.warn(45,(G=yY($))!==null&&G!==void 0?G:"Unnamed ".concat(W!==null&&W!==void 0?W:"operation"))}return this.dataMasking?i5(H,$,this.cache):H},X.prototype.maskFragment=function(Y){var{data:Z,fragment:J,fragmentName:G}=Y;return this.dataMasking?rX(Z,J,this.cache,G):Z},X.prototype.fetchQueryByPolicy=function(Y,Z,J){var G=this,$=Z.query,H=Z.variables,B=Z.fetchPolicy,z=Z.refetchWritePolicy,W=Z.errorPolicy,U=Z.returnPartialData,Q=Z.context,P=Z.notifyOnNetworkStatusChange,V=Y.networkStatus;Y.init({document:$,variables:H,networkStatus:J});var q=function(){return Y.getDiff()},D=function(w,C){if(C===void 0)C=Y.networkStatus||b.loading;var N=w.result;if(globalThis.__DEV__!==!1&&!U&&!_(N,{}))P6(w.missing);var O=function(j){return S.of(E({data:j,loading:lY(C),networkStatus:C},w.complete?null:{partial:!0}))};if(N&&G.getDocumentInfo($).hasForcedResolvers)return G.localState.runResolvers({document:$,remoteResult:{data:N},context:Q,variables:H,onlyRunForcedResolvers:!0}).then(function(j){return O(j.data||void 0)});if(W==="none"&&C===b.refetch&&Array.isArray(w.missing))return O(void 0);return O(N)},M=B==="no-cache"?0:J===b.refetch&&z!=="merge"?1:2,A=function(){return G.getResultsFromLink(Y,M,{query:$,variables:H,context:Q,fetchPolicy:B,errorPolicy:W})},F=P&&typeof V==="number"&&V!==J&&lY(J);switch(B){default:case"cache-first":{var T=q();if(T.complete)return{fromLink:!1,sources:[D(T,Y.markReady())]};if(U||F)return{fromLink:!0,sources:[D(T),A()]};return{fromLink:!0,sources:[A()]}}case"cache-and-network":{var T=q();if(T.complete||U||F)return{fromLink:!0,sources:[D(T),A()]};return{fromLink:!0,sources:[A()]}}case"cache-only":return{fromLink:!1,sources:[D(q(),Y.markReady())]};case"network-only":if(F)return{fromLink:!0,sources:[D(q()),A()]};return{fromLink:!0,sources:[A()]};case"no-cache":if(F)return{fromLink:!0,sources:[D(Y.getDiff()),A()]};return{fromLink:!0,sources:[A()]};case"standby":return{fromLink:!1,sources:[]}}},X.prototype.getOrCreateQuery=function(Y){if(Y&&!this.queries.has(Y))this.queries.set(Y,new oZ(this,Y));return this.queries.get(Y)},X.prototype.prepareContext=function(Y){if(Y===void 0)Y={};var Z=this.localState.prepareContext(Y);return E(E(E({},this.defaultContext),Z),{clientAwareness:this.clientAwareness})},X}();var C9=function(){function X(Y){var{cache:Z,client:J,resolvers:G,fragmentMatcher:$}=Y;if(this.selectionsToResolveCache=new WeakMap,this.cache=Z,J)this.client=J;if(G)this.addResolvers(G);if($)this.setFragmentMatcher($)}return X.prototype.addResolvers=function(Y){var Z=this;if(this.resolvers=this.resolvers||{},Array.isArray(Y))Y.forEach(function(J){Z.resolvers=S5(Z.resolvers,J)});else this.resolvers=S5(this.resolvers,Y)},X.prototype.setResolvers=function(Y){this.resolvers={},this.addResolvers(Y)},X.prototype.getResolvers=function(){return this.resolvers||{}},X.prototype.runResolvers=function(Y){return EY(this,arguments,void 0,function(Z){var{document:J,remoteResult:G,context:$,variables:H,onlyRunForcedResolvers:B}=Z,z=B===void 0?!1:B;return AY(this,function(W){if(J)return[2,this.resolveDocument(J,G.data,$,H,this.fragmentMatcher,z).then(function(U){return E(E({},G),{data:U.result})})];return[2,G]})})},X.prototype.setFragmentMatcher=function(Y){this.fragmentMatcher=Y},X.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},X.prototype.clientQuery=function(Y){if(CY(["client"],Y)){if(this.resolvers)return Y}return null},X.prototype.serverQuery=function(Y){return mX(Y)},X.prototype.prepareContext=function(Y){var Z=this.cache;return E(E({},Y),{cache:Z,getCacheKey:function(J){return Z.identify(J)}})},X.prototype.addExportedVariables=function(Y){return EY(this,arguments,void 0,function(Z,J,G){if(J===void 0)J={};if(G===void 0)G={};return AY(this,function($){if(Z)return[2,this.resolveDocument(Z,this.buildRootValueFromCache(Z,J)||{},this.prepareContext(G),J).then(function(H){return E(E({},J),H.exportedVariables)})];return[2,E({},J)]})})},X.prototype.shouldForceResolvers=function(Y){var Z=!1;return a(Y,{Directive:{enter:function(J){if(J.name.value==="client"&&J.arguments){if(Z=J.arguments.some(function(G){return G.name.value==="always"&&G.value.kind==="BooleanValue"&&G.value.value===!0}),Z)return wY}}}}),Z},X.prototype.buildRootValueFromCache=function(Y,Z){return this.cache.diff({query:O5(Y),variables:Z,returnPartialData:!0,optimistic:!1}).result},X.prototype.resolveDocument=function(Y,Z){return EY(this,arguments,void 0,function(J,G,$,H,B,z){var W,U,Q,P,V,q,D,M,A,F,T;if($===void 0)$={};if(H===void 0)H={};if(B===void 0)B=function(){return!0};if(z===void 0)z=!1;return AY(this,function(w){return W=LY(J),U=WY(J),Q=HY(U),P=this.collectSelectionsToResolve(W,Q),V=W.operation,q=V?V.charAt(0).toUpperCase()+V.slice(1):"Query",D=this,M=D.cache,A=D.client,F={fragmentMap:Q,context:E(E({},$),{cache:M,client:A}),variables:H,fragmentMatcher:B,defaultOperationType:q,exportedVariables:{},selectionsToResolve:P,onlyRunForcedResolvers:z},T=!1,[2,this.resolveSelectionSet(W.selectionSet,T,G,F).then(function(C){return{result:C,exportedVariables:F.exportedVariables}})]})})},X.prototype.resolveSelectionSet=function(Y,Z,J,G){return EY(this,void 0,void 0,function(){var $,H,B,z,W,U=this;return AY(this,function(Q){return $=G.fragmentMap,H=G.context,B=G.variables,z=[J],W=function(P){return EY(U,void 0,void 0,function(){var V,q;return AY(this,function(D){if(!Z&&!G.selectionsToResolve.has(P))return[2];if(!DY(P,B))return[2];if(JY(P))return[2,this.resolveField(P,Z,J,G).then(function(M){var A;if(typeof M!=="undefined")z.push((A={},A[YY(P)]=M,A))})];if(C5(P))V=P;else V=$[P.name.value],K(V,21,P.name.value);if(V&&V.typeCondition){if(q=V.typeCondition.name.value,G.fragmentMatcher(J,q,H))return[2,this.resolveSelectionSet(V.selectionSet,Z,J,G).then(function(M){z.push(M)})]}return[2]})})},[2,Promise.all(Y.selections.map(W)).then(function(){return eY(z)})]})})},X.prototype.resolveField=function(Y,Z,J,G){return EY(this,void 0,void 0,function(){var $,H,B,z,W,U,Q,P,V,q=this;return AY(this,function(D){if(!J)return[2,null];if($=G.variables,H=Y.name.value,B=YY(Y),z=H!==B,W=J[B]||J[H],U=Promise.resolve(W),!G.onlyRunForcedResolvers||this.shouldForceResolvers(Y)){if(Q=J.__typename||G.defaultOperationType,P=this.resolvers&&this.resolvers[Q],P){if(V=P[z?H:B],V)U=Promise.resolve(TX.withValue(this.cache,V,[J,IY(Y,$),G.context,{field:Y,fragmentMap:G.fragmentMap}]))}}return[2,U.then(function(M){var A,F;if(M===void 0)M=W;if(Y.directives)Y.directives.forEach(function(w){if(w.name.value==="export"&&w.arguments)w.arguments.forEach(function(C){if(C.name.value==="as"&&C.value.kind==="StringValue")G.exportedVariables[C.value.value]=M})});if(!Y.selectionSet)return M;if(M==null)return M;var T=(F=(A=Y.directives)===null||A===void 0?void 0:A.some(function(w){return w.name.value==="client"}))!==null&&F!==void 0?F:!1;if(Array.isArray(M))return q.resolveSubSelectedArray(Y,Z||T,M,G);if(Y.selectionSet)return q.resolveSelectionSet(Y.selectionSet,Z||T,M,G)})]})})},X.prototype.resolveSubSelectedArray=function(Y,Z,J,G){var $=this;return Promise.all(J.map(function(H){if(H===null)return null;if(Array.isArray(H))return $.resolveSubSelectedArray(Y,Z,H,G);if(Y.selectionSet)return $.resolveSelectionSet(Y.selectionSet,Z,H,G)}))},X.prototype.collectSelectionsToResolve=function(Y,Z){var J=function(H){return!Array.isArray(H)},G=this.selectionsToResolveCache;function $(H){if(!G.has(H)){var B=new Set;G.set(H,B),a(H,{Directive:function(z,W,U,Q,P){if(z.name.value==="client")P.forEach(function(V){if(J(V)&&jX(V))B.add(V)})},FragmentSpread:function(z,W,U,Q,P){var V=Z[z.name.value];K(V,22,z.name.value);var q=$(V);if(q.size>0)P.forEach(function(D){if(J(D)&&jX(D))B.add(D)}),B.add(z),q.forEach(function(D){B.add(D)})}})}return G.get(H)}return $(Y)},X}();var R9=!1;var iZ=function(){function X(Y){var Z=this,J,G,$;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!Y.cache)throw f(16);var{uri:H,credentials:B,headers:z,cache:W,documentTransform:U,ssrMode:Q}=Y,P=Q===void 0?!1:Q,V=Y.ssrForceFetchDelay,q=V===void 0?0:V,D=Y.connectToDevTools,M=Y.queryDeduplication,A=M===void 0?!0:M,F=Y.defaultOptions,T=Y.defaultContext,w=Y.assumeImmutableResults,C=w===void 0?W.assumeImmutableResults:w,N=Y.resolvers,O=Y.typeDefs,j=Y.fragmentMatcher,g=Y.clientAwareness,p=Y.name,kY=Y.version,VY=Y.devtools,s=Y.dataMasking;if(globalThis.__DEV__!==!1){if(y(Y,"connectToDevTools","ApolloClient","Please use `devtools.enabled` instead."),y(Y,"uri","ApolloClient","Please initialize an instance of `HttpLink` with `uri` instead."),y(Y,"credentials","ApolloClient","Please initialize an instance of `HttpLink` with `credentials` instead."),y(Y,"headers","ApolloClient","Please initialize an instance of `HttpLink` with `headers` instead."),y(Y,"name","ApolloClient","Please use the `clientAwareness.name` option instead."),y(Y,"version","ApolloClient","Please use the `clientAwareness.version` option instead."),y(Y,"typeDefs","ApolloClient"),!Y.link)globalThis.__DEV__!==!1&&K.warn(17)}var zY=Y.link;if(!zY)zY=H?new aX({uri:H,credentials:B,headers:z}):PY.empty();if(this.link=zY,this.cache=W,this.disableNetworkFetches=P||q>0,this.queryDeduplication=A,this.defaultOptions=F||Object.create(null),this.typeDefs=O,this.devtoolsConfig=E(E({},VY),{enabled:(J=VY===null||VY===void 0?void 0:VY.enabled)!==null&&J!==void 0?J:D}),this.devtoolsConfig.enabled===void 0)this.devtoolsConfig.enabled=globalThis.__DEV__!==!1;if(q)setTimeout(function(){return Z.disableNetworkFetches=!1},q);if(this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=wX,this.localState=new C9({cache:W,client:this,resolvers:N,fragmentMatcher:j}),this.queryManager=new w9({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:T,documentTransform:U,queryDeduplication:A,ssrMode:P,dataMasking:!!s,clientAwareness:{name:(G=g===null||g===void 0?void 0:g.name)!==null&&G!==void 0?G:p,version:($=g===null||g===void 0?void 0:g.version)!==null&&$!==void 0?$:kY},localState:this.localState,assumeImmutableResults:C,onBroadcast:this.devtoolsConfig.enabled?function(){if(Z.devToolsHookCb)Z.devToolsHookCb({action:{},state:{queries:Z.queryManager.getQueryStore(),mutations:Z.queryManager.mutationStore||{}},dataWithOptimisticResults:Z.cache.extract(!0)})}:void 0}),this.devtoolsConfig.enabled)this.connectToDevTools()}return Object.defineProperty(X.prototype,"prioritizeCacheValues",{get:function(){return this.disableNetworkFetches},set:function(Y){this.disableNetworkFetches=Y},enumerable:!1,configurable:!0}),X.prototype.connectToDevTools=function(){if(typeof window==="undefined")return;var Y=window,Z=Symbol.for("apollo.devtools");if((Y[Z]=Y[Z]||[]).push(this),Y.__APOLLO_CLIENT__=this,!R9&&globalThis.__DEV__!==!1){if(R9=!0,window.document&&window.top===window.self&&/^(https?|file):$/.test(window.location.protocol))setTimeout(function(){if(!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var J=window.navigator,G=J&&J.userAgent,$=void 0;if(typeof G==="string"){if(G.indexOf("Chrome/")>-1)$="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm";else if(G.indexOf("Firefox/")>-1)$="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/"}if($)globalThis.__DEV__!==!1&&K.log("Download the Apollo DevTools for a better development experience: %s",$)}},1e4)}},Object.defineProperty(X.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),X.prototype.stop=function(){this.queryManager.stop()},X.prototype.watchQuery=function(Y){if(this.defaultOptions.watchQuery)Y=pX(this.defaultOptions.watchQuery,Y);if(this.disableNetworkFetches&&(Y.fetchPolicy==="network-only"||Y.fetchPolicy==="cache-and-network"))Y=E(E({},Y),{fetchPolicy:"cache-first"});if(globalThis.__DEV__!==!1)y(Y,"canonizeResults","client.watchQuery"),y(Y,"partialRefetch","client.watchQuery");return this.queryManager.watchQuery(Y)},X.prototype.query=function(Y){if(this.defaultOptions.query)Y=pX(this.defaultOptions.query,Y);if(K(Y.fetchPolicy!=="cache-and-network",18),this.disableNetworkFetches&&Y.fetchPolicy==="network-only")Y=E(E({},Y),{fetchPolicy:"cache-first"});if(globalThis.__DEV__!==!1){if(y(Y,"canonizeResults","client.query"),y(Y,"notifyOnNetworkStatusChange","client.query","This option does not affect `client.query` and can be safely removed."),Y.fetchPolicy==="standby")globalThis.__DEV__!==!1&&K.warn(19)}return this.queryManager.query(Y)},X.prototype.mutate=function(Y){if(this.defaultOptions.mutate)Y=pX(this.defaultOptions.mutate,Y);return this.queryManager.mutate(Y)},X.prototype.subscribe=function(Y){var Z=this,J=this.queryManager.generateQueryId();return this.queryManager.startGraphQLSubscription(Y).map(function(G){return E(E({},G),{data:Z.queryManager.maskOperation({document:Y.query,data:G.data,fetchPolicy:Y.fetchPolicy,id:J})})})},X.prototype.readQuery=function(Y,Z){if(Z===void 0)Z=!1;return this.cache.readQuery(Y,Z)},X.prototype.watchFragment=function(Y){var Z;return this.cache.watchFragment(E(E({},Y),(Z={},Z[Symbol.for("apollo.dataMasking")]=this.queryManager.dataMasking,Z)))},X.prototype.readFragment=function(Y,Z){if(Z===void 0)Z=!1;return this.cache.readFragment(Y,Z)},X.prototype.writeQuery=function(Y){var Z=this.cache.writeQuery(Y);if(Y.broadcast!==!1)this.queryManager.broadcastQueries();return Z},X.prototype.writeFragment=function(Y){var Z=this.cache.writeFragment(Y);if(Y.broadcast!==!1)this.queryManager.broadcastQueries();return Z},X.prototype.__actionHookForDevTools=function(Y){this.devToolsHookCb=Y},X.prototype.__requestRaw=function(Y){return DX(this.link,Y)},X.prototype.resetStore=function(){var Y=this;return Promise.resolve().then(function(){return Y.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(Y.resetStoreCallbacks.map(function(Z){return Z()}))}).then(function(){return Y.reFetchObservableQueries()})},X.prototype.clearStore=function(){var Y=this;return Promise.resolve().then(function(){return Y.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(Y.clearStoreCallbacks.map(function(Z){return Z()}))})},X.prototype.onResetStore=function(Y){var Z=this;return this.resetStoreCallbacks.push(Y),function(){Z.resetStoreCallbacks=Z.resetStoreCallbacks.filter(function(J){return J!==Y})}},X.prototype.onClearStore=function(Y){var Z=this;return this.clearStoreCallbacks.push(Y),function(){Z.clearStoreCallbacks=Z.clearStoreCallbacks.filter(function(J){return J!==Y})}},X.prototype.reFetchObservableQueries=function(Y){return this.queryManager.reFetchObservableQueries(Y)},X.prototype.refetchQueries=function(Y){var Z=this.queryManager.refetchQueries(Y),J=[],G=[];Z.forEach(function(H,B){J.push(B),G.push(H)});var $=Promise.all(G);return $.queries=J,$.results=G,$.catch(function(H){globalThis.__DEV__!==!1&&K.debug(20,H)}),$},X.prototype.getObservableQueries=function(Y){if(Y===void 0)Y="active";return this.queryManager.getObservableQueries(Y)},X.prototype.extract=function(Y){return this.cache.extract(Y)},X.prototype.restore=function(Y){return this.cache.restore(Y)},X.prototype.addResolvers=function(Y){this.localState.addResolvers(Y)},X.prototype.setResolvers=function(Y){this.localState.setResolvers(Y)},X.prototype.getResolvers=function(){return this.localState.getResolvers()},X.prototype.setLocalStateFragmentMatcher=function(Y){this.localState.setFragmentMatcher(Y)},X.prototype.setLink=function(Y){this.link=this.queryManager.link=Y},Object.defineProperty(X.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),X}();if(globalThis.__DEV__!==!1)iZ.prototype.getMemoryInternals=s6;var tZ=new Map,E6=new Map,N9=!0,eZ=!1;function I9(X){return X.replace(/[\s,]+/g," ").trim()}function H1(X){return I9(X.source.body.substring(X.start,X.end))}function B1(X){var Y=new Set,Z=[];return X.definitions.forEach(function(J){if(J.kind==="FragmentDefinition"){var G=J.name.value,$=H1(J.loc),H=E6.get(G);if(H&&!H.has($)){if(N9)console.warn("Warning: fragment with name "+G+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names")}else if(!H)E6.set(G,H=new Set);if(H.add($),!Y.has($))Y.add($),Z.push(J)}else Z.push(J)}),E(E({},X),{definitions:Z})}function W1(X){var Y=new Set(X.definitions);Y.forEach(function(J){if(J.loc)delete J.loc;Object.keys(J).forEach(function(G){var $=J[G];if($&&typeof $==="object")Y.add($)})});var Z=X.loc;if(Z)delete Z.startToken,delete Z.endToken;return X}function z1(X){var Y=I9(X);if(!tZ.has(Y)){var Z=qZ(X,{experimentalFragmentVariables:eZ,allowLegacyFragmentVariables:eZ});if(!Z||Z.kind!=="Document")throw new Error("Not a valid GraphQL document.");tZ.set(Y,W1(B1(Z)))}return tZ.get(Y)}function sY(X){var Y=[];for(var Z=1;Z<arguments.length;Z++)Y[Z-1]=arguments[Z];if(typeof X==="string")X=[X];var J=X[0];return Y.forEach(function(G,$){if(G&&G.kind==="Document")J+=G.loc.source.body;else J+=G;J+=X[$+1]}),z1(J)}function O9(){tZ.clear(),E6.clear()}function j9(){N9=!1}function S9(){eZ=!0}function x9(){eZ=!1}var ZZ={gql:sY,resetCaches:O9,disableFragmentWarnings:j9,enableExperimentalFragmentVariables:S9,disableExperimentalFragmentVariables:x9};(function(X){X.gql=ZZ.gql,X.resetCaches=ZZ.resetCaches,X.disableFragmentWarnings=ZZ.disableFragmentWarnings,X.enableExperimentalFragmentVariables=ZZ.enableExperimentalFragmentVariables,X.disableExperimentalFragmentVariables=ZZ.disableExperimentalFragmentVariables})(sY||(sY={}));sY.default=sY;F6(globalThis.__DEV__!==!1?"log":"silent");function k9(X){return new PY(function(Y,Z){var J=t(Y,[]);return new S(function(G){var $,H=!1;return Promise.resolve(J).then(function(B){return X(B,Y.getContext())}).then(Y.setContext).then(function(){if(H)return;$=Z(Y).subscribe({next:G.next.bind(G),error:G.error.bind(G),complete:G.complete.bind(G)})}).catch(G.error.bind(G)),function(){if(H=!0,$)$.unsubscribe()}})})}globalThis.__DEV__=!0;var U1="http://localhost:8081/v1/graphql",Q1="myadminsecretkey",P1=new aX({uri:U1}),V1=k9((X,{headers:Y})=>{return{headers:{...Y,"X-Hasura-Admin-Secret":Q1}}});class h9{fields=[];loops=[];client;currentOffset=0;constructor(){console.log("\uD83C\uDFAF Stencil GraphQL DOM Bindings with Apollo Client + DevTools initialized!"),this.client=new iZ({link:V1.concat(P1),cache:new YZ,connectToDevTools:!0,defaultOptions:{watchQuery:{errorPolicy:"all"},query:{errorPolicy:"all"}}}),console.log("\uD83D\uDD17 Using global Apollo Client for GraphQL queries"),window.__APOLLO_CLIENT__=this.client}scanDOM(){console.log("\uD83D\uDD0D Scanning DOM for GraphQL field bindings..."),this.scanLoopContainers();let X=document.querySelectorAll("[data-gql-field]:not([data-gql-template] [data-gql-field])");this.fields=[],X.forEach((Y)=>{let Z=Y.getAttribute("data-gql-field");if(Z)this.fields.push({element:Y,path:Z}),console.log(`\uD83D\uDCCD Found field binding: ${Z}`)}),console.log(`\u2705 Found ${this.fields.length} field bindings and ${this.loops.length} loop containers`),this.setupRefreshButtons(),this.setupPaginationButtons()}scanLoopContainers(){let X=document.querySelectorAll("[data-gql-loop]");this.loops=[],X.forEach((Y)=>{let Z=Y.getAttribute("data-gql-loop"),J=Y.getAttribute("data-gql-limit"),G=Y.querySelector("[data-gql-template]");if(Z&&G&&J){let $=parseInt(J)||5;this.loops.push({element:Y,arrayName:Z,limit:$,template:G}),console.log(`\uD83D\uDD04 Found loop container: ${Z} (limit: ${$})`)}})}getTemplateFields(X){let Y=X.querySelectorAll("[data-gql-field]"),Z=new Set;return Y.forEach((J)=>{let G=J.getAttribute("data-gql-field");if(G)Z.add(G)}),Array.from(Z)}setupRefreshButtons(){let X=document.querySelectorAll("[data-gql-refresh]");X.forEach((Y)=>{Y.addEventListener("click",async()=>{console.log("\uD83D\uDD04 Refresh button clicked - invalidating cache and refetching data..."),this.clearCache();let Z=this.buildQuery();if(Z){let J=await this.executeQuery(Z,!1);if(J)this.updateDOM(J)}console.log("\u2705 Data refreshed successfully!")})}),console.log(`\uD83D\uDD04 Set up ${X.length} refresh button listeners`)}setupPaginationButtons(){let X=document.querySelectorAll("[data-gql-paginate]");X.forEach((Y)=>{let Z=Y.getAttribute("data-gql-paginate");Y.addEventListener("click",async()=>{console.log(`\uD83D\uDCC4 Pagination button clicked: ${Z}`);let J=this.loops.length>0?this.loops[0].limit:5;if(Z==="next")this.currentOffset+=J;else if(Z==="prev"&&this.currentOffset>=J)this.currentOffset-=J;if(this.currentOffset<0)this.currentOffset=0;console.log(`\uD83D\uDCC4 Current offset: ${this.currentOffset}, page size: ${J}`);let G=this.buildQuery();if(G){let $=await this.executeQuery(G,!1);if($)this.updateDOM($)}})}),console.log(`\uD83D\uDCC4 Set up ${X.length} pagination button listeners`)}buildQueryStructure(){console.log("\uD83C\uDFD7\uFE0F  Building query structure from field paths...");let X={};return this.fields.forEach(({path:Y})=>{if(Y.startsWith("widgets.")&&/widgets\.\d+\./.test(Y))return;if(Y==="current_page")return;let Z=Y.split("."),J=X;Z.forEach((G,$)=>{if($===Z.length-1)J[G]=!0;else{if(!J[G])J[G]={};J=J[G]}})}),console.log("\uD83D\uDCCA Query structure built:",X),X}structureToGraphQL(X,Y=0){let Z="  ".repeat(Y),J="";return Object.entries(X).forEach(([G,$])=>{if($===!0)J+=`${Z}${G}\n`;else J+=`${Z}${G} {\n`,J+=this.structureToGraphQL($,Y+1),J+=`${Z}}\n`}),J}buildQuery(){if(console.log("\uD83C\uDFD7\uFE0F  Building GraphQL query from field paths..."),this.fields.length===0)return console.log("\u26A0\uFE0F  No fields found to query"),null;let X=this.buildQueryStructure(),Y=this.structureToGraphQL(X,1),Z="";this.loops.forEach((G)=>{let $=this.getTemplateFields(G.template),H="";$.forEach((B)=>{if(B==="category")H+="      category {\n        name\n      }\n";else H+=`      ${B}\n`}),Z+=`    ${G.arrayName}(limit: ${G.limit}, offset: ${this.currentOffset}, order_by: {id: asc}) {
${H}    }
`,console.log(`\uD83D\uDD04 Generated query for ${G.arrayName} with fields:`,$)});let J=`
      query StencilGeneratedQuery {
${Z}${Y}      }
    `;console.log("\uD83D\uDCDD Generated GraphQL query:",J);try{return sY(J)}catch(G){return console.error("\u274C Invalid GraphQL query generated:",G),null}}async executeQuery(X,Y=!0){console.log("\uD83D\uDE80 Executing GraphQL query with Apollo Client...");try{let Z=await this.client.query({query:X,fetchPolicy:Y?"cache-first":"network-only",errorPolicy:"all",context:{queryName:"StencilGeneratedQuery",source:"stencil-dom-bindings"}});return console.log("\uD83D\uDCCA Query result:",Z.data),Z.data}catch(Z){return console.error("\u274C Query execution failed:",Z),null}}updateDOM(X){console.log("\uD83C\uDFA8 Updating DOM with query results..."),this.fields.forEach(({element:Y,path:Z})=>{let J;if(Z==="current_page"){let G=this.loops.length>0?this.loops[0].limit:5;J=Math.floor(this.currentOffset/G)+1}else J=this.getNestedValue(X,Z);if(J!==void 0&&J!==null){let G;if(typeof J==="number")G=Number(J).toFixed(2);else if(typeof J==="boolean")G=J?"Yes":"No";else G=J.toString();Y.textContent=G,console.log(`\u2728 Updated ${Z}: ${G}`)}else console.warn(`\u26A0\uFE0F  No value found for path: ${Z}`),Y.textContent="N/A"}),this.updateLoopContainers(X)}updateLoopContainers(X){console.log("\uD83C\uDFA8 Updating loop containers with data:",X),this.loops.forEach((Y)=>{let Z=X[Y.arrayName];if(console.log(`\uD83D\uDD04 Processing loop ${Y.arrayName}:`,Z),!Array.isArray(Z)){console.warn(`\u26A0\uFE0F  No array data found for loop: ${Y.arrayName}`,X);return}if(Z.length===0)console.warn(`\u26A0\uFE0F  Empty array for loop: ${Y.arrayName}`);let J=Y.element.querySelectorAll("[data-gql-replicated]");console.log(`\uD83E\uDDF9 Clearing ${J.length} existing replicated items`),J.forEach((G)=>G.remove()),Y.template.style.display="",Z.forEach((G,$)=>{console.log(`\uD83D\uDCCB Creating replica ${$} with data:`,G);let H=Y.template.cloneNode(!0);H.setAttribute("data-gql-replicated","true"),H.removeAttribute("data-gql-template"),H.querySelectorAll("[data-gql-field]").forEach((z)=>{let W=z.getAttribute("data-gql-field");if(W){let U=G[W];if(W==="category"&&G.category)U=G.category.name;if(U!==void 0&&U!==null){let Q;if(typeof U==="number")Q=Number(U).toFixed(2);else if(typeof U==="boolean")Q=U?"Yes":"No";else Q=U.toString();z.textContent=Q,console.log(`  \u2728 Updated ${W}: ${Q}`)}else z.textContent="N/A",console.log(`  \u26A0\uFE0F  No value for ${W}`)}}),Y.element.insertBefore(H,Y.template)}),Y.template.style.display="none",console.log(`\uD83D\uDD04 Updated loop container ${Y.arrayName} with ${Z.length} items`)})}getNestedValue(X,Y){if(Y.startsWith("widgets.")&&/widgets\.\d+\./.test(Y)){let Z=Y.match(/^widgets\.(\d+)\.(.+)$/);if(Z&&X.widgets&&Array.isArray(X.widgets)){let J=parseInt(Z[1]),G=Z[2];if(G==="category")return X.widgets[J]?.category?.name;return X.widgets[J]?.[G]}return}return Y.split(".").reduce((Z,J)=>Z?.[J],X)}async run(){console.log("\uD83C\uDFAC Starting Stencil GraphQL DOM binding process..."),this.scanDOM();let X=this.buildQuery();if(X){let Y=await this.executeQuery(X,!0);if(Y)this.updateDOM(Y)}console.log("\uD83C\uDF89 Stencil GraphQL process complete!")}async refresh(){console.log("\uD83D\uDD04 Refreshing GraphQL data...");let X=this.buildQuery();if(X){let Y=await this.executeQuery(X,!1);if(Y)this.updateDOM(Y)}}clearCache(){console.log("\uD83D\uDDD1\uFE0F  Clearing Apollo cache..."),this.client.cache.reset()}getCacheStats(){let X=this.client.cache.extract();return{cacheSize:X?Object.keys(X).length:0,cache:X}}getApolloClient(){return this.client}}var A6=new h9;window.stencil=A6;if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{console.log("\uD83D\uDE80 DOM is ready, initializing Stencil..."),A6.run()});else console.log("\uD83D\uDE80 DOM already ready, initializing Stencil..."),A6.run();

//# debugId=C271597A522FEF3C64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWludmFyaWFudC9saWIvaW52YXJpYW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC92ZXJzaW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZ2xvYmFscy9tYXliZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dsb2JhbHMvZ2xvYmFsLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvY29tbW9uL21ha2VVbmlxdWVJZC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2NvbW1vbi9zdHJpbmdpZnlGb3JEaXNwbGF5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZ2xvYmFscy9pbnZhcmlhbnRXcmFwcGVycy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9kZXZBc3NlcnQubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2pzdXRpbHMvaXNPYmplY3RMaWtlLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL2ludmFyaWFudC5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvbG9jYXRpb24ubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL3ByaW50TG9jYXRpb24ubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2Vycm9yL0dyYXBoUUxFcnJvci5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvZXJyb3Ivc3ludGF4RXJyb3IubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL2FzdC5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvZGlyZWN0aXZlTG9jYXRpb24ubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL2tpbmRzLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9jaGFyYWN0ZXJDbGFzc2VzLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9ibG9ja1N0cmluZy5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvdG9rZW5LaW5kLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9sZXhlci5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9pbnNwZWN0Lm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL2luc3RhbmNlT2YubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL3NvdXJjZS5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvcGFyc2VyLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9wcmludFN0cmluZy5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvdmlzaXRvci5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvcHJpbnRlci5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvcHJlZGljYXRlcy5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9ncmFwaHFsL2RpcmVjdGl2ZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3cnkvdHJpZS9saWIvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vY2FuVXNlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvY29tbW9uL29iamVjdHMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9ncmFwaHFsL2ZyYWdtZW50cy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdyeS9jYWNoZXMvbGliL3N0cm9uZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdyeS9jYWNoZXMvbGliL3dlYWsuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jYWNoaW5nL2NhY2hlcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2NhY2hpbmcvc2l6ZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jYWNoaW5nL2dldE1lbW9yeUludGVybmFscy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2NvbW1vbi9jYW5vbmljYWxTdHJpbmdpZnkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9ncmFwaHFsL3N0b3JlVXRpbHMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9ncmFwaHFsL2dldEZyb21BU1QuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3cnkvY29udGV4dC9saWIvc2xvdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvb3B0aW1pc20vbGliL2NvbnRleHQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL29wdGltaXNtL2xpYi9oZWxwZXJzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9vcHRpbWlzbS9saWIvZW50cnkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL29wdGltaXNtL2xpYi9kZXAuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL29wdGltaXNtL2xpYi9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dyYXBocWwvRG9jdW1lbnRUcmFuc2Zvcm0uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9ncmFwaHFsL3ByaW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvY29tbW9uL2FycmF5cy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dyYXBocWwvdHJhbnNmb3JtLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvY29tbW9uL21lcmdlRGVlcC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvemVuLW9ic2VydmFibGUtdHMvbW9kdWxlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9lcy9wb255ZmlsbC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvc3ltYm9sLW9ic2VydmFibGUvZXMvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9vYnNlcnZhYmxlcy9PYnNlcnZhYmxlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvcHJvbWlzZXMvcHJldmVudFVuaGFuZGxlZFJlamVjdGlvbi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2NvbW1vbi9jbG9uZURlZXAuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vbWF5YmVEZWVwRnJlZXplLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvb2JzZXJ2YWJsZXMvaXRlcmF0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvb2JzZXJ2YWJsZXMvYXN5bmNNYXAuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9vYnNlcnZhYmxlcy9zdWJjbGFzc2luZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL29ic2VydmFibGVzL0NvbmNhc3QuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vaW5jcmVtZW50YWxSZXN1bHQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9jb21tb24vZXJyb3JIYW5kbGluZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2NvbW1vbi9jb21wYWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvY29tbW9uL21lcmdlT3B0aW9ucy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay91dGlscy9mcm9tRXJyb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvdXRpbHMvdGhyb3dTZXJ2ZXJFcnJvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay91dGlscy92YWxpZGF0ZU9wZXJhdGlvbi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay91dGlscy9jcmVhdGVPcGVyYXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvdXRpbHMvdHJhbnNmb3JtT3BlcmF0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL3V0aWxzL2ZpbHRlck9wZXJhdGlvblZhcmlhYmxlcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2RlcHJlY2F0aW9uL2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2NvcmUvQXBvbGxvTGluay5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9jb3JlL2V4ZWN1dGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9pdGVyYXRvcnMvYXN5bmMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9pdGVyYXRvcnMvbm9kZVN0cmVhbS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL2l0ZXJhdG9ycy9wcm9taXNlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2h0dHAvaXRlcmF0b3JzL3JlYWRlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3Jlc3BvbnNlSXRlcmF0b3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2Vycm9ycy9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3BhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2UuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9zZXJpYWxpemVGZXRjaFBhcmFtZXRlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3NlbGVjdEh0dHBPcHRpb25zQW5kQm9keS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL2NoZWNrRmV0Y2hlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3NlbGVjdFVSSS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3Jld3JpdGVVUklGb3JHRVQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9jcmVhdGVIdHRwTGluay5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL0h0dHBMaW5rLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad3J5L2VxdWFsaXR5L2xpYi9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY29yZS9lcXVhbEJ5UXVlcnkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L21hc2tpbmcvdXRpbHMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L21hc2tpbmcvbWFza0RlZmluaXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L21hc2tpbmcvbWFza0ZyYWdtZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9tYXNraW5nL21hc2tPcGVyYXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2NvcmUvY2FjaGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2NvcmUvdHlwZXMvY29tbW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jYWNoZS9pbm1lbW9yeS9oZWxwZXJzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jYWNoZS9pbm1lbW9yeS9lbnRpdHlTdG9yZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvb2JqZWN0LWNhbm9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jYWNoZS9pbm1lbW9yeS9yZWFkRnJvbVN0b3JlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jYWNoZS9pbm1lbW9yeS9yZWFjdGl2ZVZhcnMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L2tleS1leHRyYWN0b3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L3BvbGljaWVzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jYWNoZS9pbm1lbW9yeS93cml0ZVRvU3RvcmUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L2luTWVtb3J5Q2FjaGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NvcmUvbmV0d29ya1N0YXR1cy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY29yZS9PYnNlcnZhYmxlUXVlcnkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NvcmUvUXVlcnlJbmZvLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jb3JlL1F1ZXJ5TWFuYWdlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY29yZS9Mb2NhbFN0YXRlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jb3JlL0Fwb2xsb0NsaWVudC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC10YWcvbGliL2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jb3JlL2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2NvbnRleHQvaW5kZXguanMiLCAiLi4vLi4vc3JjL2luZGV4LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWwogICAgIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cblxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XG4gIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XG4gIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59XG5cbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcbiAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0O1xuICB9XG4gIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcbiAgdmFyIHQgPSB7fTtcbiAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICB0W3BdID0gc1twXTtcbiAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICB9XG4gIHJldHVybiB0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcbiAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XG4gIHZhciBraW5kID0gY29udGV4dEluLmtpbmQsIGtleSA9IGtpbmQgPT09IFwiZ2V0dGVyXCIgPyBcImdldFwiIDoga2luZCA9PT0gXCJzZXR0ZXJcIiA/IFwic2V0XCIgOiBcInZhbHVlXCI7XG4gIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xuICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcbiAgdmFyIF8sIGRvbmUgPSBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBjb250ZXh0ID0ge307XG4gICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbikgY29udGV4dFtwXSA9IHAgPT09IFwiYWNjZXNzXCIgPyB7fSA6IGNvbnRleHRJbltwXTtcbiAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xuICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcbiAgICAgIHZhciByZXN1bHQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoa2luZCA9PT0gXCJhY2Nlc3NvclwiID8geyBnZXQ6IGRlc2NyaXB0b3IuZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0gOiBkZXNjcmlwdG9yW2tleV0sIGNvbnRleHQpO1xuICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XG4gICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcbiAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuaW5pdCkpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XG4gICAgICAgICAgaWYgKGtpbmQgPT09IFwiZmllbGRcIikgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XG4gICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xuICAgICAgfVxuICB9XG4gIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcbiAgZG9uZSA9IHRydWU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xuICB2YXIgdXNlVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcbiAgfVxuICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikgbmFtZSA9IG5hbWUuZGVzY3JpcHRpb24gPyBcIltcIi5jb25jYXQobmFtZS5kZXNjcmlwdGlvbiwgXCJdXCIpIDogXCJcIjtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xuICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcbiAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gIH1cbn1cblxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIG9bazJdID0gbVtrXTtcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcbiAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xuICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xuICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xuICAgICAgfVxuICB9O1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xuICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XG4gIGlmICghbSkgcmV0dXJuIG87XG4gIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xuICB0cnkge1xuICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XG4gIGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcbiAgICAgIH1cbiAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxuICB9XG4gIHJldHVybiBhcjtcbn1cblxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XG4gIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xuICByZXR1cm4gYXI7XG59XG5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xuICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcbiAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXG4gICAgICAgICAgcltrXSA9IGFbal07XG4gIHJldHVybiByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xuICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgfVxuICB9XG4gIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XG4gIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcbiAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcbiAgZnVuY3Rpb24gYXdhaXRSZXR1cm4oZikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGYsIHJlamVjdCk7IH07IH1cbiAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlmIChnW25dKSB7IGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IGlmIChmKSBpW25dID0gZihpW25dKTsgfSB9XG4gIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cbiAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XG4gIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cbiAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxuICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcbiAgdmFyIGksIHA7XG4gIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XG4gIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IGZhbHNlIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcbiAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xuICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XG4gIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XG4gIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XG4gIHJldHVybiBjb29rZWQ7XG59O1xuXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59O1xuXG52YXIgb3duS2V5cyA9IGZ1bmN0aW9uKG8pIHtcbiAgb3duS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIChvKSB7XG4gICAgdmFyIGFyID0gW107XG4gICAgZm9yICh2YXIgayBpbiBvKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSBhclthci5sZW5ndGhdID0gaztcbiAgICByZXR1cm4gYXI7XG4gIH07XG4gIHJldHVybiBvd25LZXlzKG8pO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcbiAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgPSBvd25LZXlzKG1vZCksIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykgaWYgKGtbaV0gIT09IFwiZGVmYXVsdFwiKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGtbaV0pO1xuICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xuICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xuICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XG4gIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XG4gIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xuICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcbiAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XG4gICAgaWYgKGFzeW5jKSB7XG4gICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcbiAgICB9XG4gICAgaWYgKGRpc3Bvc2UgPT09IHZvaWQgMCkge1xuICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XG4gICAgICBpZiAoYXN5bmMpIGlubmVyID0gZGlzcG9zZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkaXNwb3NlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qgbm90IGRpc3Bvc2FibGUuXCIpO1xuICAgIGlmIChpbm5lcikgZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0cnkgeyBpbm5lci5jYWxsKHRoaXMpOyB9IGNhdGNoIChlKSB7IHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgfSB9O1xuICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XG4gIH1cbiAgZWxzZSBpZiAoYXN5bmMpIHtcbiAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xuICBmdW5jdGlvbiBmYWlsKGUpIHtcbiAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XG4gICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgfVxuICB2YXIgciwgcyA9IDA7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgd2hpbGUgKHIgPSBlbnYuc3RhY2sucG9wKCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghci5hc3luYyAmJiBzID09PSAxKSByZXR1cm4gcyA9IDAsIGVudi5zdGFjay5wdXNoKHIpLCBQcm9taXNlLnJlc29sdmUoKS50aGVuKG5leHQpO1xuICAgICAgICBpZiAoci5kaXNwb3NlKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHIuZGlzcG9zZS5jYWxsKHIudmFsdWUpO1xuICAgICAgICAgIGlmIChyLmFzeW5jKSByZXR1cm4gcyB8PSAyLCBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKG5leHQsIGZ1bmN0aW9uKGUpIHsgZmFpbChlKTsgcmV0dXJuIG5leHQoKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBzIHw9IDE7XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBmYWlsKGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocyA9PT0gMSkgcmV0dXJuIGVudi5oYXNFcnJvciA/IFByb21pc2UucmVqZWN0KGVudi5lcnJvcikgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBpZiAoZW52Lmhhc0Vycm9yKSB0aHJvdyBlbnYuZXJyb3I7XG4gIH1cbiAgcmV0dXJuIG5leHQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uKHBhdGgsIHByZXNlcnZlSnN4KSB7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIiAmJiAvXlxcLlxcLj9cXC8vLnRlc3QocGF0aCkpIHtcbiAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLih0c3gpJHwoKD86XFwuZCk/KSgoPzpcXC5bXi4vXSs/KT8pXFwuKFtjbV0/KXRzJC9pLCBmdW5jdGlvbiAobSwgdHN4LCBkLCBleHQsIGNtKSB7XG4gICAgICAgICAgcmV0dXJuIHRzeCA/IHByZXNlcnZlSnN4ID8gXCIuanN4XCIgOiBcIi5qc1wiIDogZCAmJiAoIWV4dCB8fCAhY20pID8gbSA6IChkICsgZXh0ICsgXCIuXCIgKyBjbS50b0xvd2VyQ2FzZSgpICsgXCJqc1wiKTtcbiAgICAgIH0pO1xuICB9XG4gIHJldHVybiBwYXRoO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIF9fZXh0ZW5kcyxcbiAgX19hc3NpZ24sXG4gIF9fcmVzdCxcbiAgX19kZWNvcmF0ZSxcbiAgX19wYXJhbSxcbiAgX19lc0RlY29yYXRlLFxuICBfX3J1bkluaXRpYWxpemVycyxcbiAgX19wcm9wS2V5LFxuICBfX3NldEZ1bmN0aW9uTmFtZSxcbiAgX19tZXRhZGF0YSxcbiAgX19hd2FpdGVyLFxuICBfX2dlbmVyYXRvcixcbiAgX19jcmVhdGVCaW5kaW5nLFxuICBfX2V4cG9ydFN0YXIsXG4gIF9fdmFsdWVzLFxuICBfX3JlYWQsXG4gIF9fc3ByZWFkLFxuICBfX3NwcmVhZEFycmF5cyxcbiAgX19zcHJlYWRBcnJheSxcbiAgX19hd2FpdCxcbiAgX19hc3luY0dlbmVyYXRvcixcbiAgX19hc3luY0RlbGVnYXRvcixcbiAgX19hc3luY1ZhbHVlcyxcbiAgX19tYWtlVGVtcGxhdGVPYmplY3QsXG4gIF9faW1wb3J0U3RhcixcbiAgX19pbXBvcnREZWZhdWx0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXG4gIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlLFxuICBfX2Rpc3Bvc2VSZXNvdXJjZXMsXG4gIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uLFxufTtcbiIsCiAgICAiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG52YXIgZ2VuZXJpY01lc3NhZ2UgPSBcIkludmFyaWFudCBWaW9sYXRpb25cIjtcbnZhciBfYSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiwgc2V0UHJvdG90eXBlT2YgPSBfYSA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKG9iaiwgcHJvdG8pIHtcbiAgICBvYmouX19wcm90b19fID0gcHJvdG87XG4gICAgcmV0dXJuIG9iajtcbn0gOiBfYTtcbnZhciBJbnZhcmlhbnRFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW52YXJpYW50RXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSW52YXJpYW50RXJyb3IobWVzc2FnZSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gdm9pZCAwKSB7IG1lc3NhZ2UgPSBnZW5lcmljTWVzc2FnZTsgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlb2YgbWVzc2FnZSA9PT0gXCJudW1iZXJcIlxuICAgICAgICAgICAgPyBnZW5lcmljTWVzc2FnZSArIFwiOiBcIiArIG1lc3NhZ2UgKyBcIiAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcG9sbG9ncmFwaHFsL2ludmFyaWFudC1wYWNrYWdlcylcIlxuICAgICAgICAgICAgOiBtZXNzYWdlKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5mcmFtZXNUb1BvcCA9IDE7XG4gICAgICAgIF90aGlzLm5hbWUgPSBnZW5lcmljTWVzc2FnZTtcbiAgICAgICAgc2V0UHJvdG90eXBlT2YoX3RoaXMsIEludmFyaWFudEVycm9yLnByb3RvdHlwZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEludmFyaWFudEVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0IHsgSW52YXJpYW50RXJyb3IgfTtcbmV4cG9ydCBmdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbn1cbnZhciB2ZXJib3NpdHlMZXZlbHMgPSBbXCJkZWJ1Z1wiLCBcImxvZ1wiLCBcIndhcm5cIiwgXCJlcnJvclwiLCBcInNpbGVudFwiXTtcbnZhciB2ZXJib3NpdHlMZXZlbCA9IHZlcmJvc2l0eUxldmVscy5pbmRleE9mKFwibG9nXCIpO1xuZnVuY3Rpb24gd3JhcENvbnNvbGVNZXRob2QobmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh2ZXJib3NpdHlMZXZlbHMuaW5kZXhPZihuYW1lKSA+PSB2ZXJib3NpdHlMZXZlbCkge1xuICAgICAgICAgICAgLy8gRGVmYXVsdCB0byBjb25zb2xlLmxvZyBpZiB0aGlzIGhvc3QgZW52aXJvbm1lbnQgaGFwcGVucyBub3QgdG8gcHJvdmlkZVxuICAgICAgICAgICAgLy8gYWxsIHRoZSBjb25zb2xlLiogbWV0aG9kcyB3ZSBuZWVkLlxuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IGNvbnNvbGVbbmFtZV0gfHwgY29uc29sZS5sb2c7XG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuKGZ1bmN0aW9uIChpbnZhcmlhbnQpIHtcbiAgICBpbnZhcmlhbnQuZGVidWcgPSB3cmFwQ29uc29sZU1ldGhvZChcImRlYnVnXCIpO1xuICAgIGludmFyaWFudC5sb2cgPSB3cmFwQ29uc29sZU1ldGhvZChcImxvZ1wiKTtcbiAgICBpbnZhcmlhbnQud2FybiA9IHdyYXBDb25zb2xlTWV0aG9kKFwid2FyblwiKTtcbiAgICBpbnZhcmlhbnQuZXJyb3IgPSB3cmFwQ29uc29sZU1ldGhvZChcImVycm9yXCIpO1xufSkoaW52YXJpYW50IHx8IChpbnZhcmlhbnQgPSB7fSkpO1xuZXhwb3J0IGZ1bmN0aW9uIHNldFZlcmJvc2l0eShsZXZlbCkge1xuICAgIHZhciBvbGQgPSB2ZXJib3NpdHlMZXZlbHNbdmVyYm9zaXR5TGV2ZWxdO1xuICAgIHZlcmJvc2l0eUxldmVsID0gTWF0aC5tYXgoMCwgdmVyYm9zaXR5TGV2ZWxzLmluZGV4T2YobGV2ZWwpKTtcbiAgICByZXR1cm4gb2xkO1xufVxuZXhwb3J0IGRlZmF1bHQgaW52YXJpYW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW52YXJpYW50LmpzLm1hcCIsCiAgICAiZXhwb3J0IHZhciB2ZXJzaW9uID0gXCIzLjE0LjBcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwIiwKICAgICJleHBvcnQgZnVuY3Rpb24gbWF5YmUodGh1bmspIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gdGh1bmsoKTtcbiAgICB9XG4gICAgY2F0Y2ggKF9hKSB7IH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1heWJlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgbWF5YmUgfSBmcm9tIFwiLi9tYXliZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgKG1heWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdsb2JhbFRoaXM7IH0pIHx8XG4gICAgbWF5YmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gd2luZG93OyB9KSB8fFxuICAgIG1heWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGY7IH0pIHx8XG4gICAgbWF5YmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gZ2xvYmFsOyB9KSB8fCAvLyBXZSBkb24ndCBleHBlY3QgdGhlIEZ1bmN0aW9uIGNvbnN0cnVjdG9yIGV2ZXIgdG8gYmUgaW52b2tlZCBhdCBydW50aW1lLCBhc1xuLy8gbG9uZyBhcyBhdCBsZWFzdCBvbmUgb2YgZ2xvYmFsVGhpcywgd2luZG93LCBzZWxmLCBvciBnbG9iYWwgaXMgZGVmaW5lZCwgc29cbi8vIHdlIGFyZSB1bmRlciBubyBvYmxpZ2F0aW9uIHRvIG1ha2UgaXQgZWFzeSBmb3Igc3RhdGljIGFuYWx5c2lzIHRvb2xzIHRvXG4vLyBkZXRlY3Qgc3ludGFjdGljIHVzYWdlIG9mIHRoZSBGdW5jdGlvbiBjb25zdHJ1Y3Rvci4gSWYgeW91IHRoaW5rIHlvdSBjYW5cbi8vIGltcHJvdmUgeW91ciBzdGF0aWMgYW5hbHlzaXMgdG8gZGV0ZWN0IHRoaXMgb2JmdXNjYXRpb24sIHRoaW5rIGFnYWluLiBUaGlzXG4vLyBpcyBhbiBhcm1zIHJhY2UgeW91IGNhbm5vdCB3aW4sIGF0IGxlYXN0IG5vdCBpbiBKYXZhU2NyaXB0LlxubWF5YmUoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBtYXliZS5jb25zdHJ1Y3RvcihcInJldHVybiB0aGlzXCIpKCk7XG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nbG9iYWwuanMubWFwIiwKICAgICJ2YXIgcHJlZml4Q291bnRzID0gbmV3IE1hcCgpO1xuLy8gVGhlc2UgSURzIHdvbid0IGJlIGdsb2JhbGx5IHVuaXF1ZSwgYnV0IHRoZXkgd2lsbCBiZSB1bmlxdWUgd2l0aGluIHRoaXNcbi8vIHByb2Nlc3MsIHRoYW5rcyB0byB0aGUgY291bnRlciwgYW5kIHVuZ3Vlc3NhYmxlIHRoYW5rcyB0byB0aGUgcmFuZG9tIHN1ZmZpeC5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlVW5pcXVlSWQocHJlZml4KSB7XG4gICAgdmFyIGNvdW50ID0gcHJlZml4Q291bnRzLmdldChwcmVmaXgpIHx8IDE7XG4gICAgcHJlZml4Q291bnRzLnNldChwcmVmaXgsIGNvdW50ICsgMSk7XG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KHByZWZpeCwgXCI6XCIpLmNvbmNhdChjb3VudCwgXCI6XCIpLmNvbmNhdChNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYWtlVW5pcXVlSWQuanMubWFwIiwKICAgICJpbXBvcnQgeyBtYWtlVW5pcXVlSWQgfSBmcm9tIFwiLi9tYWtlVW5pcXVlSWQuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlGb3JEaXNwbGF5KHZhbHVlLCBzcGFjZSkge1xuICAgIGlmIChzcGFjZSA9PT0gdm9pZCAwKSB7IHNwYWNlID0gMDsgfVxuICAgIHZhciB1bmRlZklkID0gbWFrZVVuaXF1ZUlkKFwic3RyaW5naWZ5Rm9yRGlzcGxheVwiKTtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdm9pZCAwID8gdW5kZWZJZCA6IHZhbHVlO1xuICAgIH0sIHNwYWNlKVxuICAgICAgICAuc3BsaXQoSlNPTi5zdHJpbmdpZnkodW5kZWZJZCkpXG4gICAgICAgIC5qb2luKFwiPHVuZGVmaW5lZD5cIik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJpbmdpZnlGb3JEaXNwbGF5LmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgaW52YXJpYW50IGFzIG9yaWdpbmFsSW52YXJpYW50LCBJbnZhcmlhbnRFcnJvciB9IGZyb20gXCJ0cy1pbnZhcmlhbnRcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vdmVyc2lvbi5qc1wiO1xuaW1wb3J0IGdsb2JhbCBmcm9tIFwiLi9nbG9iYWwuanNcIjtcbmltcG9ydCB7IHN0cmluZ2lmeUZvckRpc3BsYXkgfSBmcm9tIFwiLi4vY29tbW9uL3N0cmluZ2lmeUZvckRpc3BsYXkuanNcIjtcbmZ1bmN0aW9uIHdyYXAoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICB2YXIgYXJnMCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICBtZXNzYWdlID0gZ2V0SGFuZGxlZEVycm9yTXNnKGFyZzApO1xuICAgICAgICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGdldEZhbGxiYWNrRXJyb3JNc2coYXJnMCwgYXJncyk7XG4gICAgICAgICAgICAgICAgYXJncyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZuLmFwcGx5KHZvaWQgMCwgW21lc3NhZ2VdLmNvbmNhdChhcmdzKSk7XG4gICAgfTtcbn1cbnZhciBpbnZhcmlhbnQgPSBPYmplY3QuYXNzaWduKGZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICAgIG9yaWdpbmFsSW52YXJpYW50KGNvbmRpdGlvbiwgZ2V0SGFuZGxlZEVycm9yTXNnKG1lc3NhZ2UsIGFyZ3MpIHx8IGdldEZhbGxiYWNrRXJyb3JNc2cobWVzc2FnZSwgYXJncykpO1xuICAgIH1cbn0sIHtcbiAgICBkZWJ1Zzogd3JhcChvcmlnaW5hbEludmFyaWFudC5kZWJ1ZyksXG4gICAgbG9nOiB3cmFwKG9yaWdpbmFsSW52YXJpYW50LmxvZyksXG4gICAgd2Fybjogd3JhcChvcmlnaW5hbEludmFyaWFudC53YXJuKSxcbiAgICBlcnJvcjogd3JhcChvcmlnaW5hbEludmFyaWFudC5lcnJvciksXG59KTtcbi8qKlxuICogUmV0dXJucyBhbiBJbnZhcmlhbnRFcnJvci5cbiAqXG4gKiBgbWVzc2FnZWAgY2FuIG9ubHkgYmUgYSBzdHJpbmcsIGEgY29uY2F0ZW5hdGlvbiBvZiBzdHJpbmdzLCBvciBhIHRlcm5hcnkgc3RhdGVtZW50XG4gKiB0aGF0IHJlc3VsdHMgaW4gYSBzdHJpbmcuIFRoaXMgd2lsbCBiZSBlbmZvcmNlZCBvbiBidWlsZCwgd2hlcmUgdGhlIG1lc3NhZ2Ugd2lsbFxuICogYmUgcmVwbGFjZWQgd2l0aCBhIG1lc3NhZ2UgbnVtYmVyLlxuICogU3RyaW5nIHN1YnN0aXR1dGlvbnMgd2l0aCAlcyBhcmUgc3VwcG9ydGVkIGFuZCB3aWxsIGFsc28gcmV0dXJuXG4gKiBwcmV0dHktc3RyaW5naWZpZWQgb2JqZWN0cy5cbiAqIEV4Y2VzcyBgb3B0aW9uYWxQYXJhbXNgIHdpbGwgYmUgc3dhbGxvd2VkLlxuICovXG5mdW5jdGlvbiBuZXdJbnZhcmlhbnRFcnJvcihtZXNzYWdlKSB7XG4gICAgdmFyIG9wdGlvbmFsUGFyYW1zID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb3B0aW9uYWxQYXJhbXNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBuZXcgSW52YXJpYW50RXJyb3IoZ2V0SGFuZGxlZEVycm9yTXNnKG1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKSB8fFxuICAgICAgICBnZXRGYWxsYmFja0Vycm9yTXNnKG1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKSk7XG59XG52YXIgQXBvbGxvRXJyb3JNZXNzYWdlSGFuZGxlciA9IFN5bWJvbC5mb3IoXCJBcG9sbG9FcnJvck1lc3NhZ2VIYW5kbGVyX1wiICsgdmVyc2lvbik7XG5mdW5jdGlvbiBzdHJpbmdpZnkoYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYXJnO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gc3RyaW5naWZ5Rm9yRGlzcGxheShhcmcsIDIpLnNsaWNlKDAsIDEwMDApO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgcmV0dXJuIFwiPG5vbi1zZXJpYWxpemFibGU+XCI7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0SGFuZGxlZEVycm9yTXNnKG1lc3NhZ2UsIG1lc3NhZ2VBcmdzKSB7XG4gICAgaWYgKG1lc3NhZ2VBcmdzID09PSB2b2lkIDApIHsgbWVzc2FnZUFyZ3MgPSBbXTsgfVxuICAgIGlmICghbWVzc2FnZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHJldHVybiAoZ2xvYmFsW0Fwb2xsb0Vycm9yTWVzc2FnZUhhbmRsZXJdICYmXG4gICAgICAgIGdsb2JhbFtBcG9sbG9FcnJvck1lc3NhZ2VIYW5kbGVyXShtZXNzYWdlLCBtZXNzYWdlQXJncy5tYXAoc3RyaW5naWZ5KSkpO1xufVxuZnVuY3Rpb24gZ2V0RmFsbGJhY2tFcnJvck1zZyhtZXNzYWdlLCBtZXNzYWdlQXJncykge1xuICAgIGlmIChtZXNzYWdlQXJncyA9PT0gdm9pZCAwKSB7IG1lc3NhZ2VBcmdzID0gW107IH1cbiAgICBpZiAoIW1lc3NhZ2UpXG4gICAgICAgIHJldHVybjtcbiAgICByZXR1cm4gXCJBbiBlcnJvciBvY2N1cnJlZCEgRm9yIG1vcmUgZGV0YWlscywgc2VlIHRoZSBmdWxsIGVycm9yIHRleHQgYXQgaHR0cHM6Ly9nby5hcG9sbG8uZGV2L2MvZXJyI1wiLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uLFxuICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICBhcmdzOiBtZXNzYWdlQXJncy5tYXAoc3RyaW5naWZ5KSxcbiAgICB9KSkpO1xufVxuZXhwb3J0IHsgaW52YXJpYW50LCBJbnZhcmlhbnRFcnJvciwgbmV3SW52YXJpYW50RXJyb3IsIEFwb2xsb0Vycm9yTWVzc2FnZUhhbmRsZXIsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnZhcmlhbnRXcmFwcGVycy5qcy5tYXAiLAogICAgImltcG9ydCB7IGludmFyaWFudCwgbmV3SW52YXJpYW50RXJyb3IsIEludmFyaWFudEVycm9yLCB9IGZyb20gXCIuL2ludmFyaWFudFdyYXBwZXJzLmpzXCI7XG5leHBvcnQgeyBtYXliZSB9IGZyb20gXCIuL21heWJlLmpzXCI7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGdsb2JhbCB9IGZyb20gXCIuL2dsb2JhbC5qc1wiO1xuZXhwb3J0IHsgaW52YXJpYW50LCBuZXdJbnZhcmlhbnRFcnJvciwgSW52YXJpYW50RXJyb3IgfTtcbi8qKlxuICogQGRlcHJlY2F0ZWQgd2UgZG8gbm90IHVzZSB0aGlzIGludGVybmFsbHkgYW55bW9yZSxcbiAqIGl0IGlzIGp1c3QgZXhwb3J0ZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gKi9cbi8vIHRoaXMgZmlsZSBpcyBleHRlbXB0IGZyb20gYXV0b21hdGljIGBfX0RFVl9fYCByZXBsYWNlbWVudFxuLy8gc28gd2UgaGF2ZSB0byB3cml0ZSBpdCBvdXQgaGVyZVxuLy8gQHRzLWlnbm9yZVxuZXhwb3J0IHZhciBERVYgPSBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlO1xuZXhwb3J0IHsgREVWIGFzIF9fREVWX18gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsCiAgICAiZXhwb3J0IGZ1bmN0aW9uIGRldkFzc2VydChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgY29uc3QgYm9vbGVhbkNvbmRpdGlvbiA9IEJvb2xlYW4oY29uZGl0aW9uKTtcblxuICBpZiAoIWJvb2xlYW5Db25kaXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIH1cbn1cbiIsCiAgICAiLyoqXG4gKiBSZXR1cm4gdHJ1ZSBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90XG4gKiBgbnVsbGAgYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGw7XG59XG4iLAogICAgImV4cG9ydCBmdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gIGNvbnN0IGJvb2xlYW5Db25kaXRpb24gPSBCb29sZWFuKGNvbmRpdGlvbik7XG5cbiAgaWYgKCFib29sZWFuQ29uZGl0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgbWVzc2FnZSAhPSBudWxsID8gbWVzc2FnZSA6ICdVbmV4cGVjdGVkIGludmFyaWFudCB0cmlnZ2VyZWQuJyxcbiAgICApO1xuICB9XG59XG4iLAogICAgImltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJy4uL2pzdXRpbHMvaW52YXJpYW50Lm1qcyc7XG5jb25zdCBMaW5lUmVnRXhwID0gL1xcclxcbnxbXFxuXFxyXS9nO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYXRpb24gaW4gYSBTb3VyY2UuXG4gKi9cblxuLyoqXG4gKiBUYWtlcyBhIFNvdXJjZSBhbmQgYSBVVEYtOCBjaGFyYWN0ZXIgb2Zmc2V0LCBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZ1xuICogbGluZSBhbmQgY29sdW1uIGFzIGEgU291cmNlTG9jYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2NhdGlvbihzb3VyY2UsIHBvc2l0aW9uKSB7XG4gIGxldCBsYXN0TGluZVN0YXJ0ID0gMDtcbiAgbGV0IGxpbmUgPSAxO1xuXG4gIGZvciAoY29uc3QgbWF0Y2ggb2Ygc291cmNlLmJvZHkubWF0Y2hBbGwoTGluZVJlZ0V4cCkpIHtcbiAgICB0eXBlb2YgbWF0Y2guaW5kZXggPT09ICdudW1iZXInIHx8IGludmFyaWFudChmYWxzZSk7XG5cbiAgICBpZiAobWF0Y2guaW5kZXggPj0gcG9zaXRpb24pIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGxhc3RMaW5lU3RhcnQgPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcbiAgICBsaW5lICs9IDE7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGxpbmUsXG4gICAgY29sdW1uOiBwb3NpdGlvbiArIDEgLSBsYXN0TGluZVN0YXJ0LFxuICB9O1xufVxuIiwKICAgICJpbXBvcnQgeyBnZXRMb2NhdGlvbiB9IGZyb20gJy4vbG9jYXRpb24ubWpzJztcblxuLyoqXG4gKiBSZW5kZXIgYSBoZWxwZnVsIGRlc2NyaXB0aW9uIG9mIHRoZSBsb2NhdGlvbiBpbiB0aGUgR3JhcGhRTCBTb3VyY2UgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmludExvY2F0aW9uKGxvY2F0aW9uKSB7XG4gIHJldHVybiBwcmludFNvdXJjZUxvY2F0aW9uKFxuICAgIGxvY2F0aW9uLnNvdXJjZSxcbiAgICBnZXRMb2NhdGlvbihsb2NhdGlvbi5zb3VyY2UsIGxvY2F0aW9uLnN0YXJ0KSxcbiAgKTtcbn1cbi8qKlxuICogUmVuZGVyIGEgaGVscGZ1bCBkZXNjcmlwdGlvbiBvZiB0aGUgbG9jYXRpb24gaW4gdGhlIEdyYXBoUUwgU291cmNlIGRvY3VtZW50LlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludFNvdXJjZUxvY2F0aW9uKHNvdXJjZSwgc291cmNlTG9jYXRpb24pIHtcbiAgY29uc3QgZmlyc3RMaW5lQ29sdW1uT2Zmc2V0ID0gc291cmNlLmxvY2F0aW9uT2Zmc2V0LmNvbHVtbiAtIDE7XG4gIGNvbnN0IGJvZHkgPSAnJy5wYWRTdGFydChmaXJzdExpbmVDb2x1bW5PZmZzZXQpICsgc291cmNlLmJvZHk7XG4gIGNvbnN0IGxpbmVJbmRleCA9IHNvdXJjZUxvY2F0aW9uLmxpbmUgLSAxO1xuICBjb25zdCBsaW5lT2Zmc2V0ID0gc291cmNlLmxvY2F0aW9uT2Zmc2V0LmxpbmUgLSAxO1xuICBjb25zdCBsaW5lTnVtID0gc291cmNlTG9jYXRpb24ubGluZSArIGxpbmVPZmZzZXQ7XG4gIGNvbnN0IGNvbHVtbk9mZnNldCA9IHNvdXJjZUxvY2F0aW9uLmxpbmUgPT09IDEgPyBmaXJzdExpbmVDb2x1bW5PZmZzZXQgOiAwO1xuICBjb25zdCBjb2x1bW5OdW0gPSBzb3VyY2VMb2NhdGlvbi5jb2x1bW4gKyBjb2x1bW5PZmZzZXQ7XG4gIGNvbnN0IGxvY2F0aW9uU3RyID0gYCR7c291cmNlLm5hbWV9OiR7bGluZU51bX06JHtjb2x1bW5OdW19XFxuYDtcbiAgY29uc3QgbGluZXMgPSBib2R5LnNwbGl0KC9cXHJcXG58W1xcblxccl0vZyk7XG4gIGNvbnN0IGxvY2F0aW9uTGluZSA9IGxpbmVzW2xpbmVJbmRleF07IC8vIFNwZWNpYWwgY2FzZSBmb3IgbWluaWZpZWQgZG9jdW1lbnRzXG5cbiAgaWYgKGxvY2F0aW9uTGluZS5sZW5ndGggPiAxMjApIHtcbiAgICBjb25zdCBzdWJMaW5lSW5kZXggPSBNYXRoLmZsb29yKGNvbHVtbk51bSAvIDgwKTtcbiAgICBjb25zdCBzdWJMaW5lQ29sdW1uTnVtID0gY29sdW1uTnVtICUgODA7XG4gICAgY29uc3Qgc3ViTGluZXMgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYXRpb25MaW5lLmxlbmd0aDsgaSArPSA4MCkge1xuICAgICAgc3ViTGluZXMucHVzaChsb2NhdGlvbkxpbmUuc2xpY2UoaSwgaSArIDgwKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIGxvY2F0aW9uU3RyICtcbiAgICAgIHByaW50UHJlZml4ZWRMaW5lcyhbXG4gICAgICAgIFtgJHtsaW5lTnVtfSB8YCwgc3ViTGluZXNbMF1dLFxuICAgICAgICAuLi5zdWJMaW5lcy5zbGljZSgxLCBzdWJMaW5lSW5kZXggKyAxKS5tYXAoKHN1YkxpbmUpID0+IFsnfCcsIHN1YkxpbmVdKSxcbiAgICAgICAgWyd8JywgJ14nLnBhZFN0YXJ0KHN1YkxpbmVDb2x1bW5OdW0pXSxcbiAgICAgICAgWyd8Jywgc3ViTGluZXNbc3ViTGluZUluZGV4ICsgMV1dLFxuICAgICAgXSlcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICBsb2NhdGlvblN0ciArXG4gICAgcHJpbnRQcmVmaXhlZExpbmVzKFtcbiAgICAgIC8vIExpbmVzIHNwZWNpZmllZCBsaWtlIHRoaXM6IFtcInByZWZpeFwiLCBcInN0cmluZ1wiXSxcbiAgICAgIFtgJHtsaW5lTnVtIC0gMX0gfGAsIGxpbmVzW2xpbmVJbmRleCAtIDFdXSxcbiAgICAgIFtgJHtsaW5lTnVtfSB8YCwgbG9jYXRpb25MaW5lXSxcbiAgICAgIFsnfCcsICdeJy5wYWRTdGFydChjb2x1bW5OdW0pXSxcbiAgICAgIFtgJHtsaW5lTnVtICsgMX0gfGAsIGxpbmVzW2xpbmVJbmRleCArIDFdXSxcbiAgICBdKVxuICApO1xufVxuXG5mdW5jdGlvbiBwcmludFByZWZpeGVkTGluZXMobGluZXMpIHtcbiAgY29uc3QgZXhpc3RpbmdMaW5lcyA9IGxpbmVzLmZpbHRlcigoW18sIGxpbmVdKSA9PiBsaW5lICE9PSB1bmRlZmluZWQpO1xuICBjb25zdCBwYWRMZW4gPSBNYXRoLm1heCguLi5leGlzdGluZ0xpbmVzLm1hcCgoW3ByZWZpeF0pID0+IHByZWZpeC5sZW5ndGgpKTtcbiAgcmV0dXJuIGV4aXN0aW5nTGluZXNcbiAgICAubWFwKChbcHJlZml4LCBsaW5lXSkgPT4gcHJlZml4LnBhZFN0YXJ0KHBhZExlbikgKyAobGluZSA/ICcgJyArIGxpbmUgOiAnJykpXG4gICAgLmpvaW4oJ1xcbicpO1xufVxuIiwKICAgICJpbXBvcnQgeyBpc09iamVjdExpa2UgfSBmcm9tICcuLi9qc3V0aWxzL2lzT2JqZWN0TGlrZS5tanMnO1xuaW1wb3J0IHsgZ2V0TG9jYXRpb24gfSBmcm9tICcuLi9sYW5ndWFnZS9sb2NhdGlvbi5tanMnO1xuaW1wb3J0IHtcbiAgcHJpbnRMb2NhdGlvbixcbiAgcHJpbnRTb3VyY2VMb2NhdGlvbixcbn0gZnJvbSAnLi4vbGFuZ3VhZ2UvcHJpbnRMb2NhdGlvbi5tanMnO1xuXG5mdW5jdGlvbiB0b05vcm1hbGl6ZWRPcHRpb25zKGFyZ3MpIHtcbiAgY29uc3QgZmlyc3RBcmcgPSBhcmdzWzBdO1xuXG4gIGlmIChmaXJzdEFyZyA9PSBudWxsIHx8ICdraW5kJyBpbiBmaXJzdEFyZyB8fCAnbGVuZ3RoJyBpbiBmaXJzdEFyZykge1xuICAgIHJldHVybiB7XG4gICAgICBub2RlczogZmlyc3RBcmcsXG4gICAgICBzb3VyY2U6IGFyZ3NbMV0sXG4gICAgICBwb3NpdGlvbnM6IGFyZ3NbMl0sXG4gICAgICBwYXRoOiBhcmdzWzNdLFxuICAgICAgb3JpZ2luYWxFcnJvcjogYXJnc1s0XSxcbiAgICAgIGV4dGVuc2lvbnM6IGFyZ3NbNV0sXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBmaXJzdEFyZztcbn1cbi8qKlxuICogQSBHcmFwaFFMRXJyb3IgZGVzY3JpYmVzIGFuIEVycm9yIGZvdW5kIGR1cmluZyB0aGUgcGFyc2UsIHZhbGlkYXRlLCBvclxuICogZXhlY3V0ZSBwaGFzZXMgb2YgcGVyZm9ybWluZyBhIEdyYXBoUUwgb3BlcmF0aW9uLiBJbiBhZGRpdGlvbiB0byBhIG1lc3NhZ2VcbiAqIGFuZCBzdGFjayB0cmFjZSwgaXQgYWxzbyBpbmNsdWRlcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbG9jYXRpb25zIGluIGFcbiAqIEdyYXBoUUwgZG9jdW1lbnQgYW5kL29yIGV4ZWN1dGlvbiByZXN1bHQgdGhhdCBjb3JyZXNwb25kIHRvIHRoZSBFcnJvci5cbiAqL1xuXG5leHBvcnQgY2xhc3MgR3JhcGhRTEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAvKipcbiAgICogQW4gYXJyYXkgb2YgYHsgbGluZSwgY29sdW1uIH1gIGxvY2F0aW9ucyB3aXRoaW4gdGhlIHNvdXJjZSBHcmFwaFFMIGRvY3VtZW50XG4gICAqIHdoaWNoIGNvcnJlc3BvbmQgdG8gdGhpcyBlcnJvci5cbiAgICpcbiAgICogRXJyb3JzIGR1cmluZyB2YWxpZGF0aW9uIG9mdGVuIGNvbnRhaW4gbXVsdGlwbGUgbG9jYXRpb25zLCBmb3IgZXhhbXBsZSB0b1xuICAgKiBwb2ludCBvdXQgdHdvIHRoaW5ncyB3aXRoIHRoZSBzYW1lIG5hbWUuIEVycm9ycyBkdXJpbmcgZXhlY3V0aW9uIGluY2x1ZGUgYVxuICAgKiBzaW5nbGUgbG9jYXRpb24sIHRoZSBmaWVsZCB3aGljaCBwcm9kdWNlZCB0aGUgZXJyb3IuXG4gICAqXG4gICAqIEVudW1lcmFibGUsIGFuZCBhcHBlYXJzIGluIHRoZSByZXN1bHQgb2YgSlNPTi5zdHJpbmdpZnkoKS5cbiAgICovXG5cbiAgLyoqXG4gICAqIEFuIGFycmF5IGRlc2NyaWJpbmcgdGhlIEpTT04tcGF0aCBpbnRvIHRoZSBleGVjdXRpb24gcmVzcG9uc2Ugd2hpY2hcbiAgICogY29ycmVzcG9uZHMgdG8gdGhpcyBlcnJvci4gT25seSBpbmNsdWRlZCBmb3IgZXJyb3JzIGR1cmluZyBleGVjdXRpb24uXG4gICAqXG4gICAqIEVudW1lcmFibGUsIGFuZCBhcHBlYXJzIGluIHRoZSByZXN1bHQgb2YgSlNPTi5zdHJpbmdpZnkoKS5cbiAgICovXG5cbiAgLyoqXG4gICAqIEFuIGFycmF5IG9mIEdyYXBoUUwgQVNUIE5vZGVzIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBlcnJvci5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBzb3VyY2UgR3JhcGhRTCBkb2N1bWVudCBmb3IgdGhlIGZpcnN0IGxvY2F0aW9uIG9mIHRoaXMgZXJyb3IuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBpZiB0aGlzIEVycm9yIHJlcHJlc2VudHMgbW9yZSB0aGFuIG9uZSBub2RlLCB0aGUgc291cmNlIG1heSBub3RcbiAgICogcmVwcmVzZW50IG5vZGVzIGFmdGVyIHRoZSBmaXJzdCBub2RlLlxuICAgKi9cblxuICAvKipcbiAgICogQW4gYXJyYXkgb2YgY2hhcmFjdGVyIG9mZnNldHMgd2l0aGluIHRoZSBzb3VyY2UgR3JhcGhRTCBkb2N1bWVudFxuICAgKiB3aGljaCBjb3JyZXNwb25kIHRvIHRoaXMgZXJyb3IuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgb3JpZ2luYWwgZXJyb3IgdGhyb3duIGZyb20gYSBmaWVsZCByZXNvbHZlciBkdXJpbmcgZXhlY3V0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogRXh0ZW5zaW9uIGZpZWxkcyB0byBhZGQgdG8gdGhlIGZvcm1hdHRlZCBlcnJvci5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgdGhlIGBHcmFwaFFMRXJyb3JPcHRpb25zYCBjb25zdHJ1Y3RvciBvdmVybG9hZCBpbnN0ZWFkLlxuICAgKi9cbiAgY29uc3RydWN0b3IobWVzc2FnZSwgLi4ucmF3QXJncykge1xuICAgIHZhciBfdGhpcyRub2RlcywgX25vZGVMb2NhdGlvbnMkLCBfcmVmO1xuXG4gICAgY29uc3QgeyBub2Rlcywgc291cmNlLCBwb3NpdGlvbnMsIHBhdGgsIG9yaWdpbmFsRXJyb3IsIGV4dGVuc2lvbnMgfSA9XG4gICAgICB0b05vcm1hbGl6ZWRPcHRpb25zKHJhd0FyZ3MpO1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdHcmFwaFFMRXJyb3InO1xuICAgIHRoaXMucGF0aCA9IHBhdGggIT09IG51bGwgJiYgcGF0aCAhPT0gdm9pZCAwID8gcGF0aCA6IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9yaWdpbmFsRXJyb3IgPVxuICAgICAgb3JpZ2luYWxFcnJvciAhPT0gbnVsbCAmJiBvcmlnaW5hbEVycm9yICE9PSB2b2lkIDBcbiAgICAgICAgPyBvcmlnaW5hbEVycm9yXG4gICAgICAgIDogdW5kZWZpbmVkOyAvLyBDb21wdXRlIGxpc3Qgb2YgYmxhbWUgbm9kZXMuXG5cbiAgICB0aGlzLm5vZGVzID0gdW5kZWZpbmVkSWZFbXB0eShcbiAgICAgIEFycmF5LmlzQXJyYXkobm9kZXMpID8gbm9kZXMgOiBub2RlcyA/IFtub2Rlc10gOiB1bmRlZmluZWQsXG4gICAgKTtcbiAgICBjb25zdCBub2RlTG9jYXRpb25zID0gdW5kZWZpbmVkSWZFbXB0eShcbiAgICAgIChfdGhpcyRub2RlcyA9IHRoaXMubm9kZXMpID09PSBudWxsIHx8IF90aGlzJG5vZGVzID09PSB2b2lkIDBcbiAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgOiBfdGhpcyRub2Rlcy5tYXAoKG5vZGUpID0+IG5vZGUubG9jKS5maWx0ZXIoKGxvYykgPT4gbG9jICE9IG51bGwpLFxuICAgICk7IC8vIENvbXB1dGUgbG9jYXRpb25zIGluIHRoZSBzb3VyY2UgZm9yIHRoZSBnaXZlbiBub2Rlcy9wb3NpdGlvbnMuXG5cbiAgICB0aGlzLnNvdXJjZSA9XG4gICAgICBzb3VyY2UgIT09IG51bGwgJiYgc291cmNlICE9PSB2b2lkIDBcbiAgICAgICAgPyBzb3VyY2VcbiAgICAgICAgOiBub2RlTG9jYXRpb25zID09PSBudWxsIHx8IG5vZGVMb2NhdGlvbnMgPT09IHZvaWQgMFxuICAgICAgICA/IHZvaWQgMFxuICAgICAgICA6IChfbm9kZUxvY2F0aW9ucyQgPSBub2RlTG9jYXRpb25zWzBdKSA9PT0gbnVsbCB8fFxuICAgICAgICAgIF9ub2RlTG9jYXRpb25zJCA9PT0gdm9pZCAwXG4gICAgICAgID8gdm9pZCAwXG4gICAgICAgIDogX25vZGVMb2NhdGlvbnMkLnNvdXJjZTtcbiAgICB0aGlzLnBvc2l0aW9ucyA9XG4gICAgICBwb3NpdGlvbnMgIT09IG51bGwgJiYgcG9zaXRpb25zICE9PSB2b2lkIDBcbiAgICAgICAgPyBwb3NpdGlvbnNcbiAgICAgICAgOiBub2RlTG9jYXRpb25zID09PSBudWxsIHx8IG5vZGVMb2NhdGlvbnMgPT09IHZvaWQgMFxuICAgICAgICA/IHZvaWQgMFxuICAgICAgICA6IG5vZGVMb2NhdGlvbnMubWFwKChsb2MpID0+IGxvYy5zdGFydCk7XG4gICAgdGhpcy5sb2NhdGlvbnMgPVxuICAgICAgcG9zaXRpb25zICYmIHNvdXJjZVxuICAgICAgICA/IHBvc2l0aW9ucy5tYXAoKHBvcykgPT4gZ2V0TG9jYXRpb24oc291cmNlLCBwb3MpKVxuICAgICAgICA6IG5vZGVMb2NhdGlvbnMgPT09IG51bGwgfHwgbm9kZUxvY2F0aW9ucyA9PT0gdm9pZCAwXG4gICAgICAgID8gdm9pZCAwXG4gICAgICAgIDogbm9kZUxvY2F0aW9ucy5tYXAoKGxvYykgPT4gZ2V0TG9jYXRpb24obG9jLnNvdXJjZSwgbG9jLnN0YXJ0KSk7XG4gICAgY29uc3Qgb3JpZ2luYWxFeHRlbnNpb25zID0gaXNPYmplY3RMaWtlKFxuICAgICAgb3JpZ2luYWxFcnJvciA9PT0gbnVsbCB8fCBvcmlnaW5hbEVycm9yID09PSB2b2lkIDBcbiAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgOiBvcmlnaW5hbEVycm9yLmV4dGVuc2lvbnMsXG4gICAgKVxuICAgICAgPyBvcmlnaW5hbEVycm9yID09PSBudWxsIHx8IG9yaWdpbmFsRXJyb3IgPT09IHZvaWQgMFxuICAgICAgICA/IHZvaWQgMFxuICAgICAgICA6IG9yaWdpbmFsRXJyb3IuZXh0ZW5zaW9uc1xuICAgICAgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5leHRlbnNpb25zID1cbiAgICAgIChfcmVmID1cbiAgICAgICAgZXh0ZW5zaW9ucyAhPT0gbnVsbCAmJiBleHRlbnNpb25zICE9PSB2b2lkIDBcbiAgICAgICAgICA/IGV4dGVuc2lvbnNcbiAgICAgICAgICA6IG9yaWdpbmFsRXh0ZW5zaW9ucykgIT09IG51bGwgJiYgX3JlZiAhPT0gdm9pZCAwXG4gICAgICAgID8gX3JlZlxuICAgICAgICA6IE9iamVjdC5jcmVhdGUobnVsbCk7IC8vIE9ubHkgcHJvcGVydGllcyBwcmVzY3JpYmVkIGJ5IHRoZSBzcGVjIHNob3VsZCBiZSBlbnVtZXJhYmxlLlxuICAgIC8vIEtlZXAgdGhlIHJlc3QgYXMgbm9uLWVudW1lcmFibGUuXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICBtZXNzYWdlOiB7XG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB9LFxuICAgICAgbm9kZXM6IHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB9LFxuICAgICAgc291cmNlOiB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHBvc2l0aW9uczoge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBvcmlnaW5hbEVycm9yOiB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9KTsgLy8gSW5jbHVkZSAobm9uLWVudW1lcmFibGUpIHN0YWNrIHRyYWNlLlxuXG4gICAgLyogYzggaWdub3JlIHN0YXJ0ICovXG4gICAgLy8gRklYTUU6IGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaHFsL2dyYXBocWwtanMvaXNzdWVzLzIzMTdcblxuICAgIGlmIChcbiAgICAgIG9yaWdpbmFsRXJyb3IgIT09IG51bGwgJiZcbiAgICAgIG9yaWdpbmFsRXJyb3IgIT09IHZvaWQgMCAmJlxuICAgICAgb3JpZ2luYWxFcnJvci5zdGFja1xuICAgICkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdzdGFjaycsIHtcbiAgICAgICAgdmFsdWU6IG9yaWdpbmFsRXJyb3Iuc3RhY2ssXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBHcmFwaFFMRXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3N0YWNrJywge1xuICAgICAgICB2YWx1ZTogRXJyb3IoKS5zdGFjayxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKiBjOCBpZ25vcmUgc3RvcCAqL1xuICB9XG5cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgIHJldHVybiAnR3JhcGhRTEVycm9yJztcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCBvdXRwdXQgPSB0aGlzLm1lc3NhZ2U7XG5cbiAgICBpZiAodGhpcy5ub2Rlcykge1xuICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMubm9kZXMpIHtcbiAgICAgICAgaWYgKG5vZGUubG9jKSB7XG4gICAgICAgICAgb3V0cHV0ICs9ICdcXG5cXG4nICsgcHJpbnRMb2NhdGlvbihub2RlLmxvYyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuc291cmNlICYmIHRoaXMubG9jYXRpb25zKSB7XG4gICAgICBmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIHRoaXMubG9jYXRpb25zKSB7XG4gICAgICAgIG91dHB1dCArPSAnXFxuXFxuJyArIHByaW50U291cmNlTG9jYXRpb24odGhpcy5zb3VyY2UsIGxvY2F0aW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIGNvbnN0IGZvcm1hdHRlZEVycm9yID0ge1xuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5sb2NhdGlvbnMgIT0gbnVsbCkge1xuICAgICAgZm9ybWF0dGVkRXJyb3IubG9jYXRpb25zID0gdGhpcy5sb2NhdGlvbnM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGF0aCAhPSBudWxsKSB7XG4gICAgICBmb3JtYXR0ZWRFcnJvci5wYXRoID0gdGhpcy5wYXRoO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmV4dGVuc2lvbnMgIT0gbnVsbCAmJiBPYmplY3Qua2V5cyh0aGlzLmV4dGVuc2lvbnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvcm1hdHRlZEVycm9yLmV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdHRlZEVycm9yO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVuZGVmaW5lZElmRW1wdHkoYXJyYXkpIHtcbiAgcmV0dXJuIGFycmF5ID09PSB1bmRlZmluZWQgfHwgYXJyYXkubGVuZ3RoID09PSAwID8gdW5kZWZpbmVkIDogYXJyYXk7XG59XG4vKipcbiAqIFNlZTogaHR0cHM6Ly9zcGVjLmdyYXBocWwub3JnL2RyYWZ0LyNzZWMtRXJyb3JzXG4gKi9cblxuLyoqXG4gKiBQcmludHMgYSBHcmFwaFFMRXJyb3IgdG8gYSBzdHJpbmcsIHJlcHJlc2VudGluZyB1c2VmdWwgbG9jYXRpb24gaW5mb3JtYXRpb25cbiAqIGFib3V0IHRoZSBlcnJvcidzIHBvc2l0aW9uIGluIHRoZSBzb3VyY2UuXG4gKlxuICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBgZXJyb3IudG9TdHJpbmdgIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiB2MTdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByaW50RXJyb3IoZXJyb3IpIHtcbiAgcmV0dXJuIGVycm9yLnRvU3RyaW5nKCk7XG59XG4vKipcbiAqIEdpdmVuIGEgR3JhcGhRTEVycm9yLCBmb3JtYXQgaXQgYWNjb3JkaW5nIHRvIHRoZSBydWxlcyBkZXNjcmliZWQgYnkgdGhlXG4gKiBSZXNwb25zZSBGb3JtYXQsIEVycm9ycyBzZWN0aW9uIG9mIHRoZSBHcmFwaFFMIFNwZWNpZmljYXRpb24uXG4gKlxuICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBgZXJyb3IudG9KU09OYCBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gdjE3XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVycm9yKGVycm9yKSB7XG4gIHJldHVybiBlcnJvci50b0pTT04oKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgR3JhcGhRTEVycm9yIH0gZnJvbSAnLi9HcmFwaFFMRXJyb3IubWpzJztcbi8qKlxuICogUHJvZHVjZXMgYSBHcmFwaFFMRXJyb3IgcmVwcmVzZW50aW5nIGEgc3ludGF4IGVycm9yLCBjb250YWluaW5nIHVzZWZ1bFxuICogZGVzY3JpcHRpdmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHN5bnRheCBlcnJvcidzIHBvc2l0aW9uIGluIHRoZSBzb3VyY2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN5bnRheEVycm9yKHNvdXJjZSwgcG9zaXRpb24sIGRlc2NyaXB0aW9uKSB7XG4gIHJldHVybiBuZXcgR3JhcGhRTEVycm9yKGBTeW50YXggRXJyb3I6ICR7ZGVzY3JpcHRpb259YCwge1xuICAgIHNvdXJjZSxcbiAgICBwb3NpdGlvbnM6IFtwb3NpdGlvbl0sXG4gIH0pO1xufVxuIiwKICAgICIvKipcbiAqIENvbnRhaW5zIGEgcmFuZ2Ugb2YgVVRGLTggY2hhcmFjdGVyIG9mZnNldHMgYW5kIHRva2VuIHJlZmVyZW5jZXMgdGhhdFxuICogaWRlbnRpZnkgdGhlIHJlZ2lvbiBvZiB0aGUgc291cmNlIGZyb20gd2hpY2ggdGhlIEFTVCBkZXJpdmVkLlxuICovXG5leHBvcnQgY2xhc3MgTG9jYXRpb24ge1xuICAvKipcbiAgICogVGhlIGNoYXJhY3RlciBvZmZzZXQgYXQgd2hpY2ggdGhpcyBOb2RlIGJlZ2lucy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjaGFyYWN0ZXIgb2Zmc2V0IGF0IHdoaWNoIHRoaXMgTm9kZSBlbmRzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFRva2VuIGF0IHdoaWNoIHRoaXMgTm9kZSBiZWdpbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgVG9rZW4gYXQgd2hpY2ggdGhpcyBOb2RlIGVuZHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgU291cmNlIGRvY3VtZW50IHRoZSBBU1QgcmVwcmVzZW50cy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHN0YXJ0VG9rZW4sIGVuZFRva2VuLCBzb3VyY2UpIHtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnRUb2tlbi5zdGFydDtcbiAgICB0aGlzLmVuZCA9IGVuZFRva2VuLmVuZDtcbiAgICB0aGlzLnN0YXJ0VG9rZW4gPSBzdGFydFRva2VuO1xuICAgIHRoaXMuZW5kVG9rZW4gPSBlbmRUb2tlbjtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgfVxuXG4gIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICByZXR1cm4gJ0xvY2F0aW9uJztcbiAgfVxuXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnQ6IHRoaXMuc3RhcnQsXG4gICAgICBlbmQ6IHRoaXMuZW5kLFxuICAgIH07XG4gIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIHJhbmdlIG9mIGNoYXJhY3RlcnMgcmVwcmVzZW50ZWQgYnkgYSBsZXhpY2FsIHRva2VuXG4gKiB3aXRoaW4gYSBTb3VyY2UuXG4gKi9cblxuZXhwb3J0IGNsYXNzIFRva2VuIHtcbiAgLyoqXG4gICAqIFRoZSBraW5kIG9mIFRva2VuLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGNoYXJhY3RlciBvZmZzZXQgYXQgd2hpY2ggdGhpcyBOb2RlIGJlZ2lucy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjaGFyYWN0ZXIgb2Zmc2V0IGF0IHdoaWNoIHRoaXMgTm9kZSBlbmRzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIDEtaW5kZXhlZCBsaW5lIG51bWJlciBvbiB3aGljaCB0aGlzIFRva2VuIGFwcGVhcnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgMS1pbmRleGVkIGNvbHVtbiBudW1iZXIgYXQgd2hpY2ggdGhpcyBUb2tlbiBiZWdpbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBGb3Igbm9uLXB1bmN0dWF0aW9uIHRva2VucywgcmVwcmVzZW50cyB0aGUgaW50ZXJwcmV0ZWQgdmFsdWUgb2YgdGhlIHRva2VuLlxuICAgKlxuICAgKiBOb3RlOiBpcyB1bmRlZmluZWQgZm9yIHB1bmN0dWF0aW9uIHRva2VucywgYnV0IHR5cGVkIGFzIHN0cmluZyBmb3JcbiAgICogY29udmVuaWVuY2UgaW4gdGhlIHBhcnNlci5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRva2VucyBleGlzdCBhcyBub2RlcyBpbiBhIGRvdWJsZS1saW5rZWQtbGlzdCBhbW9uZ3N0IGFsbCB0b2tlbnNcbiAgICogaW5jbHVkaW5nIGlnbm9yZWQgdG9rZW5zLiA8U09GPiBpcyBhbHdheXMgdGhlIGZpcnN0IG5vZGUgYW5kIDxFT0Y+XG4gICAqIHRoZSBsYXN0LlxuICAgKi9cbiAgY29uc3RydWN0b3Ioa2luZCwgc3RhcnQsIGVuZCwgbGluZSwgY29sdW1uLCB2YWx1ZSkge1xuICAgIHRoaXMua2luZCA9IGtpbmQ7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG5cbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm5leHQgPSBudWxsO1xuICB9XG5cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgIHJldHVybiAnVG9rZW4nO1xuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiB0aGlzLmtpbmQsXG4gICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgIGxpbmU6IHRoaXMubGluZSxcbiAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW4sXG4gICAgfTtcbiAgfVxufVxuLyoqXG4gKiBUaGUgbGlzdCBvZiBhbGwgcG9zc2libGUgQVNUIG5vZGUgdHlwZXMuXG4gKi9cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNvbnN0IFF1ZXJ5RG9jdW1lbnRLZXlzID0ge1xuICBOYW1lOiBbXSxcbiAgRG9jdW1lbnQ6IFsnZGVmaW5pdGlvbnMnXSxcbiAgT3BlcmF0aW9uRGVmaW5pdGlvbjogW1xuICAgICduYW1lJyxcbiAgICAndmFyaWFibGVEZWZpbml0aW9ucycsXG4gICAgJ2RpcmVjdGl2ZXMnLFxuICAgICdzZWxlY3Rpb25TZXQnLFxuICBdLFxuICBWYXJpYWJsZURlZmluaXRpb246IFsndmFyaWFibGUnLCAndHlwZScsICdkZWZhdWx0VmFsdWUnLCAnZGlyZWN0aXZlcyddLFxuICBWYXJpYWJsZTogWyduYW1lJ10sXG4gIFNlbGVjdGlvblNldDogWydzZWxlY3Rpb25zJ10sXG4gIEZpZWxkOiBbJ2FsaWFzJywgJ25hbWUnLCAnYXJndW1lbnRzJywgJ2RpcmVjdGl2ZXMnLCAnc2VsZWN0aW9uU2V0J10sXG4gIEFyZ3VtZW50OiBbJ25hbWUnLCAndmFsdWUnXSxcbiAgRnJhZ21lbnRTcHJlYWQ6IFsnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIElubGluZUZyYWdtZW50OiBbJ3R5cGVDb25kaXRpb24nLCAnZGlyZWN0aXZlcycsICdzZWxlY3Rpb25TZXQnXSxcbiAgRnJhZ21lbnREZWZpbml0aW9uOiBbXG4gICAgJ25hbWUnLCAvLyBOb3RlOiBmcmFnbWVudCB2YXJpYWJsZSBkZWZpbml0aW9ucyBhcmUgZGVwcmVjYXRlZCBhbmQgd2lsbCByZW1vdmVkIGluIHYxNy4wLjBcbiAgICAndmFyaWFibGVEZWZpbml0aW9ucycsXG4gICAgJ3R5cGVDb25kaXRpb24nLFxuICAgICdkaXJlY3RpdmVzJyxcbiAgICAnc2VsZWN0aW9uU2V0JyxcbiAgXSxcbiAgSW50VmFsdWU6IFtdLFxuICBGbG9hdFZhbHVlOiBbXSxcbiAgU3RyaW5nVmFsdWU6IFtdLFxuICBCb29sZWFuVmFsdWU6IFtdLFxuICBOdWxsVmFsdWU6IFtdLFxuICBFbnVtVmFsdWU6IFtdLFxuICBMaXN0VmFsdWU6IFsndmFsdWVzJ10sXG4gIE9iamVjdFZhbHVlOiBbJ2ZpZWxkcyddLFxuICBPYmplY3RGaWVsZDogWyduYW1lJywgJ3ZhbHVlJ10sXG4gIERpcmVjdGl2ZTogWyduYW1lJywgJ2FyZ3VtZW50cyddLFxuICBOYW1lZFR5cGU6IFsnbmFtZSddLFxuICBMaXN0VHlwZTogWyd0eXBlJ10sXG4gIE5vbk51bGxUeXBlOiBbJ3R5cGUnXSxcbiAgU2NoZW1hRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICdkaXJlY3RpdmVzJywgJ29wZXJhdGlvblR5cGVzJ10sXG4gIE9wZXJhdGlvblR5cGVEZWZpbml0aW9uOiBbJ3R5cGUnXSxcbiAgU2NhbGFyVHlwZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIE9iamVjdFR5cGVEZWZpbml0aW9uOiBbXG4gICAgJ2Rlc2NyaXB0aW9uJyxcbiAgICAnbmFtZScsXG4gICAgJ2ludGVyZmFjZXMnLFxuICAgICdkaXJlY3RpdmVzJyxcbiAgICAnZmllbGRzJyxcbiAgXSxcbiAgRmllbGREZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnYXJndW1lbnRzJywgJ3R5cGUnLCAnZGlyZWN0aXZlcyddLFxuICBJbnB1dFZhbHVlRGVmaW5pdGlvbjogW1xuICAgICdkZXNjcmlwdGlvbicsXG4gICAgJ25hbWUnLFxuICAgICd0eXBlJyxcbiAgICAnZGVmYXVsdFZhbHVlJyxcbiAgICAnZGlyZWN0aXZlcycsXG4gIF0sXG4gIEludGVyZmFjZVR5cGVEZWZpbml0aW9uOiBbXG4gICAgJ2Rlc2NyaXB0aW9uJyxcbiAgICAnbmFtZScsXG4gICAgJ2ludGVyZmFjZXMnLFxuICAgICdkaXJlY3RpdmVzJyxcbiAgICAnZmllbGRzJyxcbiAgXSxcbiAgVW5pb25UeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnLCAndHlwZXMnXSxcbiAgRW51bVR5cGVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnZGlyZWN0aXZlcycsICd2YWx1ZXMnXSxcbiAgRW51bVZhbHVlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnXSxcbiAgSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIERpcmVjdGl2ZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdhcmd1bWVudHMnLCAnbG9jYXRpb25zJ10sXG4gIFNjaGVtYUV4dGVuc2lvbjogWydkaXJlY3RpdmVzJywgJ29wZXJhdGlvblR5cGVzJ10sXG4gIFNjYWxhclR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIE9iamVjdFR5cGVFeHRlbnNpb246IFsnbmFtZScsICdpbnRlcmZhY2VzJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIEludGVyZmFjZVR5cGVFeHRlbnNpb246IFsnbmFtZScsICdpbnRlcmZhY2VzJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIFVuaW9uVHlwZUV4dGVuc2lvbjogWyduYW1lJywgJ2RpcmVjdGl2ZXMnLCAndHlwZXMnXSxcbiAgRW51bVR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJywgJ3ZhbHVlcyddLFxuICBJbnB1dE9iamVjdFR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJywgJ2ZpZWxkcyddLFxufTtcbmNvbnN0IGtpbmRWYWx1ZXMgPSBuZXcgU2V0KE9iamVjdC5rZXlzKFF1ZXJ5RG9jdW1lbnRLZXlzKSk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc05vZGUobWF5YmVOb2RlKSB7XG4gIGNvbnN0IG1heWJlS2luZCA9XG4gICAgbWF5YmVOb2RlID09PSBudWxsIHx8IG1heWJlTm9kZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF5YmVOb2RlLmtpbmQ7XG4gIHJldHVybiB0eXBlb2YgbWF5YmVLaW5kID09PSAnc3RyaW5nJyAmJiBraW5kVmFsdWVzLmhhcyhtYXliZUtpbmQpO1xufVxuLyoqIE5hbWUgKi9cblxudmFyIE9wZXJhdGlvblR5cGVOb2RlO1xuXG4oZnVuY3Rpb24gKE9wZXJhdGlvblR5cGVOb2RlKSB7XG4gIE9wZXJhdGlvblR5cGVOb2RlWydRVUVSWSddID0gJ3F1ZXJ5JztcbiAgT3BlcmF0aW9uVHlwZU5vZGVbJ01VVEFUSU9OJ10gPSAnbXV0YXRpb24nO1xuICBPcGVyYXRpb25UeXBlTm9kZVsnU1VCU0NSSVBUSU9OJ10gPSAnc3Vic2NyaXB0aW9uJztcbn0pKE9wZXJhdGlvblR5cGVOb2RlIHx8IChPcGVyYXRpb25UeXBlTm9kZSA9IHt9KSk7XG5cbmV4cG9ydCB7IE9wZXJhdGlvblR5cGVOb2RlIH07XG4iLAogICAgIi8qKlxuICogVGhlIHNldCBvZiBhbGxvd2VkIGRpcmVjdGl2ZSBsb2NhdGlvbiB2YWx1ZXMuXG4gKi9cbnZhciBEaXJlY3RpdmVMb2NhdGlvbjtcblxuKGZ1bmN0aW9uIChEaXJlY3RpdmVMb2NhdGlvbikge1xuICBEaXJlY3RpdmVMb2NhdGlvblsnUVVFUlknXSA9ICdRVUVSWSc7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydNVVRBVElPTiddID0gJ01VVEFUSU9OJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ1NVQlNDUklQVElPTiddID0gJ1NVQlNDUklQVElPTic7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydGSUVMRCddID0gJ0ZJRUxEJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ0ZSQUdNRU5UX0RFRklOSVRJT04nXSA9ICdGUkFHTUVOVF9ERUZJTklUSU9OJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ0ZSQUdNRU5UX1NQUkVBRCddID0gJ0ZSQUdNRU5UX1NQUkVBRCc7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydJTkxJTkVfRlJBR01FTlQnXSA9ICdJTkxJTkVfRlJBR01FTlQnO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnVkFSSUFCTEVfREVGSU5JVElPTiddID0gJ1ZBUklBQkxFX0RFRklOSVRJT04nO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnU0NIRU1BJ10gPSAnU0NIRU1BJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ1NDQUxBUiddID0gJ1NDQUxBUic7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydPQkpFQ1QnXSA9ICdPQkpFQ1QnO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnRklFTERfREVGSU5JVElPTiddID0gJ0ZJRUxEX0RFRklOSVRJT04nO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnQVJHVU1FTlRfREVGSU5JVElPTiddID0gJ0FSR1VNRU5UX0RFRklOSVRJT04nO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnSU5URVJGQUNFJ10gPSAnSU5URVJGQUNFJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ1VOSU9OJ10gPSAnVU5JT04nO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnRU5VTSddID0gJ0VOVU0nO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnRU5VTV9WQUxVRSddID0gJ0VOVU1fVkFMVUUnO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnSU5QVVRfT0JKRUNUJ10gPSAnSU5QVVRfT0JKRUNUJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ0lOUFVUX0ZJRUxEX0RFRklOSVRJT04nXSA9ICdJTlBVVF9GSUVMRF9ERUZJTklUSU9OJztcbn0pKERpcmVjdGl2ZUxvY2F0aW9uIHx8IChEaXJlY3RpdmVMb2NhdGlvbiA9IHt9KSk7XG5cbmV4cG9ydCB7IERpcmVjdGl2ZUxvY2F0aW9uIH07XG4vKipcbiAqIFRoZSBlbnVtIHR5cGUgcmVwcmVzZW50aW5nIHRoZSBkaXJlY3RpdmUgbG9jYXRpb24gdmFsdWVzLlxuICpcbiAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgYERpcmVjdGl2ZUxvY2F0aW9uYC4gV2lsbCBiZSByZW1vdmUgaW4gdjE3LlxuICovXG4iLAogICAgIi8qKlxuICogVGhlIHNldCBvZiBhbGxvd2VkIGtpbmQgdmFsdWVzIGZvciBBU1Qgbm9kZXMuXG4gKi9cbnZhciBLaW5kO1xuXG4oZnVuY3Rpb24gKEtpbmQpIHtcbiAgS2luZFsnTkFNRSddID0gJ05hbWUnO1xuICBLaW5kWydET0NVTUVOVCddID0gJ0RvY3VtZW50JztcbiAgS2luZFsnT1BFUkFUSU9OX0RFRklOSVRJT04nXSA9ICdPcGVyYXRpb25EZWZpbml0aW9uJztcbiAgS2luZFsnVkFSSUFCTEVfREVGSU5JVElPTiddID0gJ1ZhcmlhYmxlRGVmaW5pdGlvbic7XG4gIEtpbmRbJ1NFTEVDVElPTl9TRVQnXSA9ICdTZWxlY3Rpb25TZXQnO1xuICBLaW5kWydGSUVMRCddID0gJ0ZpZWxkJztcbiAgS2luZFsnQVJHVU1FTlQnXSA9ICdBcmd1bWVudCc7XG4gIEtpbmRbJ0ZSQUdNRU5UX1NQUkVBRCddID0gJ0ZyYWdtZW50U3ByZWFkJztcbiAgS2luZFsnSU5MSU5FX0ZSQUdNRU5UJ10gPSAnSW5saW5lRnJhZ21lbnQnO1xuICBLaW5kWydGUkFHTUVOVF9ERUZJTklUSU9OJ10gPSAnRnJhZ21lbnREZWZpbml0aW9uJztcbiAgS2luZFsnVkFSSUFCTEUnXSA9ICdWYXJpYWJsZSc7XG4gIEtpbmRbJ0lOVCddID0gJ0ludFZhbHVlJztcbiAgS2luZFsnRkxPQVQnXSA9ICdGbG9hdFZhbHVlJztcbiAgS2luZFsnU1RSSU5HJ10gPSAnU3RyaW5nVmFsdWUnO1xuICBLaW5kWydCT09MRUFOJ10gPSAnQm9vbGVhblZhbHVlJztcbiAgS2luZFsnTlVMTCddID0gJ051bGxWYWx1ZSc7XG4gIEtpbmRbJ0VOVU0nXSA9ICdFbnVtVmFsdWUnO1xuICBLaW5kWydMSVNUJ10gPSAnTGlzdFZhbHVlJztcbiAgS2luZFsnT0JKRUNUJ10gPSAnT2JqZWN0VmFsdWUnO1xuICBLaW5kWydPQkpFQ1RfRklFTEQnXSA9ICdPYmplY3RGaWVsZCc7XG4gIEtpbmRbJ0RJUkVDVElWRSddID0gJ0RpcmVjdGl2ZSc7XG4gIEtpbmRbJ05BTUVEX1RZUEUnXSA9ICdOYW1lZFR5cGUnO1xuICBLaW5kWydMSVNUX1RZUEUnXSA9ICdMaXN0VHlwZSc7XG4gIEtpbmRbJ05PTl9OVUxMX1RZUEUnXSA9ICdOb25OdWxsVHlwZSc7XG4gIEtpbmRbJ1NDSEVNQV9ERUZJTklUSU9OJ10gPSAnU2NoZW1hRGVmaW5pdGlvbic7XG4gIEtpbmRbJ09QRVJBVElPTl9UWVBFX0RFRklOSVRJT04nXSA9ICdPcGVyYXRpb25UeXBlRGVmaW5pdGlvbic7XG4gIEtpbmRbJ1NDQUxBUl9UWVBFX0RFRklOSVRJT04nXSA9ICdTY2FsYXJUeXBlRGVmaW5pdGlvbic7XG4gIEtpbmRbJ09CSkVDVF9UWVBFX0RFRklOSVRJT04nXSA9ICdPYmplY3RUeXBlRGVmaW5pdGlvbic7XG4gIEtpbmRbJ0ZJRUxEX0RFRklOSVRJT04nXSA9ICdGaWVsZERlZmluaXRpb24nO1xuICBLaW5kWydJTlBVVF9WQUxVRV9ERUZJTklUSU9OJ10gPSAnSW5wdXRWYWx1ZURlZmluaXRpb24nO1xuICBLaW5kWydJTlRFUkZBQ0VfVFlQRV9ERUZJTklUSU9OJ10gPSAnSW50ZXJmYWNlVHlwZURlZmluaXRpb24nO1xuICBLaW5kWydVTklPTl9UWVBFX0RFRklOSVRJT04nXSA9ICdVbmlvblR5cGVEZWZpbml0aW9uJztcbiAgS2luZFsnRU5VTV9UWVBFX0RFRklOSVRJT04nXSA9ICdFbnVtVHlwZURlZmluaXRpb24nO1xuICBLaW5kWydFTlVNX1ZBTFVFX0RFRklOSVRJT04nXSA9ICdFbnVtVmFsdWVEZWZpbml0aW9uJztcbiAgS2luZFsnSU5QVVRfT0JKRUNUX1RZUEVfREVGSU5JVElPTiddID0gJ0lucHV0T2JqZWN0VHlwZURlZmluaXRpb24nO1xuICBLaW5kWydESVJFQ1RJVkVfREVGSU5JVElPTiddID0gJ0RpcmVjdGl2ZURlZmluaXRpb24nO1xuICBLaW5kWydTQ0hFTUFfRVhURU5TSU9OJ10gPSAnU2NoZW1hRXh0ZW5zaW9uJztcbiAgS2luZFsnU0NBTEFSX1RZUEVfRVhURU5TSU9OJ10gPSAnU2NhbGFyVHlwZUV4dGVuc2lvbic7XG4gIEtpbmRbJ09CSkVDVF9UWVBFX0VYVEVOU0lPTiddID0gJ09iamVjdFR5cGVFeHRlbnNpb24nO1xuICBLaW5kWydJTlRFUkZBQ0VfVFlQRV9FWFRFTlNJT04nXSA9ICdJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uJztcbiAgS2luZFsnVU5JT05fVFlQRV9FWFRFTlNJT04nXSA9ICdVbmlvblR5cGVFeHRlbnNpb24nO1xuICBLaW5kWydFTlVNX1RZUEVfRVhURU5TSU9OJ10gPSAnRW51bVR5cGVFeHRlbnNpb24nO1xuICBLaW5kWydJTlBVVF9PQkpFQ1RfVFlQRV9FWFRFTlNJT04nXSA9ICdJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24nO1xufSkoS2luZCB8fCAoS2luZCA9IHt9KSk7XG5cbmV4cG9ydCB7IEtpbmQgfTtcbi8qKlxuICogVGhlIGVudW0gdHlwZSByZXByZXNlbnRpbmcgdGhlIHBvc3NpYmxlIGtpbmQgdmFsdWVzIG9mIEFTVCBub2Rlcy5cbiAqXG4gKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBLaW5kYC4gV2lsbCBiZSByZW1vdmUgaW4gdjE3LlxuICovXG4iLAogICAgIi8qKlxuICogYGBgXG4gKiBXaGl0ZVNwYWNlIDo6XG4gKiAgIC0gXCJIb3Jpem9udGFsIFRhYiAoVSswMDA5KVwiXG4gKiAgIC0gXCJTcGFjZSAoVSswMDIwKVwiXG4gKiBgYGBcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNXaGl0ZVNwYWNlKGNvZGUpIHtcbiAgcmV0dXJuIGNvZGUgPT09IDB4MDAwOSB8fCBjb2RlID09PSAweDAwMjA7XG59XG4vKipcbiAqIGBgYFxuICogRGlnaXQgOjogb25lIG9mXG4gKiAgIC0gYDBgIGAxYCBgMmAgYDNgIGA0YCBgNWAgYDZgIGA3YCBgOGAgYDlgXG4gKiBgYGBcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RpZ2l0KGNvZGUpIHtcbiAgcmV0dXJuIGNvZGUgPj0gMHgwMDMwICYmIGNvZGUgPD0gMHgwMDM5O1xufVxuLyoqXG4gKiBgYGBcbiAqIExldHRlciA6OiBvbmUgb2ZcbiAqICAgLSBgQWAgYEJgIGBDYCBgRGAgYEVgIGBGYCBgR2AgYEhgIGBJYCBgSmAgYEtgIGBMYCBgTWBcbiAqICAgLSBgTmAgYE9gIGBQYCBgUWAgYFJgIGBTYCBgVGAgYFVgIGBWYCBgV2AgYFhgIGBZYCBgWmBcbiAqICAgLSBgYWAgYGJgIGBjYCBgZGAgYGVgIGBmYCBgZ2AgYGhgIGBpYCBgamAgYGtgIGBsYCBgbWBcbiAqICAgLSBgbmAgYG9gIGBwYCBgcWAgYHJgIGBzYCBgdGAgYHVgIGB2YCBgd2AgYHhgIGB5YCBgemBcbiAqIGBgYFxuICogQGludGVybmFsXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTGV0dGVyKGNvZGUpIHtcbiAgcmV0dXJuIChcbiAgICAoY29kZSA+PSAweDAwNjEgJiYgY29kZSA8PSAweDAwN2EpIHx8IC8vIEEtWlxuICAgIChjb2RlID49IDB4MDA0MSAmJiBjb2RlIDw9IDB4MDA1YSkgLy8gYS16XG4gICk7XG59XG4vKipcbiAqIGBgYFxuICogTmFtZVN0YXJ0IDo6XG4gKiAgIC0gTGV0dGVyXG4gKiAgIC0gYF9gXG4gKiBgYGBcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc05hbWVTdGFydChjb2RlKSB7XG4gIHJldHVybiBpc0xldHRlcihjb2RlKSB8fCBjb2RlID09PSAweDAwNWY7XG59XG4vKipcbiAqIGBgYFxuICogTmFtZUNvbnRpbnVlIDo6XG4gKiAgIC0gTGV0dGVyXG4gKiAgIC0gRGlnaXRcbiAqICAgLSBgX2BcbiAqIGBgYFxuICogQGludGVybmFsXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTmFtZUNvbnRpbnVlKGNvZGUpIHtcbiAgcmV0dXJuIGlzTGV0dGVyKGNvZGUpIHx8IGlzRGlnaXQoY29kZSkgfHwgY29kZSA9PT0gMHgwMDVmO1xufVxuIiwKICAgICJpbXBvcnQgeyBpc1doaXRlU3BhY2UgfSBmcm9tICcuL2NoYXJhY3RlckNsYXNzZXMubWpzJztcbi8qKlxuICogUHJvZHVjZXMgdGhlIHZhbHVlIG9mIGEgYmxvY2sgc3RyaW5nIGZyb20gaXRzIHBhcnNlZCByYXcgdmFsdWUsIHNpbWlsYXIgdG9cbiAqIENvZmZlZVNjcmlwdCdzIGJsb2NrIHN0cmluZywgUHl0aG9uJ3MgZG9jc3RyaW5nIHRyaW0gb3IgUnVieSdzIHN0cmlwX2hlcmVkb2MuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRzIHRoZSBHcmFwaFFMIHNwZWMncyBCbG9ja1N0cmluZ1ZhbHVlKCkgc3RhdGljIGFsZ29yaXRobS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGVkZW50QmxvY2tTdHJpbmdMaW5lcyhsaW5lcykge1xuICB2YXIgX2ZpcnN0Tm9uRW1wdHlMaW5lMjtcblxuICBsZXQgY29tbW9uSW5kZW50ID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG4gIGxldCBmaXJzdE5vbkVtcHR5TGluZSA9IG51bGw7XG4gIGxldCBsYXN0Tm9uRW1wdHlMaW5lID0gLTE7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xuICAgIHZhciBfZmlyc3ROb25FbXB0eUxpbmU7XG5cbiAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XG4gICAgY29uc3QgaW5kZW50ID0gbGVhZGluZ1doaXRlc3BhY2UobGluZSk7XG5cbiAgICBpZiAoaW5kZW50ID09PSBsaW5lLmxlbmd0aCkge1xuICAgICAgY29udGludWU7IC8vIHNraXAgZW1wdHkgbGluZXNcbiAgICB9XG5cbiAgICBmaXJzdE5vbkVtcHR5TGluZSA9XG4gICAgICAoX2ZpcnN0Tm9uRW1wdHlMaW5lID0gZmlyc3ROb25FbXB0eUxpbmUpICE9PSBudWxsICYmXG4gICAgICBfZmlyc3ROb25FbXB0eUxpbmUgIT09IHZvaWQgMFxuICAgICAgICA/IF9maXJzdE5vbkVtcHR5TGluZVxuICAgICAgICA6IGk7XG4gICAgbGFzdE5vbkVtcHR5TGluZSA9IGk7XG5cbiAgICBpZiAoaSAhPT0gMCAmJiBpbmRlbnQgPCBjb21tb25JbmRlbnQpIHtcbiAgICAgIGNvbW1vbkluZGVudCA9IGluZGVudDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbGluZXMgLy8gUmVtb3ZlIGNvbW1vbiBpbmRlbnRhdGlvbiBmcm9tIGFsbCBsaW5lcyBidXQgZmlyc3QuXG4gICAgLm1hcCgobGluZSwgaSkgPT4gKGkgPT09IDAgPyBsaW5lIDogbGluZS5zbGljZShjb21tb25JbmRlbnQpKSkgLy8gUmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIGJsYW5rIGxpbmVzLlxuICAgIC5zbGljZShcbiAgICAgIChfZmlyc3ROb25FbXB0eUxpbmUyID0gZmlyc3ROb25FbXB0eUxpbmUpICE9PSBudWxsICYmXG4gICAgICAgIF9maXJzdE5vbkVtcHR5TGluZTIgIT09IHZvaWQgMFxuICAgICAgICA/IF9maXJzdE5vbkVtcHR5TGluZTJcbiAgICAgICAgOiAwLFxuICAgICAgbGFzdE5vbkVtcHR5TGluZSArIDEsXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gbGVhZGluZ1doaXRlc3BhY2Uoc3RyKSB7XG4gIGxldCBpID0gMDtcblxuICB3aGlsZSAoaSA8IHN0ci5sZW5ndGggJiYgaXNXaGl0ZVNwYWNlKHN0ci5jaGFyQ29kZUF0KGkpKSkge1xuICAgICsraTtcbiAgfVxuXG4gIHJldHVybiBpO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNQcmludGFibGVBc0Jsb2NrU3RyaW5nKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICByZXR1cm4gdHJ1ZTsgLy8gZW1wdHkgc3RyaW5nIGlzIHByaW50YWJsZVxuICB9XG5cbiAgbGV0IGlzRW1wdHlMaW5lID0gdHJ1ZTtcbiAgbGV0IGhhc0luZGVudCA9IGZhbHNlO1xuICBsZXQgaGFzQ29tbW9uSW5kZW50ID0gdHJ1ZTtcbiAgbGV0IHNlZW5Ob25FbXB0eUxpbmUgPSBmYWxzZTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgKytpKSB7XG4gICAgc3dpdGNoICh2YWx1ZS5jb2RlUG9pbnRBdChpKSkge1xuICAgICAgY2FzZSAweDAwMDA6XG4gICAgICBjYXNlIDB4MDAwMTpcbiAgICAgIGNhc2UgMHgwMDAyOlxuICAgICAgY2FzZSAweDAwMDM6XG4gICAgICBjYXNlIDB4MDAwNDpcbiAgICAgIGNhc2UgMHgwMDA1OlxuICAgICAgY2FzZSAweDAwMDY6XG4gICAgICBjYXNlIDB4MDAwNzpcbiAgICAgIGNhc2UgMHgwMDA4OlxuICAgICAgY2FzZSAweDAwMGI6XG4gICAgICBjYXNlIDB4MDAwYzpcbiAgICAgIGNhc2UgMHgwMDBlOlxuICAgICAgY2FzZSAweDAwMGY6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIEhhcyBub24tcHJpbnRhYmxlIGNoYXJhY3RlcnNcblxuICAgICAgY2FzZSAweDAwMGQ6XG4gICAgICAgIC8vICBcXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gSGFzIFxcciBvciBcXHJcXG4gd2hpY2ggd2lsbCBiZSByZXBsYWNlZCBhcyBcXG5cblxuICAgICAgY2FzZSAxMDpcbiAgICAgICAgLy8gIFxcblxuICAgICAgICBpZiAoaXNFbXB0eUxpbmUgJiYgIXNlZW5Ob25FbXB0eUxpbmUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEhhcyBsZWFkaW5nIG5ldyBsaW5lXG4gICAgICAgIH1cblxuICAgICAgICBzZWVuTm9uRW1wdHlMaW5lID0gdHJ1ZTtcbiAgICAgICAgaXNFbXB0eUxpbmUgPSB0cnVlO1xuICAgICAgICBoYXNJbmRlbnQgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgOTogLy8gICBcXHRcblxuICAgICAgY2FzZSAzMjpcbiAgICAgICAgLy8gIDxzcGFjZT5cbiAgICAgICAgaGFzSW5kZW50IHx8IChoYXNJbmRlbnQgPSBpc0VtcHR5TGluZSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBoYXNDb21tb25JbmRlbnQgJiYgKGhhc0NvbW1vbkluZGVudCA9IGhhc0luZGVudCk7XG4gICAgICAgIGlzRW1wdHlMaW5lID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgaWYgKGlzRW1wdHlMaW5lKSB7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBIYXMgdHJhaWxpbmcgZW1wdHkgbGluZXNcbiAgfVxuXG4gIGlmIChoYXNDb21tb25JbmRlbnQgJiYgc2Vlbk5vbkVtcHR5TGluZSkge1xuICAgIHJldHVybiBmYWxzZTsgLy8gSGFzIGludGVybmFsIGluZGVudFxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIFByaW50IGEgYmxvY2sgc3RyaW5nIGluIHRoZSBpbmRlbnRlZCBibG9jayBmb3JtIGJ5IGFkZGluZyBhIGxlYWRpbmcgYW5kXG4gKiB0cmFpbGluZyBibGFuayBsaW5lLiBIb3dldmVyLCBpZiBhIGJsb2NrIHN0cmluZyBzdGFydHMgd2l0aCB3aGl0ZXNwYWNlIGFuZCBpc1xuICogYSBzaW5nbGUtbGluZSwgYWRkaW5nIGEgbGVhZGluZyBibGFuayBsaW5lIHdvdWxkIHN0cmlwIHRoYXQgd2hpdGVzcGFjZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRCbG9ja1N0cmluZyh2YWx1ZSwgb3B0aW9ucykge1xuICBjb25zdCBlc2NhcGVkVmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cIlwiXCIvZywgJ1xcXFxcIlwiXCInKTsgLy8gRXhwYW5kIGEgYmxvY2sgc3RyaW5nJ3MgcmF3IHZhbHVlIGludG8gaW5kZXBlbmRlbnQgbGluZXMuXG5cbiAgY29uc3QgbGluZXMgPSBlc2NhcGVkVmFsdWUuc3BsaXQoL1xcclxcbnxbXFxuXFxyXS9nKTtcbiAgY29uc3QgaXNTaW5nbGVMaW5lID0gbGluZXMubGVuZ3RoID09PSAxOyAvLyBJZiBjb21tb24gaW5kZW50YXRpb24gaXMgZm91bmQgd2UgY2FuIGZpeCBzb21lIG9mIHRob3NlIGNhc2VzIGJ5IGFkZGluZyBsZWFkaW5nIG5ldyBsaW5lXG5cbiAgY29uc3QgZm9yY2VMZWFkaW5nTmV3TGluZSA9XG4gICAgbGluZXMubGVuZ3RoID4gMSAmJlxuICAgIGxpbmVzXG4gICAgICAuc2xpY2UoMSlcbiAgICAgIC5ldmVyeSgobGluZSkgPT4gbGluZS5sZW5ndGggPT09IDAgfHwgaXNXaGl0ZVNwYWNlKGxpbmUuY2hhckNvZGVBdCgwKSkpOyAvLyBUcmFpbGluZyB0cmlwbGUgcXVvdGVzIGp1c3QgbG9va3MgY29uZnVzaW5nIGJ1dCBkb2Vzbid0IGZvcmNlIHRyYWlsaW5nIG5ldyBsaW5lXG5cbiAgY29uc3QgaGFzVHJhaWxpbmdUcmlwbGVRdW90ZXMgPSBlc2NhcGVkVmFsdWUuZW5kc1dpdGgoJ1xcXFxcIlwiXCInKTsgLy8gVHJhaWxpbmcgcXVvdGUgKHNpbmdsZSBvciBkb3VibGUpIG9yIHNsYXNoIGZvcmNlcyB0cmFpbGluZyBuZXcgbGluZVxuXG4gIGNvbnN0IGhhc1RyYWlsaW5nUXVvdGUgPSB2YWx1ZS5lbmRzV2l0aCgnXCInKSAmJiAhaGFzVHJhaWxpbmdUcmlwbGVRdW90ZXM7XG4gIGNvbnN0IGhhc1RyYWlsaW5nU2xhc2ggPSB2YWx1ZS5lbmRzV2l0aCgnXFxcXCcpO1xuICBjb25zdCBmb3JjZVRyYWlsaW5nTmV3bGluZSA9IGhhc1RyYWlsaW5nUXVvdGUgfHwgaGFzVHJhaWxpbmdTbGFzaDtcbiAgY29uc3QgcHJpbnRBc011bHRpcGxlTGluZXMgPVxuICAgICEob3B0aW9ucyAhPT0gbnVsbCAmJiBvcHRpb25zICE9PSB2b2lkIDAgJiYgb3B0aW9ucy5taW5pbWl6ZSkgJiYgLy8gYWRkIGxlYWRpbmcgYW5kIHRyYWlsaW5nIG5ldyBsaW5lcyBvbmx5IGlmIGl0IGltcHJvdmVzIHJlYWRhYmlsaXR5XG4gICAgKCFpc1NpbmdsZUxpbmUgfHxcbiAgICAgIHZhbHVlLmxlbmd0aCA+IDcwIHx8XG4gICAgICBmb3JjZVRyYWlsaW5nTmV3bGluZSB8fFxuICAgICAgZm9yY2VMZWFkaW5nTmV3TGluZSB8fFxuICAgICAgaGFzVHJhaWxpbmdUcmlwbGVRdW90ZXMpO1xuICBsZXQgcmVzdWx0ID0gJyc7IC8vIEZvcm1hdCBhIG11bHRpLWxpbmUgYmxvY2sgcXVvdGUgdG8gYWNjb3VudCBmb3IgbGVhZGluZyBzcGFjZS5cblxuICBjb25zdCBza2lwTGVhZGluZ05ld0xpbmUgPSBpc1NpbmdsZUxpbmUgJiYgaXNXaGl0ZVNwYWNlKHZhbHVlLmNoYXJDb2RlQXQoMCkpO1xuXG4gIGlmICgocHJpbnRBc011bHRpcGxlTGluZXMgJiYgIXNraXBMZWFkaW5nTmV3TGluZSkgfHwgZm9yY2VMZWFkaW5nTmV3TGluZSkge1xuICAgIHJlc3VsdCArPSAnXFxuJztcbiAgfVxuXG4gIHJlc3VsdCArPSBlc2NhcGVkVmFsdWU7XG5cbiAgaWYgKHByaW50QXNNdWx0aXBsZUxpbmVzIHx8IGZvcmNlVHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgcmVzdWx0ICs9ICdcXG4nO1xuICB9XG5cbiAgcmV0dXJuICdcIlwiXCInICsgcmVzdWx0ICsgJ1wiXCJcIic7XG59XG4iLAogICAgIi8qKlxuICogQW4gZXhwb3J0ZWQgZW51bSBkZXNjcmliaW5nIHRoZSBkaWZmZXJlbnQga2luZHMgb2YgdG9rZW5zIHRoYXQgdGhlXG4gKiBsZXhlciBlbWl0cy5cbiAqL1xudmFyIFRva2VuS2luZDtcblxuKGZ1bmN0aW9uIChUb2tlbktpbmQpIHtcbiAgVG9rZW5LaW5kWydTT0YnXSA9ICc8U09GPic7XG4gIFRva2VuS2luZFsnRU9GJ10gPSAnPEVPRj4nO1xuICBUb2tlbktpbmRbJ0JBTkcnXSA9ICchJztcbiAgVG9rZW5LaW5kWydET0xMQVInXSA9ICckJztcbiAgVG9rZW5LaW5kWydBTVAnXSA9ICcmJztcbiAgVG9rZW5LaW5kWydQQVJFTl9MJ10gPSAnKCc7XG4gIFRva2VuS2luZFsnUEFSRU5fUiddID0gJyknO1xuICBUb2tlbktpbmRbJ1NQUkVBRCddID0gJy4uLic7XG4gIFRva2VuS2luZFsnQ09MT04nXSA9ICc6JztcbiAgVG9rZW5LaW5kWydFUVVBTFMnXSA9ICc9JztcbiAgVG9rZW5LaW5kWydBVCddID0gJ0AnO1xuICBUb2tlbktpbmRbJ0JSQUNLRVRfTCddID0gJ1snO1xuICBUb2tlbktpbmRbJ0JSQUNLRVRfUiddID0gJ10nO1xuICBUb2tlbktpbmRbJ0JSQUNFX0wnXSA9ICd7JztcbiAgVG9rZW5LaW5kWydQSVBFJ10gPSAnfCc7XG4gIFRva2VuS2luZFsnQlJBQ0VfUiddID0gJ30nO1xuICBUb2tlbktpbmRbJ05BTUUnXSA9ICdOYW1lJztcbiAgVG9rZW5LaW5kWydJTlQnXSA9ICdJbnQnO1xuICBUb2tlbktpbmRbJ0ZMT0FUJ10gPSAnRmxvYXQnO1xuICBUb2tlbktpbmRbJ1NUUklORyddID0gJ1N0cmluZyc7XG4gIFRva2VuS2luZFsnQkxPQ0tfU1RSSU5HJ10gPSAnQmxvY2tTdHJpbmcnO1xuICBUb2tlbktpbmRbJ0NPTU1FTlQnXSA9ICdDb21tZW50Jztcbn0pKFRva2VuS2luZCB8fCAoVG9rZW5LaW5kID0ge30pKTtcblxuZXhwb3J0IHsgVG9rZW5LaW5kIH07XG4vKipcbiAqIFRoZSBlbnVtIHR5cGUgcmVwcmVzZW50aW5nIHRoZSB0b2tlbiBraW5kcyB2YWx1ZXMuXG4gKlxuICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBgVG9rZW5LaW5kYC4gV2lsbCBiZSByZW1vdmUgaW4gdjE3LlxuICovXG4iLAogICAgImltcG9ydCB7IHN5bnRheEVycm9yIH0gZnJvbSAnLi4vZXJyb3Ivc3ludGF4RXJyb3IubWpzJztcbmltcG9ydCB7IFRva2VuIH0gZnJvbSAnLi9hc3QubWpzJztcbmltcG9ydCB7IGRlZGVudEJsb2NrU3RyaW5nTGluZXMgfSBmcm9tICcuL2Jsb2NrU3RyaW5nLm1qcyc7XG5pbXBvcnQgeyBpc0RpZ2l0LCBpc05hbWVDb250aW51ZSwgaXNOYW1lU3RhcnQgfSBmcm9tICcuL2NoYXJhY3RlckNsYXNzZXMubWpzJztcbmltcG9ydCB7IFRva2VuS2luZCB9IGZyb20gJy4vdG9rZW5LaW5kLm1qcyc7XG4vKipcbiAqIEdpdmVuIGEgU291cmNlIG9iamVjdCwgY3JlYXRlcyBhIExleGVyIGZvciB0aGF0IHNvdXJjZS5cbiAqIEEgTGV4ZXIgaXMgYSBzdGF0ZWZ1bCBzdHJlYW0gZ2VuZXJhdG9yIGluIHRoYXQgZXZlcnkgdGltZVxuICogaXQgaXMgYWR2YW5jZWQsIGl0IHJldHVybnMgdGhlIG5leHQgdG9rZW4gaW4gdGhlIFNvdXJjZS4gQXNzdW1pbmcgdGhlXG4gKiBzb3VyY2UgbGV4ZXMsIHRoZSBmaW5hbCBUb2tlbiBlbWl0dGVkIGJ5IHRoZSBsZXhlciB3aWxsIGJlIG9mIGtpbmRcbiAqIEVPRiwgYWZ0ZXIgd2hpY2ggdGhlIGxleGVyIHdpbGwgcmVwZWF0ZWRseSByZXR1cm4gdGhlIHNhbWUgRU9GIHRva2VuXG4gKiB3aGVuZXZlciBjYWxsZWQuXG4gKi9cblxuZXhwb3J0IGNsYXNzIExleGVyIHtcbiAgLyoqXG4gICAqIFRoZSBwcmV2aW91c2x5IGZvY3VzZWQgbm9uLWlnbm9yZWQgdG9rZW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudGx5IGZvY3VzZWQgbm9uLWlnbm9yZWQgdG9rZW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgKDEtaW5kZXhlZCkgbGluZSBjb250YWluaW5nIHRoZSBjdXJyZW50IHRva2VuLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGNoYXJhY3RlciBvZmZzZXQgYXQgd2hpY2ggdGhlIGN1cnJlbnQgbGluZSBiZWdpbnMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICBjb25zdCBzdGFydE9mRmlsZVRva2VuID0gbmV3IFRva2VuKFRva2VuS2luZC5TT0YsIDAsIDAsIDAsIDApO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMubGFzdFRva2VuID0gc3RhcnRPZkZpbGVUb2tlbjtcbiAgICB0aGlzLnRva2VuID0gc3RhcnRPZkZpbGVUb2tlbjtcbiAgICB0aGlzLmxpbmUgPSAxO1xuICAgIHRoaXMubGluZVN0YXJ0ID0gMDtcbiAgfVxuXG4gIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICByZXR1cm4gJ0xleGVyJztcbiAgfVxuICAvKipcbiAgICogQWR2YW5jZXMgdGhlIHRva2VuIHN0cmVhbSB0byB0aGUgbmV4dCBub24taWdub3JlZCB0b2tlbi5cbiAgICovXG5cbiAgYWR2YW5jZSgpIHtcbiAgICB0aGlzLmxhc3RUb2tlbiA9IHRoaXMudG9rZW47XG4gICAgY29uc3QgdG9rZW4gPSAodGhpcy50b2tlbiA9IHRoaXMubG9va2FoZWFkKCkpO1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuICAvKipcbiAgICogTG9va3MgYWhlYWQgYW5kIHJldHVybnMgdGhlIG5leHQgbm9uLWlnbm9yZWQgdG9rZW4sIGJ1dCBkb2VzIG5vdCBjaGFuZ2VcbiAgICogdGhlIHN0YXRlIG9mIExleGVyLlxuICAgKi9cblxuICBsb29rYWhlYWQoKSB7XG4gICAgbGV0IHRva2VuID0gdGhpcy50b2tlbjtcblxuICAgIGlmICh0b2tlbi5raW5kICE9PSBUb2tlbktpbmQuRU9GKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGlmICh0b2tlbi5uZXh0KSB7XG4gICAgICAgICAgdG9rZW4gPSB0b2tlbi5uZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlYWQgdGhlIG5leHQgdG9rZW4gYW5kIGZvcm0gYSBsaW5rIGluIHRoZSB0b2tlbiBsaW5rZWQtbGlzdC5cbiAgICAgICAgICBjb25zdCBuZXh0VG9rZW4gPSByZWFkTmV4dFRva2VuKHRoaXMsIHRva2VuLmVuZCk7IC8vIEB0cy1leHBlY3QtZXJyb3IgbmV4dCBpcyBvbmx5IG11dGFibGUgZHVyaW5nIHBhcnNpbmcuXG5cbiAgICAgICAgICB0b2tlbi5uZXh0ID0gbmV4dFRva2VuOyAvLyBAdHMtZXhwZWN0LWVycm9yIHByZXYgaXMgb25seSBtdXRhYmxlIGR1cmluZyBwYXJzaW5nLlxuXG4gICAgICAgICAgbmV4dFRva2VuLnByZXYgPSB0b2tlbjtcbiAgICAgICAgICB0b2tlbiA9IG5leHRUb2tlbjtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAodG9rZW4ua2luZCA9PT0gVG9rZW5LaW5kLkNPTU1FTlQpO1xuICAgIH1cblxuICAgIHJldHVybiB0b2tlbjtcbiAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNQdW5jdHVhdG9yVG9rZW5LaW5kKGtpbmQpIHtcbiAgcmV0dXJuIChcbiAgICBraW5kID09PSBUb2tlbktpbmQuQkFORyB8fFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5ET0xMQVIgfHxcbiAgICBraW5kID09PSBUb2tlbktpbmQuQU1QIHx8XG4gICAga2luZCA9PT0gVG9rZW5LaW5kLlBBUkVOX0wgfHxcbiAgICBraW5kID09PSBUb2tlbktpbmQuUEFSRU5fUiB8fFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5TUFJFQUQgfHxcbiAgICBraW5kID09PSBUb2tlbktpbmQuQ09MT04gfHxcbiAgICBraW5kID09PSBUb2tlbktpbmQuRVFVQUxTIHx8XG4gICAga2luZCA9PT0gVG9rZW5LaW5kLkFUIHx8XG4gICAga2luZCA9PT0gVG9rZW5LaW5kLkJSQUNLRVRfTCB8fFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5CUkFDS0VUX1IgfHxcbiAgICBraW5kID09PSBUb2tlbktpbmQuQlJBQ0VfTCB8fFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5QSVBFIHx8XG4gICAga2luZCA9PT0gVG9rZW5LaW5kLkJSQUNFX1JcbiAgKTtcbn1cbi8qKlxuICogQSBVbmljb2RlIHNjYWxhciB2YWx1ZSBpcyBhbnkgVW5pY29kZSBjb2RlIHBvaW50IGV4Y2VwdCBzdXJyb2dhdGUgY29kZVxuICogcG9pbnRzLiBJbiBvdGhlciB3b3JkcywgdGhlIGluY2x1c2l2ZSByYW5nZXMgb2YgdmFsdWVzIDB4MDAwMCB0byAweEQ3RkYgYW5kXG4gKiAweEUwMDAgdG8gMHgxMEZGRkYuXG4gKlxuICogU291cmNlQ2hhcmFjdGVyIDo6XG4gKiAgIC0gXCJBbnkgVW5pY29kZSBzY2FsYXIgdmFsdWVcIlxuICovXG5cbmZ1bmN0aW9uIGlzVW5pY29kZVNjYWxhclZhbHVlKGNvZGUpIHtcbiAgcmV0dXJuIChcbiAgICAoY29kZSA+PSAweDAwMDAgJiYgY29kZSA8PSAweGQ3ZmYpIHx8IChjb2RlID49IDB4ZTAwMCAmJiBjb2RlIDw9IDB4MTBmZmZmKVxuICApO1xufVxuLyoqXG4gKiBUaGUgR3JhcGhRTCBzcGVjaWZpY2F0aW9uIGRlZmluZXMgc291cmNlIHRleHQgYXMgYSBzZXF1ZW5jZSBvZiB1bmljb2RlIHNjYWxhclxuICogdmFsdWVzICh3aGljaCBVbmljb2RlIGRlZmluZXMgdG8gZXhjbHVkZSBzdXJyb2dhdGUgY29kZSBwb2ludHMpLiBIb3dldmVyXG4gKiBKYXZhU2NyaXB0IGRlZmluZXMgc3RyaW5ncyBhcyBhIHNlcXVlbmNlIG9mIFVURi0xNiBjb2RlIHVuaXRzIHdoaWNoIG1heVxuICogaW5jbHVkZSBzdXJyb2dhdGVzLiBBIHN1cnJvZ2F0ZSBwYWlyIGlzIGEgdmFsaWQgc291cmNlIGNoYXJhY3RlciBhcyBpdFxuICogZW5jb2RlcyBhIHN1cHBsZW1lbnRhcnkgY29kZSBwb2ludCAoYWJvdmUgVStGRkZGKSwgYnV0IHVucGFpcmVkIHN1cnJvZ2F0ZVxuICogY29kZSBwb2ludHMgYXJlIG5vdCB2YWxpZCBzb3VyY2UgY2hhcmFjdGVycy5cbiAqL1xuXG5mdW5jdGlvbiBpc1N1cHBsZW1lbnRhcnlDb2RlUG9pbnQoYm9keSwgbG9jYXRpb24pIHtcbiAgcmV0dXJuIChcbiAgICBpc0xlYWRpbmdTdXJyb2dhdGUoYm9keS5jaGFyQ29kZUF0KGxvY2F0aW9uKSkgJiZcbiAgICBpc1RyYWlsaW5nU3Vycm9nYXRlKGJvZHkuY2hhckNvZGVBdChsb2NhdGlvbiArIDEpKVxuICApO1xufVxuXG5mdW5jdGlvbiBpc0xlYWRpbmdTdXJyb2dhdGUoY29kZSkge1xuICByZXR1cm4gY29kZSA+PSAweGQ4MDAgJiYgY29kZSA8PSAweGRiZmY7XG59XG5cbmZ1bmN0aW9uIGlzVHJhaWxpbmdTdXJyb2dhdGUoY29kZSkge1xuICByZXR1cm4gY29kZSA+PSAweGRjMDAgJiYgY29kZSA8PSAweGRmZmY7XG59XG4vKipcbiAqIFByaW50cyB0aGUgY29kZSBwb2ludCAob3IgZW5kIG9mIGZpbGUgcmVmZXJlbmNlKSBhdCBhIGdpdmVuIGxvY2F0aW9uIGluIGFcbiAqIHNvdXJjZSBmb3IgdXNlIGluIGVycm9yIG1lc3NhZ2VzLlxuICpcbiAqIFByaW50YWJsZSBBU0NJSSBpcyBwcmludGVkIHF1b3RlZCwgd2hpbGUgb3RoZXIgcG9pbnRzIGFyZSBwcmludGVkIGluIFVuaWNvZGVcbiAqIGNvZGUgcG9pbnQgZm9ybSAoaWUuIFUrMTIzNCkuXG4gKi9cblxuZnVuY3Rpb24gcHJpbnRDb2RlUG9pbnRBdChsZXhlciwgbG9jYXRpb24pIHtcbiAgY29uc3QgY29kZSA9IGxleGVyLnNvdXJjZS5ib2R5LmNvZGVQb2ludEF0KGxvY2F0aW9uKTtcblxuICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIFRva2VuS2luZC5FT0Y7XG4gIH0gZWxzZSBpZiAoY29kZSA+PSAweDAwMjAgJiYgY29kZSA8PSAweDAwN2UpIHtcbiAgICAvLyBQcmludGFibGUgQVNDSUlcbiAgICBjb25zdCBjaGFyID0gU3RyaW5nLmZyb21Db2RlUG9pbnQoY29kZSk7XG4gICAgcmV0dXJuIGNoYXIgPT09ICdcIicgPyBcIidcXFwiJ1wiIDogYFwiJHtjaGFyfVwiYDtcbiAgfSAvLyBVbmljb2RlIGNvZGUgcG9pbnRcblxuICByZXR1cm4gJ1UrJyArIGNvZGUudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkucGFkU3RhcnQoNCwgJzAnKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgdG9rZW4gd2l0aCBsaW5lIGFuZCBjb2x1bW4gbG9jYXRpb24gaW5mb3JtYXRpb24uXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlVG9rZW4obGV4ZXIsIGtpbmQsIHN0YXJ0LCBlbmQsIHZhbHVlKSB7XG4gIGNvbnN0IGxpbmUgPSBsZXhlci5saW5lO1xuICBjb25zdCBjb2wgPSAxICsgc3RhcnQgLSBsZXhlci5saW5lU3RhcnQ7XG4gIHJldHVybiBuZXcgVG9rZW4oa2luZCwgc3RhcnQsIGVuZCwgbGluZSwgY29sLCB2YWx1ZSk7XG59XG4vKipcbiAqIEdldHMgdGhlIG5leHQgdG9rZW4gZnJvbSB0aGUgc291cmNlIHN0YXJ0aW5nIGF0IHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAqXG4gKiBUaGlzIHNraXBzIG92ZXIgd2hpdGVzcGFjZSB1bnRpbCBpdCBmaW5kcyB0aGUgbmV4dCBsZXhhYmxlIHRva2VuLCB0aGVuIGxleGVzXG4gKiBwdW5jdHVhdG9ycyBpbW1lZGlhdGVseSBvciBjYWxscyB0aGUgYXBwcm9wcmlhdGUgaGVscGVyIGZ1bmN0aW9uIGZvciBtb3JlXG4gKiBjb21wbGljYXRlZCB0b2tlbnMuXG4gKi9cblxuZnVuY3Rpb24gcmVhZE5leHRUb2tlbihsZXhlciwgc3RhcnQpIHtcbiAgY29uc3QgYm9keSA9IGxleGVyLnNvdXJjZS5ib2R5O1xuICBjb25zdCBib2R5TGVuZ3RoID0gYm9keS5sZW5ndGg7XG4gIGxldCBwb3NpdGlvbiA9IHN0YXJ0O1xuXG4gIHdoaWxlIChwb3NpdGlvbiA8IGJvZHlMZW5ndGgpIHtcbiAgICBjb25zdCBjb2RlID0gYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uKTsgLy8gU291cmNlQ2hhcmFjdGVyXG5cbiAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgIC8vIElnbm9yZWQgOjpcbiAgICAgIC8vICAgLSBVbmljb2RlQk9NXG4gICAgICAvLyAgIC0gV2hpdGVTcGFjZVxuICAgICAgLy8gICAtIExpbmVUZXJtaW5hdG9yXG4gICAgICAvLyAgIC0gQ29tbWVudFxuICAgICAgLy8gICAtIENvbW1hXG4gICAgICAvL1xuICAgICAgLy8gVW5pY29kZUJPTSA6OiBcIkJ5dGUgT3JkZXIgTWFyayAoVStGRUZGKVwiXG4gICAgICAvL1xuICAgICAgLy8gV2hpdGVTcGFjZSA6OlxuICAgICAgLy8gICAtIFwiSG9yaXpvbnRhbCBUYWIgKFUrMDAwOSlcIlxuICAgICAgLy8gICAtIFwiU3BhY2UgKFUrMDAyMClcIlxuICAgICAgLy9cbiAgICAgIC8vIENvbW1hIDo6ICxcbiAgICAgIGNhc2UgMHhmZWZmOiAvLyA8Qk9NPlxuXG4gICAgICBjYXNlIDB4MDAwOTogLy8gXFx0XG5cbiAgICAgIGNhc2UgMHgwMDIwOiAvLyA8c3BhY2U+XG5cbiAgICAgIGNhc2UgMHgwMDJjOlxuICAgICAgICAvLyAsXG4gICAgICAgICsrcG9zaXRpb247XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgLy8gTGluZVRlcm1pbmF0b3IgOjpcbiAgICAgIC8vICAgLSBcIk5ldyBMaW5lIChVKzAwMEEpXCJcbiAgICAgIC8vICAgLSBcIkNhcnJpYWdlIFJldHVybiAoVSswMDBEKVwiIFtsb29rYWhlYWQgIT0gXCJOZXcgTGluZSAoVSswMDBBKVwiXVxuICAgICAgLy8gICAtIFwiQ2FycmlhZ2UgUmV0dXJuIChVKzAwMEQpXCIgXCJOZXcgTGluZSAoVSswMDBBKVwiXG5cbiAgICAgIGNhc2UgMHgwMDBhOlxuICAgICAgICAvLyBcXG5cbiAgICAgICAgKytwb3NpdGlvbjtcbiAgICAgICAgKytsZXhlci5saW5lO1xuICAgICAgICBsZXhlci5saW5lU3RhcnQgPSBwb3NpdGlvbjtcbiAgICAgICAgY29udGludWU7XG5cbiAgICAgIGNhc2UgMHgwMDBkOlxuICAgICAgICAvLyBcXHJcbiAgICAgICAgaWYgKGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDEpID09PSAweDAwMGEpIHtcbiAgICAgICAgICBwb3NpdGlvbiArPSAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICsrcG9zaXRpb247XG4gICAgICAgIH1cblxuICAgICAgICArK2xleGVyLmxpbmU7XG4gICAgICAgIGxleGVyLmxpbmVTdGFydCA9IHBvc2l0aW9uO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIC8vIENvbW1lbnRcblxuICAgICAgY2FzZSAweDAwMjM6XG4gICAgICAgIC8vICNcbiAgICAgICAgcmV0dXJuIHJlYWRDb21tZW50KGxleGVyLCBwb3NpdGlvbik7XG4gICAgICAvLyBUb2tlbiA6OlxuICAgICAgLy8gICAtIFB1bmN0dWF0b3JcbiAgICAgIC8vICAgLSBOYW1lXG4gICAgICAvLyAgIC0gSW50VmFsdWVcbiAgICAgIC8vICAgLSBGbG9hdFZhbHVlXG4gICAgICAvLyAgIC0gU3RyaW5nVmFsdWVcbiAgICAgIC8vXG4gICAgICAvLyBQdW5jdHVhdG9yIDo6IG9uZSBvZiAhICQgJiAoICkgLi4uIDogPSBAIFsgXSB7IHwgfVxuXG4gICAgICBjYXNlIDB4MDAyMTpcbiAgICAgICAgLy8gIVxuICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5CQU5HLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwMjQ6XG4gICAgICAgIC8vICRcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuRE9MTEFSLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwMjY6XG4gICAgICAgIC8vICZcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuQU1QLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwMjg6XG4gICAgICAgIC8vIChcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuUEFSRU5fTCwgcG9zaXRpb24sIHBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGNhc2UgMHgwMDI5OlxuICAgICAgICAvLyApXG4gICAgICAgIHJldHVybiBjcmVhdGVUb2tlbihsZXhlciwgVG9rZW5LaW5kLlBBUkVOX1IsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDEpO1xuXG4gICAgICBjYXNlIDB4MDAyZTpcbiAgICAgICAgLy8gLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkgPT09IDB4MDAyZSAmJlxuICAgICAgICAgIGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDIpID09PSAweDAwMmVcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuU1BSRUFELCBwb3NpdGlvbiwgcG9zaXRpb24gKyAzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDB4MDAzYTpcbiAgICAgICAgLy8gOlxuICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5DT0xPTiwgcG9zaXRpb24sIHBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGNhc2UgMHgwMDNkOlxuICAgICAgICAvLyA9XG4gICAgICAgIHJldHVybiBjcmVhdGVUb2tlbihsZXhlciwgVG9rZW5LaW5kLkVRVUFMUywgcG9zaXRpb24sIHBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGNhc2UgMHgwMDQwOlxuICAgICAgICAvLyBAXG4gICAgICAgIHJldHVybiBjcmVhdGVUb2tlbihsZXhlciwgVG9rZW5LaW5kLkFULCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwNWI6XG4gICAgICAgIC8vIFtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuQlJBQ0tFVF9MLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwNWQ6XG4gICAgICAgIC8vIF1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuQlJBQ0tFVF9SLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwN2I6XG4gICAgICAgIC8vIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuQlJBQ0VfTCwgcG9zaXRpb24sIHBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGNhc2UgMHgwMDdjOlxuICAgICAgICAvLyB8XG4gICAgICAgIHJldHVybiBjcmVhdGVUb2tlbihsZXhlciwgVG9rZW5LaW5kLlBJUEUsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDEpO1xuXG4gICAgICBjYXNlIDB4MDA3ZDpcbiAgICAgICAgLy8gfVxuICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5CUkFDRV9SLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcbiAgICAgIC8vIFN0cmluZ1ZhbHVlXG5cbiAgICAgIGNhc2UgMHgwMDIyOlxuICAgICAgICAvLyBcIlxuICAgICAgICBpZiAoXG4gICAgICAgICAgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkgPT09IDB4MDAyMiAmJlxuICAgICAgICAgIGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDIpID09PSAweDAwMjJcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHJlYWRCbG9ja1N0cmluZyhsZXhlciwgcG9zaXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlYWRTdHJpbmcobGV4ZXIsIHBvc2l0aW9uKTtcbiAgICB9IC8vIEludFZhbHVlIHwgRmxvYXRWYWx1ZSAoRGlnaXQgfCAtKVxuXG4gICAgaWYgKGlzRGlnaXQoY29kZSkgfHwgY29kZSA9PT0gMHgwMDJkKSB7XG4gICAgICByZXR1cm4gcmVhZE51bWJlcihsZXhlciwgcG9zaXRpb24sIGNvZGUpO1xuICAgIH0gLy8gTmFtZVxuXG4gICAgaWYgKGlzTmFtZVN0YXJ0KGNvZGUpKSB7XG4gICAgICByZXR1cm4gcmVhZE5hbWUobGV4ZXIsIHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgIGxleGVyLnNvdXJjZSxcbiAgICAgIHBvc2l0aW9uLFxuICAgICAgY29kZSA9PT0gMHgwMDI3XG4gICAgICAgID8gJ1VuZXhwZWN0ZWQgc2luZ2xlIHF1b3RlIGNoYXJhY3RlciAoXFwnKSwgZGlkIHlvdSBtZWFuIHRvIHVzZSBhIGRvdWJsZSBxdW90ZSAoXCIpPydcbiAgICAgICAgOiBpc1VuaWNvZGVTY2FsYXJWYWx1ZShjb2RlKSB8fCBpc1N1cHBsZW1lbnRhcnlDb2RlUG9pbnQoYm9keSwgcG9zaXRpb24pXG4gICAgICAgID8gYFVuZXhwZWN0ZWQgY2hhcmFjdGVyOiAke3ByaW50Q29kZVBvaW50QXQobGV4ZXIsIHBvc2l0aW9uKX0uYFxuICAgICAgICA6IGBJbnZhbGlkIGNoYXJhY3RlcjogJHtwcmludENvZGVQb2ludEF0KGxleGVyLCBwb3NpdGlvbil9LmAsXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVUb2tlbihsZXhlciwgVG9rZW5LaW5kLkVPRiwgYm9keUxlbmd0aCwgYm9keUxlbmd0aCk7XG59XG4vKipcbiAqIFJlYWRzIGEgY29tbWVudCB0b2tlbiBmcm9tIHRoZSBzb3VyY2UgZmlsZS5cbiAqXG4gKiBgYGBcbiAqIENvbW1lbnQgOjogIyBDb21tZW50Q2hhciogW2xvb2thaGVhZCAhPSBDb21tZW50Q2hhcl1cbiAqXG4gKiBDb21tZW50Q2hhciA6OiBTb3VyY2VDaGFyYWN0ZXIgYnV0IG5vdCBMaW5lVGVybWluYXRvclxuICogYGBgXG4gKi9cblxuZnVuY3Rpb24gcmVhZENvbW1lbnQobGV4ZXIsIHN0YXJ0KSB7XG4gIGNvbnN0IGJvZHkgPSBsZXhlci5zb3VyY2UuYm9keTtcbiAgY29uc3QgYm9keUxlbmd0aCA9IGJvZHkubGVuZ3RoO1xuICBsZXQgcG9zaXRpb24gPSBzdGFydCArIDE7XG5cbiAgd2hpbGUgKHBvc2l0aW9uIDwgYm9keUxlbmd0aCkge1xuICAgIGNvbnN0IGNvZGUgPSBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24pOyAvLyBMaW5lVGVybWluYXRvciAoXFxuIHwgXFxyKVxuXG4gICAgaWYgKGNvZGUgPT09IDB4MDAwYSB8fCBjb2RlID09PSAweDAwMGQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH0gLy8gU291cmNlQ2hhcmFjdGVyXG5cbiAgICBpZiAoaXNVbmljb2RlU2NhbGFyVmFsdWUoY29kZSkpIHtcbiAgICAgICsrcG9zaXRpb247XG4gICAgfSBlbHNlIGlmIChpc1N1cHBsZW1lbnRhcnlDb2RlUG9pbnQoYm9keSwgcG9zaXRpb24pKSB7XG4gICAgICBwb3NpdGlvbiArPSAyO1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY3JlYXRlVG9rZW4oXG4gICAgbGV4ZXIsXG4gICAgVG9rZW5LaW5kLkNPTU1FTlQsXG4gICAgc3RhcnQsXG4gICAgcG9zaXRpb24sXG4gICAgYm9keS5zbGljZShzdGFydCArIDEsIHBvc2l0aW9uKSxcbiAgKTtcbn1cbi8qKlxuICogUmVhZHMgYSBudW1iZXIgdG9rZW4gZnJvbSB0aGUgc291cmNlIGZpbGUsIGVpdGhlciBhIEZsb2F0VmFsdWUgb3IgYW4gSW50VmFsdWVcbiAqIGRlcGVuZGluZyBvbiB3aGV0aGVyIGEgRnJhY3Rpb25hbFBhcnQgb3IgRXhwb25lbnRQYXJ0IGlzIGVuY291bnRlcmVkLlxuICpcbiAqIGBgYFxuICogSW50VmFsdWUgOjogSW50ZWdlclBhcnQgW2xvb2thaGVhZCAhPSB7RGlnaXQsIGAuYCwgTmFtZVN0YXJ0fV1cbiAqXG4gKiBJbnRlZ2VyUGFydCA6OlxuICogICAtIE5lZ2F0aXZlU2lnbj8gMFxuICogICAtIE5lZ2F0aXZlU2lnbj8gTm9uWmVyb0RpZ2l0IERpZ2l0KlxuICpcbiAqIE5lZ2F0aXZlU2lnbiA6OiAtXG4gKlxuICogTm9uWmVyb0RpZ2l0IDo6IERpZ2l0IGJ1dCBub3QgYDBgXG4gKlxuICogRmxvYXRWYWx1ZSA6OlxuICogICAtIEludGVnZXJQYXJ0IEZyYWN0aW9uYWxQYXJ0IEV4cG9uZW50UGFydCBbbG9va2FoZWFkICE9IHtEaWdpdCwgYC5gLCBOYW1lU3RhcnR9XVxuICogICAtIEludGVnZXJQYXJ0IEZyYWN0aW9uYWxQYXJ0IFtsb29rYWhlYWQgIT0ge0RpZ2l0LCBgLmAsIE5hbWVTdGFydH1dXG4gKiAgIC0gSW50ZWdlclBhcnQgRXhwb25lbnRQYXJ0IFtsb29rYWhlYWQgIT0ge0RpZ2l0LCBgLmAsIE5hbWVTdGFydH1dXG4gKlxuICogRnJhY3Rpb25hbFBhcnQgOjogLiBEaWdpdCtcbiAqXG4gKiBFeHBvbmVudFBhcnQgOjogRXhwb25lbnRJbmRpY2F0b3IgU2lnbj8gRGlnaXQrXG4gKlxuICogRXhwb25lbnRJbmRpY2F0b3IgOjogb25lIG9mIGBlYCBgRWBcbiAqXG4gKiBTaWduIDo6IG9uZSBvZiArIC1cbiAqIGBgYFxuICovXG5cbmZ1bmN0aW9uIHJlYWROdW1iZXIobGV4ZXIsIHN0YXJ0LCBmaXJzdENvZGUpIHtcbiAgY29uc3QgYm9keSA9IGxleGVyLnNvdXJjZS5ib2R5O1xuICBsZXQgcG9zaXRpb24gPSBzdGFydDtcbiAgbGV0IGNvZGUgPSBmaXJzdENvZGU7XG4gIGxldCBpc0Zsb2F0ID0gZmFsc2U7IC8vIE5lZ2F0aXZlU2lnbiAoLSlcblxuICBpZiAoY29kZSA9PT0gMHgwMDJkKSB7XG4gICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKTtcbiAgfSAvLyBaZXJvICgwKVxuXG4gIGlmIChjb2RlID09PSAweDAwMzApIHtcbiAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KCsrcG9zaXRpb24pO1xuXG4gICAgaWYgKGlzRGlnaXQoY29kZSkpIHtcbiAgICAgIHRocm93IHN5bnRheEVycm9yKFxuICAgICAgICBsZXhlci5zb3VyY2UsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICBgSW52YWxpZCBudW1iZXIsIHVuZXhwZWN0ZWQgZGlnaXQgYWZ0ZXIgMDogJHtwcmludENvZGVQb2ludEF0KFxuICAgICAgICAgIGxleGVyLFxuICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICApfS5gLFxuICAgICAgKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcG9zaXRpb24gPSByZWFkRGlnaXRzKGxleGVyLCBwb3NpdGlvbiwgY29kZSk7XG4gICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbik7XG4gIH0gLy8gRnVsbCBzdG9wICguKVxuXG4gIGlmIChjb2RlID09PSAweDAwMmUpIHtcbiAgICBpc0Zsb2F0ID0gdHJ1ZTtcbiAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KCsrcG9zaXRpb24pO1xuICAgIHBvc2l0aW9uID0gcmVhZERpZ2l0cyhsZXhlciwgcG9zaXRpb24sIGNvZGUpO1xuICAgIGNvZGUgPSBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24pO1xuICB9IC8vIEUgZVxuXG4gIGlmIChjb2RlID09PSAweDAwNDUgfHwgY29kZSA9PT0gMHgwMDY1KSB7XG4gICAgaXNGbG9hdCA9IHRydWU7XG4gICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKTsgLy8gKyAtXG5cbiAgICBpZiAoY29kZSA9PT0gMHgwMDJiIHx8IGNvZGUgPT09IDB4MDAyZCkge1xuICAgICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBwb3NpdGlvbiA9IHJlYWREaWdpdHMobGV4ZXIsIHBvc2l0aW9uLCBjb2RlKTtcbiAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uKTtcbiAgfSAvLyBOdW1iZXJzIGNhbm5vdCBiZSBmb2xsb3dlZCBieSAuIG9yIE5hbWVTdGFydFxuXG4gIGlmIChjb2RlID09PSAweDAwMmUgfHwgaXNOYW1lU3RhcnQoY29kZSkpIHtcbiAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgIGxleGVyLnNvdXJjZSxcbiAgICAgIHBvc2l0aW9uLFxuICAgICAgYEludmFsaWQgbnVtYmVyLCBleHBlY3RlZCBkaWdpdCBidXQgZ290OiAke3ByaW50Q29kZVBvaW50QXQoXG4gICAgICAgIGxleGVyLFxuICAgICAgICBwb3NpdGlvbixcbiAgICAgICl9LmAsXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVUb2tlbihcbiAgICBsZXhlcixcbiAgICBpc0Zsb2F0ID8gVG9rZW5LaW5kLkZMT0FUIDogVG9rZW5LaW5kLklOVCxcbiAgICBzdGFydCxcbiAgICBwb3NpdGlvbixcbiAgICBib2R5LnNsaWNlKHN0YXJ0LCBwb3NpdGlvbiksXG4gICk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG5ldyBwb3NpdGlvbiBpbiB0aGUgc291cmNlIGFmdGVyIHJlYWRpbmcgb25lIG9yIG1vcmUgZGlnaXRzLlxuICovXG5cbmZ1bmN0aW9uIHJlYWREaWdpdHMobGV4ZXIsIHN0YXJ0LCBmaXJzdENvZGUpIHtcbiAgaWYgKCFpc0RpZ2l0KGZpcnN0Q29kZSkpIHtcbiAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgIGxleGVyLnNvdXJjZSxcbiAgICAgIHN0YXJ0LFxuICAgICAgYEludmFsaWQgbnVtYmVyLCBleHBlY3RlZCBkaWdpdCBidXQgZ290OiAke3ByaW50Q29kZVBvaW50QXQoXG4gICAgICAgIGxleGVyLFxuICAgICAgICBzdGFydCxcbiAgICAgICl9LmAsXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGJvZHkgPSBsZXhlci5zb3VyY2UuYm9keTtcbiAgbGV0IHBvc2l0aW9uID0gc3RhcnQgKyAxOyAvLyArMSB0byBza2lwIGZpcnN0IGZpcnN0Q29kZVxuXG4gIHdoaWxlIChpc0RpZ2l0KGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbikpKSB7XG4gICAgKytwb3NpdGlvbjtcbiAgfVxuXG4gIHJldHVybiBwb3NpdGlvbjtcbn1cbi8qKlxuICogUmVhZHMgYSBzaW5nbGUtcXVvdGUgc3RyaW5nIHRva2VuIGZyb20gdGhlIHNvdXJjZSBmaWxlLlxuICpcbiAqIGBgYFxuICogU3RyaW5nVmFsdWUgOjpcbiAqICAgLSBgXCJcImAgW2xvb2thaGVhZCAhPSBgXCJgXVxuICogICAtIGBcImAgU3RyaW5nQ2hhcmFjdGVyKyBgXCJgXG4gKlxuICogU3RyaW5nQ2hhcmFjdGVyIDo6XG4gKiAgIC0gU291cmNlQ2hhcmFjdGVyIGJ1dCBub3QgYFwiYCBvciBgXFxgIG9yIExpbmVUZXJtaW5hdG9yXG4gKiAgIC0gYFxcdWAgRXNjYXBlZFVuaWNvZGVcbiAqICAgLSBgXFxgIEVzY2FwZWRDaGFyYWN0ZXJcbiAqXG4gKiBFc2NhcGVkVW5pY29kZSA6OlxuICogICAtIGB7YCBIZXhEaWdpdCsgYH1gXG4gKiAgIC0gSGV4RGlnaXQgSGV4RGlnaXQgSGV4RGlnaXQgSGV4RGlnaXRcbiAqXG4gKiBFc2NhcGVkQ2hhcmFjdGVyIDo6IG9uZSBvZiBgXCJgIGBcXGAgYC9gIGBiYCBgZmAgYG5gIGByYCBgdGBcbiAqIGBgYFxuICovXG5cbmZ1bmN0aW9uIHJlYWRTdHJpbmcobGV4ZXIsIHN0YXJ0KSB7XG4gIGNvbnN0IGJvZHkgPSBsZXhlci5zb3VyY2UuYm9keTtcbiAgY29uc3QgYm9keUxlbmd0aCA9IGJvZHkubGVuZ3RoO1xuICBsZXQgcG9zaXRpb24gPSBzdGFydCArIDE7XG4gIGxldCBjaHVua1N0YXJ0ID0gcG9zaXRpb247XG4gIGxldCB2YWx1ZSA9ICcnO1xuXG4gIHdoaWxlIChwb3NpdGlvbiA8IGJvZHlMZW5ndGgpIHtcbiAgICBjb25zdCBjb2RlID0gYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uKTsgLy8gQ2xvc2luZyBRdW90ZSAoXCIpXG5cbiAgICBpZiAoY29kZSA9PT0gMHgwMDIyKSB7XG4gICAgICB2YWx1ZSArPSBib2R5LnNsaWNlKGNodW5rU3RhcnQsIHBvc2l0aW9uKTtcbiAgICAgIHJldHVybiBjcmVhdGVUb2tlbihsZXhlciwgVG9rZW5LaW5kLlNUUklORywgc3RhcnQsIHBvc2l0aW9uICsgMSwgdmFsdWUpO1xuICAgIH0gLy8gRXNjYXBlIFNlcXVlbmNlIChcXClcblxuICAgIGlmIChjb2RlID09PSAweDAwNWMpIHtcbiAgICAgIHZhbHVlICs9IGJvZHkuc2xpY2UoY2h1bmtTdGFydCwgcG9zaXRpb24pO1xuICAgICAgY29uc3QgZXNjYXBlID1cbiAgICAgICAgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkgPT09IDB4MDA3NSAvLyB1XG4gICAgICAgICAgPyBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAyKSA9PT0gMHgwMDdiIC8vIHtcbiAgICAgICAgICAgID8gcmVhZEVzY2FwZWRVbmljb2RlVmFyaWFibGVXaWR0aChsZXhlciwgcG9zaXRpb24pXG4gICAgICAgICAgICA6IHJlYWRFc2NhcGVkVW5pY29kZUZpeGVkV2lkdGgobGV4ZXIsIHBvc2l0aW9uKVxuICAgICAgICAgIDogcmVhZEVzY2FwZWRDaGFyYWN0ZXIobGV4ZXIsIHBvc2l0aW9uKTtcbiAgICAgIHZhbHVlICs9IGVzY2FwZS52YWx1ZTtcbiAgICAgIHBvc2l0aW9uICs9IGVzY2FwZS5zaXplO1xuICAgICAgY2h1bmtTdGFydCA9IHBvc2l0aW9uO1xuICAgICAgY29udGludWU7XG4gICAgfSAvLyBMaW5lVGVybWluYXRvciAoXFxuIHwgXFxyKVxuXG4gICAgaWYgKGNvZGUgPT09IDB4MDAwYSB8fCBjb2RlID09PSAweDAwMGQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH0gLy8gU291cmNlQ2hhcmFjdGVyXG5cbiAgICBpZiAoaXNVbmljb2RlU2NhbGFyVmFsdWUoY29kZSkpIHtcbiAgICAgICsrcG9zaXRpb247XG4gICAgfSBlbHNlIGlmIChpc1N1cHBsZW1lbnRhcnlDb2RlUG9pbnQoYm9keSwgcG9zaXRpb24pKSB7XG4gICAgICBwb3NpdGlvbiArPSAyO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgICAgbGV4ZXIuc291cmNlLFxuICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgYEludmFsaWQgY2hhcmFjdGVyIHdpdGhpbiBTdHJpbmc6ICR7cHJpbnRDb2RlUG9pbnRBdChcbiAgICAgICAgICBsZXhlcixcbiAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgKX0uYCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgdGhyb3cgc3ludGF4RXJyb3IobGV4ZXIuc291cmNlLCBwb3NpdGlvbiwgJ1VudGVybWluYXRlZCBzdHJpbmcuJyk7XG59IC8vIFRoZSBzdHJpbmcgdmFsdWUgYW5kIGxleGVkIHNpemUgb2YgYW4gZXNjYXBlIHNlcXVlbmNlLlxuXG5mdW5jdGlvbiByZWFkRXNjYXBlZFVuaWNvZGVWYXJpYWJsZVdpZHRoKGxleGVyLCBwb3NpdGlvbikge1xuICBjb25zdCBib2R5ID0gbGV4ZXIuc291cmNlLmJvZHk7XG4gIGxldCBwb2ludCA9IDA7XG4gIGxldCBzaXplID0gMzsgLy8gQ2Fubm90IGJlIGxhcmdlciB0aGFuIDEyIGNoYXJzIChcXHV7MDAwMDAwMDB9KS5cblxuICB3aGlsZSAoc2l6ZSA8IDEyKSB7XG4gICAgY29uc3QgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIHNpemUrKyk7IC8vIENsb3NpbmcgQnJhY2UgKH0pXG5cbiAgICBpZiAoY29kZSA9PT0gMHgwMDdkKSB7XG4gICAgICAvLyBNdXN0IGJlIGF0IGxlYXN0IDUgY2hhcnMgKFxcdXswfSkgYW5kIGVuY29kZSBhIFVuaWNvZGUgc2NhbGFyIHZhbHVlLlxuICAgICAgaWYgKHNpemUgPCA1IHx8ICFpc1VuaWNvZGVTY2FsYXJWYWx1ZShwb2ludCkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiBTdHJpbmcuZnJvbUNvZGVQb2ludChwb2ludCksXG4gICAgICAgIHNpemUsXG4gICAgICB9O1xuICAgIH0gLy8gQXBwZW5kIHRoaXMgaGV4IGRpZ2l0IHRvIHRoZSBjb2RlIHBvaW50LlxuXG4gICAgcG9pbnQgPSAocG9pbnQgPDwgNCkgfCByZWFkSGV4RGlnaXQoY29kZSk7XG5cbiAgICBpZiAocG9pbnQgPCAwKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICBsZXhlci5zb3VyY2UsXG4gICAgcG9zaXRpb24sXG4gICAgYEludmFsaWQgVW5pY29kZSBlc2NhcGUgc2VxdWVuY2U6IFwiJHtib2R5LnNsaWNlKFxuICAgICAgcG9zaXRpb24sXG4gICAgICBwb3NpdGlvbiArIHNpemUsXG4gICAgKX1cIi5gLFxuICApO1xufVxuXG5mdW5jdGlvbiByZWFkRXNjYXBlZFVuaWNvZGVGaXhlZFdpZHRoKGxleGVyLCBwb3NpdGlvbikge1xuICBjb25zdCBib2R5ID0gbGV4ZXIuc291cmNlLmJvZHk7XG4gIGNvbnN0IGNvZGUgPSByZWFkMTZCaXRIZXhDb2RlKGJvZHksIHBvc2l0aW9uICsgMik7XG5cbiAgaWYgKGlzVW5pY29kZVNjYWxhclZhbHVlKGNvZGUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBTdHJpbmcuZnJvbUNvZGVQb2ludChjb2RlKSxcbiAgICAgIHNpemU6IDYsXG4gICAgfTtcbiAgfSAvLyBHcmFwaFFMIGFsbG93cyBKU09OLXN0eWxlIHN1cnJvZ2F0ZSBwYWlyIGVzY2FwZSBzZXF1ZW5jZXMsIGJ1dCBvbmx5IHdoZW5cbiAgLy8gYSB2YWxpZCBwYWlyIGlzIGZvcm1lZC5cblxuICBpZiAoaXNMZWFkaW5nU3Vycm9nYXRlKGNvZGUpKSB7XG4gICAgLy8gXFx1XG4gICAgaWYgKFxuICAgICAgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgNikgPT09IDB4MDA1YyAmJlxuICAgICAgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgNykgPT09IDB4MDA3NVxuICAgICkge1xuICAgICAgY29uc3QgdHJhaWxpbmdDb2RlID0gcmVhZDE2Qml0SGV4Q29kZShib2R5LCBwb3NpdGlvbiArIDgpO1xuXG4gICAgICBpZiAoaXNUcmFpbGluZ1N1cnJvZ2F0ZSh0cmFpbGluZ0NvZGUpKSB7XG4gICAgICAgIC8vIEphdmFTY3JpcHQgZGVmaW5lcyBzdHJpbmdzIGFzIGEgc2VxdWVuY2Ugb2YgVVRGLTE2IGNvZGUgdW5pdHMgYW5kXG4gICAgICAgIC8vIGVuY29kZXMgVW5pY29kZSBjb2RlIHBvaW50cyBhYm92ZSBVK0ZGRkYgdXNpbmcgYSBzdXJyb2dhdGUgcGFpciBvZlxuICAgICAgICAvLyBjb2RlIHVuaXRzLiBTaW5jZSB0aGlzIGlzIGEgc3Vycm9nYXRlIHBhaXIgZXNjYXBlIHNlcXVlbmNlLCBqdXN0XG4gICAgICAgIC8vIGluY2x1ZGUgYm90aCBjb2RlcyBpbnRvIHRoZSBKYXZhU2NyaXB0IHN0cmluZyB2YWx1ZS4gSGFkIEphdmFTY3JpcHRcbiAgICAgICAgLy8gbm90IGJlZW4gaW50ZXJuYWxseSBiYXNlZCBvbiBVVEYtMTYsIHRoZW4gdGhpcyBzdXJyb2dhdGUgcGFpciB3b3VsZFxuICAgICAgICAvLyBiZSBkZWNvZGVkIHRvIHJldHJpZXZlIHRoZSBzdXBwbGVtZW50YXJ5IGNvZGUgcG9pbnQuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IFN0cmluZy5mcm9tQ29kZVBvaW50KGNvZGUsIHRyYWlsaW5nQ29kZSksXG4gICAgICAgICAgc2l6ZTogMTIsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdGhyb3cgc3ludGF4RXJyb3IoXG4gICAgbGV4ZXIuc291cmNlLFxuICAgIHBvc2l0aW9uLFxuICAgIGBJbnZhbGlkIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiBcIiR7Ym9keS5zbGljZShwb3NpdGlvbiwgcG9zaXRpb24gKyA2KX1cIi5gLFxuICApO1xufVxuLyoqXG4gKiBSZWFkcyBmb3VyIGhleGFkZWNpbWFsIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgdGhlIHBvc2l0aXZlIGludGVnZXIgdGhhdCAxNmJpdFxuICogaGV4YWRlY2ltYWwgc3RyaW5nIHJlcHJlc2VudHMuIEZvciBleGFtcGxlLCBcIjAwMGZcIiB3aWxsIHJldHVybiAxNSwgYW5kIFwiZGVhZFwiXG4gKiB3aWxsIHJldHVybiA1NzAwNS5cbiAqXG4gKiBSZXR1cm5zIGEgbmVnYXRpdmUgbnVtYmVyIGlmIGFueSBjaGFyIHdhcyBub3QgYSB2YWxpZCBoZXhhZGVjaW1hbCBkaWdpdC5cbiAqL1xuXG5mdW5jdGlvbiByZWFkMTZCaXRIZXhDb2RlKGJvZHksIHBvc2l0aW9uKSB7XG4gIC8vIHJlYWRIZXhEaWdpdCgpIHJldHVybnMgLTEgb24gZXJyb3IuIE9SaW5nIGEgbmVnYXRpdmUgdmFsdWUgd2l0aCBhbnkgb3RoZXJcbiAgLy8gdmFsdWUgYWx3YXlzIHByb2R1Y2VzIGEgbmVnYXRpdmUgdmFsdWUuXG4gIHJldHVybiAoXG4gICAgKHJlYWRIZXhEaWdpdChib2R5LmNoYXJDb2RlQXQocG9zaXRpb24pKSA8PCAxMikgfFxuICAgIChyZWFkSGV4RGlnaXQoYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkpIDw8IDgpIHxcbiAgICAocmVhZEhleERpZ2l0KGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDIpKSA8PCA0KSB8XG4gICAgcmVhZEhleERpZ2l0KGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDMpKVxuICApO1xufVxuLyoqXG4gKiBSZWFkcyBhIGhleGFkZWNpbWFsIGNoYXJhY3RlciBhbmQgcmV0dXJucyBpdHMgcG9zaXRpdmUgaW50ZWdlciB2YWx1ZSAoMC0xNSkuXG4gKlxuICogJzAnIGJlY29tZXMgMCwgJzknIGJlY29tZXMgOVxuICogJ0EnIGJlY29tZXMgMTAsICdGJyBiZWNvbWVzIDE1XG4gKiAnYScgYmVjb21lcyAxMCwgJ2YnIGJlY29tZXMgMTVcbiAqXG4gKiBSZXR1cm5zIC0xIGlmIHRoZSBwcm92aWRlZCBjaGFyYWN0ZXIgY29kZSB3YXMgbm90IGEgdmFsaWQgaGV4YWRlY2ltYWwgZGlnaXQuXG4gKlxuICogSGV4RGlnaXQgOjogb25lIG9mXG4gKiAgIC0gYDBgIGAxYCBgMmAgYDNgIGA0YCBgNWAgYDZgIGA3YCBgOGAgYDlgXG4gKiAgIC0gYEFgIGBCYCBgQ2AgYERgIGBFYCBgRmBcbiAqICAgLSBgYWAgYGJgIGBjYCBgZGAgYGVgIGBmYFxuICovXG5cbmZ1bmN0aW9uIHJlYWRIZXhEaWdpdChjb2RlKSB7XG4gIHJldHVybiBjb2RlID49IDB4MDAzMCAmJiBjb2RlIDw9IDB4MDAzOSAvLyAwLTlcbiAgICA/IGNvZGUgLSAweDAwMzBcbiAgICA6IGNvZGUgPj0gMHgwMDQxICYmIGNvZGUgPD0gMHgwMDQ2IC8vIEEtRlxuICAgID8gY29kZSAtIDB4MDAzN1xuICAgIDogY29kZSA+PSAweDAwNjEgJiYgY29kZSA8PSAweDAwNjYgLy8gYS1mXG4gICAgPyBjb2RlIC0gMHgwMDU3XG4gICAgOiAtMTtcbn1cbi8qKlxuICogfCBFc2NhcGVkIENoYXJhY3RlciB8IENvZGUgUG9pbnQgfCBDaGFyYWN0ZXIgTmFtZSAgICAgICAgICAgICAgIHxcbiAqIHwgLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gKiB8IGBcImAgICAgICAgICAgICAgICB8IFUrMDAyMiAgICAgfCBkb3VibGUgcXVvdGUgICAgICAgICAgICAgICAgIHxcbiAqIHwgYFxcYCAgICAgICAgICAgICAgIHwgVSswMDVDICAgICB8IHJldmVyc2Ugc29saWR1cyAoYmFjayBzbGFzaCkgfFxuICogfCBgL2AgICAgICAgICAgICAgICB8IFUrMDAyRiAgICAgfCBzb2xpZHVzIChmb3J3YXJkIHNsYXNoKSAgICAgIHxcbiAqIHwgYGJgICAgICAgICAgICAgICAgfCBVKzAwMDggICAgIHwgYmFja3NwYWNlICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGBmYCAgICAgICAgICAgICAgIHwgVSswMDBDICAgICB8IGZvcm0gZmVlZCAgICAgICAgICAgICAgICAgICAgfFxuICogfCBgbmAgICAgICAgICAgICAgICB8IFUrMDAwQSAgICAgfCBsaW5lIGZlZWQgKG5ldyBsaW5lKSAgICAgICAgIHxcbiAqIHwgYHJgICAgICAgICAgICAgICAgfCBVKzAwMEQgICAgIHwgY2FycmlhZ2UgcmV0dXJuICAgICAgICAgICAgICB8XG4gKiB8IGB0YCAgICAgICAgICAgICAgIHwgVSswMDA5ICAgICB8IGhvcml6b250YWwgdGFiICAgICAgICAgICAgICAgfFxuICovXG5cbmZ1bmN0aW9uIHJlYWRFc2NhcGVkQ2hhcmFjdGVyKGxleGVyLCBwb3NpdGlvbikge1xuICBjb25zdCBib2R5ID0gbGV4ZXIuc291cmNlLmJvZHk7XG4gIGNvbnN0IGNvZGUgPSBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKTtcblxuICBzd2l0Y2ggKGNvZGUpIHtcbiAgICBjYXNlIDB4MDAyMjpcbiAgICAgIC8vIFwiXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogJ1xcdTAwMjInLFxuICAgICAgICBzaXplOiAyLFxuICAgICAgfTtcblxuICAgIGNhc2UgMHgwMDVjOlxuICAgICAgLy8gXFxcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiAnXFx1MDA1YycsXG4gICAgICAgIHNpemU6IDIsXG4gICAgICB9O1xuXG4gICAgY2FzZSAweDAwMmY6XG4gICAgICAvLyAvXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogJ1xcdTAwMmYnLFxuICAgICAgICBzaXplOiAyLFxuICAgICAgfTtcblxuICAgIGNhc2UgMHgwMDYyOlxuICAgICAgLy8gYlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6ICdcXHUwMDA4JyxcbiAgICAgICAgc2l6ZTogMixcbiAgICAgIH07XG5cbiAgICBjYXNlIDB4MDA2NjpcbiAgICAgIC8vIGZcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiAnXFx1MDAwYycsXG4gICAgICAgIHNpemU6IDIsXG4gICAgICB9O1xuXG4gICAgY2FzZSAweDAwNmU6XG4gICAgICAvLyBuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogJ1xcdTAwMGEnLFxuICAgICAgICBzaXplOiAyLFxuICAgICAgfTtcblxuICAgIGNhc2UgMHgwMDcyOlxuICAgICAgLy8gclxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6ICdcXHUwMDBkJyxcbiAgICAgICAgc2l6ZTogMixcbiAgICAgIH07XG5cbiAgICBjYXNlIDB4MDA3NDpcbiAgICAgIC8vIHRcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiAnXFx1MDAwOScsXG4gICAgICAgIHNpemU6IDIsXG4gICAgICB9O1xuICB9XG5cbiAgdGhyb3cgc3ludGF4RXJyb3IoXG4gICAgbGV4ZXIuc291cmNlLFxuICAgIHBvc2l0aW9uLFxuICAgIGBJbnZhbGlkIGNoYXJhY3RlciBlc2NhcGUgc2VxdWVuY2U6IFwiJHtib2R5LnNsaWNlKFxuICAgICAgcG9zaXRpb24sXG4gICAgICBwb3NpdGlvbiArIDIsXG4gICAgKX1cIi5gLFxuICApO1xufVxuLyoqXG4gKiBSZWFkcyBhIGJsb2NrIHN0cmluZyB0b2tlbiBmcm9tIHRoZSBzb3VyY2UgZmlsZS5cbiAqXG4gKiBgYGBcbiAqIFN0cmluZ1ZhbHVlIDo6XG4gKiAgIC0gYFwiXCJcImAgQmxvY2tTdHJpbmdDaGFyYWN0ZXIqIGBcIlwiXCJgXG4gKlxuICogQmxvY2tTdHJpbmdDaGFyYWN0ZXIgOjpcbiAqICAgLSBTb3VyY2VDaGFyYWN0ZXIgYnV0IG5vdCBgXCJcIlwiYCBvciBgXFxcIlwiXCJgXG4gKiAgIC0gYFxcXCJcIlwiYFxuICogYGBgXG4gKi9cblxuZnVuY3Rpb24gcmVhZEJsb2NrU3RyaW5nKGxleGVyLCBzdGFydCkge1xuICBjb25zdCBib2R5ID0gbGV4ZXIuc291cmNlLmJvZHk7XG4gIGNvbnN0IGJvZHlMZW5ndGggPSBib2R5Lmxlbmd0aDtcbiAgbGV0IGxpbmVTdGFydCA9IGxleGVyLmxpbmVTdGFydDtcbiAgbGV0IHBvc2l0aW9uID0gc3RhcnQgKyAzO1xuICBsZXQgY2h1bmtTdGFydCA9IHBvc2l0aW9uO1xuICBsZXQgY3VycmVudExpbmUgPSAnJztcbiAgY29uc3QgYmxvY2tMaW5lcyA9IFtdO1xuXG4gIHdoaWxlIChwb3NpdGlvbiA8IGJvZHlMZW5ndGgpIHtcbiAgICBjb25zdCBjb2RlID0gYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uKTsgLy8gQ2xvc2luZyBUcmlwbGUtUXVvdGUgKFwiXCJcIilcblxuICAgIGlmIChcbiAgICAgIGNvZGUgPT09IDB4MDAyMiAmJlxuICAgICAgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkgPT09IDB4MDAyMiAmJlxuICAgICAgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMikgPT09IDB4MDAyMlxuICAgICkge1xuICAgICAgY3VycmVudExpbmUgKz0gYm9keS5zbGljZShjaHVua1N0YXJ0LCBwb3NpdGlvbik7XG4gICAgICBibG9ja0xpbmVzLnB1c2goY3VycmVudExpbmUpO1xuICAgICAgY29uc3QgdG9rZW4gPSBjcmVhdGVUb2tlbihcbiAgICAgICAgbGV4ZXIsXG4gICAgICAgIFRva2VuS2luZC5CTE9DS19TVFJJTkcsXG4gICAgICAgIHN0YXJ0LFxuICAgICAgICBwb3NpdGlvbiArIDMsIC8vIFJldHVybiBhIHN0cmluZyBvZiB0aGUgbGluZXMgam9pbmVkIHdpdGggVSswMDBBLlxuICAgICAgICBkZWRlbnRCbG9ja1N0cmluZ0xpbmVzKGJsb2NrTGluZXMpLmpvaW4oJ1xcbicpLFxuICAgICAgKTtcbiAgICAgIGxleGVyLmxpbmUgKz0gYmxvY2tMaW5lcy5sZW5ndGggLSAxO1xuICAgICAgbGV4ZXIubGluZVN0YXJ0ID0gbGluZVN0YXJ0O1xuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0gLy8gRXNjYXBlZCBUcmlwbGUtUXVvdGUgKFxcXCJcIlwiKVxuXG4gICAgaWYgKFxuICAgICAgY29kZSA9PT0gMHgwMDVjICYmXG4gICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKSA9PT0gMHgwMDIyICYmXG4gICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAyKSA9PT0gMHgwMDIyICYmXG4gICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAzKSA9PT0gMHgwMDIyXG4gICAgKSB7XG4gICAgICBjdXJyZW50TGluZSArPSBib2R5LnNsaWNlKGNodW5rU3RhcnQsIHBvc2l0aW9uKTtcbiAgICAgIGNodW5rU3RhcnQgPSBwb3NpdGlvbiArIDE7IC8vIHNraXAgb25seSBzbGFzaFxuXG4gICAgICBwb3NpdGlvbiArPSA0O1xuICAgICAgY29udGludWU7XG4gICAgfSAvLyBMaW5lVGVybWluYXRvclxuXG4gICAgaWYgKGNvZGUgPT09IDB4MDAwYSB8fCBjb2RlID09PSAweDAwMGQpIHtcbiAgICAgIGN1cnJlbnRMaW5lICs9IGJvZHkuc2xpY2UoY2h1bmtTdGFydCwgcG9zaXRpb24pO1xuICAgICAgYmxvY2tMaW5lcy5wdXNoKGN1cnJlbnRMaW5lKTtcblxuICAgICAgaWYgKGNvZGUgPT09IDB4MDAwZCAmJiBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKSA9PT0gMHgwMDBhKSB7XG4gICAgICAgIHBvc2l0aW9uICs9IDI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICArK3Bvc2l0aW9uO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50TGluZSA9ICcnO1xuICAgICAgY2h1bmtTdGFydCA9IHBvc2l0aW9uO1xuICAgICAgbGluZVN0YXJ0ID0gcG9zaXRpb247XG4gICAgICBjb250aW51ZTtcbiAgICB9IC8vIFNvdXJjZUNoYXJhY3RlclxuXG4gICAgaWYgKGlzVW5pY29kZVNjYWxhclZhbHVlKGNvZGUpKSB7XG4gICAgICArK3Bvc2l0aW9uO1xuICAgIH0gZWxzZSBpZiAoaXNTdXBwbGVtZW50YXJ5Q29kZVBvaW50KGJvZHksIHBvc2l0aW9uKSkge1xuICAgICAgcG9zaXRpb24gKz0gMjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgc3ludGF4RXJyb3IoXG4gICAgICAgIGxleGVyLnNvdXJjZSxcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIGBJbnZhbGlkIGNoYXJhY3RlciB3aXRoaW4gU3RyaW5nOiAke3ByaW50Q29kZVBvaW50QXQoXG4gICAgICAgICAgbGV4ZXIsXG4gICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICl9LmAsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHRocm93IHN5bnRheEVycm9yKGxleGVyLnNvdXJjZSwgcG9zaXRpb24sICdVbnRlcm1pbmF0ZWQgc3RyaW5nLicpO1xufVxuLyoqXG4gKiBSZWFkcyBhbiBhbHBoYW51bWVyaWMgKyB1bmRlcnNjb3JlIG5hbWUgZnJvbSB0aGUgc291cmNlLlxuICpcbiAqIGBgYFxuICogTmFtZSA6OlxuICogICAtIE5hbWVTdGFydCBOYW1lQ29udGludWUqIFtsb29rYWhlYWQgIT0gTmFtZUNvbnRpbnVlXVxuICogYGBgXG4gKi9cblxuZnVuY3Rpb24gcmVhZE5hbWUobGV4ZXIsIHN0YXJ0KSB7XG4gIGNvbnN0IGJvZHkgPSBsZXhlci5zb3VyY2UuYm9keTtcbiAgY29uc3QgYm9keUxlbmd0aCA9IGJvZHkubGVuZ3RoO1xuICBsZXQgcG9zaXRpb24gPSBzdGFydCArIDE7XG5cbiAgd2hpbGUgKHBvc2l0aW9uIDwgYm9keUxlbmd0aCkge1xuICAgIGNvbnN0IGNvZGUgPSBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24pO1xuXG4gICAgaWYgKGlzTmFtZUNvbnRpbnVlKGNvZGUpKSB7XG4gICAgICArK3Bvc2l0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY3JlYXRlVG9rZW4oXG4gICAgbGV4ZXIsXG4gICAgVG9rZW5LaW5kLk5BTUUsXG4gICAgc3RhcnQsXG4gICAgcG9zaXRpb24sXG4gICAgYm9keS5zbGljZShzdGFydCwgcG9zaXRpb24pLFxuICApO1xufVxuIiwKICAgICJjb25zdCBNQVhfQVJSQVlfTEVOR1RIID0gMTA7XG5jb25zdCBNQVhfUkVDVVJTSVZFX0RFUFRIID0gMjtcbi8qKlxuICogVXNlZCB0byBwcmludCB2YWx1ZXMgaW4gZXJyb3IgbWVzc2FnZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGluc3BlY3QodmFsdWUpIHtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKHZhbHVlLCBbXSk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbHVlLCBzZWVuVmFsdWVzKSB7XG4gIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cbiAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICByZXR1cm4gdmFsdWUubmFtZSA/IGBbZnVuY3Rpb24gJHt2YWx1ZS5uYW1lfV1gIDogJ1tmdW5jdGlvbl0nO1xuXG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHJldHVybiBmb3JtYXRPYmplY3RWYWx1ZSh2YWx1ZSwgc2VlblZhbHVlcyk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0T2JqZWN0VmFsdWUodmFsdWUsIHByZXZpb3VzbHlTZWVuVmFsdWVzKSB7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnbnVsbCc7XG4gIH1cblxuICBpZiAocHJldmlvdXNseVNlZW5WYWx1ZXMuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcbiAgfVxuXG4gIGNvbnN0IHNlZW5WYWx1ZXMgPSBbLi4ucHJldmlvdXNseVNlZW5WYWx1ZXMsIHZhbHVlXTtcblxuICBpZiAoaXNKU09OYWJsZSh2YWx1ZSkpIHtcbiAgICBjb25zdCBqc29uVmFsdWUgPSB2YWx1ZS50b0pTT04oKTsgLy8gY2hlY2sgZm9yIGluZmluaXRlIHJlY3Vyc2lvblxuXG4gICAgaWYgKGpzb25WYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YganNvblZhbHVlID09PSAnc3RyaW5nJ1xuICAgICAgICA/IGpzb25WYWx1ZVxuICAgICAgICA6IGZvcm1hdFZhbHVlKGpzb25WYWx1ZSwgc2VlblZhbHVlcyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZvcm1hdEFycmF5KHZhbHVlLCBzZWVuVmFsdWVzKTtcbiAgfVxuXG4gIHJldHVybiBmb3JtYXRPYmplY3QodmFsdWUsIHNlZW5WYWx1ZXMpO1xufVxuXG5mdW5jdGlvbiBpc0pTT05hYmxlKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUudG9KU09OID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRPYmplY3Qob2JqZWN0LCBzZWVuVmFsdWVzKSB7XG4gIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhvYmplY3QpO1xuXG4gIGlmIChlbnRyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAne30nO1xuICB9XG5cbiAgaWYgKHNlZW5WYWx1ZXMubGVuZ3RoID4gTUFYX1JFQ1VSU0lWRV9ERVBUSCkge1xuICAgIHJldHVybiAnWycgKyBnZXRPYmplY3RUYWcob2JqZWN0KSArICddJztcbiAgfVxuXG4gIGNvbnN0IHByb3BlcnRpZXMgPSBlbnRyaWVzLm1hcChcbiAgICAoW2tleSwgdmFsdWVdKSA9PiBrZXkgKyAnOiAnICsgZm9ybWF0VmFsdWUodmFsdWUsIHNlZW5WYWx1ZXMpLFxuICApO1xuICByZXR1cm4gJ3sgJyArIHByb3BlcnRpZXMuam9pbignLCAnKSArICcgfSc7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGFycmF5LCBzZWVuVmFsdWVzKSB7XG4gIGlmIChhcnJheS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJ1tdJztcbiAgfVxuXG4gIGlmIChzZWVuVmFsdWVzLmxlbmd0aCA+IE1BWF9SRUNVUlNJVkVfREVQVEgpIHtcbiAgICByZXR1cm4gJ1tBcnJheV0nO1xuICB9XG5cbiAgY29uc3QgbGVuID0gTWF0aC5taW4oTUFYX0FSUkFZX0xFTkdUSCwgYXJyYXkubGVuZ3RoKTtcbiAgY29uc3QgcmVtYWluaW5nID0gYXJyYXkubGVuZ3RoIC0gbGVuO1xuICBjb25zdCBpdGVtcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpdGVtcy5wdXNoKGZvcm1hdFZhbHVlKGFycmF5W2ldLCBzZWVuVmFsdWVzKSk7XG4gIH1cblxuICBpZiAocmVtYWluaW5nID09PSAxKSB7XG4gICAgaXRlbXMucHVzaCgnLi4uIDEgbW9yZSBpdGVtJyk7XG4gIH0gZWxzZSBpZiAocmVtYWluaW5nID4gMSkge1xuICAgIGl0ZW1zLnB1c2goYC4uLiAke3JlbWFpbmluZ30gbW9yZSBpdGVtc2ApO1xuICB9XG5cbiAgcmV0dXJuICdbJyArIGl0ZW1zLmpvaW4oJywgJykgKyAnXSc7XG59XG5cbmZ1bmN0aW9uIGdldE9iamVjdFRhZyhvYmplY3QpIHtcbiAgY29uc3QgdGFnID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xuICAgIC5jYWxsKG9iamVjdClcbiAgICAucmVwbGFjZSgvXlxcW29iamVjdCAvLCAnJylcbiAgICAucmVwbGFjZSgvXSQvLCAnJyk7XG5cbiAgaWYgKHRhZyA9PT0gJ09iamVjdCcgJiYgdHlwZW9mIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnN0IG5hbWUgPSBvYmplY3QuY29uc3RydWN0b3IubmFtZTtcblxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgJiYgbmFtZSAhPT0gJycpIHtcbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YWc7XG59XG4iLAogICAgImltcG9ydCB7IGluc3BlY3QgfSBmcm9tICcuL2luc3BlY3QubWpzJztcbi8qIGM4IGlnbm9yZSBuZXh0IDMgKi9cblxuY29uc3QgaXNQcm9kdWN0aW9uID1cbiAgZ2xvYmFsVGhpcy5wcm9jZXNzICYmIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xuLyoqXG4gKiBBIHJlcGxhY2VtZW50IGZvciBpbnN0YW5jZW9mIHdoaWNoIGluY2x1ZGVzIGFuIGVycm9yIHdhcm5pbmcgd2hlbiBtdWx0aS1yZWFsbVxuICogY29uc3RydWN0b3JzIGFyZSBkZXRlY3RlZC5cbiAqIFNlZTogaHR0cHM6Ly9leHByZXNzanMuY29tL2VuL2FkdmFuY2VkL2Jlc3QtcHJhY3RpY2UtcGVyZm9ybWFuY2UuaHRtbCNzZXQtbm9kZV9lbnYtdG8tcHJvZHVjdGlvblxuICogU2VlOiBodHRwczovL3dlYnBhY2suanMub3JnL2d1aWRlcy9wcm9kdWN0aW9uL1xuICovXG5cbmV4cG9ydCBjb25zdCBpbnN0YW5jZU9mID1cbiAgLyogYzggaWdub3JlIG5leHQgNiAqL1xuICAvLyBGSVhNRTogaHR0cHM6Ly9naXRodWIuY29tL2dyYXBocWwvZ3JhcGhxbC1qcy9pc3N1ZXMvMjMxN1xuICBpc1Byb2R1Y3Rpb25cbiAgICA/IGZ1bmN0aW9uIGluc3RhbmNlT2YodmFsdWUsIGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yO1xuICAgICAgfVxuICAgIDogZnVuY3Rpb24gaW5zdGFuY2VPZih2YWx1ZSwgY29uc3RydWN0b3IpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgY29uc3RydWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgdmFyIF92YWx1ZSRjb25zdHJ1Y3RvcjtcblxuICAgICAgICAgIC8vIFByZWZlciBTeW1ib2wudG9TdHJpbmdUYWcgc2luY2UgaXQgaXMgaW1tdW5lIHRvIG1pbmlmaWNhdGlvbi5cbiAgICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBjb25zdHJ1Y3Rvci5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXTtcbiAgICAgICAgICBjb25zdCB2YWx1ZUNsYXNzTmFtZSA9IC8vIFdlIHN0aWxsIG5lZWQgdG8gc3VwcG9ydCBjb25zdHJ1Y3RvcidzIG5hbWUgdG8gZGV0ZWN0IGNvbmZsaWN0cyB3aXRoIG9sZGVyIHZlcnNpb25zIG9mIHRoaXMgbGlicmFyeS5cbiAgICAgICAgICAgIFN5bWJvbC50b1N0cmluZ1RhZyBpbiB2YWx1ZSAvLyBAdHMtZXhwZWN0LWVycm9yIFRTIGJ1ZyBzZWUsIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMzgwMDlcbiAgICAgICAgICAgICAgPyB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddXG4gICAgICAgICAgICAgIDogKF92YWx1ZSRjb25zdHJ1Y3RvciA9IHZhbHVlLmNvbnN0cnVjdG9yKSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIF92YWx1ZSRjb25zdHJ1Y3RvciA9PT0gdm9pZCAwXG4gICAgICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgICAgIDogX3ZhbHVlJGNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICAgICAgICBpZiAoY2xhc3NOYW1lID09PSB2YWx1ZUNsYXNzTmFtZSkge1xuICAgICAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRWYWx1ZSA9IGluc3BlY3QodmFsdWUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgdXNlICR7Y2xhc3NOYW1lfSBcIiR7c3RyaW5naWZpZWRWYWx1ZX1cIiBmcm9tIGFub3RoZXIgbW9kdWxlIG9yIHJlYWxtLlxuXG5FbnN1cmUgdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBpbnN0YW5jZSBvZiBcImdyYXBocWxcIiBpbiB0aGUgbm9kZV9tb2R1bGVzXG5kaXJlY3RvcnkuIElmIGRpZmZlcmVudCB2ZXJzaW9ucyBvZiBcImdyYXBocWxcIiBhcmUgdGhlIGRlcGVuZGVuY2llcyBvZiBvdGhlclxucmVsaWVkIG9uIG1vZHVsZXMsIHVzZSBcInJlc29sdXRpb25zXCIgdG8gZW5zdXJlIG9ubHkgb25lIHZlcnNpb24gaXMgaW5zdGFsbGVkLlxuXG5odHRwczovL3lhcm5wa2cuY29tL2VuL2RvY3Mvc2VsZWN0aXZlLXZlcnNpb24tcmVzb2x1dGlvbnNcblxuRHVwbGljYXRlIFwiZ3JhcGhxbFwiIG1vZHVsZXMgY2Fubm90IGJlIHVzZWQgYXQgdGhlIHNhbWUgdGltZSBzaW5jZSBkaWZmZXJlbnRcbnZlcnNpb25zIG1heSBoYXZlIGRpZmZlcmVudCBjYXBhYmlsaXRpZXMgYW5kIGJlaGF2aW9yLiBUaGUgZGF0YSBmcm9tIG9uZVxudmVyc2lvbiB1c2VkIGluIHRoZSBmdW5jdGlvbiBmcm9tIGFub3RoZXIgY291bGQgcHJvZHVjZSBjb25mdXNpbmcgYW5kXG5zcHVyaW91cyByZXN1bHRzLmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG4iLAogICAgImltcG9ydCB7IGRldkFzc2VydCB9IGZyb20gJy4uL2pzdXRpbHMvZGV2QXNzZXJ0Lm1qcyc7XG5pbXBvcnQgeyBpbnNwZWN0IH0gZnJvbSAnLi4vanN1dGlscy9pbnNwZWN0Lm1qcyc7XG5pbXBvcnQgeyBpbnN0YW5jZU9mIH0gZnJvbSAnLi4vanN1dGlscy9pbnN0YW5jZU9mLm1qcyc7XG5cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBzb3VyY2UgaW5wdXQgdG8gR3JhcGhRTC4gVGhlIGBuYW1lYCBhbmQgYGxvY2F0aW9uT2Zmc2V0YCBwYXJhbWV0ZXJzIGFyZVxuICogb3B0aW9uYWwsIGJ1dCB0aGV5IGFyZSB1c2VmdWwgZm9yIGNsaWVudHMgd2hvIHN0b3JlIEdyYXBoUUwgZG9jdW1lbnRzIGluIHNvdXJjZSBmaWxlcy5cbiAqIEZvciBleGFtcGxlLCBpZiB0aGUgR3JhcGhRTCBpbnB1dCBzdGFydHMgYXQgbGluZSA0MCBpbiBhIGZpbGUgbmFtZWQgYEZvby5ncmFwaHFsYCwgaXQgbWlnaHRcbiAqIGJlIHVzZWZ1bCBmb3IgYG5hbWVgIHRvIGJlIGBcIkZvby5ncmFwaHFsXCJgIGFuZCBsb2NhdGlvbiB0byBiZSBgeyBsaW5lOiA0MCwgY29sdW1uOiAxIH1gLlxuICogVGhlIGBsaW5lYCBhbmQgYGNvbHVtbmAgcHJvcGVydGllcyBpbiBgbG9jYXRpb25PZmZzZXRgIGFyZSAxLWluZGV4ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBTb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBib2R5LFxuICAgIG5hbWUgPSAnR3JhcGhRTCByZXF1ZXN0JyxcbiAgICBsb2NhdGlvbk9mZnNldCA9IHtcbiAgICAgIGxpbmU6IDEsXG4gICAgICBjb2x1bW46IDEsXG4gICAgfSxcbiAgKSB7XG4gICAgdHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnIHx8XG4gICAgICBkZXZBc3NlcnQoZmFsc2UsIGBCb2R5IG11c3QgYmUgYSBzdHJpbmcuIFJlY2VpdmVkOiAke2luc3BlY3QoYm9keSl9LmApO1xuICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxvY2F0aW9uT2Zmc2V0ID0gbG9jYXRpb25PZmZzZXQ7XG4gICAgdGhpcy5sb2NhdGlvbk9mZnNldC5saW5lID4gMCB8fFxuICAgICAgZGV2QXNzZXJ0KFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgJ2xpbmUgaW4gbG9jYXRpb25PZmZzZXQgaXMgMS1pbmRleGVkIGFuZCBtdXN0IGJlIHBvc2l0aXZlLicsXG4gICAgICApO1xuICAgIHRoaXMubG9jYXRpb25PZmZzZXQuY29sdW1uID4gMCB8fFxuICAgICAgZGV2QXNzZXJ0KFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgJ2NvbHVtbiBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuJyxcbiAgICAgICk7XG4gIH1cblxuICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG4gICAgcmV0dXJuICdTb3VyY2UnO1xuICB9XG59XG4vKipcbiAqIFRlc3QgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGEgU291cmNlIG9iamVjdC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNTb3VyY2Uoc291cmNlKSB7XG4gIHJldHVybiBpbnN0YW5jZU9mKHNvdXJjZSwgU291cmNlKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgc3ludGF4RXJyb3IgfSBmcm9tICcuLi9lcnJvci9zeW50YXhFcnJvci5tanMnO1xuaW1wb3J0IHsgTG9jYXRpb24sIE9wZXJhdGlvblR5cGVOb2RlIH0gZnJvbSAnLi9hc3QubWpzJztcbmltcG9ydCB7IERpcmVjdGl2ZUxvY2F0aW9uIH0gZnJvbSAnLi9kaXJlY3RpdmVMb2NhdGlvbi5tanMnO1xuaW1wb3J0IHsgS2luZCB9IGZyb20gJy4va2luZHMubWpzJztcbmltcG9ydCB7IGlzUHVuY3R1YXRvclRva2VuS2luZCwgTGV4ZXIgfSBmcm9tICcuL2xleGVyLm1qcyc7XG5pbXBvcnQgeyBpc1NvdXJjZSwgU291cmNlIH0gZnJvbSAnLi9zb3VyY2UubWpzJztcbmltcG9ydCB7IFRva2VuS2luZCB9IGZyb20gJy4vdG9rZW5LaW5kLm1qcyc7XG4vKipcbiAqIENvbmZpZ3VyYXRpb24gb3B0aW9ucyB0byBjb250cm9sIHBhcnNlciBiZWhhdmlvclxuICovXG5cbi8qKlxuICogR2l2ZW4gYSBHcmFwaFFMIHNvdXJjZSwgcGFyc2VzIGl0IGludG8gYSBEb2N1bWVudC5cbiAqIFRocm93cyBHcmFwaFFMRXJyb3IgaWYgYSBzeW50YXggZXJyb3IgaXMgZW5jb3VudGVyZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZShzb3VyY2UsIG9wdGlvbnMpIHtcbiAgY29uc3QgcGFyc2VyID0gbmV3IFBhcnNlcihzb3VyY2UsIG9wdGlvbnMpO1xuICBjb25zdCBkb2N1bWVudCA9IHBhcnNlci5wYXJzZURvY3VtZW50KCk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCwgJ3Rva2VuQ291bnQnLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWU6IHBhcnNlci50b2tlbkNvdW50LFxuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuLyoqXG4gKiBHaXZlbiBhIHN0cmluZyBjb250YWluaW5nIGEgR3JhcGhRTCB2YWx1ZSAoZXguIGBbNDJdYCksIHBhcnNlIHRoZSBBU1QgZm9yXG4gKiB0aGF0IHZhbHVlLlxuICogVGhyb3dzIEdyYXBoUUxFcnJvciBpZiBhIHN5bnRheCBlcnJvciBpcyBlbmNvdW50ZXJlZC5cbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCB3aXRoaW4gdG9vbHMgdGhhdCBvcGVyYXRlIHVwb24gR3JhcGhRTCBWYWx1ZXMgZGlyZWN0bHkgYW5kXG4gKiBpbiBpc29sYXRpb24gb2YgY29tcGxldGUgR3JhcGhRTCBkb2N1bWVudHMuXG4gKlxuICogQ29uc2lkZXIgcHJvdmlkaW5nIHRoZSByZXN1bHRzIHRvIHRoZSB1dGlsaXR5IGZ1bmN0aW9uOiB2YWx1ZUZyb21BU1QoKS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VWYWx1ZShzb3VyY2UsIG9wdGlvbnMpIHtcbiAgY29uc3QgcGFyc2VyID0gbmV3IFBhcnNlcihzb3VyY2UsIG9wdGlvbnMpO1xuICBwYXJzZXIuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLlNPRik7XG4gIGNvbnN0IHZhbHVlID0gcGFyc2VyLnBhcnNlVmFsdWVMaXRlcmFsKGZhbHNlKTtcbiAgcGFyc2VyLmV4cGVjdFRva2VuKFRva2VuS2luZC5FT0YpO1xuICByZXR1cm4gdmFsdWU7XG59XG4vKipcbiAqIFNpbWlsYXIgdG8gcGFyc2VWYWx1ZSgpLCBidXQgcmFpc2VzIGEgcGFyc2UgZXJyb3IgaWYgaXQgZW5jb3VudGVycyBhXG4gKiB2YXJpYWJsZS4gVGhlIHJldHVybiB0eXBlIHdpbGwgYmUgYSBjb25zdGFudCB2YWx1ZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDb25zdFZhbHVlKHNvdXJjZSwgb3B0aW9ucykge1xuICBjb25zdCBwYXJzZXIgPSBuZXcgUGFyc2VyKHNvdXJjZSwgb3B0aW9ucyk7XG4gIHBhcnNlci5leHBlY3RUb2tlbihUb2tlbktpbmQuU09GKTtcbiAgY29uc3QgdmFsdWUgPSBwYXJzZXIucGFyc2VDb25zdFZhbHVlTGl0ZXJhbCgpO1xuICBwYXJzZXIuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkVPRik7XG4gIHJldHVybiB2YWx1ZTtcbn1cbi8qKlxuICogR2l2ZW4gYSBzdHJpbmcgY29udGFpbmluZyBhIEdyYXBoUUwgVHlwZSAoZXguIGBbSW50IV1gKSwgcGFyc2UgdGhlIEFTVCBmb3JcbiAqIHRoYXQgdHlwZS5cbiAqIFRocm93cyBHcmFwaFFMRXJyb3IgaWYgYSBzeW50YXggZXJyb3IgaXMgZW5jb3VudGVyZWQuXG4gKlxuICogVGhpcyBpcyB1c2VmdWwgd2l0aGluIHRvb2xzIHRoYXQgb3BlcmF0ZSB1cG9uIEdyYXBoUUwgVHlwZXMgZGlyZWN0bHkgYW5kXG4gKiBpbiBpc29sYXRpb24gb2YgY29tcGxldGUgR3JhcGhRTCBkb2N1bWVudHMuXG4gKlxuICogQ29uc2lkZXIgcHJvdmlkaW5nIHRoZSByZXN1bHRzIHRvIHRoZSB1dGlsaXR5IGZ1bmN0aW9uOiB0eXBlRnJvbUFTVCgpLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR5cGUoc291cmNlLCBvcHRpb25zKSB7XG4gIGNvbnN0IHBhcnNlciA9IG5ldyBQYXJzZXIoc291cmNlLCBvcHRpb25zKTtcbiAgcGFyc2VyLmV4cGVjdFRva2VuKFRva2VuS2luZC5TT0YpO1xuICBjb25zdCB0eXBlID0gcGFyc2VyLnBhcnNlVHlwZVJlZmVyZW5jZSgpO1xuICBwYXJzZXIuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkVPRik7XG4gIHJldHVybiB0eXBlO1xufVxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGV4cG9ydGVkIG9ubHkgdG8gYXNzaXN0IHBlb3BsZSBpbiBpbXBsZW1lbnRpbmcgdGhlaXIgb3duIHBhcnNlcnNcbiAqIHdpdGhvdXQgZHVwbGljYXRpbmcgdG9vIG11Y2ggY29kZSBhbmQgc2hvdWxkIGJlIHVzZWQgb25seSBhcyBsYXN0IHJlc29ydCBmb3IgY2FzZXNcbiAqIHN1Y2ggYXMgZXhwZXJpbWVudGFsIHN5bnRheCBvciBpZiBjZXJ0YWluIGZlYXR1cmVzIGNvdWxkIG5vdCBiZSBjb250cmlidXRlZCB1cHN0cmVhbS5cbiAqXG4gKiBJdCBpcyBzdGlsbCBwYXJ0IG9mIHRoZSBpbnRlcm5hbCBBUEkgYW5kIGlzIHZlcnNpb25lZCwgc28gYW55IGNoYW5nZXMgdG8gaXQgYXJlIG5ldmVyXG4gKiBjb25zaWRlcmVkIGJyZWFraW5nIGNoYW5nZXMuIElmIHlvdSBzdGlsbCBuZWVkIHRvIHN1cHBvcnQgbXVsdGlwbGUgdmVyc2lvbnMgb2YgdGhlXG4gKiBsaWJyYXJ5LCBwbGVhc2UgdXNlIHRoZSBgdmVyc2lvbkluZm9gIHZhcmlhYmxlIGZvciB2ZXJzaW9uIGRldGVjdGlvbi5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5leHBvcnQgY2xhc3MgUGFyc2VyIHtcbiAgY29uc3RydWN0b3Ioc291cmNlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBzb3VyY2VPYmogPSBpc1NvdXJjZShzb3VyY2UpID8gc291cmNlIDogbmV3IFNvdXJjZShzb3VyY2UpO1xuICAgIHRoaXMuX2xleGVyID0gbmV3IExleGVyKHNvdXJjZU9iaik7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5fdG9rZW5Db3VudGVyID0gMDtcbiAgfVxuXG4gIGdldCB0b2tlbkNvdW50KCkge1xuICAgIHJldHVybiB0aGlzLl90b2tlbkNvdW50ZXI7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgbmFtZSBsZXggdG9rZW4gaW50byBhIG5hbWUgcGFyc2Ugbm9kZS5cbiAgICovXG5cbiAgcGFyc2VOYW1lKCkge1xuICAgIGNvbnN0IHRva2VuID0gdGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuTkFNRSk7XG4gICAgcmV0dXJuIHRoaXMubm9kZSh0b2tlbiwge1xuICAgICAga2luZDogS2luZC5OQU1FLFxuICAgICAgdmFsdWU6IHRva2VuLnZhbHVlLFxuICAgIH0pO1xuICB9IC8vIEltcGxlbWVudHMgdGhlIHBhcnNpbmcgcnVsZXMgaW4gdGhlIERvY3VtZW50IHNlY3Rpb24uXG5cbiAgLyoqXG4gICAqIERvY3VtZW50IDogRGVmaW5pdGlvbitcbiAgICovXG5cbiAgcGFyc2VEb2N1bWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLCB7XG4gICAgICBraW5kOiBLaW5kLkRPQ1VNRU5ULFxuICAgICAgZGVmaW5pdGlvbnM6IHRoaXMubWFueShcbiAgICAgICAgVG9rZW5LaW5kLlNPRixcbiAgICAgICAgdGhpcy5wYXJzZURlZmluaXRpb24sXG4gICAgICAgIFRva2VuS2luZC5FT0YsXG4gICAgICApLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBEZWZpbml0aW9uIDpcbiAgICogICAtIEV4ZWN1dGFibGVEZWZpbml0aW9uXG4gICAqICAgLSBUeXBlU3lzdGVtRGVmaW5pdGlvblxuICAgKiAgIC0gVHlwZVN5c3RlbUV4dGVuc2lvblxuICAgKlxuICAgKiBFeGVjdXRhYmxlRGVmaW5pdGlvbiA6XG4gICAqICAgLSBPcGVyYXRpb25EZWZpbml0aW9uXG4gICAqICAgLSBGcmFnbWVudERlZmluaXRpb25cbiAgICpcbiAgICogVHlwZVN5c3RlbURlZmluaXRpb24gOlxuICAgKiAgIC0gU2NoZW1hRGVmaW5pdGlvblxuICAgKiAgIC0gVHlwZURlZmluaXRpb25cbiAgICogICAtIERpcmVjdGl2ZURlZmluaXRpb25cbiAgICpcbiAgICogVHlwZURlZmluaXRpb24gOlxuICAgKiAgIC0gU2NhbGFyVHlwZURlZmluaXRpb25cbiAgICogICAtIE9iamVjdFR5cGVEZWZpbml0aW9uXG4gICAqICAgLSBJbnRlcmZhY2VUeXBlRGVmaW5pdGlvblxuICAgKiAgIC0gVW5pb25UeXBlRGVmaW5pdGlvblxuICAgKiAgIC0gRW51bVR5cGVEZWZpbml0aW9uXG4gICAqICAgLSBJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uXG4gICAqL1xuXG4gIHBhcnNlRGVmaW5pdGlvbigpIHtcbiAgICBpZiAodGhpcy5wZWVrKFRva2VuS2luZC5CUkFDRV9MKSkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCk7XG4gICAgfSAvLyBNYW55IGRlZmluaXRpb25zIGJlZ2luIHdpdGggYSBkZXNjcmlwdGlvbiBhbmQgcmVxdWlyZSBhIGxvb2thaGVhZC5cblxuICAgIGNvbnN0IGhhc0Rlc2NyaXB0aW9uID0gdGhpcy5wZWVrRGVzY3JpcHRpb24oKTtcbiAgICBjb25zdCBrZXl3b3JkVG9rZW4gPSBoYXNEZXNjcmlwdGlvblxuICAgICAgPyB0aGlzLl9sZXhlci5sb29rYWhlYWQoKVxuICAgICAgOiB0aGlzLl9sZXhlci50b2tlbjtcblxuICAgIGlmIChrZXl3b3JkVG9rZW4ua2luZCA9PT0gVG9rZW5LaW5kLk5BTUUpIHtcbiAgICAgIHN3aXRjaCAoa2V5d29yZFRva2VuLnZhbHVlKSB7XG4gICAgICAgIGNhc2UgJ3NjaGVtYSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTY2hlbWFEZWZpbml0aW9uKCk7XG5cbiAgICAgICAgY2FzZSAnc2NhbGFyJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCk7XG5cbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VPYmplY3RUeXBlRGVmaW5pdGlvbigpO1xuXG4gICAgICAgIGNhc2UgJ2ludGVyZmFjZSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbigpO1xuXG4gICAgICAgIGNhc2UgJ3VuaW9uJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVVuaW9uVHlwZURlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdlbnVtJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUVudW1UeXBlRGVmaW5pdGlvbigpO1xuXG4gICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdkaXJlY3RpdmUnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlRGlyZWN0aXZlRGVmaW5pdGlvbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFzRGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhyb3cgc3ludGF4RXJyb3IoXG4gICAgICAgICAgdGhpcy5fbGV4ZXIuc291cmNlLFxuICAgICAgICAgIHRoaXMuX2xleGVyLnRva2VuLnN0YXJ0LFxuICAgICAgICAgICdVbmV4cGVjdGVkIGRlc2NyaXB0aW9uLCBkZXNjcmlwdGlvbnMgYXJlIHN1cHBvcnRlZCBvbmx5IG9uIHR5cGUgZGVmaW5pdGlvbnMuJyxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChrZXl3b3JkVG9rZW4udmFsdWUpIHtcbiAgICAgICAgY2FzZSAncXVlcnknOlxuICAgICAgICBjYXNlICdtdXRhdGlvbic6XG4gICAgICAgIGNhc2UgJ3N1YnNjcmlwdGlvbic6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCk7XG5cbiAgICAgICAgY2FzZSAnZnJhZ21lbnQnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlRnJhZ21lbnREZWZpbml0aW9uKCk7XG5cbiAgICAgICAgY2FzZSAnZXh0ZW5kJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVR5cGVTeXN0ZW1FeHRlbnNpb24oKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoa2V5d29yZFRva2VuKTtcbiAgfSAvLyBJbXBsZW1lbnRzIHRoZSBwYXJzaW5nIHJ1bGVzIGluIHRoZSBPcGVyYXRpb25zIHNlY3Rpb24uXG5cbiAgLyoqXG4gICAqIE9wZXJhdGlvbkRlZmluaXRpb24gOlxuICAgKiAgLSBTZWxlY3Rpb25TZXRcbiAgICogIC0gT3BlcmF0aW9uVHlwZSBOYW1lPyBWYXJpYWJsZURlZmluaXRpb25zPyBEaXJlY3RpdmVzPyBTZWxlY3Rpb25TZXRcbiAgICovXG5cbiAgcGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG5cbiAgICBpZiAodGhpcy5wZWVrKFRva2VuS2luZC5CUkFDRV9MKSkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAgICBraW5kOiBLaW5kLk9QRVJBVElPTl9ERUZJTklUSU9OLFxuICAgICAgICBvcGVyYXRpb246IE9wZXJhdGlvblR5cGVOb2RlLlFVRVJZLFxuICAgICAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgICAgIHZhcmlhYmxlRGVmaW5pdGlvbnM6IFtdLFxuICAgICAgICBkaXJlY3RpdmVzOiBbXSxcbiAgICAgICAgc2VsZWN0aW9uU2V0OiB0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBvcGVyYXRpb24gPSB0aGlzLnBhcnNlT3BlcmF0aW9uVHlwZSgpO1xuICAgIGxldCBuYW1lO1xuXG4gICAgaWYgKHRoaXMucGVlayhUb2tlbktpbmQuTkFNRSkpIHtcbiAgICAgIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuT1BFUkFUSU9OX0RFRklOSVRJT04sXG4gICAgICBvcGVyYXRpb24sXG4gICAgICBuYW1lLFxuICAgICAgdmFyaWFibGVEZWZpbml0aW9uczogdGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSxcbiAgICAgIGRpcmVjdGl2ZXM6IHRoaXMucGFyc2VEaXJlY3RpdmVzKGZhbHNlKSxcbiAgICAgIHNlbGVjdGlvblNldDogdGhpcy5wYXJzZVNlbGVjdGlvblNldCgpLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBPcGVyYXRpb25UeXBlIDogb25lIG9mIHF1ZXJ5IG11dGF0aW9uIHN1YnNjcmlwdGlvblxuICAgKi9cblxuICBwYXJzZU9wZXJhdGlvblR5cGUoKSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uVG9rZW4gPSB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5OQU1FKTtcblxuICAgIHN3aXRjaCAob3BlcmF0aW9uVG9rZW4udmFsdWUpIHtcbiAgICAgIGNhc2UgJ3F1ZXJ5JzpcbiAgICAgICAgcmV0dXJuIE9wZXJhdGlvblR5cGVOb2RlLlFVRVJZO1xuXG4gICAgICBjYXNlICdtdXRhdGlvbic6XG4gICAgICAgIHJldHVybiBPcGVyYXRpb25UeXBlTm9kZS5NVVRBVElPTjtcblxuICAgICAgY2FzZSAnc3Vic2NyaXB0aW9uJzpcbiAgICAgICAgcmV0dXJuIE9wZXJhdGlvblR5cGVOb2RlLlNVQlNDUklQVElPTjtcbiAgICB9XG5cbiAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQob3BlcmF0aW9uVG9rZW4pO1xuICB9XG4gIC8qKlxuICAgKiBWYXJpYWJsZURlZmluaXRpb25zIDogKCBWYXJpYWJsZURlZmluaXRpb24rIClcbiAgICovXG5cbiAgcGFyc2VWYXJpYWJsZURlZmluaXRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsTWFueShcbiAgICAgIFRva2VuS2luZC5QQVJFTl9MLFxuICAgICAgdGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbixcbiAgICAgIFRva2VuS2luZC5QQVJFTl9SLFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFZhcmlhYmxlRGVmaW5pdGlvbiA6IFZhcmlhYmxlIDogVHlwZSBEZWZhdWx0VmFsdWU/IERpcmVjdGl2ZXNbQ29uc3RdP1xuICAgKi9cblxuICBwYXJzZVZhcmlhYmxlRGVmaW5pdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLCB7XG4gICAgICBraW5kOiBLaW5kLlZBUklBQkxFX0RFRklOSVRJT04sXG4gICAgICB2YXJpYWJsZTogdGhpcy5wYXJzZVZhcmlhYmxlKCksXG4gICAgICB0eXBlOiAodGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuQ09MT04pLCB0aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpKSxcbiAgICAgIGRlZmF1bHRWYWx1ZTogdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKFRva2VuS2luZC5FUVVBTFMpXG4gICAgICAgID8gdGhpcy5wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKClcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFZhcmlhYmxlIDogJCBOYW1lXG4gICAqL1xuXG4gIHBhcnNlVmFyaWFibGUoKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5ET0xMQVIpO1xuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuVkFSSUFCTEUsXG4gICAgICBuYW1lOiB0aGlzLnBhcnNlTmFtZSgpLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBgYGBcbiAgICogU2VsZWN0aW9uU2V0IDogeyBTZWxlY3Rpb24rIH1cbiAgICogYGBgXG4gICAqL1xuXG4gIHBhcnNlU2VsZWN0aW9uU2V0KCkge1xuICAgIHJldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4sIHtcbiAgICAgIGtpbmQ6IEtpbmQuU0VMRUNUSU9OX1NFVCxcbiAgICAgIHNlbGVjdGlvbnM6IHRoaXMubWFueShcbiAgICAgICAgVG9rZW5LaW5kLkJSQUNFX0wsXG4gICAgICAgIHRoaXMucGFyc2VTZWxlY3Rpb24sXG4gICAgICAgIFRva2VuS2luZC5CUkFDRV9SLFxuICAgICAgKSxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogU2VsZWN0aW9uIDpcbiAgICogICAtIEZpZWxkXG4gICAqICAgLSBGcmFnbWVudFNwcmVhZFxuICAgKiAgIC0gSW5saW5lRnJhZ21lbnRcbiAgICovXG5cbiAgcGFyc2VTZWxlY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucGVlayhUb2tlbktpbmQuU1BSRUFEKVxuICAgICAgPyB0aGlzLnBhcnNlRnJhZ21lbnQoKVxuICAgICAgOiB0aGlzLnBhcnNlRmllbGQoKTtcbiAgfVxuICAvKipcbiAgICogRmllbGQgOiBBbGlhcz8gTmFtZSBBcmd1bWVudHM/IERpcmVjdGl2ZXM/IFNlbGVjdGlvblNldD9cbiAgICpcbiAgICogQWxpYXMgOiBOYW1lIDpcbiAgICovXG5cbiAgcGFyc2VGaWVsZCgpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IG5hbWVPckFsaWFzID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICBsZXQgYWxpYXM7XG4gICAgbGV0IG5hbWU7XG5cbiAgICBpZiAodGhpcy5leHBlY3RPcHRpb25hbFRva2VuKFRva2VuS2luZC5DT0xPTikpIHtcbiAgICAgIGFsaWFzID0gbmFtZU9yQWxpYXM7XG4gICAgICBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmFtZSA9IG5hbWVPckFsaWFzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuRklFTEQsXG4gICAgICBhbGlhcyxcbiAgICAgIG5hbWUsXG4gICAgICBhcmd1bWVudHM6IHRoaXMucGFyc2VBcmd1bWVudHMoZmFsc2UpLFxuICAgICAgZGlyZWN0aXZlczogdGhpcy5wYXJzZURpcmVjdGl2ZXMoZmFsc2UpLFxuICAgICAgc2VsZWN0aW9uU2V0OiB0aGlzLnBlZWsoVG9rZW5LaW5kLkJSQUNFX0wpXG4gICAgICAgID8gdGhpcy5wYXJzZVNlbGVjdGlvblNldCgpXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBBcmd1bWVudHNbQ29uc3RdIDogKCBBcmd1bWVudFs/Q29uc3RdKyApXG4gICAqL1xuXG4gIHBhcnNlQXJndW1lbnRzKGlzQ29uc3QpIHtcbiAgICBjb25zdCBpdGVtID0gaXNDb25zdCA/IHRoaXMucGFyc2VDb25zdEFyZ3VtZW50IDogdGhpcy5wYXJzZUFyZ3VtZW50O1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsTWFueShUb2tlbktpbmQuUEFSRU5fTCwgaXRlbSwgVG9rZW5LaW5kLlBBUkVOX1IpO1xuICB9XG4gIC8qKlxuICAgKiBBcmd1bWVudFtDb25zdF0gOiBOYW1lIDogVmFsdWVbP0NvbnN0XVxuICAgKi9cblxuICBwYXJzZUFyZ3VtZW50KGlzQ29uc3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgdGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuQ09MT04pO1xuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuQVJHVU1FTlQsXG4gICAgICBuYW1lLFxuICAgICAgdmFsdWU6IHRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoaXNDb25zdCksXG4gICAgfSk7XG4gIH1cblxuICBwYXJzZUNvbnN0QXJndW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2VBcmd1bWVudCh0cnVlKTtcbiAgfSAvLyBJbXBsZW1lbnRzIHRoZSBwYXJzaW5nIHJ1bGVzIGluIHRoZSBGcmFnbWVudHMgc2VjdGlvbi5cblxuICAvKipcbiAgICogQ29ycmVzcG9uZHMgdG8gYm90aCBGcmFnbWVudFNwcmVhZCBhbmQgSW5saW5lRnJhZ21lbnQgaW4gdGhlIHNwZWMuXG4gICAqXG4gICAqIEZyYWdtZW50U3ByZWFkIDogLi4uIEZyYWdtZW50TmFtZSBEaXJlY3RpdmVzP1xuICAgKlxuICAgKiBJbmxpbmVGcmFnbWVudCA6IC4uLiBUeXBlQ29uZGl0aW9uPyBEaXJlY3RpdmVzPyBTZWxlY3Rpb25TZXRcbiAgICovXG5cbiAgcGFyc2VGcmFnbWVudCgpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLlNQUkVBRCk7XG4gICAgY29uc3QgaGFzVHlwZUNvbmRpdGlvbiA9IHRoaXMuZXhwZWN0T3B0aW9uYWxLZXl3b3JkKCdvbicpO1xuXG4gICAgaWYgKCFoYXNUeXBlQ29uZGl0aW9uICYmIHRoaXMucGVlayhUb2tlbktpbmQuTkFNRSkpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgICAga2luZDogS2luZC5GUkFHTUVOVF9TUFJFQUQsXG4gICAgICAgIG5hbWU6IHRoaXMucGFyc2VGcmFnbWVudE5hbWUoKSxcbiAgICAgICAgZGlyZWN0aXZlczogdGhpcy5wYXJzZURpcmVjdGl2ZXMoZmFsc2UpLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5JTkxJTkVfRlJBR01FTlQsXG4gICAgICB0eXBlQ29uZGl0aW9uOiBoYXNUeXBlQ29uZGl0aW9uID8gdGhpcy5wYXJzZU5hbWVkVHlwZSgpIDogdW5kZWZpbmVkLFxuICAgICAgZGlyZWN0aXZlczogdGhpcy5wYXJzZURpcmVjdGl2ZXMoZmFsc2UpLFxuICAgICAgc2VsZWN0aW9uU2V0OiB0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCksXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEZyYWdtZW50RGVmaW5pdGlvbiA6XG4gICAqICAgLSBmcmFnbWVudCBGcmFnbWVudE5hbWUgb24gVHlwZUNvbmRpdGlvbiBEaXJlY3RpdmVzPyBTZWxlY3Rpb25TZXRcbiAgICpcbiAgICogVHlwZUNvbmRpdGlvbiA6IE5hbWVkVHlwZVxuICAgKi9cblxuICBwYXJzZUZyYWdtZW50RGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZnJhZ21lbnQnKTsgLy8gTGVnYWN5IHN1cHBvcnQgZm9yIGRlZmluaW5nIHZhcmlhYmxlcyB3aXRoaW4gZnJhZ21lbnRzIGNoYW5nZXNcbiAgICAvLyB0aGUgZ3JhbW1hciBvZiBGcmFnbWVudERlZmluaXRpb246XG4gICAgLy8gICAtIGZyYWdtZW50IEZyYWdtZW50TmFtZSBWYXJpYWJsZURlZmluaXRpb25zPyBvbiBUeXBlQ29uZGl0aW9uIERpcmVjdGl2ZXM/IFNlbGVjdGlvblNldFxuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMuYWxsb3dMZWdhY3lGcmFnbWVudFZhcmlhYmxlcyA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAgICBraW5kOiBLaW5kLkZSQUdNRU5UX0RFRklOSVRJT04sXG4gICAgICAgIG5hbWU6IHRoaXMucGFyc2VGcmFnbWVudE5hbWUoKSxcbiAgICAgICAgdmFyaWFibGVEZWZpbml0aW9uczogdGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSxcbiAgICAgICAgdHlwZUNvbmRpdGlvbjogKHRoaXMuZXhwZWN0S2V5d29yZCgnb24nKSwgdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxcbiAgICAgICAgZGlyZWN0aXZlczogdGhpcy5wYXJzZURpcmVjdGl2ZXMoZmFsc2UpLFxuICAgICAgICBzZWxlY3Rpb25TZXQ6IHRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuRlJBR01FTlRfREVGSU5JVElPTixcbiAgICAgIG5hbWU6IHRoaXMucGFyc2VGcmFnbWVudE5hbWUoKSxcbiAgICAgIHR5cGVDb25kaXRpb246ICh0aGlzLmV4cGVjdEtleXdvcmQoJ29uJyksIHRoaXMucGFyc2VOYW1lZFR5cGUoKSksXG4gICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlRGlyZWN0aXZlcyhmYWxzZSksXG4gICAgICBzZWxlY3Rpb25TZXQ6IHRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKSxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRnJhZ21lbnROYW1lIDogTmFtZSBidXQgbm90IGBvbmBcbiAgICovXG5cbiAgcGFyc2VGcmFnbWVudE5hbWUoKSB7XG4gICAgaWYgKHRoaXMuX2xleGVyLnRva2VuLnZhbHVlID09PSAnb24nKSB7XG4gICAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXJzZU5hbWUoKTtcbiAgfSAvLyBJbXBsZW1lbnRzIHRoZSBwYXJzaW5nIHJ1bGVzIGluIHRoZSBWYWx1ZXMgc2VjdGlvbi5cblxuICAvKipcbiAgICogVmFsdWVbQ29uc3RdIDpcbiAgICogICAtIFt+Q29uc3RdIFZhcmlhYmxlXG4gICAqICAgLSBJbnRWYWx1ZVxuICAgKiAgIC0gRmxvYXRWYWx1ZVxuICAgKiAgIC0gU3RyaW5nVmFsdWVcbiAgICogICAtIEJvb2xlYW5WYWx1ZVxuICAgKiAgIC0gTnVsbFZhbHVlXG4gICAqICAgLSBFbnVtVmFsdWVcbiAgICogICAtIExpc3RWYWx1ZVs/Q29uc3RdXG4gICAqICAgLSBPYmplY3RWYWx1ZVs/Q29uc3RdXG4gICAqXG4gICAqIEJvb2xlYW5WYWx1ZSA6IG9uZSBvZiBgdHJ1ZWAgYGZhbHNlYFxuICAgKlxuICAgKiBOdWxsVmFsdWUgOiBgbnVsbGBcbiAgICpcbiAgICogRW51bVZhbHVlIDogTmFtZSBidXQgbm90IGB0cnVlYCwgYGZhbHNlYCBvciBgbnVsbGBcbiAgICovXG5cbiAgcGFyc2VWYWx1ZUxpdGVyYWwoaXNDb25zdCkge1xuICAgIGNvbnN0IHRva2VuID0gdGhpcy5fbGV4ZXIudG9rZW47XG5cbiAgICBzd2l0Y2ggKHRva2VuLmtpbmQpIHtcbiAgICAgIGNhc2UgVG9rZW5LaW5kLkJSQUNLRVRfTDpcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VMaXN0KGlzQ29uc3QpO1xuXG4gICAgICBjYXNlIFRva2VuS2luZC5CUkFDRV9MOlxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU9iamVjdChpc0NvbnN0KTtcblxuICAgICAgY2FzZSBUb2tlbktpbmQuSU5UOlxuICAgICAgICB0aGlzLmFkdmFuY2VMZXhlcigpO1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlKHRva2VuLCB7XG4gICAgICAgICAga2luZDogS2luZC5JTlQsXG4gICAgICAgICAgdmFsdWU6IHRva2VuLnZhbHVlLFxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBUb2tlbktpbmQuRkxPQVQ6XG4gICAgICAgIHRoaXMuYWR2YW5jZUxleGVyKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGUodG9rZW4sIHtcbiAgICAgICAgICBraW5kOiBLaW5kLkZMT0FULFxuICAgICAgICAgIHZhbHVlOiB0b2tlbi52YWx1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgVG9rZW5LaW5kLlNUUklORzpcbiAgICAgIGNhc2UgVG9rZW5LaW5kLkJMT0NLX1NUUklORzpcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTdHJpbmdMaXRlcmFsKCk7XG5cbiAgICAgIGNhc2UgVG9rZW5LaW5kLk5BTUU6XG4gICAgICAgIHRoaXMuYWR2YW5jZUxleGVyKCk7XG5cbiAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkge1xuICAgICAgICAgIGNhc2UgJ3RydWUnOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZSh0b2tlbiwge1xuICAgICAgICAgICAgICBraW5kOiBLaW5kLkJPT0xFQU4sXG4gICAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlICdmYWxzZSc6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlKHRva2VuLCB7XG4gICAgICAgICAgICAgIGtpbmQ6IEtpbmQuQk9PTEVBTixcbiAgICAgICAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlICdudWxsJzpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGUodG9rZW4sIHtcbiAgICAgICAgICAgICAga2luZDogS2luZC5OVUxMLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZSh0b2tlbiwge1xuICAgICAgICAgICAgICBraW5kOiBLaW5kLkVOVU0sXG4gICAgICAgICAgICAgIHZhbHVlOiB0b2tlbi52YWx1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgVG9rZW5LaW5kLkRPTExBUjpcbiAgICAgICAgaWYgKGlzQ29uc3QpIHtcbiAgICAgICAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5ET0xMQVIpO1xuXG4gICAgICAgICAgaWYgKHRoaXMuX2xleGVyLnRva2VuLmtpbmQgPT09IFRva2VuS2luZC5OQU1FKSB7XG4gICAgICAgICAgICBjb25zdCB2YXJOYW1lID0gdGhpcy5fbGV4ZXIudG9rZW4udmFsdWU7XG4gICAgICAgICAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgICAgICAgICAgdGhpcy5fbGV4ZXIuc291cmNlLFxuICAgICAgICAgICAgICB0b2tlbi5zdGFydCxcbiAgICAgICAgICAgICAgYFVuZXhwZWN0ZWQgdmFyaWFibGUgXCIkJHt2YXJOYW1lfVwiIGluIGNvbnN0YW50IHZhbHVlLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQodG9rZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlVmFyaWFibGUoKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7XG4gICAgfVxuICB9XG5cbiAgcGFyc2VDb25zdFZhbHVlTGl0ZXJhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCh0cnVlKTtcbiAgfVxuXG4gIHBhcnNlU3RyaW5nTGl0ZXJhbCgpIHtcbiAgICBjb25zdCB0b2tlbiA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuYWR2YW5jZUxleGVyKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZSh0b2tlbiwge1xuICAgICAga2luZDogS2luZC5TVFJJTkcsXG4gICAgICB2YWx1ZTogdG9rZW4udmFsdWUsXG4gICAgICBibG9jazogdG9rZW4ua2luZCA9PT0gVG9rZW5LaW5kLkJMT0NLX1NUUklORyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogTGlzdFZhbHVlW0NvbnN0XSA6XG4gICAqICAgLSBbIF1cbiAgICogICAtIFsgVmFsdWVbP0NvbnN0XSsgXVxuICAgKi9cblxuICBwYXJzZUxpc3QoaXNDb25zdCkge1xuICAgIGNvbnN0IGl0ZW0gPSAoKSA9PiB0aGlzLnBhcnNlVmFsdWVMaXRlcmFsKGlzQ29uc3QpO1xuXG4gICAgcmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbiwge1xuICAgICAga2luZDogS2luZC5MSVNULFxuICAgICAgdmFsdWVzOiB0aGlzLmFueShUb2tlbktpbmQuQlJBQ0tFVF9MLCBpdGVtLCBUb2tlbktpbmQuQlJBQ0tFVF9SKSxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogYGBgXG4gICAqIE9iamVjdFZhbHVlW0NvbnN0XSA6XG4gICAqICAgLSB7IH1cbiAgICogICAtIHsgT2JqZWN0RmllbGRbP0NvbnN0XSsgfVxuICAgKiBgYGBcbiAgICovXG5cbiAgcGFyc2VPYmplY3QoaXNDb25zdCkge1xuICAgIGNvbnN0IGl0ZW0gPSAoKSA9PiB0aGlzLnBhcnNlT2JqZWN0RmllbGQoaXNDb25zdCk7XG5cbiAgICByZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLCB7XG4gICAgICBraW5kOiBLaW5kLk9CSkVDVCxcbiAgICAgIGZpZWxkczogdGhpcy5hbnkoVG9rZW5LaW5kLkJSQUNFX0wsIGl0ZW0sIFRva2VuS2luZC5CUkFDRV9SKSxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogT2JqZWN0RmllbGRbQ29uc3RdIDogTmFtZSA6IFZhbHVlWz9Db25zdF1cbiAgICovXG5cbiAgcGFyc2VPYmplY3RGaWVsZChpc0NvbnN0KSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5DT0xPTik7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5PQkpFQ1RfRklFTEQsXG4gICAgICBuYW1lLFxuICAgICAgdmFsdWU6IHRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoaXNDb25zdCksXG4gICAgfSk7XG4gIH0gLy8gSW1wbGVtZW50cyB0aGUgcGFyc2luZyBydWxlcyBpbiB0aGUgRGlyZWN0aXZlcyBzZWN0aW9uLlxuXG4gIC8qKlxuICAgKiBEaXJlY3RpdmVzW0NvbnN0XSA6IERpcmVjdGl2ZVs/Q29uc3RdK1xuICAgKi9cblxuICBwYXJzZURpcmVjdGl2ZXMoaXNDb25zdCkge1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSBbXTtcblxuICAgIHdoaWxlICh0aGlzLnBlZWsoVG9rZW5LaW5kLkFUKSkge1xuICAgICAgZGlyZWN0aXZlcy5wdXNoKHRoaXMucGFyc2VEaXJlY3RpdmUoaXNDb25zdCkpO1xuICAgIH1cblxuICAgIHJldHVybiBkaXJlY3RpdmVzO1xuICB9XG5cbiAgcGFyc2VDb25zdERpcmVjdGl2ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2VEaXJlY3RpdmVzKHRydWUpO1xuICB9XG4gIC8qKlxuICAgKiBgYGBcbiAgICogRGlyZWN0aXZlW0NvbnN0XSA6IEAgTmFtZSBBcmd1bWVudHNbP0NvbnN0XT9cbiAgICogYGBgXG4gICAqL1xuXG4gIHBhcnNlRGlyZWN0aXZlKGlzQ29uc3QpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkFUKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLkRJUkVDVElWRSxcbiAgICAgIG5hbWU6IHRoaXMucGFyc2VOYW1lKCksXG4gICAgICBhcmd1bWVudHM6IHRoaXMucGFyc2VBcmd1bWVudHMoaXNDb25zdCksXG4gICAgfSk7XG4gIH0gLy8gSW1wbGVtZW50cyB0aGUgcGFyc2luZyBydWxlcyBpbiB0aGUgVHlwZXMgc2VjdGlvbi5cblxuICAvKipcbiAgICogVHlwZSA6XG4gICAqICAgLSBOYW1lZFR5cGVcbiAgICogICAtIExpc3RUeXBlXG4gICAqICAgLSBOb25OdWxsVHlwZVxuICAgKi9cblxuICBwYXJzZVR5cGVSZWZlcmVuY2UoKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBsZXQgdHlwZTtcblxuICAgIGlmICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkJSQUNLRVRfTCkpIHtcbiAgICAgIGNvbnN0IGlubmVyVHlwZSA9IHRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7XG4gICAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5CUkFDS0VUX1IpO1xuICAgICAgdHlwZSA9IHRoaXMubm9kZShzdGFydCwge1xuICAgICAgICBraW5kOiBLaW5kLkxJU1RfVFlQRSxcbiAgICAgICAgdHlwZTogaW5uZXJUeXBlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGUgPSB0aGlzLnBhcnNlTmFtZWRUeXBlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihUb2tlbktpbmQuQkFORykpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgICAga2luZDogS2luZC5OT05fTlVMTF9UWVBFLFxuICAgICAgICB0eXBlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cbiAgLyoqXG4gICAqIE5hbWVkVHlwZSA6IE5hbWVcbiAgICovXG5cbiAgcGFyc2VOYW1lZFR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbiwge1xuICAgICAga2luZDogS2luZC5OQU1FRF9UWVBFLFxuICAgICAgbmFtZTogdGhpcy5wYXJzZU5hbWUoKSxcbiAgICB9KTtcbiAgfSAvLyBJbXBsZW1lbnRzIHRoZSBwYXJzaW5nIHJ1bGVzIGluIHRoZSBUeXBlIERlZmluaXRpb24gc2VjdGlvbi5cblxuICBwZWVrRGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucGVlayhUb2tlbktpbmQuU1RSSU5HKSB8fCB0aGlzLnBlZWsoVG9rZW5LaW5kLkJMT0NLX1NUUklORyk7XG4gIH1cbiAgLyoqXG4gICAqIERlc2NyaXB0aW9uIDogU3RyaW5nVmFsdWVcbiAgICovXG5cbiAgcGFyc2VEZXNjcmlwdGlvbigpIHtcbiAgICBpZiAodGhpcy5wZWVrRGVzY3JpcHRpb24oKSkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyc2VTdHJpbmdMaXRlcmFsKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBgYGBcbiAgICogU2NoZW1hRGVmaW5pdGlvbiA6IERlc2NyaXB0aW9uPyBzY2hlbWEgRGlyZWN0aXZlc1tDb25zdF0/IHsgT3BlcmF0aW9uVHlwZURlZmluaXRpb24rIH1cbiAgICogYGBgXG4gICAqL1xuXG4gIHBhcnNlU2NoZW1hRGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdzY2hlbWEnKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIGNvbnN0IG9wZXJhdGlvblR5cGVzID0gdGhpcy5tYW55KFxuICAgICAgVG9rZW5LaW5kLkJSQUNFX0wsXG4gICAgICB0aGlzLnBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24sXG4gICAgICBUb2tlbktpbmQuQlJBQ0VfUixcbiAgICApO1xuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuU0NIRU1BX0RFRklOSVRJT04sXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICBvcGVyYXRpb25UeXBlcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogT3BlcmF0aW9uVHlwZURlZmluaXRpb24gOiBPcGVyYXRpb25UeXBlIDogTmFtZWRUeXBlXG4gICAqL1xuXG4gIHBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBvcGVyYXRpb24gPSB0aGlzLnBhcnNlT3BlcmF0aW9uVHlwZSgpO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkNPTE9OKTtcbiAgICBjb25zdCB0eXBlID0gdGhpcy5wYXJzZU5hbWVkVHlwZSgpO1xuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTixcbiAgICAgIG9wZXJhdGlvbixcbiAgICAgIHR5cGUsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxhclR5cGVEZWZpbml0aW9uIDogRGVzY3JpcHRpb24/IHNjYWxhciBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdP1xuICAgKi9cblxuICBwYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ3NjYWxhcicpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5TQ0FMQVJfVFlQRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogT2JqZWN0VHlwZURlZmluaXRpb24gOlxuICAgKiAgIERlc2NyaXB0aW9uP1xuICAgKiAgIHR5cGUgTmFtZSBJbXBsZW1lbnRzSW50ZXJmYWNlcz8gRGlyZWN0aXZlc1tDb25zdF0/IEZpZWxkc0RlZmluaXRpb24/XG4gICAqL1xuXG4gIHBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgndHlwZScpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGludGVyZmFjZXMgPSB0aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5PQkpFQ1RfVFlQRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgaW50ZXJmYWNlcyxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICBmaWVsZHMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEltcGxlbWVudHNJbnRlcmZhY2VzIDpcbiAgICogICAtIGltcGxlbWVudHMgYCZgPyBOYW1lZFR5cGVcbiAgICogICAtIEltcGxlbWVudHNJbnRlcmZhY2VzICYgTmFtZWRUeXBlXG4gICAqL1xuXG4gIHBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXhwZWN0T3B0aW9uYWxLZXl3b3JkKCdpbXBsZW1lbnRzJylcbiAgICAgID8gdGhpcy5kZWxpbWl0ZWRNYW55KFRva2VuS2luZC5BTVAsIHRoaXMucGFyc2VOYW1lZFR5cGUpXG4gICAgICA6IFtdO1xuICB9XG4gIC8qKlxuICAgKiBgYGBcbiAgICogRmllbGRzRGVmaW5pdGlvbiA6IHsgRmllbGREZWZpbml0aW9uKyB9XG4gICAqIGBgYFxuICAgKi9cblxuICBwYXJzZUZpZWxkc0RlZmluaXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KFxuICAgICAgVG9rZW5LaW5kLkJSQUNFX0wsXG4gICAgICB0aGlzLnBhcnNlRmllbGREZWZpbml0aW9uLFxuICAgICAgVG9rZW5LaW5kLkJSQUNFX1IsXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogRmllbGREZWZpbml0aW9uIDpcbiAgICogICAtIERlc2NyaXB0aW9uPyBOYW1lIEFyZ3VtZW50c0RlZmluaXRpb24/IDogVHlwZSBEaXJlY3RpdmVzW0NvbnN0XT9cbiAgICovXG5cbiAgcGFyc2VGaWVsZERlZmluaXRpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnBhcnNlQXJndW1lbnREZWZzKCk7XG4gICAgdGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuQ09MT04pO1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5GSUVMRF9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgYXJndW1lbnRzOiBhcmdzLFxuICAgICAgdHlwZSxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEFyZ3VtZW50c0RlZmluaXRpb24gOiAoIElucHV0VmFsdWVEZWZpbml0aW9uKyApXG4gICAqL1xuXG4gIHBhcnNlQXJndW1lbnREZWZzKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsTWFueShcbiAgICAgIFRva2VuS2luZC5QQVJFTl9MLFxuICAgICAgdGhpcy5wYXJzZUlucHV0VmFsdWVEZWYsXG4gICAgICBUb2tlbktpbmQuUEFSRU5fUixcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBJbnB1dFZhbHVlRGVmaW5pdGlvbiA6XG4gICAqICAgLSBEZXNjcmlwdGlvbj8gTmFtZSA6IFR5cGUgRGVmYXVsdFZhbHVlPyBEaXJlY3RpdmVzW0NvbnN0XT9cbiAgICovXG5cbiAgcGFyc2VJbnB1dFZhbHVlRGVmKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5DT0xPTik7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7XG4gICAgbGV0IGRlZmF1bHRWYWx1ZTtcblxuICAgIGlmICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkVRVUFMUykpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHRoaXMucGFyc2VDb25zdFZhbHVlTGl0ZXJhbCgpO1xuICAgIH1cblxuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5JTlBVVF9WQUxVRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgdHlwZSxcbiAgICAgIGRlZmF1bHRWYWx1ZSxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEludGVyZmFjZVR5cGVEZWZpbml0aW9uIDpcbiAgICogICAtIERlc2NyaXB0aW9uPyBpbnRlcmZhY2UgTmFtZSBEaXJlY3RpdmVzW0NvbnN0XT8gRmllbGRzRGVmaW5pdGlvbj9cbiAgICovXG5cbiAgcGFyc2VJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdpbnRlcmZhY2UnKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICBjb25zdCBpbnRlcmZhY2VzID0gdGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCk7XG4gICAgY29uc3QgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtcbiAgICBjb25zdCBmaWVsZHMgPSB0aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO1xuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuSU5URVJGQUNFX1RZUEVfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgbmFtZSxcbiAgICAgIGludGVyZmFjZXMsXG4gICAgICBkaXJlY3RpdmVzLFxuICAgICAgZmllbGRzLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBVbmlvblR5cGVEZWZpbml0aW9uIDpcbiAgICogICAtIERlc2NyaXB0aW9uPyB1bmlvbiBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdPyBVbmlvbk1lbWJlclR5cGVzP1xuICAgKi9cblxuICBwYXJzZVVuaW9uVHlwZURlZmluaXRpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgndW5pb24nKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIGNvbnN0IHR5cGVzID0gdGhpcy5wYXJzZVVuaW9uTWVtYmVyVHlwZXMoKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLlVOSU9OX1RZUEVfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgbmFtZSxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICB0eXBlcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogVW5pb25NZW1iZXJUeXBlcyA6XG4gICAqICAgLSA9IGB8YD8gTmFtZWRUeXBlXG4gICAqICAgLSBVbmlvbk1lbWJlclR5cGVzIHwgTmFtZWRUeXBlXG4gICAqL1xuXG4gIHBhcnNlVW5pb25NZW1iZXJUeXBlcygpIHtcbiAgICByZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKFRva2VuS2luZC5FUVVBTFMpXG4gICAgICA/IHRoaXMuZGVsaW1pdGVkTWFueShUb2tlbktpbmQuUElQRSwgdGhpcy5wYXJzZU5hbWVkVHlwZSlcbiAgICAgIDogW107XG4gIH1cbiAgLyoqXG4gICAqIEVudW1UeXBlRGVmaW5pdGlvbiA6XG4gICAqICAgLSBEZXNjcmlwdGlvbj8gZW51bSBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdPyBFbnVtVmFsdWVzRGVmaW5pdGlvbj9cbiAgICovXG5cbiAgcGFyc2VFbnVtVHlwZURlZmluaXRpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZW51bScpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5FTlVNX1RZUEVfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgbmFtZSxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICB2YWx1ZXMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIGBgYFxuICAgKiBFbnVtVmFsdWVzRGVmaW5pdGlvbiA6IHsgRW51bVZhbHVlRGVmaW5pdGlvbisgfVxuICAgKiBgYGBcbiAgICovXG5cbiAgcGFyc2VFbnVtVmFsdWVzRGVmaW5pdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoXG4gICAgICBUb2tlbktpbmQuQlJBQ0VfTCxcbiAgICAgIHRoaXMucGFyc2VFbnVtVmFsdWVEZWZpbml0aW9uLFxuICAgICAgVG9rZW5LaW5kLkJSQUNFX1IsXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogRW51bVZhbHVlRGVmaW5pdGlvbiA6IERlc2NyaXB0aW9uPyBFbnVtVmFsdWUgRGlyZWN0aXZlc1tDb25zdF0/XG4gICAqL1xuXG4gIHBhcnNlRW51bVZhbHVlRGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VFbnVtVmFsdWVOYW1lKCk7XG4gICAgY29uc3QgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLkVOVU1fVkFMVUVfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgbmFtZSxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEVudW1WYWx1ZSA6IE5hbWUgYnV0IG5vdCBgdHJ1ZWAsIGBmYWxzZWAgb3IgYG51bGxgXG4gICAqL1xuXG4gIHBhcnNlRW51bVZhbHVlTmFtZSgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLl9sZXhlci50b2tlbi52YWx1ZSA9PT0gJ3RydWUnIHx8XG4gICAgICB0aGlzLl9sZXhlci50b2tlbi52YWx1ZSA9PT0gJ2ZhbHNlJyB8fFxuICAgICAgdGhpcy5fbGV4ZXIudG9rZW4udmFsdWUgPT09ICdudWxsJ1xuICAgICkge1xuICAgICAgdGhyb3cgc3ludGF4RXJyb3IoXG4gICAgICAgIHRoaXMuX2xleGVyLnNvdXJjZSxcbiAgICAgICAgdGhpcy5fbGV4ZXIudG9rZW4uc3RhcnQsXG4gICAgICAgIGAke2dldFRva2VuRGVzYyhcbiAgICAgICAgICB0aGlzLl9sZXhlci50b2tlbixcbiAgICAgICAgKX0gaXMgcmVzZXJ2ZWQgYW5kIGNhbm5vdCBiZSB1c2VkIGZvciBhbiBlbnVtIHZhbHVlLmAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnBhcnNlTmFtZSgpO1xuICB9XG4gIC8qKlxuICAgKiBJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uIDpcbiAgICogICAtIERlc2NyaXB0aW9uPyBpbnB1dCBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdPyBJbnB1dEZpZWxkc0RlZmluaXRpb24/XG4gICAqL1xuXG4gIHBhcnNlSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdpbnB1dCcpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3QgZmllbGRzID0gdGhpcy5wYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpO1xuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuSU5QVVRfT0JKRUNUX1RZUEVfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgbmFtZSxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICBmaWVsZHMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIGBgYFxuICAgKiBJbnB1dEZpZWxkc0RlZmluaXRpb24gOiB7IElucHV0VmFsdWVEZWZpbml0aW9uKyB9XG4gICAqIGBgYFxuICAgKi9cblxuICBwYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoXG4gICAgICBUb2tlbktpbmQuQlJBQ0VfTCxcbiAgICAgIHRoaXMucGFyc2VJbnB1dFZhbHVlRGVmLFxuICAgICAgVG9rZW5LaW5kLkJSQUNFX1IsXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogVHlwZVN5c3RlbUV4dGVuc2lvbiA6XG4gICAqICAgLSBTY2hlbWFFeHRlbnNpb25cbiAgICogICAtIFR5cGVFeHRlbnNpb25cbiAgICpcbiAgICogVHlwZUV4dGVuc2lvbiA6XG4gICAqICAgLSBTY2FsYXJUeXBlRXh0ZW5zaW9uXG4gICAqICAgLSBPYmplY3RUeXBlRXh0ZW5zaW9uXG4gICAqICAgLSBJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uXG4gICAqICAgLSBVbmlvblR5cGVFeHRlbnNpb25cbiAgICogICAtIEVudW1UeXBlRXh0ZW5zaW9uXG4gICAqICAgLSBJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uXG4gICAqL1xuXG4gIHBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpIHtcbiAgICBjb25zdCBrZXl3b3JkVG9rZW4gPSB0aGlzLl9sZXhlci5sb29rYWhlYWQoKTtcblxuICAgIGlmIChrZXl3b3JkVG9rZW4ua2luZCA9PT0gVG9rZW5LaW5kLk5BTUUpIHtcbiAgICAgIHN3aXRjaCAoa2V5d29yZFRva2VuLnZhbHVlKSB7XG4gICAgICAgIGNhc2UgJ3NjaGVtYSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTY2hlbWFFeHRlbnNpb24oKTtcblxuICAgICAgICBjYXNlICdzY2FsYXInOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlU2NhbGFyVHlwZUV4dGVuc2lvbigpO1xuXG4gICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlT2JqZWN0VHlwZUV4dGVuc2lvbigpO1xuXG4gICAgICAgIGNhc2UgJ2ludGVyZmFjZSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgY2FzZSAndW5pb24nOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlVW5pb25UeXBlRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgY2FzZSAnZW51bSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFbnVtVHlwZUV4dGVuc2lvbigpO1xuXG4gICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IHRoaXMudW5leHBlY3RlZChrZXl3b3JkVG9rZW4pO1xuICB9XG4gIC8qKlxuICAgKiBgYGBcbiAgICogU2NoZW1hRXh0ZW5zaW9uIDpcbiAgICogIC0gZXh0ZW5kIHNjaGVtYSBEaXJlY3RpdmVzW0NvbnN0XT8geyBPcGVyYXRpb25UeXBlRGVmaW5pdGlvbisgfVxuICAgKiAgLSBleHRlbmQgc2NoZW1hIERpcmVjdGl2ZXNbQ29uc3RdXG4gICAqIGBgYFxuICAgKi9cblxuICBwYXJzZVNjaGVtYUV4dGVuc2lvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdzY2hlbWEnKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIGNvbnN0IG9wZXJhdGlvblR5cGVzID0gdGhpcy5vcHRpb25hbE1hbnkoXG4gICAgICBUb2tlbktpbmQuQlJBQ0VfTCxcbiAgICAgIHRoaXMucGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbixcbiAgICAgIFRva2VuS2luZC5CUkFDRV9SLFxuICAgICk7XG5cbiAgICBpZiAoZGlyZWN0aXZlcy5sZW5ndGggPT09IDAgJiYgb3BlcmF0aW9uVHlwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLlNDSEVNQV9FWFRFTlNJT04sXG4gICAgICBkaXJlY3RpdmVzLFxuICAgICAgb3BlcmF0aW9uVHlwZXMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxhclR5cGVFeHRlbnNpb24gOlxuICAgKiAgIC0gZXh0ZW5kIHNjYWxhciBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdXG4gICAqL1xuXG4gIHBhcnNlU2NhbGFyVHlwZUV4dGVuc2lvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdzY2FsYXInKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuXG4gICAgaWYgKGRpcmVjdGl2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLlNDQUxBUl9UWVBFX0VYVEVOU0lPTixcbiAgICAgIG5hbWUsXG4gICAgICBkaXJlY3RpdmVzLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBPYmplY3RUeXBlRXh0ZW5zaW9uIDpcbiAgICogIC0gZXh0ZW5kIHR5cGUgTmFtZSBJbXBsZW1lbnRzSW50ZXJmYWNlcz8gRGlyZWN0aXZlc1tDb25zdF0/IEZpZWxkc0RlZmluaXRpb25cbiAgICogIC0gZXh0ZW5kIHR5cGUgTmFtZSBJbXBsZW1lbnRzSW50ZXJmYWNlcz8gRGlyZWN0aXZlc1tDb25zdF1cbiAgICogIC0gZXh0ZW5kIHR5cGUgTmFtZSBJbXBsZW1lbnRzSW50ZXJmYWNlc1xuICAgKi9cblxuICBwYXJzZU9iamVjdFR5cGVFeHRlbnNpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2V4dGVuZCcpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgndHlwZScpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGludGVyZmFjZXMgPSB0aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7XG5cbiAgICBpZiAoXG4gICAgICBpbnRlcmZhY2VzLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgZGlyZWN0aXZlcy5sZW5ndGggPT09IDAgJiZcbiAgICAgIGZpZWxkcy5sZW5ndGggPT09IDBcbiAgICApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuT0JKRUNUX1RZUEVfRVhURU5TSU9OLFxuICAgICAgbmFtZSxcbiAgICAgIGludGVyZmFjZXMsXG4gICAgICBkaXJlY3RpdmVzLFxuICAgICAgZmllbGRzLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uIDpcbiAgICogIC0gZXh0ZW5kIGludGVyZmFjZSBOYW1lIEltcGxlbWVudHNJbnRlcmZhY2VzPyBEaXJlY3RpdmVzW0NvbnN0XT8gRmllbGRzRGVmaW5pdGlvblxuICAgKiAgLSBleHRlbmQgaW50ZXJmYWNlIE5hbWUgSW1wbGVtZW50c0ludGVyZmFjZXM/IERpcmVjdGl2ZXNbQ29uc3RdXG4gICAqICAtIGV4dGVuZCBpbnRlcmZhY2UgTmFtZSBJbXBsZW1lbnRzSW50ZXJmYWNlc1xuICAgKi9cblxuICBwYXJzZUludGVyZmFjZVR5cGVFeHRlbnNpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2V4dGVuZCcpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnaW50ZXJmYWNlJyk7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgY29uc3QgaW50ZXJmYWNlcyA9IHRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3QgZmllbGRzID0gdGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtcblxuICAgIGlmIChcbiAgICAgIGludGVyZmFjZXMubGVuZ3RoID09PSAwICYmXG4gICAgICBkaXJlY3RpdmVzLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgZmllbGRzLmxlbmd0aCA9PT0gMFxuICAgICkge1xuICAgICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5JTlRFUkZBQ0VfVFlQRV9FWFRFTlNJT04sXG4gICAgICBuYW1lLFxuICAgICAgaW50ZXJmYWNlcyxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICBmaWVsZHMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFVuaW9uVHlwZUV4dGVuc2lvbiA6XG4gICAqICAgLSBleHRlbmQgdW5pb24gTmFtZSBEaXJlY3RpdmVzW0NvbnN0XT8gVW5pb25NZW1iZXJUeXBlc1xuICAgKiAgIC0gZXh0ZW5kIHVuaW9uIE5hbWUgRGlyZWN0aXZlc1tDb25zdF1cbiAgICovXG5cbiAgcGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2V4dGVuZCcpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgndW5pb24nKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIGNvbnN0IHR5cGVzID0gdGhpcy5wYXJzZVVuaW9uTWVtYmVyVHlwZXMoKTtcblxuICAgIGlmIChkaXJlY3RpdmVzLmxlbmd0aCA9PT0gMCAmJiB0eXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuVU5JT05fVFlQRV9FWFRFTlNJT04sXG4gICAgICBuYW1lLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICAgIHR5cGVzLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBFbnVtVHlwZUV4dGVuc2lvbiA6XG4gICAqICAgLSBleHRlbmQgZW51bSBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdPyBFbnVtVmFsdWVzRGVmaW5pdGlvblxuICAgKiAgIC0gZXh0ZW5kIGVudW0gTmFtZSBEaXJlY3RpdmVzW0NvbnN0XVxuICAgKi9cblxuICBwYXJzZUVudW1UeXBlRXh0ZW5zaW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdleHRlbmQnKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2VudW0nKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMucGFyc2VFbnVtVmFsdWVzRGVmaW5pdGlvbigpO1xuXG4gICAgaWYgKGRpcmVjdGl2ZXMubGVuZ3RoID09PSAwICYmIHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuRU5VTV9UWVBFX0VYVEVOU0lPTixcbiAgICAgIG5hbWUsXG4gICAgICBkaXJlY3RpdmVzLFxuICAgICAgdmFsdWVzLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24gOlxuICAgKiAgIC0gZXh0ZW5kIGlucHV0IE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/IElucHV0RmllbGRzRGVmaW5pdGlvblxuICAgKiAgIC0gZXh0ZW5kIGlucHV0IE5hbWUgRGlyZWN0aXZlc1tDb25zdF1cbiAgICovXG5cbiAgcGFyc2VJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2V4dGVuZCcpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnaW5wdXQnKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKTtcblxuICAgIGlmIChkaXJlY3RpdmVzLmxlbmd0aCA9PT0gMCAmJiBmaWVsZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTixcbiAgICAgIG5hbWUsXG4gICAgICBkaXJlY3RpdmVzLFxuICAgICAgZmllbGRzLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBgYGBcbiAgICogRGlyZWN0aXZlRGVmaW5pdGlvbiA6XG4gICAqICAgLSBEZXNjcmlwdGlvbj8gZGlyZWN0aXZlIEAgTmFtZSBBcmd1bWVudHNEZWZpbml0aW9uPyBgcmVwZWF0YWJsZWA/IG9uIERpcmVjdGl2ZUxvY2F0aW9uc1xuICAgKiBgYGBcbiAgICovXG5cbiAgcGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2RpcmVjdGl2ZScpO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkFUKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICBjb25zdCBhcmdzID0gdGhpcy5wYXJzZUFyZ3VtZW50RGVmcygpO1xuICAgIGNvbnN0IHJlcGVhdGFibGUgPSB0aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgncmVwZWF0YWJsZScpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnb24nKTtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb25zKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5ESVJFQ1RJVkVfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgbmFtZSxcbiAgICAgIGFyZ3VtZW50czogYXJncyxcbiAgICAgIHJlcGVhdGFibGUsXG4gICAgICBsb2NhdGlvbnMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIERpcmVjdGl2ZUxvY2F0aW9ucyA6XG4gICAqICAgLSBgfGA/IERpcmVjdGl2ZUxvY2F0aW9uXG4gICAqICAgLSBEaXJlY3RpdmVMb2NhdGlvbnMgfCBEaXJlY3RpdmVMb2NhdGlvblxuICAgKi9cblxuICBwYXJzZURpcmVjdGl2ZUxvY2F0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxpbWl0ZWRNYW55KFRva2VuS2luZC5QSVBFLCB0aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb24pO1xuICB9XG4gIC8qXG4gICAqIERpcmVjdGl2ZUxvY2F0aW9uIDpcbiAgICogICAtIEV4ZWN1dGFibGVEaXJlY3RpdmVMb2NhdGlvblxuICAgKiAgIC0gVHlwZVN5c3RlbURpcmVjdGl2ZUxvY2F0aW9uXG4gICAqXG4gICAqIEV4ZWN1dGFibGVEaXJlY3RpdmVMb2NhdGlvbiA6IG9uZSBvZlxuICAgKiAgIGBRVUVSWWBcbiAgICogICBgTVVUQVRJT05gXG4gICAqICAgYFNVQlNDUklQVElPTmBcbiAgICogICBgRklFTERgXG4gICAqICAgYEZSQUdNRU5UX0RFRklOSVRJT05gXG4gICAqICAgYEZSQUdNRU5UX1NQUkVBRGBcbiAgICogICBgSU5MSU5FX0ZSQUdNRU5UYFxuICAgKlxuICAgKiBUeXBlU3lzdGVtRGlyZWN0aXZlTG9jYXRpb24gOiBvbmUgb2ZcbiAgICogICBgU0NIRU1BYFxuICAgKiAgIGBTQ0FMQVJgXG4gICAqICAgYE9CSkVDVGBcbiAgICogICBgRklFTERfREVGSU5JVElPTmBcbiAgICogICBgQVJHVU1FTlRfREVGSU5JVElPTmBcbiAgICogICBgSU5URVJGQUNFYFxuICAgKiAgIGBVTklPTmBcbiAgICogICBgRU5VTWBcbiAgICogICBgRU5VTV9WQUxVRWBcbiAgICogICBgSU5QVVRfT0JKRUNUYFxuICAgKiAgIGBJTlBVVF9GSUVMRF9ERUZJTklUSU9OYFxuICAgKi9cblxuICBwYXJzZURpcmVjdGl2ZUxvY2F0aW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKERpcmVjdGl2ZUxvY2F0aW9uLCBuYW1lLnZhbHVlKSkge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuXG4gICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKHN0YXJ0KTtcbiAgfSAvLyBDb3JlIHBhcnNpbmcgdXRpbGl0eSBmdW5jdGlvbnNcblxuICAvKipcbiAgICogUmV0dXJucyBhIG5vZGUgdGhhdCwgaWYgY29uZmlndXJlZCB0byBkbyBzbywgc2V0cyBhIFwibG9jXCIgZmllbGQgYXMgYVxuICAgKiBsb2NhdGlvbiBvYmplY3QsIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHBsYWNlIGluIHRoZSBzb3VyY2UgdGhhdCBjcmVhdGVkIGFcbiAgICogZ2l2ZW4gcGFyc2VkIG9iamVjdC5cbiAgICovXG5cbiAgbm9kZShzdGFydFRva2VuLCBub2RlKSB7XG4gICAgaWYgKHRoaXMuX29wdGlvbnMubm9Mb2NhdGlvbiAhPT0gdHJ1ZSkge1xuICAgICAgbm9kZS5sb2MgPSBuZXcgTG9jYXRpb24oXG4gICAgICAgIHN0YXJ0VG9rZW4sXG4gICAgICAgIHRoaXMuX2xleGVyLmxhc3RUb2tlbixcbiAgICAgICAgdGhpcy5fbGV4ZXIuc291cmNlLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgbmV4dCB0b2tlbiBpcyBvZiBhIGdpdmVuIGtpbmRcbiAgICovXG5cbiAgcGVlayhraW5kKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xleGVyLnRva2VuLmtpbmQgPT09IGtpbmQ7XG4gIH1cbiAgLyoqXG4gICAqIElmIHRoZSBuZXh0IHRva2VuIGlzIG9mIHRoZSBnaXZlbiBraW5kLCByZXR1cm4gdGhhdCB0b2tlbiBhZnRlciBhZHZhbmNpbmcgdGhlIGxleGVyLlxuICAgKiBPdGhlcndpc2UsIGRvIG5vdCBjaGFuZ2UgdGhlIHBhcnNlciBzdGF0ZSBhbmQgdGhyb3cgYW4gZXJyb3IuXG4gICAqL1xuXG4gIGV4cGVjdFRva2VuKGtpbmQpIHtcbiAgICBjb25zdCB0b2tlbiA9IHRoaXMuX2xleGVyLnRva2VuO1xuXG4gICAgaWYgKHRva2VuLmtpbmQgPT09IGtpbmQpIHtcbiAgICAgIHRoaXMuYWR2YW5jZUxleGVyKCk7XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfVxuXG4gICAgdGhyb3cgc3ludGF4RXJyb3IoXG4gICAgICB0aGlzLl9sZXhlci5zb3VyY2UsXG4gICAgICB0b2tlbi5zdGFydCxcbiAgICAgIGBFeHBlY3RlZCAke2dldFRva2VuS2luZERlc2Moa2luZCl9LCBmb3VuZCAke2dldFRva2VuRGVzYyh0b2tlbil9LmAsXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogSWYgdGhlIG5leHQgdG9rZW4gaXMgb2YgdGhlIGdpdmVuIGtpbmQsIHJldHVybiBcInRydWVcIiBhZnRlciBhZHZhbmNpbmcgdGhlIGxleGVyLlxuICAgKiBPdGhlcndpc2UsIGRvIG5vdCBjaGFuZ2UgdGhlIHBhcnNlciBzdGF0ZSBhbmQgcmV0dXJuIFwiZmFsc2VcIi5cbiAgICovXG5cbiAgZXhwZWN0T3B0aW9uYWxUb2tlbihraW5kKSB7XG4gICAgY29uc3QgdG9rZW4gPSB0aGlzLl9sZXhlci50b2tlbjtcblxuICAgIGlmICh0b2tlbi5raW5kID09PSBraW5kKSB7XG4gICAgICB0aGlzLmFkdmFuY2VMZXhlcigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBJZiB0aGUgbmV4dCB0b2tlbiBpcyBhIGdpdmVuIGtleXdvcmQsIGFkdmFuY2UgdGhlIGxleGVyLlxuICAgKiBPdGhlcndpc2UsIGRvIG5vdCBjaGFuZ2UgdGhlIHBhcnNlciBzdGF0ZSBhbmQgdGhyb3cgYW4gZXJyb3IuXG4gICAqL1xuXG4gIGV4cGVjdEtleXdvcmQodmFsdWUpIHtcbiAgICBjb25zdCB0b2tlbiA9IHRoaXMuX2xleGVyLnRva2VuO1xuXG4gICAgaWYgKHRva2VuLmtpbmQgPT09IFRva2VuS2luZC5OQU1FICYmIHRva2VuLnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgdGhpcy5hZHZhbmNlTGV4ZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgc3ludGF4RXJyb3IoXG4gICAgICAgIHRoaXMuX2xleGVyLnNvdXJjZSxcbiAgICAgICAgdG9rZW4uc3RhcnQsXG4gICAgICAgIGBFeHBlY3RlZCBcIiR7dmFsdWV9XCIsIGZvdW5kICR7Z2V0VG9rZW5EZXNjKHRva2VuKX0uYCxcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBJZiB0aGUgbmV4dCB0b2tlbiBpcyBhIGdpdmVuIGtleXdvcmQsIHJldHVybiBcInRydWVcIiBhZnRlciBhZHZhbmNpbmcgdGhlIGxleGVyLlxuICAgKiBPdGhlcndpc2UsIGRvIG5vdCBjaGFuZ2UgdGhlIHBhcnNlciBzdGF0ZSBhbmQgcmV0dXJuIFwiZmFsc2VcIi5cbiAgICovXG5cbiAgZXhwZWN0T3B0aW9uYWxLZXl3b3JkKHZhbHVlKSB7XG4gICAgY29uc3QgdG9rZW4gPSB0aGlzLl9sZXhlci50b2tlbjtcblxuICAgIGlmICh0b2tlbi5raW5kID09PSBUb2tlbktpbmQuTkFNRSAmJiB0b2tlbi52YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuYWR2YW5jZUxleGVyKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYW4gZXJyb3Igd2hlbiBhbiB1bmV4cGVjdGVkIGxleGVkIHRva2VuIGlzIGVuY291bnRlcmVkLlxuICAgKi9cblxuICB1bmV4cGVjdGVkKGF0VG9rZW4pIHtcbiAgICBjb25zdCB0b2tlbiA9XG4gICAgICBhdFRva2VuICE9PSBudWxsICYmIGF0VG9rZW4gIT09IHZvaWQgMCA/IGF0VG9rZW4gOiB0aGlzLl9sZXhlci50b2tlbjtcbiAgICByZXR1cm4gc3ludGF4RXJyb3IoXG4gICAgICB0aGlzLl9sZXhlci5zb3VyY2UsXG4gICAgICB0b2tlbi5zdGFydCxcbiAgICAgIGBVbmV4cGVjdGVkICR7Z2V0VG9rZW5EZXNjKHRva2VuKX0uYCxcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcG9zc2libHkgZW1wdHkgbGlzdCBvZiBwYXJzZSBub2RlcywgZGV0ZXJtaW5lZCBieSB0aGUgcGFyc2VGbi5cbiAgICogVGhpcyBsaXN0IGJlZ2lucyB3aXRoIGEgbGV4IHRva2VuIG9mIG9wZW5LaW5kIGFuZCBlbmRzIHdpdGggYSBsZXggdG9rZW4gb2YgY2xvc2VLaW5kLlxuICAgKiBBZHZhbmNlcyB0aGUgcGFyc2VyIHRvIHRoZSBuZXh0IGxleCB0b2tlbiBhZnRlciB0aGUgY2xvc2luZyB0b2tlbi5cbiAgICovXG5cbiAgYW55KG9wZW5LaW5kLCBwYXJzZUZuLCBjbG9zZUtpbmQpIHtcbiAgICB0aGlzLmV4cGVjdFRva2VuKG9wZW5LaW5kKTtcbiAgICBjb25zdCBub2RlcyA9IFtdO1xuXG4gICAgd2hpbGUgKCF0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oY2xvc2VLaW5kKSkge1xuICAgICAgbm9kZXMucHVzaChwYXJzZUZuLmNhbGwodGhpcykpO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgcGFyc2Ugbm9kZXMsIGRldGVybWluZWQgYnkgdGhlIHBhcnNlRm4uXG4gICAqIEl0IGNhbiBiZSBlbXB0eSBvbmx5IGlmIG9wZW4gdG9rZW4gaXMgbWlzc2luZyBvdGhlcndpc2UgaXQgd2lsbCBhbHdheXMgcmV0dXJuIG5vbi1lbXB0eSBsaXN0XG4gICAqIHRoYXQgYmVnaW5zIHdpdGggYSBsZXggdG9rZW4gb2Ygb3BlbktpbmQgYW5kIGVuZHMgd2l0aCBhIGxleCB0b2tlbiBvZiBjbG9zZUtpbmQuXG4gICAqIEFkdmFuY2VzIHRoZSBwYXJzZXIgdG8gdGhlIG5leHQgbGV4IHRva2VuIGFmdGVyIHRoZSBjbG9zaW5nIHRva2VuLlxuICAgKi9cblxuICBvcHRpb25hbE1hbnkob3BlbktpbmQsIHBhcnNlRm4sIGNsb3NlS2luZCkge1xuICAgIGlmICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4ob3BlbktpbmQpKSB7XG4gICAgICBjb25zdCBub2RlcyA9IFtdO1xuXG4gICAgICBkbyB7XG4gICAgICAgIG5vZGVzLnB1c2gocGFyc2VGbi5jYWxsKHRoaXMpKTtcbiAgICAgIH0gd2hpbGUgKCF0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oY2xvc2VLaW5kKSk7XG5cbiAgICAgIHJldHVybiBub2RlcztcbiAgICB9XG5cbiAgICByZXR1cm4gW107XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBub24tZW1wdHkgbGlzdCBvZiBwYXJzZSBub2RlcywgZGV0ZXJtaW5lZCBieSB0aGUgcGFyc2VGbi5cbiAgICogVGhpcyBsaXN0IGJlZ2lucyB3aXRoIGEgbGV4IHRva2VuIG9mIG9wZW5LaW5kIGFuZCBlbmRzIHdpdGggYSBsZXggdG9rZW4gb2YgY2xvc2VLaW5kLlxuICAgKiBBZHZhbmNlcyB0aGUgcGFyc2VyIHRvIHRoZSBuZXh0IGxleCB0b2tlbiBhZnRlciB0aGUgY2xvc2luZyB0b2tlbi5cbiAgICovXG5cbiAgbWFueShvcGVuS2luZCwgcGFyc2VGbiwgY2xvc2VLaW5kKSB7XG4gICAgdGhpcy5leHBlY3RUb2tlbihvcGVuS2luZCk7XG4gICAgY29uc3Qgbm9kZXMgPSBbXTtcblxuICAgIGRvIHtcbiAgICAgIG5vZGVzLnB1c2gocGFyc2VGbi5jYWxsKHRoaXMpKTtcbiAgICB9IHdoaWxlICghdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGNsb3NlS2luZCkpO1xuXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbm9uLWVtcHR5IGxpc3Qgb2YgcGFyc2Ugbm9kZXMsIGRldGVybWluZWQgYnkgdGhlIHBhcnNlRm4uXG4gICAqIFRoaXMgbGlzdCBtYXkgYmVnaW4gd2l0aCBhIGxleCB0b2tlbiBvZiBkZWxpbWl0ZXJLaW5kIGZvbGxvd2VkIGJ5IGl0ZW1zIHNlcGFyYXRlZCBieSBsZXggdG9rZW5zIG9mIHRva2VuS2luZC5cbiAgICogQWR2YW5jZXMgdGhlIHBhcnNlciB0byB0aGUgbmV4dCBsZXggdG9rZW4gYWZ0ZXIgbGFzdCBpdGVtIGluIHRoZSBsaXN0LlxuICAgKi9cblxuICBkZWxpbWl0ZWRNYW55KGRlbGltaXRlcktpbmQsIHBhcnNlRm4pIHtcbiAgICB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZGVsaW1pdGVyS2luZCk7XG4gICAgY29uc3Qgbm9kZXMgPSBbXTtcblxuICAgIGRvIHtcbiAgICAgIG5vZGVzLnB1c2gocGFyc2VGbi5jYWxsKHRoaXMpKTtcbiAgICB9IHdoaWxlICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZGVsaW1pdGVyS2luZCkpO1xuXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG5cbiAgYWR2YW5jZUxleGVyKCkge1xuICAgIGNvbnN0IHsgbWF4VG9rZW5zIH0gPSB0aGlzLl9vcHRpb25zO1xuXG4gICAgY29uc3QgdG9rZW4gPSB0aGlzLl9sZXhlci5hZHZhbmNlKCk7XG5cbiAgICBpZiAodG9rZW4ua2luZCAhPT0gVG9rZW5LaW5kLkVPRikge1xuICAgICAgKyt0aGlzLl90b2tlbkNvdW50ZXI7XG5cbiAgICAgIGlmIChtYXhUb2tlbnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLl90b2tlbkNvdW50ZXIgPiBtYXhUb2tlbnMpIHtcbiAgICAgICAgdGhyb3cgc3ludGF4RXJyb3IoXG4gICAgICAgICAgdGhpcy5fbGV4ZXIuc291cmNlLFxuICAgICAgICAgIHRva2VuLnN0YXJ0LFxuICAgICAgICAgIGBEb2N1bWVudCBjb250YWlucyBtb3JlIHRoYXQgJHttYXhUb2tlbnN9IHRva2Vucy4gUGFyc2luZyBhYm9ydGVkLmAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4vKipcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIHRvIGRlc2NyaWJlIGEgdG9rZW4gYXMgYSBzdHJpbmcgZm9yIGRlYnVnZ2luZy5cbiAqL1xuXG5mdW5jdGlvbiBnZXRUb2tlbkRlc2ModG9rZW4pIHtcbiAgY29uc3QgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgcmV0dXJuIGdldFRva2VuS2luZERlc2ModG9rZW4ua2luZCkgKyAodmFsdWUgIT0gbnVsbCA/IGAgXCIke3ZhbHVlfVwiYCA6ICcnKTtcbn1cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gZGVzY3JpYmUgYSB0b2tlbiBraW5kIGFzIGEgc3RyaW5nIGZvciBkZWJ1Z2dpbmcuXG4gKi9cblxuZnVuY3Rpb24gZ2V0VG9rZW5LaW5kRGVzYyhraW5kKSB7XG4gIHJldHVybiBpc1B1bmN0dWF0b3JUb2tlbktpbmQoa2luZCkgPyBgXCIke2tpbmR9XCJgIDoga2luZDtcbn1cbiIsCiAgICAiLyoqXG4gKiBQcmludHMgYSBzdHJpbmcgYXMgYSBHcmFwaFFMIFN0cmluZ1ZhbHVlIGxpdGVyYWwuIFJlcGxhY2VzIGNvbnRyb2wgY2hhcmFjdGVyc1xuICogYW5kIGV4Y2x1ZGVkIGNoYXJhY3RlcnMgKFwiIFUrMDAyMiBhbmQgXFxcXCBVKzAwNUMpIHdpdGggZXNjYXBlIHNlcXVlbmNlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByaW50U3RyaW5nKHN0cikge1xuICByZXR1cm4gYFwiJHtzdHIucmVwbGFjZShlc2NhcGVkUmVnRXhwLCBlc2NhcGVkUmVwbGFjZXIpfVwiYDtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcblxuY29uc3QgZXNjYXBlZFJlZ0V4cCA9IC9bXFx4MDAtXFx4MWZcXHgyMlxceDVjXFx4N2YtXFx4OWZdL2c7XG5cbmZ1bmN0aW9uIGVzY2FwZWRSZXBsYWNlcihzdHIpIHtcbiAgcmV0dXJuIGVzY2FwZVNlcXVlbmNlc1tzdHIuY2hhckNvZGVBdCgwKV07XG59IC8vIHByZXR0aWVyLWlnbm9yZVxuXG5jb25zdCBlc2NhcGVTZXF1ZW5jZXMgPSBbXG4gICdcXFxcdTAwMDAnLFxuICAnXFxcXHUwMDAxJyxcbiAgJ1xcXFx1MDAwMicsXG4gICdcXFxcdTAwMDMnLFxuICAnXFxcXHUwMDA0JyxcbiAgJ1xcXFx1MDAwNScsXG4gICdcXFxcdTAwMDYnLFxuICAnXFxcXHUwMDA3JyxcbiAgJ1xcXFxiJyxcbiAgJ1xcXFx0JyxcbiAgJ1xcXFxuJyxcbiAgJ1xcXFx1MDAwQicsXG4gICdcXFxcZicsXG4gICdcXFxccicsXG4gICdcXFxcdTAwMEUnLFxuICAnXFxcXHUwMDBGJyxcbiAgJ1xcXFx1MDAxMCcsXG4gICdcXFxcdTAwMTEnLFxuICAnXFxcXHUwMDEyJyxcbiAgJ1xcXFx1MDAxMycsXG4gICdcXFxcdTAwMTQnLFxuICAnXFxcXHUwMDE1JyxcbiAgJ1xcXFx1MDAxNicsXG4gICdcXFxcdTAwMTcnLFxuICAnXFxcXHUwMDE4JyxcbiAgJ1xcXFx1MDAxOScsXG4gICdcXFxcdTAwMUEnLFxuICAnXFxcXHUwMDFCJyxcbiAgJ1xcXFx1MDAxQycsXG4gICdcXFxcdTAwMUQnLFxuICAnXFxcXHUwMDFFJyxcbiAgJ1xcXFx1MDAxRicsXG4gICcnLFxuICAnJyxcbiAgJ1xcXFxcIicsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLCAvLyAyRlxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJywgLy8gM0ZcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsIC8vIDRGXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICdcXFxcXFxcXCcsXG4gICcnLFxuICAnJyxcbiAgJycsIC8vIDVGXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLCAvLyA2RlxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnXFxcXHUwMDdGJyxcbiAgJ1xcXFx1MDA4MCcsXG4gICdcXFxcdTAwODEnLFxuICAnXFxcXHUwMDgyJyxcbiAgJ1xcXFx1MDA4MycsXG4gICdcXFxcdTAwODQnLFxuICAnXFxcXHUwMDg1JyxcbiAgJ1xcXFx1MDA4NicsXG4gICdcXFxcdTAwODcnLFxuICAnXFxcXHUwMDg4JyxcbiAgJ1xcXFx1MDA4OScsXG4gICdcXFxcdTAwOEEnLFxuICAnXFxcXHUwMDhCJyxcbiAgJ1xcXFx1MDA4QycsXG4gICdcXFxcdTAwOEQnLFxuICAnXFxcXHUwMDhFJyxcbiAgJ1xcXFx1MDA4RicsXG4gICdcXFxcdTAwOTAnLFxuICAnXFxcXHUwMDkxJyxcbiAgJ1xcXFx1MDA5MicsXG4gICdcXFxcdTAwOTMnLFxuICAnXFxcXHUwMDk0JyxcbiAgJ1xcXFx1MDA5NScsXG4gICdcXFxcdTAwOTYnLFxuICAnXFxcXHUwMDk3JyxcbiAgJ1xcXFx1MDA5OCcsXG4gICdcXFxcdTAwOTknLFxuICAnXFxcXHUwMDlBJyxcbiAgJ1xcXFx1MDA5QicsXG4gICdcXFxcdTAwOUMnLFxuICAnXFxcXHUwMDlEJyxcbiAgJ1xcXFx1MDA5RScsXG4gICdcXFxcdTAwOUYnLFxuXTtcbiIsCiAgICAiaW1wb3J0IHsgZGV2QXNzZXJ0IH0gZnJvbSAnLi4vanN1dGlscy9kZXZBc3NlcnQubWpzJztcbmltcG9ydCB7IGluc3BlY3QgfSBmcm9tICcuLi9qc3V0aWxzL2luc3BlY3QubWpzJztcbmltcG9ydCB7IGlzTm9kZSwgUXVlcnlEb2N1bWVudEtleXMgfSBmcm9tICcuL2FzdC5tanMnO1xuaW1wb3J0IHsgS2luZCB9IGZyb20gJy4va2luZHMubWpzJztcbi8qKlxuICogQSB2aXNpdG9yIGlzIHByb3ZpZGVkIHRvIHZpc2l0LCBpdCBjb250YWlucyB0aGUgY29sbGVjdGlvbiBvZlxuICogcmVsZXZhbnQgZnVuY3Rpb25zIHRvIGJlIGNhbGxlZCBkdXJpbmcgdGhlIHZpc2l0b3IncyB0cmF2ZXJzYWwuXG4gKi9cblxuZXhwb3J0IGNvbnN0IEJSRUFLID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG4vKipcbiAqIHZpc2l0KCkgd2lsbCB3YWxrIHRocm91Z2ggYW4gQVNUIHVzaW5nIGEgZGVwdGgtZmlyc3QgdHJhdmVyc2FsLCBjYWxsaW5nXG4gKiB0aGUgdmlzaXRvcidzIGVudGVyIGZ1bmN0aW9uIGF0IGVhY2ggbm9kZSBpbiB0aGUgdHJhdmVyc2FsLCBhbmQgY2FsbGluZyB0aGVcbiAqIGxlYXZlIGZ1bmN0aW9uIGFmdGVyIHZpc2l0aW5nIHRoYXQgbm9kZSBhbmQgYWxsIG9mIGl0cyBjaGlsZCBub2Rlcy5cbiAqXG4gKiBCeSByZXR1cm5pbmcgZGlmZmVyZW50IHZhbHVlcyBmcm9tIHRoZSBlbnRlciBhbmQgbGVhdmUgZnVuY3Rpb25zLCB0aGVcbiAqIGJlaGF2aW9yIG9mIHRoZSB2aXNpdG9yIGNhbiBiZSBhbHRlcmVkLCBpbmNsdWRpbmcgc2tpcHBpbmcgb3ZlciBhIHN1Yi10cmVlIG9mXG4gKiB0aGUgQVNUIChieSByZXR1cm5pbmcgZmFsc2UpLCBlZGl0aW5nIHRoZSBBU1QgYnkgcmV0dXJuaW5nIGEgdmFsdWUgb3IgbnVsbFxuICogdG8gcmVtb3ZlIHRoZSB2YWx1ZSwgb3IgdG8gc3RvcCB0aGUgd2hvbGUgdHJhdmVyc2FsIGJ5IHJldHVybmluZyBCUkVBSy5cbiAqXG4gKiBXaGVuIHVzaW5nIHZpc2l0KCkgdG8gZWRpdCBhbiBBU1QsIHRoZSBvcmlnaW5hbCBBU1Qgd2lsbCBub3QgYmUgbW9kaWZpZWQsIGFuZFxuICogYSBuZXcgdmVyc2lvbiBvZiB0aGUgQVNUIHdpdGggdGhlIGNoYW5nZXMgYXBwbGllZCB3aWxsIGJlIHJldHVybmVkIGZyb20gdGhlXG4gKiB2aXNpdCBmdW5jdGlvbi5cbiAqXG4gKiBgYGB0c1xuICogY29uc3QgZWRpdGVkQVNUID0gdmlzaXQoYXN0LCB7XG4gKiAgIGVudGVyKG5vZGUsIGtleSwgcGFyZW50LCBwYXRoLCBhbmNlc3RvcnMpIHtcbiAqICAgICAvLyBAcmV0dXJuXG4gKiAgICAgLy8gICB1bmRlZmluZWQ6IG5vIGFjdGlvblxuICogICAgIC8vICAgZmFsc2U6IHNraXAgdmlzaXRpbmcgdGhpcyBub2RlXG4gKiAgICAgLy8gICB2aXNpdG9yLkJSRUFLOiBzdG9wIHZpc2l0aW5nIGFsdG9nZXRoZXJcbiAqICAgICAvLyAgIG51bGw6IGRlbGV0ZSB0aGlzIG5vZGVcbiAqICAgICAvLyAgIGFueSB2YWx1ZTogcmVwbGFjZSB0aGlzIG5vZGUgd2l0aCB0aGUgcmV0dXJuZWQgdmFsdWVcbiAqICAgfSxcbiAqICAgbGVhdmUobm9kZSwga2V5LCBwYXJlbnQsIHBhdGgsIGFuY2VzdG9ycykge1xuICogICAgIC8vIEByZXR1cm5cbiAqICAgICAvLyAgIHVuZGVmaW5lZDogbm8gYWN0aW9uXG4gKiAgICAgLy8gICBmYWxzZTogbm8gYWN0aW9uXG4gKiAgICAgLy8gICB2aXNpdG9yLkJSRUFLOiBzdG9wIHZpc2l0aW5nIGFsdG9nZXRoZXJcbiAqICAgICAvLyAgIG51bGw6IGRlbGV0ZSB0aGlzIG5vZGVcbiAqICAgICAvLyAgIGFueSB2YWx1ZTogcmVwbGFjZSB0aGlzIG5vZGUgd2l0aCB0aGUgcmV0dXJuZWQgdmFsdWVcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBBbHRlcm5hdGl2ZWx5IHRvIHByb3ZpZGluZyBlbnRlcigpIGFuZCBsZWF2ZSgpIGZ1bmN0aW9ucywgYSB2aXNpdG9yIGNhblxuICogaW5zdGVhZCBwcm92aWRlIGZ1bmN0aW9ucyBuYW1lZCB0aGUgc2FtZSBhcyB0aGUga2luZHMgb2YgQVNUIG5vZGVzLCBvclxuICogZW50ZXIvbGVhdmUgdmlzaXRvcnMgYXQgYSBuYW1lZCBrZXksIGxlYWRpbmcgdG8gdGhyZWUgcGVybXV0YXRpb25zIG9mIHRoZVxuICogdmlzaXRvciBBUEk6XG4gKlxuICogMSkgTmFtZWQgdmlzaXRvcnMgdHJpZ2dlcmVkIHdoZW4gZW50ZXJpbmcgYSBub2RlIG9mIGEgc3BlY2lmaWMga2luZC5cbiAqXG4gKiBgYGB0c1xuICogdmlzaXQoYXN0LCB7XG4gKiAgIEtpbmQobm9kZSkge1xuICogICAgIC8vIGVudGVyIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgIH1cbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiAyKSBOYW1lZCB2aXNpdG9ycyB0aGF0IHRyaWdnZXIgdXBvbiBlbnRlcmluZyBhbmQgbGVhdmluZyBhIG5vZGUgb2YgYSBzcGVjaWZpYyBraW5kLlxuICpcbiAqIGBgYHRzXG4gKiB2aXNpdChhc3QsIHtcbiAqICAgS2luZDoge1xuICogICAgIGVudGVyKG5vZGUpIHtcbiAqICAgICAgIC8vIGVudGVyIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgfVxuICogICAgIGxlYXZlKG5vZGUpIHtcbiAqICAgICAgIC8vIGxlYXZlIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgfVxuICogICB9XG4gKiB9KVxuICogYGBgXG4gKlxuICogMykgR2VuZXJpYyB2aXNpdG9ycyB0aGF0IHRyaWdnZXIgdXBvbiBlbnRlcmluZyBhbmQgbGVhdmluZyBhbnkgbm9kZS5cbiAqXG4gKiBgYGB0c1xuICogdmlzaXQoYXN0LCB7XG4gKiAgIGVudGVyKG5vZGUpIHtcbiAqICAgICAvLyBlbnRlciBhbnkgbm9kZVxuICogICB9LFxuICogICBsZWF2ZShub2RlKSB7XG4gKiAgICAgLy8gbGVhdmUgYW55IG5vZGVcbiAqICAgfVxuICogfSlcbiAqIGBgYFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB2aXNpdChyb290LCB2aXNpdG9yLCB2aXNpdG9yS2V5cyA9IFF1ZXJ5RG9jdW1lbnRLZXlzKSB7XG4gIGNvbnN0IGVudGVyTGVhdmVNYXAgPSBuZXcgTWFwKCk7XG5cbiAgZm9yIChjb25zdCBraW5kIG9mIE9iamVjdC52YWx1ZXMoS2luZCkpIHtcbiAgICBlbnRlckxlYXZlTWFwLnNldChraW5kLCBnZXRFbnRlckxlYXZlRm9yS2luZCh2aXNpdG9yLCBraW5kKSk7XG4gIH1cbiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYtaW5pdCAqL1xuXG4gIGxldCBzdGFjayA9IHVuZGVmaW5lZDtcbiAgbGV0IGluQXJyYXkgPSBBcnJheS5pc0FycmF5KHJvb3QpO1xuICBsZXQga2V5cyA9IFtyb290XTtcbiAgbGV0IGluZGV4ID0gLTE7XG4gIGxldCBlZGl0cyA9IFtdO1xuICBsZXQgbm9kZSA9IHJvb3Q7XG4gIGxldCBrZXkgPSB1bmRlZmluZWQ7XG4gIGxldCBwYXJlbnQgPSB1bmRlZmluZWQ7XG4gIGNvbnN0IHBhdGggPSBbXTtcbiAgY29uc3QgYW5jZXN0b3JzID0gW107XG4gIC8qIGVzbGludC1lbmFibGUgbm8tdW5kZWYtaW5pdCAqL1xuXG4gIGRvIHtcbiAgICBpbmRleCsrO1xuICAgIGNvbnN0IGlzTGVhdmluZyA9IGluZGV4ID09PSBrZXlzLmxlbmd0aDtcbiAgICBjb25zdCBpc0VkaXRlZCA9IGlzTGVhdmluZyAmJiBlZGl0cy5sZW5ndGggIT09IDA7XG5cbiAgICBpZiAoaXNMZWF2aW5nKSB7XG4gICAgICBrZXkgPSBhbmNlc3RvcnMubGVuZ3RoID09PSAwID8gdW5kZWZpbmVkIDogcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgIHBhcmVudCA9IGFuY2VzdG9ycy5wb3AoKTtcblxuICAgICAgaWYgKGlzRWRpdGVkKSB7XG4gICAgICAgIGlmIChpbkFycmF5KSB7XG4gICAgICAgICAgbm9kZSA9IG5vZGUuc2xpY2UoKTtcbiAgICAgICAgICBsZXQgZWRpdE9mZnNldCA9IDA7XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IFtlZGl0S2V5LCBlZGl0VmFsdWVdIG9mIGVkaXRzKSB7XG4gICAgICAgICAgICBjb25zdCBhcnJheUtleSA9IGVkaXRLZXkgLSBlZGl0T2Zmc2V0O1xuXG4gICAgICAgICAgICBpZiAoZWRpdFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIG5vZGUuc3BsaWNlKGFycmF5S2V5LCAxKTtcbiAgICAgICAgICAgICAgZWRpdE9mZnNldCsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbm9kZVthcnJheUtleV0gPSBlZGl0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUgPSB7IC4uLm5vZGUgfTtcblxuICAgICAgICAgIGZvciAoY29uc3QgW2VkaXRLZXksIGVkaXRWYWx1ZV0gb2YgZWRpdHMpIHtcbiAgICAgICAgICAgIG5vZGVbZWRpdEtleV0gPSBlZGl0VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGluZGV4ID0gc3RhY2suaW5kZXg7XG4gICAgICBrZXlzID0gc3RhY2sua2V5cztcbiAgICAgIGVkaXRzID0gc3RhY2suZWRpdHM7XG4gICAgICBpbkFycmF5ID0gc3RhY2suaW5BcnJheTtcbiAgICAgIHN0YWNrID0gc3RhY2sucHJldjtcbiAgICB9IGVsc2UgaWYgKHBhcmVudCkge1xuICAgICAga2V5ID0gaW5BcnJheSA/IGluZGV4IDoga2V5c1tpbmRleF07XG4gICAgICBub2RlID0gcGFyZW50W2tleV07XG5cbiAgICAgIGlmIChub2RlID09PSBudWxsIHx8IG5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgcGF0aC5wdXNoKGtleSk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdDtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShub2RlKSkge1xuICAgICAgdmFyIF9lbnRlckxlYXZlTWFwJGdldCwgX2VudGVyTGVhdmVNYXAkZ2V0MjtcblxuICAgICAgaXNOb2RlKG5vZGUpIHx8IGRldkFzc2VydChmYWxzZSwgYEludmFsaWQgQVNUIE5vZGU6ICR7aW5zcGVjdChub2RlKX0uYCk7XG4gICAgICBjb25zdCB2aXNpdEZuID0gaXNMZWF2aW5nXG4gICAgICAgID8gKF9lbnRlckxlYXZlTWFwJGdldCA9IGVudGVyTGVhdmVNYXAuZ2V0KG5vZGUua2luZCkpID09PSBudWxsIHx8XG4gICAgICAgICAgX2VudGVyTGVhdmVNYXAkZ2V0ID09PSB2b2lkIDBcbiAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgIDogX2VudGVyTGVhdmVNYXAkZ2V0LmxlYXZlXG4gICAgICAgIDogKF9lbnRlckxlYXZlTWFwJGdldDIgPSBlbnRlckxlYXZlTWFwLmdldChub2RlLmtpbmQpKSA9PT0gbnVsbCB8fFxuICAgICAgICAgIF9lbnRlckxlYXZlTWFwJGdldDIgPT09IHZvaWQgMFxuICAgICAgICA/IHZvaWQgMFxuICAgICAgICA6IF9lbnRlckxlYXZlTWFwJGdldDIuZW50ZXI7XG4gICAgICByZXN1bHQgPVxuICAgICAgICB2aXNpdEZuID09PSBudWxsIHx8IHZpc2l0Rm4gPT09IHZvaWQgMFxuICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgOiB2aXNpdEZuLmNhbGwodmlzaXRvciwgbm9kZSwga2V5LCBwYXJlbnQsIHBhdGgsIGFuY2VzdG9ycyk7XG5cbiAgICAgIGlmIChyZXN1bHQgPT09IEJSRUFLKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICBpZiAoIWlzTGVhdmluZykge1xuICAgICAgICAgIHBhdGgucG9wKCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZWRpdHMucHVzaChba2V5LCByZXN1bHRdKTtcblxuICAgICAgICBpZiAoIWlzTGVhdmluZykge1xuICAgICAgICAgIGlmIChpc05vZGUocmVzdWx0KSkge1xuICAgICAgICAgICAgbm9kZSA9IHJlc3VsdDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGF0aC5wb3AoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCAmJiBpc0VkaXRlZCkge1xuICAgICAgZWRpdHMucHVzaChba2V5LCBub2RlXSk7XG4gICAgfVxuXG4gICAgaWYgKGlzTGVhdmluZykge1xuICAgICAgcGF0aC5wb3AoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIF9ub2RlJGtpbmQ7XG5cbiAgICAgIHN0YWNrID0ge1xuICAgICAgICBpbkFycmF5LFxuICAgICAgICBpbmRleCxcbiAgICAgICAga2V5cyxcbiAgICAgICAgZWRpdHMsXG4gICAgICAgIHByZXY6IHN0YWNrLFxuICAgICAgfTtcbiAgICAgIGluQXJyYXkgPSBBcnJheS5pc0FycmF5KG5vZGUpO1xuICAgICAga2V5cyA9IGluQXJyYXlcbiAgICAgICAgPyBub2RlXG4gICAgICAgIDogKF9ub2RlJGtpbmQgPSB2aXNpdG9yS2V5c1tub2RlLmtpbmRdKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIF9ub2RlJGtpbmQgIT09IHZvaWQgMFxuICAgICAgICA/IF9ub2RlJGtpbmRcbiAgICAgICAgOiBbXTtcbiAgICAgIGluZGV4ID0gLTE7XG4gICAgICBlZGl0cyA9IFtdO1xuXG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIGFuY2VzdG9ycy5wdXNoKHBhcmVudCk7XG4gICAgICB9XG5cbiAgICAgIHBhcmVudCA9IG5vZGU7XG4gICAgfVxuICB9IHdoaWxlIChzdGFjayAhPT0gdW5kZWZpbmVkKTtcblxuICBpZiAoZWRpdHMubGVuZ3RoICE9PSAwKSB7XG4gICAgLy8gTmV3IHJvb3RcbiAgICByZXR1cm4gZWRpdHNbZWRpdHMubGVuZ3RoIC0gMV1bMV07XG4gIH1cblxuICByZXR1cm4gcm9vdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2aXNpdG9yIGluc3RhbmNlIHdoaWNoIGRlbGVnYXRlcyB0byBtYW55IHZpc2l0b3JzIHRvIHJ1biBpblxuICogcGFyYWxsZWwuIEVhY2ggdmlzaXRvciB3aWxsIGJlIHZpc2l0ZWQgZm9yIGVhY2ggbm9kZSBiZWZvcmUgbW92aW5nIG9uLlxuICpcbiAqIElmIGEgcHJpb3IgdmlzaXRvciBlZGl0cyBhIG5vZGUsIG5vIGZvbGxvd2luZyB2aXNpdG9ycyB3aWxsIHNlZSB0aGF0IG5vZGUuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHZpc2l0SW5QYXJhbGxlbCh2aXNpdG9ycykge1xuICBjb25zdCBza2lwcGluZyA9IG5ldyBBcnJheSh2aXNpdG9ycy5sZW5ndGgpLmZpbGwobnVsbCk7XG4gIGNvbnN0IG1lcmdlZFZpc2l0b3IgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGZvciAoY29uc3Qga2luZCBvZiBPYmplY3QudmFsdWVzKEtpbmQpKSB7XG4gICAgbGV0IGhhc1Zpc2l0b3IgPSBmYWxzZTtcbiAgICBjb25zdCBlbnRlckxpc3QgPSBuZXcgQXJyYXkodmlzaXRvcnMubGVuZ3RoKS5maWxsKHVuZGVmaW5lZCk7XG4gICAgY29uc3QgbGVhdmVMaXN0ID0gbmV3IEFycmF5KHZpc2l0b3JzLmxlbmd0aCkuZmlsbCh1bmRlZmluZWQpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aXNpdG9ycy5sZW5ndGg7ICsraSkge1xuICAgICAgY29uc3QgeyBlbnRlciwgbGVhdmUgfSA9IGdldEVudGVyTGVhdmVGb3JLaW5kKHZpc2l0b3JzW2ldLCBraW5kKTtcbiAgICAgIGhhc1Zpc2l0b3IgfHwgKGhhc1Zpc2l0b3IgPSBlbnRlciAhPSBudWxsIHx8IGxlYXZlICE9IG51bGwpO1xuICAgICAgZW50ZXJMaXN0W2ldID0gZW50ZXI7XG4gICAgICBsZWF2ZUxpc3RbaV0gPSBsZWF2ZTtcbiAgICB9XG5cbiAgICBpZiAoIWhhc1Zpc2l0b3IpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG1lcmdlZEVudGVyTGVhdmUgPSB7XG4gICAgICBlbnRlciguLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBhcmdzWzBdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmlzaXRvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoc2tpcHBpbmdbaV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBfZW50ZXJMaXN0JGk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9XG4gICAgICAgICAgICAgIChfZW50ZXJMaXN0JGkgPSBlbnRlckxpc3RbaV0pID09PSBudWxsIHx8IF9lbnRlckxpc3QkaSA9PT0gdm9pZCAwXG4gICAgICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgICAgICA6IF9lbnRlckxpc3QkaS5hcHBseSh2aXNpdG9yc1tpXSwgYXJncyk7XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHNraXBwaW5nW2ldID0gbm9kZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSBCUkVBSykge1xuICAgICAgICAgICAgICBza2lwcGluZ1tpXSA9IEJSRUFLO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgbGVhdmUoLi4uYXJncykge1xuICAgICAgICBjb25zdCBub2RlID0gYXJnc1swXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpc2l0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKHNraXBwaW5nW2ldID09PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgX2xlYXZlTGlzdCRpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPVxuICAgICAgICAgICAgICAoX2xlYXZlTGlzdCRpID0gbGVhdmVMaXN0W2ldKSA9PT0gbnVsbCB8fCBfbGVhdmVMaXN0JGkgPT09IHZvaWQgMFxuICAgICAgICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgICAgICAgOiBfbGVhdmVMaXN0JGkuYXBwbHkodmlzaXRvcnNbaV0sIGFyZ3MpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBCUkVBSykge1xuICAgICAgICAgICAgICBza2lwcGluZ1tpXSA9IEJSRUFLO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChza2lwcGluZ1tpXSA9PT0gbm9kZSkge1xuICAgICAgICAgICAgc2tpcHBpbmdbaV0gPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICAgIG1lcmdlZFZpc2l0b3Jba2luZF0gPSBtZXJnZWRFbnRlckxlYXZlO1xuICB9XG5cbiAgcmV0dXJuIG1lcmdlZFZpc2l0b3I7XG59XG4vKipcbiAqIEdpdmVuIGEgdmlzaXRvciBpbnN0YW5jZSBhbmQgYSBub2RlIGtpbmQsIHJldHVybiBFbnRlckxlYXZlVmlzaXRvciBmb3IgdGhhdCBraW5kLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnRlckxlYXZlRm9yS2luZCh2aXNpdG9yLCBraW5kKSB7XG4gIGNvbnN0IGtpbmRWaXNpdG9yID0gdmlzaXRvcltraW5kXTtcblxuICBpZiAodHlwZW9mIGtpbmRWaXNpdG9yID09PSAnb2JqZWN0Jykge1xuICAgIC8vIHsgS2luZDogeyBlbnRlcigpIHt9LCBsZWF2ZSgpIHt9IH0gfVxuICAgIHJldHVybiBraW5kVmlzaXRvcjtcbiAgfSBlbHNlIGlmICh0eXBlb2Yga2luZFZpc2l0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyB7IEtpbmQoKSB7fSB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGVudGVyOiBraW5kVmlzaXRvcixcbiAgICAgIGxlYXZlOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgfSAvLyB7IGVudGVyKCkge30sIGxlYXZlKCkge30gfVxuXG4gIHJldHVybiB7XG4gICAgZW50ZXI6IHZpc2l0b3IuZW50ZXIsXG4gICAgbGVhdmU6IHZpc2l0b3IubGVhdmUsXG4gIH07XG59XG4vKipcbiAqIEdpdmVuIGEgdmlzaXRvciBpbnN0YW5jZSwgaWYgaXQgaXMgbGVhdmluZyBvciBub3QsIGFuZCBhIG5vZGUga2luZCwgcmV0dXJuXG4gKiB0aGUgZnVuY3Rpb24gdGhlIHZpc2l0b3IgcnVudGltZSBzaG91bGQgY2FsbC5cbiAqXG4gKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBnZXRFbnRlckxlYXZlRm9yS2luZGAgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIHYxN1xuICovXG5cbi8qIGM4IGlnbm9yZSBuZXh0IDggKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZpc2l0Rm4odmlzaXRvciwga2luZCwgaXNMZWF2aW5nKSB7XG4gIGNvbnN0IHsgZW50ZXIsIGxlYXZlIH0gPSBnZXRFbnRlckxlYXZlRm9yS2luZCh2aXNpdG9yLCBraW5kKTtcbiAgcmV0dXJuIGlzTGVhdmluZyA/IGxlYXZlIDogZW50ZXI7XG59XG4iLAogICAgImltcG9ydCB7IHByaW50QmxvY2tTdHJpbmcgfSBmcm9tICcuL2Jsb2NrU3RyaW5nLm1qcyc7XG5pbXBvcnQgeyBwcmludFN0cmluZyB9IGZyb20gJy4vcHJpbnRTdHJpbmcubWpzJztcbmltcG9ydCB7IHZpc2l0IH0gZnJvbSAnLi92aXNpdG9yLm1qcyc7XG4vKipcbiAqIENvbnZlcnRzIGFuIEFTVCBpbnRvIGEgc3RyaW5nLCB1c2luZyBvbmUgc2V0IG9mIHJlYXNvbmFibGVcbiAqIGZvcm1hdHRpbmcgcnVsZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50KGFzdCkge1xuICByZXR1cm4gdmlzaXQoYXN0LCBwcmludERvY0FTVFJlZHVjZXIpO1xufVxuY29uc3QgTUFYX0xJTkVfTEVOR1RIID0gODA7XG5jb25zdCBwcmludERvY0FTVFJlZHVjZXIgPSB7XG4gIE5hbWU6IHtcbiAgICBsZWF2ZTogKG5vZGUpID0+IG5vZGUudmFsdWUsXG4gIH0sXG4gIFZhcmlhYmxlOiB7XG4gICAgbGVhdmU6IChub2RlKSA9PiAnJCcgKyBub2RlLm5hbWUsXG4gIH0sXG4gIC8vIERvY3VtZW50XG4gIERvY3VtZW50OiB7XG4gICAgbGVhdmU6IChub2RlKSA9PiBqb2luKG5vZGUuZGVmaW5pdGlvbnMsICdcXG5cXG4nKSxcbiAgfSxcbiAgT3BlcmF0aW9uRGVmaW5pdGlvbjoge1xuICAgIGxlYXZlKG5vZGUpIHtcbiAgICAgIGNvbnN0IHZhckRlZnMgPSB3cmFwKCcoJywgam9pbihub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMsICcsICcpLCAnKScpO1xuICAgICAgY29uc3QgcHJlZml4ID0gam9pbihcbiAgICAgICAgW1xuICAgICAgICAgIG5vZGUub3BlcmF0aW9uLFxuICAgICAgICAgIGpvaW4oW25vZGUubmFtZSwgdmFyRGVmc10pLFxuICAgICAgICAgIGpvaW4obm9kZS5kaXJlY3RpdmVzLCAnICcpLFxuICAgICAgICBdLFxuICAgICAgICAnICcsXG4gICAgICApOyAvLyBBbm9ueW1vdXMgcXVlcmllcyB3aXRoIG5vIGRpcmVjdGl2ZXMgb3IgdmFyaWFibGUgZGVmaW5pdGlvbnMgY2FuIHVzZVxuICAgICAgLy8gdGhlIHF1ZXJ5IHNob3J0IGZvcm0uXG5cbiAgICAgIHJldHVybiAocHJlZml4ID09PSAncXVlcnknID8gJycgOiBwcmVmaXggKyAnICcpICsgbm9kZS5zZWxlY3Rpb25TZXQ7XG4gICAgfSxcbiAgfSxcbiAgVmFyaWFibGVEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IHZhcmlhYmxlLCB0eXBlLCBkZWZhdWx0VmFsdWUsIGRpcmVjdGl2ZXMgfSkgPT5cbiAgICAgIHZhcmlhYmxlICtcbiAgICAgICc6ICcgK1xuICAgICAgdHlwZSArXG4gICAgICB3cmFwKCcgPSAnLCBkZWZhdWx0VmFsdWUpICtcbiAgICAgIHdyYXAoJyAnLCBqb2luKGRpcmVjdGl2ZXMsICcgJykpLFxuICB9LFxuICBTZWxlY3Rpb25TZXQ6IHtcbiAgICBsZWF2ZTogKHsgc2VsZWN0aW9ucyB9KSA9PiBibG9jayhzZWxlY3Rpb25zKSxcbiAgfSxcbiAgRmllbGQ6IHtcbiAgICBsZWF2ZSh7IGFsaWFzLCBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIGRpcmVjdGl2ZXMsIHNlbGVjdGlvblNldCB9KSB7XG4gICAgICBjb25zdCBwcmVmaXggPSB3cmFwKCcnLCBhbGlhcywgJzogJykgKyBuYW1lO1xuICAgICAgbGV0IGFyZ3NMaW5lID0gcHJlZml4ICsgd3JhcCgnKCcsIGpvaW4oYXJncywgJywgJyksICcpJyk7XG5cbiAgICAgIGlmIChhcmdzTGluZS5sZW5ndGggPiBNQVhfTElORV9MRU5HVEgpIHtcbiAgICAgICAgYXJnc0xpbmUgPSBwcmVmaXggKyB3cmFwKCcoXFxuJywgaW5kZW50KGpvaW4oYXJncywgJ1xcbicpKSwgJ1xcbiknKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGpvaW4oW2FyZ3NMaW5lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIHNlbGVjdGlvblNldF0sICcgJyk7XG4gICAgfSxcbiAgfSxcbiAgQXJndW1lbnQ6IHtcbiAgICBsZWF2ZTogKHsgbmFtZSwgdmFsdWUgfSkgPT4gbmFtZSArICc6ICcgKyB2YWx1ZSxcbiAgfSxcbiAgLy8gRnJhZ21lbnRzXG4gIEZyYWdtZW50U3ByZWFkOiB7XG4gICAgbGVhdmU6ICh7IG5hbWUsIGRpcmVjdGl2ZXMgfSkgPT5cbiAgICAgICcuLi4nICsgbmFtZSArIHdyYXAoJyAnLCBqb2luKGRpcmVjdGl2ZXMsICcgJykpLFxuICB9LFxuICBJbmxpbmVGcmFnbWVudDoge1xuICAgIGxlYXZlOiAoeyB0eXBlQ29uZGl0aW9uLCBkaXJlY3RpdmVzLCBzZWxlY3Rpb25TZXQgfSkgPT5cbiAgICAgIGpvaW4oXG4gICAgICAgIFtcbiAgICAgICAgICAnLi4uJyxcbiAgICAgICAgICB3cmFwKCdvbiAnLCB0eXBlQ29uZGl0aW9uKSxcbiAgICAgICAgICBqb2luKGRpcmVjdGl2ZXMsICcgJyksXG4gICAgICAgICAgc2VsZWN0aW9uU2V0LFxuICAgICAgICBdLFxuICAgICAgICAnICcsXG4gICAgICApLFxuICB9LFxuICBGcmFnbWVudERlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKFxuICAgICAgeyBuYW1lLCB0eXBlQ29uZGl0aW9uLCB2YXJpYWJsZURlZmluaXRpb25zLCBkaXJlY3RpdmVzLCBzZWxlY3Rpb25TZXQgfSwgLy8gTm90ZTogZnJhZ21lbnQgdmFyaWFibGUgZGVmaW5pdGlvbnMgYXJlIGV4cGVyaW1lbnRhbCBhbmQgbWF5IGJlIGNoYW5nZWRcbiAgICApID0+XG4gICAgICAvLyBvciByZW1vdmVkIGluIHRoZSBmdXR1cmUuXG4gICAgICBgZnJhZ21lbnQgJHtuYW1lfSR7d3JhcCgnKCcsIGpvaW4odmFyaWFibGVEZWZpbml0aW9ucywgJywgJyksICcpJyl9IGAgK1xuICAgICAgYG9uICR7dHlwZUNvbmRpdGlvbn0gJHt3cmFwKCcnLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksICcgJyl9YCArXG4gICAgICBzZWxlY3Rpb25TZXQsXG4gIH0sXG4gIC8vIFZhbHVlXG4gIEludFZhbHVlOiB7XG4gICAgbGVhdmU6ICh7IHZhbHVlIH0pID0+IHZhbHVlLFxuICB9LFxuICBGbG9hdFZhbHVlOiB7XG4gICAgbGVhdmU6ICh7IHZhbHVlIH0pID0+IHZhbHVlLFxuICB9LFxuICBTdHJpbmdWYWx1ZToge1xuICAgIGxlYXZlOiAoeyB2YWx1ZSwgYmxvY2s6IGlzQmxvY2tTdHJpbmcgfSkgPT5cbiAgICAgIGlzQmxvY2tTdHJpbmcgPyBwcmludEJsb2NrU3RyaW5nKHZhbHVlKSA6IHByaW50U3RyaW5nKHZhbHVlKSxcbiAgfSxcbiAgQm9vbGVhblZhbHVlOiB7XG4gICAgbGVhdmU6ICh7IHZhbHVlIH0pID0+ICh2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZScpLFxuICB9LFxuICBOdWxsVmFsdWU6IHtcbiAgICBsZWF2ZTogKCkgPT4gJ251bGwnLFxuICB9LFxuICBFbnVtVmFsdWU6IHtcbiAgICBsZWF2ZTogKHsgdmFsdWUgfSkgPT4gdmFsdWUsXG4gIH0sXG4gIExpc3RWYWx1ZToge1xuICAgIGxlYXZlOiAoeyB2YWx1ZXMgfSkgPT4gJ1snICsgam9pbih2YWx1ZXMsICcsICcpICsgJ10nLFxuICB9LFxuICBPYmplY3RWYWx1ZToge1xuICAgIGxlYXZlOiAoeyBmaWVsZHMgfSkgPT4gJ3snICsgam9pbihmaWVsZHMsICcsICcpICsgJ30nLFxuICB9LFxuICBPYmplY3RGaWVsZDoge1xuICAgIGxlYXZlOiAoeyBuYW1lLCB2YWx1ZSB9KSA9PiBuYW1lICsgJzogJyArIHZhbHVlLFxuICB9LFxuICAvLyBEaXJlY3RpdmVcbiAgRGlyZWN0aXZlOiB7XG4gICAgbGVhdmU6ICh7IG5hbWUsIGFyZ3VtZW50czogYXJncyB9KSA9PlxuICAgICAgJ0AnICsgbmFtZSArIHdyYXAoJygnLCBqb2luKGFyZ3MsICcsICcpLCAnKScpLFxuICB9LFxuICAvLyBUeXBlXG4gIE5hbWVkVHlwZToge1xuICAgIGxlYXZlOiAoeyBuYW1lIH0pID0+IG5hbWUsXG4gIH0sXG4gIExpc3RUeXBlOiB7XG4gICAgbGVhdmU6ICh7IHR5cGUgfSkgPT4gJ1snICsgdHlwZSArICddJyxcbiAgfSxcbiAgTm9uTnVsbFR5cGU6IHtcbiAgICBsZWF2ZTogKHsgdHlwZSB9KSA9PiB0eXBlICsgJyEnLFxuICB9LFxuICAvLyBUeXBlIFN5c3RlbSBEZWZpbml0aW9uc1xuICBTY2hlbWFEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IGRlc2NyaXB0aW9uLCBkaXJlY3RpdmVzLCBvcGVyYXRpb25UeXBlcyB9KSA9PlxuICAgICAgd3JhcCgnJywgZGVzY3JpcHRpb24sICdcXG4nKSArXG4gICAgICBqb2luKFsnc2NoZW1hJywgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayhvcGVyYXRpb25UeXBlcyldLCAnICcpLFxuICB9LFxuICBPcGVyYXRpb25UeXBlRGVmaW5pdGlvbjoge1xuICAgIGxlYXZlOiAoeyBvcGVyYXRpb24sIHR5cGUgfSkgPT4gb3BlcmF0aW9uICsgJzogJyArIHR5cGUsXG4gIH0sXG4gIFNjYWxhclR5cGVEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IGRlc2NyaXB0aW9uLCBuYW1lLCBkaXJlY3RpdmVzIH0pID0+XG4gICAgICB3cmFwKCcnLCBkZXNjcmlwdGlvbiwgJ1xcbicpICtcbiAgICAgIGpvaW4oWydzY2FsYXInLCBuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyldLCAnICcpLFxuICB9LFxuICBPYmplY3RUeXBlRGVmaW5pdGlvbjoge1xuICAgIGxlYXZlOiAoeyBkZXNjcmlwdGlvbiwgbmFtZSwgaW50ZXJmYWNlcywgZGlyZWN0aXZlcywgZmllbGRzIH0pID0+XG4gICAgICB3cmFwKCcnLCBkZXNjcmlwdGlvbiwgJ1xcbicpICtcbiAgICAgIGpvaW4oXG4gICAgICAgIFtcbiAgICAgICAgICAndHlwZScsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB3cmFwKCdpbXBsZW1lbnRzICcsIGpvaW4oaW50ZXJmYWNlcywgJyAmICcpKSxcbiAgICAgICAgICBqb2luKGRpcmVjdGl2ZXMsICcgJyksXG4gICAgICAgICAgYmxvY2soZmllbGRzKSxcbiAgICAgICAgXSxcbiAgICAgICAgJyAnLFxuICAgICAgKSxcbiAgfSxcbiAgRmllbGREZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IGRlc2NyaXB0aW9uLCBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIHR5cGUsIGRpcmVjdGl2ZXMgfSkgPT5cbiAgICAgIHdyYXAoJycsIGRlc2NyaXB0aW9uLCAnXFxuJykgK1xuICAgICAgbmFtZSArXG4gICAgICAoaGFzTXVsdGlsaW5lSXRlbXMoYXJncylcbiAgICAgICAgPyB3cmFwKCcoXFxuJywgaW5kZW50KGpvaW4oYXJncywgJ1xcbicpKSwgJ1xcbiknKVxuICAgICAgICA6IHdyYXAoJygnLCBqb2luKGFyZ3MsICcsICcpLCAnKScpKSArXG4gICAgICAnOiAnICtcbiAgICAgIHR5cGUgK1xuICAgICAgd3JhcCgnICcsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSksXG4gIH0sXG4gIElucHV0VmFsdWVEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IGRlc2NyaXB0aW9uLCBuYW1lLCB0eXBlLCBkZWZhdWx0VmFsdWUsIGRpcmVjdGl2ZXMgfSkgPT5cbiAgICAgIHdyYXAoJycsIGRlc2NyaXB0aW9uLCAnXFxuJykgK1xuICAgICAgam9pbihcbiAgICAgICAgW25hbWUgKyAnOiAnICsgdHlwZSwgd3JhcCgnPSAnLCBkZWZhdWx0VmFsdWUpLCBqb2luKGRpcmVjdGl2ZXMsICcgJyldLFxuICAgICAgICAnICcsXG4gICAgICApLFxuICB9LFxuICBJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbjoge1xuICAgIGxlYXZlOiAoeyBkZXNjcmlwdGlvbiwgbmFtZSwgaW50ZXJmYWNlcywgZGlyZWN0aXZlcywgZmllbGRzIH0pID0+XG4gICAgICB3cmFwKCcnLCBkZXNjcmlwdGlvbiwgJ1xcbicpICtcbiAgICAgIGpvaW4oXG4gICAgICAgIFtcbiAgICAgICAgICAnaW50ZXJmYWNlJyxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHdyYXAoJ2ltcGxlbWVudHMgJywgam9pbihpbnRlcmZhY2VzLCAnICYgJykpLFxuICAgICAgICAgIGpvaW4oZGlyZWN0aXZlcywgJyAnKSxcbiAgICAgICAgICBibG9jayhmaWVsZHMpLFxuICAgICAgICBdLFxuICAgICAgICAnICcsXG4gICAgICApLFxuICB9LFxuICBVbmlvblR5cGVEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IGRlc2NyaXB0aW9uLCBuYW1lLCBkaXJlY3RpdmVzLCB0eXBlcyB9KSA9PlxuICAgICAgd3JhcCgnJywgZGVzY3JpcHRpb24sICdcXG4nKSArXG4gICAgICBqb2luKFxuICAgICAgICBbJ3VuaW9uJywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCB3cmFwKCc9ICcsIGpvaW4odHlwZXMsICcgfCAnKSldLFxuICAgICAgICAnICcsXG4gICAgICApLFxuICB9LFxuICBFbnVtVHlwZURlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKHsgZGVzY3JpcHRpb24sIG5hbWUsIGRpcmVjdGl2ZXMsIHZhbHVlcyB9KSA9PlxuICAgICAgd3JhcCgnJywgZGVzY3JpcHRpb24sICdcXG4nKSArXG4gICAgICBqb2luKFsnZW51bScsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2sodmFsdWVzKV0sICcgJyksXG4gIH0sXG4gIEVudW1WYWx1ZURlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKHsgZGVzY3JpcHRpb24sIG5hbWUsIGRpcmVjdGl2ZXMgfSkgPT5cbiAgICAgIHdyYXAoJycsIGRlc2NyaXB0aW9uLCAnXFxuJykgKyBqb2luKFtuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyldLCAnICcpLFxuICB9LFxuICBJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IGRlc2NyaXB0aW9uLCBuYW1lLCBkaXJlY3RpdmVzLCBmaWVsZHMgfSkgPT5cbiAgICAgIHdyYXAoJycsIGRlc2NyaXB0aW9uLCAnXFxuJykgK1xuICAgICAgam9pbihbJ2lucHV0JywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayhmaWVsZHMpXSwgJyAnKSxcbiAgfSxcbiAgRGlyZWN0aXZlRGVmaW5pdGlvbjoge1xuICAgIGxlYXZlOiAoeyBkZXNjcmlwdGlvbiwgbmFtZSwgYXJndW1lbnRzOiBhcmdzLCByZXBlYXRhYmxlLCBsb2NhdGlvbnMgfSkgPT5cbiAgICAgIHdyYXAoJycsIGRlc2NyaXB0aW9uLCAnXFxuJykgK1xuICAgICAgJ2RpcmVjdGl2ZSBAJyArXG4gICAgICBuYW1lICtcbiAgICAgIChoYXNNdWx0aWxpbmVJdGVtcyhhcmdzKVxuICAgICAgICA/IHdyYXAoJyhcXG4nLCBpbmRlbnQoam9pbihhcmdzLCAnXFxuJykpLCAnXFxuKScpXG4gICAgICAgIDogd3JhcCgnKCcsIGpvaW4oYXJncywgJywgJyksICcpJykpICtcbiAgICAgIChyZXBlYXRhYmxlID8gJyByZXBlYXRhYmxlJyA6ICcnKSArXG4gICAgICAnIG9uICcgK1xuICAgICAgam9pbihsb2NhdGlvbnMsICcgfCAnKSxcbiAgfSxcbiAgU2NoZW1hRXh0ZW5zaW9uOiB7XG4gICAgbGVhdmU6ICh7IGRpcmVjdGl2ZXMsIG9wZXJhdGlvblR5cGVzIH0pID0+XG4gICAgICBqb2luKFxuICAgICAgICBbJ2V4dGVuZCBzY2hlbWEnLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIGJsb2NrKG9wZXJhdGlvblR5cGVzKV0sXG4gICAgICAgICcgJyxcbiAgICAgICksXG4gIH0sXG4gIFNjYWxhclR5cGVFeHRlbnNpb246IHtcbiAgICBsZWF2ZTogKHsgbmFtZSwgZGlyZWN0aXZlcyB9KSA9PlxuICAgICAgam9pbihbJ2V4dGVuZCBzY2FsYXInLCBuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyldLCAnICcpLFxuICB9LFxuICBPYmplY3RUeXBlRXh0ZW5zaW9uOiB7XG4gICAgbGVhdmU6ICh7IG5hbWUsIGludGVyZmFjZXMsIGRpcmVjdGl2ZXMsIGZpZWxkcyB9KSA9PlxuICAgICAgam9pbihcbiAgICAgICAgW1xuICAgICAgICAgICdleHRlbmQgdHlwZScsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB3cmFwKCdpbXBsZW1lbnRzICcsIGpvaW4oaW50ZXJmYWNlcywgJyAmICcpKSxcbiAgICAgICAgICBqb2luKGRpcmVjdGl2ZXMsICcgJyksXG4gICAgICAgICAgYmxvY2soZmllbGRzKSxcbiAgICAgICAgXSxcbiAgICAgICAgJyAnLFxuICAgICAgKSxcbiAgfSxcbiAgSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjoge1xuICAgIGxlYXZlOiAoeyBuYW1lLCBpbnRlcmZhY2VzLCBkaXJlY3RpdmVzLCBmaWVsZHMgfSkgPT5cbiAgICAgIGpvaW4oXG4gICAgICAgIFtcbiAgICAgICAgICAnZXh0ZW5kIGludGVyZmFjZScsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB3cmFwKCdpbXBsZW1lbnRzICcsIGpvaW4oaW50ZXJmYWNlcywgJyAmICcpKSxcbiAgICAgICAgICBqb2luKGRpcmVjdGl2ZXMsICcgJyksXG4gICAgICAgICAgYmxvY2soZmllbGRzKSxcbiAgICAgICAgXSxcbiAgICAgICAgJyAnLFxuICAgICAgKSxcbiAgfSxcbiAgVW5pb25UeXBlRXh0ZW5zaW9uOiB7XG4gICAgbGVhdmU6ICh7IG5hbWUsIGRpcmVjdGl2ZXMsIHR5cGVzIH0pID0+XG4gICAgICBqb2luKFxuICAgICAgICBbXG4gICAgICAgICAgJ2V4dGVuZCB1bmlvbicsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBqb2luKGRpcmVjdGl2ZXMsICcgJyksXG4gICAgICAgICAgd3JhcCgnPSAnLCBqb2luKHR5cGVzLCAnIHwgJykpLFxuICAgICAgICBdLFxuICAgICAgICAnICcsXG4gICAgICApLFxuICB9LFxuICBFbnVtVHlwZUV4dGVuc2lvbjoge1xuICAgIGxlYXZlOiAoeyBuYW1lLCBkaXJlY3RpdmVzLCB2YWx1ZXMgfSkgPT5cbiAgICAgIGpvaW4oWydleHRlbmQgZW51bScsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2sodmFsdWVzKV0sICcgJyksXG4gIH0sXG4gIElucHV0T2JqZWN0VHlwZUV4dGVuc2lvbjoge1xuICAgIGxlYXZlOiAoeyBuYW1lLCBkaXJlY3RpdmVzLCBmaWVsZHMgfSkgPT5cbiAgICAgIGpvaW4oWydleHRlbmQgaW5wdXQnLCBuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIGJsb2NrKGZpZWxkcyldLCAnICcpLFxuICB9LFxufTtcbi8qKlxuICogR2l2ZW4gbWF5YmVBcnJheSwgcHJpbnQgYW4gZW1wdHkgc3RyaW5nIGlmIGl0IGlzIG51bGwgb3IgZW1wdHksIG90aGVyd2lzZVxuICogcHJpbnQgYWxsIGl0ZW1zIHRvZ2V0aGVyIHNlcGFyYXRlZCBieSBzZXBhcmF0b3IgaWYgcHJvdmlkZWRcbiAqL1xuXG5mdW5jdGlvbiBqb2luKG1heWJlQXJyYXksIHNlcGFyYXRvciA9ICcnKSB7XG4gIHZhciBfbWF5YmVBcnJheSRmaWx0ZXIkam87XG5cbiAgcmV0dXJuIChfbWF5YmVBcnJheSRmaWx0ZXIkam8gPVxuICAgIG1heWJlQXJyYXkgPT09IG51bGwgfHwgbWF5YmVBcnJheSA9PT0gdm9pZCAwXG4gICAgICA/IHZvaWQgMFxuICAgICAgOiBtYXliZUFycmF5LmZpbHRlcigoeCkgPT4geCkuam9pbihzZXBhcmF0b3IpKSAhPT0gbnVsbCAmJlxuICAgIF9tYXliZUFycmF5JGZpbHRlciRqbyAhPT0gdm9pZCAwXG4gICAgPyBfbWF5YmVBcnJheSRmaWx0ZXIkam9cbiAgICA6ICcnO1xufVxuLyoqXG4gKiBHaXZlbiBhcnJheSwgcHJpbnQgZWFjaCBpdGVtIG9uIGl0cyBvd24gbGluZSwgd3JhcHBlZCBpbiBhbiBpbmRlbnRlZCBgeyB9YCBibG9jay5cbiAqL1xuXG5mdW5jdGlvbiBibG9jayhhcnJheSkge1xuICByZXR1cm4gd3JhcCgne1xcbicsIGluZGVudChqb2luKGFycmF5LCAnXFxuJykpLCAnXFxufScpO1xufVxuLyoqXG4gKiBJZiBtYXliZVN0cmluZyBpcyBub3QgbnVsbCBvciBlbXB0eSwgdGhlbiB3cmFwIHdpdGggc3RhcnQgYW5kIGVuZCwgb3RoZXJ3aXNlIHByaW50IGFuIGVtcHR5IHN0cmluZy5cbiAqL1xuXG5mdW5jdGlvbiB3cmFwKHN0YXJ0LCBtYXliZVN0cmluZywgZW5kID0gJycpIHtcbiAgcmV0dXJuIG1heWJlU3RyaW5nICE9IG51bGwgJiYgbWF5YmVTdHJpbmcgIT09ICcnXG4gICAgPyBzdGFydCArIG1heWJlU3RyaW5nICsgZW5kXG4gICAgOiAnJztcbn1cblxuZnVuY3Rpb24gaW5kZW50KHN0cikge1xuICByZXR1cm4gd3JhcCgnICAnLCBzdHIucmVwbGFjZSgvXFxuL2csICdcXG4gICcpKTtcbn1cblxuZnVuY3Rpb24gaGFzTXVsdGlsaW5lSXRlbXMobWF5YmVBcnJheSkge1xuICB2YXIgX21heWJlQXJyYXkkc29tZTtcblxuICAvLyBGSVhNRTogaHR0cHM6Ly9naXRodWIuY29tL2dyYXBocWwvZ3JhcGhxbC1qcy9pc3N1ZXMvMjIwM1xuXG4gIC8qIGM4IGlnbm9yZSBuZXh0ICovXG4gIHJldHVybiAoX21heWJlQXJyYXkkc29tZSA9XG4gICAgbWF5YmVBcnJheSA9PT0gbnVsbCB8fCBtYXliZUFycmF5ID09PSB2b2lkIDBcbiAgICAgID8gdm9pZCAwXG4gICAgICA6IG1heWJlQXJyYXkuc29tZSgoc3RyKSA9PiBzdHIuaW5jbHVkZXMoJ1xcbicpKSkgIT09IG51bGwgJiZcbiAgICBfbWF5YmVBcnJheSRzb21lICE9PSB2b2lkIDBcbiAgICA/IF9tYXliZUFycmF5JHNvbWVcbiAgICA6IGZhbHNlO1xufVxuIiwKICAgICJpbXBvcnQgeyBLaW5kIH0gZnJvbSAnLi9raW5kcy5tanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGVmaW5pdGlvbk5vZGUobm9kZSkge1xuICByZXR1cm4gKFxuICAgIGlzRXhlY3V0YWJsZURlZmluaXRpb25Ob2RlKG5vZGUpIHx8XG4gICAgaXNUeXBlU3lzdGVtRGVmaW5pdGlvbk5vZGUobm9kZSkgfHxcbiAgICBpc1R5cGVTeXN0ZW1FeHRlbnNpb25Ob2RlKG5vZGUpXG4gICk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNFeGVjdXRhYmxlRGVmaW5pdGlvbk5vZGUobm9kZSkge1xuICByZXR1cm4gKFxuICAgIG5vZGUua2luZCA9PT0gS2luZC5PUEVSQVRJT05fREVGSU5JVElPTiB8fFxuICAgIG5vZGUua2luZCA9PT0gS2luZC5GUkFHTUVOVF9ERUZJTklUSU9OXG4gICk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTZWxlY3Rpb25Ob2RlKG5vZGUpIHtcbiAgcmV0dXJuIChcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuRklFTEQgfHxcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuRlJBR01FTlRfU1BSRUFEIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLklOTElORV9GUkFHTUVOVFxuICApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsdWVOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIChcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuVkFSSUFCTEUgfHxcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuSU5UIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLkZMT0FUIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLlNUUklORyB8fFxuICAgIG5vZGUua2luZCA9PT0gS2luZC5CT09MRUFOIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLk5VTEwgfHxcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuRU5VTSB8fFxuICAgIG5vZGUua2luZCA9PT0gS2luZC5MSVNUIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLk9CSkVDVFxuICApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29uc3RWYWx1ZU5vZGUobm9kZSkge1xuICByZXR1cm4gKFxuICAgIGlzVmFsdWVOb2RlKG5vZGUpICYmXG4gICAgKG5vZGUua2luZCA9PT0gS2luZC5MSVNUXG4gICAgICA/IG5vZGUudmFsdWVzLnNvbWUoaXNDb25zdFZhbHVlTm9kZSlcbiAgICAgIDogbm9kZS5raW5kID09PSBLaW5kLk9CSkVDVFxuICAgICAgPyBub2RlLmZpZWxkcy5zb21lKChmaWVsZCkgPT4gaXNDb25zdFZhbHVlTm9kZShmaWVsZC52YWx1ZSkpXG4gICAgICA6IG5vZGUua2luZCAhPT0gS2luZC5WQVJJQUJMRSlcbiAgKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1R5cGVOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIChcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuTkFNRURfVFlQRSB8fFxuICAgIG5vZGUua2luZCA9PT0gS2luZC5MSVNUX1RZUEUgfHxcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuTk9OX05VTExfVFlQRVxuICApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVHlwZVN5c3RlbURlZmluaXRpb25Ob2RlKG5vZGUpIHtcbiAgcmV0dXJuIChcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuU0NIRU1BX0RFRklOSVRJT04gfHxcbiAgICBpc1R5cGVEZWZpbml0aW9uTm9kZShub2RlKSB8fFxuICAgIG5vZGUua2luZCA9PT0gS2luZC5ESVJFQ1RJVkVfREVGSU5JVElPTlxuICApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVHlwZURlZmluaXRpb25Ob2RlKG5vZGUpIHtcbiAgcmV0dXJuIChcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuU0NBTEFSX1RZUEVfREVGSU5JVElPTiB8fFxuICAgIG5vZGUua2luZCA9PT0gS2luZC5PQkpFQ1RfVFlQRV9ERUZJTklUSU9OIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLklOVEVSRkFDRV9UWVBFX0RFRklOSVRJT04gfHxcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuVU5JT05fVFlQRV9ERUZJTklUSU9OIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLkVOVU1fVFlQRV9ERUZJTklUSU9OIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLklOUFVUX09CSkVDVF9UWVBFX0RFRklOSVRJT05cbiAgKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1R5cGVTeXN0ZW1FeHRlbnNpb25Ob2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUua2luZCA9PT0gS2luZC5TQ0hFTUFfRVhURU5TSU9OIHx8IGlzVHlwZUV4dGVuc2lvbk5vZGUobm9kZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNUeXBlRXh0ZW5zaW9uTm9kZShub2RlKSB7XG4gIHJldHVybiAoXG4gICAgbm9kZS5raW5kID09PSBLaW5kLlNDQUxBUl9UWVBFX0VYVEVOU0lPTiB8fFxuICAgIG5vZGUua2luZCA9PT0gS2luZC5PQkpFQ1RfVFlQRV9FWFRFTlNJT04gfHxcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuSU5URVJGQUNFX1RZUEVfRVhURU5TSU9OIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLlVOSU9OX1RZUEVfRVhURU5TSU9OIHx8XG4gICAgbm9kZS5raW5kID09PSBLaW5kLkVOVU1fVFlQRV9FWFRFTlNJT04gfHxcbiAgICBub2RlLmtpbmQgPT09IEtpbmQuSU5QVVRfT0JKRUNUX1RZUEVfRVhURU5TSU9OXG4gICk7XG59XG4iLAogICAgImltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2aXNpdCwgQlJFQUssIEtpbmQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEluY2x1ZGUoX2EsIHZhcmlhYmxlcykge1xuICAgIHZhciBkaXJlY3RpdmVzID0gX2EuZGlyZWN0aXZlcztcbiAgICBpZiAoIWRpcmVjdGl2ZXMgfHwgIWRpcmVjdGl2ZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0SW5jbHVzaW9uRGlyZWN0aXZlcyhkaXJlY3RpdmVzKS5ldmVyeShmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGRpcmVjdGl2ZSA9IF9hLmRpcmVjdGl2ZSwgaWZBcmd1bWVudCA9IF9hLmlmQXJndW1lbnQ7XG4gICAgICAgIHZhciBldmFsZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICBpZiAoaWZBcmd1bWVudC52YWx1ZS5raW5kID09PSBcIlZhcmlhYmxlXCIpIHtcbiAgICAgICAgICAgIGV2YWxlZFZhbHVlID1cbiAgICAgICAgICAgICAgICB2YXJpYWJsZXMgJiYgdmFyaWFibGVzW2lmQXJndW1lbnQudmFsdWUubmFtZS52YWx1ZV07XG4gICAgICAgICAgICBpbnZhcmlhbnQoZXZhbGVkVmFsdWUgIT09IHZvaWQgMCwgMTA2LCBkaXJlY3RpdmUubmFtZS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBldmFsZWRWYWx1ZSA9IGlmQXJndW1lbnQudmFsdWUudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZS5uYW1lLnZhbHVlID09PSBcInNraXBcIiA/ICFldmFsZWRWYWx1ZSA6IGV2YWxlZFZhbHVlO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldERpcmVjdGl2ZU5hbWVzKHJvb3QpIHtcbiAgICB2YXIgbmFtZXMgPSBbXTtcbiAgICB2aXNpdChyb290LCB7XG4gICAgICAgIERpcmVjdGl2ZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIG5hbWVzLnB1c2gobm9kZS5uYW1lLnZhbHVlKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gbmFtZXM7XG59XG5leHBvcnQgdmFyIGhhc0FueURpcmVjdGl2ZXMgPSBmdW5jdGlvbiAobmFtZXMsIHJvb3QpIHtcbiAgICByZXR1cm4gaGFzRGlyZWN0aXZlcyhuYW1lcywgcm9vdCwgZmFsc2UpO1xufTtcbmV4cG9ydCB2YXIgaGFzQWxsRGlyZWN0aXZlcyA9IGZ1bmN0aW9uIChuYW1lcywgcm9vdCkge1xuICAgIHJldHVybiBoYXNEaXJlY3RpdmVzKG5hbWVzLCByb290LCB0cnVlKTtcbn07XG5leHBvcnQgZnVuY3Rpb24gaGFzRGlyZWN0aXZlcyhuYW1lcywgcm9vdCwgYWxsKSB7XG4gICAgdmFyIG5hbWVTZXQgPSBuZXcgU2V0KG5hbWVzKTtcbiAgICB2YXIgdW5pcXVlQ291bnQgPSBuYW1lU2V0LnNpemU7XG4gICAgdmlzaXQocm9vdCwge1xuICAgICAgICBEaXJlY3RpdmU6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICBpZiAobmFtZVNldC5kZWxldGUobm9kZS5uYW1lLnZhbHVlKSAmJiAoIWFsbCB8fCAhbmFtZVNldC5zaXplKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCUkVBSztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBJZiB3ZSBmb3VuZCBhbGwgdGhlIG5hbWVzLCBuYW1lU2V0IHdpbGwgYmUgZW1wdHkuIElmIHdlIG9ubHkgY2FyZSBhYm91dFxuICAgIC8vIGZpbmRpbmcgc29tZSBvZiB0aGVtLCB0aGUgPCBjb25kaXRpb24gaXMgc3VmZmljaWVudC5cbiAgICByZXR1cm4gYWxsID8gIW5hbWVTZXQuc2l6ZSA6IG5hbWVTZXQuc2l6ZSA8IHVuaXF1ZUNvdW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0NsaWVudEV4cG9ydHMoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQgJiYgaGFzRGlyZWN0aXZlcyhbXCJjbGllbnRcIiwgXCJleHBvcnRcIl0sIGRvY3VtZW50LCB0cnVlKTtcbn1cbmZ1bmN0aW9uIGlzSW5jbHVzaW9uRGlyZWN0aXZlKF9hKSB7XG4gICAgdmFyIHZhbHVlID0gX2EubmFtZS52YWx1ZTtcbiAgICByZXR1cm4gdmFsdWUgPT09IFwic2tpcFwiIHx8IHZhbHVlID09PSBcImluY2x1ZGVcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmNsdXNpb25EaXJlY3RpdmVzKGRpcmVjdGl2ZXMpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgaWYgKGRpcmVjdGl2ZXMgJiYgZGlyZWN0aXZlcy5sZW5ndGgpIHtcbiAgICAgICAgZGlyZWN0aXZlcy5mb3JFYWNoKGZ1bmN0aW9uIChkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgIGlmICghaXNJbmNsdXNpb25EaXJlY3RpdmUoZGlyZWN0aXZlKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgZGlyZWN0aXZlQXJndW1lbnRzID0gZGlyZWN0aXZlLmFyZ3VtZW50cztcbiAgICAgICAgICAgIHZhciBkaXJlY3RpdmVOYW1lID0gZGlyZWN0aXZlLm5hbWUudmFsdWU7XG4gICAgICAgICAgICBpbnZhcmlhbnQoZGlyZWN0aXZlQXJndW1lbnRzICYmIGRpcmVjdGl2ZUFyZ3VtZW50cy5sZW5ndGggPT09IDEsIDEwNywgZGlyZWN0aXZlTmFtZSk7XG4gICAgICAgICAgICB2YXIgaWZBcmd1bWVudCA9IGRpcmVjdGl2ZUFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIGludmFyaWFudChpZkFyZ3VtZW50Lm5hbWUgJiYgaWZBcmd1bWVudC5uYW1lLnZhbHVlID09PSBcImlmXCIsIDEwOCwgZGlyZWN0aXZlTmFtZSk7XG4gICAgICAgICAgICB2YXIgaWZWYWx1ZSA9IGlmQXJndW1lbnQudmFsdWU7XG4gICAgICAgICAgICAvLyBtZWFucyBpdCBoYXMgdG8gYmUgYSB2YXJpYWJsZSB2YWx1ZSBpZiB0aGlzIGlzIGEgdmFsaWQgQHNraXAgb3IgQGluY2x1ZGUgZGlyZWN0aXZlXG4gICAgICAgICAgICBpbnZhcmlhbnQoaWZWYWx1ZSAmJlxuICAgICAgICAgICAgICAgIChpZlZhbHVlLmtpbmQgPT09IFwiVmFyaWFibGVcIiB8fCBpZlZhbHVlLmtpbmQgPT09IFwiQm9vbGVhblZhbHVlXCIpLCAxMDksIGRpcmVjdGl2ZU5hbWUpO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBkaXJlY3RpdmU6IGRpcmVjdGl2ZSwgaWZBcmd1bWVudDogaWZBcmd1bWVudCB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRNYXNrTW9kZShmcmFnbWVudCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgdmFyIGRpcmVjdGl2ZSA9IChfYSA9IGZyYWdtZW50LmRpcmVjdGl2ZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maW5kKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgbmFtZSA9IF9hLm5hbWU7XG4gICAgICAgIHJldHVybiBuYW1lLnZhbHVlID09PSBcInVubWFza1wiO1xuICAgIH0pO1xuICAgIGlmICghZGlyZWN0aXZlKSB7XG4gICAgICAgIHJldHVybiBcIm1hc2tcIjtcbiAgICB9XG4gICAgdmFyIG1vZGVBcmcgPSAoX2IgPSBkaXJlY3RpdmUuYXJndW1lbnRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZmluZChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBfYS5uYW1lO1xuICAgICAgICByZXR1cm4gbmFtZS52YWx1ZSA9PT0gXCJtb2RlXCI7XG4gICAgfSk7XG4gICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKG1vZGVBcmcpIHtcbiAgICAgICAgICAgIGlmIChtb2RlQXJnLnZhbHVlLmtpbmQgPT09IEtpbmQuVkFSSUFCTEUpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKDExMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RlQXJnLnZhbHVlLmtpbmQgIT09IEtpbmQuU1RSSU5HKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2FybigxMTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZUFyZy52YWx1ZS52YWx1ZSAhPT0gXCJtaWdyYXRlXCIpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKDExMiwgbW9kZUFyZy52YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1vZGVBcmcgJiZcbiAgICAgICAgXCJ2YWx1ZVwiIGluIG1vZGVBcmcudmFsdWUgJiZcbiAgICAgICAgbW9kZUFyZy52YWx1ZS52YWx1ZSA9PT0gXCJtaWdyYXRlXCIpIHtcbiAgICAgICAgcmV0dXJuIFwibWlncmF0ZVwiO1xuICAgIH1cbiAgICByZXR1cm4gXCJ1bm1hc2tcIjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpcmVjdGl2ZXMuanMubWFwIiwKICAgICIvLyBBIFt0cmllXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UcmllKSBkYXRhIHN0cnVjdHVyZSB0aGF0IGhvbGRzXG4vLyBvYmplY3Qga2V5cyB3ZWFrbHksIHlldCBjYW4gYWxzbyBob2xkIG5vbi1vYmplY3Qga2V5cywgdW5saWtlIHRoZVxuLy8gbmF0aXZlIGBXZWFrTWFwYC5cbi8vIElmIG5vIG1ha2VEYXRhIGZ1bmN0aW9uIGlzIHN1cHBsaWVkLCB0aGUgbG9va2VkLXVwIGRhdGEgd2lsbCBiZSBhbiBlbXB0eSxcbi8vIG51bGwtcHJvdG90eXBlIE9iamVjdC5cbmNvbnN0IGRlZmF1bHRNYWtlRGF0YSA9ICgpID0+IE9iamVjdC5jcmVhdGUobnVsbCk7XG4vLyBVc2VmdWwgZm9yIHByb2Nlc3NpbmcgYXJndW1lbnRzIG9iamVjdHMgYXMgd2VsbCBhcyBhcnJheXMuXG5jb25zdCB7IGZvckVhY2gsIHNsaWNlIH0gPSBBcnJheS5wcm90b3R5cGU7XG5jb25zdCB7IGhhc093blByb3BlcnR5IH0gPSBPYmplY3QucHJvdG90eXBlO1xuZXhwb3J0IGNsYXNzIFRyaWUge1xuICAgIGNvbnN0cnVjdG9yKHdlYWtuZXNzID0gdHJ1ZSwgbWFrZURhdGEgPSBkZWZhdWx0TWFrZURhdGEpIHtcbiAgICAgICAgdGhpcy53ZWFrbmVzcyA9IHdlYWtuZXNzO1xuICAgICAgICB0aGlzLm1ha2VEYXRhID0gbWFrZURhdGE7XG4gICAgfVxuICAgIGxvb2t1cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9va3VwQXJyYXkoYXJndW1lbnRzKTtcbiAgICB9XG4gICAgbG9va3VwQXJyYXkoYXJyYXkpIHtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzO1xuICAgICAgICBmb3JFYWNoLmNhbGwoYXJyYXksIGtleSA9PiBub2RlID0gbm9kZS5nZXRDaGlsZFRyaWUoa2V5KSk7XG4gICAgICAgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG5vZGUsIFwiZGF0YVwiKVxuICAgICAgICAgICAgPyBub2RlLmRhdGFcbiAgICAgICAgICAgIDogbm9kZS5kYXRhID0gdGhpcy5tYWtlRGF0YShzbGljZS5jYWxsKGFycmF5KSk7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlZWtBcnJheShhcmd1bWVudHMpO1xuICAgIH1cbiAgICBwZWVrQXJyYXkoYXJyYXkpIHtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBub2RlICYmIGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgY29uc3QgbWFwID0gbm9kZS5tYXBGb3IoYXJyYXlbaV0sIGZhbHNlKTtcbiAgICAgICAgICAgIG5vZGUgPSBtYXAgJiYgbWFwLmdldChhcnJheVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5kYXRhO1xuICAgIH1cbiAgICByZW1vdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUFycmF5KGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJlbW92ZUFycmF5KGFycmF5KSB7XG4gICAgICAgIGxldCBkYXRhO1xuICAgICAgICBpZiAoYXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBoZWFkID0gYXJyYXlbMF07XG4gICAgICAgICAgICBjb25zdCBtYXAgPSB0aGlzLm1hcEZvcihoZWFkLCBmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IG1hcCAmJiBtYXAuZ2V0KGhlYWQpO1xuICAgICAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IGNoaWxkLnJlbW92ZUFycmF5KHNsaWNlLmNhbGwoYXJyYXksIDEpKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNoaWxkLmRhdGEgJiYgIWNoaWxkLndlYWsgJiYgIShjaGlsZC5zdHJvbmcgJiYgY2hpbGQuc3Ryb25nLnNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5kZWxldGUoaGVhZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGdldENoaWxkVHJpZShrZXkpIHtcbiAgICAgICAgY29uc3QgbWFwID0gdGhpcy5tYXBGb3Ioa2V5LCB0cnVlKTtcbiAgICAgICAgbGV0IGNoaWxkID0gbWFwLmdldChrZXkpO1xuICAgICAgICBpZiAoIWNoaWxkKVxuICAgICAgICAgICAgbWFwLnNldChrZXksIGNoaWxkID0gbmV3IFRyaWUodGhpcy53ZWFrbmVzcywgdGhpcy5tYWtlRGF0YSkpO1xuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICAgIG1hcEZvcihrZXksIGNyZWF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy53ZWFrbmVzcyAmJiBpc09ialJlZihrZXkpXG4gICAgICAgICAgICA/IHRoaXMud2VhayB8fCAoY3JlYXRlID8gdGhpcy53ZWFrID0gbmV3IFdlYWtNYXAgOiB2b2lkIDApXG4gICAgICAgICAgICA6IHRoaXMuc3Ryb25nIHx8IChjcmVhdGUgPyB0aGlzLnN0cm9uZyA9IG5ldyBNYXAgOiB2b2lkIDApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzT2JqUmVmKHZhbHVlKSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBGYWxsIHRocm91Z2ggdG8gcmV0dXJuIHRydWUuLi5cbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwKICAgICJpbXBvcnQgeyBtYXliZSB9IGZyb20gXCIuLi9nbG9iYWxzL2luZGV4LmpzXCI7XG52YXIgaXNSZWFjdE5hdGl2ZSA9IG1heWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5hdmlnYXRvci5wcm9kdWN0OyB9KSA9PSBcIlJlYWN0TmF0aXZlXCI7XG5leHBvcnQgdmFyIGNhblVzZVdlYWtNYXAgPSB0eXBlb2YgV2Vha01hcCA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgIShpc1JlYWN0TmF0aXZlICYmICFnbG9iYWwuSGVybWVzSW50ZXJuYWwpO1xuZXhwb3J0IHZhciBjYW5Vc2VXZWFrU2V0ID0gdHlwZW9mIFdlYWtTZXQgPT09IFwiZnVuY3Rpb25cIjtcbmV4cG9ydCB2YXIgY2FuVXNlU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuZm9yID09PSBcImZ1bmN0aW9uXCI7XG5leHBvcnQgdmFyIGNhblVzZUFzeW5jSXRlcmF0b3JTeW1ib2wgPSBjYW5Vc2VTeW1ib2wgJiYgU3ltYm9sLmFzeW5jSXRlcmF0b3I7XG5leHBvcnQgdmFyIGNhblVzZURPTSA9IHR5cGVvZiBtYXliZShmdW5jdGlvbiAoKSB7IHJldHVybiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudDsgfSkgPT09IFwiZnVuY3Rpb25cIjtcbnZhciB1c2luZ0pTRE9NID0gXG4vLyBGb2xsb3dpbmcgYWR2aWNlIGZvdW5kIGluIHRoaXMgY29tbWVudCBmcm9tIEBkb21lbmljIChtYWludGFpbmVyIG9mIGpzZG9tKTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qc2RvbS9qc2RvbS9pc3N1ZXMvMTUzNyNpc3N1ZWNvbW1lbnQtMjI5NDA1MzI3XG4vL1xuLy8gU2luY2Ugd2UgY29udHJvbCB0aGUgdmVyc2lvbiBvZiBKZXN0IGFuZCBqc2RvbSB1c2VkIHdoZW4gcnVubmluZyBBcG9sbG9cbi8vIENsaWVudCB0ZXN0cywgYW5kIHRoYXQgdmVyc2lvbiBpcyByZWNlbnQgZW5vdWdodCB0byBpbmNsdWRlIFwiIGpzZG9tL3gueS56XCJcbi8vIGF0IHRoZSBlbmQgb2YgdGhlIHVzZXIgYWdlbnQgc3RyaW5nLCBJIGJlbGlldmUgdGhpcyBjYXNlIGlzIGFsbCB3ZSBuZWVkIHRvXG4vLyBjaGVjay4gVGVzdGluZyBmb3IgXCJOb2RlLmpzXCIgd2FzIHJlY29tbWVuZGVkIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuLy8gd2l0aCBvbGRlciB2ZXJzaW9uIG9mIGpzZG9tLCBidXQgd2UgZG9uJ3QgaGF2ZSB0aGF0IHByb2JsZW0uXG5tYXliZShmdW5jdGlvbiAoKSB7IHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJqc2RvbVwiKSA+PSAwOyB9KSB8fCBmYWxzZTtcbi8vIE91ciB0ZXN0cyBzaG91bGQgYWxsIGNvbnRpbnVlIHRvIHBhc3MgaWYgd2UgcmVtb3ZlIHRoaXMgIXVzaW5nSlNET01cbi8vIGNvbmRpdGlvbiwgdGhlcmVieSBhbGxvd2luZyB1c2VMYXlvdXRFZmZlY3Qgd2hlbiB1c2luZyBqc2RvbS4gVW5mb3J0dW5hdGVseSxcbi8vIGlmIHdlIGFsbG93IHVzZUxheW91dEVmZmVjdCwgdGhlbiB1c2VTeW5jRXh0ZXJuYWxTdG9yZSBnZW5lcmF0ZXMgbWFueVxuLy8gd2FybmluZ3MgYWJvdXQgdXNlTGF5b3V0RWZmZWN0IGRvaW5nIG5vdGhpbmcgb24gdGhlIHNlcnZlci4gV2hpbGUgdGhlc2Vcbi8vIHdhcm5pbmdzIGFyZSBoYXJtbGVzcywgdGhpcyAhdXNpbmdKU0RPTSBjb25kaXRpb24gc2VlbXMgdG8gYmUgdGhlIGJlc3Qgd2F5IHRvXG4vLyBwcmV2ZW50IHRoZW0gKGkuZS4gc2tpcHBpbmcgdXNlTGF5b3V0RWZmZWN0IHdoZW4gdXNpbmcganNkb20pLlxuZXhwb3J0IHZhciBjYW5Vc2VMYXlvdXRFZmZlY3QgPSAoY2FuVXNlRE9NIHx8IGlzUmVhY3ROYXRpdmUpICYmICF1c2luZ0pTRE9NO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FuVXNlLmpzLm1hcCIsCiAgICAiZXhwb3J0IGZ1bmN0aW9uIGlzTm9uTnVsbE9iamVjdChvYmopIHtcbiAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgICByZXR1cm4gKG9iaiAhPT0gbnVsbCAmJlxuICAgICAgICB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIChPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fFxuICAgICAgICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgPT09IG51bGwpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9iamVjdHMuanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2Fzc2lnbiwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52YXJpYW50LCBuZXdJbnZhcmlhbnRFcnJvciB9IGZyb20gXCIuLi9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBCUkVBSywgdmlzaXQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuLyoqXG4gKiBSZXR1cm5zIGEgcXVlcnkgZG9jdW1lbnQgd2hpY2ggYWRkcyBhIHNpbmdsZSBxdWVyeSBvcGVyYXRpb24gdGhhdCBvbmx5XG4gKiBzcHJlYWRzIHRoZSB0YXJnZXQgZnJhZ21lbnQgaW5zaWRlIG9mIGl0LlxuICpcbiAqIFNvIGZvciBleGFtcGxlIGEgZG9jdW1lbnQgb2Y6XG4gKlxuICogYGBgZ3JhcGhxbFxuICogZnJhZ21lbnQgZm9vIG9uIEZvbyB7IGEgYiBjIH1cbiAqIGBgYFxuICpcbiAqIFR1cm5zIGludG86XG4gKlxuICogYGBgZ3JhcGhxbFxuICogeyAuLi5mb28gfVxuICpcbiAqIGZyYWdtZW50IGZvbyBvbiBGb28geyBhIGIgYyB9XG4gKiBgYGBcbiAqXG4gKiBUaGUgdGFyZ2V0IGZyYWdtZW50IHdpbGwgZWl0aGVyIGJlIHRoZSBvbmx5IGZyYWdtZW50IGluIHRoZSBkb2N1bWVudCwgb3IgYVxuICogZnJhZ21lbnQgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBgZnJhZ21lbnROYW1lYC4gSWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZVxuICogZnJhZ21lbnQsIGJ1dCBhIGBmcmFnbWVudE5hbWVgIHdhcyBub3QgZGVmaW5lZCB0aGVuIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRRdWVyeURvY3VtZW50KGRvY3VtZW50LCBmcmFnbWVudE5hbWUpIHtcbiAgICB2YXIgYWN0dWFsRnJhZ21lbnROYW1lID0gZnJhZ21lbnROYW1lO1xuICAgIC8vIEJ1aWxkIGFuIGFycmF5IG9mIGFsbCBvdXIgZnJhZ21lbnQgZGVmaW5pdGlvbnMgdGhhdCB3aWxsIGJlIHVzZWQgZm9yXG4gICAgLy8gdmFsaWRhdGlvbnMuIFdlIGFsc28gZG8gc29tZSB2YWxpZGF0aW9ucyBvbiB0aGUgb3RoZXIgZGVmaW5pdGlvbnMgaW4gdGhlXG4gICAgLy8gZG9jdW1lbnQgd2hpbGUgYnVpbGRpbmcgdGhpcyBsaXN0LlxuICAgIHZhciBmcmFnbWVudHMgPSBbXTtcbiAgICBkb2N1bWVudC5kZWZpbml0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZWZpbml0aW9uKSB7XG4gICAgICAgIC8vIFRocm93IGFuIGVycm9yIGlmIHdlIGVuY291bnRlciBhbiBvcGVyYXRpb24gZGVmaW5pdGlvbiBiZWNhdXNlIHdlIHdpbGxcbiAgICAgICAgLy8gZGVmaW5lIG91ciBvd24gb3BlcmF0aW9uIGRlZmluaXRpb24gbGF0ZXIgb24uXG4gICAgICAgIGlmIChkZWZpbml0aW9uLmtpbmQgPT09IFwiT3BlcmF0aW9uRGVmaW5pdGlvblwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXdJbnZhcmlhbnRFcnJvcihcbiAgICAgICAgICAgICAgICAxMTMsXG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbi5vcGVyYXRpb24sXG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID8gXCIgbmFtZWQgJ1wiLmNvbmNhdChkZWZpbml0aW9uLm5hbWUudmFsdWUsIFwiJ1wiKSA6IFwiXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIG91ciBkZWZpbml0aW9uIHRvIHRoZSBmcmFnbWVudHMgYXJyYXkgaWYgaXQgaXMgYSBmcmFnbWVudFxuICAgICAgICAvLyBkZWZpbml0aW9uLlxuICAgICAgICBpZiAoZGVmaW5pdGlvbi5raW5kID09PSBcIkZyYWdtZW50RGVmaW5pdGlvblwiKSB7XG4gICAgICAgICAgICBmcmFnbWVudHMucHVzaChkZWZpbml0aW9uKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIElmIHRoZSB1c2VyIGRpZCBub3QgZ2l2ZSB1cyBhIGZyYWdtZW50IG5hbWUgdGhlbiBsZXQgdXMgdHJ5IHRvIGdldCBhXG4gICAgLy8gbmFtZSBmcm9tIGEgc2luZ2xlIGZyYWdtZW50IGluIHRoZSBkZWZpbml0aW9uLlxuICAgIGlmICh0eXBlb2YgYWN0dWFsRnJhZ21lbnROYW1lID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGludmFyaWFudChmcmFnbWVudHMubGVuZ3RoID09PSAxLCAxMTQsIGZyYWdtZW50cy5sZW5ndGgpO1xuICAgICAgICBhY3R1YWxGcmFnbWVudE5hbWUgPSBmcmFnbWVudHNbMF0ubmFtZS52YWx1ZTtcbiAgICB9XG4gICAgLy8gR2VuZXJhdGUgYSBxdWVyeSBkb2N1bWVudCB3aXRoIGFuIG9wZXJhdGlvbiB0aGF0IHNpbXBseSBzcHJlYWRzIHRoZVxuICAgIC8vIGZyYWdtZW50IGluc2lkZSBvZiBpdC5cbiAgICB2YXIgcXVlcnkgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZG9jdW1lbnQpLCB7IGRlZmluaXRpb25zOiBfX3NwcmVhZEFycmF5KFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBraW5kOiBcIk9wZXJhdGlvbkRlZmluaXRpb25cIixcbiAgICAgICAgICAgICAgICAvLyBPcGVyYXRpb25UeXBlTm9kZSBpcyBhbiBlbnVtXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcInF1ZXJ5XCIsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uU2V0OiB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFwiU2VsZWN0aW9uU2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBcIkZyYWdtZW50U3ByZWFkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBcIk5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGFjdHVhbEZyYWdtZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfVxuICAgICAgICBdLCBkb2N1bWVudC5kZWZpbml0aW9ucywgdHJ1ZSkgfSk7XG4gICAgcmV0dXJuIHF1ZXJ5O1xufVxuLy8gVXRpbGl0eSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgbGlzdCBvZiBmcmFnbWVudCBkZWZpbml0aW9ucyBhbmQgbWFrZXMgYSBoYXNoIG91dCBvZiB0aGVtXG4vLyB0aGF0IG1hcHMgdGhlIG5hbWUgb2YgdGhlIGZyYWdtZW50IHRvIHRoZSBmcmFnbWVudCBkZWZpbml0aW9uLlxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50TWFwKGZyYWdtZW50cykge1xuICAgIGlmIChmcmFnbWVudHMgPT09IHZvaWQgMCkgeyBmcmFnbWVudHMgPSBbXTsgfVxuICAgIHZhciBzeW1UYWJsZSA9IHt9O1xuICAgIGZyYWdtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnbWVudCkge1xuICAgICAgICBzeW1UYWJsZVtmcmFnbWVudC5uYW1lLnZhbHVlXSA9IGZyYWdtZW50O1xuICAgIH0pO1xuICAgIHJldHVybiBzeW1UYWJsZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24oc2VsZWN0aW9uLCBmcmFnbWVudE1hcCkge1xuICAgIHN3aXRjaCAoc2VsZWN0aW9uLmtpbmQpIHtcbiAgICAgICAgY2FzZSBcIklubGluZUZyYWdtZW50XCI6XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgICAgICBjYXNlIFwiRnJhZ21lbnRTcHJlYWRcIjoge1xuICAgICAgICAgICAgdmFyIGZyYWdtZW50TmFtZSA9IHNlbGVjdGlvbi5uYW1lLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBmcmFnbWVudE1hcCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyYWdtZW50TWFwKGZyYWdtZW50TmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnJhZ21lbnQgPSBmcmFnbWVudE1hcCAmJiBmcmFnbWVudE1hcFtmcmFnbWVudE5hbWVdO1xuICAgICAgICAgICAgaW52YXJpYW50KGZyYWdtZW50LCAxMTUsIGZyYWdtZW50TmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gZnJhZ21lbnQgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRnVsbHlVbm1hc2tlZE9wZXJhdGlvbihkb2N1bWVudCkge1xuICAgIHZhciBpc1VubWFza2VkID0gdHJ1ZTtcbiAgICB2aXNpdChkb2N1bWVudCwge1xuICAgICAgICBGcmFnbWVudFNwcmVhZDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIGlzVW5tYXNrZWQgPVxuICAgICAgICAgICAgICAgICEhbm9kZS5kaXJlY3RpdmVzICYmXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZGlyZWN0aXZlcy5zb21lKGZ1bmN0aW9uIChkaXJlY3RpdmUpIHsgcmV0dXJuIGRpcmVjdGl2ZS5uYW1lLnZhbHVlID09PSBcInVubWFza1wiOyB9KTtcbiAgICAgICAgICAgIGlmICghaXNVbm1hc2tlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCUkVBSztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gaXNVbm1hc2tlZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZyYWdtZW50cy5qcy5tYXAiLAogICAgImZ1bmN0aW9uIGRlZmF1bHREaXNwb3NlKCkgeyB9XG5leHBvcnQgY2xhc3MgU3Ryb25nQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKG1heCA9IEluZmluaXR5LCBkaXNwb3NlID0gZGVmYXVsdERpc3Bvc2UpIHtcbiAgICAgICAgdGhpcy5tYXggPSBtYXg7XG4gICAgICAgIHRoaXMuZGlzcG9zZSA9IGRpc3Bvc2U7XG4gICAgICAgIHRoaXMubWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm5ld2VzdCA9IG51bGw7XG4gICAgICAgIHRoaXMub2xkZXN0ID0gbnVsbDtcbiAgICB9XG4gICAgaGFzKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuaGFzKGtleSk7XG4gICAgfVxuICAgIGdldChrZXkpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZ2V0Tm9kZShrZXkpO1xuICAgICAgICByZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLnNpemU7XG4gICAgfVxuICAgIGdldE5vZGUoa2V5KSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm1hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZSAhPT0gdGhpcy5uZXdlc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb2xkZXIsIG5ld2VyIH0gPSBub2RlO1xuICAgICAgICAgICAgaWYgKG5ld2VyKSB7XG4gICAgICAgICAgICAgICAgbmV3ZXIub2xkZXIgPSBvbGRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRlcikge1xuICAgICAgICAgICAgICAgIG9sZGVyLm5ld2VyID0gbmV3ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLm9sZGVyID0gdGhpcy5uZXdlc3Q7XG4gICAgICAgICAgICBub2RlLm9sZGVyLm5ld2VyID0gbm9kZTtcbiAgICAgICAgICAgIG5vZGUubmV3ZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5uZXdlc3QgPSBub2RlO1xuICAgICAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMub2xkZXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbGRlc3QgPSBuZXdlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmdldE5vZGUoa2V5KTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZSA9IHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgbmV3ZXI6IG51bGwsXG4gICAgICAgICAgICBvbGRlcjogdGhpcy5uZXdlc3RcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMubmV3ZXN0KSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdC5uZXdlciA9IG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXdlc3QgPSBub2RlO1xuICAgICAgICB0aGlzLm9sZGVzdCA9IHRoaXMub2xkZXN0IHx8IG5vZGU7XG4gICAgICAgIHRoaXMubWFwLnNldChrZXksIG5vZGUpO1xuICAgICAgICByZXR1cm4gbm9kZS52YWx1ZTtcbiAgICB9XG4gICAgY2xlYW4oKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLm9sZGVzdCAmJiB0aGlzLm1hcC5zaXplID4gdGhpcy5tYXgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlKHRoaXMub2xkZXN0LmtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlKGtleSkge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5tYXAuZ2V0KGtleSk7XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gdGhpcy5uZXdlc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5ld2VzdCA9IG5vZGUub2xkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gdGhpcy5vbGRlc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9sZGVzdCA9IG5vZGUubmV3ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS5uZXdlcikge1xuICAgICAgICAgICAgICAgIG5vZGUubmV3ZXIub2xkZXIgPSBub2RlLm9sZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5vZGUub2xkZXIpIHtcbiAgICAgICAgICAgICAgICBub2RlLm9sZGVyLm5ld2VyID0gbm9kZS5uZXdlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWFwLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKG5vZGUudmFsdWUsIGtleSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Ryb25nLmpzLm1hcCIsCiAgICAiZnVuY3Rpb24gbm9vcCgpIHsgfVxuY29uc3QgZGVmYXVsdERpc3Bvc2UgPSBub29wO1xuY29uc3QgX1dlYWtSZWYgPSB0eXBlb2YgV2Vha1JlZiAhPT0gXCJ1bmRlZmluZWRcIlxuICAgID8gV2Vha1JlZlxuICAgIDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB7IGRlcmVmOiAoKSA9PiB2YWx1ZSB9O1xuICAgIH07XG5jb25zdCBfV2Vha01hcCA9IHR5cGVvZiBXZWFrTWFwICE9PSBcInVuZGVmaW5lZFwiID8gV2Vha01hcCA6IE1hcDtcbmNvbnN0IF9GaW5hbGl6YXRpb25SZWdpc3RyeSA9IHR5cGVvZiBGaW5hbGl6YXRpb25SZWdpc3RyeSAhPT0gXCJ1bmRlZmluZWRcIlxuICAgID8gRmluYWxpemF0aW9uUmVnaXN0cnlcbiAgICA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlZ2lzdGVyOiBub29wLFxuICAgICAgICAgICAgdW5yZWdpc3Rlcjogbm9vcCxcbiAgICAgICAgfTtcbiAgICB9O1xuY29uc3QgZmluYWxpemF0aW9uQmF0Y2hTaXplID0gMTAwMjQ7XG5leHBvcnQgY2xhc3MgV2Vha0NhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihtYXggPSBJbmZpbml0eSwgZGlzcG9zZSA9IGRlZmF1bHREaXNwb3NlKSB7XG4gICAgICAgIHRoaXMubWF4ID0gbWF4O1xuICAgICAgICB0aGlzLmRpc3Bvc2UgPSBkaXNwb3NlO1xuICAgICAgICB0aGlzLm1hcCA9IG5ldyBfV2Vha01hcCgpO1xuICAgICAgICB0aGlzLm5ld2VzdCA9IG51bGw7XG4gICAgICAgIHRoaXMub2xkZXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy51bmZpbmFsaXplZE5vZGVzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmZpbmFsaXphdGlvblNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICB0aGlzLmZpbmFsaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlcmF0b3IgPSB0aGlzLnVuZmluYWxpemVkTm9kZXMudmFsdWVzKCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbmFsaXphdGlvbkJhdGNoU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGl0ZXJhdG9yLm5leHQoKS52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIHRoaXMudW5maW5hbGl6ZWROb2Rlcy5kZWxldGUobm9kZSk7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gbm9kZS5rZXk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG5vZGUua2V5O1xuICAgICAgICAgICAgICAgIG5vZGUua2V5UmVmID0gbmV3IF9XZWFrUmVmKGtleSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RyeS5yZWdpc3RlcihrZXksIG5vZGUsIG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudW5maW5hbGl6ZWROb2Rlcy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKHRoaXMuZmluYWxpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5hbGl6YXRpb25TY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWdpc3RyeSA9IG5ldyBfRmluYWxpemF0aW9uUmVnaXN0cnkodGhpcy5kZWxldGVOb2RlLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBoYXMoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5oYXMoa2V5KTtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5nZXROb2RlKGtleSk7XG4gICAgICAgIHJldHVybiBub2RlICYmIG5vZGUudmFsdWU7XG4gICAgfVxuICAgIGdldE5vZGUoa2V5KSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm1hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZSAhPT0gdGhpcy5uZXdlc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb2xkZXIsIG5ld2VyIH0gPSBub2RlO1xuICAgICAgICAgICAgaWYgKG5ld2VyKSB7XG4gICAgICAgICAgICAgICAgbmV3ZXIub2xkZXIgPSBvbGRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbGRlcikge1xuICAgICAgICAgICAgICAgIG9sZGVyLm5ld2VyID0gbmV3ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLm9sZGVyID0gdGhpcy5uZXdlc3Q7XG4gICAgICAgICAgICBub2RlLm9sZGVyLm5ld2VyID0gbm9kZTtcbiAgICAgICAgICAgIG5vZGUubmV3ZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5uZXdlc3QgPSBub2RlO1xuICAgICAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMub2xkZXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbGRlc3QgPSBuZXdlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmdldE5vZGUoa2V5KTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiAobm9kZS52YWx1ZSA9IHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0ge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBuZXdlcjogbnVsbCxcbiAgICAgICAgICAgIG9sZGVyOiB0aGlzLm5ld2VzdCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMubmV3ZXN0KSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdC5uZXdlciA9IG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXdlc3QgPSBub2RlO1xuICAgICAgICB0aGlzLm9sZGVzdCA9IHRoaXMub2xkZXN0IHx8IG5vZGU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVGaW5hbGl6YXRpb24obm9kZSk7XG4gICAgICAgIHRoaXMubWFwLnNldChrZXksIG5vZGUpO1xuICAgICAgICB0aGlzLnNpemUrKztcbiAgICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gICAgfVxuICAgIGNsZWFuKCkge1xuICAgICAgICB3aGlsZSAodGhpcy5vbGRlc3QgJiYgdGhpcy5zaXplID4gdGhpcy5tYXgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlTm9kZSh0aGlzLm9sZGVzdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVsZXRlTm9kZShub2RlKSB7XG4gICAgICAgIGlmIChub2RlID09PSB0aGlzLm5ld2VzdCkge1xuICAgICAgICAgICAgdGhpcy5uZXdlc3QgPSBub2RlLm9sZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlID09PSB0aGlzLm9sZGVzdCkge1xuICAgICAgICAgICAgdGhpcy5vbGRlc3QgPSBub2RlLm5ld2VyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLm5ld2VyKSB7XG4gICAgICAgICAgICBub2RlLm5ld2VyLm9sZGVyID0gbm9kZS5vbGRlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5vbGRlcikge1xuICAgICAgICAgICAgbm9kZS5vbGRlci5uZXdlciA9IG5vZGUubmV3ZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaXplLS07XG4gICAgICAgIGNvbnN0IGtleSA9IG5vZGUua2V5IHx8IChub2RlLmtleVJlZiAmJiBub2RlLmtleVJlZi5kZXJlZigpKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKG5vZGUudmFsdWUsIGtleSk7XG4gICAgICAgIGlmICghbm9kZS5rZXlSZWYpIHtcbiAgICAgICAgICAgIHRoaXMudW5maW5hbGl6ZWROb2Rlcy5kZWxldGUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdHJ5LnVucmVnaXN0ZXIobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSlcbiAgICAgICAgICAgIHRoaXMubWFwLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICBkZWxldGUoa2V5KSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm1hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlTm9kZShub2RlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc2NoZWR1bGVGaW5hbGl6YXRpb24obm9kZSkge1xuICAgICAgICB0aGlzLnVuZmluYWxpemVkTm9kZXMuYWRkKG5vZGUpO1xuICAgICAgICBpZiAoIXRoaXMuZmluYWxpemF0aW9uU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmFsaXphdGlvblNjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgICAgICBxdWV1ZU1pY3JvdGFzayh0aGlzLmZpbmFsaXplKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdlYWsuanMubWFwIiwKICAgICJpbXBvcnQgeyBXZWFrQ2FjaGUsIFN0cm9uZ0NhY2hlIH0gZnJvbSBcIkB3cnkvY2FjaGVzXCI7XG52YXIgc2NoZWR1bGVkQ2xlYW51cCA9IG5ldyBXZWFrU2V0KCk7XG5mdW5jdGlvbiBzY2hlZHVsZShjYWNoZSkge1xuICAgIGlmIChjYWNoZS5zaXplIDw9IChjYWNoZS5tYXggfHwgLTEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFzY2hlZHVsZWRDbGVhbnVwLmhhcyhjYWNoZSkpIHtcbiAgICAgICAgc2NoZWR1bGVkQ2xlYW51cC5hZGQoY2FjaGUpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhY2hlLmNsZWFuKCk7XG4gICAgICAgICAgICBzY2hlZHVsZWRDbGVhbnVwLmRlbGV0ZShjYWNoZSk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEEgdmVyc2lvbiBvZiBXZWFrQ2FjaGUgdGhhdCB3aWxsIGF1dG8tc2NoZWR1bGUgYSBjbGVhbnVwIG9mIHRoZSBjYWNoZSB3aGVuXG4gKiBhIG5ldyBpdGVtIGlzIGFkZGVkIGFuZCB0aGUgY2FjaGUgcmVhY2hlZCBtYXhpbXVtIHNpemUuXG4gKiBUaHJvdHRsZWQgdG8gb25jZSBwZXIgMTAwbXMuXG4gKlxuICogQHByaXZhdGVSZW1hcmtzXG4gKiBTaG91bGQgYmUgdXNlZCB0aHJvdWdob3V0IHRoZSByZXN0IG9mIHRoZSBjb2RlYmFzZSBpbnN0ZWFkIG9mIFdlYWtDYWNoZSxcbiAqIHdpdGggdGhlIG5vdGFibGUgZXhjZXB0aW9uIG9mIHVzYWdlIGluIGB3cmFwYCBmcm9tIGBvcHRpbWlzbWAgLSB0aGF0IG9uZVxuICogYWxyZWFkeSBoYW5kbGVzIGNsZWFudXAgYW5kIHNob3VsZCByZW1haW4gYSBgV2Vha0NhY2hlYC5cbiAqL1xuZXhwb3J0IHZhciBBdXRvQ2xlYW5lZFdlYWtDYWNoZSA9IGZ1bmN0aW9uIChtYXgsIGRpc3Bvc2UpIHtcbiAgICAvKlxuICAgIFNvbWUgYnVpbGRzIG9mIGBXZWFrQ2FjaGVgIGFyZSBmdW5jdGlvbiBwcm90b3R5cGVzLCBzb21lIGFyZSBjbGFzc2VzLlxuICAgIFRoaXMgbGlicmFyeSBzdGlsbCBidWlsZHMgd2l0aCBhbiBFUzUgdGFyZ2V0LCBzbyB3ZSBjYW4ndCBleHRlbmQgdGhlXG4gICAgcmVhbCBjbGFzc2VzLlxuICAgIEluc3RlYWQsIHdlIGhhdmUgdG8gdXNlIHRoaXMgd29ya2Fyb3VuZCB1bnRpbCB3ZSBzd2l0Y2ggdG8gYSBuZXdlciBidWlsZFxuICAgIHRhcmdldC5cbiAgICAqL1xuICAgIHZhciBjYWNoZSA9IG5ldyBXZWFrQ2FjaGUobWF4LCBkaXNwb3NlKTtcbiAgICBjYWNoZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgcmV0ID0gV2Vha0NhY2hlLnByb3RvdHlwZS5zZXQuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcbiAgICAgICAgc2NoZWR1bGUodGhpcyk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICByZXR1cm4gY2FjaGU7XG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEEgdmVyc2lvbiBvZiBTdHJvbmdDYWNoZSB0aGF0IHdpbGwgYXV0by1zY2hlZHVsZSBhIGNsZWFudXAgb2YgdGhlIGNhY2hlIHdoZW5cbiAqIGEgbmV3IGl0ZW0gaXMgYWRkZWQgYW5kIHRoZSBjYWNoZSByZWFjaGVkIG1heGltdW0gc2l6ZS5cbiAqIFRocm90dGxlZCB0byBvbmNlIHBlciAxMDBtcy5cbiAqXG4gKiBAcHJpdmF0ZVJlbWFya3NcbiAqIFNob3VsZCBiZSB1c2VkIHRocm91Z2hvdXQgdGhlIHJlc3Qgb2YgdGhlIGNvZGViYXNlIGluc3RlYWQgb2YgU3Ryb25nQ2FjaGUsXG4gKiB3aXRoIHRoZSBub3RhYmxlIGV4Y2VwdGlvbiBvZiB1c2FnZSBpbiBgd3JhcGAgZnJvbSBgb3B0aW1pc21gIC0gdGhhdCBvbmVcbiAqIGFscmVhZHkgaGFuZGxlcyBjbGVhbnVwIGFuZCBzaG91bGQgcmVtYWluIGEgYFN0cm9uZ0NhY2hlYC5cbiAqL1xuZXhwb3J0IHZhciBBdXRvQ2xlYW5lZFN0cm9uZ0NhY2hlID0gZnVuY3Rpb24gKG1heCwgZGlzcG9zZSkge1xuICAgIC8qXG4gICAgU29tZSBidWlsZHMgb2YgYFN0cm9uZ0NhY2hlYCBhcmUgZnVuY3Rpb24gcHJvdG90eXBlcywgc29tZSBhcmUgY2xhc3Nlcy5cbiAgICBUaGlzIGxpYnJhcnkgc3RpbGwgYnVpbGRzIHdpdGggYW4gRVM1IHRhcmdldCwgc28gd2UgY2FuJ3QgZXh0ZW5kIHRoZVxuICAgIHJlYWwgY2xhc3Nlcy5cbiAgICBJbnN0ZWFkLCB3ZSBoYXZlIHRvIHVzZSB0aGlzIHdvcmthcm91bmQgdW50aWwgd2Ugc3dpdGNoIHRvIGEgbmV3ZXIgYnVpbGRcbiAgICB0YXJnZXQuXG4gICAgKi9cbiAgICB2YXIgY2FjaGUgPSBuZXcgU3Ryb25nQ2FjaGUobWF4LCBkaXNwb3NlKTtcbiAgICBjYWNoZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB2YXIgcmV0ID0gU3Ryb25nQ2FjaGUucHJvdG90eXBlLnNldC5jYWxsKHRoaXMsIGtleSwgdmFsdWUpO1xuICAgICAgICBzY2hlZHVsZSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9O1xuICAgIHJldHVybiBjYWNoZTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWNoZXMuanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgZ2xvYmFsIH0gZnJvbSBcIi4uL2dsb2JhbHMvaW5kZXguanNcIjtcbnZhciBjYWNoZVNpemVTeW1ib2wgPSBTeW1ib2wuZm9yKFwiYXBvbGxvLmNhY2hlU2l6ZVwiKTtcbi8qKlxuICpcbiAqIFRoZSBnbG9iYWwgY2FjaGUgc2l6ZSBjb25maWd1cmF0aW9uIGZvciBBcG9sbG8gQ2xpZW50LlxuICpcbiAqIEByZW1hcmtzXG4gKlxuICogWW91IGNhbiBkaXJlY3RseSBtb2RpZnkgdGhpcyBvYmplY3QsIGJ1dCBhbnkgbW9kaWZpY2F0aW9uIHdpbGxcbiAqIG9ubHkgaGF2ZSBhbiBlZmZlY3Qgb24gY2FjaGVzIHRoYXQgYXJlIGNyZWF0ZWQgYWZ0ZXIgdGhlIG1vZGlmaWNhdGlvbi5cbiAqXG4gKiBTbyBmb3IgZ2xvYmFsIGNhY2hlcywgc3VjaCBhcyBgcGFyc2VyYCwgYGNhbm9uaWNhbFN0cmluZ2lmeWAgYW5kIGBwcmludGAsXG4gKiB5b3UgbWlnaHQgbmVlZCB0byBjYWxsIGAucmVzZXRgIG9uIHRoZW0sIHdoaWNoIHdpbGwgZXNzZW50aWFsbHkgcmUtY3JlYXRlIHRoZW0uXG4gKlxuICogQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBzZXQgYGdsb2JhbFRoaXNbU3ltYm9sLmZvcihcImFwb2xsby5jYWNoZVNpemVcIildYCBiZWZvcmVcbiAqIHlvdSBsb2FkIHRoZSBBcG9sbG8gQ2xpZW50IHBhY2thZ2U6XG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBnbG9iYWxUaGlzW1N5bWJvbC5mb3IoXCJhcG9sbG8uY2FjaGVTaXplXCIpXSA9IHtcbiAqICAgcGFyc2VyOiAxMDBcbiAqIH0gc2F0aXNmaWVzIFBhcnRpYWw8Q2FjaGVTaXplcz4gLy8gdGhlIGBzYXRpc2ZpZXNgIGlzIG9wdGlvbmFsIGlmIHVzaW5nIFR5cGVTY3JpcHRcbiAqIGBgYFxuICovXG5leHBvcnQgdmFyIGNhY2hlU2l6ZXMgPSBfX2Fzc2lnbih7fSwgZ2xvYmFsW2NhY2hlU2l6ZVN5bWJvbF0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2l6ZXMuanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2Fzc2lnbiwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgY2FjaGVTaXplcyB9IGZyb20gXCIuL3NpemVzLmpzXCI7XG52YXIgZ2xvYmFsQ2FjaGVzID0ge307XG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJHbG9iYWxDYWNoZShuYW1lLCBnZXRTaXplKSB7XG4gICAgZ2xvYmFsQ2FjaGVzW25hbWVdID0gZ2V0U2l6ZTtcbn1cbi8qKlxuICogRm9yIGludGVybmFsIHB1cnBvc2VzIG9ubHkgLSBwbGVhc2UgY2FsbCBgQXBvbGxvQ2xpZW50LmdldE1lbW9yeUludGVybmFsc2AgaW5zdGVhZFxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBvbGxvQ2xpZW50TWVtb3J5SW50ZXJuYWxzID0gZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSA/XG4gICAgX2dldEFwb2xsb0NsaWVudE1lbW9yeUludGVybmFsc1xuICAgIDogdW5kZWZpbmVkO1xuLyoqXG4gKiBGb3IgaW50ZXJuYWwgcHVycG9zZXMgb25seSAtIHBsZWFzZSBjYWxsIGBBcG9sbG9DbGllbnQuZ2V0TWVtb3J5SW50ZXJuYWxzYCBpbnN0ZWFkXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHZhciBnZXRJbk1lbW9yeUNhY2hlTWVtb3J5SW50ZXJuYWxzID0gZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSA/XG4gICAgX2dldEluTWVtb3J5Q2FjaGVNZW1vcnlJbnRlcm5hbHNcbiAgICA6IHVuZGVmaW5lZDtcbi8qKlxuICogRm9yIGludGVybmFsIHB1cnBvc2VzIG9ubHkgLSBwbGVhc2UgY2FsbCBgQXBvbGxvQ2xpZW50LmdldE1lbW9yeUludGVybmFsc2AgaW5zdGVhZFxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgZ2V0QXBvbGxvQ2FjaGVNZW1vcnlJbnRlcm5hbHMgPSBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlID9cbiAgICBfZ2V0QXBvbGxvQ2FjaGVNZW1vcnlJbnRlcm5hbHNcbiAgICA6IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGdldEN1cnJlbnRDYWNoZVNpemVzKCkge1xuICAgIC8vIGBkZWZhdWx0Q2FjaGVTaXplc2AgaXMgYSBgY29uc3QgZW51bWAgdGhhdCB3aWxsIGJlIGlubGluZWQgZHVyaW5nIGJ1aWxkLCBzbyB3ZSBoYXZlIHRvIHJlY29uc3RydWN0IGl0J3Mgc2hhcGUgaGVyZVxuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgcGFyc2VyOiAxMDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wicGFyc2VyXCJdICovLFxuICAgICAgICBjYW5vbmljYWxTdHJpbmdpZnk6IDEwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJjYW5vbmljYWxTdHJpbmdpZnlcIl0gKi8sXG4gICAgICAgIHByaW50OiAyMDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wicHJpbnRcIl0gKi8sXG4gICAgICAgIFwiZG9jdW1lbnRUcmFuc2Zvcm0uY2FjaGVcIjogMjAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcImRvY3VtZW50VHJhbnNmb3JtLmNhY2hlXCJdICovLFxuICAgICAgICBcInF1ZXJ5TWFuYWdlci5nZXREb2N1bWVudEluZm9cIjogMjAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcInF1ZXJ5TWFuYWdlci5nZXREb2N1bWVudEluZm9cIl0gKi8sXG4gICAgICAgIFwiUGVyc2lzdGVkUXVlcnlMaW5rLnBlcnNpc3RlZFF1ZXJ5SGFzaGVzXCI6IDIwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJQZXJzaXN0ZWRRdWVyeUxpbmsucGVyc2lzdGVkUXVlcnlIYXNoZXNcIl0gKi8sXG4gICAgICAgIFwiZnJhZ21lbnRSZWdpc3RyeS50cmFuc2Zvcm1cIjogMjAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcImZyYWdtZW50UmVnaXN0cnkudHJhbnNmb3JtXCJdICovLFxuICAgICAgICBcImZyYWdtZW50UmVnaXN0cnkubG9va3VwXCI6IDEwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJmcmFnbWVudFJlZ2lzdHJ5Lmxvb2t1cFwiXSAqLyxcbiAgICAgICAgXCJmcmFnbWVudFJlZ2lzdHJ5LmZpbmRGcmFnbWVudFNwcmVhZHNcIjogNDAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcImZyYWdtZW50UmVnaXN0cnkuZmluZEZyYWdtZW50U3ByZWFkc1wiXSAqLyxcbiAgICAgICAgXCJjYWNoZS5mcmFnbWVudFF1ZXJ5RG9jdW1lbnRzXCI6IDEwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJjYWNoZS5mcmFnbWVudFF1ZXJ5RG9jdW1lbnRzXCJdICovLFxuICAgICAgICBcInJlbW92ZVR5cGVuYW1lRnJvbVZhcmlhYmxlcy5nZXRWYXJpYWJsZURlZmluaXRpb25zXCI6IDIwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJyZW1vdmVUeXBlbmFtZUZyb21WYXJpYWJsZXMuZ2V0VmFyaWFibGVEZWZpbml0aW9uc1wiXSAqLyxcbiAgICAgICAgXCJpbk1lbW9yeUNhY2hlLm1heWJlQnJvYWRjYXN0V2F0Y2hcIjogNTAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcImluTWVtb3J5Q2FjaGUubWF5YmVCcm9hZGNhc3RXYXRjaFwiXSAqLyxcbiAgICAgICAgXCJpbk1lbW9yeUNhY2hlLmV4ZWN1dGVTZWxlY3Rpb25TZXRcIjogNTAwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJpbk1lbW9yeUNhY2hlLmV4ZWN1dGVTZWxlY3Rpb25TZXRcIl0gKi8sXG4gICAgICAgIFwiaW5NZW1vcnlDYWNoZS5leGVjdXRlU3ViU2VsZWN0ZWRBcnJheVwiOiAxMDAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcImluTWVtb3J5Q2FjaGUuZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXlcIl0gKi8sXG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGRlZmF1bHRzKS5tYXAoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBrID0gX2FbMF0sIHYgPSBfYVsxXTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGssXG4gICAgICAgICAgICBjYWNoZVNpemVzW2tdIHx8IHYsXG4gICAgICAgIF07XG4gICAgfSkpO1xufVxuZnVuY3Rpb24gX2dldEFwb2xsb0NsaWVudE1lbW9yeUludGVybmFscygpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgIGlmICghKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvbmx5IHN1cHBvcnRlZCBpbiBkZXZlbG9wbWVudCBtb2RlXCIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGxpbWl0czogZ2V0Q3VycmVudENhY2hlU2l6ZXMoKSxcbiAgICAgICAgc2l6ZXM6IF9fYXNzaWduKHsgcHJpbnQ6IChfYSA9IGdsb2JhbENhY2hlcy5wcmludCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwoZ2xvYmFsQ2FjaGVzKSwgcGFyc2VyOiAoX2IgPSBnbG9iYWxDYWNoZXMucGFyc2VyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChnbG9iYWxDYWNoZXMpLCBjYW5vbmljYWxTdHJpbmdpZnk6IChfYyA9IGdsb2JhbENhY2hlcy5jYW5vbmljYWxTdHJpbmdpZnkpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5jYWxsKGdsb2JhbENhY2hlcyksIGxpbmtzOiBsaW5rSW5mbyh0aGlzLmxpbmspLCBxdWVyeU1hbmFnZXI6IHtcbiAgICAgICAgICAgICAgICBnZXREb2N1bWVudEluZm86IHRoaXNbXCJxdWVyeU1hbmFnZXJcIl1bXCJ0cmFuc2Zvcm1DYWNoZVwiXS5zaXplLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50VHJhbnNmb3JtczogdHJhbnNmb3JtSW5mbyh0aGlzW1wicXVlcnlNYW5hZ2VyXCJdLmRvY3VtZW50VHJhbnNmb3JtKSxcbiAgICAgICAgICAgIH0gfSwgKF9lID0gKF9kID0gdGhpcy5jYWNoZSkuZ2V0TWVtb3J5SW50ZXJuYWxzKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UuY2FsbChfZCkpLFxuICAgIH07XG59XG5mdW5jdGlvbiBfZ2V0QXBvbGxvQ2FjaGVNZW1vcnlJbnRlcm5hbHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2FjaGU6IHtcbiAgICAgICAgICAgIGZyYWdtZW50UXVlcnlEb2N1bWVudHM6IGdldFdyYXBwZXJJbmZvcm1hdGlvbih0aGlzW1wiZ2V0RnJhZ21lbnREb2NcIl0pLFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBfZ2V0SW5NZW1vcnlDYWNoZU1lbW9yeUludGVybmFscygpIHtcbiAgICB2YXIgZnJhZ21lbnRzID0gdGhpcy5jb25maWcuZnJhZ21lbnRzO1xuICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgX2dldEFwb2xsb0NhY2hlTWVtb3J5SW50ZXJuYWxzLmFwcGx5KHRoaXMpKSwgeyBhZGRUeXBlbmFtZURvY3VtZW50VHJhbnNmb3JtOiB0cmFuc2Zvcm1JbmZvKHRoaXNbXCJhZGRUeXBlbmFtZVRyYW5zZm9ybVwiXSksIGluTWVtb3J5Q2FjaGU6IHtcbiAgICAgICAgICAgIGV4ZWN1dGVTZWxlY3Rpb25TZXQ6IGdldFdyYXBwZXJJbmZvcm1hdGlvbih0aGlzW1wic3RvcmVSZWFkZXJcIl1bXCJleGVjdXRlU2VsZWN0aW9uU2V0XCJdKSxcbiAgICAgICAgICAgIGV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5OiBnZXRXcmFwcGVySW5mb3JtYXRpb24odGhpc1tcInN0b3JlUmVhZGVyXCJdW1wiZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXlcIl0pLFxuICAgICAgICAgICAgbWF5YmVCcm9hZGNhc3RXYXRjaDogZ2V0V3JhcHBlckluZm9ybWF0aW9uKHRoaXNbXCJtYXliZUJyb2FkY2FzdFdhdGNoXCJdKSxcbiAgICAgICAgfSwgZnJhZ21lbnRSZWdpc3RyeToge1xuICAgICAgICAgICAgZmluZEZyYWdtZW50U3ByZWFkczogZ2V0V3JhcHBlckluZm9ybWF0aW9uKGZyYWdtZW50cyA9PT0gbnVsbCB8fCBmcmFnbWVudHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZyYWdtZW50cy5maW5kRnJhZ21lbnRTcHJlYWRzKSxcbiAgICAgICAgICAgIGxvb2t1cDogZ2V0V3JhcHBlckluZm9ybWF0aW9uKGZyYWdtZW50cyA9PT0gbnVsbCB8fCBmcmFnbWVudHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZyYWdtZW50cy5sb29rdXApLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiBnZXRXcmFwcGVySW5mb3JtYXRpb24oZnJhZ21lbnRzID09PSBudWxsIHx8IGZyYWdtZW50cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZnJhZ21lbnRzLnRyYW5zZm9ybSksXG4gICAgICAgIH0gfSk7XG59XG5mdW5jdGlvbiBpc1dyYXBwZXIoZikge1xuICAgIHJldHVybiAhIWYgJiYgXCJkaXJ0eUtleVwiIGluIGY7XG59XG5mdW5jdGlvbiBnZXRXcmFwcGVySW5mb3JtYXRpb24oZikge1xuICAgIHJldHVybiBpc1dyYXBwZXIoZikgPyBmLnNpemUgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBpc0RlZmluZWQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT0gbnVsbDtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUluZm8odHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIHJlY3Vyc2VUcmFuc2Zvcm1JbmZvKHRyYW5zZm9ybSkubWFwKGZ1bmN0aW9uIChjYWNoZSkgeyByZXR1cm4gKHsgY2FjaGU6IGNhY2hlIH0pOyB9KTtcbn1cbmZ1bmN0aW9uIHJlY3Vyc2VUcmFuc2Zvcm1JbmZvKHRyYW5zZm9ybSkge1xuICAgIHJldHVybiB0cmFuc2Zvcm0gP1xuICAgICAgICBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW1xuICAgICAgICAgICAgZ2V0V3JhcHBlckluZm9ybWF0aW9uKHRyYW5zZm9ybSA9PT0gbnVsbCB8fCB0cmFuc2Zvcm0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRyYW5zZm9ybVtcInBlcmZvcm1Xb3JrXCJdKVxuICAgICAgICBdLCByZWN1cnNlVHJhbnNmb3JtSW5mbyh0cmFuc2Zvcm0gPT09IG51bGwgfHwgdHJhbnNmb3JtID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0cmFuc2Zvcm1bXCJsZWZ0XCJdKSwgdHJ1ZSksIHJlY3Vyc2VUcmFuc2Zvcm1JbmZvKHRyYW5zZm9ybSA9PT0gbnVsbCB8fCB0cmFuc2Zvcm0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRyYW5zZm9ybVtcInJpZ2h0XCJdKSwgdHJ1ZSkuZmlsdGVyKGlzRGVmaW5lZClcbiAgICAgICAgOiBbXTtcbn1cbmZ1bmN0aW9uIGxpbmtJbmZvKGxpbmspIHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIGxpbmsgP1xuICAgICAgICBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW1xuICAgICAgICAgICAgKF9hID0gbGluayA9PT0gbnVsbCB8fCBsaW5rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsaW5rLmdldE1lbW9yeUludGVybmFscykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwobGluaylcbiAgICAgICAgXSwgbGlua0luZm8obGluayA9PT0gbnVsbCB8fCBsaW5rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsaW5rLmxlZnQpLCB0cnVlKSwgbGlua0luZm8obGluayA9PT0gbnVsbCB8fCBsaW5rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsaW5rLnJpZ2h0KSwgdHJ1ZSkuZmlsdGVyKGlzRGVmaW5lZClcbiAgICAgICAgOiBbXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldE1lbW9yeUludGVybmFscy5qcy5tYXAiLAogICAgImltcG9ydCB7IEF1dG9DbGVhbmVkU3Ryb25nQ2FjaGUsIGNhY2hlU2l6ZXMsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9jYWNoaW5nL2luZGV4LmpzXCI7XG5pbXBvcnQgeyByZWdpc3Rlckdsb2JhbENhY2hlIH0gZnJvbSBcIi4uL2NhY2hpbmcvZ2V0TWVtb3J5SW50ZXJuYWxzLmpzXCI7XG4vKipcbiAqIExpa2UgSlNPTi5zdHJpbmdpZnksIGJ1dCB3aXRoIG9iamVjdCBrZXlzIGFsd2F5cyBzb3J0ZWQgaW4gdGhlIHNhbWUgb3JkZXIuXG4gKlxuICogVG8gYWNoaWV2ZSBwZXJmb3JtYW50IHNvcnRpbmcsIHRoaXMgZnVuY3Rpb24gdXNlcyBhIE1hcCBmcm9tIEpTT04tc2VyaWFsaXplZFxuICogYXJyYXlzIG9mIGtleXMgKGluIGFueSBvcmRlcikgdG8gc29ydGVkIGFycmF5cyBvZiB0aGUgc2FtZSBrZXlzLCB3aXRoIGFcbiAqIHNpbmdsZSBzb3J0ZWQgYXJyYXkgcmVmZXJlbmNlIHNoYXJlZCBieSBhbGwgcGVybXV0YXRpb25zIG9mIHRoZSBrZXlzLlxuICpcbiAqIEFzIGEgZHJhd2JhY2ssIHRoaXMgZnVuY3Rpb24gd2lsbCBhZGQgYSBsaXR0bGUgYml0IG1vcmUgbWVtb3J5IGZvciBldmVyeVxuICogb2JqZWN0IGVuY291bnRlcmVkIHRoYXQgaGFzIGRpZmZlcmVudCAobW9yZSwgbGVzcywgYSBkaWZmZXJlbnQgb3JkZXIgb2YpIGtleXNcbiAqIHRoYW4gaW4gdGhlIHBhc3QuXG4gKlxuICogSW4gYSB0eXBpY2FsIGFwcGxpY2F0aW9uLCB0aGlzIGV4dHJhIG1lbW9yeSB1c2FnZSBzaG91bGQgbm90IHBsYXkgYVxuICogc2lnbmlmaWNhbnQgcm9sZSwgYXMgYGNhbm9uaWNhbFN0cmluZ2lmeWAgd2lsbCBiZSBjYWxsZWQgZm9yIG9ubHkgYSBsaW1pdGVkXG4gKiBudW1iZXIgb2Ygb2JqZWN0IHNoYXBlcywgYW5kIHRoZSBjYWNoZSB3aWxsIG5vdCBncm93IGJleW9uZCBhIGNlcnRhaW4gcG9pbnQuXG4gKiBCdXQgaW4gc29tZSBlZGdlIGNhc2VzLCB0aGlzIGNvdWxkIGJlIGEgcHJvYmxlbSwgc28gd2UgcHJvdmlkZVxuICogY2Fub25pY2FsU3RyaW5naWZ5LnJlc2V0KCkgYXMgYSB3YXkgb2YgY2xlYXJpbmcgdGhlIGNhY2hlLlxuICogKi9cbmV4cG9ydCB2YXIgY2Fub25pY2FsU3RyaW5naWZ5ID0gT2JqZWN0LmFzc2lnbihmdW5jdGlvbiBjYW5vbmljYWxTdHJpbmdpZnkodmFsdWUpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUsIHN0YWJsZU9iamVjdFJlcGxhY2VyKTtcbn0sIHtcbiAgICByZXNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBDbGVhcmluZyB0aGUgc29ydGluZ01hcCB3aWxsIHJlY2xhaW0gYWxsIGNhY2hlZCBtZW1vcnksIHdpdGhvdXRcbiAgICAgICAgLy8gYWZmZWN0aW5nIHRoZSBsb2dpY2FsIHJlc3VsdHMgb2YgY2Fub25pY2FsU3RyaW5naWZ5LCBidXQgcG90ZW50aWFsbHlcbiAgICAgICAgLy8gc2FjcmlmaWNpbmcgcGVyZm9ybWFuY2UgdW50aWwgdGhlIGNhY2hlIGlzIHJlZmlsbGVkLlxuICAgICAgICBzb3J0aW5nTWFwID0gbmV3IEF1dG9DbGVhbmVkU3Ryb25nQ2FjaGUoY2FjaGVTaXplcy5jYW5vbmljYWxTdHJpbmdpZnkgfHwgMTAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplcy5jYW5vbmljYWxTdHJpbmdpZnkgKi8pO1xuICAgIH0sXG59KTtcbmlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgcmVnaXN0ZXJHbG9iYWxDYWNoZShcImNhbm9uaWNhbFN0cmluZ2lmeVwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBzb3J0aW5nTWFwLnNpemU7IH0pO1xufVxuLy8gVmFsdWVzIGFyZSBKU09OLXNlcmlhbGl6ZWQgYXJyYXlzIG9mIG9iamVjdCBrZXlzIChpbiBhbnkgb3JkZXIpLCBhbmQgdmFsdWVzXG4vLyBhcmUgc29ydGVkIGFycmF5cyBvZiB0aGUgc2FtZSBrZXlzLlxudmFyIHNvcnRpbmdNYXA7XG5jYW5vbmljYWxTdHJpbmdpZnkucmVzZXQoKTtcbi8vIFRoZSBKU09OLnN0cmluZ2lmeSBmdW5jdGlvbiB0YWtlcyBhbiBvcHRpb25hbCBzZWNvbmQgYXJndW1lbnQgY2FsbGVkIGFcbi8vIHJlcGxhY2VyIGZ1bmN0aW9uLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBmb3IgZWFjaCBrZXktdmFsdWUgcGFpciBpbiB0aGVcbi8vIG9iamVjdCBiZWluZyBzdHJpbmdpZmllZCwgYW5kIGl0cyByZXR1cm4gdmFsdWUgaXMgdXNlZCBpbnN0ZWFkIG9mIHRoZVxuLy8gb3JpZ2luYWwgdmFsdWUuIElmIHRoZSByZXBsYWNlciBmdW5jdGlvbiByZXR1cm5zIGEgbmV3IHZhbHVlLCB0aGF0IHZhbHVlIGlzXG4vLyBzdHJpbmdpZmllZCBhcyBKU09OIGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eS5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0pTT04vc3RyaW5naWZ5I3RoZV9yZXBsYWNlcl9wYXJhbWV0ZXJcbmZ1bmN0aW9uIHN0YWJsZU9iamVjdFJlcGxhY2VyKGtleSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSk7XG4gICAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gbWVzcyB3aXRoIG9iamVjdHMgdGhhdCBhcmUgbm90IFwicGxhaW5cIiBvYmplY3RzLCB3aGljaFxuICAgICAgICAvLyBtZWFucyB0aGVpciBwcm90b3R5cGUgaXMgZWl0aGVyIE9iamVjdC5wcm90b3R5cGUgb3IgbnVsbC4gVGhpcyBjaGVjayBhbHNvXG4gICAgICAgIC8vIHByZXZlbnRzIG5lZWRsZXNzbHkgcmVhcnJhbmdpbmcgdGhlIGluZGljZXMgb2YgYXJyYXlzLlxuICAgICAgICBpZiAocHJvdG8gPT09IE9iamVjdC5wcm90b3R5cGUgfHwgcHJvdG8gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICAgICAgICAgICAgLy8gSWYga2V5cyBpcyBhbHJlYWR5IHNvcnRlZCwgbGV0IEpTT04uc3RyaW5naWZ5IHNlcmlhbGl6ZSB0aGUgb3JpZ2luYWxcbiAgICAgICAgICAgIC8vIHZhbHVlIGluc3RlYWQgb2YgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IHdpdGgga2V5cyBpbiB0aGUgc2FtZSBvcmRlci5cbiAgICAgICAgICAgIGlmIChrZXlzLmV2ZXJ5KGV2ZXJ5S2V5SW5PcmRlcikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgdmFyIHVuc29ydGVkS2V5ID0gSlNPTi5zdHJpbmdpZnkoa2V5cyk7XG4gICAgICAgICAgICB2YXIgc29ydGVkS2V5cyA9IHNvcnRpbmdNYXAuZ2V0KHVuc29ydGVkS2V5KTtcbiAgICAgICAgICAgIGlmICghc29ydGVkS2V5cykge1xuICAgICAgICAgICAgICAgIGtleXMuc29ydCgpO1xuICAgICAgICAgICAgICAgIHZhciBzb3J0ZWRLZXkgPSBKU09OLnN0cmluZ2lmeShrZXlzKTtcbiAgICAgICAgICAgICAgICAvLyBDaGVja2luZyBmb3Igc29ydGVkS2V5IGluIHRoZSBzb3J0aW5nTWFwIGFsbG93cyB1cyB0byBzaGFyZSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgIC8vIHNvcnRlZCBhcnJheSByZWZlcmVuY2UgZm9yIGFsbCBwZXJtdXRhdGlvbnMgb2YgdGhlIHNhbWUgc2V0IG9mIGtleXMuXG4gICAgICAgICAgICAgICAgc29ydGVkS2V5cyA9IHNvcnRpbmdNYXAuZ2V0KHNvcnRlZEtleSkgfHwga2V5cztcbiAgICAgICAgICAgICAgICBzb3J0aW5nTWFwLnNldCh1bnNvcnRlZEtleSwgc29ydGVkS2V5cyk7XG4gICAgICAgICAgICAgICAgc29ydGluZ01hcC5zZXQoc29ydGVkS2V5LCBzb3J0ZWRLZXlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzb3J0ZWRPYmplY3RfMSA9IE9iamVjdC5jcmVhdGUocHJvdG8pO1xuICAgICAgICAgICAgLy8gUmVhc3NpZ25pbmcgdGhlIGtleXMgaW4gc29ydGVkIG9yZGVyIHdpbGwgY2F1c2UgSlNPTi5zdHJpbmdpZnkgdG9cbiAgICAgICAgICAgIC8vIHNlcmlhbGl6ZSB0aGVtIGluIHNvcnRlZCBvcmRlci5cbiAgICAgICAgICAgIHNvcnRlZEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgc29ydGVkT2JqZWN0XzFba2V5XSA9IHZhbHVlW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzb3J0ZWRPYmplY3RfMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4vLyBTaW5jZSBldmVyeXRoaW5nIHRoYXQgaGFwcGVucyBpbiBzdGFibGVPYmplY3RSZXBsYWNlciBiZW5lZml0cyBmcm9tIGJlaW5nIGFzXG4vLyBlZmZpY2llbnQgYXMgcG9zc2libGUsIHdlIHVzZSBhIHN0YXRpYyBmdW5jdGlvbiBhcyB0aGUgY2FsbGJhY2sgZm9yXG4vLyBrZXlzLmV2ZXJ5IGluIG9yZGVyIHRvIHRlc3QgaWYgdGhlIHByb3ZpZGVkIGtleXMgYXJlIGFscmVhZHkgc29ydGVkIHdpdGhvdXRcbi8vIGFsbG9jYXRpbmcgZXh0cmEgbWVtb3J5IGZvciBhIGNhbGxiYWNrLlxuZnVuY3Rpb24gZXZlcnlLZXlJbk9yZGVyKGtleSwgaSwga2V5cykge1xuICAgIHJldHVybiBpID09PSAwIHx8IGtleXNbaSAtIDFdIDw9IGtleTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbm9uaWNhbFN0cmluZ2lmeS5qcy5tYXAiLAogICAgImltcG9ydCB7IG5ld0ludmFyaWFudEVycm9yIH0gZnJvbSBcIi4uL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGlzTm9uTnVsbE9iamVjdCB9IGZyb20gXCIuLi9jb21tb24vb2JqZWN0cy5qc1wiO1xuaW1wb3J0IHsgZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uIH0gZnJvbSBcIi4vZnJhZ21lbnRzLmpzXCI7XG5pbXBvcnQgeyBjYW5vbmljYWxTdHJpbmdpZnkgfSBmcm9tIFwiLi4vY29tbW9uL2Nhbm9uaWNhbFN0cmluZ2lmeS5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZWZlcmVuY2UoaWQpIHtcbiAgICByZXR1cm4geyBfX3JlZjogU3RyaW5nKGlkKSB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVmZXJlbmNlKG9iaikge1xuICAgIHJldHVybiBCb29sZWFuKG9iaiAmJiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmouX19yZWYgPT09IFwic3RyaW5nXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRG9jdW1lbnROb2RlKHZhbHVlKSB7XG4gICAgcmV0dXJuIChpc05vbk51bGxPYmplY3QodmFsdWUpICYmXG4gICAgICAgIHZhbHVlLmtpbmQgPT09IFwiRG9jdW1lbnRcIiAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHZhbHVlLmRlZmluaXRpb25zKSk7XG59XG5mdW5jdGlvbiBpc1N0cmluZ1ZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmtpbmQgPT09IFwiU3RyaW5nVmFsdWVcIjtcbn1cbmZ1bmN0aW9uIGlzQm9vbGVhblZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmtpbmQgPT09IFwiQm9vbGVhblZhbHVlXCI7XG59XG5mdW5jdGlvbiBpc0ludFZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmtpbmQgPT09IFwiSW50VmFsdWVcIjtcbn1cbmZ1bmN0aW9uIGlzRmxvYXRWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5raW5kID09PSBcIkZsb2F0VmFsdWVcIjtcbn1cbmZ1bmN0aW9uIGlzVmFyaWFibGUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUua2luZCA9PT0gXCJWYXJpYWJsZVwiO1xufVxuZnVuY3Rpb24gaXNPYmplY3RWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5raW5kID09PSBcIk9iamVjdFZhbHVlXCI7XG59XG5mdW5jdGlvbiBpc0xpc3RWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5raW5kID09PSBcIkxpc3RWYWx1ZVwiO1xufVxuZnVuY3Rpb24gaXNFbnVtVmFsdWUodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUua2luZCA9PT0gXCJFbnVtVmFsdWVcIjtcbn1cbmZ1bmN0aW9uIGlzTnVsbFZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLmtpbmQgPT09IFwiTnVsbFZhbHVlXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKGFyZ09iaiwgbmFtZSwgdmFsdWUsIHZhcmlhYmxlcykge1xuICAgIGlmIChpc0ludFZhbHVlKHZhbHVlKSB8fCBpc0Zsb2F0VmFsdWUodmFsdWUpKSB7XG4gICAgICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IE51bWJlcih2YWx1ZS52YWx1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQm9vbGVhblZhbHVlKHZhbHVlKSB8fCBpc1N0cmluZ1ZhbHVlKHZhbHVlKSkge1xuICAgICAgICBhcmdPYmpbbmFtZS52YWx1ZV0gPSB2YWx1ZS52YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3RWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIG5lc3RlZEFyZ09ial8xID0ge307XG4gICAgICAgIHZhbHVlLmZpZWxkcy5tYXAoZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihuZXN0ZWRBcmdPYmpfMSwgb2JqLm5hbWUsIG9iai52YWx1ZSwgdmFyaWFibGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IG5lc3RlZEFyZ09ial8xO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1ZhcmlhYmxlKHZhbHVlKSkge1xuICAgICAgICB2YXIgdmFyaWFibGVWYWx1ZSA9ICh2YXJpYWJsZXMgfHwge30pW3ZhbHVlLm5hbWUudmFsdWVdO1xuICAgICAgICBhcmdPYmpbbmFtZS52YWx1ZV0gPSB2YXJpYWJsZVZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0xpc3RWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgICAgYXJnT2JqW25hbWUudmFsdWVdID0gdmFsdWUudmFsdWVzLm1hcChmdW5jdGlvbiAobGlzdFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgbmVzdGVkQXJnQXJyYXlPYmogPSB7fTtcbiAgICAgICAgICAgIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihuZXN0ZWRBcmdBcnJheU9iaiwgbmFtZSwgbGlzdFZhbHVlLCB2YXJpYWJsZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5lc3RlZEFyZ0FycmF5T2JqW25hbWUudmFsdWVdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNFbnVtVmFsdWUodmFsdWUpKSB7XG4gICAgICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc051bGxWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgICAgYXJnT2JqW25hbWUudmFsdWVdID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ld0ludmFyaWFudEVycm9yKDEyNCwgbmFtZS52YWx1ZSwgdmFsdWUua2luZCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlS2V5TmFtZUZyb21GaWVsZChmaWVsZCwgdmFyaWFibGVzKSB7XG4gICAgdmFyIGRpcmVjdGl2ZXNPYmogPSBudWxsO1xuICAgIGlmIChmaWVsZC5kaXJlY3RpdmVzKSB7XG4gICAgICAgIGRpcmVjdGl2ZXNPYmogPSB7fTtcbiAgICAgICAgZmllbGQuZGlyZWN0aXZlcy5mb3JFYWNoKGZ1bmN0aW9uIChkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgIGRpcmVjdGl2ZXNPYmpbZGlyZWN0aXZlLm5hbWUudmFsdWVdID0ge307XG4gICAgICAgICAgICBpZiAoZGlyZWN0aXZlLmFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZS5hcmd1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBfYS5uYW1lLCB2YWx1ZSA9IF9hLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKGRpcmVjdGl2ZXNPYmpbZGlyZWN0aXZlLm5hbWUudmFsdWVdLCBuYW1lLCB2YWx1ZSwgdmFyaWFibGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHZhciBhcmdPYmogPSBudWxsO1xuICAgIGlmIChmaWVsZC5hcmd1bWVudHMgJiYgZmllbGQuYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBhcmdPYmogPSB7fTtcbiAgICAgICAgZmllbGQuYXJndW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IF9hLm5hbWUsIHZhbHVlID0gX2EudmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKGFyZ09iaiwgbmFtZSwgdmFsdWUsIHZhcmlhYmxlcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0U3RvcmVLZXlOYW1lKGZpZWxkLm5hbWUudmFsdWUsIGFyZ09iaiwgZGlyZWN0aXZlc09iaik7XG59XG52YXIgS05PV05fRElSRUNUSVZFUyA9IFtcbiAgICBcImNvbm5lY3Rpb25cIixcbiAgICBcImluY2x1ZGVcIixcbiAgICBcInNraXBcIixcbiAgICBcImNsaWVudFwiLFxuICAgIFwicmVzdFwiLFxuICAgIFwiZXhwb3J0XCIsXG4gICAgXCJub25yZWFjdGl2ZVwiLFxuXTtcbi8vIERlZmF1bHQgc3RhYmxlIEpTT04uc3RyaW5naWZ5IGltcGxlbWVudGF0aW9uIHVzZWQgYnkgZ2V0U3RvcmVLZXlOYW1lLiBDYW4gYmVcbi8vIHVwZGF0ZWQvcmVwbGFjZWQgd2l0aCBzb21ldGhpbmcgYmV0dGVyIGJ5IGNhbGxpbmdcbi8vIGdldFN0b3JlS2V5TmFtZS5zZXRTdHJpbmdpZnkobmV3U3RyaW5naWZ5RnVuY3Rpb24pLlxudmFyIHN0b3JlS2V5TmFtZVN0cmluZ2lmeSA9IGNhbm9uaWNhbFN0cmluZ2lmeTtcbmV4cG9ydCB2YXIgZ2V0U3RvcmVLZXlOYW1lID0gT2JqZWN0LmFzc2lnbihmdW5jdGlvbiAoZmllbGROYW1lLCBhcmdzLCBkaXJlY3RpdmVzKSB7XG4gICAgaWYgKGFyZ3MgJiZcbiAgICAgICAgZGlyZWN0aXZlcyAmJlxuICAgICAgICBkaXJlY3RpdmVzW1wiY29ubmVjdGlvblwiXSAmJlxuICAgICAgICBkaXJlY3RpdmVzW1wiY29ubmVjdGlvblwiXVtcImtleVwiXSkge1xuICAgICAgICBpZiAoZGlyZWN0aXZlc1tcImNvbm5lY3Rpb25cIl1bXCJmaWx0ZXJcIl0gJiZcbiAgICAgICAgICAgIGRpcmVjdGl2ZXNbXCJjb25uZWN0aW9uXCJdW1wiZmlsdGVyXCJdLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJLZXlzID0gZGlyZWN0aXZlc1tcImNvbm5lY3Rpb25cIl1bXCJmaWx0ZXJcIl0gP1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXNbXCJjb25uZWN0aW9uXCJdW1wiZmlsdGVyXCJdXG4gICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgICAgIGZpbHRlcktleXMuc29ydCgpO1xuICAgICAgICAgICAgdmFyIGZpbHRlcmVkQXJnc18xID0ge307XG4gICAgICAgICAgICBmaWx0ZXJLZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkQXJnc18xW2tleV0gPSBhcmdzW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBcIlwiLmNvbmNhdChkaXJlY3RpdmVzW1wiY29ubmVjdGlvblwiXVtcImtleVwiXSwgXCIoXCIpLmNvbmNhdChzdG9yZUtleU5hbWVTdHJpbmdpZnkoZmlsdGVyZWRBcmdzXzEpLCBcIilcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aXZlc1tcImNvbm5lY3Rpb25cIl1bXCJrZXlcIl07XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGNvbXBsZXRlRmllbGROYW1lID0gZmllbGROYW1lO1xuICAgIGlmIChhcmdzKSB7XG4gICAgICAgIC8vIFdlIGNhbid0IHVzZSBgSlNPTi5zdHJpbmdpZnlgIGhlcmUgc2luY2UgaXQncyBub24tZGV0ZXJtaW5pc3RpYyxcbiAgICAgICAgLy8gYW5kIGNhbiBsZWFkIHRvIGRpZmZlcmVudCBzdG9yZSBrZXkgbmFtZXMgYmVpbmcgY3JlYXRlZCBldmVuIHRob3VnaFxuICAgICAgICAvLyB0aGUgYGFyZ3NgIG9iamVjdCB1c2VkIGR1cmluZyBjcmVhdGlvbiBoYXMgdGhlIHNhbWUgcHJvcGVydGllcy92YWx1ZXMuXG4gICAgICAgIHZhciBzdHJpbmdpZmllZEFyZ3MgPSBzdG9yZUtleU5hbWVTdHJpbmdpZnkoYXJncyk7XG4gICAgICAgIGNvbXBsZXRlRmllbGROYW1lICs9IFwiKFwiLmNvbmNhdChzdHJpbmdpZmllZEFyZ3MsIFwiKVwiKTtcbiAgICB9XG4gICAgaWYgKGRpcmVjdGl2ZXMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoZGlyZWN0aXZlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoS05PV05fRElSRUNUSVZFUy5pbmRleE9mKGtleSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChkaXJlY3RpdmVzW2tleV0gJiYgT2JqZWN0LmtleXMoZGlyZWN0aXZlc1trZXldKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZUZpZWxkTmFtZSArPSBcIkBcIi5jb25jYXQoa2V5LCBcIihcIikuY29uY2F0KHN0b3JlS2V5TmFtZVN0cmluZ2lmeShkaXJlY3RpdmVzW2tleV0pLCBcIilcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZUZpZWxkTmFtZSArPSBcIkBcIi5jb25jYXQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBjb21wbGV0ZUZpZWxkTmFtZTtcbn0sIHtcbiAgICBzZXRTdHJpbmdpZnk6IGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciBwcmV2aW91cyA9IHN0b3JlS2V5TmFtZVN0cmluZ2lmeTtcbiAgICAgICAgc3RvcmVLZXlOYW1lU3RyaW5naWZ5ID0gcztcbiAgICAgICAgcmV0dXJuIHByZXZpb3VzO1xuICAgIH0sXG59KTtcbmV4cG9ydCBmdW5jdGlvbiBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQoZmllbGQsIHZhcmlhYmxlcykge1xuICAgIGlmIChmaWVsZC5hcmd1bWVudHMgJiYgZmllbGQuYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICB2YXIgYXJnT2JqXzEgPSB7fTtcbiAgICAgICAgZmllbGQuYXJndW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IF9hLm5hbWUsIHZhbHVlID0gX2EudmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKGFyZ09ial8xLCBuYW1lLCB2YWx1ZSwgdmFyaWFibGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhcmdPYmpfMTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzdWx0S2V5TmFtZUZyb21GaWVsZChmaWVsZCkge1xuICAgIHJldHVybiBmaWVsZC5hbGlhcyA/IGZpZWxkLmFsaWFzLnZhbHVlIDogZmllbGQubmFtZS52YWx1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRUeXBlbmFtZUZyb21SZXN1bHQocmVzdWx0LCBzZWxlY3Rpb25TZXQsIGZyYWdtZW50TWFwKSB7XG4gICAgdmFyIGZyYWdtZW50cztcbiAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBzZWxlY3Rpb24gPSBfYVtfaV07XG4gICAgICAgIGlmIChpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24ubmFtZS52YWx1ZSA9PT0gXCJfX3R5cGVuYW1lXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0W3Jlc3VsdEtleU5hbWVGcm9tRmllbGQoc2VsZWN0aW9uKV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZnJhZ21lbnRzKSB7XG4gICAgICAgICAgICBmcmFnbWVudHMucHVzaChzZWxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnJhZ21lbnRzID0gW3NlbGVjdGlvbl07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZXN1bHQuX190eXBlbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gcmVzdWx0Ll9fdHlwZW5hbWU7XG4gICAgfVxuICAgIGlmIChmcmFnbWVudHMpIHtcbiAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBmcmFnbWVudHNfMSA9IGZyYWdtZW50czsgX2IgPCBmcmFnbWVudHNfMS5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBmcmFnbWVudHNfMVtfYl07XG4gICAgICAgICAgICB2YXIgdHlwZW5hbWUgPSBnZXRUeXBlbmFtZUZyb21SZXN1bHQocmVzdWx0LCBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24oc2VsZWN0aW9uLCBmcmFnbWVudE1hcCkuc2VsZWN0aW9uU2V0LCBmcmFnbWVudE1hcCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRmllbGQoc2VsZWN0aW9uKSB7XG4gICAgcmV0dXJuIHNlbGVjdGlvbi5raW5kID09PSBcIkZpZWxkXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNJbmxpbmVGcmFnbWVudChzZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gc2VsZWN0aW9uLmtpbmQgPT09IFwiSW5saW5lRnJhZ21lbnRcIjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3JlVXRpbHMuanMubWFwIiwKICAgICJpbXBvcnQgeyBpbnZhcmlhbnQsIG5ld0ludmFyaWFudEVycm9yIH0gZnJvbSBcIi4uL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbiB9IGZyb20gXCIuL3N0b3JlVXRpbHMuanNcIjtcbi8vIENoZWNrcyB0aGUgZG9jdW1lbnQgZm9yIGVycm9ycyBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGVyZSBpcyBhbiBlcnJvci5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0RvY3VtZW50KGRvYykge1xuICAgIGludmFyaWFudChkb2MgJiYgZG9jLmtpbmQgPT09IFwiRG9jdW1lbnRcIiwgMTE2KTtcbiAgICB2YXIgb3BlcmF0aW9ucyA9IGRvYy5kZWZpbml0aW9uc1xuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmtpbmQgIT09IFwiRnJhZ21lbnREZWZpbml0aW9uXCI7IH0pXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKGRlZmluaXRpb24pIHtcbiAgICAgICAgaWYgKGRlZmluaXRpb24ua2luZCAhPT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ld0ludmFyaWFudEVycm9yKDExNywgZGVmaW5pdGlvbi5raW5kKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcbiAgICB9KTtcbiAgICBpbnZhcmlhbnQob3BlcmF0aW9ucy5sZW5ndGggPD0gMSwgMTE4LCBvcGVyYXRpb25zLmxlbmd0aCk7XG4gICAgcmV0dXJuIGRvYztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvYykge1xuICAgIGNoZWNrRG9jdW1lbnQoZG9jKTtcbiAgICByZXR1cm4gZG9jLmRlZmluaXRpb25zLmZpbHRlcihmdW5jdGlvbiAoZGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbi5raW5kID09PSBcIk9wZXJhdGlvbkRlZmluaXRpb25cIjtcbiAgICB9KVswXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVyYXRpb25OYW1lKGRvYykge1xuICAgIHJldHVybiAoZG9jLmRlZmluaXRpb25zXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb24ua2luZCA9PT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIgJiYgISFkZWZpbml0aW9uLm5hbWU7XG4gICAgfSlcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5uYW1lLnZhbHVlOyB9KVswXSB8fCBudWxsKTtcbn1cbi8vIFJldHVybnMgdGhlIEZyYWdtZW50RGVmaW5pdGlvbnMgZnJvbSBhIHBhcnRpY3VsYXIgZG9jdW1lbnQgYXMgYW4gYXJyYXlcbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudERlZmluaXRpb25zKGRvYykge1xuICAgIHJldHVybiBkb2MuZGVmaW5pdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uLmtpbmQgPT09IFwiRnJhZ21lbnREZWZpbml0aW9uXCI7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UXVlcnlEZWZpbml0aW9uKGRvYykge1xuICAgIHZhciBxdWVyeURlZiA9IGdldE9wZXJhdGlvbkRlZmluaXRpb24oZG9jKTtcbiAgICBpbnZhcmlhbnQocXVlcnlEZWYgJiYgcXVlcnlEZWYub3BlcmF0aW9uID09PSBcInF1ZXJ5XCIsIDExOSk7XG4gICAgcmV0dXJuIHF1ZXJ5RGVmO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RGVmaW5pdGlvbihkb2MpIHtcbiAgICBpbnZhcmlhbnQoZG9jLmtpbmQgPT09IFwiRG9jdW1lbnRcIiwgMTIwKTtcbiAgICBpbnZhcmlhbnQoZG9jLmRlZmluaXRpb25zLmxlbmd0aCA8PSAxLCAxMjEpO1xuICAgIHZhciBmcmFnbWVudERlZiA9IGRvYy5kZWZpbml0aW9uc1swXTtcbiAgICBpbnZhcmlhbnQoZnJhZ21lbnREZWYua2luZCA9PT0gXCJGcmFnbWVudERlZmluaXRpb25cIiwgMTIyKTtcbiAgICByZXR1cm4gZnJhZ21lbnREZWY7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IG9wZXJhdGlvbiBkZWZpbml0aW9uIGZvdW5kIGluIHRoaXMgZG9jdW1lbnQuXG4gKiBJZiBubyBvcGVyYXRpb24gZGVmaW5pdGlvbiBpcyBmb3VuZCwgdGhlIGZpcnN0IGZyYWdtZW50IGRlZmluaXRpb24gd2lsbCBiZSByZXR1cm5lZC5cbiAqIElmIG5vIGRlZmluaXRpb25zIGFyZSBmb3VuZCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYWluRGVmaW5pdGlvbihxdWVyeURvYykge1xuICAgIGNoZWNrRG9jdW1lbnQocXVlcnlEb2MpO1xuICAgIHZhciBmcmFnbWVudERlZmluaXRpb247XG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHF1ZXJ5RG9jLmRlZmluaXRpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgZGVmaW5pdGlvbiA9IF9hW19pXTtcbiAgICAgICAgaWYgKGRlZmluaXRpb24ua2luZCA9PT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhciBvcGVyYXRpb24gPSBkZWZpbml0aW9uLm9wZXJhdGlvbjtcbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24gPT09IFwicXVlcnlcIiB8fFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbiA9PT0gXCJtdXRhdGlvblwiIHx8XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uID09PSBcInN1YnNjcmlwdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZmluaXRpb24ua2luZCA9PT0gXCJGcmFnbWVudERlZmluaXRpb25cIiAmJiAhZnJhZ21lbnREZWZpbml0aW9uKSB7XG4gICAgICAgICAgICAvLyB3ZSBkbyB0aGlzIGJlY2F1c2Ugd2Ugd2FudCB0byBhbGxvdyBtdWx0aXBsZSBmcmFnbWVudCBkZWZpbml0aW9uc1xuICAgICAgICAgICAgLy8gdG8gcHJlY2VkZSBhbiBvcGVyYXRpb24gZGVmaW5pdGlvbi5cbiAgICAgICAgICAgIGZyYWdtZW50RGVmaW5pdGlvbiA9IGRlZmluaXRpb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZyYWdtZW50RGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnREZWZpbml0aW9uO1xuICAgIH1cbiAgICB0aHJvdyBuZXdJbnZhcmlhbnRFcnJvcigxMjMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRWYWx1ZXMoZGVmaW5pdGlvbikge1xuICAgIHZhciBkZWZhdWx0VmFsdWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB2YXIgZGVmcyA9IGRlZmluaXRpb24gJiYgZGVmaW5pdGlvbi52YXJpYWJsZURlZmluaXRpb25zO1xuICAgIGlmIChkZWZzICYmIGRlZnMubGVuZ3RoKSB7XG4gICAgICAgIGRlZnMuZm9yRWFjaChmdW5jdGlvbiAoZGVmKSB7XG4gICAgICAgICAgICBpZiAoZGVmLmRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihkZWZhdWx0VmFsdWVzLCBkZWYudmFyaWFibGUubmFtZSwgZGVmLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldEZyb21BU1QuanMubWFwIiwKICAgICIvLyBUaGlzIGN1cnJlbnRDb250ZXh0IHZhcmlhYmxlIHdpbGwgb25seSBiZSB1c2VkIGlmIHRoZSBtYWtlU2xvdENsYXNzXG4vLyBmdW5jdGlvbiBpcyBjYWxsZWQsIHdoaWNoIGhhcHBlbnMgb25seSBpZiB0aGlzIGlzIHRoZSBmaXJzdCBjb3B5IG9mIHRoZVxuLy8gQHdyeS9jb250ZXh0IHBhY2thZ2UgdG8gYmUgaW1wb3J0ZWQuXG5sZXQgY3VycmVudENvbnRleHQgPSBudWxsO1xuLy8gVGhpcyB1bmlxdWUgaW50ZXJuYWwgb2JqZWN0IGlzIHVzZWQgdG8gZGVub3RlIHRoZSBhYnNlbmNlIG9mIGEgdmFsdWVcbi8vIGZvciBhIGdpdmVuIFNsb3QsIGFuZCBpcyBuZXZlciBleHBvc2VkIHRvIG91dHNpZGUgY29kZS5cbmNvbnN0IE1JU1NJTkdfVkFMVUUgPSB7fTtcbmxldCBpZENvdW50ZXIgPSAxO1xuLy8gQWx0aG91Z2ggd2UgY2FuJ3QgZG8gYW55dGhpbmcgYWJvdXQgdGhlIGNvc3Qgb2YgZHVwbGljYXRlZCBjb2RlIGZyb21cbi8vIGFjY2lkZW50YWxseSBidW5kbGluZyBtdWx0aXBsZSBjb3BpZXMgb2YgdGhlIEB3cnkvY29udGV4dCBwYWNrYWdlLCB3ZSBjYW5cbi8vIGF2b2lkIGNyZWF0aW5nIHRoZSBTbG90IGNsYXNzIG1vcmUgdGhhbiBvbmNlIHVzaW5nIG1ha2VTbG90Q2xhc3MuXG5jb25zdCBtYWtlU2xvdENsYXNzID0gKCkgPT4gY2xhc3MgU2xvdCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIElmIHlvdSBoYXZlIGEgU2xvdCBvYmplY3QsIHlvdSBjYW4gZmluZCBvdXQgaXRzIHNsb3QuaWQsIGJ1dCB5b3UgY2Fubm90XG4gICAgICAgIC8vIGd1ZXNzIHRoZSBzbG90LmlkIG9mIGEgU2xvdCB5b3UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8sIHRoYW5rcyB0byB0aGVcbiAgICAgICAgLy8gcmFuZG9taXplZCBzdWZmaXguXG4gICAgICAgIHRoaXMuaWQgPSBbXG4gICAgICAgICAgICBcInNsb3RcIixcbiAgICAgICAgICAgIGlkQ291bnRlcisrLFxuICAgICAgICAgICAgRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpLFxuICAgICAgICBdLmpvaW4oXCI6XCIpO1xuICAgIH1cbiAgICBoYXNWYWx1ZSgpIHtcbiAgICAgICAgZm9yIChsZXQgY29udGV4dCA9IGN1cnJlbnRDb250ZXh0OyBjb250ZXh0OyBjb250ZXh0ID0gY29udGV4dC5wYXJlbnQpIHtcbiAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgU2xvdCBvYmplY3QgaXNlbGYgYXMgYSBrZXkgdG8gaXRzIHZhbHVlLCB3aGljaCBtZWFucyB0aGVcbiAgICAgICAgICAgIC8vIHZhbHVlIGNhbm5vdCBiZSBvYnRhaW5lZCB3aXRob3V0IGEgcmVmZXJlbmNlIHRvIHRoZSBTbG90IG9iamVjdC5cbiAgICAgICAgICAgIGlmICh0aGlzLmlkIGluIGNvbnRleHQuc2xvdHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbnRleHQuc2xvdHNbdGhpcy5pZF07XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBNSVNTSU5HX1ZBTFVFKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dCAhPT0gY3VycmVudENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FjaGUgdGhlIHZhbHVlIGluIGN1cnJlbnRDb250ZXh0LnNsb3RzIHNvIHRoZSBuZXh0IGxvb2t1cCB3aWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlIGZhc3Rlci4gVGhpcyBjYWNoaW5nIGlzIHNhZmUgYmVjYXVzZSB0aGUgdHJlZSBvZiBjb250ZXh0cyBhbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHZhbHVlcyBvZiB0aGUgc2xvdHMgYXJlIGxvZ2ljYWxseSBpbW11dGFibGUuXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0LnNsb3RzW3RoaXMuaWRdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50Q29udGV4dCkge1xuICAgICAgICAgICAgLy8gSWYgYSB2YWx1ZSB3YXMgbm90IGZvdW5kIGZvciB0aGlzIFNsb3QsIGl0J3MgbmV2ZXIgZ29pbmcgdG8gYmUgZm91bmRcbiAgICAgICAgICAgIC8vIG5vIG1hdHRlciBob3cgbWFueSB0aW1lcyB3ZSBsb29rIGl0IHVwLCBzbyB3ZSBtaWdodCBhcyB3ZWxsIGNhY2hlXG4gICAgICAgICAgICAvLyB0aGUgYWJzZW5jZSBvZiB0aGUgdmFsdWUsIHRvby5cbiAgICAgICAgICAgIGN1cnJlbnRDb250ZXh0LnNsb3RzW3RoaXMuaWRdID0gTUlTU0lOR19WQUxVRTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNWYWx1ZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudENvbnRleHQuc2xvdHNbdGhpcy5pZF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2l0aFZhbHVlKHZhbHVlLCBjYWxsYmFjaywgXG4gICAgLy8gR2l2ZW4gdGhlIHByZXZhbGVuY2Ugb2YgYXJyb3cgZnVuY3Rpb25zLCBzcGVjaWZ5aW5nIGFyZ3VtZW50cyBpcyBsaWtlbHlcbiAgICAvLyB0byBiZSBtdWNoIG1vcmUgY29tbW9uIHRoYW4gc3BlY2lmeWluZyBgdGhpc2AsIGhlbmNlIHRoaXMgb3JkZXJpbmc6XG4gICAgYXJncywgdGhpc0FyZykge1xuICAgICAgICBjb25zdCBzbG90cyA9IHtcbiAgICAgICAgICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICAgICAgICAgIFt0aGlzLmlkXTogdmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGN1cnJlbnRDb250ZXh0O1xuICAgICAgICBjdXJyZW50Q29udGV4dCA9IHsgcGFyZW50LCBzbG90cyB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5IGFsbG93cyB0aGUgYXJndW1lbnRzIGFycmF5IGFyZ3VtZW50IHRvIGJlXG4gICAgICAgICAgICAvLyBvbWl0dGVkIG9yIHVuZGVmaW5lZCwgc28gYXJncyEgaXMgZmluZSBoZXJlLlxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgY3VycmVudENvbnRleHQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2FwdHVyZSB0aGUgY3VycmVudCBjb250ZXh0IGFuZCB3cmFwIGEgY2FsbGJhY2sgZnVuY3Rpb24gc28gdGhhdCBpdFxuICAgIC8vIHJlZXN0YWJsaXNoZXMgdGhlIGNhcHR1cmVkIGNvbnRleHQgd2hlbiBjYWxsZWQuXG4gICAgc3RhdGljIGJpbmQoY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGN1cnJlbnRDb250ZXh0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3Qgc2F2ZWQgPSBjdXJyZW50Q29udGV4dDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbnRleHQgPSBzYXZlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gSW1tZWRpYXRlbHkgcnVuIGEgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aG91dCBhbnkgY2FwdHVyZWQgY29udGV4dC5cbiAgICBzdGF0aWMgbm9Db250ZXh0KGNhbGxiYWNrLCBcbiAgICAvLyBHaXZlbiB0aGUgcHJldmFsZW5jZSBvZiBhcnJvdyBmdW5jdGlvbnMsIHNwZWNpZnlpbmcgYXJndW1lbnRzIGlzIGxpa2VseVxuICAgIC8vIHRvIGJlIG11Y2ggbW9yZSBjb21tb24gdGhhbiBzcGVjaWZ5aW5nIGB0aGlzYCwgaGVuY2UgdGhpcyBvcmRlcmluZzpcbiAgICBhcmdzLCB0aGlzQXJnKSB7XG4gICAgICAgIGlmIChjdXJyZW50Q29udGV4dCkge1xuICAgICAgICAgICAgY29uc3Qgc2F2ZWQgPSBjdXJyZW50Q29udGV4dDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIC8vIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSBhbGxvd3MgdGhlIGFyZ3VtZW50cyBhcnJheSBhcmd1bWVudCB0byBiZVxuICAgICAgICAgICAgICAgIC8vIG9taXR0ZWQgb3IgdW5kZWZpbmVkLCBzbyBhcmdzISBpcyBmaW5lIGhlcmUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbnRleHQgPSBzYXZlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5mdW5jdGlvbiBtYXliZShmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbiAgICBjYXRjaCAoaWdub3JlZCkgeyB9XG59XG4vLyBXZSBzdG9yZSBhIHNpbmdsZSBnbG9iYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNsb3QgY2xhc3MgYXMgYSBwZXJtYW5lbnRcbi8vIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IG9mIHRoZSBnbG9iYWxUaGlzIG9iamVjdC4gVGhpcyBvYmZ1c2NhdGlvbiBkb2VzXG4vLyBub3RoaW5nIHRvIHByZXZlbnQgYWNjZXNzIHRvIHRoZSBTbG90IGNsYXNzLCBidXQgYXQgbGVhc3QgaXQgZW5zdXJlcyB0aGVcbi8vIGltcGxlbWVudGF0aW9uIChpLmUuIGN1cnJlbnRDb250ZXh0KSBjYW5ub3QgYmUgdGFtcGVyZWQgd2l0aCwgYW5kIGFsbCBjb3BpZXNcbi8vIG9mIHRoZSBAd3J5L2NvbnRleHQgcGFja2FnZSAoaG9wZWZ1bGx5IGp1c3Qgb25lKSB3aWxsIHNoYXJlIHRoZSBzYW1lIFNsb3Rcbi8vIGltcGxlbWVudGF0aW9uLiBTaW5jZSB0aGUgZmlyc3QgY29weSBvZiB0aGUgQHdyeS9jb250ZXh0IHBhY2thZ2UgdG8gYmVcbi8vIGltcG9ydGVkIHdpbnMsIHRoaXMgdGVjaG5pcXVlIGltcG9zZXMgYSBzdGVlcCBjb3N0IGZvciBhbnkgZnV0dXJlIGJyZWFraW5nXG4vLyBjaGFuZ2VzIHRvIHRoZSBTbG90IGNsYXNzLlxuY29uc3QgZ2xvYmFsS2V5ID0gXCJAd3J5L2NvbnRleHQ6U2xvdFwiO1xuY29uc3QgaG9zdCA9IFxuLy8gUHJlZmVyIGdsb2JhbFRoaXMgd2hlbiBhdmFpbGFibGUuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYmVuamFtbi93cnl3YXJlL2lzc3Vlcy8zNDdcbm1heWJlKCgpID0+IGdsb2JhbFRoaXMpIHx8XG4gICAgLy8gRmFsbCBiYWNrIHRvIGdsb2JhbCwgd2hpY2ggd29ya3MgaW4gTm9kZS5qcyBhbmQgbWF5IGJlIGNvbnZlcnRlZCBieSBzb21lXG4gICAgLy8gYnVuZGxlcnMgdG8gdGhlIGFwcHJvcHJpYXRlIGlkZW50aWZpZXIgKHdpbmRvdywgc2VsZiwgLi4uKSBkZXBlbmRpbmcgb24gdGhlXG4gICAgLy8gYnVuZGxpbmcgdGFyZ2V0LiBodHRwczovL2dpdGh1Yi5jb20vZW5kb2pzL2VuZG8vaXNzdWVzLzU3NiNpc3N1ZWNvbW1lbnQtMTE3ODUxNTIyNFxuICAgIG1heWJlKCgpID0+IGdsb2JhbCkgfHxcbiAgICAvLyBPdGhlcndpc2UsIHVzZSBhIGR1bW15IGhvc3QgdGhhdCdzIGxvY2FsIHRvIHRoaXMgbW9kdWxlLiBXZSB1c2VkIHRvIGZhbGxcbiAgICAvLyBiYWNrIHRvIHVzaW5nIHRoZSBBcnJheSBjb25zdHJ1Y3RvciBhcyBhIG5hbWVzcGFjZSwgYnV0IHRoYXQgd2FzIGZsYWdnZWQgaW5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYmVuamFtbi93cnl3YXJlL2lzc3Vlcy8zNDcsIGFuZCBjYW4gYmUgYXZvaWRlZC5cbiAgICBPYmplY3QuY3JlYXRlKG51bGwpO1xuLy8gV2hpY2hldmVyIGdsb2JhbEhvc3Qgd2UncmUgdXNpbmcsIG1ha2UgVHlwZVNjcmlwdCBoYXBweSBhYm91dCB0aGUgYWRkaXRpb25hbFxuLy8gZ2xvYmFsS2V5IHByb3BlcnR5LlxuY29uc3QgZ2xvYmFsSG9zdCA9IGhvc3Q7XG5leHBvcnQgY29uc3QgU2xvdCA9IGdsb2JhbEhvc3RbZ2xvYmFsS2V5XSB8fFxuICAgIC8vIEVhcmxpZXIgdmVyc2lvbnMgb2YgdGhpcyBwYWNrYWdlIHN0b3JlZCB0aGUgZ2xvYmFsS2V5IHByb3BlcnR5IG9uIHRoZSBBcnJheVxuICAgIC8vIGNvbnN0cnVjdG9yLCBzbyB3ZSBjaGVjayB0aGVyZSBhcyB3ZWxsLCB0byBwcmV2ZW50IFNsb3QgY2xhc3MgZHVwbGljYXRpb24uXG4gICAgQXJyYXlbZ2xvYmFsS2V5XSB8fFxuICAgIChmdW5jdGlvbiAoU2xvdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbEhvc3QsIGdsb2JhbEtleSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBTbG90LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAvLyBXaGVuIGl0IHdhcyBwb3NzaWJsZSBmb3IgZ2xvYmFsSG9zdCB0byBiZSB0aGUgQXJyYXkgY29uc3RydWN0b3IgKGFcbiAgICAgICAgICAgICAgICAvLyBsZWdhY3kgU2xvdCBkZWR1cCBzdHJhdGVneSksIGl0IHdhcyBpbXBvcnRhbnQgZm9yIHRoZSBwcm9wZXJ0eSB0byBiZVxuICAgICAgICAgICAgICAgIC8vIGNvbmZpZ3VyYWJsZTp0cnVlIHNvIGl0IGNvdWxkIGJlIGRlbGV0ZWQuIFRoYXQgZG9lcyBub3Qgc2VlbSB0byBiZSBhc1xuICAgICAgICAgICAgICAgIC8vIGltcG9ydGFudCB3aGVuIGdsb2JhbEhvc3QgaXMgdGhlIGdsb2JhbCBvYmplY3QsIGJ1dCBJIGRvbid0IHdhbnQgdG9cbiAgICAgICAgICAgICAgICAvLyBjYXVzZSBzaW1pbGFyIHByb2JsZW1zIGFnYWluLCBhbmQgY29uZmlndXJhYmxlOnRydWUgc2VlbXMgc2FmZXN0LlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmRvanMvZW5kby9pc3N1ZXMvNTc2I2lzc3VlY29tbWVudC0xMTc4Mjc0MDA4XG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHJldHVybiBTbG90O1xuICAgICAgICB9XG4gICAgfSkobWFrZVNsb3RDbGFzcygpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNsb3QuanMubWFwIiwKICAgICJpbXBvcnQgeyBTbG90IH0gZnJvbSBcIkB3cnkvY29udGV4dFwiO1xuZXhwb3J0IGNvbnN0IHBhcmVudEVudHJ5U2xvdCA9IG5ldyBTbG90KCk7XG5leHBvcnQgZnVuY3Rpb24gbm9uUmVhY3RpdmUoZm4pIHtcbiAgICByZXR1cm4gcGFyZW50RW50cnlTbG90LndpdGhWYWx1ZSh2b2lkIDAsIGZuKTtcbn1cbmV4cG9ydCB7IFNsb3QgfTtcbmV4cG9ydCB7IGJpbmQgYXMgYmluZENvbnRleHQsIG5vQ29udGV4dCwgc2V0VGltZW91dCwgYXN5bmNGcm9tR2VuLCB9IGZyb20gXCJAd3J5L2NvbnRleHRcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQuanMubWFwIiwKICAgICJleHBvcnQgY29uc3QgeyBoYXNPd25Qcm9wZXJ0eSwgfSA9IE9iamVjdC5wcm90b3R5cGU7XG5leHBvcnQgY29uc3QgYXJyYXlGcm9tU2V0ID0gQXJyYXkuZnJvbSB8fFxuICAgIGZ1bmN0aW9uIChzZXQpIHtcbiAgICAgICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICAgICAgc2V0LmZvckVhY2goaXRlbSA9PiBhcnJheS5wdXNoKGl0ZW0pKTtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVVbnN1YnNjcmliZShlbnRyeU9yRGVwKSB7XG4gICAgY29uc3QgeyB1bnN1YnNjcmliZSB9ID0gZW50cnlPckRlcDtcbiAgICBpZiAodHlwZW9mIHVuc3Vic2NyaWJlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgZW50cnlPckRlcC51bnN1YnNjcmliZSA9IHZvaWQgMDtcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWxwZXJzLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgcGFyZW50RW50cnlTbG90IH0gZnJvbSBcIi4vY29udGV4dC5qc1wiO1xuaW1wb3J0IHsgbWF5YmVVbnN1YnNjcmliZSwgYXJyYXlGcm9tU2V0IH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuY29uc3QgZW1wdHlTZXRQb29sID0gW107XG5jb25zdCBQT09MX1RBUkdFVF9TSVpFID0gMTAwO1xuLy8gU2luY2UgdGhpcyBwYWNrYWdlIG1pZ2h0IGJlIHVzZWQgYnJvd3NlcnMsIHdlIHNob3VsZCBhdm9pZCB1c2luZyB0aGVcbi8vIE5vZGUgYnVpbHQtaW4gYXNzZXJ0IG1vZHVsZS5cbmZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIG9wdGlvbmFsTWVzc2FnZSkge1xuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihvcHRpb25hbE1lc3NhZ2UgfHwgXCJhc3NlcnRpb24gZmFpbHVyZVwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWx1ZUlzKGEsIGIpIHtcbiAgICBjb25zdCBsZW4gPSBhLmxlbmd0aDtcbiAgICByZXR1cm4gKFxuICAgIC8vIFVua25vd24gdmFsdWVzIGFyZSBub3QgZXF1YWwgdG8gZWFjaCBvdGhlci5cbiAgICBsZW4gPiAwICYmXG4gICAgICAgIC8vIEJvdGggdmFsdWVzIG11c3QgYmUgb3JkaW5hcnkgKG9yIGJvdGggZXhjZXB0aW9uYWwpIHRvIGJlIGVxdWFsLlxuICAgICAgICBsZW4gPT09IGIubGVuZ3RoICYmXG4gICAgICAgIC8vIFRoZSB1bmRlcmx5aW5nIHZhbHVlIG9yIGV4Y2VwdGlvbiBtdXN0IGJlIHRoZSBzYW1lLlxuICAgICAgICBhW2xlbiAtIDFdID09PSBiW2xlbiAtIDFdKTtcbn1cbmZ1bmN0aW9uIHZhbHVlR2V0KHZhbHVlKSB7XG4gICAgc3dpdGNoICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOiB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHZhbHVlXCIpO1xuICAgICAgICBjYXNlIDE6IHJldHVybiB2YWx1ZVswXTtcbiAgICAgICAgY2FzZSAyOiB0aHJvdyB2YWx1ZVsxXTtcbiAgICB9XG59XG5mdW5jdGlvbiB2YWx1ZUNvcHkodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUuc2xpY2UoMCk7XG59XG5leHBvcnQgY2xhc3MgRW50cnkge1xuICAgIGNvbnN0cnVjdG9yKGZuKSB7XG4gICAgICAgIHRoaXMuZm4gPSBmbjtcbiAgICAgICAgdGhpcy5wYXJlbnRzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmNoaWxkVmFsdWVzID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyBXaGVuIHRoaXMgRW50cnkgaGFzIGNoaWxkcmVuIHRoYXQgYXJlIGRpcnR5LCB0aGlzIHByb3BlcnR5IGJlY29tZXNcbiAgICAgICAgLy8gYSBTZXQgY29udGFpbmluZyBvdGhlciBFbnRyeSBvYmplY3RzLCBib3Jyb3dlZCBmcm9tIGVtcHR5U2V0UG9vbC5cbiAgICAgICAgLy8gV2hlbiB0aGUgc2V0IGJlY29tZXMgZW1wdHksIGl0IGdldHMgcmVjeWNsZWQgYmFjayB0byBlbXB0eVNldFBvb2wuXG4gICAgICAgIHRoaXMuZGlydHlDaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlY29tcHV0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmFsdWUgPSBbXTtcbiAgICAgICAgdGhpcy5kZXBzID0gbnVsbDtcbiAgICAgICAgKytFbnRyeS5jb3VudDtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID09PSAxICYmICFtaWdodEJlRGlydHkodGhpcykpIHtcbiAgICAgICAgICAgIHJlbWVtYmVyUGFyZW50KHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVGhpcyBpcyB0aGUgbW9zdCBpbXBvcnRhbnQgbWV0aG9kIG9mIHRoZSBFbnRyeSBBUEksIGJlY2F1c2UgaXRcbiAgICAvLyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGNhY2hlZCB0aGlzLnZhbHVlIGNhbiBiZSByZXR1cm5lZCBpbW1lZGlhdGVseSxcbiAgICAvLyBvciBtdXN0IGJlIHJlY29tcHV0ZWQuIFRoZSBvdmVyYWxsIHBlcmZvcm1hbmNlIG9mIHRoZSBjYWNoaW5nIHN5c3RlbVxuICAgIC8vIGRlcGVuZHMgb24gdGhlIHRydXRoIG9mIHRoZSBmb2xsb3dpbmcgb2JzZXJ2YXRpb25zOiAoMSkgdGhpcy5kaXJ0eSBpc1xuICAgIC8vIHVzdWFsbHkgZmFsc2UsICgyKSB0aGlzLmRpcnR5Q2hpbGRyZW4gaXMgdXN1YWxseSBudWxsL2VtcHR5LCBhbmQgdGh1c1xuICAgIC8vICgzKSB2YWx1ZUdldCh0aGlzLnZhbHVlKSBpcyB1c3VhbGx5IHJldHVybmVkIHdpdGhvdXQgcmVjb21wdXRhdGlvbi5cbiAgICByZWNvbXB1dGUoYXJncykge1xuICAgICAgICBhc3NlcnQoIXRoaXMucmVjb21wdXRpbmcsIFwiYWxyZWFkeSByZWNvbXB1dGluZ1wiKTtcbiAgICAgICAgcmVtZW1iZXJQYXJlbnQodGhpcyk7XG4gICAgICAgIHJldHVybiBtaWdodEJlRGlydHkodGhpcylcbiAgICAgICAgICAgID8gcmVhbGx5UmVjb21wdXRlKHRoaXMsIGFyZ3MpXG4gICAgICAgICAgICA6IHZhbHVlR2V0KHRoaXMudmFsdWUpO1xuICAgIH1cbiAgICBzZXREaXJ0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICByZXBvcnREaXJ0eSh0aGlzKTtcbiAgICAgICAgLy8gV2UgY2FuIGdvIGFoZWFkIGFuZCB1bnN1YnNjcmliZSBoZXJlLCBzaW5jZSBhbnkgZnVydGhlciBkaXJ0eVxuICAgICAgICAvLyBub3RpZmljYXRpb25zIHdlIHJlY2VpdmUgd2lsbCBiZSByZWR1bmRhbnQsIGFuZCB1bnN1YnNjcmliaW5nIG1heVxuICAgICAgICAvLyBmcmVlIHVwIHNvbWUgcmVzb3VyY2VzLCBlLmcuIGZpbGUgd2F0Y2hlcnMuXG4gICAgICAgIG1heWJlVW5zdWJzY3JpYmUodGhpcyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuc2V0RGlydHkoKTtcbiAgICAgICAgLy8gU2V2ZXIgYW55IGRlcGVuZGVuY3kgcmVsYXRpb25zaGlwcyB3aXRoIG91ciBvd24gY2hpbGRyZW4sIHNvIHRob3NlXG4gICAgICAgIC8vIGNoaWxkcmVuIGRvbid0IHJldGFpbiB0aGlzIHBhcmVudCBFbnRyeSBpbiB0aGVpciBjaGlsZC5wYXJlbnRzIHNldHMsXG4gICAgICAgIC8vIHRoZXJlYnkgcHJldmVudGluZyBpdCBmcm9tIGJlaW5nIGZ1bGx5IGdhcmJhZ2UgY29sbGVjdGVkLlxuICAgICAgICBmb3JnZXRDaGlsZHJlbih0aGlzKTtcbiAgICAgICAgLy8gQmVjYXVzZSB0aGlzIGVudHJ5IGhhcyBiZWVuIGtpY2tlZCBvdXQgb2YgdGhlIGNhY2hlIChpbiBpbmRleC5qcyksXG4gICAgICAgIC8vIHdlJ3ZlIGxvc3QgdGhlIGFiaWxpdHkgdG8gZmluZCBvdXQgaWYvd2hlbiB0aGlzIGVudHJ5IGJlY29tZXMgZGlydHksXG4gICAgICAgIC8vIHdoZXRoZXIgdGhhdCBoYXBwZW5zIHRocm91Z2ggYSBzdWJzY3JpcHRpb24sIGJlY2F1c2Ugb2YgYSBkaXJlY3QgY2FsbFxuICAgICAgICAvLyB0byBlbnRyeS5zZXREaXJ0eSgpLCBvciBiZWNhdXNlIG9uZSBvZiBpdHMgY2hpbGRyZW4gYmVjb21lcyBkaXJ0eS5cbiAgICAgICAgLy8gQmVjYXVzZSBvZiB0aGlzIGxvc3Mgb2YgZnV0dXJlIGluZm9ybWF0aW9uLCB3ZSBoYXZlIHRvIGFzc3VtZSB0aGVcbiAgICAgICAgLy8gd29yc3QgKHRoYXQgdGhpcyBlbnRyeSBtaWdodCBoYXZlIGJlY29tZSBkaXJ0eSB2ZXJ5IHNvb24pLCBzbyB3ZSBtdXN0XG4gICAgICAgIC8vIGltbWVkaWF0ZWx5IG1hcmsgdGhpcyBlbnRyeSdzIHBhcmVudHMgYXMgZGlydHkuIE5vcm1hbGx5IHdlIGNvdWxkXG4gICAgICAgIC8vIGp1c3QgY2FsbCBlbnRyeS5zZXREaXJ0eSgpIHJhdGhlciB0aGFuIGNhbGxpbmcgcGFyZW50LnNldERpcnR5KCkgZm9yXG4gICAgICAgIC8vIGVhY2ggcGFyZW50LCBidXQgdGhhdCB3b3VsZCBsZWF2ZSB0aGlzIGVudHJ5IGluIHBhcmVudC5jaGlsZFZhbHVlc1xuICAgICAgICAvLyBhbmQgcGFyZW50LmRpcnR5Q2hpbGRyZW4sIHdoaWNoIHdvdWxkIHByZXZlbnQgdGhlIGNoaWxkIGZyb20gYmVpbmdcbiAgICAgICAgLy8gdHJ1bHkgZm9yZ290dGVuLlxuICAgICAgICBlYWNoUGFyZW50KHRoaXMsIChwYXJlbnQsIGNoaWxkKSA9PiB7XG4gICAgICAgICAgICBwYXJlbnQuc2V0RGlydHkoKTtcbiAgICAgICAgICAgIGZvcmdldENoaWxkKHBhcmVudCwgdGhpcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmb3JnZXQoKSB7XG4gICAgICAgIC8vIFRoZSBjb2RlIHRoYXQgY3JlYXRlcyBFbnRyeSBvYmplY3RzIGluIGluZGV4LnRzIHdpbGwgcmVwbGFjZSB0aGlzIG1ldGhvZFxuICAgICAgICAvLyB3aXRoIG9uZSB0aGF0IGFjdHVhbGx5IHJlbW92ZXMgdGhlIEVudHJ5IGZyb20gdGhlIGNhY2hlLCB3aGljaCB3aWxsIGFsc29cbiAgICAgICAgLy8gdHJpZ2dlciB0aGUgZW50cnkuZGlzcG9zZSBtZXRob2QuXG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgIH1cbiAgICBkZXBlbmRPbihkZXApIHtcbiAgICAgICAgZGVwLmFkZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmRlcHMpIHtcbiAgICAgICAgICAgIHRoaXMuZGVwcyA9IGVtcHR5U2V0UG9vbC5wb3AoKSB8fCBuZXcgU2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXBzLmFkZChkZXApO1xuICAgIH1cbiAgICBmb3JnZXREZXBzKCkge1xuICAgICAgICBpZiAodGhpcy5kZXBzKSB7XG4gICAgICAgICAgICBhcnJheUZyb21TZXQodGhpcy5kZXBzKS5mb3JFYWNoKGRlcCA9PiBkZXAuZGVsZXRlKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuZGVwcy5jbGVhcigpO1xuICAgICAgICAgICAgZW1wdHlTZXRQb29sLnB1c2godGhpcy5kZXBzKTtcbiAgICAgICAgICAgIHRoaXMuZGVwcyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5FbnRyeS5jb3VudCA9IDA7XG5mdW5jdGlvbiByZW1lbWJlclBhcmVudChjaGlsZCkge1xuICAgIGNvbnN0IHBhcmVudCA9IHBhcmVudEVudHJ5U2xvdC5nZXRWYWx1ZSgpO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgY2hpbGQucGFyZW50cy5hZGQocGFyZW50KTtcbiAgICAgICAgaWYgKCFwYXJlbnQuY2hpbGRWYWx1ZXMuaGFzKGNoaWxkKSkge1xuICAgICAgICAgICAgcGFyZW50LmNoaWxkVmFsdWVzLnNldChjaGlsZCwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtaWdodEJlRGlydHkoY2hpbGQpKSB7XG4gICAgICAgICAgICByZXBvcnREaXJ0eUNoaWxkKHBhcmVudCwgY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVwb3J0Q2xlYW5DaGlsZChwYXJlbnQsIGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlYWxseVJlY29tcHV0ZShlbnRyeSwgYXJncykge1xuICAgIGZvcmdldENoaWxkcmVuKGVudHJ5KTtcbiAgICAvLyBTZXQgZW50cnkgYXMgdGhlIHBhcmVudCBlbnRyeSB3aGlsZSBjYWxsaW5nIHJlY29tcHV0ZU5ld1ZhbHVlKGVudHJ5KS5cbiAgICBwYXJlbnRFbnRyeVNsb3Qud2l0aFZhbHVlKGVudHJ5LCByZWNvbXB1dGVOZXdWYWx1ZSwgW2VudHJ5LCBhcmdzXSk7XG4gICAgaWYgKG1heWJlU3Vic2NyaWJlKGVudHJ5LCBhcmdzKSkge1xuICAgICAgICAvLyBJZiB3ZSBzdWNjZXNzZnVsbHkgcmVjb21wdXRlZCBlbnRyeS52YWx1ZSBhbmQgZGlkIG5vdCBmYWlsIHRvXG4gICAgICAgIC8vIChyZSlzdWJzY3JpYmUsIHRoZW4gdGhpcyBFbnRyeSBpcyBubyBsb25nZXIgZXhwbGljaXRseSBkaXJ0eS5cbiAgICAgICAgc2V0Q2xlYW4oZW50cnkpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVHZXQoZW50cnkudmFsdWUpO1xufVxuZnVuY3Rpb24gcmVjb21wdXRlTmV3VmFsdWUoZW50cnksIGFyZ3MpIHtcbiAgICBlbnRyeS5yZWNvbXB1dGluZyA9IHRydWU7XG4gICAgY29uc3QgeyBub3JtYWxpemVSZXN1bHQgfSA9IGVudHJ5O1xuICAgIGxldCBvbGRWYWx1ZUNvcHk7XG4gICAgaWYgKG5vcm1hbGl6ZVJlc3VsdCAmJiBlbnRyeS52YWx1ZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgb2xkVmFsdWVDb3B5ID0gdmFsdWVDb3B5KGVudHJ5LnZhbHVlKTtcbiAgICB9XG4gICAgLy8gTWFrZSBlbnRyeS52YWx1ZSBhbiBlbXB0eSBhcnJheSwgcmVwcmVzZW50aW5nIGFuIHVua25vd24gdmFsdWUuXG4gICAgZW50cnkudmFsdWUubGVuZ3RoID0gMDtcbiAgICB0cnkge1xuICAgICAgICAvLyBJZiBlbnRyeS5mbiBzdWNjZWVkcywgZW50cnkudmFsdWUgd2lsbCBiZWNvbWUgYSBub3JtYWwgVmFsdWUuXG4gICAgICAgIGVudHJ5LnZhbHVlWzBdID0gZW50cnkuZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSB2aWFibGUgb2xkVmFsdWVDb3B5IHRvIGNvbXBhcmUgd2l0aCB0aGUgKHN1Y2Nlc3NmdWxseVxuICAgICAgICAvLyByZWNvbXB1dGVkKSBuZXcgZW50cnkudmFsdWUsIGFuZCB0aGV5IGFyZSBub3QgYWxyZWFkeSA9PT0gaWRlbnRpY2FsLCBnaXZlXG4gICAgICAgIC8vIG5vcm1hbGl6ZVJlc3VsdCBhIGNoYW5jZSB0byBwaWNrL2Nob29zZS9yZXVzZSBwYXJ0cyBvZiBvbGRWYWx1ZUNvcHlbMF1cbiAgICAgICAgLy8gYW5kL29yIGVudHJ5LnZhbHVlWzBdIHRvIGRldGVybWluZSB0aGUgZmluYWwgY2FjaGVkIGVudHJ5LnZhbHVlLlxuICAgICAgICBpZiAobm9ybWFsaXplUmVzdWx0ICYmIG9sZFZhbHVlQ29weSAmJiAhdmFsdWVJcyhvbGRWYWx1ZUNvcHksIGVudHJ5LnZhbHVlKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBlbnRyeS52YWx1ZVswXSA9IG5vcm1hbGl6ZVJlc3VsdChlbnRyeS52YWx1ZVswXSwgb2xkVmFsdWVDb3B5WzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgIC8vIElmIG5vcm1hbGl6ZVJlc3VsdCB0aHJvd3MsIGp1c3QgdXNlIHRoZSBuZXdlciB2YWx1ZSwgcmF0aGVyIHRoYW5cbiAgICAgICAgICAgICAgICAvLyBzYXZpbmcgdGhlIGV4Y2VwdGlvbiBhcyBlbnRyeS52YWx1ZVsxXS5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZiBlbnRyeS5mbiB0aHJvd3MsIGVudHJ5LnZhbHVlIHdpbGwgaG9sZCB0aGF0IGV4Y2VwdGlvbi5cbiAgICAgICAgZW50cnkudmFsdWVbMV0gPSBlO1xuICAgIH1cbiAgICAvLyBFaXRoZXIgd2F5LCB0aGlzIGxpbmUgaXMgYWx3YXlzIHJlYWNoZWQuXG4gICAgZW50cnkucmVjb21wdXRpbmcgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIG1pZ2h0QmVEaXJ0eShlbnRyeSkge1xuICAgIHJldHVybiBlbnRyeS5kaXJ0eSB8fCAhIShlbnRyeS5kaXJ0eUNoaWxkcmVuICYmIGVudHJ5LmRpcnR5Q2hpbGRyZW4uc2l6ZSk7XG59XG5mdW5jdGlvbiBzZXRDbGVhbihlbnRyeSkge1xuICAgIGVudHJ5LmRpcnR5ID0gZmFsc2U7XG4gICAgaWYgKG1pZ2h0QmVEaXJ0eShlbnRyeSkpIHtcbiAgICAgICAgLy8gVGhpcyBFbnRyeSBtYXkgc3RpbGwgaGF2ZSBkaXJ0eSBjaGlsZHJlbiwgaW4gd2hpY2ggY2FzZSB3ZSBjYW4ndFxuICAgICAgICAvLyBsZXQgb3VyIHBhcmVudHMga25vdyB3ZSdyZSBjbGVhbiBqdXN0IHlldC5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXBvcnRDbGVhbihlbnRyeSk7XG59XG5mdW5jdGlvbiByZXBvcnREaXJ0eShjaGlsZCkge1xuICAgIGVhY2hQYXJlbnQoY2hpbGQsIHJlcG9ydERpcnR5Q2hpbGQpO1xufVxuZnVuY3Rpb24gcmVwb3J0Q2xlYW4oY2hpbGQpIHtcbiAgICBlYWNoUGFyZW50KGNoaWxkLCByZXBvcnRDbGVhbkNoaWxkKTtcbn1cbmZ1bmN0aW9uIGVhY2hQYXJlbnQoY2hpbGQsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgcGFyZW50Q291bnQgPSBjaGlsZC5wYXJlbnRzLnNpemU7XG4gICAgaWYgKHBhcmVudENvdW50KSB7XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSBhcnJheUZyb21TZXQoY2hpbGQucGFyZW50cyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyZW50Q291bnQ7ICsraSkge1xuICAgICAgICAgICAgY2FsbGJhY2socGFyZW50c1tpXSwgY2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gTGV0IGEgcGFyZW50IEVudHJ5IGtub3cgdGhhdCBvbmUgb2YgaXRzIGNoaWxkcmVuIG1heSBiZSBkaXJ0eS5cbmZ1bmN0aW9uIHJlcG9ydERpcnR5Q2hpbGQocGFyZW50LCBjaGlsZCkge1xuICAgIC8vIE11c3QgaGF2ZSBjYWxsZWQgcmVtZW1iZXJQYXJlbnQoY2hpbGQpIGJlZm9yZSBjYWxsaW5nXG4gICAgLy8gcmVwb3J0RGlydHlDaGlsZChwYXJlbnQsIGNoaWxkKS5cbiAgICBhc3NlcnQocGFyZW50LmNoaWxkVmFsdWVzLmhhcyhjaGlsZCkpO1xuICAgIGFzc2VydChtaWdodEJlRGlydHkoY2hpbGQpKTtcbiAgICBjb25zdCBwYXJlbnRXYXNDbGVhbiA9ICFtaWdodEJlRGlydHkocGFyZW50KTtcbiAgICBpZiAoIXBhcmVudC5kaXJ0eUNoaWxkcmVuKSB7XG4gICAgICAgIHBhcmVudC5kaXJ0eUNoaWxkcmVuID0gZW1wdHlTZXRQb29sLnBvcCgpIHx8IG5ldyBTZXQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBhcmVudC5kaXJ0eUNoaWxkcmVuLmhhcyhjaGlsZCkpIHtcbiAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBrbm93IHRoaXMgY2hpbGQgaXMgZGlydHksIHRoZW4gd2UgbXVzdCBoYXZlIGFscmVhZHlcbiAgICAgICAgLy8gaW5mb3JtZWQgb3VyIG93biBwYXJlbnRzIHRoYXQgd2UgYXJlIGRpcnR5LCBzbyB3ZSBjYW4gdGVybWluYXRlXG4gICAgICAgIC8vIHRoZSByZWN1cnNpb24gZWFybHkuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcGFyZW50LmRpcnR5Q2hpbGRyZW4uYWRkKGNoaWxkKTtcbiAgICAvLyBJZiBwYXJlbnQgd2FzIGNsZWFuIGJlZm9yZSwgaXQganVzdCBiZWNhbWUgKHBvc3NpYmx5KSBkaXJ0eSAoYWNjb3JkaW5nIHRvXG4gICAgLy8gbWlnaHRCZURpcnR5KSwgc2luY2Ugd2UganVzdCBhZGRlZCBjaGlsZCB0byBwYXJlbnQuZGlydHlDaGlsZHJlbi5cbiAgICBpZiAocGFyZW50V2FzQ2xlYW4pIHtcbiAgICAgICAgcmVwb3J0RGlydHkocGFyZW50KTtcbiAgICB9XG59XG4vLyBMZXQgYSBwYXJlbnQgRW50cnkga25vdyB0aGF0IG9uZSBvZiBpdHMgY2hpbGRyZW4gaXMgbm8gbG9uZ2VyIGRpcnR5LlxuZnVuY3Rpb24gcmVwb3J0Q2xlYW5DaGlsZChwYXJlbnQsIGNoaWxkKSB7XG4gICAgLy8gTXVzdCBoYXZlIGNhbGxlZCByZW1lbWJlckNoaWxkKGNoaWxkKSBiZWZvcmUgY2FsbGluZ1xuICAgIC8vIHJlcG9ydENsZWFuQ2hpbGQocGFyZW50LCBjaGlsZCkuXG4gICAgYXNzZXJ0KHBhcmVudC5jaGlsZFZhbHVlcy5oYXMoY2hpbGQpKTtcbiAgICBhc3NlcnQoIW1pZ2h0QmVEaXJ0eShjaGlsZCkpO1xuICAgIGNvbnN0IGNoaWxkVmFsdWUgPSBwYXJlbnQuY2hpbGRWYWx1ZXMuZ2V0KGNoaWxkKTtcbiAgICBpZiAoY2hpbGRWYWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcGFyZW50LmNoaWxkVmFsdWVzLnNldChjaGlsZCwgdmFsdWVDb3B5KGNoaWxkLnZhbHVlKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCF2YWx1ZUlzKGNoaWxkVmFsdWUsIGNoaWxkLnZhbHVlKSkge1xuICAgICAgICBwYXJlbnQuc2V0RGlydHkoKTtcbiAgICB9XG4gICAgcmVtb3ZlRGlydHlDaGlsZChwYXJlbnQsIGNoaWxkKTtcbiAgICBpZiAobWlnaHRCZURpcnR5KHBhcmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXBvcnRDbGVhbihwYXJlbnQpO1xufVxuZnVuY3Rpb24gcmVtb3ZlRGlydHlDaGlsZChwYXJlbnQsIGNoaWxkKSB7XG4gICAgY29uc3QgZGMgPSBwYXJlbnQuZGlydHlDaGlsZHJlbjtcbiAgICBpZiAoZGMpIHtcbiAgICAgICAgZGMuZGVsZXRlKGNoaWxkKTtcbiAgICAgICAgaWYgKGRjLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIGlmIChlbXB0eVNldFBvb2wubGVuZ3RoIDwgUE9PTF9UQVJHRVRfU0laRSkge1xuICAgICAgICAgICAgICAgIGVtcHR5U2V0UG9vbC5wdXNoKGRjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudC5kaXJ0eUNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIFJlbW92ZXMgYWxsIGNoaWxkcmVuIGZyb20gdGhpcyBlbnRyeSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB0aGVcbi8vIHJlbW92ZWQgY2hpbGRyZW4uXG5mdW5jdGlvbiBmb3JnZXRDaGlsZHJlbihwYXJlbnQpIHtcbiAgICBpZiAocGFyZW50LmNoaWxkVmFsdWVzLnNpemUgPiAwKSB7XG4gICAgICAgIHBhcmVudC5jaGlsZFZhbHVlcy5mb3JFYWNoKChfdmFsdWUsIGNoaWxkKSA9PiB7XG4gICAgICAgICAgICBmb3JnZXRDaGlsZChwYXJlbnQsIGNoaWxkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFJlbW92ZSB0aGlzIHBhcmVudCBFbnRyeSBmcm9tIGFueSBzZXRzIHRvIHdoaWNoIGl0IHdhcyBhZGRlZCBieSB0aGVcbiAgICAvLyBhZGRUb1NldCBtZXRob2QuXG4gICAgcGFyZW50LmZvcmdldERlcHMoKTtcbiAgICAvLyBBZnRlciB3ZSBmb3JnZXQgYWxsIG91ciBjaGlsZHJlbiwgdGhpcy5kaXJ0eUNoaWxkcmVuIG11c3QgYmUgZW1wdHlcbiAgICAvLyBhbmQgdGhlcmVmb3JlIG11c3QgaGF2ZSBiZWVuIHJlc2V0IHRvIG51bGwuXG4gICAgYXNzZXJ0KHBhcmVudC5kaXJ0eUNoaWxkcmVuID09PSBudWxsKTtcbn1cbmZ1bmN0aW9uIGZvcmdldENoaWxkKHBhcmVudCwgY2hpbGQpIHtcbiAgICBjaGlsZC5wYXJlbnRzLmRlbGV0ZShwYXJlbnQpO1xuICAgIHBhcmVudC5jaGlsZFZhbHVlcy5kZWxldGUoY2hpbGQpO1xuICAgIHJlbW92ZURpcnR5Q2hpbGQocGFyZW50LCBjaGlsZCk7XG59XG5mdW5jdGlvbiBtYXliZVN1YnNjcmliZShlbnRyeSwgYXJncykge1xuICAgIGlmICh0eXBlb2YgZW50cnkuc3Vic2NyaWJlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG1heWJlVW5zdWJzY3JpYmUoZW50cnkpOyAvLyBQcmV2ZW50IGRvdWJsZSBzdWJzY3JpcHRpb25zLlxuICAgICAgICAgICAgZW50cnkudW5zdWJzY3JpYmUgPSBlbnRyeS5zdWJzY3JpYmUuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIElmIHRoaXMgRW50cnkgaGFzIGEgc3Vic2NyaWJlIGZ1bmN0aW9uIGFuZCBpdCB0aHJldyBhbiBleGNlcHRpb25cbiAgICAgICAgICAgIC8vIChvciBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbiBpdCBwcmV2aW91c2x5IHJldHVybmVkIG5vdyB0aHJvd3MpLFxuICAgICAgICAgICAgLy8gcmV0dXJuIGZhbHNlIHRvIGluZGljYXRlIHRoYXQgd2Ugd2VyZSBub3QgYWJsZSB0byBzdWJzY3JpYmUgKG9yXG4gICAgICAgICAgICAvLyB1bnN1YnNjcmliZSksIGFuZCB0aGlzIEVudHJ5IHNob3VsZCByZW1haW4gZGlydHkuXG4gICAgICAgICAgICBlbnRyeS5zZXREaXJ0eSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFJldHVybmluZyB0cnVlIGluZGljYXRlcyBlaXRoZXIgdGhhdCB0aGVyZSB3YXMgbm8gZW50cnkuc3Vic2NyaWJlXG4gICAgLy8gZnVuY3Rpb24gb3IgdGhhdCBpdCBzdWNjZWVkZWQuXG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnRyeS5qcy5tYXAiLAogICAgImltcG9ydCB7IHBhcmVudEVudHJ5U2xvdCB9IGZyb20gXCIuL2NvbnRleHQuanNcIjtcbmltcG9ydCB7IGhhc093blByb3BlcnR5LCBtYXliZVVuc3Vic2NyaWJlLCBhcnJheUZyb21TZXQsIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuY29uc3QgRW50cnlNZXRob2RzID0ge1xuICAgIHNldERpcnR5OiB0cnVlLFxuICAgIGRpc3Bvc2U6IHRydWUsXG4gICAgZm9yZ2V0OiB0cnVlLCAvLyBGdWxseSByZW1vdmUgcGFyZW50IEVudHJ5IGZyb20gTFJVIGNhY2hlIGFuZCBjb21wdXRhdGlvbiBncmFwaFxufTtcbmV4cG9ydCBmdW5jdGlvbiBkZXAob3B0aW9ucykge1xuICAgIGNvbnN0IGRlcHNCeUtleSA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBzdWJzY3JpYmUgPSBvcHRpb25zICYmIG9wdGlvbnMuc3Vic2NyaWJlO1xuICAgIGZ1bmN0aW9uIGRlcGVuZChrZXkpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gcGFyZW50RW50cnlTbG90LmdldFZhbHVlKCk7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgIGxldCBkZXAgPSBkZXBzQnlLZXkuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAoIWRlcCkge1xuICAgICAgICAgICAgICAgIGRlcHNCeUtleS5zZXQoa2V5LCBkZXAgPSBuZXcgU2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudC5kZXBlbmRPbihkZXApO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIG1heWJlVW5zdWJzY3JpYmUoZGVwKTtcbiAgICAgICAgICAgICAgICBkZXAudW5zdWJzY3JpYmUgPSBzdWJzY3JpYmUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXBlbmQuZGlydHkgPSBmdW5jdGlvbiBkaXJ0eShrZXksIGVudHJ5TWV0aG9kTmFtZSkge1xuICAgICAgICBjb25zdCBkZXAgPSBkZXBzQnlLZXkuZ2V0KGtleSk7XG4gICAgICAgIGlmIChkZXApIHtcbiAgICAgICAgICAgIGNvbnN0IG0gPSAoZW50cnlNZXRob2ROYW1lICYmXG4gICAgICAgICAgICAgICAgaGFzT3duUHJvcGVydHkuY2FsbChFbnRyeU1ldGhvZHMsIGVudHJ5TWV0aG9kTmFtZSkpID8gZW50cnlNZXRob2ROYW1lIDogXCJzZXREaXJ0eVwiO1xuICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byB1c2UgYXJyYXlGcm9tU2V0KGRlcCkuZm9yRWFjaCBpbnN0ZWFkIG9mIGRlcC5mb3JFYWNoLFxuICAgICAgICAgICAgLy8gYmVjYXVzZSBtb2RpZnlpbmcgYSBTZXQgd2hpbGUgaXRlcmF0aW5nIG92ZXIgaXQgY2FuIGNhdXNlIGVsZW1lbnRzIGluXG4gICAgICAgICAgICAvLyB0aGUgU2V0IHRvIGJlIHJlbW92ZWQgZnJvbSB0aGUgU2V0IGJlZm9yZSB0aGV5J3ZlIGJlZW4gaXRlcmF0ZWQgb3Zlci5cbiAgICAgICAgICAgIGFycmF5RnJvbVNldChkZXApLmZvckVhY2goZW50cnkgPT4gZW50cnlbbV0oKSk7XG4gICAgICAgICAgICBkZXBzQnlLZXkuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBtYXliZVVuc3Vic2NyaWJlKGRlcCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBkZXBlbmQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZXAuanMubWFwIiwKICAgICJpbXBvcnQgeyBUcmllIH0gZnJvbSBcIkB3cnkvdHJpZVwiO1xuaW1wb3J0IHsgU3Ryb25nQ2FjaGUgfSBmcm9tIFwiQHdyeS9jYWNoZXNcIjtcbmltcG9ydCB7IEVudHJ5IH0gZnJvbSBcIi4vZW50cnkuanNcIjtcbmltcG9ydCB7IHBhcmVudEVudHJ5U2xvdCB9IGZyb20gXCIuL2NvbnRleHQuanNcIjtcbi8vIFRoZXNlIGhlbHBlciBmdW5jdGlvbnMgYXJlIGltcG9ydGFudCBmb3IgbWFraW5nIG9wdGltaXNtIHdvcmsgd2l0aFxuLy8gYXN5bmNocm9ub3VzIGNvZGUuIEluIG9yZGVyIHRvIHJlZ2lzdGVyIHBhcmVudC1jaGlsZCBkZXBlbmRlbmNpZXMsXG4vLyBvcHRpbWlzbSBuZWVkcyB0byBrbm93IGFib3V0IGFueSBjdXJyZW50bHkgYWN0aXZlIHBhcmVudCBjb21wdXRhdGlvbnMuXG4vLyBJbiBvcmRpbmFyeSBzeW5jaHJvbm91cyBjb2RlLCB0aGUgcGFyZW50IGNvbnRleHQgaXMgaW1wbGljaXQgaW4gdGhlXG4vLyBleGVjdXRpb24gc3RhY2ssIGJ1dCBhc3luY2hyb25vdXMgY29kZSByZXF1aXJlcyBzb21lIGV4dHJhIGd1aWRhbmNlIGluXG4vLyBvcmRlciB0byBwcm9wYWdhdGUgY29udGV4dCBmcm9tIG9uZSBhc3luYyB0YXNrIHNlZ21lbnQgdG8gdGhlIG5leHQuXG5leHBvcnQgeyBiaW5kQ29udGV4dCwgbm9Db250ZXh0LCBub25SZWFjdGl2ZSwgc2V0VGltZW91dCwgYXN5bmNGcm9tR2VuLCBTbG90LCB9IGZyb20gXCIuL2NvbnRleHQuanNcIjtcbi8vIEEgbGlnaHRlci13ZWlnaHQgZGVwZW5kZW5jeSwgc2ltaWxhciB0byBPcHRpbWlzdGljV3JhcHBlckZ1bmN0aW9uLCBleGNlcHRcbi8vIHdpdGggb25seSBvbmUgYXJndW1lbnQsIG5vIG1ha2VDYWNoZUtleSwgbm8gd3JhcHBlZCBmdW5jdGlvbiB0byByZWNvbXB1dGUsXG4vLyBhbmQgbm8gcmVzdWx0IHZhbHVlLiBVc2VmdWwgZm9yIHJlcHJlc2VudGluZyBkZXBlbmRlbmN5IGxlYXZlcyBpbiB0aGUgZ3JhcGhcbi8vIG9mIGNvbXB1dGF0aW9uLiBTdWJzY3JpcHRpb25zIGFyZSBzdXBwb3J0ZWQuXG5leHBvcnQgeyBkZXAgfSBmcm9tIFwiLi9kZXAuanNcIjtcbi8vIFRoZSBkZWZhdWx0TWFrZUNhY2hlS2V5IGZ1bmN0aW9uIGlzIHJlbWFya2FibHkgcG93ZXJmdWwsIGJlY2F1c2UgaXQgZ2l2ZXNcbi8vIGEgdW5pcXVlIG9iamVjdCBmb3IgYW55IHNoYWxsb3ctaWRlbnRpY2FsIGxpc3Qgb2YgYXJndW1lbnRzLiBJZiB5b3UgbmVlZFxuLy8gdG8gaW1wbGVtZW50IGEgY3VzdG9tIG1ha2VDYWNoZUtleSBmdW5jdGlvbiwgeW91IG1heSBmaW5kIGl0IGhlbHBmdWwgdG9cbi8vIGRlbGVnYXRlIHRoZSBmaW5hbCB3b3JrIHRvIGRlZmF1bHRNYWtlQ2FjaGVLZXksIHdoaWNoIGlzIHdoeSB3ZSBleHBvcnQgaXRcbi8vIGhlcmUuIEhvd2V2ZXIsIHlvdSBtYXkgd2FudCB0byBhdm9pZCBkZWZhdWx0TWFrZUNhY2hlS2V5IGlmIHlvdXIgcnVudGltZVxuLy8gZG9lcyBub3Qgc3VwcG9ydCBXZWFrTWFwLCBvciB5b3UgaGF2ZSB0aGUgYWJpbGl0eSB0byByZXR1cm4gYSBzdHJpbmcga2V5LlxuLy8gSW4gdGhvc2UgY2FzZXMsIGp1c3Qgd3JpdGUgeW91ciBvd24gY3VzdG9tIG1ha2VDYWNoZUtleSBmdW5jdGlvbnMuXG5sZXQgZGVmYXVsdEtleVRyaWU7XG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdE1ha2VDYWNoZUtleSguLi5hcmdzKSB7XG4gICAgY29uc3QgdHJpZSA9IGRlZmF1bHRLZXlUcmllIHx8IChkZWZhdWx0S2V5VHJpZSA9IG5ldyBUcmllKHR5cGVvZiBXZWFrTWFwID09PSBcImZ1bmN0aW9uXCIpKTtcbiAgICByZXR1cm4gdHJpZS5sb29rdXBBcnJheShhcmdzKTtcbn1cbi8vIElmIHlvdSdyZSBwYXJhbm9pZCBhYm91dCBtZW1vcnkgbGVha3MsIG9yIHlvdSB3YW50IHRvIGF2b2lkIHVzaW5nIFdlYWtNYXBcbi8vIHVuZGVyIHRoZSBob29kLCBidXQgeW91IHN0aWxsIG5lZWQgdGhlIGJlaGF2aW9yIG9mIGRlZmF1bHRNYWtlQ2FjaGVLZXksXG4vLyBpbXBvcnQgdGhpcyBjb25zdHJ1Y3RvciB0byBjcmVhdGUgeW91ciBvd24gdHJpZXMuXG5leHBvcnQgeyBUcmllIGFzIEtleVRyaWUgfTtcbjtcbmNvbnN0IGNhY2hlcyA9IG5ldyBTZXQoKTtcbmV4cG9ydCBmdW5jdGlvbiB3cmFwKG9yaWdpbmFsRnVuY3Rpb24sIHsgbWF4ID0gTWF0aC5wb3coMiwgMTYpLCBrZXlBcmdzLCBtYWtlQ2FjaGVLZXkgPSBkZWZhdWx0TWFrZUNhY2hlS2V5LCBub3JtYWxpemVSZXN1bHQsIHN1YnNjcmliZSwgY2FjaGU6IGNhY2hlT3B0aW9uID0gU3Ryb25nQ2FjaGUsIH0gPSBPYmplY3QuY3JlYXRlKG51bGwpKSB7XG4gICAgY29uc3QgY2FjaGUgPSB0eXBlb2YgY2FjaGVPcHRpb24gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IG5ldyBjYWNoZU9wdGlvbihtYXgsIGVudHJ5ID0+IGVudHJ5LmRpc3Bvc2UoKSlcbiAgICAgICAgOiBjYWNoZU9wdGlvbjtcbiAgICBjb25zdCBvcHRpbWlzdGljID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBrZXkgPSBtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwga2V5QXJncyA/IGtleUFyZ3MuYXBwbHkobnVsbCwgYXJndW1lbnRzKSA6IGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChrZXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRnVuY3Rpb24uYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZW50cnkgPSBjYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICAgICAgY2FjaGUuc2V0KGtleSwgZW50cnkgPSBuZXcgRW50cnkob3JpZ2luYWxGdW5jdGlvbikpO1xuICAgICAgICAgICAgZW50cnkubm9ybWFsaXplUmVzdWx0ID0gbm9ybWFsaXplUmVzdWx0O1xuICAgICAgICAgICAgZW50cnkuc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgICAgICAgLy8gR2l2ZSB0aGUgRW50cnkgdGhlIGFiaWxpdHkgdG8gdHJpZ2dlciBjYWNoZS5kZWxldGUoa2V5KSwgZXZlbiB0aG91Z2hcbiAgICAgICAgICAgIC8vIHRoZSBFbnRyeSBpdHNlbGYgZG9lcyBub3Qga25vdyBhYm91dCBrZXkgb3IgY2FjaGUuXG4gICAgICAgICAgICBlbnRyeS5mb3JnZXQgPSAoKSA9PiBjYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IGVudHJ5LnJlY29tcHV0ZShBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICAgICAgLy8gTW92ZSB0aGlzIGVudHJ5IHRvIHRoZSBmcm9udCBvZiB0aGUgbGVhc3QtcmVjZW50bHkgdXNlZCBxdWV1ZSxcbiAgICAgICAgLy8gc2luY2Ugd2UganVzdCBmaW5pc2hlZCBjb21wdXRpbmcgaXRzIHZhbHVlLlxuICAgICAgICBjYWNoZS5zZXQoa2V5LCBlbnRyeSk7XG4gICAgICAgIGNhY2hlcy5hZGQoY2FjaGUpO1xuICAgICAgICAvLyBDbGVhbiB1cCBhbnkgZXhjZXNzIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBidXQgb25seSBpZiB0aGVyZSBpcyBub1xuICAgICAgICAvLyBhY3RpdmUgcGFyZW50IGVudHJ5LCBtZWFuaW5nIHdlJ3JlIG5vdCBpbiB0aGUgbWlkZGxlIG9mIGEgbGFyZ2VyXG4gICAgICAgIC8vIGNvbXB1dGF0aW9uIHRoYXQgbWlnaHQgYmUgZmx1bW1veGVkIGJ5IHRoZSBjbGVhbmluZy5cbiAgICAgICAgaWYgKCFwYXJlbnRFbnRyeVNsb3QuaGFzVmFsdWUoKSkge1xuICAgICAgICAgICAgY2FjaGVzLmZvckVhY2goY2FjaGUgPT4gY2FjaGUuY2xlYW4oKSk7XG4gICAgICAgICAgICBjYWNoZXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3B0aW1pc3RpYywgXCJzaXplXCIsIHtcbiAgICAgICAgZ2V0OiAoKSA9PiBjYWNoZS5zaXplLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB9KTtcbiAgICBPYmplY3QuZnJlZXplKG9wdGltaXN0aWMub3B0aW9ucyA9IHtcbiAgICAgICAgbWF4LFxuICAgICAgICBrZXlBcmdzLFxuICAgICAgICBtYWtlQ2FjaGVLZXksXG4gICAgICAgIG5vcm1hbGl6ZVJlc3VsdCxcbiAgICAgICAgc3Vic2NyaWJlLFxuICAgICAgICBjYWNoZSxcbiAgICB9KTtcbiAgICBmdW5jdGlvbiBkaXJ0eUtleShrZXkpIHtcbiAgICAgICAgY29uc3QgZW50cnkgPSBrZXkgJiYgY2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgZW50cnkuc2V0RGlydHkoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvcHRpbWlzdGljLmRpcnR5S2V5ID0gZGlydHlLZXk7XG4gICAgb3B0aW1pc3RpYy5kaXJ0eSA9IGZ1bmN0aW9uIGRpcnR5KCkge1xuICAgICAgICBkaXJ0eUtleShtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBwZWVrS2V5KGtleSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IGtleSAmJiBjYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gZW50cnkucGVlaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wdGltaXN0aWMucGVla0tleSA9IHBlZWtLZXk7XG4gICAgb3B0aW1pc3RpYy5wZWVrID0gZnVuY3Rpb24gcGVlaygpIHtcbiAgICAgICAgcmV0dXJuIHBlZWtLZXkobWFrZUNhY2hlS2V5LmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gZm9yZ2V0S2V5KGtleSkge1xuICAgICAgICByZXR1cm4ga2V5ID8gY2FjaGUuZGVsZXRlKGtleSkgOiBmYWxzZTtcbiAgICB9XG4gICAgb3B0aW1pc3RpYy5mb3JnZXRLZXkgPSBmb3JnZXRLZXk7XG4gICAgb3B0aW1pc3RpYy5mb3JnZXQgPSBmdW5jdGlvbiBmb3JnZXQoKSB7XG4gICAgICAgIHJldHVybiBmb3JnZXRLZXkobWFrZUNhY2hlS2V5LmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gICAgb3B0aW1pc3RpYy5tYWtlQ2FjaGVLZXkgPSBtYWtlQ2FjaGVLZXk7XG4gICAgb3B0aW1pc3RpYy5nZXRLZXkgPSBrZXlBcmdzID8gZnVuY3Rpb24gZ2V0S2V5KCkge1xuICAgICAgICByZXR1cm4gbWFrZUNhY2hlS2V5LmFwcGx5KG51bGwsIGtleUFyZ3MuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfSA6IG1ha2VDYWNoZUtleTtcbiAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZShvcHRpbWlzdGljKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgVHJpZSB9IGZyb20gXCJAd3J5L3RyaWVcIjtcbmltcG9ydCB7IGNhblVzZVdlYWtNYXAsIGNhblVzZVdlYWtTZXQgfSBmcm9tIFwiLi4vY29tbW9uL2NhblVzZS5qc1wiO1xuaW1wb3J0IHsgY2hlY2tEb2N1bWVudCB9IGZyb20gXCIuL2dldEZyb21BU1QuanNcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBXZWFrQ2FjaGUgfSBmcm9tIFwiQHdyeS9jYWNoZXNcIjtcbmltcG9ydCB7IHdyYXAgfSBmcm9tIFwib3B0aW1pc21cIjtcbmltcG9ydCB7IGNhY2hlU2l6ZXMgfSBmcm9tIFwiLi4vY2FjaGluZy9pbmRleC5qc1wiO1xuZnVuY3Rpb24gaWRlbnRpdHkoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQ7XG59XG52YXIgRG9jdW1lbnRUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRG9jdW1lbnRUcmFuc2Zvcm0odHJhbnNmb3JtLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7IH1cbiAgICAgICAgdGhpcy5yZXN1bHRDYWNoZSA9IGNhblVzZVdlYWtTZXQgPyBuZXcgV2Vha1NldCgpIDogbmV3IFNldCgpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZ2V0Q2FjaGVLZXkpIHtcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlIGRlZmF1bHQgYGdldENhY2hlS2V5YCBmdW5jdGlvbiwgd2hpY2ggcmV0dXJucyBbZG9jdW1lbnRdLlxuICAgICAgICAgICAgdGhpcy5nZXRDYWNoZUtleSA9IG9wdGlvbnMuZ2V0Q2FjaGVLZXk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWNoZWQgPSBvcHRpb25zLmNhY2hlICE9PSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZXNldENhY2hlKCk7XG4gICAgfVxuICAgIC8vIFRoaXMgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBnZXRDYWNoZUtleSBjYW4gYmUgb3ZlcnJpZGRlbiBieSBwcm92aWRpbmdcbiAgICAvLyBvcHRpb25zLmdldENhY2hlS2V5IHRvIHRoZSBEb2N1bWVudFRyYW5zZm9ybSBjb25zdHJ1Y3Rvci4gSW4gZ2VuZXJhbCwgYVxuICAgIC8vIGdldENhY2hlS2V5IGZ1bmN0aW9uIG1heSBlaXRoZXIgcmV0dXJuIGFuIGFycmF5IG9mIGtleXMgKG9mdGVuIGluY2x1ZGluZ1xuICAgIC8vIHRoZSBkb2N1bWVudCkgdG8gYmUgdXNlZCBhcyBhIGNhY2hlIGtleSwgb3IgdW5kZWZpbmVkIHRvIGluZGljYXRlIHRoZVxuICAgIC8vIHRyYW5zZm9ybSBmb3IgdGhpcyBkb2N1bWVudCBzaG91bGQgbm90IGJlIGNhY2hlZC5cbiAgICBEb2N1bWVudFRyYW5zZm9ybS5wcm90b3R5cGUuZ2V0Q2FjaGVLZXkgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIFtkb2N1bWVudF07XG4gICAgfTtcbiAgICBEb2N1bWVudFRyYW5zZm9ybS5pZGVudGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gTm8gbmVlZCB0byBjYWNoZSB0aGlzIHRyYW5zZm9ybSBzaW5jZSBpdCBqdXN0IHJldHVybnMgdGhlIGRvY3VtZW50XG4gICAgICAgIC8vIHVuY2hhbmdlZC4gVGhpcyBzaG91bGQgc2F2ZSBhIGJpdCBvZiBtZW1vcnkgdGhhdCB3b3VsZCBvdGhlcndpc2UgYmVcbiAgICAgICAgLy8gbmVlZGVkIHRvIHBvcHVsYXRlIHRoZSBgZG9jdW1lbnRDYWNoZWAgb2YgdGhpcyB0cmFuc2Zvcm0uXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRUcmFuc2Zvcm0oaWRlbnRpdHksIHsgY2FjaGU6IGZhbHNlIH0pO1xuICAgIH07XG4gICAgRG9jdW1lbnRUcmFuc2Zvcm0uc3BsaXQgPSBmdW5jdGlvbiAocHJlZGljYXRlLCBsZWZ0LCByaWdodCkge1xuICAgICAgICBpZiAocmlnaHQgPT09IHZvaWQgMCkgeyByaWdodCA9IERvY3VtZW50VHJhbnNmb3JtLmlkZW50aXR5KCk7IH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IERvY3VtZW50VHJhbnNmb3JtKGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICAgICAgdmFyIGRvY3VtZW50VHJhbnNmb3JtID0gcHJlZGljYXRlKGRvY3VtZW50KSA/IGxlZnQgOiByaWdodDtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudFRyYW5zZm9ybS50cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudCk7XG4gICAgICAgIH0sIFxuICAgICAgICAvLyBSZWFzb25hYmx5IGFzc3VtZSBib3RoIGBsZWZ0YCBhbmQgYHJpZ2h0YCB0cmFuc2Zvcm1zIGhhbmRsZSB0aGVpciBvd24gY2FjaGluZ1xuICAgICAgICB7IGNhY2hlOiBmYWxzZSB9KSwgeyBsZWZ0OiBsZWZ0LCByaWdodDogcmlnaHQgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGludGVybmFsIGNhY2hlIG9mIHRoaXMgdHJhbnNmb3JtLCBpZiBpdCBoYXMgb25lLlxuICAgICAqL1xuICAgIERvY3VtZW50VHJhbnNmb3JtLnByb3RvdHlwZS5yZXNldENhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5jYWNoZWQpIHtcbiAgICAgICAgICAgIHZhciBzdGFibGVDYWNoZUtleXNfMSA9IG5ldyBUcmllKGNhblVzZVdlYWtNYXApO1xuICAgICAgICAgICAgdGhpcy5wZXJmb3JtV29yayA9IHdyYXAoRG9jdW1lbnRUcmFuc2Zvcm0ucHJvdG90eXBlLnBlcmZvcm1Xb3JrLmJpbmQodGhpcyksIHtcbiAgICAgICAgICAgICAgICBtYWtlQ2FjaGVLZXk6IGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2FjaGVLZXlzID0gX3RoaXMuZ2V0Q2FjaGVLZXkoZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVLZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhcmlhbnQoQXJyYXkuaXNBcnJheShjYWNoZUtleXMpLCAxMDUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YWJsZUNhY2hlS2V5c18xLmxvb2t1cEFycmF5KGNhY2hlS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1heDogY2FjaGVTaXplc1tcImRvY3VtZW50VHJhbnNmb3JtLmNhY2hlXCJdLFxuICAgICAgICAgICAgICAgIGNhY2hlOiAoV2Vha0NhY2hlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEb2N1bWVudFRyYW5zZm9ybS5wcm90b3R5cGUucGVyZm9ybVdvcmsgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHtcbiAgICAgICAgY2hlY2tEb2N1bWVudChkb2N1bWVudCk7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybShkb2N1bWVudCk7XG4gICAgfTtcbiAgICBEb2N1bWVudFRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtRG9jdW1lbnQgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHtcbiAgICAgICAgLy8gSWYgYSB1c2VyIHBhc3NlcyBhbiBhbHJlYWR5IHRyYW5zZm9ybWVkIHJlc3VsdCBiYWNrIHRvIHRoaXMgZnVuY3Rpb24sXG4gICAgICAgIC8vIGltbWVkaWF0ZWx5IHJldHVybiBpdC5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0Q2FjaGUuaGFzKGRvY3VtZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgICAgICB9XG4gICAgICAgIHZhciB0cmFuc2Zvcm1lZERvY3VtZW50ID0gdGhpcy5wZXJmb3JtV29yayhkb2N1bWVudCk7XG4gICAgICAgIHRoaXMucmVzdWx0Q2FjaGUuYWRkKHRyYW5zZm9ybWVkRG9jdW1lbnQpO1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWREb2N1bWVudDtcbiAgICB9O1xuICAgIERvY3VtZW50VHJhbnNmb3JtLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiAob3RoZXJUcmFuc2Zvcm0pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IERvY3VtZW50VHJhbnNmb3JtKGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIG90aGVyVHJhbnNmb3JtLnRyYW5zZm9ybURvY3VtZW50KF90aGlzLnRyYW5zZm9ybURvY3VtZW50KGRvY3VtZW50KSk7XG4gICAgICAgIH0sIFxuICAgICAgICAvLyBSZWFzb25hYmx5IGFzc3VtZSBib3RoIHRyYW5zZm9ybXMgaGFuZGxlIHRoZWlyIG93biBjYWNoaW5nXG4gICAgICAgIHsgY2FjaGU6IGZhbHNlIH0pLCB7XG4gICAgICAgICAgICBsZWZ0OiB0aGlzLFxuICAgICAgICAgICAgcmlnaHQ6IG90aGVyVHJhbnNmb3JtLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBEb2N1bWVudFRyYW5zZm9ybTtcbn0oKSk7XG5leHBvcnQgeyBEb2N1bWVudFRyYW5zZm9ybSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RG9jdW1lbnRUcmFuc2Zvcm0uanMubWFwIiwKICAgICJpbXBvcnQgeyBwcmludCBhcyBvcmlnUHJpbnQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgQXV0b0NsZWFuZWRXZWFrQ2FjaGUsIGNhY2hlU2l6ZXMsIH0gZnJvbSBcIi4uL2NhY2hpbmcvaW5kZXguanNcIjtcbmltcG9ydCB7IHJlZ2lzdGVyR2xvYmFsQ2FjaGUgfSBmcm9tIFwiLi4vY2FjaGluZy9nZXRNZW1vcnlJbnRlcm5hbHMuanNcIjtcbnZhciBwcmludENhY2hlO1xuZXhwb3J0IHZhciBwcmludCA9IE9iamVjdC5hc3NpZ24oZnVuY3Rpb24gKGFzdCkge1xuICAgIHZhciByZXN1bHQgPSBwcmludENhY2hlLmdldChhc3QpO1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHJlc3VsdCA9IG9yaWdQcmludChhc3QpO1xuICAgICAgICBwcmludENhY2hlLnNldChhc3QsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59LCB7XG4gICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcHJpbnRDYWNoZSA9IG5ldyBBdXRvQ2xlYW5lZFdlYWtDYWNoZShjYWNoZVNpemVzLnByaW50IHx8IDIwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXMucHJpbnQgKi8pO1xuICAgIH0sXG59KTtcbnByaW50LnJlc2V0KCk7XG5pZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgIHJlZ2lzdGVyR2xvYmFsQ2FjaGUoXCJwcmludFwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiAocHJpbnRDYWNoZSA/IHByaW50Q2FjaGUuc2l6ZSA6IDApOyB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByaW50LmpzLm1hcCIsCiAgICAiLy8gQSB2ZXJzaW9uIG9mIEFycmF5LmlzQXJyYXkgdGhhdCB3b3JrcyBiZXR0ZXIgd2l0aCByZWFkb25seSBhcnJheXMuXG5leHBvcnQgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuZXhwb3J0IGZ1bmN0aW9uIGlzTm9uRW1wdHlBcnJheSh2YWx1ZSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPiAwO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXlzLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3NpZ24sIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2aXNpdCwgS2luZCB9IGZyb20gXCJncmFwaHFsXCI7XG5pbXBvcnQgeyBjaGVja0RvY3VtZW50LCBnZXRPcGVyYXRpb25EZWZpbml0aW9uLCBnZXRGcmFnbWVudERlZmluaXRpb24sIGdldEZyYWdtZW50RGVmaW5pdGlvbnMsIGdldE1haW5EZWZpbml0aW9uLCB9IGZyb20gXCIuL2dldEZyb21BU1QuanNcIjtcbmltcG9ydCB7IGlzRmllbGQgfSBmcm9tIFwiLi9zdG9yZVV0aWxzLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVGcmFnbWVudE1hcCB9IGZyb20gXCIuL2ZyYWdtZW50cy5qc1wiO1xuaW1wb3J0IHsgaXNBcnJheSwgaXNOb25FbXB0eUFycmF5IH0gZnJvbSBcIi4uL2NvbW1vbi9hcnJheXMuanNcIjtcbnZhciBUWVBFTkFNRV9GSUVMRCA9IHtcbiAgICBraW5kOiBLaW5kLkZJRUxELFxuICAgIG5hbWU6IHtcbiAgICAgICAga2luZDogS2luZC5OQU1FLFxuICAgICAgICB2YWx1ZTogXCJfX3R5cGVuYW1lXCIsXG4gICAgfSxcbn07XG5mdW5jdGlvbiBpc0VtcHR5KG9wLCBmcmFnbWVudE1hcCkge1xuICAgIHJldHVybiAoIW9wIHx8XG4gICAgICAgIG9wLnNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmV2ZXJ5KGZ1bmN0aW9uIChzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb24ua2luZCA9PT0gS2luZC5GUkFHTUVOVF9TUFJFQUQgJiZcbiAgICAgICAgICAgICAgICBpc0VtcHR5KGZyYWdtZW50TWFwW3NlbGVjdGlvbi5uYW1lLnZhbHVlXSwgZnJhZ21lbnRNYXApO1xuICAgICAgICB9KSk7XG59XG5mdW5jdGlvbiBudWxsSWZEb2NJc0VtcHR5KGRvYykge1xuICAgIHJldHVybiAoaXNFbXB0eShnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvYykgfHwgZ2V0RnJhZ21lbnREZWZpbml0aW9uKGRvYyksIGNyZWF0ZUZyYWdtZW50TWFwKGdldEZyYWdtZW50RGVmaW5pdGlvbnMoZG9jKSkpKSA/XG4gICAgICAgIG51bGxcbiAgICAgICAgOiBkb2M7XG59XG5mdW5jdGlvbiBnZXREaXJlY3RpdmVNYXRjaGVyKGNvbmZpZ3MpIHtcbiAgICB2YXIgbmFtZXMgPSBuZXcgTWFwKCk7XG4gICAgdmFyIHRlc3RzID0gbmV3IE1hcCgpO1xuICAgIGNvbmZpZ3MuZm9yRWFjaChmdW5jdGlvbiAoZGlyZWN0aXZlKSB7XG4gICAgICAgIGlmIChkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgIGlmIChkaXJlY3RpdmUubmFtZSkge1xuICAgICAgICAgICAgICAgIG5hbWVzLnNldChkaXJlY3RpdmUubmFtZSwgZGlyZWN0aXZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRpcmVjdGl2ZS50ZXN0KSB7XG4gICAgICAgICAgICAgICAgdGVzdHMuc2V0KGRpcmVjdGl2ZS50ZXN0LCBkaXJlY3RpdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkaXJlY3RpdmUpIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IG5hbWVzLmdldChkaXJlY3RpdmUubmFtZS52YWx1ZSk7XG4gICAgICAgIGlmICghY29uZmlnICYmIHRlc3RzLnNpemUpIHtcbiAgICAgICAgICAgIHRlc3RzLmZvckVhY2goZnVuY3Rpb24gKHRlc3RDb25maWcsIHRlc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAodGVzdChkaXJlY3RpdmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IHRlc3RDb25maWc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xufVxuZnVuY3Rpb24gbWFrZUluVXNlR2V0dGVyRnVuY3Rpb24oZGVmYXVsdEtleSkge1xuICAgIHZhciBtYXAgPSBuZXcgTWFwKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGluVXNlR2V0dGVyRnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09IHZvaWQgMCkgeyBrZXkgPSBkZWZhdWx0S2V5OyB9XG4gICAgICAgIHZhciBpblVzZSA9IG1hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFpblVzZSkge1xuICAgICAgICAgICAgbWFwLnNldChrZXksIChpblVzZSA9IHtcbiAgICAgICAgICAgICAgICAvLyBWYXJpYWJsZSBhbmQgZnJhZ21lbnQgc3ByZWFkIG5hbWVzIHVzZWQgZGlyZWN0bHkgd2l0aGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBvcGVyYXRpb24gb3IgZnJhZ21lbnQgZGVmaW5pdGlvbiwgYXMgaWRlbnRpZmllZCBieSBrZXkuIFRoZXNlIHNldHNcbiAgICAgICAgICAgICAgICAvLyB3aWxsIGJlIHBvcHVsYXRlZCBkdXJpbmcgdGhlIGZpcnN0IHRyYXZlcnNhbCBvZiB0aGUgZG9jdW1lbnQgaW5cbiAgICAgICAgICAgICAgICAvLyByZW1vdmVEaXJlY3RpdmVzRnJvbURvY3VtZW50IGJlbG93LlxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogbmV3IFNldCgpLFxuICAgICAgICAgICAgICAgIGZyYWdtZW50U3ByZWFkczogbmV3IFNldCgpLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpblVzZTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQoZGlyZWN0aXZlcywgZG9jKSB7XG4gICAgY2hlY2tEb2N1bWVudChkb2MpO1xuICAgIC8vIFBhc3NpbmcgZW1wdHkgc3RyaW5ncyB0byBtYWtlSW5Vc2VHZXR0ZXJGdW5jdGlvbiBtZWFucyB3ZSBoYW5kbGUgYW5vbnltb3VzXG4gICAgLy8gb3BlcmF0aW9ucyBhcyBpZiB0aGVpciBuYW1lcyB3ZXJlIFwiXCIuIEFub255bW91cyBmcmFnbWVudCBkZWZpbml0aW9ucyBhcmVcbiAgICAvLyBub3Qgc3VwcG9zZWQgdG8gYmUgcG9zc2libGUsIGJ1dCB0aGUgc2FtZSBkZWZhdWx0IG5hbWluZyBzdHJhdGVneSBzZWVtc1xuICAgIC8vIGFwcHJvcHJpYXRlIGZvciB0aGF0IGNhc2UgYXMgd2VsbC5cbiAgICB2YXIgZ2V0SW5Vc2VCeU9wZXJhdGlvbk5hbWUgPSBtYWtlSW5Vc2VHZXR0ZXJGdW5jdGlvbihcIlwiKTtcbiAgICB2YXIgZ2V0SW5Vc2VCeUZyYWdtZW50TmFtZSA9IG1ha2VJblVzZUdldHRlckZ1bmN0aW9uKFwiXCIpO1xuICAgIHZhciBnZXRJblVzZSA9IGZ1bmN0aW9uIChhbmNlc3RvcnMpIHtcbiAgICAgICAgZm9yICh2YXIgcCA9IDAsIGFuY2VzdG9yID0gdm9pZCAwOyBwIDwgYW5jZXN0b3JzLmxlbmd0aCAmJiAoYW5jZXN0b3IgPSBhbmNlc3RvcnNbcF0pOyArK3ApIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGFuY2VzdG9yKSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChhbmNlc3Rvci5raW5kID09PSBLaW5kLk9QRVJBVElPTl9ERUZJTklUSU9OKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgYW4gb3BlcmF0aW9uIGlzIGFub255bW91cywgd2UgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgaXRzIGtleS5cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0SW5Vc2VCeU9wZXJhdGlvbk5hbWUoYW5jZXN0b3IubmFtZSAmJiBhbmNlc3Rvci5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhbmNlc3Rvci5raW5kID09PSBLaW5kLkZSQUdNRU5UX0RFRklOSVRJT04pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0SW5Vc2VCeUZyYWdtZW50TmFtZShhbmNlc3Rvci5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC5lcnJvcigxMjUpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIHZhciBvcGVyYXRpb25Db3VudCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IGRvYy5kZWZpbml0aW9ucy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICBpZiAoZG9jLmRlZmluaXRpb25zW2ldLmtpbmQgPT09IEtpbmQuT1BFUkFUSU9OX0RFRklOSVRJT04pIHtcbiAgICAgICAgICAgICsrb3BlcmF0aW9uQ291bnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGRpcmVjdGl2ZU1hdGNoZXIgPSBnZXREaXJlY3RpdmVNYXRjaGVyKGRpcmVjdGl2ZXMpO1xuICAgIHZhciBzaG91bGRSZW1vdmVGaWVsZCA9IGZ1bmN0aW9uIChub2RlRGlyZWN0aXZlcykge1xuICAgICAgICByZXR1cm4gaXNOb25FbXB0eUFycmF5KG5vZGVEaXJlY3RpdmVzKSAmJlxuICAgICAgICAgICAgbm9kZURpcmVjdGl2ZXNcbiAgICAgICAgICAgICAgICAubWFwKGRpcmVjdGl2ZU1hdGNoZXIpXG4gICAgICAgICAgICAgICAgLnNvbWUoZnVuY3Rpb24gKGNvbmZpZykgeyByZXR1cm4gY29uZmlnICYmIGNvbmZpZy5yZW1vdmU7IH0pO1xuICAgIH07XG4gICAgdmFyIG9yaWdpbmFsRnJhZ21lbnREZWZzQnlQYXRoID0gbmV3IE1hcCgpO1xuICAgIC8vIEFueSB0aW1lIHRoZSBmaXJzdCB0cmF2ZXJzYWwgb2YgdGhlIGRvY3VtZW50IGJlbG93IG1ha2VzIGEgY2hhbmdlIGxpa2VcbiAgICAvLyByZW1vdmluZyBhIGZyYWdtZW50IChieSByZXR1cm5pbmcgbnVsbCksIHRoaXMgdmFyaWFibGUgc2hvdWxkIGJlIHNldCB0b1xuICAgIC8vIHRydWUuIE9uY2UgaXQgYmVjb21lcyB0cnVlLCBpdCBzaG91bGQgbmV2ZXIgYmUgc2V0IHRvIGZhbHNlIGFnYWluLiBJZiB0aGlzXG4gICAgLy8gdmFyaWFibGUgcmVtYWlucyBmYWxzZSB0aHJvdWdob3V0IHRoZSB0cmF2ZXJzYWwsIHRoZW4gd2UgY2FuIHJldHVybiB0aGVcbiAgICAvLyBvcmlnaW5hbCBkb2MgaW1tZWRpYXRlbHkgd2l0aG91dCBhbnkgbW9kaWZpY2F0aW9ucy5cbiAgICB2YXIgZmlyc3RWaXNpdE1hZGVDaGFuZ2VzID0gZmFsc2U7XG4gICAgdmFyIGZpZWxkT3JJbmxpbmVGcmFnbWVudFZpc2l0b3IgPSB7XG4gICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgaWYgKHNob3VsZFJlbW92ZUZpZWxkKG5vZGUuZGlyZWN0aXZlcykpIHtcbiAgICAgICAgICAgICAgICBmaXJzdFZpc2l0TWFkZUNoYW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG4gICAgdmFyIGRvY1dpdGhvdXREaXJlY3RpdmVTdWJ0cmVlcyA9IHZpc2l0KGRvYywge1xuICAgICAgICAvLyBUaGVzZSB0d28gQVNUIG5vZGUgdHlwZXMgc2hhcmUgdGhlIHNhbWUgaW1wbGVtZW50YXRpb24sIGRlZmluZWQgYWJvdmUuXG4gICAgICAgIEZpZWxkOiBmaWVsZE9ySW5saW5lRnJhZ21lbnRWaXNpdG9yLFxuICAgICAgICBJbmxpbmVGcmFnbWVudDogZmllbGRPcklubGluZUZyYWdtZW50VmlzaXRvcixcbiAgICAgICAgVmFyaWFibGVEZWZpbml0aW9uOiB7XG4gICAgICAgICAgICBlbnRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIFZhcmlhYmxlRGVmaW5pdGlvbiBub2RlcyBkbyBub3QgY291bnQgYXMgdmFyaWFibGVzIGluIHVzZSwgdGhvdWdoXG4gICAgICAgICAgICAgICAgLy8gdGhleSBkbyBjb250YWluIFZhcmlhYmxlIG5vZGVzIHRoYXQgbWlnaHQgYmUgdmlzaXRlZCBiZWxvdy4gVG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyBjb3VudGluZyB2YXJpYWJsZSBkZWNsYXJhdGlvbnMgYXMgdXNhZ2VzLCB3ZSBza2lwIHZpc2l0aW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNvbnRlbnRzIG9mIHRoaXMgVmFyaWFibGVEZWZpbml0aW9uIG5vZGUgYnkgcmV0dXJuaW5nIGZhbHNlLlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFZhcmlhYmxlOiB7XG4gICAgICAgICAgICBlbnRlcjogZnVuY3Rpb24gKG5vZGUsIF9rZXksIF9wYXJlbnQsIF9wYXRoLCBhbmNlc3RvcnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5Vc2UgPSBnZXRJblVzZShhbmNlc3RvcnMpO1xuICAgICAgICAgICAgICAgIGlmIChpblVzZSkge1xuICAgICAgICAgICAgICAgICAgICBpblVzZS52YXJpYWJsZXMuYWRkKG5vZGUubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgRnJhZ21lbnRTcHJlYWQ6IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSwgX2tleSwgX3BhcmVudCwgX3BhdGgsIGFuY2VzdG9ycykge1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRSZW1vdmVGaWVsZChub2RlLmRpcmVjdGl2ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0VmlzaXRNYWRlQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaW5Vc2UgPSBnZXRJblVzZShhbmNlc3RvcnMpO1xuICAgICAgICAgICAgICAgIGlmIChpblVzZSkge1xuICAgICAgICAgICAgICAgICAgICBpblVzZS5mcmFnbWVudFNwcmVhZHMuYWRkKG5vZGUubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdlIG1pZ2h0IGxpa2UgdG8gcmVtb3ZlIHRoaXMgRnJhZ21lbnRTcHJlYWQgYnkgcmV0dXJuaW5nIG51bGwgaGVyZSBpZlxuICAgICAgICAgICAgICAgIC8vIHRoZSBjb3JyZXNwb25kaW5nIEZyYWdtZW50RGVmaW5pdGlvbiBub2RlIGlzIGFsc28gZ29pbmcgdG8gYmUgcmVtb3ZlZFxuICAgICAgICAgICAgICAgIC8vIGJ5IHRoZSBsb2dpYyBiZWxvdywgYnV0IHdlIGNhbid0IGNvbnRyb2wgdGhlIHJlbGF0aXZlIG9yZGVyIG9mIHRob3NlXG4gICAgICAgICAgICAgICAgLy8gZXZlbnRzLCBzbyB3ZSBoYXZlIHRvIHBvc3Rwb25lIHRoZSByZW1vdmFsIG9mIGRhbmdsaW5nIEZyYWdtZW50U3ByZWFkXG4gICAgICAgICAgICAgICAgLy8gbm9kZXMgdW50aWwgYWZ0ZXIgdGhlIGN1cnJlbnQgdmlzaXQgb2YgdGhlIGRvY3VtZW50IGhhcyBmaW5pc2hlZC5cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIEZyYWdtZW50RGVmaW5pdGlvbjoge1xuICAgICAgICAgICAgZW50ZXI6IGZ1bmN0aW9uIChub2RlLCBfa2V5LCBfcGFyZW50LCBwYXRoKSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxGcmFnbWVudERlZnNCeVBhdGguc2V0KEpTT04uc3RyaW5naWZ5KHBhdGgpLCBub2RlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsZWF2ZTogZnVuY3Rpb24gKG5vZGUsIF9rZXksIF9wYXJlbnQsIHBhdGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxOb2RlID0gb3JpZ2luYWxGcmFnbWVudERlZnNCeVBhdGguZ2V0KEpTT04uc3RyaW5naWZ5KHBhdGgpKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSA9PT0gb3JpZ2luYWxOb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBGcmFnbWVudE5vZGUgcmVjZWl2ZWQgYnkgdGhpcyBsZWF2ZSBmdW5jdGlvbiBpcyBpZGVudGljYWwgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG9uZSByZWNlaXZlZCBieSB0aGUgY29ycmVzcG9uZGluZyBlbnRlciBmdW5jdGlvbiAoYWJvdmUpLCB0aGVuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSB2aXNpdG9yIG11c3Qgbm90IGhhdmUgbWFkZSBhbnkgY2hhbmdlcyB3aXRoaW4gdGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyBGcmFnbWVudERlZmluaXRpb24gbm9kZS4gVGhpcyBmcmFnbWVudCBkZWZpbml0aW9uIG1heSBzdGlsbCBiZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmVkIGlmIHRoZXJlIGFyZSBubyAuLi5zcHJlYWQgcmVmZXJlbmNlcyB0byBpdCwgYnV0IGl0IHdvbid0IGJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZWQganVzdCBiZWNhdXNlIGl0IGhhcyBvbmx5IGEgX190eXBlbmFtZSBmaWVsZC5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGxvZ2ljIGFwcGxpZXMgb25seSBpZiB0aGUgZG9jdW1lbnQgY29udGFpbnMgb25lIG9yIG1vcmVcbiAgICAgICAgICAgICAgICAvLyBvcGVyYXRpb25zLCBzaW5jZSByZW1vdmluZyBhbGwgZnJhZ21lbnRzIGZyb20gYSBkb2N1bWVudCBjb250YWluaW5nXG4gICAgICAgICAgICAgICAgLy8gb25seSBmcmFnbWVudHMgbWFrZXMgdGhlIGRvY3VtZW50IHVzZWxlc3MuXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uQ291bnQgPiAwICYmXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZXZlcnkoZnVuY3Rpb24gKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGlvbi5raW5kID09PSBLaW5kLkZJRUxEICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLm5hbWUudmFsdWUgPT09IFwiX190eXBlbmFtZVwiO1xuICAgICAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgc29tZXdoYXQgb3BpbmlvbmF0ZWQgY2hvaWNlOiBpZiBhIEZyYWdtZW50RGVmaW5pdGlvbiBlbmRzXG4gICAgICAgICAgICAgICAgICAgIC8vIHVwIGhhdmluZyBubyBmaWVsZHMgb3RoZXIgdGhhbiBfX3R5cGVuYW1lLCB3ZSByZW1vdmUgdGhlIHdob2xlXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyYWdtZW50IGRlZmluaXRpb24sIGFuZCBsYXRlciBwcnVuZSAuLi5zcHJlYWQgcmVmZXJlbmNlcyB0byBpdC5cbiAgICAgICAgICAgICAgICAgICAgZ2V0SW5Vc2VCeUZyYWdtZW50TmFtZShub2RlLm5hbWUudmFsdWUpLnJlbW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFZpc2l0TWFkZUNoYW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBEaXJlY3RpdmU6IHtcbiAgICAgICAgICAgIGxlYXZlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIC8vIElmIGEgbWF0Y2hpbmcgZGlyZWN0aXZlIGlzIGZvdW5kLCByZW1vdmUgdGhlIGRpcmVjdGl2ZSBpdHNlbGYuIE5vdGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9lcyBub3QgcmVtb3ZlIHRoZSB0YXJnZXQgKGZpZWxkLCBhcmd1bWVudCwgZXRjKSBvZiB0aGVcbiAgICAgICAgICAgICAgICAvLyBkaXJlY3RpdmUsIGJ1dCBvbmx5IHRoZSBkaXJlY3RpdmUgaXRzZWxmLlxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3RpdmVNYXRjaGVyKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0VmlzaXRNYWRlQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgaWYgKCFmaXJzdFZpc2l0TWFkZUNoYW5nZXMpIHtcbiAgICAgICAgLy8gSWYgb3VyIGZpcnN0IHBhc3MgZGlkIG5vdCBjaGFuZ2UgYW55dGhpbmcgYWJvdXQgdGhlIGRvY3VtZW50LCB0aGVuIHRoZXJlXG4gICAgICAgIC8vIGlzIG5vIGNsZWFudXAgd2UgbmVlZCB0byBkbywgYW5kIHdlIGNhbiByZXR1cm4gdGhlIG9yaWdpbmFsIGRvYy5cbiAgICAgICAgcmV0dXJuIGRvYztcbiAgICB9XG4gICAgLy8gVXRpbGl0eSBmb3IgbWFraW5nIHN1cmUgaW5Vc2UudHJhbnNpdGl2ZVZhcnMgaXMgcmVjdXJzaXZlbHkgcG9wdWxhdGVkLlxuICAgIC8vIEJlY2F1c2UgdGhpcyBsb2dpYyBhc3N1bWVzIGluVXNlLmZyYWdtZW50U3ByZWFkcyBoYXMgYmVlbiBjb21wbGV0ZWx5XG4gICAgLy8gcG9wdWxhdGVkIGFuZCBpblVzZS5yZW1vdmVkIGhhcyBiZWVuIHNldCBpZiBhcHByb3ByaWF0ZSxcbiAgICAvLyBwb3B1bGF0ZVRyYW5zaXRpdmVWYXJzIG11c3QgYmUgY2FsbGVkIGFmdGVyIHRoYXQgaW5mb3JtYXRpb24gaGFzIGJlZW5cbiAgICAvLyBjb2xsZWN0ZWQgYnkgdGhlIGZpcnN0IHRyYXZlcnNhbCBvZiB0aGUgZG9jdW1lbnQuXG4gICAgdmFyIHBvcHVsYXRlVHJhbnNpdGl2ZVZhcnMgPSBmdW5jdGlvbiAoaW5Vc2UpIHtcbiAgICAgICAgaWYgKCFpblVzZS50cmFuc2l0aXZlVmFycykge1xuICAgICAgICAgICAgaW5Vc2UudHJhbnNpdGl2ZVZhcnMgPSBuZXcgU2V0KGluVXNlLnZhcmlhYmxlcyk7XG4gICAgICAgICAgICBpZiAoIWluVXNlLnJlbW92ZWQpIHtcbiAgICAgICAgICAgICAgICBpblVzZS5mcmFnbWVudFNwcmVhZHMuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGRGcmFnbWVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGVUcmFuc2l0aXZlVmFycyhnZXRJblVzZUJ5RnJhZ21lbnROYW1lKGNoaWxkRnJhZ21lbnROYW1lKSkudHJhbnNpdGl2ZVZhcnMuZm9yRWFjaChmdW5jdGlvbiAodmFyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5Vc2UudHJhbnNpdGl2ZVZhcnMuYWRkKHZhck5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5Vc2U7XG4gICAgfTtcbiAgICAvLyBTaW5jZSB3ZSd2ZSBiZWVuIGtlZXBpbmcgdHJhY2sgb2YgZnJhZ21lbnQgc3ByZWFkcyB1c2VkIGJ5IHBhcnRpY3VsYXJcbiAgICAvLyBvcGVyYXRpb25zIGFuZCBmcmFnbWVudCBkZWZpbml0aW9ucywgd2Ugbm93IG5lZWQgdG8gY29tcHV0ZSB0aGUgc2V0IG9mIGFsbFxuICAgIC8vIHNwcmVhZHMgdXNlZCAodHJhbnNpdGl2ZWx5KSBieSBhbnkgb3BlcmF0aW9ucyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgdmFyIGFsbEZyYWdtZW50TmFtZXNVc2VkID0gbmV3IFNldCgpO1xuICAgIGRvY1dpdGhvdXREaXJlY3RpdmVTdWJ0cmVlcy5kZWZpbml0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZWYpIHtcbiAgICAgICAgaWYgKGRlZi5raW5kID09PSBLaW5kLk9QRVJBVElPTl9ERUZJTklUSU9OKSB7XG4gICAgICAgICAgICBwb3B1bGF0ZVRyYW5zaXRpdmVWYXJzKGdldEluVXNlQnlPcGVyYXRpb25OYW1lKGRlZi5uYW1lICYmIGRlZi5uYW1lLnZhbHVlKSkuZnJhZ21lbnRTcHJlYWRzLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkRnJhZ21lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgYWxsRnJhZ21lbnROYW1lc1VzZWQuYWRkKGNoaWxkRnJhZ21lbnROYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlZi5raW5kID09PSBLaW5kLkZSQUdNRU5UX0RFRklOSVRJT04gJiZcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBvcGVyYXRpb25zIGluIHRoZSBkb2N1bWVudCwgdGhlbiBhbGwgZnJhZ21lbnRcbiAgICAgICAgICAgIC8vIGRlZmluaXRpb25zIGNvdW50IGFzIHVzYWdlcyBvZiB0aGVpciBvd24gZnJhZ21lbnQgbmFtZXMuIFRoaXMgaGV1cmlzdGljXG4gICAgICAgICAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgcmVtb3ZpbmcgYWxsIGZyYWdtZW50IGRlZmluaXRpb25zIGZyb20gdGhlXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBqdXN0IGJlY2F1c2UgaXQgY29udGFpbnMgbm8gb3BlcmF0aW9ucyB0aGF0IHVzZSB0aGUgZnJhZ21lbnRzLlxuICAgICAgICAgICAgb3BlcmF0aW9uQ291bnQgPT09IDAgJiZcbiAgICAgICAgICAgICFnZXRJblVzZUJ5RnJhZ21lbnROYW1lKGRlZi5uYW1lLnZhbHVlKS5yZW1vdmVkKSB7XG4gICAgICAgICAgICBhbGxGcmFnbWVudE5hbWVzVXNlZC5hZGQoZGVmLm5hbWUudmFsdWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gTm93IHRoYXQgd2UgaGF2ZSBhZGRlZCBhbGwgZnJhZ21lbnQgc3ByZWFkcyB1c2VkIGJ5IG9wZXJhdGlvbnMgdG8gdGhlXG4gICAgLy8gYWxsRnJhZ21lbnROYW1lc1VzZWQgc2V0LCB3ZSBjYW4gY29tcGxldGUgdGhlIHNldCBieSB0cmFuc2l0aXZlbHkgYWRkaW5nXG4gICAgLy8gYWxsIGZyYWdtZW50IHNwcmVhZHMgdXNlZCBieSB0aG9zZSBmcmFnbWVudHMsIGFuZCBzbyBvbi5cbiAgICBhbGxGcmFnbWVudE5hbWVzVXNlZC5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnbWVudE5hbWUpIHtcbiAgICAgICAgLy8gT25jZSBhbGwgdGhlIGNoaWxkRnJhZ21lbnROYW1lIHN0cmluZ3MgYWRkZWQgaGVyZSBoYXZlIGJlZW4gc2VlbiBhbHJlYWR5LFxuICAgICAgICAvLyB0aGUgdG9wLWxldmVsIGFsbEZyYWdtZW50TmFtZXNVc2VkLmZvckVhY2ggbG9vcCB3aWxsIHRlcm1pbmF0ZS5cbiAgICAgICAgcG9wdWxhdGVUcmFuc2l0aXZlVmFycyhnZXRJblVzZUJ5RnJhZ21lbnROYW1lKGZyYWdtZW50TmFtZSkpLmZyYWdtZW50U3ByZWFkcy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZEZyYWdtZW50TmFtZSkge1xuICAgICAgICAgICAgYWxsRnJhZ21lbnROYW1lc1VzZWQuYWRkKGNoaWxkRnJhZ21lbnROYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgdmFyIGZyYWdtZW50V2lsbEJlUmVtb3ZlZCA9IGZ1bmN0aW9uIChmcmFnbWVudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuICEhKFxuICAgICAgICAvLyBBIGZyYWdtZW50IGRlZmluaXRpb24gd2lsbCBiZSByZW1vdmVkIGlmIHRoZXJlIGFyZSBubyBzcHJlYWRzIHRoYXQgcmVmZXJcbiAgICAgICAgLy8gdG8gaXQsIG9yIHRoZSBmcmFnbWVudCB3YXMgZXhwbGljaXRseSByZW1vdmVkIGJlY2F1c2UgaXQgaGFkIG5vIGZpZWxkc1xuICAgICAgICAvLyBvdGhlciB0aGFuIF9fdHlwZW5hbWUuXG4gICAgICAgICghYWxsRnJhZ21lbnROYW1lc1VzZWQuaGFzKGZyYWdtZW50TmFtZSkgfHxcbiAgICAgICAgICAgIGdldEluVXNlQnlGcmFnbWVudE5hbWUoZnJhZ21lbnROYW1lKS5yZW1vdmVkKSk7XG4gICAgfTtcbiAgICB2YXIgZW50ZXJWaXNpdG9yID0ge1xuICAgICAgICBlbnRlcjogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIGlmIChmcmFnbWVudFdpbGxCZVJlbW92ZWQobm9kZS5uYW1lLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG4gICAgcmV0dXJuIG51bGxJZkRvY0lzRW1wdHkodmlzaXQoZG9jV2l0aG91dERpcmVjdGl2ZVN1YnRyZWVzLCB7XG4gICAgICAgIC8vIElmIHRoZSBmcmFnbWVudCBpcyBnb2luZyB0byBiZSByZW1vdmVkLCB0aGVuIGxlYXZpbmcgYW55IGRhbmdsaW5nXG4gICAgICAgIC8vIEZyYWdtZW50U3ByZWFkIG5vZGVzIHdpdGggdGhlIHNhbWUgbmFtZSB3b3VsZCBiZSBhIG1pc3Rha2UuXG4gICAgICAgIEZyYWdtZW50U3ByZWFkOiBlbnRlclZpc2l0b3IsXG4gICAgICAgIC8vIFRoaXMgaXMgd2hlcmUgdGhlIGZyYWdtZW50IGRlZmluaXRpb24gaXMgYWN0dWFsbHkgcmVtb3ZlZC5cbiAgICAgICAgRnJhZ21lbnREZWZpbml0aW9uOiBlbnRlclZpc2l0b3IsXG4gICAgICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgICAgICAgIGxlYXZlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIC8vIFVwb24gbGVhdmluZyBlYWNoIG9wZXJhdGlvbiBpbiB0aGUgZGVwdGgtZmlyc3QgQVNUIHRyYXZlcnNhbCwgcHJ1bmVcbiAgICAgICAgICAgICAgICAvLyBhbnkgdmFyaWFibGVzIHRoYXQgYXJlIGRlY2xhcmVkIGJ5IHRoZSBvcGVyYXRpb24gYnV0IHVudXNlZCB3aXRoaW4uXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUudmFyaWFibGVEZWZpbml0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlZFZhcmlhYmxlTmFtZXNfMSA9IHBvcHVsYXRlVHJhbnNpdGl2ZVZhcnMoXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGFuIG9wZXJhdGlvbiBpcyBhbm9ueW1vdXMsIHdlIHVzZSB0aGUgZW1wdHkgc3RyaW5nIGFzIGl0cyBrZXkuXG4gICAgICAgICAgICAgICAgICAgIGdldEluVXNlQnlPcGVyYXRpb25OYW1lKG5vZGUubmFtZSAmJiBub2RlLm5hbWUudmFsdWUpKS50cmFuc2l0aXZlVmFycztcbiAgICAgICAgICAgICAgICAgICAgLy8gQWNjb3JkaW5nIHRvIHRoZSBHcmFwaFFMIHNwZWMsIGFsbCB2YXJpYWJsZXMgZGVjbGFyZWQgYnkgYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gb3BlcmF0aW9uIG11c3QgZWl0aGVyIGJlIHVzZWQgYnkgdGhhdCBvcGVyYXRpb24gb3IgdXNlZCBieSBzb21lXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyYWdtZW50IGluY2x1ZGVkIHRyYW5zaXRpdmVseSBpbnRvIHRoYXQgb3BlcmF0aW9uOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3NwZWMuZ3JhcGhxbC5vcmcvZHJhZnQvI3NlYy1BbGwtVmFyaWFibGVzLVVzZWRcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gVG8gc3RheSBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGlzIHZhbGlkYXRpb24gcnVsZSwgaWYvd2hlbiB3ZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGxhc3QgJHZhciByZWZlcmVuY2VzIGZyb20gYW4gb3BlcmF0aW9uIG9yIGl0cyBmcmFnbWVudHMsXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgYWxzbyByZW1vdmUgdGhlIGNvcnJlc3BvbmRpbmcgJHZhciBkZWNsYXJhdGlvbiBmcm9tIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBlbmNsb3Npbmcgb3BlcmF0aW9uLiBUaGlzIHBydW5pbmcgYXBwbGllcyBvbmx5IHRvIG9wZXJhdGlvbnMgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBmcmFnbWVudCBkZWZpbml0aW9ucywgYXQgdGhlIG1vbWVudC4gRnJhZ21lbnRzIG1heSBiZSBhYmxlIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlY2xhcmUgdmFyaWFibGVzIGV2ZW50dWFsbHksIGJ1dCB0b2RheSB0aGV5IGNhbiBvbmx5IGNvbnN1bWUgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZWRWYXJpYWJsZU5hbWVzXzEuc2l6ZSA8IG5vZGUudmFyaWFibGVEZWZpbml0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbm9kZSksIHsgdmFyaWFibGVEZWZpbml0aW9uczogbm9kZS52YXJpYWJsZURlZmluaXRpb25zLmZpbHRlcihmdW5jdGlvbiAodmFyRGVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VkVmFyaWFibGVOYW1lc18xLmhhcyh2YXJEZWYudmFyaWFibGUubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pKTtcbn1cbmV4cG9ydCB2YXIgYWRkVHlwZW5hbWVUb0RvY3VtZW50ID0gT2JqZWN0LmFzc2lnbihmdW5jdGlvbiAoZG9jKSB7XG4gICAgcmV0dXJuIHZpc2l0KGRvYywge1xuICAgICAgICBTZWxlY3Rpb25TZXQ6IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSwgX2tleSwgcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWRkIF9fdHlwZW5hbWUgdG8gT3BlcmF0aW9uRGVmaW5pdGlvbnMuXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudCAmJlxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQua2luZCA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIEtpbmQuT1BFUkFUSU9OX0RFRklOSVRJT04pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBObyBjaGFuZ2VzIGlmIG5vIHNlbGVjdGlvbnMuXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGlvbnMgPSBub2RlLnNlbGVjdGlvbnM7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxlY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgc2VsZWN0aW9ucyBhbHJlYWR5IGhhdmUgYSBfX3R5cGVuYW1lLCBvciBhcmUgcGFydCBvZiBhblxuICAgICAgICAgICAgICAgIC8vIGludHJvc3BlY3Rpb24gcXVlcnksIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgdmFyIHNraXAgPSBzZWxlY3Rpb25zLnNvbWUoZnVuY3Rpb24gKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGlzRmllbGQoc2VsZWN0aW9uKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGVjdGlvbi5uYW1lLnZhbHVlID09PSBcIl9fdHlwZW5hbWVcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5uYW1lLnZhbHVlLmxhc3RJbmRleE9mKFwiX19cIiwgMCkgPT09IDApKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoc2tpcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgU2VsZWN0aW9uU2V0IGlzIEBleHBvcnQtZWQgYXMgYW4gaW5wdXQgdmFyaWFibGUsIGl0IHNob3VsZFxuICAgICAgICAgICAgICAgIC8vIG5vdCBoYXZlIGEgX190eXBlbmFtZSBmaWVsZCAoc2VlIGlzc3VlICM0NjkxKS5cbiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBwYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGlzRmllbGQoZmllbGQpICYmXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmRpcmVjdGl2ZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgZmllbGQuZGlyZWN0aXZlcy5zb21lKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLm5hbWUudmFsdWUgPT09IFwiZXhwb3J0XCI7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCByZXR1cm4gYSBuZXcgU2VsZWN0aW9uU2V0IHdpdGggYSBfX3R5cGVuYW1lIEZpZWxkLlxuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbm9kZSksIHsgc2VsZWN0aW9uczogX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBzZWxlY3Rpb25zLCB0cnVlKSwgW1RZUEVOQU1FX0ZJRUxEXSwgZmFsc2UpIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcbn0sIHtcbiAgICBhZGRlZDogZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgIHJldHVybiBmaWVsZCA9PT0gVFlQRU5BTUVfRklFTEQ7XG4gICAgfSxcbn0pO1xudmFyIGNvbm5lY3Rpb25SZW1vdmVDb25maWcgPSB7XG4gICAgdGVzdDogZnVuY3Rpb24gKGRpcmVjdGl2ZSkge1xuICAgICAgICB2YXIgd2lsbFJlbW92ZSA9IGRpcmVjdGl2ZS5uYW1lLnZhbHVlID09PSBcImNvbm5lY3Rpb25cIjtcbiAgICAgICAgaWYgKHdpbGxSZW1vdmUpIHtcbiAgICAgICAgICAgIGlmICghZGlyZWN0aXZlLmFyZ3VtZW50cyB8fFxuICAgICAgICAgICAgICAgICFkaXJlY3RpdmUuYXJndW1lbnRzLnNvbWUoZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gYXJnLm5hbWUudmFsdWUgPT09IFwia2V5XCI7IH0pKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2FybigxMjYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aWxsUmVtb3ZlO1xuICAgIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNvbm5lY3Rpb25EaXJlY3RpdmVGcm9tRG9jdW1lbnQoZG9jKSB7XG4gICAgcmV0dXJuIHJlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQoW2Nvbm5lY3Rpb25SZW1vdmVDb25maWddLCBjaGVja0RvY3VtZW50KGRvYykpO1xufVxuZnVuY3Rpb24gaGFzRGlyZWN0aXZlc0luU2VsZWN0aW9uU2V0KGRpcmVjdGl2ZXMsIHNlbGVjdGlvblNldCwgbmVzdGVkQ2hlY2spIHtcbiAgICBpZiAobmVzdGVkQ2hlY2sgPT09IHZvaWQgMCkgeyBuZXN0ZWRDaGVjayA9IHRydWU7IH1cbiAgICByZXR1cm4gKCEhc2VsZWN0aW9uU2V0ICYmXG4gICAgICAgIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zICYmXG4gICAgICAgIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLnNvbWUoZnVuY3Rpb24gKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGhhc0RpcmVjdGl2ZXNJblNlbGVjdGlvbihkaXJlY3RpdmVzLCBzZWxlY3Rpb24sIG5lc3RlZENoZWNrKTtcbiAgICAgICAgfSkpO1xufVxuZnVuY3Rpb24gaGFzRGlyZWN0aXZlc0luU2VsZWN0aW9uKGRpcmVjdGl2ZXMsIHNlbGVjdGlvbiwgbmVzdGVkQ2hlY2spIHtcbiAgICBpZiAobmVzdGVkQ2hlY2sgPT09IHZvaWQgMCkgeyBuZXN0ZWRDaGVjayA9IHRydWU7IH1cbiAgICBpZiAoIWlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFzZWxlY3Rpb24uZGlyZWN0aXZlcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAoc2VsZWN0aW9uLmRpcmVjdGl2ZXMuc29tZShnZXREaXJlY3RpdmVNYXRjaGVyKGRpcmVjdGl2ZXMpKSB8fFxuICAgICAgICAobmVzdGVkQ2hlY2sgJiZcbiAgICAgICAgICAgIGhhc0RpcmVjdGl2ZXNJblNlbGVjdGlvblNldChkaXJlY3RpdmVzLCBzZWxlY3Rpb24uc2VsZWN0aW9uU2V0LCBuZXN0ZWRDaGVjaykpKTtcbn1cbmZ1bmN0aW9uIGdldEFyZ3VtZW50TWF0Y2hlcihjb25maWcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gYXJndW1lbnRNYXRjaGVyKGFyZ3VtZW50KSB7XG4gICAgICAgIHJldHVybiBjb25maWcuc29tZShmdW5jdGlvbiAoYUNvbmZpZykge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50LnZhbHVlICYmXG4gICAgICAgICAgICAgICAgYXJndW1lbnQudmFsdWUua2luZCA9PT0gS2luZC5WQVJJQUJMRSAmJlxuICAgICAgICAgICAgICAgIGFyZ3VtZW50LnZhbHVlLm5hbWUgJiZcbiAgICAgICAgICAgICAgICAoYUNvbmZpZy5uYW1lID09PSBhcmd1bWVudC52YWx1ZS5uYW1lLnZhbHVlIHx8XG4gICAgICAgICAgICAgICAgICAgIChhQ29uZmlnLnRlc3QgJiYgYUNvbmZpZy50ZXN0KGFyZ3VtZW50KSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFyZ3VtZW50c0Zyb21Eb2N1bWVudChjb25maWcsIGRvYykge1xuICAgIHZhciBhcmdNYXRjaGVyID0gZ2V0QXJndW1lbnRNYXRjaGVyKGNvbmZpZyk7XG4gICAgcmV0dXJuIG51bGxJZkRvY0lzRW1wdHkodmlzaXQoZG9jLCB7XG4gICAgICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbm9kZSksIHsgXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBtYXRjaGluZyB0b3AgbGV2ZWwgdmFyaWFibGVzIGRlZmluaXRpb25zLlxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZURlZmluaXRpb25zOiBub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS52YXJpYWJsZURlZmluaXRpb25zLmZpbHRlcihmdW5jdGlvbiAodmFyRGVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFjb25maWcuc29tZShmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBhcmcubmFtZSA9PT0gdmFyRGVmLnZhcmlhYmxlLm5hbWUudmFsdWU7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogW10gfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBGaWVsZDoge1xuICAgICAgICAgICAgZW50ZXI6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgYHJlbW92ZWAgaXMgc2V0IHRvIHRydWUgZm9yIGFuIGFyZ3VtZW50LCBhbmQgYW4gYXJndW1lbnQgbWF0Y2hcbiAgICAgICAgICAgICAgICAvLyBpcyBmb3VuZCBmb3IgYSBmaWVsZCwgcmVtb3ZlIHRoZSBmaWVsZCBhcyB3ZWxsLlxuICAgICAgICAgICAgICAgIHZhciBzaG91bGRSZW1vdmVGaWVsZCA9IGNvbmZpZy5zb21lKGZ1bmN0aW9uIChhcmdDb25maWcpIHsgcmV0dXJuIGFyZ0NvbmZpZy5yZW1vdmU7IH0pO1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRSZW1vdmVGaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJnTWF0Y2hDb3VudF8xID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuYXJndW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmFyZ3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJnTWF0Y2hlcihhcmcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ01hdGNoQ291bnRfMSArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdNYXRjaENvdW50XzEgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgQXJndW1lbnQ6IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgbWF0Y2hpbmcgYXJndW1lbnRzLlxuICAgICAgICAgICAgICAgIGlmIChhcmdNYXRjaGVyKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZyYWdtZW50U3ByZWFkRnJvbURvY3VtZW50KGNvbmZpZywgZG9jKSB7XG4gICAgZnVuY3Rpb24gZW50ZXIobm9kZSkge1xuICAgICAgICBpZiAoY29uZmlnLnNvbWUoZnVuY3Rpb24gKGRlZikgeyByZXR1cm4gZGVmLm5hbWUgPT09IG5vZGUubmFtZS52YWx1ZTsgfSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsSWZEb2NJc0VtcHR5KHZpc2l0KGRvYywge1xuICAgICAgICBGcmFnbWVudFNwcmVhZDogeyBlbnRlcjogZW50ZXIgfSxcbiAgICAgICAgRnJhZ21lbnREZWZpbml0aW9uOiB7IGVudGVyOiBlbnRlciB9LFxuICAgIH0pKTtcbn1cbi8vIElmIHRoZSBpbmNvbWluZyBkb2N1bWVudCBpcyBhIHF1ZXJ5LCByZXR1cm4gaXQgYXMgaXMuIE90aGVyd2lzZSwgYnVpbGQgYVxuLy8gbmV3IGRvY3VtZW50IGNvbnRhaW5pbmcgYSBxdWVyeSBvcGVyYXRpb24gYmFzZWQgb24gdGhlIHNlbGVjdGlvbiBzZXRcbi8vIG9mIHRoZSBwcmV2aW91cyBtYWluIG9wZXJhdGlvbi5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFF1ZXJ5RnJvbVNlbGVjdGlvblNldChkb2N1bWVudCkge1xuICAgIHZhciBkZWZpbml0aW9uID0gZ2V0TWFpbkRlZmluaXRpb24oZG9jdW1lbnQpO1xuICAgIHZhciBkZWZpbml0aW9uT3BlcmF0aW9uID0gZGVmaW5pdGlvbi5vcGVyYXRpb247XG4gICAgaWYgKGRlZmluaXRpb25PcGVyYXRpb24gPT09IFwicXVlcnlcIikge1xuICAgICAgICAvLyBBbHJlYWR5IGEgcXVlcnksIHNvIHJldHVybiB0aGUgZXhpc3RpbmcgZG9jdW1lbnQuXG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9XG4gICAgLy8gQnVpbGQgYSBuZXcgcXVlcnkgdXNpbmcgdGhlIHNlbGVjdGlvbiBzZXQgb2YgdGhlIG1haW4gb3BlcmF0aW9uLlxuICAgIHZhciBtb2RpZmllZERvYyA9IHZpc2l0KGRvY3VtZW50LCB7XG4gICAgICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbm9kZSksIHsgb3BlcmF0aW9uOiBcInF1ZXJ5XCIgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBtb2RpZmllZERvYztcbn1cbi8vIFJlbW92ZSBmaWVsZHMgLyBzZWxlY3Rpb24gc2V0cyB0aGF0IGluY2x1ZGUgYW4gQGNsaWVudCBkaXJlY3RpdmUuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2xpZW50U2V0c0Zyb21Eb2N1bWVudChkb2N1bWVudCkge1xuICAgIGNoZWNrRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgIHZhciBtb2RpZmllZERvYyA9IHJlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQoW1xuICAgICAgICB7XG4gICAgICAgICAgICB0ZXN0OiBmdW5jdGlvbiAoZGlyZWN0aXZlKSB7IHJldHVybiBkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gXCJjbGllbnRcIjsgfSxcbiAgICAgICAgICAgIHJlbW92ZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICBdLCBkb2N1bWVudCk7XG4gICAgcmV0dXJuIG1vZGlmaWVkRG9jO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZE5vblJlYWN0aXZlVG9OYW1lZEZyYWdtZW50cyhkb2N1bWVudCkge1xuICAgIGNoZWNrRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgIHJldHVybiB2aXNpdChkb2N1bWVudCwge1xuICAgICAgICBGcmFnbWVudFNwcmVhZDogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIC8vIERvIG5vdCBhZGQgYEBub25yZWFjdGl2ZWAgaWYgdGhlIGZyYWdtZW50IGlzIG1hcmtlZCB3aXRoIGBAdW5tYXNrYFxuICAgICAgICAgICAgLy8gc2luY2Ugd2Ugd2FudCB0byByZWFjdCB0byBjaGFuZ2VzIGluIHRoaXMgZnJhZ21lbnQuXG4gICAgICAgICAgICBpZiAoKF9hID0gbm9kZS5kaXJlY3RpdmVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc29tZShmdW5jdGlvbiAoZGlyZWN0aXZlKSB7IHJldHVybiBkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gXCJ1bm1hc2tcIjsgfSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG5vZGUpLCB7IGRpcmVjdGl2ZXM6IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgKG5vZGUuZGlyZWN0aXZlcyB8fCBbXSksIHRydWUpLCBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IEtpbmQuRElSRUNUSVZFLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogeyBraW5kOiBLaW5kLk5BTUUsIHZhbHVlOiBcIm5vbnJlYWN0aXZlXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLCBmYWxzZSkgfSk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0uanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2Fzc2lnbiwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNOb25OdWxsT2JqZWN0IH0gZnJvbSBcIi4vb2JqZWN0cy5qc1wiO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlZXAoKSB7XG4gICAgdmFyIHNvdXJjZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBzb3VyY2VzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBtZXJnZURlZXBBcnJheShzb3VyY2VzKTtcbn1cbi8vIEluIGFsbW9zdCBhbnkgc2l0dWF0aW9uIHdoZXJlIHlvdSBjb3VsZCBzdWNjZWVkIGluIGdldHRpbmcgdGhlXG4vLyBUeXBlU2NyaXB0IGNvbXBpbGVyIHRvIGluZmVyIGEgdHVwbGUgdHlwZSBmb3IgdGhlIHNvdXJjZXMgYXJyYXksIHlvdVxuLy8gY291bGQganVzdCB1c2UgbWVyZ2VEZWVwIGluc3RlYWQgb2YgbWVyZ2VEZWVwQXJyYXksIHNvIGluc3RlYWQgb2Zcbi8vIHRyeWluZyB0byBjb252ZXJ0IFRbXSB0byBhbiBpbnRlcnNlY3Rpb24gdHlwZSB3ZSBqdXN0IGluZmVyIHRoZSBhcnJheVxuLy8gZWxlbWVudCB0eXBlLCB3aGljaCB3b3JrcyBwZXJmZWN0bHkgd2hlbiB0aGUgc291cmNlcyBhcnJheSBoYXMgYVxuLy8gY29uc2lzdGVudCBlbGVtZW50IHR5cGUuXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VEZWVwQXJyYXkoc291cmNlcykge1xuICAgIHZhciB0YXJnZXQgPSBzb3VyY2VzWzBdIHx8IHt9O1xuICAgIHZhciBjb3VudCA9IHNvdXJjZXMubGVuZ3RoO1xuICAgIGlmIChjb3VudCA+IDEpIHtcbiAgICAgICAgdmFyIG1lcmdlciA9IG5ldyBEZWVwTWVyZ2VyKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgdGFyZ2V0ID0gbWVyZ2VyLm1lcmdlKHRhcmdldCwgc291cmNlc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbnZhciBkZWZhdWx0UmVjb25jaWxlciA9IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSwgcHJvcGVydHkpIHtcbiAgICByZXR1cm4gdGhpcy5tZXJnZSh0YXJnZXRbcHJvcGVydHldLCBzb3VyY2VbcHJvcGVydHldKTtcbn07XG52YXIgRGVlcE1lcmdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEZWVwTWVyZ2VyKHJlY29uY2lsZXIpIHtcbiAgICAgICAgaWYgKHJlY29uY2lsZXIgPT09IHZvaWQgMCkgeyByZWNvbmNpbGVyID0gZGVmYXVsdFJlY29uY2lsZXI7IH1cbiAgICAgICAgdGhpcy5yZWNvbmNpbGVyID0gcmVjb25jaWxlcjtcbiAgICAgICAgdGhpcy5pc09iamVjdCA9IGlzTm9uTnVsbE9iamVjdDtcbiAgICAgICAgdGhpcy5wYXN0Q29waWVzID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICBEZWVwTWVyZ2VyLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY29udGV4dCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgY29udGV4dFtfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHNvdXJjZSkgJiYgaXNOb25OdWxsT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlS2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBzb3VyY2VLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRWYWx1ZSA9IHRhcmdldFtzb3VyY2VLZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlW3NvdXJjZUtleV0gIT09IHRhcmdldFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVjb25jaWxlci5hcHBseShfdGhpcywgX19zcHJlYWRBcnJheShbdGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VLZXldLCBjb250ZXh0LCBmYWxzZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSB3ZWxsLWltcGxlbWVudGVkIHJlY29uY2lsZXIgbWF5IHJldHVybiB0YXJnZXRWYWx1ZSB0byBpbmRpY2F0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG1lcmdlIGNoYW5nZWQgbm90aGluZyBhYm91dCB0aGUgc3RydWN0dXJlIG9mIHRoZSB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB0YXJnZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IF90aGlzLnNoYWxsb3dDb3B5Rm9yTWVyZ2UodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRbc291cmNlS2V5XSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gY29sbGlzaW9uLCB0aGUgdGFyZ2V0IGNhbiBzYWZlbHkgc2hhcmUgbWVtb3J5IHdpdGhcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNvdXJjZSwgYW5kIHRoZSByZWN1cnNpb24gY2FuIHRlcm1pbmF0ZSBoZXJlLlxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBfdGhpcy5zaGFsbG93Q29weUZvck1lcmdlKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtzb3VyY2VLZXldID0gc291cmNlW3NvdXJjZUtleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHNvdXJjZSAob3IgdGFyZ2V0KSBpcyBub3QgYW4gb2JqZWN0LCBsZXQgc291cmNlIHJlcGxhY2UgdGFyZ2V0LlxuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgIH07XG4gICAgRGVlcE1lcmdlci5wcm90b3R5cGUuc2hhbGxvd0NvcHlGb3JNZXJnZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhc3RDb3BpZXMuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfX2Fzc2lnbih7IF9fcHJvdG9fXzogT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSB9LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFzdENvcGllcy5hZGQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIHJldHVybiBEZWVwTWVyZ2VyO1xufSgpKTtcbmV4cG9ydCB7IERlZXBNZXJnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lcmdlRGVlcC5qcy5tYXAiLAogICAgImZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07IGlmIChpdCkgcmV0dXJuIChpdCA9IGl0LmNhbGwobykpLm5leHQuYmluZChpdCk7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbi8vID09PSBTeW1ib2wgU3VwcG9ydCA9PT1cbnZhciBoYXNTeW1ib2xzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJztcbn07XG5cbnZhciBoYXNTeW1ib2wgPSBmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gaGFzU3ltYm9scygpICYmIEJvb2xlYW4oU3ltYm9sW25hbWVdKTtcbn07XG5cbnZhciBnZXRTeW1ib2wgPSBmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gaGFzU3ltYm9sKG5hbWUpID8gU3ltYm9sW25hbWVdIDogJ0BAJyArIG5hbWU7XG59O1xuXG5pZiAoaGFzU3ltYm9scygpICYmICFoYXNTeW1ib2woJ29ic2VydmFibGUnKSkge1xuICBTeW1ib2wub2JzZXJ2YWJsZSA9IFN5bWJvbCgnb2JzZXJ2YWJsZScpO1xufVxuXG52YXIgU3ltYm9sSXRlcmF0b3IgPSBnZXRTeW1ib2woJ2l0ZXJhdG9yJyk7XG52YXIgU3ltYm9sT2JzZXJ2YWJsZSA9IGdldFN5bWJvbCgnb2JzZXJ2YWJsZScpO1xudmFyIFN5bWJvbFNwZWNpZXMgPSBnZXRTeW1ib2woJ3NwZWNpZXMnKTsgLy8gPT09IEFic3RyYWN0IE9wZXJhdGlvbnMgPT09XG5cbmZ1bmN0aW9uIGdldE1ldGhvZChvYmosIGtleSkge1xuICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB1bmRlZmluZWQ7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IodmFsdWUgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0U3BlY2llcyhvYmopIHtcbiAgdmFyIGN0b3IgPSBvYmouY29uc3RydWN0b3I7XG5cbiAgaWYgKGN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgIGN0b3IgPSBjdG9yW1N5bWJvbFNwZWNpZXNdO1xuXG4gICAgaWYgKGN0b3IgPT09IG51bGwpIHtcbiAgICAgIGN0b3IgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGN0b3IgIT09IHVuZGVmaW5lZCA/IGN0b3IgOiBPYnNlcnZhYmxlO1xufVxuXG5mdW5jdGlvbiBpc09ic2VydmFibGUoeCkge1xuICByZXR1cm4geCBpbnN0YW5jZW9mIE9ic2VydmFibGU7IC8vIFNQRUM6IEJyYW5kIGNoZWNrXG59XG5cbmZ1bmN0aW9uIGhvc3RSZXBvcnRFcnJvcihlKSB7XG4gIGlmIChob3N0UmVwb3J0RXJyb3IubG9nKSB7XG4gICAgaG9zdFJlcG9ydEVycm9yLmxvZyhlKTtcbiAgfSBlbHNlIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW5xdWV1ZShmbikge1xuICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgZm4oKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBob3N0UmVwb3J0RXJyb3IoZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gY2xlYW51cFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pIHtcbiAgdmFyIGNsZWFudXAgPSBzdWJzY3JpcHRpb24uX2NsZWFudXA7XG4gIGlmIChjbGVhbnVwID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgc3Vic2NyaXB0aW9uLl9jbGVhbnVwID0gdW5kZWZpbmVkO1xuXG4gIGlmICghY2xlYW51cCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiBjbGVhbnVwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB1bnN1YnNjcmliZSA9IGdldE1ldGhvZChjbGVhbnVwLCAndW5zdWJzY3JpYmUnKTtcblxuICAgICAgaWYgKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgIHVuc3Vic2NyaWJlLmNhbGwoY2xlYW51cCk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgaG9zdFJlcG9ydEVycm9yKGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikge1xuICBzdWJzY3JpcHRpb24uX29ic2VydmVyID0gdW5kZWZpbmVkO1xuICBzdWJzY3JpcHRpb24uX3F1ZXVlID0gdW5kZWZpbmVkO1xuICBzdWJzY3JpcHRpb24uX3N0YXRlID0gJ2Nsb3NlZCc7XG59XG5cbmZ1bmN0aW9uIGZsdXNoU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbikge1xuICB2YXIgcXVldWUgPSBzdWJzY3JpcHRpb24uX3F1ZXVlO1xuXG4gIGlmICghcXVldWUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBzdWJzY3JpcHRpb24uX3F1ZXVlID0gdW5kZWZpbmVkO1xuICBzdWJzY3JpcHRpb24uX3N0YXRlID0gJ3JlYWR5JztcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgKytpKSB7XG4gICAgbm90aWZ5U3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgcXVldWVbaV0udHlwZSwgcXVldWVbaV0udmFsdWUpO1xuICAgIGlmIChzdWJzY3JpcHRpb24uX3N0YXRlID09PSAnY2xvc2VkJykgYnJlYWs7XG4gIH1cbn1cblxuZnVuY3Rpb24gbm90aWZ5U3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgdHlwZSwgdmFsdWUpIHtcbiAgc3Vic2NyaXB0aW9uLl9zdGF0ZSA9ICdydW5uaW5nJztcbiAgdmFyIG9ic2VydmVyID0gc3Vic2NyaXB0aW9uLl9vYnNlcnZlcjtcblxuICB0cnkge1xuICAgIHZhciBtID0gZ2V0TWV0aG9kKG9ic2VydmVyLCB0eXBlKTtcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbmV4dCc6XG4gICAgICAgIGlmIChtKSBtLmNhbGwob2JzZXJ2ZXIsIHZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKG0pIG0uY2FsbChvYnNlcnZlciwgdmFsdWUpO2Vsc2UgdGhyb3cgdmFsdWU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdjb21wbGV0ZSc6XG4gICAgICAgIGNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIGlmIChtKSBtLmNhbGwob2JzZXJ2ZXIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBob3N0UmVwb3J0RXJyb3IoZSk7XG4gIH1cblxuICBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ2Nsb3NlZCcpIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtlbHNlIGlmIChzdWJzY3JpcHRpb24uX3N0YXRlID09PSAncnVubmluZycpIHN1YnNjcmlwdGlvbi5fc3RhdGUgPSAncmVhZHknO1xufVxuXG5mdW5jdGlvbiBvbk5vdGlmeShzdWJzY3JpcHRpb24sIHR5cGUsIHZhbHVlKSB7XG4gIGlmIChzdWJzY3JpcHRpb24uX3N0YXRlID09PSAnY2xvc2VkJykgcmV0dXJuO1xuXG4gIGlmIChzdWJzY3JpcHRpb24uX3N0YXRlID09PSAnYnVmZmVyaW5nJykge1xuICAgIHN1YnNjcmlwdGlvbi5fcXVldWUucHVzaCh7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfSk7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSAhPT0gJ3JlYWR5Jykge1xuICAgIHN1YnNjcmlwdGlvbi5fc3RhdGUgPSAnYnVmZmVyaW5nJztcbiAgICBzdWJzY3JpcHRpb24uX3F1ZXVlID0gW3tcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICB2YWx1ZTogdmFsdWVcbiAgICB9XTtcbiAgICBlbnF1ZXVlKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmbHVzaFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG5vdGlmeVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHR5cGUsIHZhbHVlKTtcbn1cblxudmFyIFN1YnNjcmlwdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbihvYnNlcnZlciwgc3Vic2NyaWJlcikge1xuICAgIC8vIEFTU0VSVDogb2JzZXJ2ZXIgaXMgYW4gb2JqZWN0XG4gICAgLy8gQVNTRVJUOiBzdWJzY3JpYmVyIGlzIGNhbGxhYmxlXG4gICAgdGhpcy5fY2xlYW51cCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgIHRoaXMuX3F1ZXVlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N0YXRlID0gJ2luaXRpYWxpemluZyc7XG4gICAgdmFyIHN1YnNjcmlwdGlvbk9ic2VydmVyID0gbmV3IFN1YnNjcmlwdGlvbk9ic2VydmVyKHRoaXMpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX2NsZWFudXAgPSBzdWJzY3JpYmVyLmNhbGwodW5kZWZpbmVkLCBzdWJzY3JpcHRpb25PYnNlcnZlcik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgc3Vic2NyaXB0aW9uT2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSAnaW5pdGlhbGl6aW5nJykgdGhpcy5fc3RhdGUgPSAncmVhZHknO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFN1YnNjcmlwdGlvbi5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgaWYgKHRoaXMuX3N0YXRlICE9PSAnY2xvc2VkJykge1xuICAgICAgY2xvc2VTdWJzY3JpcHRpb24odGhpcyk7XG4gICAgICBjbGVhbnVwU3Vic2NyaXB0aW9uKHRoaXMpO1xuICAgIH1cbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoU3Vic2NyaXB0aW9uLCBbe1xuICAgIGtleTogXCJjbG9zZWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdGF0ZSA9PT0gJ2Nsb3NlZCc7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcbn0oKTtcblxudmFyIFN1YnNjcmlwdGlvbk9ic2VydmVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uT2JzZXJ2ZXIoc3Vic2NyaXB0aW9uKSB7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uID0gc3Vic2NyaXB0aW9uO1xuICB9XG5cbiAgdmFyIF9wcm90bzIgPSBTdWJzY3JpcHRpb25PYnNlcnZlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvMi5uZXh0ID0gZnVuY3Rpb24gbmV4dCh2YWx1ZSkge1xuICAgIG9uTm90aWZ5KHRoaXMuX3N1YnNjcmlwdGlvbiwgJ25leHQnLCB2YWx1ZSk7XG4gIH07XG5cbiAgX3Byb3RvMi5lcnJvciA9IGZ1bmN0aW9uIGVycm9yKHZhbHVlKSB7XG4gICAgb25Ob3RpZnkodGhpcy5fc3Vic2NyaXB0aW9uLCAnZXJyb3InLCB2YWx1ZSk7XG4gIH07XG5cbiAgX3Byb3RvMi5jb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgIG9uTm90aWZ5KHRoaXMuX3N1YnNjcmlwdGlvbiwgJ2NvbXBsZXRlJyk7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFN1YnNjcmlwdGlvbk9ic2VydmVyLCBbe1xuICAgIGtleTogXCJjbG9zZWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb24uX3N0YXRlID09PSAnY2xvc2VkJztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3Vic2NyaXB0aW9uT2JzZXJ2ZXI7XG59KCk7XG5cbnZhciBPYnNlcnZhYmxlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmVyKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIE9ic2VydmFibGUpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYnNlcnZhYmxlIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbicpO1xuICAgIGlmICh0eXBlb2Ygc3Vic2NyaWJlciAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JzZXJ2YWJsZSBpbml0aWFsaXplciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICB0aGlzLl9zdWJzY3JpYmVyID0gc3Vic2NyaWJlcjtcbiAgfVxuXG4gIHZhciBfcHJvdG8zID0gT2JzZXJ2YWJsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvMy5zdWJzY3JpYmUgPSBmdW5jdGlvbiBzdWJzY3JpYmUob2JzZXJ2ZXIpIHtcbiAgICBpZiAodHlwZW9mIG9ic2VydmVyICE9PSAnb2JqZWN0JyB8fCBvYnNlcnZlciA9PT0gbnVsbCkge1xuICAgICAgb2JzZXJ2ZXIgPSB7XG4gICAgICAgIG5leHQ6IG9ic2VydmVyLFxuICAgICAgICBlcnJvcjogYXJndW1lbnRzWzFdLFxuICAgICAgICBjb21wbGV0ZTogYXJndW1lbnRzWzJdXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKG9ic2VydmVyLCB0aGlzLl9zdWJzY3JpYmVyKTtcbiAgfTtcblxuICBfcHJvdG8zLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkb25lKCkge1xuICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuKHZhbHVlLCBkb25lKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiByZWplY3QsXG4gICAgICAgIGNvbXBsZXRlOiByZXNvbHZlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zLm1hcCA9IGZ1bmN0aW9uIG1hcChmbikge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICB2YXIgQyA9IGdldFNwZWNpZXModGhpcyk7XG4gICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIF90aGlzMi5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFsdWUgPSBmbih2YWx1ZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBfcHJvdG8zLmZpbHRlciA9IGZ1bmN0aW9uIGZpbHRlcihmbikge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICB2YXIgQyA9IGdldFNwZWNpZXModGhpcyk7XG4gICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIF90aGlzMy5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFmbih2YWx1ZSkpIHJldHVybjtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMucmVkdWNlID0gZnVuY3Rpb24gcmVkdWNlKGZuKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgIHZhciBDID0gZ2V0U3BlY2llcyh0aGlzKTtcbiAgICB2YXIgaGFzU2VlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxO1xuICAgIHZhciBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgIHZhciBzZWVkID0gYXJndW1lbnRzWzFdO1xuICAgIHZhciBhY2MgPSBzZWVkO1xuICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHJldHVybiBfdGhpczQuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGZpcnN0ID0gIWhhc1ZhbHVlO1xuICAgICAgICAgIGhhc1ZhbHVlID0gdHJ1ZTtcblxuICAgICAgICAgIGlmICghZmlyc3QgfHwgaGFzU2VlZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYWNjID0gZm4oYWNjLCB2YWx1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWNjID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIWhhc1ZhbHVlICYmICFoYXNTZWVkKSByZXR1cm4gb2JzZXJ2ZXIuZXJyb3IobmV3IFR5cGVFcnJvcignQ2Fubm90IHJlZHVjZSBhbiBlbXB0eSBzZXF1ZW5jZScpKTtcbiAgICAgICAgICBvYnNlcnZlci5uZXh0KGFjYyk7XG4gICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvMy5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQoKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgc291cmNlcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIHNvdXJjZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgdmFyIEMgPSBnZXRTcGVjaWVzKHRoaXMpO1xuICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb247XG4gICAgICB2YXIgaW5kZXggPSAwO1xuXG4gICAgICBmdW5jdGlvbiBzdGFydE5leHQobmV4dCkge1xuICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXh0LnN1YnNjcmliZSh7XG4gICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gc291cmNlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3RhcnROZXh0KEMuZnJvbShzb3VyY2VzW2luZGV4KytdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgc3RhcnROZXh0KF90aGlzNSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzMuZmxhdE1hcCA9IGZ1bmN0aW9uIGZsYXRNYXAoZm4pIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoZm4gKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gICAgdmFyIEMgPSBnZXRTcGVjaWVzKHRoaXMpO1xuICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gW107XG5cbiAgICAgIHZhciBvdXRlciA9IF90aGlzNi5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gZm4odmFsdWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGlubmVyID0gQy5mcm9tKHZhbHVlKS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgaSA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihpbm5lcik7XG4gICAgICAgICAgICAgIGlmIChpID49IDApIHN1YnNjcmlwdGlvbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICBjb21wbGV0ZUlmRG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaChpbm5lcik7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbXBsZXRlSWZEb25lKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBjb21wbGV0ZUlmRG9uZSgpIHtcbiAgICAgICAgaWYgKG91dGVyLmNsb3NlZCAmJiBzdWJzY3JpcHRpb25zLmxlbmd0aCA9PT0gMCkgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgcmV0dXJuIHMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG91dGVyLnVuc3Vic2NyaWJlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90bzNbU3ltYm9sT2JzZXJ2YWJsZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgT2JzZXJ2YWJsZS5mcm9tID0gZnVuY3Rpb24gZnJvbSh4KSB7XG4gICAgdmFyIEMgPSB0eXBlb2YgdGhpcyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiBPYnNlcnZhYmxlO1xuICAgIGlmICh4ID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoeCArICcgaXMgbm90IGFuIG9iamVjdCcpO1xuICAgIHZhciBtZXRob2QgPSBnZXRNZXRob2QoeCwgU3ltYm9sT2JzZXJ2YWJsZSk7XG5cbiAgICBpZiAobWV0aG9kKSB7XG4gICAgICB2YXIgb2JzZXJ2YWJsZSA9IG1ldGhvZC5jYWxsKHgpO1xuICAgICAgaWYgKE9iamVjdChvYnNlcnZhYmxlKSAhPT0gb2JzZXJ2YWJsZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihvYnNlcnZhYmxlICsgJyBpcyBub3QgYW4gb2JqZWN0Jyk7XG4gICAgICBpZiAoaXNPYnNlcnZhYmxlKG9ic2VydmFibGUpICYmIG9ic2VydmFibGUuY29uc3RydWN0b3IgPT09IEMpIHJldHVybiBvYnNlcnZhYmxlO1xuICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGhhc1N5bWJvbCgnaXRlcmF0b3InKSkge1xuICAgICAgbWV0aG9kID0gZ2V0TWV0aG9kKHgsIFN5bWJvbEl0ZXJhdG9yKTtcblxuICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICByZXR1cm4gbmV3IEMoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgZW5xdWV1ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZXIuY2xvc2VkKSByZXR1cm47XG5cbiAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UobWV0aG9kLmNhbGwoeCkpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvcigpKS5kb25lOykge1xuICAgICAgICAgICAgICB2YXIgaXRlbSA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KGl0ZW0pO1xuICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIuY2xvc2VkKSByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KHgpKSB7XG4gICAgICByZXR1cm4gbmV3IEMoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIGVucXVldWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChvYnNlcnZlci5jbG9zZWQpIHJldHVybjtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh4W2ldKTtcbiAgICAgICAgICAgIGlmIChvYnNlcnZlci5jbG9zZWQpIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoeCArICcgaXMgbm90IG9ic2VydmFibGUnKTtcbiAgfTtcblxuICBPYnNlcnZhYmxlLm9mID0gZnVuY3Rpb24gb2YoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBpdGVtcyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgaXRlbXNbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICB2YXIgQyA9IHR5cGVvZiB0aGlzID09PSAnZnVuY3Rpb24nID8gdGhpcyA6IE9ic2VydmFibGU7XG4gICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgZW5xdWV1ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChvYnNlcnZlci5jbG9zZWQpIHJldHVybjtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIubmV4dChpdGVtc1tpXSk7XG4gICAgICAgICAgaWYgKG9ic2VydmVyLmNsb3NlZCkgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIF9jcmVhdGVDbGFzcyhPYnNlcnZhYmxlLCBudWxsLCBbe1xuICAgIGtleTogU3ltYm9sU3BlY2llcyxcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBPYnNlcnZhYmxlO1xufSgpO1xuXG5pZiAoaGFzU3ltYm9scygpKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYnNlcnZhYmxlLCBTeW1ib2woJ2V4dGVuc2lvbnMnKSwge1xuICAgIHZhbHVlOiB7XG4gICAgICBzeW1ib2w6IFN5bWJvbE9ic2VydmFibGUsXG4gICAgICBob3N0UmVwb3J0RXJyb3I6IGhvc3RSZXBvcnRFcnJvclxuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuXG5leHBvcnQgeyBPYnNlcnZhYmxlIH07XG4iLAogICAgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN5bWJvbE9ic2VydmFibGVQb255ZmlsbChyb290KSB7XG5cdHZhciByZXN1bHQ7XG5cdHZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblxuXHRpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGlmIChTeW1ib2wub2JzZXJ2YWJsZSkge1xuXHRcdFx0cmVzdWx0ID0gU3ltYm9sLm9ic2VydmFibGU7XG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0aWYgKHR5cGVvZiBTeW1ib2wuZm9yID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdC8vIFRoaXMganVzdCBuZWVkcyB0byBiZSBzb21ldGhpbmcgdGhhdCB3b24ndCB0cmFtcGxlIG90aGVyIHVzZXIncyBTeW1ib2wuZm9yIHVzZVxuXHRcdFx0XHQvLyBJdCBhbHNvIHdpbGwgZ3VpZGUgcGVvcGxlIHRvIHRoZSBzb3VyY2Ugb2YgdGhlaXIgaXNzdWVzLCBpZiB0aGlzIGlzIHByb2JsZW1hdGljLlxuXHRcdFx0XHQvLyBNRVRBOiBJdCdzIGEgcmVzb3VyY2UgbG9jYXRvciFcblx0XHRcdFx0cmVzdWx0ID0gU3ltYm9sLmZvcignaHR0cHM6Ly9naXRodWIuY29tL2Jlbmxlc2gvc3ltYm9sLW9ic2VydmFibGUnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFN5bWJvbC5mb3IgZGlkbid0IGV4aXN0ISBUaGUgYmVzdCB3ZSBjYW4gZG8gYXQgdGhpcyBwb2ludCBpcyBhIHRvdGFsbHkgXG5cdFx0XHRcdC8vIHVuaXF1ZSBzeW1ib2wuIE5vdGUgdGhhdCB0aGUgc3RyaW5nIGFyZ3VtZW50IGhlcmUgaXMgYSBkZXNjcmlwdG9yLCBub3Rcblx0XHRcdFx0Ly8gYW4gaWRlbnRpZmllci4gVGhpcyBzeW1ib2wgaXMgdW5pcXVlLlxuXHRcdFx0XHRyZXN1bHQgPSBTeW1ib2woJ2h0dHBzOi8vZ2l0aHViLmNvbS9iZW5sZXNoL3N5bWJvbC1vYnNlcnZhYmxlJyk7XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRTeW1ib2wub2JzZXJ2YWJsZSA9IHJlc3VsdDtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHQvLyBEbyBub3RoaW5nLiBJbiBzb21lIGVudmlyb25tZW50cywgdXNlcnMgaGF2ZSBmcm96ZW4gYFN5bWJvbGAgZm9yIHNlY3VyaXR5IHJlYXNvbnMsXG5cdFx0XHRcdC8vIGlmIGl0IGlzIGZyb3plbiBhc3NpZ25pbmcgdG8gaXQgd2lsbCB0aHJvdy4gSW4gdGhpcyBjYXNlLCB3ZSBkb24ndCBjYXJlLCBiZWNhdXNlXG5cdFx0XHRcdC8vIHRoZXkgd2lsbCBuZWVkIHRvIHVzZSB0aGUgcmV0dXJuZWQgdmFsdWUgZnJvbSB0aGUgcG9ueWZpbGwuXG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdCA9ICdAQG9ic2VydmFibGUnO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG4iLAogICAgIi8qIGdsb2JhbCB3aW5kb3cgKi9cbmltcG9ydCBwb255ZmlsbCBmcm9tICcuL3BvbnlmaWxsLmpzJztcblxudmFyIHJvb3Q7XG5cbmlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IHNlbGY7XG59IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBnbG9iYWw7XG59IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBtb2R1bGU7XG59IGVsc2Uge1xuICByb290ID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbn1cblxudmFyIHJlc3VsdCA9IHBvbnlmaWxsKHJvb3QpO1xuZXhwb3J0IGRlZmF1bHQgcmVzdWx0O1xuIiwKICAgICJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcInplbi1vYnNlcnZhYmxlLXRzXCI7XG4vLyBUaGlzIHNpbXBsaWZpZWQgcG9seWZpbGwgYXR0ZW1wdHMgdG8gZm9sbG93IHRoZSBFQ01BU2NyaXB0IE9ic2VydmFibGVcbi8vIHByb3Bvc2FsIChodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlKVxuaW1wb3J0IFwic3ltYm9sLW9ic2VydmFibGVcIjtcbi8vIFRoZSB6ZW4tb2JzZXJ2YWJsZSBwYWNrYWdlIGRlZmluZXMgT2JzZXJ2YWJsZS5wcm90b3R5cGVbU3ltYm9sLm9ic2VydmFibGVdXG4vLyB3aGVuIFN5bWJvbCBpcyBzdXBwb3J0ZWQsIGJ1dCBSeEpTIGludGVyb3AgZGVwZW5kcyBvbiBhbHNvIHNldHRpbmcgdGhpcyBmYWtlXG4vLyAnQEBvYnNlcnZhYmxlJyBzdHJpbmcgYXMgYSBwb2x5ZmlsbCBmb3IgU3ltYm9sLm9ic2VydmFibGUuXG52YXIgcHJvdG90eXBlID0gT2JzZXJ2YWJsZS5wcm90b3R5cGU7XG52YXIgZmFrZU9ic1N5bWJvbCA9IFwiQEBvYnNlcnZhYmxlXCI7XG5pZiAoIXByb3RvdHlwZVtmYWtlT2JzU3ltYm9sXSkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICBwcm90b3R5cGVbZmFrZU9ic1N5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG59XG5leHBvcnQgeyBPYnNlcnZhYmxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcCIsCiAgICAiZXhwb3J0IGZ1bmN0aW9uIHByZXZlbnRVbmhhbmRsZWRSZWplY3Rpb24ocHJvbWlzZSkge1xuICAgIHByb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkgeyB9KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByZXZlbnRVbmhhbmRsZWRSZWplY3Rpb24uanMubWFwIiwKICAgICJ2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuLyoqXG4gKiBEZWVwbHkgY2xvbmVzIGEgdmFsdWUgdG8gY3JlYXRlIGEgbmV3IGluc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVEZWVwKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNsb25lRGVlcEhlbHBlcih2YWx1ZSk7XG59XG5mdW5jdGlvbiBjbG9uZURlZXBIZWxwZXIodmFsLCBzZWVuKSB7XG4gICAgc3dpdGNoICh0b1N0cmluZy5jYWxsKHZhbCkpIHtcbiAgICAgICAgY2FzZSBcIltvYmplY3QgQXJyYXldXCI6IHtcbiAgICAgICAgICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGlmIChzZWVuLmhhcyh2YWwpKVxuICAgICAgICAgICAgICAgIHJldHVybiBzZWVuLmdldCh2YWwpO1xuICAgICAgICAgICAgdmFyIGNvcHlfMSA9IHZhbC5zbGljZSgwKTtcbiAgICAgICAgICAgIHNlZW4uc2V0KHZhbCwgY29weV8xKTtcbiAgICAgICAgICAgIGNvcHlfMS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgaSkge1xuICAgICAgICAgICAgICAgIGNvcHlfMVtpXSA9IGNsb25lRGVlcEhlbHBlcihjaGlsZCwgc2Vlbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBjb3B5XzE7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIltvYmplY3QgT2JqZWN0XVwiOiB7XG4gICAgICAgICAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwKCk7XG4gICAgICAgICAgICBpZiAoc2Vlbi5oYXModmFsKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vlbi5nZXQodmFsKTtcbiAgICAgICAgICAgIC8vIEhpZ2ggZmlkZWxpdHkgcG9seWZpbGxzIG9mIE9iamVjdC5jcmVhdGUgYW5kIE9iamVjdC5nZXRQcm90b3R5cGVPZiBhcmVcbiAgICAgICAgICAgIC8vIHBvc3NpYmxlIGluIGFsbCBKUyBlbnZpcm9ubWVudHMsIHNvIHdlIHdpbGwgYXNzdW1lIHRoZXkgZXhpc3Qvd29yay5cbiAgICAgICAgICAgIHZhciBjb3B5XzIgPSBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWwpKTtcbiAgICAgICAgICAgIHNlZW4uc2V0KHZhbCwgY29weV8yKTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgY29weV8yW2tleV0gPSBjbG9uZURlZXBIZWxwZXIodmFsW2tleV0sIHNlZW4pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gY29weV8yO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsb25lRGVlcC5qcy5tYXAiLAogICAgImltcG9ydCB7IGlzTm9uTnVsbE9iamVjdCB9IGZyb20gXCIuL29iamVjdHMuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBkZWVwRnJlZXplKHZhbHVlKSB7XG4gICAgdmFyIHdvcmtTZXQgPSBuZXcgU2V0KFt2YWx1ZV0pO1xuICAgIHdvcmtTZXQuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmIChpc05vbk51bGxPYmplY3Qob2JqKSAmJiBzaGFsbG93RnJlZXplKG9iaikgPT09IG9iaikge1xuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTm9uTnVsbE9iamVjdChvYmpbbmFtZV0pKVxuICAgICAgICAgICAgICAgICAgICB3b3JrU2V0LmFkZChvYmpbbmFtZV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBzaGFsbG93RnJlZXplKG9iaikge1xuICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmICFPYmplY3QuaXNGcm96ZW4ob2JqKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZShvYmopO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBTb21lIHR5cGVzIGxpa2UgVWludDhBcnJheSBhbmQgTm9kZS5qcydzIEJ1ZmZlciBjYW5ub3QgYmUgZnJvemVuLCBidXRcbiAgICAgICAgICAgIC8vIHRoZXkgYWxsIHRocm93IGEgVHlwZUVycm9yIHdoZW4geW91IHRyeSwgc28gd2UgcmUtdGhyb3cgYW55IGV4Y2VwdGlvbnNcbiAgICAgICAgICAgIC8vIHRoYXQgYXJlIG5vdCBUeXBlRXJyb3JzLCBzaW5jZSB0aGF0IHdvdWxkIGJlIHVuZXhwZWN0ZWQuXG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFR5cGVFcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXliZURlZXBGcmVlemUob2JqKSB7XG4gICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgZGVlcEZyZWV6ZShvYmopO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF5YmVEZWVwRnJlZXplLmpzLm1hcCIsCiAgICAiLyoqXG4gKiBAZGVwcmVjYXRlZCBgaXRlcmF0ZU9ic2VydmVyc1NhZmVseWAgd2lsbCBiZSByZW1vdmVkIHdpdGggQXBvbGxvIENsaWVudCA0LjAuXG4gKiBQbGVhc2UgZGlzY29udGludWUgdXNpbmcgdGhpcyBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkob2JzZXJ2ZXJzLCBtZXRob2QsIGFyZ3VtZW50KSB7XG4gICAgLy8gSW4gY2FzZSBvYnNlcnZlcnMgaXMgbW9kaWZpZWQgZHVyaW5nIGl0ZXJhdGlvbiwgd2UgbmVlZCB0byBjb21taXQgdG8gdGhlXG4gICAgLy8gb3JpZ2luYWwgZWxlbWVudHMsIHdoaWNoIGFsc28gcHJvdmlkZXMgYW4gb3Bwb3J0dW5pdHkgdG8gZmlsdGVyIHRoZW0gZG93blxuICAgIC8vIHRvIGp1c3QgdGhlIG9ic2VydmVycyB3aXRoIHRoZSBnaXZlbiBtZXRob2QuXG4gICAgdmFyIG9ic2VydmVyc1dpdGhNZXRob2QgPSBbXTtcbiAgICBvYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAob2JzKSB7IHJldHVybiBvYnNbbWV0aG9kXSAmJiBvYnNlcnZlcnNXaXRoTWV0aG9kLnB1c2gob2JzKTsgfSk7XG4gICAgb2JzZXJ2ZXJzV2l0aE1ldGhvZC5mb3JFYWNoKGZ1bmN0aW9uIChvYnMpIHsgcmV0dXJuIG9ic1ttZXRob2RdKGFyZ3VtZW50KTsgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVyYXRpb24uanMubWFwIiwKICAgICJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIi4vT2JzZXJ2YWJsZS5qc1wiO1xuLy8gTGlrZSBPYnNlcnZhYmxlLnByb3RvdHlwZS5tYXAsIGV4Y2VwdCB0aGF0IHRoZSBtYXBwaW5nIGZ1bmN0aW9uIGNhblxuLy8gb3B0aW9uYWxseSByZXR1cm4gYSBQcm9taXNlIChvciBiZSBhc3luYykuXG4vKipcbiAqIEBkZXByZWNhdGVkIGBhc3luY01hcGAgd2lsbCBiZSByZW1vdmVkIGluIEFwb2xsbyBDbGllbnQgNC4wLiBUaGlzIGZ1bmN0aW9uIGlzXG4gKiBzYWZlIHRvIHVzZSBpbiBBcG9sbG8gQ2xpZW50IDMueC5cbiAqXG4gKiAqKlJlY29tbWVuZGVkIG5vdyoqXG4gKlxuICogTm8gYWN0aW9uIG5lZWRlZFxuICpcbiAqICoqV2hlbiBtaWdyYXRpbmcqKlxuICpcbiAqIFByZWZlciB0byB1c2UgUnhKUydzIGJ1aWx0IGluIGhlbHBlcnMuIENvbnZlcnQgcHJvbWlzZXMgaW50byBvYnNlcnZhYmxlc1xuICogdXNpbmcgdGhlIFtgZnJvbWBdKGh0dHBzOi8vcnhqcy5kZXYvYXBpL2luZGV4L2Z1bmN0aW9uL2Zyb20pIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXN5bmNNYXAob2JzZXJ2YWJsZSwgbWFwRm4sIGNhdGNoRm4pIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHZhciBwcm9taXNlUXVldWUgPSB7XG4gICAgICAgICAgICAvLyBOb3JtYWxseSB3ZSB3b3VsZCBpbml0aWFsaXplIHByb21pc2VRdWV1ZSB0byBQcm9taXNlLnJlc29sdmUoKSwgYnV0XG4gICAgICAgICAgICAvLyBpbiB0aGlzIGNhc2UsIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgd2UgbmVlZCB0byBiZSBjYXJlZnVsIHRvXG4gICAgICAgICAgICAvLyBpbnZva2UgdGhlIGZpcnN0IGNhbGxiYWNrIHN5bmNocm9ub3VzbHkuXG4gICAgICAgICAgICB0aGVuOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmV0dXJuIHJlc29sdmUoY2FsbGJhY2soKSk7IH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gbWFrZUNhbGxiYWNrKGV4YW1pbmVyLCBrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4YW1pbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBib3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9ic2VydmVyIGlzIGNsb3NlZCwgd2UgZG9uJ3Qgd2FudCB0byBjb250aW51ZSBjYWxsaW5nIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFwcGluZyBmdW5jdGlvbiAtIGl0J3MgcmVzdWx0IHdpbGwgYmUgc3dhbGxvd2VkIGFueXdheXMuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuY2xvc2VkID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB3aWxsIGJlIHN3YWxsb3dlZCAqLyAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBleGFtaW5lcihhcmcpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlUXVldWUgPSBwcm9taXNlUXVldWUudGhlbihib3RoLCBib3RoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIG9ic2VydmVyLm5leHQocmVzdWx0KTsgfSwgZnVuY3Rpb24gKGVycm9yKSB7IHJldHVybiBvYnNlcnZlci5lcnJvcihlcnJvcik7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXJba2V5XShhcmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhhbmRsZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiBtYWtlQ2FsbGJhY2sobWFwRm4sIFwibmV4dFwiKSxcbiAgICAgICAgICAgIGVycm9yOiBtYWtlQ2FsbGJhY2soY2F0Y2hGbiwgXCJlcnJvclwiKSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gbmVlZCB0byByZWFzc2lnbiBgcHJvbWlzZVF1ZXVlYCwgYWZ0ZXIgYG9ic2VydmVyLmNvbXBsZXRlYCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgb2JzZXJ2ZXIgd2lsbCBiZSBjbG9zZWQgYW5kIHNob3J0LWNpcmN1aXQgZXZlcnl0aGluZyBhbnl3YXlzXG4gICAgICAgICAgICAgICAgLypwcm9taXNlUXVldWUgPSAqLyBwcm9taXNlUXVldWUudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBvYnNlcnZlci5jb21wbGV0ZSgpOyB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdWIgPSBvYnNlcnZhYmxlLnN1YnNjcmliZShoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1Yi51bnN1YnNjcmliZSgpOyB9O1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXN5bmNNYXAuanMubWFwIiwKICAgICJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIi4vT2JzZXJ2YWJsZS5qc1wiO1xuaW1wb3J0IHsgY2FuVXNlU3ltYm9sIH0gZnJvbSBcIi4uL2NvbW1vbi9jYW5Vc2UuanNcIjtcbi8vIEdlbmVyaWMgaW1wbGVtZW50YXRpb25zIG9mIE9ic2VydmFibGUucHJvdG90eXBlIG1ldGhvZHMgbGlrZSBtYXAgYW5kXG4vLyBmaWx0ZXIgbmVlZCB0byBrbm93IGhvdyB0byBjcmVhdGUgYSBuZXcgT2JzZXJ2YWJsZSBmcm9tIGFuIE9ic2VydmFibGVcbi8vIHN1YmNsYXNzIChsaWtlIENvbmNhc3Qgb3IgT2JzZXJ2YWJsZVF1ZXJ5KS4gVGhvc2UgbWV0aG9kcyBhc3N1bWVcbi8vIChwZXJoYXBzIHVud2lzZWx5PykgdGhhdCB0aGV5IGNhbiBjYWxsIHRoZSBzdWJ0eXBlJ3MgY29uc3RydWN0b3Igd2l0aCBhXG4vLyBTdWJzY3JpYmVyIGZ1bmN0aW9uLCBldmVuIHRob3VnaCB0aGUgc3ViY2xhc3MgY29uc3RydWN0b3IgbWlnaHQgZXhwZWN0XG4vLyBkaWZmZXJlbnQgcGFyYW1ldGVycy4gRGVmaW5pbmcgdGhpcyBzdGF0aWMgU3ltYm9sLnNwZWNpZXMgcHJvcGVydHkgb25cbi8vIHRoZSBzdWJjbGFzcyBpcyBhIGhpbnQgdG8gZ2VuZXJpYyBPYnNlcnZhYmxlIGNvZGUgdG8gdXNlIHRoZSBkZWZhdWx0XG4vLyBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIHRyeWluZyB0byBkbyBgbmV3IFN1YmNsYXNzKG9ic2VydmVyID0+IC4uLilgLlxuZXhwb3J0IGZ1bmN0aW9uIGZpeE9ic2VydmFibGVTdWJjbGFzcyhzdWJjbGFzcykge1xuICAgIGZ1bmN0aW9uIHNldChrZXkpIHtcbiAgICAgICAgLy8gT2JqZWN0LmRlZmluZVByb3BlcnR5IGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBTeW1ib2wuc3BlY2llc1xuICAgICAgICAvLyBwcm9wZXJ0eSBpcyBhIGdldHRlciBieSBkZWZhdWx0IGluIG1vZGVybiBKUyBlbnZpcm9ubWVudHMsIHNvIHdlXG4gICAgICAgIC8vIGNhbid0IGFzc2lnbiB0byBpdCB3aXRoIGEgbm9ybWFsIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YmNsYXNzLCBrZXksIHsgdmFsdWU6IE9ic2VydmFibGUgfSk7XG4gICAgfVxuICAgIGlmIChjYW5Vc2VTeW1ib2wgJiYgU3ltYm9sLnNwZWNpZXMpIHtcbiAgICAgICAgc2V0KFN5bWJvbC5zcGVjaWVzKTtcbiAgICB9XG4gICAgLy8gVGhlIFwiQEBzcGVjaWVzXCIgc3RyaW5nIGlzIHVzZWQgYXMgYSBmYWtlIFN5bWJvbC5zcGVjaWVzIHZhbHVlIGluIHNvbWVcbiAgICAvLyBwb2x5ZmlsbCBzeXN0ZW1zIChpbmNsdWRpbmcgdGhlIFN5bWJvbFNwZWNpZXMgdmFyaWFibGUgdXNlZCBieVxuICAgIC8vIHplbi1vYnNlcnZhYmxlKSwgc28gd2Ugc2hvdWxkIHNldCBpdCBhcyB3ZWxsLCB0byBiZSBzYWZlLlxuICAgIHNldChcIkBAc3BlY2llc1wiKTtcbiAgICByZXR1cm4gc3ViY2xhc3M7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdWJjbGFzc2luZy5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuL09ic2VydmFibGUuanNcIjtcbmltcG9ydCB7IGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkgfSBmcm9tIFwiLi9pdGVyYXRpb24uanNcIjtcbmltcG9ydCB7IGZpeE9ic2VydmFibGVTdWJjbGFzcyB9IGZyb20gXCIuL3N1YmNsYXNzaW5nLmpzXCI7XG5mdW5jdGlvbiBpc1Byb21pc2VMaWtlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSBcImZ1bmN0aW9uXCI7XG59XG4vLyBBIENvbmNhc3Q8VD4gb2JzZXJ2YWJsZSBjb25jYXRlbmF0ZXMgdGhlIGdpdmVuIHNvdXJjZXMgaW50byBhIHNpbmdsZVxuLy8gbm9uLW92ZXJsYXBwaW5nIHNlcXVlbmNlIG9mIFRzLCBhdXRvbWF0aWNhbGx5IHVud3JhcHBpbmcgYW55IHByb21pc2VzLFxuLy8gYW5kIGJyb2FkY2FzdHMgdGhlIFQgZWxlbWVudHMgb2YgdGhhdCBzZXF1ZW5jZSB0byBhbnkgbnVtYmVyIG9mXG4vLyBzdWJzY3JpYmVycywgYWxsIHdpdGhvdXQgY3JlYXRpbmcgYSBidW5jaCBvZiBpbnRlcm1lZGlhcnkgT2JzZXJ2YWJsZVxuLy8gd3JhcHBlciBvYmplY3RzLlxuLy9cbi8vIEV2ZW4gdGhvdWdoIGFueSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGNhbiBzdWJzY3JpYmUgdG8gdGhlIENvbmNhc3QsIGVhY2hcbi8vIHNvdXJjZSBvYnNlcnZhYmxlIGlzIGd1YXJhbnRlZWQgdG8gcmVjZWl2ZSBhdCBtb3N0IG9uZSBzdWJzY3JpYmUgY2FsbCxcbi8vIGFuZCB0aGUgcmVzdWx0cyBhcmUgbXVsdGljYXN0IHRvIGFsbCBvYnNlcnZlcnMuXG4vL1xuLy8gSW4gYWRkaXRpb24gdG8gYnJvYWRjYXN0aW5nIGV2ZXJ5IG5leHQvZXJyb3IgbWVzc2FnZSB0byB0aGlzLm9ic2VydmVycyxcbi8vIHRoZSBDb25jYXN0IHN0b3JlcyB0aGUgbW9zdCByZWNlbnQgbWVzc2FnZSB1c2luZyB0aGlzLmxhdGVzdCwgc28gYW55XG4vLyBuZXcgb2JzZXJ2ZXJzIGNhbiBpbW1lZGlhdGVseSByZWNlaXZlIHRoZSBsYXRlc3QgbWVzc2FnZSwgZXZlbiBpZiBpdFxuLy8gd2FzIG9yaWdpbmFsbHkgZGVsaXZlcmVkIGluIHRoZSBwYXN0LiBUaGlzIGJlaGF2aW9yIG1lYW5zIHdlIGNhbiBhc3N1bWVcbi8vIGV2ZXJ5IGFjdGl2ZSBvYnNlcnZlciBpbiB0aGlzLm9ic2VydmVycyBoYXMgcmVjZWl2ZWQgdGhlIHNhbWUgbW9zdFxuLy8gcmVjZW50IG1lc3NhZ2UuXG4vL1xuLy8gV2l0aCB0aGUgZXhjZXB0aW9uIG9mIHRoaXMubGF0ZXN0IHJlcGxheSwgYSBDb25jYXN0IGlzIGEgXCJob3RcIlxuLy8gb2JzZXJ2YWJsZSBpbiB0aGUgc2Vuc2UgdGhhdCBpdCBkb2VzIG5vdCByZXBsYXkgcGFzdCByZXN1bHRzIGZyb20gdGhlXG4vLyBiZWdpbm5pbmcgb2YgdGltZSBmb3IgZWFjaCBuZXcgb2JzZXJ2ZXIuXG4vL1xuLy8gQ291bGQgd2UgaGF2ZSB1c2VkIHNvbWUgZXhpc3RpbmcgUnhKUyBjbGFzcyBpbnN0ZWFkPyBDb25jYXN0PFQ+IGlzXG4vLyBzaW1pbGFyIHRvIGEgQmVoYXZpb3JTdWJqZWN0PFQ+LCBiZWNhdXNlIGl0IGlzIG11bHRpY2FzdCBhbmQgcmVkZWxpdmVyc1xuLy8gdGhlIGxhdGVzdCBuZXh0L2Vycm9yIG1lc3NhZ2UgdG8gbmV3IHN1YnNjcmliZXJzLiBVbmxpa2UgU3ViamVjdDxUPixcbi8vIENvbmNhc3Q8VD4gZG9lcyBub3QgZXhwb3NlIGFuIE9ic2VydmVyPFQ+IGludGVyZmFjZSAodGhpcy5oYW5kbGVycyBpc1xuLy8gaW50ZW50aW9uYWxseSBwcml2YXRlKSwgc2luY2UgQ29uY2FzdDxUPiBnZXRzIGl0cyBpbnB1dHMgZnJvbSB0aGVcbi8vIGNvbmNhdGVuYXRlZCBzb3VyY2VzLiBJZiB3ZSBldmVyIHN3aXRjaCB0byBSeEpTLCB0aGVyZSBtYXkgYmUgc29tZVxuLy8gdmFsdWUgaW4gcmV1c2luZyB0aGVpciBjb2RlLCBidXQgZm9yIG5vdyB3ZSB1c2UgemVuLW9ic2VydmFibGUsIHdoaWNoXG4vLyBkb2VzIG5vdCBjb250YWluIGFueSBTdWJqZWN0IGltcGxlbWVudGF0aW9ucy5cbnZhciBDb25jYXN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb25jYXN0LCBfc3VwZXIpO1xuICAgIC8vIE5vdCBvbmx5IGNhbiB0aGUgaW5kaXZpZHVhbCBlbGVtZW50cyBvZiB0aGUgaXRlcmFibGUgYmUgcHJvbWlzZXMsIGJ1dFxuICAgIC8vIGFsc28gdGhlIGl0ZXJhYmxlIGl0c2VsZiBjYW4gYmUgd3JhcHBlZCBpbiBhIHByb21pc2UuXG4gICAgZnVuY3Rpb24gQ29uY2FzdChzb3VyY2VzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgICAgX3RoaXMuYWRkT2JzZXJ2ZXIob2JzZXJ2ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnJlbW92ZU9ic2VydmVyKG9ic2VydmVyKTsgfTtcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLy8gQWN0aXZlIG9ic2VydmVycyByZWNlaXZpbmcgYnJvYWRjYXN0IG1lc3NhZ2VzLiBUaGFua3MgdG8gdGhpcy5sYXRlc3QsXG4gICAgICAgIC8vIHdlIGNhbiBhc3N1bWUgYWxsIG9ic2VydmVycyBpbiB0aGlzIFNldCBoYXZlIHJlY2VpdmVkIHRoZSBzYW1lIG1vc3RcbiAgICAgICAgLy8gcmVjZW50IG1lc3NhZ2UsIHRob3VnaCBwb3NzaWJseSBhdCBkaWZmZXJlbnQgdGltZXMgaW4gdGhlIHBhc3QuXG4gICAgICAgIF90aGlzLm9ic2VydmVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgX3RoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIF90aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgX3RoaXMucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQm91bmQgaGFuZGxlciBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgcmV1c2VkIGZvciBldmVyeSBpbnRlcm5hbFxuICAgICAgICAvLyBzdWJzY3JpcHRpb24uXG4gICAgICAgIF90aGlzLmhhbmRsZXJzID0ge1xuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zdWIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubGF0ZXN0ID0gW1wibmV4dFwiLCByZXN1bHRdO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5ub3RpZnkoXCJuZXh0XCIsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkoX3RoaXMub2JzZXJ2ZXJzLCBcIm5leHRcIiwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHZhciBzdWIgPSBfdGhpcy5zdWI7XG4gICAgICAgICAgICAgICAgaWYgKHN1YiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWxheSB1bnN1YnNjcmliaW5nIGZyb20gdGhlIHVuZGVybHlpbmcgc3Vic2NyaXB0aW9uIHNsaWdodGx5LFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyB0aGF0IGltbWVkaWF0ZWx5IHN1YnNjcmliaW5nIGFub3RoZXIgb2JzZXJ2ZXIgY2FuIGtlZXAgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHN1YnNjcmlwdGlvbiBhY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1Yi51bnN1YnNjcmliZSgpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3ViID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubGF0ZXN0ID0gW1wiZXJyb3JcIiwgZXJyb3JdO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5ub3RpZnkoXCJlcnJvclwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkoX3RoaXMub2JzZXJ2ZXJzLCBcImVycm9yXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBfdGhpcywgc3ViID0gX2Euc3ViLCBfYiA9IF9hLnNvdXJjZXMsIHNvdXJjZXMgPSBfYiA9PT0gdm9pZCAwID8gW10gOiBfYjtcbiAgICAgICAgICAgICAgICBpZiAoc3ViICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGNvbXBsZXRlIGlzIGNhbGxlZCBiZWZvcmUgY29uY2FzdC5zdGFydCwgdGhpcy5zb3VyY2VzIG1heSBiZVxuICAgICAgICAgICAgICAgICAgICAvLyB1bmRlZmluZWQsIHNvIHdlIHVzZSBhIGRlZmF1bHQgdmFsdWUgb2YgW10gZm9yIHNvdXJjZXMuIFRoYXQgd29ya3NcbiAgICAgICAgICAgICAgICAgICAgLy8gaGVyZSBiZWNhdXNlIGl0IGZhbGxzIGludG8gdGhlIGlmICghdmFsdWUpIHsuLi59IGJsb2NrLCB3aGljaFxuICAgICAgICAgICAgICAgICAgICAvLyBhcHByb3ByaWF0ZWx5IHRlcm1pbmF0ZXMgdGhlIENvbmNhc3QsIGV2ZW4gaWYgdGhpcy5zb3VyY2VzIG1pZ2h0XG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50dWFsbHkgaGF2ZSBiZWVuIGluaXRpYWxpemVkIHRvIGEgbm9uLWVtcHR5IGFycmF5LlxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBzb3VyY2VzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBzdWIudW5zdWJzY3JpYmUoKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdWIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmxhdGVzdCAmJiBfdGhpcy5sYXRlc3RbMF0gPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVzb2x2ZShfdGhpcy5sYXRlc3RbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubm90aWZ5KFwiY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBub3Qgc3RvcmUgdGhpcy5sYXRlc3QgPSBbXCJjb21wbGV0ZVwiXSwgYmVjYXVzZSBkb2luZyBzb1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzY2FyZHMgdXNlZnVsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwcmV2aW91cyBuZXh0IChvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IpIG1lc3NhZ2UuIEluc3RlYWQsIGlmIG5ldyBvYnNlcnZlcnMgc3Vic2NyaWJlIGFmdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIENvbmNhc3QgaGFzIGNvbXBsZXRlZCwgdGhleSB3aWxsIHJlY2VpdmUgdGhlIGZpbmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAnbmV4dCcgbWVzc2FnZSAodW5sZXNzIHRoZXJlIHdhcyBhbiBlcnJvcikgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvbGxvd2VkIGJ5IGEgJ2NvbXBsZXRlJyBtZXNzYWdlIChzZWUgYWRkT2JzZXJ2ZXIpLlxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseShfdGhpcy5vYnNlcnZlcnMsIFwiY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNQcm9taXNlTGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4oZnVuY3Rpb24gKG9icykgeyByZXR1cm4gKF90aGlzLnN1YiA9IG9icy5zdWJzY3JpYmUoX3RoaXMuaGFuZGxlcnMpKTsgfSwgX3RoaXMuaGFuZGxlcnMuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3ViID0gdmFsdWUuc3Vic2NyaWJlKF90aGlzLmhhbmRsZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLm5leHRSZXN1bHRMaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIC8vIEEgcHVibGljIHdheSB0byBhYm9ydCBvYnNlcnZhdGlvbiBhbmQgYnJvYWRjYXN0LlxuICAgICAgICBfdGhpcy5jYW5jZWwgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICBfdGhpcy5yZWplY3QocmVhc29uKTtcbiAgICAgICAgICAgIF90aGlzLnNvdXJjZXMgPSBbXTtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZXJzLmVycm9yKHJlYXNvbik7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFN1cHByZXNzIHJlamVjdGlvbiB3YXJuaW5ncyBmb3IgdGhpcy5wcm9taXNlLCBzaW5jZSBpdCdzIHBlcmZlY3RseVxuICAgICAgICAvLyBhY2NlcHRhYmxlIHRvIHBheSBubyBhdHRlbnRpb24gdG8gdGhpcy5wcm9taXNlIGlmIHlvdSdyZSBjb25zdW1pbmdcbiAgICAgICAgLy8gdGhlIHJlc3VsdHMgdGhyb3VnaCB0aGUgbm9ybWFsIG9ic2VydmFibGUgQVBJLlxuICAgICAgICBfdGhpcy5wcm9taXNlLmNhdGNoKGZ1bmN0aW9uIChfKSB7IH0pO1xuICAgICAgICAvLyBJZiBzb21lb25lIGFjY2lkZW50YWxseSB0cmllcyB0byBjcmVhdGUgYSBDb25jYXN0IHVzaW5nIGEgc3Vic2NyaWJlclxuICAgICAgICAvLyBmdW5jdGlvbiwgcmVjb3ZlciBieSBjcmVhdGluZyBhbiBPYnNlcnZhYmxlIGZyb20gdGhhdCBzdWJzY3JpYmVyIGFuZFxuICAgICAgICAvLyB1c2luZyBpdCBhcyB0aGUgc291cmNlLlxuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZXMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgc291cmNlcyA9IFtuZXcgT2JzZXJ2YWJsZShzb3VyY2VzKV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJvbWlzZUxpa2Uoc291cmNlcykpIHtcbiAgICAgICAgICAgIHNvdXJjZXMudGhlbihmdW5jdGlvbiAoaXRlcmFibGUpIHsgcmV0dXJuIF90aGlzLnN0YXJ0KGl0ZXJhYmxlKTsgfSwgX3RoaXMuaGFuZGxlcnMuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuc3RhcnQoc291cmNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBDb25jYXN0LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIChzb3VyY2VzKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YiAhPT0gdm9pZCAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyBJbiBwcmFjdGljZSwgc291cmNlcyBpcyBtb3N0IG9mdGVuIHNpbXBseSBhbiBBcnJheSBvZiBvYnNlcnZhYmxlcy5cbiAgICAgICAgLy8gVE9ETyBDb25zaWRlciB1c2luZyBzb3VyY2VzW1N5bWJvbC5pdGVyYXRvcl0oKSB0byB0YWtlIGFkdmFudGFnZVxuICAgICAgICAvLyBvZiB0aGUgbGF6aW5lc3Mgb2Ygbm9uLUFycmF5IGl0ZXJhYmxlcy5cbiAgICAgICAgdGhpcy5zb3VyY2VzID0gQXJyYXkuZnJvbShzb3VyY2VzKTtcbiAgICAgICAgLy8gQ2FsbGluZyB0aGlzLmhhbmRsZXJzLmNvbXBsZXRlKCkga2lja3Mgb2ZmIGNvbnN1bXB0aW9uIG9mIHRoZSBmaXJzdFxuICAgICAgICAvLyBzb3VyY2Ugb2JzZXJ2YWJsZS4gSXQncyB0ZW1wdGluZyB0byBkbyB0aGlzIHN0ZXAgbGF6aWx5IGluXG4gICAgICAgIC8vIGFkZE9ic2VydmVyLCBidXQgdGhpcy5wcm9taXNlIGNhbiBiZSBhY2Nlc3NlZCB3aXRob3V0IGNhbGxpbmdcbiAgICAgICAgLy8gYWRkT2JzZXJ2ZXIsIHNvIGNvbnN1bXB0aW9uIG5lZWRzIHRvIGJlZ2luIGVhZ2VybHkuXG4gICAgICAgIHRoaXMuaGFuZGxlcnMuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIENvbmNhc3QucHJvdG90eXBlLmRlbGl2ZXJMYXN0TWVzc2FnZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICBpZiAodGhpcy5sYXRlc3QpIHtcbiAgICAgICAgICAgIHZhciBuZXh0T3JFcnJvciA9IHRoaXMubGF0ZXN0WzBdO1xuICAgICAgICAgICAgdmFyIG1ldGhvZCA9IG9ic2VydmVyW25leHRPckVycm9yXTtcbiAgICAgICAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgICAgICAgICBtZXRob2QuY2FsbChvYnNlcnZlciwgdGhpcy5sYXRlc3RbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIHN1YnNjcmlwdGlvbiBpcyBhbHJlYWR5IGNsb3NlZCwgYW5kIHRoZSBsYXN0IG1lc3NhZ2Ugd2FzXG4gICAgICAgICAgICAvLyBhICduZXh0JyBtZXNzYWdlLCBzaW11bGF0ZSBkZWxpdmVyeSBvZiB0aGUgZmluYWwgJ2NvbXBsZXRlJ1xuICAgICAgICAgICAgLy8gbWVzc2FnZSBhZ2Fpbi5cbiAgICAgICAgICAgIGlmICh0aGlzLnN1YiA9PT0gbnVsbCAmJiBuZXh0T3JFcnJvciA9PT0gXCJuZXh0XCIgJiYgb2JzZXJ2ZXIuY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDb25jYXN0LnByb3RvdHlwZS5hZGRPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzLmhhcyhvYnNlcnZlcikpIHtcbiAgICAgICAgICAgIC8vIEltbWVkaWF0ZWx5IGRlbGl2ZXIgdGhlIG1vc3QgcmVjZW50IG1lc3NhZ2UsIHNvIHdlIGNhbiBhbHdheXNcbiAgICAgICAgICAgIC8vIGJlIHN1cmUgYWxsIG9ic2VydmVycyBoYXZlIHRoZSBsYXRlc3QgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICB0aGlzLmRlbGl2ZXJMYXN0TWVzc2FnZShvYnNlcnZlcik7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycy5hZGQob2JzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb25jYXN0LnByb3RvdHlwZS5yZW1vdmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMuZGVsZXRlKG9ic2VydmVyKSAmJiB0aGlzLm9ic2VydmVycy5zaXplIDwgMSkge1xuICAgICAgICAgICAgLy8gSW4gY2FzZSB0aGVyZSBhcmUgc3RpbGwgYW55IGxpc3RlbmVycyBpbiB0aGlzLm5leHRSZXN1bHRMaXN0ZW5lcnMsIGFuZFxuICAgICAgICAgICAgLy8gbm8gZXJyb3Igb3IgY29tcGxldGlvbiBoYXMgYmVlbiBicm9hZGNhc3QgeWV0LCBtYWtlIHN1cmUgdGhvc2VcbiAgICAgICAgICAgIC8vIG9ic2VydmVycyBoYXZlIGEgY2hhbmNlIHRvIHJ1biBhbmQgdGhlbiByZW1vdmUgdGhlbXNlbHZlcyBmcm9tXG4gICAgICAgICAgICAvLyB0aGlzLm9ic2VydmVycy5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29uY2FzdC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKG1ldGhvZCwgYXJnKSB7XG4gICAgICAgIHZhciBuZXh0UmVzdWx0TGlzdGVuZXJzID0gdGhpcy5uZXh0UmVzdWx0TGlzdGVuZXJzO1xuICAgICAgICBpZiAobmV4dFJlc3VsdExpc3RlbmVycy5zaXplKSB7XG4gICAgICAgICAgICAvLyBSZXBsYWNpbmcgdGhpcy5uZXh0UmVzdWx0TGlzdGVuZXJzIGZpcnN0IGVuc3VyZXMgaXQgZG9lcyBub3QgZ3JvdyB3aGlsZVxuICAgICAgICAgICAgLy8gd2UgYXJlIGl0ZXJhdGluZyBvdmVyIGl0LCBwb3RlbnRpYWxseSBsZWFkaW5nIHRvIGluZmluaXRlIGxvb3BzLlxuICAgICAgICAgICAgdGhpcy5uZXh0UmVzdWx0TGlzdGVuZXJzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgbmV4dFJlc3VsdExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gbGlzdGVuZXIobWV0aG9kLCBhcmcpOyB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gV2UgbmVlZCBhIHdheSB0byBydW4gY2FsbGJhY2tzIGp1c3QgKmJlZm9yZSogdGhlIG5leHQgcmVzdWx0IChvciBlcnJvciBvclxuICAgIC8vIGNvbXBsZXRpb24pIGlzIGRlbGl2ZXJlZCBieSB0aGlzIENvbmNhc3QsIHNvIHdlIGNhbiBiZSBzdXJlIGFueSBjb2RlIHRoYXRcbiAgICAvLyBydW5zIGFzIGEgcmVzdWx0IG9mIGRlbGl2ZXJpbmcgdGhhdCByZXN1bHQvZXJyb3Igb2JzZXJ2ZXMgdGhlIGVmZmVjdHMgb2ZcbiAgICAvLyBydW5uaW5nIHRoZSBjYWxsYmFjayhzKS4gSXQgd2FzIHRlbXB0aW5nIHRvIHJldXNlIHRoZSBPYnNlcnZlciB0eXBlIGluc3RlYWRcbiAgICAvLyBvZiBpbnRyb2R1Y2luZyBOZXh0UmVzdWx0TGlzdGVuZXIsIGJ1dCB0aGF0IG1lc3NlcyB3aXRoIHRoZSBzaXppbmcgYW5kXG4gICAgLy8gbWFpbnRlbmFuY2Ugb2YgdGhpcy5vYnNlcnZlcnMsIGFuZCBlbmRzIHVwIGJlaW5nIG1vcmUgY29kZSBvdmVyYWxsLlxuICAgIENvbmNhc3QucHJvdG90eXBlLmJlZm9yZU5leHQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5leHRSZXN1bHRMaXN0ZW5lcnMuYWRkKGZ1bmN0aW9uIChtZXRob2QsIGFyZykge1xuICAgICAgICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG1ldGhvZCwgYXJnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29uY2FzdDtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IHsgQ29uY2FzdCB9O1xuLy8gTmVjZXNzYXJ5IGJlY2F1c2UgdGhlIENvbmNhc3QgY29uc3RydWN0b3IgaGFzIGEgZGlmZmVyZW50IHNpZ25hdHVyZVxuLy8gdGhhbiB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3Rvci5cbmZpeE9ic2VydmFibGVTdWJjbGFzcyhDb25jYXN0KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbmNhc3QuanMubWFwIiwKICAgICJpbXBvcnQgeyBpc05vbk51bGxPYmplY3QgfSBmcm9tIFwiLi9vYmplY3RzLmpzXCI7XG5pbXBvcnQgeyBpc05vbkVtcHR5QXJyYXkgfSBmcm9tIFwiLi9hcnJheXMuanNcIjtcbmltcG9ydCB7IERlZXBNZXJnZXIgfSBmcm9tIFwiLi9tZXJnZURlZXAuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBpc0V4ZWN1dGlvblBhdGNoSW5jcmVtZW50YWxSZXN1bHQodmFsdWUpIHtcbiAgICByZXR1cm4gXCJpbmNyZW1lbnRhbFwiIGluIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRXhlY3V0aW9uUGF0Y2hJbml0aWFsUmVzdWx0KHZhbHVlKSB7XG4gICAgcmV0dXJuIFwiaGFzTmV4dFwiIGluIHZhbHVlICYmIFwiZGF0YVwiIGluIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRXhlY3V0aW9uUGF0Y2hSZXN1bHQodmFsdWUpIHtcbiAgICByZXR1cm4gKGlzRXhlY3V0aW9uUGF0Y2hJbmNyZW1lbnRhbFJlc3VsdCh2YWx1ZSkgfHxcbiAgICAgICAgaXNFeGVjdXRpb25QYXRjaEluaXRpYWxSZXN1bHQodmFsdWUpKTtcbn1cbi8vIFRoaXMgZnVuY3Rpb24gZGV0ZWN0cyBhbiBBcG9sbG8gcGF5bG9hZCByZXN1bHQgYmVmb3JlIGl0IGlzIHRyYW5zZm9ybWVkXG4vLyBpbnRvIGEgRmV0Y2hSZXN1bHQgdmlhIEh0dHBMaW5rOyBpdCBjYW5ub3QgZGV0ZWN0IGFuIEFwb2xsb1BheWxvYWRSZXN1bHRcbi8vIG9uY2UgaXQgbGVhdmVzIHRoZSBsaW5rIGNoYWluLlxuZXhwb3J0IGZ1bmN0aW9uIGlzQXBvbGxvUGF5bG9hZFJlc3VsdCh2YWx1ZSkge1xuICAgIHJldHVybiBpc05vbk51bGxPYmplY3QodmFsdWUpICYmIFwicGF5bG9hZFwiIGluIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlSW5jcmVtZW50YWxEYXRhKHByZXZSZXN1bHQsIHJlc3VsdCkge1xuICAgIHZhciBtZXJnZWREYXRhID0gcHJldlJlc3VsdDtcbiAgICB2YXIgbWVyZ2VyID0gbmV3IERlZXBNZXJnZXIoKTtcbiAgICBpZiAoaXNFeGVjdXRpb25QYXRjaEluY3JlbWVudGFsUmVzdWx0KHJlc3VsdCkgJiZcbiAgICAgICAgaXNOb25FbXB0eUFycmF5KHJlc3VsdC5pbmNyZW1lbnRhbCkpIHtcbiAgICAgICAgcmVzdWx0LmluY3JlbWVudGFsLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IF9hLmRhdGEsIHBhdGggPSBfYS5wYXRoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHBhdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gcGF0aFtpXTtcbiAgICAgICAgICAgICAgICB2YXIgaXNOdW1lcmljS2V5ID0gIWlzTmFOKCtrZXkpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRfMSA9IGlzTnVtZXJpY0tleSA/IFtdIDoge307XG4gICAgICAgICAgICAgICAgcGFyZW50XzFba2V5XSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHBhcmVudF8xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVyZ2VkRGF0YSA9IG1lcmdlci5tZXJnZShtZXJnZWREYXRhLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWREYXRhO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5jcmVtZW50YWxSZXN1bHQuanMubWFwIiwKICAgICJpbXBvcnQgeyBpc05vbkVtcHR5QXJyYXkgfSBmcm9tIFwiLi9hcnJheXMuanNcIjtcbmltcG9ydCB7IGlzRXhlY3V0aW9uUGF0Y2hJbmNyZW1lbnRhbFJlc3VsdCB9IGZyb20gXCIuL2luY3JlbWVudGFsUmVzdWx0LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gZ3JhcGhRTFJlc3VsdEhhc0Vycm9yKHJlc3VsdCkge1xuICAgIHZhciBlcnJvcnMgPSBnZXRHcmFwaFFMRXJyb3JzRnJvbVJlc3VsdChyZXN1bHQpO1xuICAgIHJldHVybiBpc05vbkVtcHR5QXJyYXkoZXJyb3JzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRHcmFwaFFMRXJyb3JzRnJvbVJlc3VsdChyZXN1bHQpIHtcbiAgICB2YXIgZ3JhcGhRTEVycm9ycyA9IGlzTm9uRW1wdHlBcnJheShyZXN1bHQuZXJyb3JzKSA/IHJlc3VsdC5lcnJvcnMuc2xpY2UoMCkgOiBbXTtcbiAgICBpZiAoaXNFeGVjdXRpb25QYXRjaEluY3JlbWVudGFsUmVzdWx0KHJlc3VsdCkgJiZcbiAgICAgICAgaXNOb25FbXB0eUFycmF5KHJlc3VsdC5pbmNyZW1lbnRhbCkpIHtcbiAgICAgICAgcmVzdWx0LmluY3JlbWVudGFsLmZvckVhY2goZnVuY3Rpb24gKGluY3JlbWVudGFsUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoaW5jcmVtZW50YWxSZXN1bHQuZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgZ3JhcGhRTEVycm9ycy5wdXNoLmFwcGx5KGdyYXBoUUxFcnJvcnMsIGluY3JlbWVudGFsUmVzdWx0LmVycm9ycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZ3JhcGhRTEVycm9ycztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ySGFuZGxpbmcuanMubWFwIiwKICAgICIvKipcbiAqIE1lcmdlcyB0aGUgcHJvdmlkZWQgb2JqZWN0cyBzaGFsbG93bHkgYW5kIHJlbW92ZXNcbiAqIGFsbCBwcm9wZXJ0aWVzIHdpdGggYW4gYHVuZGVmaW5lZGAgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhY3QoKSB7XG4gICAgdmFyIG9iamVjdHMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYmplY3RzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIG9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmICghb2JqKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wYWN0LmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGNvbXBhY3QgfSBmcm9tIFwiLi9jb21wYWN0LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VPcHRpb25zKGRlZmF1bHRzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGNvbXBhY3QoZGVmYXVsdHMsIG9wdGlvbnMsIG9wdGlvbnMudmFyaWFibGVzICYmIHtcbiAgICAgICAgdmFyaWFibGVzOiBjb21wYWN0KF9fYXNzaWduKF9fYXNzaWduKHt9LCAoZGVmYXVsdHMgJiYgZGVmYXVsdHMudmFyaWFibGVzKSksIG9wdGlvbnMudmFyaWFibGVzKSksXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU9wdGlvbnMuanMubWFwIiwKICAgICJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBgZnJvbUVycm9yYCB3aWxsIGJlIHJlbW92ZWQgaW4gQXBvbGxvIENsaWVudCA0LjAuIFRoaXMgaXMgc2FmZVxuICogdG8gdXNlIGluIDMueC5cbiAqXG4gKiAqKlJlY29tbWVuZGVkIG5vdyoqXG4gKlxuICogTm8gYWN0aW9uIG5lZWRlZFxuICpcbiAqICoqV2hlbiB1cGdyYWRpbmcqKlxuICpcbiAqIFVzZSBSeEpTJ3MgW2B0aHJvd0Vycm9yYF0oaHR0cHM6Ly9yeGpzLmRldi9hcGkvaW5kZXgvZnVuY3Rpb24vdGhyb3dFcnJvcikgZnVuY3Rpb24uXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IG9ic2VydmFibGUgPSB0aHJvd0Vycm9yKCgpID0+IG5ldyBFcnJvciguLi4pKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUVycm9yKGVycm9yVmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yVmFsdWUpO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUVycm9yLmpzLm1hcCIsCiAgICAiLyoqXG4gKiBAZGVwcmVjYXRlZCBgdGhyb3dTZXJ2ZXJFcnJvcmAgd2lsbCBiZSByZW1vdmVkIGluIEFwb2xsbyBDbGllbnQgNC4wLiBUaGlzIGlzXG4gKiBzYWZlIHRvIHVzZSBpbiBBcG9sbG8gQ2xpZW50IDMueC5cbiAqXG4gKiAqKlJlY29tbWVuZGVkIG5vdyoqXG4gKlxuICogTm8gYWN0aW9uIG5lZWRlZFxuICpcbiAqICoqV2hlbiBtaWdyYXRpbmcqKlxuICpcbiAqIGBTZXJ2ZXJFcnJvcmAgaXMgYSBzdWJjbGFzcyBvZiBgRXJyb3JgLiBUbyB0aHJvdyBhIHNlcnZlciBlcnJvciwgdXNlXG4gKiBgdGhyb3cgbmV3IFNlcnZlckVycm9yKC4uLilgIGluc3RlYWQuXG4gKlxuICogYGBgdHNcbiAqIHRocm93IG5ldyBTZXJ2ZXJFcnJvcihcImVycm9yIG1lc3NhZ2VcIiwgeyByZXNwb25zZSwgcmVzdWx0IH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCB2YXIgdGhyb3dTZXJ2ZXJFcnJvciA9IGZ1bmN0aW9uIChyZXNwb25zZSwgcmVzdWx0LCBtZXNzYWdlKSB7XG4gICAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIGVycm9yLm5hbWUgPSBcIlNlcnZlckVycm9yXCI7XG4gICAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICBlcnJvci5zdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgIGVycm9yLnJlc3VsdCA9IHJlc3VsdDtcbiAgICB0aHJvdyBlcnJvcjtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJvd1NlcnZlckVycm9yLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgbmV3SW52YXJpYW50RXJyb3IgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU9wZXJhdGlvbihvcGVyYXRpb24pIHtcbiAgICB2YXIgT1BFUkFUSU9OX0ZJRUxEUyA9IFtcbiAgICAgICAgXCJxdWVyeVwiLFxuICAgICAgICBcIm9wZXJhdGlvbk5hbWVcIixcbiAgICAgICAgXCJ2YXJpYWJsZXNcIixcbiAgICAgICAgXCJleHRlbnNpb25zXCIsXG4gICAgICAgIFwiY29udGV4dFwiLFxuICAgIF07XG4gICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKG9wZXJhdGlvbik7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgIGlmIChPUEVSQVRJT05fRklFTERTLmluZGV4T2Yoa2V5KSA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ld0ludmFyaWFudEVycm9yKDU4LCBrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvcGVyYXRpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWxpZGF0ZU9wZXJhdGlvbi5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3BlcmF0aW9uKHN0YXJ0aW5nLCBvcGVyYXRpb24pIHtcbiAgICB2YXIgY29udGV4dCA9IF9fYXNzaWduKHt9LCBzdGFydGluZyk7XG4gICAgdmFyIHNldENvbnRleHQgPSBmdW5jdGlvbiAobmV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIG5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY29udGV4dCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb250ZXh0KSwgbmV4dChjb250ZXh0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbnRleHQpLCBuZXh0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIGdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoX19hc3NpZ24oe30sIGNvbnRleHQpKTsgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3BlcmF0aW9uLCBcInNldENvbnRleHRcIiwge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IHNldENvbnRleHQsXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wZXJhdGlvbiwgXCJnZXRDb250ZXh0XCIsIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBnZXRDb250ZXh0LFxuICAgIH0pO1xuICAgIHJldHVybiBvcGVyYXRpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVPcGVyYXRpb24uanMubWFwIiwKICAgICJpbXBvcnQgeyBnZXRPcGVyYXRpb25OYW1lIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU9wZXJhdGlvbihvcGVyYXRpb24pIHtcbiAgICB2YXIgdHJhbnNmb3JtZWRPcGVyYXRpb24gPSB7XG4gICAgICAgIHZhcmlhYmxlczogb3BlcmF0aW9uLnZhcmlhYmxlcyB8fCB7fSxcbiAgICAgICAgZXh0ZW5zaW9uczogb3BlcmF0aW9uLmV4dGVuc2lvbnMgfHwge30sXG4gICAgICAgIG9wZXJhdGlvbk5hbWU6IG9wZXJhdGlvbi5vcGVyYXRpb25OYW1lLFxuICAgICAgICBxdWVyeTogb3BlcmF0aW9uLnF1ZXJ5LFxuICAgIH07XG4gICAgLy8gQmVzdCBndWVzcyBhdCBhbiBvcGVyYXRpb24gbmFtZVxuICAgIGlmICghdHJhbnNmb3JtZWRPcGVyYXRpb24ub3BlcmF0aW9uTmFtZSkge1xuICAgICAgICB0cmFuc2Zvcm1lZE9wZXJhdGlvbi5vcGVyYXRpb25OYW1lID1cbiAgICAgICAgICAgIHR5cGVvZiB0cmFuc2Zvcm1lZE9wZXJhdGlvbi5xdWVyeSAhPT0gXCJzdHJpbmdcIiA/XG4gICAgICAgICAgICAgICAgZ2V0T3BlcmF0aW9uTmFtZSh0cmFuc2Zvcm1lZE9wZXJhdGlvbi5xdWVyeSkgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtZWRPcGVyYXRpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm1PcGVyYXRpb24uanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgdmlzaXQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlck9wZXJhdGlvblZhcmlhYmxlcyh2YXJpYWJsZXMsIHF1ZXJ5KSB7XG4gICAgdmFyIHJlc3VsdCA9IF9fYXNzaWduKHt9LCB2YXJpYWJsZXMpO1xuICAgIHZhciB1bnVzZWROYW1lcyA9IG5ldyBTZXQoT2JqZWN0LmtleXModmFyaWFibGVzKSk7XG4gICAgdmlzaXQocXVlcnksIHtcbiAgICAgICAgVmFyaWFibGU6IGZ1bmN0aW9uIChub2RlLCBfa2V5LCBwYXJlbnQpIHtcbiAgICAgICAgICAgIC8vIEEgdmFyaWFibGUgdHlwZSBkZWZpbml0aW9uIGF0IHRoZSB0b3AgbGV2ZWwgb2YgYSBxdWVyeSBpcyBub3RcbiAgICAgICAgICAgIC8vIGVub3VnaCB0byBzaWxlbmNlIHNlcnZlci1zaWRlIGVycm9ycyBhYm91dCB0aGUgdmFyaWFibGUgYmVpbmdcbiAgICAgICAgICAgIC8vIHVudXNlZCwgc28gdmFyaWFibGUgZGVmaW5pdGlvbnMgZG8gbm90IGNvdW50IGFzIHVzYWdlLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9zcGVjLmdyYXBocWwub3JnL2RyYWZ0LyNzZWMtQWxsLVZhcmlhYmxlcy1Vc2VkXG4gICAgICAgICAgICBpZiAocGFyZW50ICYmXG4gICAgICAgICAgICAgICAgcGFyZW50LmtpbmQgIT09IFwiVmFyaWFibGVEZWZpbml0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB1bnVzZWROYW1lcy5kZWxldGUobm9kZS5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICB1bnVzZWROYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGRlbGV0ZSByZXN1bHRbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbHRlck9wZXJhdGlvblZhcmlhYmxlcy5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFNsb3QgfSBmcm9tIFwib3B0aW1pc21cIjtcbmltcG9ydCB7IGludmFyaWFudCwgZ2xvYmFsIGFzIHVudHlwZWRHbG9iYWwgfSBmcm9tIFwiLi4vZ2xvYmFscy9pbmRleC5qc1wiO1xudmFyIG11dGVBbGxEZXByZWNhdGlvbnMgPSBTeW1ib2wuZm9yKFwiYXBvbGxvLmRlcHJlY2F0aW9uc1wiKTtcbnZhciBnbG9iYWwgPSB1bnR5cGVkR2xvYmFsO1xudmFyIHNsb3QgPSBuZXcgU2xvdCgpO1xuZnVuY3Rpb24gaXNNdXRlZChuYW1lKSB7XG4gICAgcmV0dXJuIGdsb2JhbFttdXRlQWxsRGVwcmVjYXRpb25zXSB8fCAoc2xvdC5nZXRWYWx1ZSgpIHx8IFtdKS5pbmNsdWRlcyhuYW1lKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtdXRlRGVwcmVjYXRpb25zKG5hbWUpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBzbG90LndpdGhWYWx1ZS5hcHBseShzbG90LCBfX3NwcmVhZEFycmF5KFtBcnJheS5pc0FycmF5KG5hbWUpID8gbmFtZSA6IFtuYW1lXV0sIGFyZ3MsIGZhbHNlKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gd2FyblJlbW92ZWRPcHRpb24ob3B0aW9ucywgbmFtZSwgY2FsbFNpdGUsIHJlY29tbWVuZGF0aW9uKSB7XG4gICAgaWYgKHJlY29tbWVuZGF0aW9uID09PSB2b2lkIDApIHsgcmVjb21tZW5kYXRpb24gPSBcIlBsZWFzZSByZW1vdmUgdGhpcyBvcHRpb24uXCI7IH1cbiAgICB3YXJuRGVwcmVjYXRlZChuYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChuYW1lIGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oMTA0LCBjYWxsU2l0ZSwgbmFtZSwgcmVjb21tZW5kYXRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gd2FybkRlcHJlY2F0ZWQobmFtZSwgY2IpIHtcbiAgICBpZiAoIWlzTXV0ZWQobmFtZSkpIHtcbiAgICAgICAgY2IoKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gd2l0aERpc2FibGVkRGVwcmVjYXRpb25zKCkge1xuICAgIHZhciBfYTtcbiAgICB2YXIgcHJldiA9IGdsb2JhbFttdXRlQWxsRGVwcmVjYXRpb25zXTtcbiAgICBnbG9iYWxbbXV0ZUFsbERlcHJlY2F0aW9uc10gPSB0cnVlO1xuICAgIHJldHVybiBfYSA9IHt9LFxuICAgICAgICBfYVtTeW1ib2wuZGlzcG9zZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBnbG9iYWxbbXV0ZUFsbERlcHJlY2F0aW9uc10gPSBwcmV2O1xuICAgICAgICB9LFxuICAgICAgICBfYTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgbmV3SW52YXJpYW50RXJyb3IsIGludmFyaWFudCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlT3BlcmF0aW9uLCBjcmVhdGVPcGVyYXRpb24sIHRyYW5zZm9ybU9wZXJhdGlvbiwgfSBmcm9tIFwiLi4vdXRpbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IHdhcm5EZXByZWNhdGVkIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9kZXByZWNhdGlvbi9pbmRleC5qc1wiO1xuZnVuY3Rpb24gcGFzc3Rocm91Z2gob3AsIGZvcndhcmQpIHtcbiAgICByZXR1cm4gKGZvcndhcmQgPyBmb3J3YXJkKG9wKSA6IE9ic2VydmFibGUub2YoKSk7XG59XG5mdW5jdGlvbiB0b0xpbmsoaGFuZGxlcikge1xuICAgIHJldHVybiB0eXBlb2YgaGFuZGxlciA9PT0gXCJmdW5jdGlvblwiID8gbmV3IEFwb2xsb0xpbmsoaGFuZGxlcikgOiBoYW5kbGVyO1xufVxuZnVuY3Rpb24gaXNUZXJtaW5hdGluZyhsaW5rKSB7XG4gICAgcmV0dXJuIGxpbmsucmVxdWVzdC5sZW5ndGggPD0gMTtcbn1cbnZhciBBcG9sbG9MaW5rID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFwb2xsb0xpbmsocmVxdWVzdCkge1xuICAgICAgICBpZiAocmVxdWVzdClcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgfVxuICAgIEFwb2xsb0xpbmsuZW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXBvbGxvTGluayhmdW5jdGlvbiAoKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKCk7IH0pO1xuICAgIH07XG4gICAgQXBvbGxvTGluay5mcm9tID0gZnVuY3Rpb24gKGxpbmtzKSB7XG4gICAgICAgIGlmIChsaW5rcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gQXBvbGxvTGluay5lbXB0eSgpO1xuICAgICAgICByZXR1cm4gbGlua3MubWFwKHRvTGluaykucmVkdWNlKGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4LmNvbmNhdCh5KTsgfSk7XG4gICAgfTtcbiAgICBBcG9sbG9MaW5rLnNwbGl0ID0gZnVuY3Rpb24gKHRlc3QsIGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHZhciBsZWZ0TGluayA9IHRvTGluayhsZWZ0KTtcbiAgICAgICAgdmFyIHJpZ2h0TGluayA9IHRvTGluayhyaWdodCB8fCBuZXcgQXBvbGxvTGluayhwYXNzdGhyb3VnaCkpO1xuICAgICAgICB2YXIgcmV0O1xuICAgICAgICBpZiAoaXNUZXJtaW5hdGluZyhsZWZ0TGluaykgJiYgaXNUZXJtaW5hdGluZyhyaWdodExpbmspKSB7XG4gICAgICAgICAgICByZXQgPSBuZXcgQXBvbGxvTGluayhmdW5jdGlvbiAob3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRlc3Qob3BlcmF0aW9uKSA/XG4gICAgICAgICAgICAgICAgICAgIGxlZnRMaW5rLnJlcXVlc3Qob3BlcmF0aW9uKSB8fCBPYnNlcnZhYmxlLm9mKClcbiAgICAgICAgICAgICAgICAgICAgOiByaWdodExpbmsucmVxdWVzdChvcGVyYXRpb24pIHx8IE9ic2VydmFibGUub2YoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0ID0gbmV3IEFwb2xsb0xpbmsoZnVuY3Rpb24gKG9wZXJhdGlvbiwgZm9yd2FyZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0KG9wZXJhdGlvbikgP1xuICAgICAgICAgICAgICAgICAgICBsZWZ0TGluay5yZXF1ZXN0KG9wZXJhdGlvbiwgZm9yd2FyZCkgfHwgT2JzZXJ2YWJsZS5vZigpXG4gICAgICAgICAgICAgICAgICAgIDogcmlnaHRMaW5rLnJlcXVlc3Qob3BlcmF0aW9uLCBmb3J3YXJkKSB8fCBPYnNlcnZhYmxlLm9mKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihyZXQsIHsgbGVmdDogbGVmdExpbmssIHJpZ2h0OiByaWdodExpbmsgfSk7XG4gICAgfTtcbiAgICBBcG9sbG9MaW5rLmV4ZWN1dGUgPSBmdW5jdGlvbiAobGluaywgb3BlcmF0aW9uKSB7XG4gICAgICAgIHJldHVybiAobGluay5yZXF1ZXN0KGNyZWF0ZU9wZXJhdGlvbihvcGVyYXRpb24uY29udGV4dCwgdHJhbnNmb3JtT3BlcmF0aW9uKHZhbGlkYXRlT3BlcmF0aW9uKG9wZXJhdGlvbikpKSkgfHwgT2JzZXJ2YWJsZS5vZigpKTtcbiAgICB9O1xuICAgIEFwb2xsb0xpbmsuY29uY2F0ID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgdmFyIGZpcnN0TGluayA9IHRvTGluayhmaXJzdCk7XG4gICAgICAgIGlmIChpc1Rlcm1pbmF0aW5nKGZpcnN0TGluaykpIHtcbiAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oNDcsIGZpcnN0TGluayk7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3RMaW5rO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXh0TGluayA9IHRvTGluayhzZWNvbmQpO1xuICAgICAgICB2YXIgcmV0O1xuICAgICAgICBpZiAoaXNUZXJtaW5hdGluZyhuZXh0TGluaykpIHtcbiAgICAgICAgICAgIHJldCA9IG5ldyBBcG9sbG9MaW5rKGZ1bmN0aW9uIChvcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3RMaW5rLnJlcXVlc3Qob3BlcmF0aW9uLCBmdW5jdGlvbiAob3ApIHsgcmV0dXJuIG5leHRMaW5rLnJlcXVlc3Qob3ApIHx8IE9ic2VydmFibGUub2YoKTsgfSkgfHwgT2JzZXJ2YWJsZS5vZigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXQgPSBuZXcgQXBvbGxvTGluayhmdW5jdGlvbiAob3BlcmF0aW9uLCBmb3J3YXJkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChmaXJzdExpbmsucmVxdWVzdChvcGVyYXRpb24sIGZ1bmN0aW9uIChvcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dExpbmsucmVxdWVzdChvcCwgZm9yd2FyZCkgfHwgT2JzZXJ2YWJsZS5vZigpO1xuICAgICAgICAgICAgICAgIH0pIHx8IE9ic2VydmFibGUub2YoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihyZXQsIHsgbGVmdDogZmlyc3RMaW5rLCByaWdodDogbmV4dExpbmsgfSk7XG4gICAgfTtcbiAgICBBcG9sbG9MaW5rLnByb3RvdHlwZS5zcGxpdCA9IGZ1bmN0aW9uICh0ZXN0LCBsZWZ0LCByaWdodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25jYXQoQXBvbGxvTGluay5zcGxpdCh0ZXN0LCBsZWZ0LCByaWdodCB8fCBuZXcgQXBvbGxvTGluayhwYXNzdGhyb3VnaCkpKTtcbiAgICB9O1xuICAgIEFwb2xsb0xpbmsucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICAgIHJldHVybiBBcG9sbG9MaW5rLmNvbmNhdCh0aGlzLCBuZXh0KTtcbiAgICB9O1xuICAgIEFwb2xsb0xpbmsucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAob3BlcmF0aW9uLCBmb3J3YXJkKSB7XG4gICAgICAgIHRocm93IG5ld0ludmFyaWFudEVycm9yKDQ4KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIGBvbkVycm9yYCB3aWxsIGJlIHJlbW92ZWQgd2l0aCBBcG9sbG8gQ2xpZW50IDQuMC4gUGxlYXNlXG4gICAgICogZGlzY29udGludWUgdXNpbmcgdGhpcyBtZXRob2QuXG4gICAgICovXG4gICAgQXBvbGxvTGluay5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgb2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdhcm5EZXByZWNhdGVkKFwib25FcnJvclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2Fybig0OSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JzZXJ2ZXIgJiYgb2JzZXJ2ZXIuZXJyb3IpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIC8vIFJldHVybmluZyBmYWxzZSBpbmRpY2F0ZXMgdGhhdCBvYnNlcnZlci5lcnJvciBkb2VzIG5vdCBuZWVkIHRvIGJlXG4gICAgICAgICAgICAvLyBjYWxsZWQgYWdhaW4sIHNpbmNlIGl0IHdhcyBhbHJlYWR5IGNhbGxlZCAob24gdGhlIHByZXZpb3VzIGxpbmUpLlxuICAgICAgICAgICAgLy8gQ2FsbGluZyBvYnNlcnZlci5lcnJvciBhZ2FpbiB3b3VsZCBub3QgY2F1c2UgYW55IHJlYWwgcHJvYmxlbXMsXG4gICAgICAgICAgICAvLyBzaW5jZSBvbmx5IHRoZSBmaXJzdCBjYWxsIG1hdHRlcnMsIGJ1dCBjdXN0b20gb25FcnJvciBmdW5jdGlvbnNcbiAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgb3RoZXIgcmVhc29ucyBmb3Igd2FudGluZyB0byBwcmV2ZW50IHRoZSBkZWZhdWx0XG4gICAgICAgICAgICAvLyBiZWhhdmlvciBieSByZXR1cm5pbmcgZmFsc2UuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhyb3cgZXJyb3JzIHdpbGwgYmUgcGFzc2VkIHRvIG9ic2VydmVyLmVycm9yLlxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIGBzZXRPbkVycm9yYCB3aWxsIGJlIHJlbW92ZWQgd2l0aCBBcG9sbG8gQ2xpZW50IDQuMC4gUGxlYXNlXG4gICAgICogZGlzY29udGludWUgdXNpbmcgdGhpcyBtZXRob2QuXG4gICAgICovXG4gICAgQXBvbGxvTGluay5wcm90b3R5cGUuc2V0T25FcnJvciA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2Fybig1MCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkVycm9yID0gZm47XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIEFwb2xsb0xpbms7XG59KCkpO1xuZXhwb3J0IHsgQXBvbGxvTGluayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXBvbGxvTGluay5qcy5tYXAiLAogICAgImltcG9ydCB7IEFwb2xsb0xpbmsgfSBmcm9tIFwiLi9BcG9sbG9MaW5rLmpzXCI7XG5leHBvcnQgdmFyIGV4ZWN1dGUgPSBBcG9sbG9MaW5rLmV4ZWN1dGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leGVjdXRlLmpzLm1hcCIsCiAgICAiLyoqXG4gKiBPcmlnaW5hbCBzb3VyY2U6XG4gKiBodHRwczovL2dpdGh1Yi5jb20va21hbGFrb2ZmL3Jlc3BvbnNlLWl0ZXJhdG9yL2Jsb2IvbWFzdGVyL3NyYy9pdGVyYXRvcnMvYXN5bmMudHNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXN5bmNJdGVyYXRvcihzb3VyY2UpIHtcbiAgICB2YXIgX2E7XG4gICAgdmFyIGl0ZXJhdG9yID0gc291cmNlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpO1xuICAgIHJldHVybiBfYSA9IHtcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfYVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgX2E7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3luYy5qcy5tYXAiLAogICAgIi8qKlxuICogT3JpZ2luYWwgc291cmNlOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2ttYWxha29mZi9yZXNwb25zZS1pdGVyYXRvci9ibG9iL21hc3Rlci9zcmMvaXRlcmF0b3JzL25vZGVTdHJlYW0udHNcbiAqL1xuaW1wb3J0IHsgY2FuVXNlQXN5bmNJdGVyYXRvclN5bWJvbCB9IGZyb20gXCIuLi8uLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG5vZGVTdHJlYW1JdGVyYXRvcihzdHJlYW0pIHtcbiAgICB2YXIgY2xlYW51cCA9IG51bGw7XG4gICAgdmFyIGVycm9yID0gbnVsbDtcbiAgICB2YXIgZG9uZSA9IGZhbHNlO1xuICAgIHZhciBkYXRhID0gW107XG4gICAgdmFyIHdhaXRpbmcgPSBbXTtcbiAgICBmdW5jdGlvbiBvbkRhdGEoY2h1bmspIHtcbiAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAod2FpdGluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBzaGlmdGVkQXJyID0gd2FpdGluZy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2hpZnRlZEFycikgJiYgc2hpZnRlZEFyclswXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzaGlmdGVkQXJyWzBdKHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkYXRhLnB1c2goY2h1bmspO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuICAgICAgICBlcnJvciA9IGVycjtcbiAgICAgICAgdmFyIGFsbCA9IHdhaXRpbmcuc2xpY2UoKTtcbiAgICAgICAgYWxsLmZvckVhY2goZnVuY3Rpb24gKHBhaXIpIHtcbiAgICAgICAgICAgIHBhaXJbMV0oZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgICFjbGVhbnVwIHx8IGNsZWFudXAoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25FbmQoKSB7XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICB2YXIgYWxsID0gd2FpdGluZy5zbGljZSgpO1xuICAgICAgICBhbGwuZm9yRWFjaChmdW5jdGlvbiAocGFpcikge1xuICAgICAgICAgICAgcGFpclswXSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAhY2xlYW51cCB8fCBjbGVhbnVwKCk7XG4gICAgfVxuICAgIGNsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFudXAgPSBudWxsO1xuICAgICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoXCJkYXRhXCIsIG9uRGF0YSk7XG4gICAgICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsIG9uRXJyb3IpO1xuICAgICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIiwgb25FbmQpO1xuICAgICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoXCJmaW5pc2hcIiwgb25FbmQpO1xuICAgICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLCBvbkVuZCk7XG4gICAgfTtcbiAgICBzdHJlYW0ub24oXCJkYXRhXCIsIG9uRGF0YSk7XG4gICAgc3RyZWFtLm9uKFwiZXJyb3JcIiwgb25FcnJvcik7XG4gICAgc3RyZWFtLm9uKFwiZW5kXCIsIG9uRW5kKTtcbiAgICBzdHJlYW0ub24oXCJmaW5pc2hcIiwgb25FbmQpO1xuICAgIHN0cmVhbS5vbihcImNsb3NlXCIsIG9uRW5kKTtcbiAgICBmdW5jdGlvbiBnZXROZXh0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgaWYgKGRhdGEubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgdmFsdWU6IGRhdGEuc2hpZnQoKSwgZG9uZTogZmFsc2UgfSk7XG4gICAgICAgICAgICBpZiAoZG9uZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSk7XG4gICAgICAgICAgICB3YWl0aW5nLnB1c2goW3Jlc29sdmUsIHJlamVjdF0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdmFyIGl0ZXJhdG9yID0ge1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TmV4dCgpO1xuICAgICAgICB9LFxuICAgIH07XG4gICAgaWYgKGNhblVzZUFzeW5jSXRlcmF0b3JTeW1ib2wpIHtcbiAgICAgICAgaXRlcmF0b3JbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBpdGVyYXRvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vZGVTdHJlYW0uanMubWFwIiwKICAgICIvKipcbiAqIE9yaWdpbmFsIHNvdXJjZTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9rbWFsYWtvZmYvcmVzcG9uc2UtaXRlcmF0b3IvYmxvYi9tYXN0ZXIvc3JjL2l0ZXJhdG9ycy9wcm9taXNlLnRzXG4gKi9cbmltcG9ydCB7IGNhblVzZUFzeW5jSXRlcmF0b3JTeW1ib2wgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwcm9taXNlSXRlcmF0b3IocHJvbWlzZSkge1xuICAgIHZhciByZXNvbHZlZCA9IGZhbHNlO1xuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHJlc29sdmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgdmFsdWU6IHZhbHVlLCBkb25lOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgIH07XG4gICAgaWYgKGNhblVzZUFzeW5jSXRlcmF0b3JTeW1ib2wpIHtcbiAgICAgICAgaXRlcmF0b3JbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBpdGVyYXRvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb21pc2UuanMubWFwIiwKICAgICIvKipcbiAqIE9yaWdpbmFsIHNvdXJjZTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9rbWFsYWtvZmYvcmVzcG9uc2UtaXRlcmF0b3IvYmxvYi9tYXN0ZXIvc3JjL2l0ZXJhdG9ycy9yZWFkZXIudHNcbiAqL1xuaW1wb3J0IHsgY2FuVXNlQXN5bmNJdGVyYXRvclN5bWJvbCB9IGZyb20gXCIuLi8uLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlYWRlckl0ZXJhdG9yKHJlYWRlcikge1xuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAoY2FuVXNlQXN5bmNJdGVyYXRvclN5bWJvbCkge1xuICAgICAgICBpdGVyYXRvcltTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZXJhdG9yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhZGVyLmpzLm1hcCIsCiAgICAiLyoqXG4gKiBPcmlnaW5hbCBzb3VyY2U6XG4gKiBodHRwczovL2dpdGh1Yi5jb20va21hbGFrb2ZmL3Jlc3BvbnNlLWl0ZXJhdG9yL2Jsb2IvbWFzdGVyL3NyYy9pbmRleC50c1xuICovXG5pbXBvcnQgeyBjYW5Vc2VBc3luY0l0ZXJhdG9yU3ltYm9sIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IGFzeW5jSXRlcmF0b3IgZnJvbSBcIi4vaXRlcmF0b3JzL2FzeW5jLmpzXCI7XG5pbXBvcnQgbm9kZVN0cmVhbUl0ZXJhdG9yIGZyb20gXCIuL2l0ZXJhdG9ycy9ub2RlU3RyZWFtLmpzXCI7XG5pbXBvcnQgcHJvbWlzZUl0ZXJhdG9yIGZyb20gXCIuL2l0ZXJhdG9ycy9wcm9taXNlLmpzXCI7XG5pbXBvcnQgcmVhZGVySXRlcmF0b3IgZnJvbSBcIi4vaXRlcmF0b3JzL3JlYWRlci5qc1wiO1xuZnVuY3Rpb24gaXNOb2RlUmVzcG9uc2UodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZS5ib2R5O1xufVxuZnVuY3Rpb24gaXNSZWFkYWJsZVN0cmVhbSh2YWx1ZSkge1xuICAgIHJldHVybiAhIXZhbHVlLmdldFJlYWRlcjtcbn1cbmZ1bmN0aW9uIGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhKGNhblVzZUFzeW5jSXRlcmF0b3JTeW1ib2wgJiZcbiAgICAgICAgdmFsdWVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKTtcbn1cbmZ1bmN0aW9uIGlzU3RyZWFtYWJsZUJsb2IodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZS5zdHJlYW07XG59XG5mdW5jdGlvbiBpc0Jsb2IodmFsdWUpIHtcbiAgICByZXR1cm4gISF2YWx1ZS5hcnJheUJ1ZmZlcjtcbn1cbmZ1bmN0aW9uIGlzTm9kZVJlYWRhYmxlU3RyZWFtKHZhbHVlKSB7XG4gICAgcmV0dXJuICEhdmFsdWUucGlwZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNwb25zZUl0ZXJhdG9yKHJlc3BvbnNlKSB7XG4gICAgdmFyIGJvZHkgPSByZXNwb25zZTtcbiAgICBpZiAoaXNOb2RlUmVzcG9uc2UocmVzcG9uc2UpKVxuICAgICAgICBib2R5ID0gcmVzcG9uc2UuYm9keTtcbiAgICBpZiAoaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IoYm9keSkpXG4gICAgICAgIHJldHVybiBhc3luY0l0ZXJhdG9yKGJvZHkpO1xuICAgIGlmIChpc1JlYWRhYmxlU3RyZWFtKGJvZHkpKVxuICAgICAgICByZXR1cm4gcmVhZGVySXRlcmF0b3IoYm9keS5nZXRSZWFkZXIoKSk7XG4gICAgLy8gdGhpcyBlcnJvcnMgd2l0aG91dCBjYXN0aW5nIHRvIFJlYWRhYmxlU3RyZWFtPFQ+XG4gICAgLy8gYmVjYXVzZSBCbG9iLnN0cmVhbSgpIHJldHVybnMgYSBOb2RlSlMgUmVhZGFibGVTdHJlYW1cbiAgICBpZiAoaXNTdHJlYW1hYmxlQmxvYihib2R5KSkge1xuICAgICAgICByZXR1cm4gcmVhZGVySXRlcmF0b3IoYm9keS5zdHJlYW0oKS5nZXRSZWFkZXIoKSk7XG4gICAgfVxuICAgIGlmIChpc0Jsb2IoYm9keSkpXG4gICAgICAgIHJldHVybiBwcm9taXNlSXRlcmF0b3IoYm9keS5hcnJheUJ1ZmZlcigpKTtcbiAgICBpZiAoaXNOb2RlUmVhZGFibGVTdHJlYW0oYm9keSkpXG4gICAgICAgIHJldHVybiBub2RlU3RyZWFtSXRlcmF0b3IoYm9keSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBib2R5IHR5cGUgZm9yIHJlc3BvbnNlSXRlcmF0b3IuIFBsZWFzZSBwYXNzIGEgc3RyZWFtYWJsZSByZXNwb25zZS5cIik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXNwb25zZUl0ZXJhdG9yLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19leHRlbmRzLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgXCIuLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgaXNOb25OdWxsT2JqZWN0IH0gZnJvbSBcIi4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuLy8gVGhpcyBTeW1ib2wgYWxsb3dzIHVzIHRvIHBhc3MgdHJhbnNwb3J0LXNwZWNpZmljIGVycm9ycyBmcm9tIHRoZSBsaW5rIGNoYWluXG4vLyBpbnRvIFF1ZXJ5TWFuYWdlci9jbGllbnQgaW50ZXJuYWxzIHdpdGhvdXQgcmlza2luZyBhIG5hbWluZyBjb2xsaXNpb24gd2l0aGluXG4vLyBleHRlbnNpb25zICh3aGljaCBpbXBsZW1lbnRlcnMgY2FuIHVzZSBhcyB0aGV5IHNlZSBmaXQpLlxuZXhwb3J0IHZhciBQUk9UT0NPTF9FUlJPUlNfU1lNQk9MID0gU3ltYm9sKCk7XG5leHBvcnQgZnVuY3Rpb24gZ3JhcGhRTFJlc3VsdEhhc1Byb3RvY29sRXJyb3JzKHJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQuZXh0ZW5zaW9ucykge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShyZXN1bHQuZXh0ZW5zaW9uc1tQUk9UT0NPTF9FUlJPUlNfU1lNQk9MXSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQGRlcHJlY2F0ZWQgYGlzQXBvbGxvRXJyb3JgIHdpbGwgYmUgcmVtb3ZlZCB3aXRoIEFwb2xsbyBDbGllbnQgNC4wLiBUaGlzXG4gKiBmdW5jdGlvbiBpcyBzYWZlIHRvIHVzZSBpbiBBcG9sbG8gQ2xpZW50IDMueC5cbiAqXG4gKiAqKlJlY29tbWVuZGVkIG5vdyoqXG4gKlxuICogTm8gYWN0aW9uIG5lZWRlZFxuICpcbiAqICoqV2hlbiBtaWdyYXRpbmcqKlxuICpcbiAqIEVycm9ycyBhcmUgbm8gbG9uZ2VyIHdyYXBwZWQgaW4gQXBvbGxvIENsaWVudCA0LjAuIFRvIGNoZWNrIGlmIGFuIGVycm9yIGlzIGFuXG4gKiBpbnN0YW5jZSBvZiBhbiBlcnJvciBwcm92aWRlZCBieSBBcG9sbG8gQ2xpZW50LCB1c2UgdGhlIHN0YXRpYyBgLmlzYCBtZXRob2RcbiAqIG9uIHRoZSBlcnJvciBjbGFzcyB5b3Ugd2FudCB0byB0ZXN0IGFnYWluc3QuXG4gKlxuICogYGBgdHNcbiAqIC8vIFRlc3QgaWYgYW4gZXJyb3IgaXMgYW4gaW5zdGFuY2Ugb2YgYENvbWJpbmVkR3JhcGhRTEVycm9yc2BcbiAqIGNvbnN0IGlzR3JhcGhRTEVycm9ycyA9IENvbWJpbmVkR3JhcGhRTEVycm9ycy5pcyhlcnJvcik7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXBvbGxvRXJyb3IoZXJyKSB7XG4gICAgcmV0dXJuIGVyci5oYXNPd25Qcm9wZXJ0eShcImdyYXBoUUxFcnJvcnNcIik7XG59XG4vLyBTZXRzIHRoZSBlcnJvciBtZXNzYWdlIG9uIHRoaXMgZXJyb3IgYWNjb3JkaW5nIHRvIHRoZVxuLy8gdGhlIEdyYXBoUUwgYW5kIG5ldHdvcmsgZXJyb3JzIHRoYXQgYXJlIHByZXNlbnQuXG4vLyBJZiB0aGUgZXJyb3IgbWVzc2FnZSBoYXMgYWxyZWFkeSBiZWVuIHNldCB0aHJvdWdoIHRoZVxuLy8gY29uc3RydWN0b3Igb3Igb3RoZXJ3aXNlLCB0aGlzIGZ1bmN0aW9uIGlzIGEgbm9wLlxudmFyIGdlbmVyYXRlRXJyb3JNZXNzYWdlID0gZnVuY3Rpb24gKGVycikge1xuICAgIHZhciBlcnJvcnMgPSBfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgZXJyLmdyYXBoUUxFcnJvcnMsIHRydWUpLCBlcnIuY2xpZW50RXJyb3JzLCB0cnVlKSwgZXJyLnByb3RvY29sRXJyb3JzLCB0cnVlKTtcbiAgICBpZiAoZXJyLm5ldHdvcmtFcnJvcilcbiAgICAgICAgZXJyb3JzLnB1c2goZXJyLm5ldHdvcmtFcnJvcik7XG4gICAgcmV0dXJuIChlcnJvcnNcbiAgICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGNvZGUgc29tZXRpbWVzIHVuc2FmZWx5IHR5cGVzIG5vbi1FcnJvciBvYmplY3RzIGFzIEdyYXBoUUxFcnJvcnNcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHJldHVybiAoaXNOb25OdWxsT2JqZWN0KGVycikgJiYgZXJyLm1lc3NhZ2UpIHx8IFwiRXJyb3IgbWVzc2FnZSBub3QgZm91bmQuXCI7XG4gICAgfSlcbiAgICAgICAgLmpvaW4oXCJcXG5cIikpO1xufTtcbnZhciBBcG9sbG9FcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXBvbGxvRXJyb3IsIF9zdXBlcik7XG4gICAgLy8gQ29uc3RydWN0cyBhbiBpbnN0YW5jZSBvZiBBcG9sbG9FcnJvciBnaXZlbiBzZXJpYWxpemVkIEdyYXBoUUwgZXJyb3JzLFxuICAgIC8vIGNsaWVudCBlcnJvcnMsIHByb3RvY29sIGVycm9ycyBvciBuZXR3b3JrIGVycm9ycy5cbiAgICAvLyBOb3RlIHRoYXQgb25lIG9mIHRoZXNlIGhhcyB0byBiZSBhIHZhbGlkXG4gICAgLy8gdmFsdWUgb3IgdGhlIGNvbnN0cnVjdGVkIGVycm9yIHdpbGwgYmUgbWVhbmluZ2xlc3MuXG4gICAgZnVuY3Rpb24gQXBvbGxvRXJyb3IoX2EpIHtcbiAgICAgICAgdmFyIGdyYXBoUUxFcnJvcnMgPSBfYS5ncmFwaFFMRXJyb3JzLCBwcm90b2NvbEVycm9ycyA9IF9hLnByb3RvY29sRXJyb3JzLCBjbGllbnRFcnJvcnMgPSBfYS5jbGllbnRFcnJvcnMsIG5ldHdvcmtFcnJvciA9IF9hLm5ldHdvcmtFcnJvciwgZXJyb3JNZXNzYWdlID0gX2EuZXJyb3JNZXNzYWdlLCBleHRyYUluZm8gPSBfYS5leHRyYUluZm87XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGVycm9yTWVzc2FnZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubmFtZSA9IFwiQXBvbGxvRXJyb3JcIjtcbiAgICAgICAgX3RoaXMuZ3JhcGhRTEVycm9ycyA9IGdyYXBoUUxFcnJvcnMgfHwgW107XG4gICAgICAgIF90aGlzLnByb3RvY29sRXJyb3JzID0gcHJvdG9jb2xFcnJvcnMgfHwgW107XG4gICAgICAgIF90aGlzLmNsaWVudEVycm9ycyA9IGNsaWVudEVycm9ycyB8fCBbXTtcbiAgICAgICAgX3RoaXMubmV0d29ya0Vycm9yID0gbmV0d29ya0Vycm9yIHx8IG51bGw7XG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwgZ2VuZXJhdGVFcnJvck1lc3NhZ2UoX3RoaXMpO1xuICAgICAgICBfdGhpcy5leHRyYUluZm8gPSBleHRyYUluZm87XG4gICAgICAgIF90aGlzLmNhdXNlID1cbiAgICAgICAgICAgIF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtcbiAgICAgICAgICAgICAgICBuZXR3b3JrRXJyb3JcbiAgICAgICAgICAgIF0sIChncmFwaFFMRXJyb3JzIHx8IFtdKSwgdHJ1ZSksIChwcm90b2NvbEVycm9ycyB8fCBbXSksIHRydWUpLCAoY2xpZW50RXJyb3JzIHx8IFtdKSwgdHJ1ZSkuZmluZChmdW5jdGlvbiAoZSkgeyByZXR1cm4gISFlOyB9KSB8fCBudWxsO1xuICAgICAgICAvLyBXZSdyZSBub3QgdXNpbmcgYE9iamVjdC5zZXRQcm90b3R5cGVPZmAgaGVyZSBhcyBpdCBpc24ndCBmdWxseVxuICAgICAgICAvLyBzdXBwb3J0ZWQgb24gQW5kcm9pZCAoc2VlIGlzc3VlICMzMjM2KS5cbiAgICAgICAgX3RoaXMuX19wcm90b19fID0gQXBvbGxvRXJyb3IucHJvdG90eXBlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBBcG9sbG9FcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydCB7IEFwb2xsb0Vycm9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fYXNzaWduLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyByZXNwb25zZUl0ZXJhdG9yIH0gZnJvbSBcIi4vcmVzcG9uc2VJdGVyYXRvci5qc1wiO1xuaW1wb3J0IHsgdGhyb3dTZXJ2ZXJFcnJvciB9IGZyb20gXCIuLi91dGlscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgUFJPVE9DT0xfRVJST1JTX1NZTUJPTCB9IGZyb20gXCIuLi8uLi9lcnJvcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IGlzQXBvbGxvUGF5bG9hZFJlc3VsdCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvY29tbW9uL2luY3JlbWVudGFsUmVzdWx0LmpzXCI7XG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRNdWx0aXBhcnRCb2R5KHJlc3BvbnNlLCBuZXh0VmFsdWUpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZWNvZGVyLCBjb250ZW50VHlwZSwgZGVsaW1pdGVyLCBib3VuZGFyeVZhbCwgYm91bmRhcnksIGJ1ZmZlciwgaXRlcmF0b3IsIHJ1bm5pbmcsIF9hLCB2YWx1ZSwgZG9uZSwgY2h1bmssIHNlYXJjaEZyb20sIGJpLCBtZXNzYWdlLCBpLCBoZWFkZXJzLCBjb250ZW50VHlwZV8xLCBib2R5LCByZXN1bHQsIG5leHQ7XG4gICAgICAgIHZhciBfYiwgX2M7XG4gICAgICAgIHZhciBfZDtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZSkge1xuICAgICAgICAgICAgc3dpdGNoIChfZS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKFRleHREZWNvZGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRleHREZWNvZGVyIG11c3QgYmUgZGVmaW5lZCBpbiB0aGUgZW52aXJvbm1lbnQ6IHBsZWFzZSBpbXBvcnQgYSBwb2x5ZmlsbC5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IChfZCA9IHJlc3BvbnNlLmhlYWRlcnMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5nZXQoXCJjb250ZW50LXR5cGVcIik7XG4gICAgICAgICAgICAgICAgICAgIGRlbGltaXRlciA9IFwiYm91bmRhcnk9XCI7XG4gICAgICAgICAgICAgICAgICAgIGJvdW5kYXJ5VmFsID0gKGNvbnRlbnRUeXBlID09PSBudWxsIHx8IGNvbnRlbnRUeXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250ZW50VHlwZS5pbmNsdWRlcyhkZWxpbWl0ZXIpKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9PT0gbnVsbCB8fCBjb250ZW50VHlwZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGVudFR5cGUuc3Vic3RyaW5nKChjb250ZW50VHlwZSA9PT0gbnVsbCB8fCBjb250ZW50VHlwZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGVudFR5cGUuaW5kZXhPZihkZWxpbWl0ZXIpKSArIGRlbGltaXRlci5sZW5ndGgpLnJlcGxhY2UoL1snXCJdL2csIFwiXCIpLnJlcGxhY2UoL1xcOyguKikvZ20sIFwiXCIpLnRyaW0oKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIi1cIjtcbiAgICAgICAgICAgICAgICAgICAgYm91bmRhcnkgPSBcIlxcclxcbi0tXCIuY29uY2F0KGJvdW5kYXJ5VmFsKTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IgPSByZXNwb25zZUl0ZXJhdG9yKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcnVubmluZykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGl0ZXJhdG9yLm5leHQoKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBfYSA9IF9lLnNlbnQoKSwgdmFsdWUgPSBfYS52YWx1ZSwgZG9uZSA9IF9hLmRvbmU7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUgOiBkZWNvZGVyLmRlY29kZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaEZyb20gPSBidWZmZXIubGVuZ3RoIC0gYm91bmRhcnkubGVuZ3RoICsgMTtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZyA9ICFkb25lO1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIgKz0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIGJpID0gYnVmZmVyLmluZGV4T2YoYm91bmRhcnksIHNlYXJjaEZyb20pO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoYmkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5zbGljZSgwLCBiaSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnNsaWNlKGJpICsgYm91bmRhcnkubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sIG1lc3NhZ2UgPSBfYlswXSwgYnVmZmVyID0gX2JbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gbWVzc2FnZS5pbmRleE9mKFwiXFxyXFxuXFxyXFxuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IHBhcnNlSGVhZGVycyhtZXNzYWdlLnNsaWNlKDAsIGkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlXzEgPSBoZWFkZXJzW1wiY29udGVudC10eXBlXCJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlXzEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZV8xLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImFwcGxpY2F0aW9uL2pzb25cIikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgcGF0Y2ggY29udGVudCB0eXBlOiBhcHBsaWNhdGlvbi9qc29uIGlzIHJlcXVpcmVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBtZXNzYWdlLnNsaWNlKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBwYXJzZUpzb25Cb2R5KHJlc3BvbnNlLCBib2R5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0KS5sZW5ndGggPiAxIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YVwiIGluIHJlc3VsdCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImluY3JlbWVudGFsXCIgaW4gcmVzdWx0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXJyb3JzXCIgaW4gcmVzdWx0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGF5bG9hZFwiIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcG9sbG9QYXlsb2FkUmVzdWx0KHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInBheWxvYWRcIiBpbiByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0KS5sZW5ndGggPT09IDEgJiYgcmVzdWx0LnBheWxvYWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0ID0gX19hc3NpZ24oe30sIHJlc3VsdC5wYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImVycm9yc1wiIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbmV4dCksIHsgZXh0ZW5zaW9uczogX19hc3NpZ24oX19hc3NpZ24oe30sIChcImV4dGVuc2lvbnNcIiBpbiBuZXh0ID8gbmV4dC5leHRlbnNpb25zIDogbnVsbCkpLCAoX2MgPSB7fSwgX2NbUFJPVE9DT0xfRVJST1JTX1NZTUJPTF0gPSByZXN1bHQuZXJyb3JzLCBfYykpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFZhbHVlKG5leHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoZSBsYXN0IGNodW5rIHdpdGggb25seSBgaGFzTmV4dDogZmFsc2VgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGNhbGwgb2JzZXJ2ZXIubmV4dCBhcyB0aGVyZSBpcyBubyBkYXRhL2Vycm9yc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFZhbHVlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGNodW5rIGNvbnRhaW5zIG9ubHkgYSBcImhhc05leHQ6IGZhbHNlXCIsIHdlIGNhbiBjYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2JzZXJ2ZXIuY29tcGxldGUoKSBpbW1lZGlhdGVseS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImhhc05leHRcIiBpbiByZXN1bHQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXJlc3VsdC5oYXNOZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBiaSA9IGJ1ZmZlci5pbmRleE9mKGJvdW5kYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlclRleHQpIHtcbiAgICB2YXIgaGVhZGVyc0luaXQgPSB7fTtcbiAgICBoZWFkZXJUZXh0LnNwbGl0KFwiXFxuXCIpLmZvckVhY2goZnVuY3Rpb24gKGxpbmUpIHtcbiAgICAgICAgdmFyIGkgPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuICAgICAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgICAgICAvLyBub3JtYWxpemUgaGVhZGVycyB0byBsb3dlcmNhc2VcbiAgICAgICAgICAgIHZhciBuYW1lXzEgPSBsaW5lLnNsaWNlKDAsIGkpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbGluZS5zbGljZShpICsgMSkudHJpbSgpO1xuICAgICAgICAgICAgaGVhZGVyc0luaXRbbmFtZV8xXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGhlYWRlcnNJbml0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnNvbkJvZHkocmVzcG9uc2UsIGJvZHlUZXh0KSB7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgLy8gTmV0d29yayBlcnJvclxuICAgICAgICB2YXIgZ2V0UmVzdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShib2R5VGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvZHlUZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aHJvd1NlcnZlckVycm9yKHJlc3BvbnNlLCBnZXRSZXN1bHQoKSwgXCJSZXNwb25zZSBub3Qgc3VjY2Vzc2Z1bDogUmVjZWl2ZWQgc3RhdHVzIGNvZGUgXCIuY29uY2F0KHJlc3BvbnNlLnN0YXR1cykpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShib2R5VGV4dCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgdmFyIHBhcnNlRXJyb3IgPSBlcnI7XG4gICAgICAgIHBhcnNlRXJyb3IubmFtZSA9IFwiU2VydmVyUGFyc2VFcnJvclwiO1xuICAgICAgICBwYXJzZUVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIHBhcnNlRXJyb3Iuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgcGFyc2VFcnJvci5ib2R5VGV4dCA9IGJvZHlUZXh0O1xuICAgICAgICB0aHJvdyBwYXJzZUVycm9yO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIsIG9ic2VydmVyKSB7XG4gICAgLy8gaWYgaXQgaXMgYSBuZXR3b3JrIGVycm9yLCBCVVQgdGhlcmUgaXMgZ3JhcGhxbCByZXN1bHQgaW5mbyBmaXJlXG4gICAgLy8gdGhlIG5leHQgb2JzZXJ2ZXIgYmVmb3JlIGNhbGxpbmcgZXJyb3IgdGhpcyBnaXZlcyBhcG9sbG8tY2xpZW50XG4gICAgLy8gKGFuZCByZWFjdC1hcG9sbG8pIHRoZSBgZ3JhcGhxbEVycm9yc2AgYW5kIGBuZXR3b3JrRXJyb3JzYCB0b1xuICAgIC8vIHBhc3MgdG8gVUkgdGhpcyBzaG91bGQgb25seSBoYXBwZW4gaWYgd2UgKmFsc28qIGhhdmUgZGF0YSBhc1xuICAgIC8vIHBhcnQgb2YgdGhlIHJlc3BvbnNlIGtleSBwZXIgdGhlIHNwZWNcbiAgICBpZiAoZXJyLnJlc3VsdCAmJiBlcnIucmVzdWx0LmVycm9ycyAmJiBlcnIucmVzdWx0LmRhdGEpIHtcbiAgICAgICAgLy8gaWYgd2UgZG9uJ3QgY2FsbCBuZXh0LCB0aGUgVUkgY2FuIG9ubHkgc2hvdyBuZXR3b3JrRXJyb3JcbiAgICAgICAgLy8gYmVjYXVzZSBBQyBkaWRuJ3QgZ2V0IGFueSBncmFwaHFsRXJyb3JzIHRoaXMgaXMgZ3JhcGhxbFxuICAgICAgICAvLyBleGVjdXRpb24gcmVzdWx0IGluZm8gKGkuZSBlcnJvcnMgYW5kIHBvc3NpYmx5IGRhdGEpIHRoaXMgaXNcbiAgICAgICAgLy8gYmVjYXVzZSB0aGVyZSBpcyBubyBmb3JtYWwgc3BlYyBob3cgZXJyb3JzIHNob3VsZCB0cmFuc2xhdGUgdG9cbiAgICAgICAgLy8gaHR0cCBzdGF0dXMgY29kZXMuIFNvIGFuIGF1dGggZXJyb3IgKDQwMSkgY291bGQgaGF2ZSBib3RoIGRhdGFcbiAgICAgICAgLy8gZnJvbSBhIHB1YmxpYyBmaWVsZCwgZXJyb3JzIGZyb20gYSBwcml2YXRlIGZpZWxkLCBhbmQgYSBzdGF0dXNcbiAgICAgICAgLy8gb2YgNDAxXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gIHVzZXIgeyAvLyB0aGlzIHdpbGwgaGF2ZSBlcnJvcnNcbiAgICAgICAgLy8gICAgZmlyc3ROYW1lXG4gICAgICAgIC8vICB9XG4gICAgICAgIC8vICBwcm9kdWN0cyB7IC8vIHRoaXMgaXMgcHVibGljIHNvIHdpbGwgaGF2ZSBkYXRhXG4gICAgICAgIC8vICAgIGNvc3RcbiAgICAgICAgLy8gIH1cbiAgICAgICAgLy8gfVxuICAgICAgICAvL1xuICAgICAgICAvLyB0aGUgcmVzdWx0IG9mIGFib3ZlICpjb3VsZCogbG9vayBsaWtlIHRoaXM6XG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICBkYXRhOiB7IHByb2R1Y3RzOiBbeyBjb3N0OiBcIiQxMFwiIH1dIH0sXG4gICAgICAgIC8vICAgZXJyb3JzOiBbe1xuICAgICAgICAvLyAgICAgIG1lc3NhZ2U6ICd5b3VyIHNlc3Npb24gaGFzIHRpbWVkIG91dCcsXG4gICAgICAgIC8vICAgICAgcGF0aDogW11cbiAgICAgICAgLy8gICB9XVxuICAgICAgICAvLyB9XG4gICAgICAgIC8vIHN0YXR1cyBjb2RlIG9mIGFib3ZlIHdvdWxkIGJlIGEgNDAxXG4gICAgICAgIC8vIGluIHRoZSBVSSB5b3Ugd2FudCB0byBzaG93IGRhdGEgd2hlcmUgeW91IGNhbiwgZXJyb3JzIGFzIGRhdGEgd2hlcmUgeW91IGNhblxuICAgICAgICAvLyBhbmQgdXNlIGNvcnJlY3QgaHR0cCBzdGF0dXMgY29kZXNcbiAgICAgICAgb2JzZXJ2ZXIubmV4dChlcnIucmVzdWx0KTtcbiAgICB9XG4gICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlKG9wZXJhdGlvbnMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZVxuICAgICAgICAgICAgLnRleHQoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGJvZHlUZXh0KSB7IHJldHVybiBwYXJzZUpzb25Cb2R5KHJlc3BvbnNlLCBib2R5VGV4dCk7IH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzdWx0KSAmJlxuICAgICAgICAgICAgICAgICFoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwgXCJkYXRhXCIpICYmXG4gICAgICAgICAgICAgICAgIWhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBcImVycm9yc1wiKSkge1xuICAgICAgICAgICAgICAgIC8vIERhdGEgZXJyb3JcbiAgICAgICAgICAgICAgICB0aHJvd1NlcnZlckVycm9yKHJlc3BvbnNlLCByZXN1bHQsIFwiU2VydmVyIHJlc3BvbnNlIHdhcyBtaXNzaW5nIGZvciBxdWVyeSAnXCIuY29uY2F0KEFycmF5LmlzQXJyYXkob3BlcmF0aW9ucykgP1xuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25zLm1hcChmdW5jdGlvbiAob3ApIHsgcmV0dXJuIG9wLm9wZXJhdGlvbk5hbWU7IH0pXG4gICAgICAgICAgICAgICAgICAgIDogb3BlcmF0aW9ucy5vcGVyYXRpb25OYW1lLCBcIicuXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgbmV3SW52YXJpYW50RXJyb3IgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmV4cG9ydCB2YXIgc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIgPSBmdW5jdGlvbiAocCwgbGFiZWwpIHtcbiAgICB2YXIgc2VyaWFsaXplZDtcbiAgICB0cnkge1xuICAgICAgICBzZXJpYWxpemVkID0gSlNPTi5zdHJpbmdpZnkocCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHZhciBwYXJzZUVycm9yID0gbmV3SW52YXJpYW50RXJyb3IoNTQsIGxhYmVsLCBlLm1lc3NhZ2UpO1xuICAgICAgICBwYXJzZUVycm9yLnBhcnNlRXJyb3IgPSBlO1xuICAgICAgICB0aHJvdyBwYXJzZUVycm9yO1xuICAgIH1cbiAgICByZXR1cm4gc2VyaWFsaXplZDtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXJpYWxpemVGZXRjaFBhcmFtZXRlci5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fYXNzaWduLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBwcmludCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbnZhciBkZWZhdWx0SHR0cE9wdGlvbnMgPSB7XG4gICAgaW5jbHVkZVF1ZXJ5OiB0cnVlLFxuICAgIGluY2x1ZGVFeHRlbnNpb25zOiBmYWxzZSxcbiAgICBwcmVzZXJ2ZUhlYWRlckNhc2U6IGZhbHNlLFxufTtcbnZhciBkZWZhdWx0SGVhZGVycyA9IHtcbiAgICAvLyBoZWFkZXJzIGFyZSBjYXNlIGluc2Vuc2l0aXZlIChodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTI1OTAwNClcbiAgICBhY2NlcHQ6IFwiKi8qXCIsXG4gICAgLy8gVGhlIGNvbnRlbnQtdHlwZSBoZWFkZXIgZGVzY3JpYmVzIHRoZSB0eXBlIG9mIHRoZSBib2R5IG9mIHRoZSByZXF1ZXN0LCBhbmRcbiAgICAvLyBzbyBpdCB0eXBpY2FsbHkgb25seSBpcyBzZW50IHdpdGggcmVxdWVzdHMgdGhhdCBhY3R1YWxseSBoYXZlIGJvZGllcy4gT25lXG4gICAgLy8gY291bGQgaW1hZ2luZSB0aGF0IEFwb2xsbyBDbGllbnQgd291bGQgcmVtb3ZlIHRoaXMgaGVhZGVyIHdoZW4gY29uc3RydWN0aW5nXG4gICAgLy8gYSBHRVQgcmVxdWVzdCAod2hpY2ggaGFzIG5vIGJvZHkpLCBidXQgd2UgaGlzdG9yaWNhbGx5IGhhdmUgbm90IGRvbmUgdGhhdC5cbiAgICAvLyBUaGlzIG1lYW5zIHRoYXQgYnJvd3NlcnMgd2lsbCBwcmVmbGlnaHQgYWxsIEFwb2xsbyBDbGllbnQgcmVxdWVzdHMgKGV2ZW5cbiAgICAvLyBHRVQgcmVxdWVzdHMpLiBBcG9sbG8gU2VydmVyJ3MgQ1NSRiBwcmV2ZW50aW9uIGZlYXR1cmUgKGludHJvZHVjZWQgaW5cbiAgICAvLyBBUzMuNykgdGFrZXMgYWR2YW50YWdlIG9mIHRoaXMgZmFjdCBhbmQgZG9lcyBub3QgYmxvY2sgcmVxdWVzdHMgd2l0aCB0aGlzXG4gICAgLy8gaGVhZGVyLiBJZiB5b3Ugd2FudCB0byBkcm9wIHRoaXMgaGVhZGVyIGZyb20gR0VUIHJlcXVlc3RzLCB0aGVuIHlvdSBzaG91bGRcbiAgICAvLyBwcm9iYWJseSByZXBsYWNlIGl0IHdpdGggYSBgYXBvbGxvLXJlcXVpcmUtcHJlZmxpZ2h0YCBoZWFkZXIsIG9yIHNlcnZlcnNcbiAgICAvLyB3aXRoIENTUkYgcHJldmVudGlvbiBlbmFibGVkIG1pZ2h0IGJsb2NrIHlvdXIgR0VUIHJlcXVlc3QuIFNlZVxuICAgIC8vIGh0dHBzOi8vd3d3LmFwb2xsb2dyYXBocWwuY29tL2RvY3MvYXBvbGxvLXNlcnZlci9zZWN1cml0eS9jb3JzLyNwcmV2ZW50aW5nLWNyb3NzLXNpdGUtcmVxdWVzdC1mb3JnZXJ5LWNzcmZcbiAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxufTtcbnZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxufTtcbmV4cG9ydCB2YXIgZmFsbGJhY2tIdHRwQ29uZmlnID0ge1xuICAgIGh0dHA6IGRlZmF1bHRIdHRwT3B0aW9ucyxcbiAgICBoZWFkZXJzOiBkZWZhdWx0SGVhZGVycyxcbiAgICBvcHRpb25zOiBkZWZhdWx0T3B0aW9ucyxcbn07XG5leHBvcnQgdmFyIGRlZmF1bHRQcmludGVyID0gZnVuY3Rpb24gKGFzdCwgcHJpbnRlcikgeyByZXR1cm4gcHJpbnRlcihhc3QpOyB9O1xuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keShvcGVyYXRpb24sIGZhbGxiYWNrQ29uZmlnKSB7XG4gICAgdmFyIGNvbmZpZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBjb25maWdzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBjb25maWdzLnVuc2hpZnQoZmFsbGJhY2tDb25maWcpO1xuICAgIHJldHVybiBzZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHlJbnRlcm5hbC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW29wZXJhdGlvbixcbiAgICAgICAgZGVmYXVsdFByaW50ZXJdLCBjb25maWdzLCBmYWxzZSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keUludGVybmFsKG9wZXJhdGlvbiwgcHJpbnRlcikge1xuICAgIHZhciBjb25maWdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgY29uZmlnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICB2YXIgaHR0cCA9IHt9O1xuICAgIGNvbmZpZ3MuZm9yRWFjaChmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIG9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGNvbmZpZy5vcHRpb25zKSwgeyBoZWFkZXJzOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucy5oZWFkZXJzKSwgY29uZmlnLmhlYWRlcnMpIH0pO1xuICAgICAgICBpZiAoY29uZmlnLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNyZWRlbnRpYWxzID0gY29uZmlnLmNyZWRlbnRpYWxzO1xuICAgICAgICB9XG4gICAgICAgIGh0dHAgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaHR0cCksIGNvbmZpZy5odHRwKTtcbiAgICB9KTtcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIG9wdGlvbnMuaGVhZGVycyA9IHJlbW92ZUR1cGxpY2F0ZUhlYWRlcnMob3B0aW9ucy5oZWFkZXJzLCBodHRwLnByZXNlcnZlSGVhZGVyQ2FzZSk7XG4gICAgfVxuICAgIC8vVGhlIGJvZHkgZGVwZW5kcyBvbiB0aGUgaHR0cCBvcHRpb25zXG4gICAgdmFyIG9wZXJhdGlvbk5hbWUgPSBvcGVyYXRpb24ub3BlcmF0aW9uTmFtZSwgZXh0ZW5zaW9ucyA9IG9wZXJhdGlvbi5leHRlbnNpb25zLCB2YXJpYWJsZXMgPSBvcGVyYXRpb24udmFyaWFibGVzLCBxdWVyeSA9IG9wZXJhdGlvbi5xdWVyeTtcbiAgICB2YXIgYm9keSA9IHsgb3BlcmF0aW9uTmFtZTogb3BlcmF0aW9uTmFtZSwgdmFyaWFibGVzOiB2YXJpYWJsZXMgfTtcbiAgICBpZiAoaHR0cC5pbmNsdWRlRXh0ZW5zaW9ucylcbiAgICAgICAgYm9keS5leHRlbnNpb25zID0gZXh0ZW5zaW9ucztcbiAgICAvLyBub3Qgc2VuZGluZyB0aGUgcXVlcnkgKGkuZSBwZXJzaXN0ZWQgcXVlcmllcylcbiAgICBpZiAoaHR0cC5pbmNsdWRlUXVlcnkpXG4gICAgICAgIGJvZHkucXVlcnkgPSBwcmludGVyKHF1ZXJ5LCBwcmludCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgYm9keTogYm9keSxcbiAgICB9O1xufVxuLy8gUmVtb3ZlIHBvdGVudGlhbCBkdXBsaWNhdGUgaGVhZGVyIG5hbWVzLCBwcmVzZXJ2aW5nIGxhc3QgKGJ5IGluc2VydGlvbiBvcmRlcikuXG4vLyBUaGlzIGlzIGRvbmUgdG8gcHJldmVudCB1bmludGVudGlvbmFsbHkgZHVwbGljYXRpbmcgYSBoZWFkZXIgaW5zdGVhZCBvZlxuLy8gb3ZlcndyaXRpbmcgaXQgKFNlZSAjODQ0NyBhbmQgIzg0NDkpLlxuZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRlSGVhZGVycyhoZWFkZXJzLCBwcmVzZXJ2ZUhlYWRlckNhc2UpIHtcbiAgICAvLyBJZiB3ZSdyZSBub3QgcHJlc2VydmluZyB0aGUgY2FzZSwganVzdCByZW1vdmUgZHVwbGljYXRlcyB3LyBub3JtYWxpemF0aW9uLlxuICAgIGlmICghcHJlc2VydmVIZWFkZXJDYXNlKSB7XG4gICAgICAgIHZhciBub3JtYWxpemVkSGVhZGVyc18xID0ge307XG4gICAgICAgIE9iamVjdC5rZXlzKE9iamVjdChoZWFkZXJzKSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgbm9ybWFsaXplZEhlYWRlcnNfMVtuYW1lLnRvTG93ZXJDYXNlKCldID0gaGVhZGVyc1tuYW1lXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBub3JtYWxpemVkSGVhZGVyc18xO1xuICAgIH1cbiAgICAvLyBJZiB3ZSBhcmUgcHJlc2VydmluZyB0aGUgY2FzZSwgcmVtb3ZlIGR1cGxpY2F0ZXMgdy8gbm9ybWFsaXphdGlvbixcbiAgICAvLyBwcmVzZXJ2aW5nIHRoZSBvcmlnaW5hbCBuYW1lLlxuICAgIC8vIFRoaXMgYWxsb3dzIGZvciBub24taHR0cC1zcGVjLWNvbXBsaWFudCBzZXJ2ZXJzIHRoYXQgZXhwZWN0IGludGVudGlvbmFsbHlcbiAgICAvLyBjYXBpdGFsaXplZCBoZWFkZXIgbmFtZXMgKFNlZSAjNjc0MSkuXG4gICAgdmFyIGhlYWRlckRhdGEgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhPYmplY3QoaGVhZGVycykpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgaGVhZGVyRGF0YVtuYW1lLnRvTG93ZXJDYXNlKCldID0ge1xuICAgICAgICAgICAgb3JpZ2luYWxOYW1lOiBuYW1lLFxuICAgICAgICAgICAgdmFsdWU6IGhlYWRlcnNbbmFtZV0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgdmFyIG5vcm1hbGl6ZWRIZWFkZXJzID0ge307XG4gICAgT2JqZWN0LmtleXMoaGVhZGVyRGF0YSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBub3JtYWxpemVkSGVhZGVyc1toZWFkZXJEYXRhW25hbWVdLm9yaWdpbmFsTmFtZV0gPSBoZWFkZXJEYXRhW25hbWVdLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBub3JtYWxpemVkSGVhZGVycztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlbGVjdEh0dHBPcHRpb25zQW5kQm9keS5qcy5tYXAiLAogICAgImltcG9ydCB7IG5ld0ludmFyaWFudEVycm9yIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5leHBvcnQgdmFyIGNoZWNrRmV0Y2hlciA9IGZ1bmN0aW9uIChmZXRjaGVyKSB7XG4gICAgaWYgKCFmZXRjaGVyICYmIHR5cGVvZiBmZXRjaCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB0aHJvdyBuZXdJbnZhcmlhbnRFcnJvcig1MSk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNoZWNrRmV0Y2hlci5qcy5tYXAiLAogICAgImV4cG9ydCB2YXIgc2VsZWN0VVJJID0gZnVuY3Rpb24gKG9wZXJhdGlvbiwgZmFsbGJhY2tVUkkpIHtcbiAgICB2YXIgY29udGV4dCA9IG9wZXJhdGlvbi5nZXRDb250ZXh0KCk7XG4gICAgdmFyIGNvbnRleHRVUkkgPSBjb250ZXh0LnVyaTtcbiAgICBpZiAoY29udGV4dFVSSSkge1xuICAgICAgICByZXR1cm4gY29udGV4dFVSSTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZhbGxiYWNrVVJJID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrVVJJKG9wZXJhdGlvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsbGJhY2tVUkkgfHwgXCIvZ3JhcGhxbFwiO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWxlY3RVUkkuanMubWFwIiwKICAgICJpbXBvcnQgeyBzZXJpYWxpemVGZXRjaFBhcmFtZXRlciB9IGZyb20gXCIuL3NlcmlhbGl6ZUZldGNoUGFyYW1ldGVyLmpzXCI7XG4vLyBGb3IgR0VUIG9wZXJhdGlvbnMsIHJldHVybnMgdGhlIGdpdmVuIFVSSSByZXdyaXR0ZW4gd2l0aCBwYXJhbWV0ZXJzLCBvciBhXG4vLyBwYXJzZSBlcnJvci5cbmV4cG9ydCBmdW5jdGlvbiByZXdyaXRlVVJJRm9yR0VUKGNob3NlblVSSSwgYm9keSkge1xuICAgIC8vIEltcGxlbWVudCB0aGUgc3RhbmRhcmQgSFRUUCBHRVQgc2VyaWFsaXphdGlvbiwgcGx1cyAnZXh0ZW5zaW9ucycuIE5vdGVcbiAgICAvLyB0aGUgZXh0cmEgbGV2ZWwgb2YgSlNPTiBzZXJpYWxpemF0aW9uIVxuICAgIHZhciBxdWVyeVBhcmFtcyA9IFtdO1xuICAgIHZhciBhZGRRdWVyeVBhcmFtID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgcXVlcnlQYXJhbXMucHVzaChcIlwiLmNvbmNhdChrZXksIFwiPVwiKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSkpO1xuICAgIH07XG4gICAgaWYgKFwicXVlcnlcIiBpbiBib2R5KSB7XG4gICAgICAgIGFkZFF1ZXJ5UGFyYW0oXCJxdWVyeVwiLCBib2R5LnF1ZXJ5KTtcbiAgICB9XG4gICAgaWYgKGJvZHkub3BlcmF0aW9uTmFtZSkge1xuICAgICAgICBhZGRRdWVyeVBhcmFtKFwib3BlcmF0aW9uTmFtZVwiLCBib2R5Lm9wZXJhdGlvbk5hbWUpO1xuICAgIH1cbiAgICBpZiAoYm9keS52YXJpYWJsZXMpIHtcbiAgICAgICAgdmFyIHNlcmlhbGl6ZWRWYXJpYWJsZXMgPSB2b2lkIDA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXJpYWxpemVkVmFyaWFibGVzID0gc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIoYm9keS52YXJpYWJsZXMsIFwiVmFyaWFibGVzIG1hcFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHsgcGFyc2VFcnJvcjogcGFyc2VFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGFkZFF1ZXJ5UGFyYW0oXCJ2YXJpYWJsZXNcIiwgc2VyaWFsaXplZFZhcmlhYmxlcyk7XG4gICAgfVxuICAgIGlmIChib2R5LmV4dGVuc2lvbnMpIHtcbiAgICAgICAgdmFyIHNlcmlhbGl6ZWRFeHRlbnNpb25zID0gdm9pZCAwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2VyaWFsaXplZEV4dGVuc2lvbnMgPSBzZXJpYWxpemVGZXRjaFBhcmFtZXRlcihib2R5LmV4dGVuc2lvbnMsIFwiRXh0ZW5zaW9ucyBtYXBcIik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHBhcnNlRXJyb3I6IHBhcnNlRXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBhZGRRdWVyeVBhcmFtKFwiZXh0ZW5zaW9uc1wiLCBzZXJpYWxpemVkRXh0ZW5zaW9ucyk7XG4gICAgfVxuICAgIC8vIFJlY29uc3RydWN0IHRoZSBVUkkgd2l0aCBhZGRlZCBxdWVyeSBwYXJhbXMuXG4gICAgLy8gWFhYIFRoaXMgYXNzdW1lcyB0aGF0IHRoZSBVUkkgaXMgd2VsbC1mb3JtZWQgYW5kIHRoYXQgaXQgZG9lc24ndFxuICAgIC8vICAgICBhbHJlYWR5IGNvbnRhaW4gYW55IG9mIHRoZXNlIHF1ZXJ5IHBhcmFtcy4gV2UgY291bGQgaW5zdGVhZCB1c2UgdGhlXG4gICAgLy8gICAgIFVSTCBBUEkgYW5kIHRha2UgYSBwb2x5ZmlsbCAod2hhdHdnLXVybEA2KSBmb3Igb2xkZXIgYnJvd3NlcnMgdGhhdFxuICAgIC8vICAgICBkb24ndCBzdXBwb3J0IFVSTFNlYXJjaFBhcmFtcy4gTm90ZSB0aGF0IHNvbWUgYnJvd3NlcnMgKGFuZFxuICAgIC8vICAgICB2ZXJzaW9ucyBvZiB3aGF0d2ctdXJsKSBzdXBwb3J0IFVSTCBidXQgbm90IFVSTFNlYXJjaFBhcmFtcyFcbiAgICB2YXIgZnJhZ21lbnQgPSBcIlwiLCBwcmVGcmFnbWVudCA9IGNob3NlblVSSTtcbiAgICB2YXIgZnJhZ21lbnRTdGFydCA9IGNob3NlblVSSS5pbmRleE9mKFwiI1wiKTtcbiAgICBpZiAoZnJhZ21lbnRTdGFydCAhPT0gLTEpIHtcbiAgICAgICAgZnJhZ21lbnQgPSBjaG9zZW5VUkkuc3Vic3RyKGZyYWdtZW50U3RhcnQpO1xuICAgICAgICBwcmVGcmFnbWVudCA9IGNob3NlblVSSS5zdWJzdHIoMCwgZnJhZ21lbnRTdGFydCk7XG4gICAgfVxuICAgIHZhciBxdWVyeVBhcmFtc1ByZWZpeCA9IHByZUZyYWdtZW50LmluZGV4T2YoXCI/XCIpID09PSAtMSA/IFwiP1wiIDogXCImXCI7XG4gICAgdmFyIG5ld1VSSSA9IHByZUZyYWdtZW50ICsgcXVlcnlQYXJhbXNQcmVmaXggKyBxdWVyeVBhcmFtcy5qb2luKFwiJlwiKSArIGZyYWdtZW50O1xuICAgIHJldHVybiB7IG5ld1VSSTogbmV3VVJJIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXdyaXRlVVJJRm9yR0VULmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3NpZ24sIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBcG9sbG9MaW5rIH0gZnJvbSBcIi4uL2NvcmUvaW5kZXguanNcIjtcbmltcG9ydCB7IE9ic2VydmFibGUsIGhhc0RpcmVjdGl2ZXMgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBzZXJpYWxpemVGZXRjaFBhcmFtZXRlciB9IGZyb20gXCIuL3NlcmlhbGl6ZUZldGNoUGFyYW1ldGVyLmpzXCI7XG5pbXBvcnQgeyBzZWxlY3RVUkkgfSBmcm9tIFwiLi9zZWxlY3RVUkkuanNcIjtcbmltcG9ydCB7IGhhbmRsZUVycm9yLCByZWFkTXVsdGlwYXJ0Qm9keSwgcGFyc2VBbmRDaGVja0h0dHBSZXNwb25zZSwgfSBmcm9tIFwiLi9wYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyBjaGVja0ZldGNoZXIgfSBmcm9tIFwiLi9jaGVja0ZldGNoZXIuanNcIjtcbmltcG9ydCB7IHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keUludGVybmFsLCBkZWZhdWx0UHJpbnRlciwgZmFsbGJhY2tIdHRwQ29uZmlnLCB9IGZyb20gXCIuL3NlbGVjdEh0dHBPcHRpb25zQW5kQm9keS5qc1wiO1xuaW1wb3J0IHsgcmV3cml0ZVVSSUZvckdFVCB9IGZyb20gXCIuL3Jld3JpdGVVUklGb3JHRVQuanNcIjtcbmltcG9ydCB7IGZyb21FcnJvciwgZmlsdGVyT3BlcmF0aW9uVmFyaWFibGVzIH0gZnJvbSBcIi4uL3V0aWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBtYXliZSwgZ2V0TWFpbkRlZmluaXRpb24sIHJlbW92ZUNsaWVudFNldHNGcm9tRG9jdW1lbnQsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xudmFyIGJhY2t1cEZldGNoID0gbWF5YmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gZmV0Y2g7IH0pO1xuZXhwb3J0IHZhciBjcmVhdGVIdHRwTGluayA9IGZ1bmN0aW9uIChsaW5rT3B0aW9ucykge1xuICAgIGlmIChsaW5rT3B0aW9ucyA9PT0gdm9pZCAwKSB7IGxpbmtPcHRpb25zID0ge307IH1cbiAgICB2YXIgX2EgPSBsaW5rT3B0aW9ucy51cmksIHVyaSA9IF9hID09PSB2b2lkIDAgPyBcIi9ncmFwaHFsXCIgOiBfYSwgXG4gICAgLy8gdXNlIGRlZmF1bHQgZ2xvYmFsIGZldGNoIGlmIG5vdGhpbmcgcGFzc2VkIGluXG4gICAgcHJlZmVycmVkRmV0Y2ggPSBsaW5rT3B0aW9ucy5mZXRjaCwgX2IgPSBsaW5rT3B0aW9ucy5wcmludCwgcHJpbnQgPSBfYiA9PT0gdm9pZCAwID8gZGVmYXVsdFByaW50ZXIgOiBfYiwgaW5jbHVkZUV4dGVuc2lvbnMgPSBsaW5rT3B0aW9ucy5pbmNsdWRlRXh0ZW5zaW9ucywgcHJlc2VydmVIZWFkZXJDYXNlID0gbGlua09wdGlvbnMucHJlc2VydmVIZWFkZXJDYXNlLCB1c2VHRVRGb3JRdWVyaWVzID0gbGlua09wdGlvbnMudXNlR0VURm9yUXVlcmllcywgX2MgPSBsaW5rT3B0aW9ucy5pbmNsdWRlVW51c2VkVmFyaWFibGVzLCBpbmNsdWRlVW51c2VkVmFyaWFibGVzID0gX2MgPT09IHZvaWQgMCA/IGZhbHNlIDogX2MsIHJlcXVlc3RPcHRpb25zID0gX19yZXN0KGxpbmtPcHRpb25zLCBbXCJ1cmlcIiwgXCJmZXRjaFwiLCBcInByaW50XCIsIFwiaW5jbHVkZUV4dGVuc2lvbnNcIiwgXCJwcmVzZXJ2ZUhlYWRlckNhc2VcIiwgXCJ1c2VHRVRGb3JRdWVyaWVzXCIsIFwiaW5jbHVkZVVudXNlZFZhcmlhYmxlc1wiXSk7XG4gICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIGF0IGxlYXN0IG9uZSBvZiBwcmVmZXJyZWRGZXRjaCwgd2luZG93LmZldGNoLCBvciBiYWNrdXBGZXRjaCBpc1xuICAgICAgICAvLyBkZWZpbmVkLCBzbyByZXF1ZXN0cyB3b24ndCBmYWlsIGF0IHJ1bnRpbWUuXG4gICAgICAgIGNoZWNrRmV0Y2hlcihwcmVmZXJyZWRGZXRjaCB8fCBiYWNrdXBGZXRjaCk7XG4gICAgfVxuICAgIHZhciBsaW5rQ29uZmlnID0ge1xuICAgICAgICBodHRwOiB7IGluY2x1ZGVFeHRlbnNpb25zOiBpbmNsdWRlRXh0ZW5zaW9ucywgcHJlc2VydmVIZWFkZXJDYXNlOiBwcmVzZXJ2ZUhlYWRlckNhc2UgfSxcbiAgICAgICAgb3B0aW9uczogcmVxdWVzdE9wdGlvbnMuZmV0Y2hPcHRpb25zLFxuICAgICAgICBjcmVkZW50aWFsczogcmVxdWVzdE9wdGlvbnMuY3JlZGVudGlhbHMsXG4gICAgICAgIGhlYWRlcnM6IHJlcXVlc3RPcHRpb25zLmhlYWRlcnMsXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IEFwb2xsb0xpbmsoZnVuY3Rpb24gKG9wZXJhdGlvbikge1xuICAgICAgICB2YXIgY2hvc2VuVVJJID0gc2VsZWN0VVJJKG9wZXJhdGlvbiwgdXJpKTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBvcGVyYXRpb24uZ2V0Q29udGV4dCgpO1xuICAgICAgICAvLyBgYXBvbGxvZ3JhcGhxbC1jbGllbnQtKmAgaGVhZGVycyBhcmUgYXV0b21hdGljYWxseSBzZXQgaWYgYVxuICAgICAgICAvLyBgY2xpZW50QXdhcmVuZXNzYCBvYmplY3QgaXMgZm91bmQgaW4gdGhlIGNvbnRleHQuIFRoZXNlIGhlYWRlcnMgYXJlXG4gICAgICAgIC8vIHNldCBmaXJzdCwgZm9sbG93ZWQgYnkgdGhlIHJlc3Qgb2YgdGhlIGhlYWRlcnMgcHVsbGVkIGZyb21cbiAgICAgICAgLy8gYGNvbnRleHQuaGVhZGVyc2AuIElmIGRlc2lyZWQsIGBhcG9sbG9ncmFwaHFsLWNsaWVudC0qYCBoZWFkZXJzIHNldCBieVxuICAgICAgICAvLyB0aGUgYGNsaWVudEF3YXJlbmVzc2Agb2JqZWN0IGNhbiBiZSBvdmVycmlkZGVuIGJ5XG4gICAgICAgIC8vIGBhcG9sbG9ncmFwaHFsLWNsaWVudC0qYCBoZWFkZXJzIHNldCBpbiBgY29udGV4dC5oZWFkZXJzYC5cbiAgICAgICAgdmFyIGNsaWVudEF3YXJlbmVzc0hlYWRlcnMgPSB7fTtcbiAgICAgICAgaWYgKGNvbnRleHQuY2xpZW50QXdhcmVuZXNzKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBjb250ZXh0LmNsaWVudEF3YXJlbmVzcywgbmFtZV8xID0gX2EubmFtZSwgdmVyc2lvbiA9IF9hLnZlcnNpb247XG4gICAgICAgICAgICBpZiAobmFtZV8xKSB7XG4gICAgICAgICAgICAgICAgY2xpZW50QXdhcmVuZXNzSGVhZGVyc1tcImFwb2xsb2dyYXBocWwtY2xpZW50LW5hbWVcIl0gPSBuYW1lXzE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGNsaWVudEF3YXJlbmVzc0hlYWRlcnNbXCJhcG9sbG9ncmFwaHFsLWNsaWVudC12ZXJzaW9uXCJdID0gdmVyc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY29udGV4dEhlYWRlcnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY2xpZW50QXdhcmVuZXNzSGVhZGVycyksIGNvbnRleHQuaGVhZGVycyk7XG4gICAgICAgIHZhciBjb250ZXh0Q29uZmlnID0ge1xuICAgICAgICAgICAgaHR0cDogY29udGV4dC5odHRwLFxuICAgICAgICAgICAgb3B0aW9uczogY29udGV4dC5mZXRjaE9wdGlvbnMsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogY29udGV4dC5jcmVkZW50aWFscyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGNvbnRleHRIZWFkZXJzLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoaGFzRGlyZWN0aXZlcyhbXCJjbGllbnRcIl0sIG9wZXJhdGlvbi5xdWVyeSkpIHtcbiAgICAgICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2Fybig1Mik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtZWRRdWVyeSA9IHJlbW92ZUNsaWVudFNldHNGcm9tRG9jdW1lbnQob3BlcmF0aW9uLnF1ZXJ5KTtcbiAgICAgICAgICAgIGlmICghdHJhbnNmb3JtZWRRdWVyeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tRXJyb3IobmV3IEVycm9yKFwiSHR0cExpbms6IFRyeWluZyB0byBzZW5kIGEgY2xpZW50LW9ubHkgcXVlcnkgdG8gdGhlIHNlcnZlci4gVG8gc2VuZCB0byB0aGUgc2VydmVyLCBlbnN1cmUgYSBub24tY2xpZW50IGZpZWxkIGlzIGFkZGVkIHRvIHRoZSBxdWVyeSBvciBzZXQgdGhlIGB0cmFuc2Zvcm1PcHRpb25zLnJlbW92ZUNsaWVudEZpZWxkc2Agb3B0aW9uIHRvIGB0cnVlYC5cIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3BlcmF0aW9uLnF1ZXJ5ID0gdHJhbnNmb3JtZWRRdWVyeTtcbiAgICAgICAgfVxuICAgICAgICAvL3VzZXMgZmFsbGJhY2ssIGxpbmssIGFuZCB0aGVuIGNvbnRleHQgdG8gYnVpbGQgb3B0aW9uc1xuICAgICAgICB2YXIgX2IgPSBzZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHlJbnRlcm5hbChvcGVyYXRpb24sIHByaW50LCBmYWxsYmFja0h0dHBDb25maWcsIGxpbmtDb25maWcsIGNvbnRleHRDb25maWcpLCBvcHRpb25zID0gX2Iub3B0aW9ucywgYm9keSA9IF9iLmJvZHk7XG4gICAgICAgIGlmIChib2R5LnZhcmlhYmxlcyAmJiAhaW5jbHVkZVVudXNlZFZhcmlhYmxlcykge1xuICAgICAgICAgICAgYm9keS52YXJpYWJsZXMgPSBmaWx0ZXJPcGVyYXRpb25WYXJpYWJsZXMoYm9keS52YXJpYWJsZXMsIG9wZXJhdGlvbi5xdWVyeSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbnRyb2xsZXI7XG4gICAgICAgIGlmICghb3B0aW9ucy5zaWduYWwgJiYgdHlwZW9mIEFib3J0Q29udHJvbGxlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsID0gY29udHJvbGxlci5zaWduYWw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgcmVxdWVzdGVkLCBzZXQgbWV0aG9kIHRvIEdFVCBpZiB0aGVyZSBhcmUgbm8gbXV0YXRpb25zLlxuICAgICAgICB2YXIgZGVmaW5pdGlvbklzTXV0YXRpb24gPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQua2luZCA9PT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIgJiYgZC5vcGVyYXRpb24gPT09IFwibXV0YXRpb25cIjtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGRlZmluaXRpb25Jc1N1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICByZXR1cm4gZC5raW5kID09PSBcIk9wZXJhdGlvbkRlZmluaXRpb25cIiAmJiBkLm9wZXJhdGlvbiA9PT0gXCJzdWJzY3JpcHRpb25cIjtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGlzU3Vic2NyaXB0aW9uID0gZGVmaW5pdGlvbklzU3Vic2NyaXB0aW9uKGdldE1haW5EZWZpbml0aW9uKG9wZXJhdGlvbi5xdWVyeSkpO1xuICAgICAgICAvLyBkb2VzIG5vdCBtYXRjaCBjdXN0b20gZGlyZWN0aXZlcyBiZWdpbm5pbmcgd2l0aCBAZGVmZXJcbiAgICAgICAgdmFyIGhhc0RlZmVyID0gaGFzRGlyZWN0aXZlcyhbXCJkZWZlclwiXSwgb3BlcmF0aW9uLnF1ZXJ5KTtcbiAgICAgICAgaWYgKHVzZUdFVEZvclF1ZXJpZXMgJiZcbiAgICAgICAgICAgICFvcGVyYXRpb24ucXVlcnkuZGVmaW5pdGlvbnMuc29tZShkZWZpbml0aW9uSXNNdXRhdGlvbikpIHtcbiAgICAgICAgICAgIG9wdGlvbnMubWV0aG9kID0gXCJHRVRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRGVmZXIgfHwgaXNTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgICAgIHZhciBhY2NlcHRIZWFkZXIgPSBcIm11bHRpcGFydC9taXhlZDtcIjtcbiAgICAgICAgICAgIC8vIE9taXQgZGVmZXItc3BlY2lmaWMgaGVhZGVycyBpZiB0aGUgdXNlciBhdHRlbXB0cyB0byBkZWZlciBhIHNlbGVjdGlvblxuICAgICAgICAgICAgLy8gc2V0IG9uIGEgc3Vic2NyaXB0aW9uIGFuZCBsb2cgYSB3YXJuaW5nLlxuICAgICAgICAgICAgaWYgKGlzU3Vic2NyaXB0aW9uICYmIGhhc0RlZmVyKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2Fybig1Myk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICBhY2NlcHRIZWFkZXIgKz1cbiAgICAgICAgICAgICAgICAgICAgXCJib3VuZGFyeT1ncmFwaHFsO3N1YnNjcmlwdGlvblNwZWM9MS4wLGFwcGxpY2F0aW9uL2pzb25cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhhc0RlZmVyKSB7XG4gICAgICAgICAgICAgICAgYWNjZXB0SGVhZGVyICs9IFwiZGVmZXJTcGVjPTIwMjIwODI0LGFwcGxpY2F0aW9uL2pzb25cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVycy5hY2NlcHQgPSBhY2NlcHRIZWFkZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubWV0aG9kID09PSBcIkdFVFwiKSB7XG4gICAgICAgICAgICB2YXIgX2MgPSByZXdyaXRlVVJJRm9yR0VUKGNob3NlblVSSSwgYm9keSksIG5ld1VSSSA9IF9jLm5ld1VSSSwgcGFyc2VFcnJvciA9IF9jLnBhcnNlRXJyb3I7XG4gICAgICAgICAgICBpZiAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tRXJyb3IocGFyc2VFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaG9zZW5VUkkgPSBuZXdVUkk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuYm9keSA9IHNlcmlhbGl6ZUZldGNoUGFyYW1ldGVyKGJvZHksIFwiUGF5bG9hZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb21FcnJvcihwYXJzZUVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICAvLyBQcmVmZXIgbGlua09wdGlvbnMuZmV0Y2ggKHByZWZlcnJlZEZldGNoKSBpZiBwcm92aWRlZCwgYW5kIG90aGVyd2lzZVxuICAgICAgICAgICAgLy8gZmFsbCBiYWNrIHRvIHRoZSAqY3VycmVudCogZ2xvYmFsIHdpbmRvdy5mZXRjaCBmdW5jdGlvbiAoc2VlIGlzc3VlXG4gICAgICAgICAgICAvLyAjNzgzMiksIG9yIChpZiBhbGwgZWxzZSBmYWlscykgdGhlIGJhY2t1cEZldGNoIGZ1bmN0aW9uIHdlIHNhdmVkIHdoZW5cbiAgICAgICAgICAgIC8vIHRoaXMgbW9kdWxlIHdhcyBmaXJzdCBldmFsdWF0ZWQuIFRoaXMgbGFzdCBvcHRpb24gcHJvdGVjdHMgYWdhaW5zdCB0aGVcbiAgICAgICAgICAgIC8vIHJlbW92YWwgb2Ygd2luZG93LmZldGNoLCB3aGljaCBpcyB1bmxpa2VseSBidXQgbm90IGltcG9zc2libGUuXG4gICAgICAgICAgICB2YXIgY3VycmVudEZldGNoID0gcHJlZmVycmVkRmV0Y2ggfHwgbWF5YmUoZnVuY3Rpb24gKCkgeyByZXR1cm4gZmV0Y2g7IH0pIHx8IGJhY2t1cEZldGNoO1xuICAgICAgICAgICAgdmFyIG9ic2VydmVyTmV4dCA9IG9ic2VydmVyLm5leHQuYmluZChvYnNlcnZlcik7XG4gICAgICAgICAgICBjdXJyZW50RmV0Y2goY2hvc2VuVVJJLCBvcHRpb25zKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBvcGVyYXRpb24uc2V0Q29udGV4dCh7IHJlc3BvbnNlOiByZXNwb25zZSB9KTtcbiAgICAgICAgICAgICAgICB2YXIgY3R5cGUgPSAoX2EgPSByZXNwb25zZS5oZWFkZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0KFwiY29udGVudC10eXBlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChjdHlwZSAhPT0gbnVsbCAmJiAvXm11bHRpcGFydFxcL21peGVkL2kudGVzdChjdHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRNdWx0aXBhcnRCb2R5KHJlc3BvbnNlLCBvYnNlcnZlck5leHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2Uob3BlcmF0aW9uKShyZXNwb25zZSkudGhlbihvYnNlcnZlck5leHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgb2JzZXJ2ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIFhYWCBzdXBwb3J0IGNhbmNlbGluZyB0aGlzIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE3LzA5L2Fib3J0YWJsZS1mZXRjaFxuICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyKVxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVIdHRwTGluay5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQXBvbGxvTGluayB9IGZyb20gXCIuLi9jb3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVIdHRwTGluayB9IGZyb20gXCIuL2NyZWF0ZUh0dHBMaW5rLmpzXCI7XG52YXIgSHR0cExpbmsgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEh0dHBMaW5rLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEh0dHBMaW5rKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY3JlYXRlSHR0cExpbmsob3B0aW9ucykucmVxdWVzdCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEh0dHBMaW5rO1xufShBcG9sbG9MaW5rKSk7XG5leHBvcnQgeyBIdHRwTGluayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SHR0cExpbmsuanMubWFwIiwKICAgICJjb25zdCB7IHRvU3RyaW5nLCBoYXNPd25Qcm9wZXJ0eSB9ID0gT2JqZWN0LnByb3RvdHlwZTtcbmNvbnN0IGZuVG9TdHIgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5jb25zdCBwcmV2aW91c0NvbXBhcmlzb25zID0gbmV3IE1hcCgpO1xuLyoqXG4gKiBQZXJmb3JtcyBhIGRlZXAgZXF1YWxpdHkgY2hlY2sgb24gdHdvIEphdmFTY3JpcHQgdmFsdWVzLCB0b2xlcmF0aW5nIGN5Y2xlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFsKGEsIGIpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gY2hlY2soYSwgYik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBwcmV2aW91c0NvbXBhcmlzb25zLmNsZWFyKCk7XG4gICAgfVxufVxuLy8gQWxsb3cgZGVmYXVsdCBpbXBvcnRzIGFzIHdlbGwuXG5leHBvcnQgZGVmYXVsdCBlcXVhbDtcbmZ1bmN0aW9uIGNoZWNrKGEsIGIpIHtcbiAgICAvLyBJZiB0aGUgdHdvIHZhbHVlcyBhcmUgc3RyaWN0bHkgZXF1YWwsIG91ciBqb2IgaXMgZWFzeS5cbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyByZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bnRpbWUgdHlwZSBvZlxuICAgIC8vIHRoZSBnaXZlbiB2YWx1ZSB0aGF0IGlzIGNvbnNpZGVyYWJseSBtb3JlIHByZWNpc2UgdGhhbiB0eXBlb2YuXG4gICAgY29uc3QgYVRhZyA9IHRvU3RyaW5nLmNhbGwoYSk7XG4gICAgY29uc3QgYlRhZyA9IHRvU3RyaW5nLmNhbGwoYik7XG4gICAgLy8gSWYgdGhlIHJ1bnRpbWUgdHlwZXMgb2YgYSBhbmQgYiBhcmUgZGlmZmVyZW50LCB0aGV5IGNvdWxkIG1heWJlIGJlIGVxdWFsXG4gICAgLy8gdW5kZXIgc29tZSBpbnRlcnByZXRhdGlvbiBvZiBlcXVhbGl0eSwgYnV0IGZvciBzaW1wbGljaXR5IGFuZCBwZXJmb3JtYW5jZVxuICAgIC8vIHdlIGp1c3QgcmV0dXJuIGZhbHNlIGluc3RlYWQuXG4gICAgaWYgKGFUYWcgIT09IGJUYWcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBzd2l0Y2ggKGFUYWcpIHtcbiAgICAgICAgY2FzZSAnW29iamVjdCBBcnJheV0nOlxuICAgICAgICAgICAgLy8gQXJyYXlzIGFyZSBhIGxvdCBsaWtlIG90aGVyIG9iamVjdHMsIGJ1dCB3ZSBjYW4gY2hlYXBseSBjb21wYXJlIHRoZWlyXG4gICAgICAgICAgICAvLyBsZW5ndGhzIGFzIGEgc2hvcnQtY3V0IGJlZm9yZSBjb21wYXJpbmcgdGhlaXIgZWxlbWVudHMuXG4gICAgICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIG9iamVjdCBjYXNlLi4uXG4gICAgICAgIGNhc2UgJ1tvYmplY3QgT2JqZWN0XSc6IHtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c2x5Q29tcGFyZWQoYSwgYikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBjb25zdCBhS2V5cyA9IGRlZmluZWRLZXlzKGEpO1xuICAgICAgICAgICAgY29uc3QgYktleXMgPSBkZWZpbmVkS2V5cyhiKTtcbiAgICAgICAgICAgIC8vIElmIGBhYCBhbmQgYGJgIGhhdmUgYSBkaWZmZXJlbnQgbnVtYmVyIG9mIGVudW1lcmFibGUga2V5cywgdGhleVxuICAgICAgICAgICAgLy8gbXVzdCBiZSBkaWZmZXJlbnQuXG4gICAgICAgICAgICBjb25zdCBrZXlDb3VudCA9IGFLZXlzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChrZXlDb3VudCAhPT0gYktleXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIC8vIE5vdyBtYWtlIHN1cmUgdGhleSBoYXZlIHRoZSBzYW1lIGtleXMuXG4gICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGtleUNvdW50OyArK2spIHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwoYiwgYUtleXNba10pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaW5hbGx5LCBjaGVjayBkZWVwIGVxdWFsaXR5IG9mIGFsbCBjaGlsZCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBrZXlDb3VudDsgKytrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYUtleXNba107XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVjayhhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgRXJyb3JdJzpcbiAgICAgICAgICAgIHJldHVybiBhLm5hbWUgPT09IGIubmFtZSAmJiBhLm1lc3NhZ2UgPT09IGIubWVzc2FnZTtcbiAgICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgICAgICAgIC8vIEhhbmRsZSBOYU4sIHdoaWNoIGlzICE9PSBpdHNlbGYuXG4gICAgICAgICAgICBpZiAoYSAhPT0gYSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYiAhPT0gYjtcbiAgICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIHNoYXJlZCArYSA9PT0gK2IgY2FzZS4uLlxuICAgICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICAgICAgICByZXR1cm4gK2EgPT09ICtiO1xuICAgICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuICAgICAgICAgICAgcmV0dXJuIGEgPT0gYCR7Yn1gO1xuICAgICAgICBjYXNlICdbb2JqZWN0IE1hcF0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IFNldF0nOiB7XG4gICAgICAgICAgICBpZiAoYS5zaXplICE9PSBiLnNpemUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzbHlDb21wYXJlZChhLCBiKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGFJdGVyYXRvciA9IGEuZW50cmllcygpO1xuICAgICAgICAgICAgY29uc3QgaXNNYXAgPSBhVGFnID09PSAnW29iamVjdCBNYXBdJztcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IGFJdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8uZG9uZSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gSWYgYSBpbnN0YW5jZW9mIFNldCwgYVZhbHVlID09PSBhS2V5LlxuICAgICAgICAgICAgICAgIGNvbnN0IFthS2V5LCBhVmFsdWVdID0gaW5mby52YWx1ZTtcbiAgICAgICAgICAgICAgICAvLyBTbyB0aGlzIHdvcmtzIHRoZSBzYW1lIHdheSBmb3IgYm90aCBTZXQgYW5kIE1hcC5cbiAgICAgICAgICAgICAgICBpZiAoIWIuaGFzKGFLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgd2UgY2FyZSBhYm91dCBkZWVwIGVxdWFsaXR5IG9mIHZhbHVlcyBvbmx5IHdoZW4gZGVhbGluZ1xuICAgICAgICAgICAgICAgIC8vIHdpdGggTWFwIHN0cnVjdHVyZXMuXG4gICAgICAgICAgICAgICAgaWYgKGlzTWFwICYmICFjaGVjayhhVmFsdWUsIGIuZ2V0KGFLZXkpKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnW29iamVjdCBVaW50MTZBcnJheV0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IFVpbnQ4QXJyYXldJzogLy8gQnVmZmVyLCBpbiBOb2RlLmpzLlxuICAgICAgICBjYXNlICdbb2JqZWN0IFVpbnQzMkFycmF5XSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgSW50MzJBcnJheV0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IEludDhBcnJheV0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IEludDE2QXJyYXldJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nOlxuICAgICAgICAgICAgLy8gRGF0YVZpZXcgZG9lc24ndCBuZWVkIHRoZXNlIGNvbnZlcnNpb25zLCBidXQgdGhlIGVxdWFsaXR5IGNoZWNrIGlzXG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgdGhlIHNhbWUuXG4gICAgICAgICAgICBhID0gbmV3IFVpbnQ4QXJyYXkoYSk7XG4gICAgICAgICAgICBiID0gbmV3IFVpbnQ4QXJyYXkoYik7XG4gICAgICAgIC8vIEZhbGwgdGhyb3VnaC4uLlxuICAgICAgICBjYXNlICdbb2JqZWN0IERhdGFWaWV3XSc6IHtcbiAgICAgICAgICAgIGxldCBsZW4gPSBhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuID09PSBiLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAobGVuLS0gJiYgYVtsZW5dID09PSBiW2xlbl0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCBsb29waW5nIGFzIGxvbmcgYXMgdGhlIGJ5dGVzIGFyZSBlcXVhbC5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbGVuID09PSAtMTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdbb2JqZWN0IEFzeW5jRnVuY3Rpb25dJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IEFzeW5jR2VuZXJhdG9yRnVuY3Rpb25dJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBGdW5jdGlvbl0nOiB7XG4gICAgICAgICAgICBjb25zdCBhQ29kZSA9IGZuVG9TdHIuY2FsbChhKTtcbiAgICAgICAgICAgIGlmIChhQ29kZSAhPT0gZm5Ub1N0ci5jYWxsKGIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2UgY29uc2lkZXIgbm9uLW5hdGl2ZSBmdW5jdGlvbnMgZXF1YWwgaWYgdGhleSBoYXZlIHRoZSBzYW1lIGNvZGVcbiAgICAgICAgICAgIC8vIChuYXRpdmUgZnVuY3Rpb25zIHJlcXVpcmUgPT09IGJlY2F1c2UgdGhlaXIgY29kZSBpcyBjZW5zb3JlZCkuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBiZWhhdmlvciBpcyBub3QgZW50aXJlbHkgc291bmQsIHNpbmNlICE9PSBmdW5jdGlvblxuICAgICAgICAgICAgLy8gb2JqZWN0cyB3aXRoIHRoZSBzYW1lIGNvZGUgY2FuIGJlaGF2ZSBkaWZmZXJlbnRseSBkZXBlbmRpbmcgb25cbiAgICAgICAgICAgIC8vIHRoZWlyIGNsb3N1cmUgc2NvcGUuIEhvd2V2ZXIsIGFueSBmdW5jdGlvbiBjYW4gYmVoYXZlIGRpZmZlcmVudGx5XG4gICAgICAgICAgICAvLyBkZXBlbmRpbmcgb24gdGhlIHZhbHVlcyBvZiBpdHMgaW5wdXQgYXJndW1lbnRzIChpbmNsdWRpbmcgdGhpcylcbiAgICAgICAgICAgIC8vIGFuZCBpdHMgY2FsbGluZyBjb250ZXh0IChpbmNsdWRpbmcgaXRzIGNsb3N1cmUgc2NvcGUpLCBldmVuXG4gICAgICAgICAgICAvLyB0aG91Z2ggdGhlIGZ1bmN0aW9uIG9iamVjdCBpcyA9PT0gdG8gaXRzZWxmOyBhbmQgaXQgaXMgZW50aXJlbHlcbiAgICAgICAgICAgIC8vIHBvc3NpYmxlIGZvciBmdW5jdGlvbnMgdGhhdCBhcmUgbm90ID09PSB0byBiZWhhdmUgZXhhY3RseSB0aGVcbiAgICAgICAgICAgIC8vIHNhbWUgdW5kZXIgYWxsIGNvbmNlaXZhYmxlIGNpcmN1bXN0YW5jZXMuIEJlY2F1c2Ugbm9uZSBvZiB0aGVzZVxuICAgICAgICAgICAgLy8gZmFjdG9ycyBhcmUgc3RhdGljYWxseSBkZWNpZGFibGUgaW4gSmF2YVNjcmlwdCwgSlMgZnVuY3Rpb25cbiAgICAgICAgICAgIC8vIGVxdWFsaXR5IGlzIG5vdCB3ZWxsLWRlZmluZWQuIFRoaXMgYW1iaWd1aXR5IGFsbG93cyB1cyB0b1xuICAgICAgICAgICAgLy8gY29uc2lkZXIgdGhlIGJlc3QgcG9zc2libGUgaGV1cmlzdGljIGFtb25nIHZhcmlvdXMgaW1wZXJmZWN0XG4gICAgICAgICAgICAvLyBvcHRpb25zLCBhbmQgZXF1YXRpbmcgbm9uLW5hdGl2ZSBmdW5jdGlvbnMgdGhhdCBoYXZlIHRoZSBzYW1lXG4gICAgICAgICAgICAvLyBjb2RlIGhhcyBlbm9ybW91cyBwcmFjdGljYWwgYmVuZWZpdHMsIHN1Y2ggYXMgd2hlbiBjb21wYXJpbmdcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9ucyB0aGF0IGFyZSByZXBlYXRlZGx5IHBhc3NlZCBhcyBmcmVzaCBmdW5jdGlvblxuICAgICAgICAgICAgLy8gZXhwcmVzc2lvbnMgd2l0aGluIG9iamVjdHMgdGhhdCBhcmUgb3RoZXJ3aXNlIGRlZXBseSBlcXVhbC4gU2luY2VcbiAgICAgICAgICAgIC8vIGFueSBmdW5jdGlvbiBjcmVhdGVkIGZyb20gdGhlIHNhbWUgc3ludGFjdGljIGV4cHJlc3Npb24gKGluIHRoZVxuICAgICAgICAgICAgLy8gc2FtZSBjb2RlIGxvY2F0aW9uKSB3aWxsIGFsd2F5cyBzdHJpbmdpZnkgdG8gdGhlIHNhbWUgY29kZVxuICAgICAgICAgICAgLy8gYWNjb3JkaW5nIHRvIGZuVG9TdHIuY2FsbCwgd2UgY2FuIHJlYXNvbmFibHkgZXhwZWN0IHRoZXNlXG4gICAgICAgICAgICAvLyByZXBlYXRlZGx5IHBhc3NlZCBmdW5jdGlvbiBleHByZXNzaW9ucyB0byBoYXZlIHRoZSBzYW1lIGNvZGUsIGFuZFxuICAgICAgICAgICAgLy8gdGh1cyBiZWhhdmUgXCJ0aGUgc2FtZVwiICh3aXRoIGFsbCB0aGUgY2F2ZWF0cyBtZW50aW9uZWQgYWJvdmUpLFxuICAgICAgICAgICAgLy8gZXZlbiB0aG91Z2ggdGhlIHJ1bnRpbWUgZnVuY3Rpb24gb2JqZWN0cyBhcmUgIT09IHRvIG9uZSBhbm90aGVyLlxuICAgICAgICAgICAgcmV0dXJuICFlbmRzV2l0aChhQ29kZSwgbmF0aXZlQ29kZVN1ZmZpeCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlIHRoZSB2YWx1ZXMgYXJlIG5vdCBlcXVhbC5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBkZWZpbmVkS2V5cyhvYmopIHtcbiAgICAvLyBSZW1lbWJlciB0aGF0IHRoZSBzZWNvbmQgYXJndW1lbnQgdG8gQXJyYXkucHJvdG90eXBlLmZpbHRlciB3aWxsIGJlXG4gICAgLy8gdXNlZCBhcyBgdGhpc2Agd2l0aGluIHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5maWx0ZXIoaXNEZWZpbmVkS2V5LCBvYmopO1xufVxuZnVuY3Rpb24gaXNEZWZpbmVkS2V5KGtleSkge1xuICAgIHJldHVybiB0aGlzW2tleV0gIT09IHZvaWQgMDtcbn1cbmNvbnN0IG5hdGl2ZUNvZGVTdWZmaXggPSBcInsgW25hdGl2ZSBjb2RlXSB9XCI7XG5mdW5jdGlvbiBlbmRzV2l0aChmdWxsLCBzdWZmaXgpIHtcbiAgICBjb25zdCBmcm9tSW5kZXggPSBmdWxsLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGg7XG4gICAgcmV0dXJuIGZyb21JbmRleCA+PSAwICYmXG4gICAgICAgIGZ1bGwuaW5kZXhPZihzdWZmaXgsIGZyb21JbmRleCkgPT09IGZyb21JbmRleDtcbn1cbmZ1bmN0aW9uIHByZXZpb3VzbHlDb21wYXJlZChhLCBiKSB7XG4gICAgLy8gVGhvdWdoIGN5Y2xpYyByZWZlcmVuY2VzIGNhbiBtYWtlIGFuIG9iamVjdCBncmFwaCBhcHBlYXIgaW5maW5pdGUgZnJvbSB0aGVcbiAgICAvLyBwZXJzcGVjdGl2ZSBvZiBhIGRlcHRoLWZpcnN0IHRyYXZlcnNhbCwgdGhlIGdyYXBoIHN0aWxsIGNvbnRhaW5zIGEgZmluaXRlXG4gICAgLy8gbnVtYmVyIG9mIGRpc3RpbmN0IG9iamVjdCByZWZlcmVuY2VzLiBXZSB1c2UgdGhlIHByZXZpb3VzQ29tcGFyaXNvbnMgY2FjaGVcbiAgICAvLyB0byBhdm9pZCBjb21wYXJpbmcgdGhlIHNhbWUgcGFpciBvZiBvYmplY3QgcmVmZXJlbmNlcyBtb3JlIHRoYW4gb25jZSwgd2hpY2hcbiAgICAvLyBndWFyYW50ZWVzIHRlcm1pbmF0aW9uIChldmVuIGlmIHdlIGVuZCB1cCBjb21wYXJpbmcgZXZlcnkgb2JqZWN0IGluIG9uZVxuICAgIC8vIGdyYXBoIHRvIGV2ZXJ5IG9iamVjdCBpbiB0aGUgb3RoZXIgZ3JhcGgsIHdoaWNoIGlzIGV4dHJlbWVseSB1bmxpa2VseSksXG4gICAgLy8gd2hpbGUgc3RpbGwgYWxsb3dpbmcgd2VpcmQgaXNvbW9ycGhpYyBzdHJ1Y3R1cmVzIChsaWtlIHJpbmdzIHdpdGggZGlmZmVyZW50XG4gICAgLy8gbGVuZ3RocykgYSBjaGFuY2UgdG8gcGFzcyB0aGUgZXF1YWxpdHkgdGVzdC5cbiAgICBsZXQgYlNldCA9IHByZXZpb3VzQ29tcGFyaXNvbnMuZ2V0KGEpO1xuICAgIGlmIChiU2V0KSB7XG4gICAgICAgIC8vIFJldHVybiB0cnVlIGhlcmUgYmVjYXVzZSB3ZSBjYW4gYmUgc3VyZSBmYWxzZSB3aWxsIGJlIHJldHVybmVkIHNvbWV3aGVyZVxuICAgICAgICAvLyBlbHNlIGlmIHRoZSBvYmplY3RzIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgaWYgKGJTZXQuaGFzKGIpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcmV2aW91c0NvbXBhcmlzb25zLnNldChhLCBiU2V0ID0gbmV3IFNldCk7XG4gICAgfVxuICAgIGJTZXQuYWRkKGIpO1xuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19yZXN0IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgZXF1YWwgZnJvbSBcIkB3cnkvZXF1YWxpdHlcIjtcbmltcG9ydCB7IGNyZWF0ZUZyYWdtZW50TWFwLCBnZXRGcmFnbWVudERlZmluaXRpb25zLCBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24sIGdldE1haW5EZWZpbml0aW9uLCBpc0ZpZWxkLCByZXN1bHRLZXlOYW1lRnJvbUZpZWxkLCBzaG91bGRJbmNsdWRlLCB9IGZyb20gXCIuLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbi8vIFJldHVybnMgdHJ1ZSBpZiBhUmVzdWx0IGFuZCBiUmVzdWx0IGFyZSBkZWVwbHkgZXF1YWwgYWNjb3JkaW5nIHRvIHRoZSBmaWVsZHNcbi8vIHNlbGVjdGVkIGJ5IHRoZSBnaXZlbiBxdWVyeSwgaWdub3JpbmcgYW55IGZpZWxkcyBtYXJrZWQgYXMgQG5vbnJlYWN0aXZlLlxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFsQnlRdWVyeShxdWVyeSwgX2EsIF9iLCB2YXJpYWJsZXMpIHtcbiAgICB2YXIgYURhdGEgPSBfYS5kYXRhLCBhUmVzdCA9IF9fcmVzdChfYSwgW1wiZGF0YVwiXSk7XG4gICAgdmFyIGJEYXRhID0gX2IuZGF0YSwgYlJlc3QgPSBfX3Jlc3QoX2IsIFtcImRhdGFcIl0pO1xuICAgIHJldHVybiAoZXF1YWwoYVJlc3QsIGJSZXN0KSAmJlxuICAgICAgICBlcXVhbEJ5U2VsZWN0aW9uU2V0KGdldE1haW5EZWZpbml0aW9uKHF1ZXJ5KS5zZWxlY3Rpb25TZXQsIGFEYXRhLCBiRGF0YSwge1xuICAgICAgICAgICAgZnJhZ21lbnRNYXA6IGNyZWF0ZUZyYWdtZW50TWFwKGdldEZyYWdtZW50RGVmaW5pdGlvbnMocXVlcnkpKSxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICB9KSk7XG59XG5mdW5jdGlvbiBlcXVhbEJ5U2VsZWN0aW9uU2V0KHNlbGVjdGlvblNldCwgYVJlc3VsdCwgYlJlc3VsdCwgY29udGV4dCkge1xuICAgIGlmIChhUmVzdWx0ID09PSBiUmVzdWx0KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB2YXIgc2VlblNlbGVjdGlvbnMgPSBuZXcgU2V0KCk7XG4gICAgLy8gUmV0dXJuaW5nIHRydWUgZnJvbSB0aGlzIEFycmF5LnByb3RvdHlwZS5ldmVyeSBjYWxsYmFjayBmdW5jdGlvbiBza2lwcyB0aGVcbiAgICAvLyBjdXJyZW50IGZpZWxkL3N1YnRyZWUuIFJldHVybmluZyBmYWxzZSBhYm9ydHMgdGhlIGVudGlyZSB0cmF2ZXJzYWxcbiAgICAvLyBpbW1lZGlhdGVseSwgY2F1c2luZyBlcXVhbEJ5U2VsZWN0aW9uU2V0IHRvIHJldHVybiBmYWxzZS5cbiAgICByZXR1cm4gc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZXZlcnkoZnVuY3Rpb24gKHNlbGVjdGlvbikge1xuICAgICAgICAvLyBBdm9pZCByZS1wcm9jZXNzaW5nIHRoZSBzYW1lIHNlbGVjdGlvbiBhdCB0aGUgc2FtZSBsZXZlbCBvZiByZWN1cnNpb24sIGluXG4gICAgICAgIC8vIGNhc2UgdGhlIHNhbWUgZmllbGQgZ2V0cyBpbmNsdWRlZCB2aWEgbXVsdGlwbGUgaW5kaXJlY3QgZnJhZ21lbnQgc3ByZWFkcy5cbiAgICAgICAgaWYgKHNlZW5TZWxlY3Rpb25zLmhhcyhzZWxlY3Rpb24pKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHNlZW5TZWxlY3Rpb25zLmFkZChzZWxlY3Rpb24pO1xuICAgICAgICAvLyBJZ25vcmUgQHNraXAoaWY6IHRydWUpIGFuZCBAaW5jbHVkZShpZjogZmFsc2UpIGZpZWxkcy5cbiAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlKHNlbGVjdGlvbiwgY29udGV4dC52YXJpYWJsZXMpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vIElmIHRoZSBmaWVsZCBvciAobmFtZWQpIGZyYWdtZW50IHNwcmVhZCBoYXMgYSBAbm9ucmVhY3RpdmUgZGlyZWN0aXZlIG9uXG4gICAgICAgIC8vIGl0LCB3ZSBkb24ndCBjYXJlIGlmIGl0J3MgZGlmZmVyZW50LCBzbyB3ZSBwcmV0ZW5kIGl0J3MgdGhlIHNhbWUuXG4gICAgICAgIGlmIChzZWxlY3Rpb25IYXNOb25yZWFjdGl2ZURpcmVjdGl2ZShzZWxlY3Rpb24pKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRLZXkgPSByZXN1bHRLZXlOYW1lRnJvbUZpZWxkKHNlbGVjdGlvbik7XG4gICAgICAgICAgICB2YXIgYVJlc3VsdENoaWxkID0gYVJlc3VsdCAmJiBhUmVzdWx0W3Jlc3VsdEtleV07XG4gICAgICAgICAgICB2YXIgYlJlc3VsdENoaWxkID0gYlJlc3VsdCAmJiBiUmVzdWx0W3Jlc3VsdEtleV07XG4gICAgICAgICAgICB2YXIgY2hpbGRTZWxlY3Rpb25TZXQgPSBzZWxlY3Rpb24uc2VsZWN0aW9uU2V0O1xuICAgICAgICAgICAgaWYgKCFjaGlsZFNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZXNlIGFyZSBzY2FsYXIgdmFsdWVzLCBzbyB3ZSBjYW4gY29tcGFyZSB0aGVtIHdpdGggZGVlcCBlcXVhbFxuICAgICAgICAgICAgICAgIC8vIHdpdGhvdXQgcmVkb2luZyB0aGUgbWFpbiByZWN1cnNpdmUgd29yay5cbiAgICAgICAgICAgICAgICByZXR1cm4gZXF1YWwoYVJlc3VsdENoaWxkLCBiUmVzdWx0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFDaGlsZElzQXJyYXkgPSBBcnJheS5pc0FycmF5KGFSZXN1bHRDaGlsZCk7XG4gICAgICAgICAgICB2YXIgYkNoaWxkSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoYlJlc3VsdENoaWxkKTtcbiAgICAgICAgICAgIGlmIChhQ2hpbGRJc0FycmF5ICE9PSBiQ2hpbGRJc0FycmF5KVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChhQ2hpbGRJc0FycmF5ICYmIGJDaGlsZElzQXJyYXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoXzEgPSBhUmVzdWx0Q2hpbGQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChiUmVzdWx0Q2hpbGQubGVuZ3RoICE9PSBsZW5ndGhfMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoXzE7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVxdWFsQnlTZWxlY3Rpb25TZXQoY2hpbGRTZWxlY3Rpb25TZXQsIGFSZXN1bHRDaGlsZFtpXSwgYlJlc3VsdENoaWxkW2ldLCBjb250ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVxdWFsQnlTZWxlY3Rpb25TZXQoY2hpbGRTZWxlY3Rpb25TZXQsIGFSZXN1bHRDaGlsZCwgYlJlc3VsdENoaWxkLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbihzZWxlY3Rpb24sIGNvbnRleHQuZnJhZ21lbnRNYXApO1xuICAgICAgICAgICAgaWYgKGZyYWdtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGZyYWdtZW50IG1pZ2h0ID09PSBzZWxlY3Rpb24gaWYgaXQncyBhbiBpbmxpbmUgZnJhZ21lbnQsIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGNvdWxkIGJlICE9PSBpZiBpdCdzIGEgbmFtZWQgZnJhZ21lbnQgLi4uc3ByZWFkLlxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25IYXNOb25yZWFjdGl2ZURpcmVjdGl2ZShmcmFnbWVudCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBlcXVhbEJ5U2VsZWN0aW9uU2V0KGZyYWdtZW50LnNlbGVjdGlvblNldCwgXG4gICAgICAgICAgICAgICAgLy8gTm90aWNlIHRoYXQgd2UgcmV1c2UgdGhlIHNhbWUgYVJlc3VsdCBhbmQgYlJlc3VsdCB2YWx1ZXMgaGVyZSxcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGUgZnJhZ21lbnQgLi4uc3ByZWFkIGRvZXMgbm90IHNwZWNpZnkgYSBmaWVsZCBuYW1lLCBidXRcbiAgICAgICAgICAgICAgICAvLyBjb25zaXN0cyBvZiBtdWx0aXBsZSBmaWVsZHMgKHdpdGhpbiB0aGUgZnJhZ21lbnQncyBzZWxlY3Rpb24gc2V0KVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIGN1cnJlbnQgcmVzdWx0IHZhbHVlKHMpLlxuICAgICAgICAgICAgICAgIGFSZXN1bHQsIGJSZXN1bHQsIGNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5mdW5jdGlvbiBzZWxlY3Rpb25IYXNOb25yZWFjdGl2ZURpcmVjdGl2ZShzZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gKCEhc2VsZWN0aW9uLmRpcmVjdGl2ZXMgJiYgc2VsZWN0aW9uLmRpcmVjdGl2ZXMuc29tZShkaXJlY3RpdmVJc05vbnJlYWN0aXZlKSk7XG59XG5mdW5jdGlvbiBkaXJlY3RpdmVJc05vbnJlYWN0aXZlKGRpcikge1xuICAgIHJldHVybiBkaXIubmFtZS52YWx1ZSA9PT0gXCJub25yZWFjdGl2ZVwiO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXF1YWxCeVF1ZXJ5LmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgU2xvdCB9IGZyb20gXCJvcHRpbWlzbVwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIi4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjYW5Vc2VXZWFrTWFwLCBjYW5Vc2VXZWFrU2V0IH0gZnJvbSBcIi4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuZXhwb3J0IHZhciBNYXBJbXBsID0gY2FuVXNlV2Vha01hcCA/IFdlYWtNYXAgOiBNYXA7XG5leHBvcnQgdmFyIFNldEltcGwgPSBjYW5Vc2VXZWFrU2V0ID8gV2Vha1NldCA6IFNldDtcbi8vIENvbnRleHR1YWwgc2xvdCB0aGF0IGFsbG93cyB1cyB0byBkaXNhYmxlIGFjY2Vzc29yIHdhcm5pbmdzIG9uIGZpZWxkcyB3aGVuIGluXG4vLyBtaWdyYXRlIG1vZGUuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIGRpc2FibGVXYXJuaW5nc1Nsb3QgPSBuZXcgU2xvdCgpO1xudmFyIGlzc3VlZFdhcm5pbmcgPSBmYWxzZTtcbmV4cG9ydCBmdW5jdGlvbiB3YXJuT25JbXByb3BlckNhY2hlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgaWYgKCFpc3N1ZWRXYXJuaW5nKSB7XG4gICAgICAgIGlzc3VlZFdhcm5pbmcgPSB0cnVlO1xuICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKDY0KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLAogICAgImltcG9ydCB7IEtpbmQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgZ2V0RnJhZ21lbnRNYXNrTW9kZSwgbWF5YmVEZWVwRnJlZXplLCByZXN1bHRLZXlOYW1lRnJvbUZpZWxkLCB9IGZyb20gXCIuLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGRpc2FibGVXYXJuaW5nc1Nsb3QgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIi4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWFza0RlZmluaXRpb24oZGF0YSwgc2VsZWN0aW9uU2V0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGRpc2FibGVXYXJuaW5nc1Nsb3Qud2l0aFZhbHVlKHRydWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hc2tlZCA9IG1hc2tTZWxlY3Rpb25TZXQoZGF0YSwgc2VsZWN0aW9uU2V0LCBjb250ZXh0LCBmYWxzZSk7XG4gICAgICAgIGlmIChPYmplY3QuaXNGcm96ZW4oZGF0YSkpIHtcbiAgICAgICAgICAgIG1heWJlRGVlcEZyZWV6ZShtYXNrZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXNrZWQ7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRNdXRhYmxlVGFyZ2V0KGRhdGEsIG11dGFibGVUYXJnZXRzKSB7XG4gICAgaWYgKG11dGFibGVUYXJnZXRzLmhhcyhkYXRhKSkge1xuICAgICAgICByZXR1cm4gbXV0YWJsZVRhcmdldHMuZ2V0KGRhdGEpO1xuICAgIH1cbiAgICB2YXIgbXV0YWJsZVRhcmdldCA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBbXSA6IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgbXV0YWJsZVRhcmdldHMuc2V0KGRhdGEsIG11dGFibGVUYXJnZXQpO1xuICAgIHJldHVybiBtdXRhYmxlVGFyZ2V0O1xufVxuZnVuY3Rpb24gbWFza1NlbGVjdGlvblNldChkYXRhLCBzZWxlY3Rpb25TZXQsIGNvbnRleHQsIG1pZ3JhdGlvbiwgcGF0aCkge1xuICAgIHZhciBfYTtcbiAgICB2YXIga25vd25DaGFuZ2VkID0gY29udGV4dC5rbm93bkNoYW5nZWQ7XG4gICAgdmFyIG1lbW8gPSBnZXRNdXRhYmxlVGFyZ2V0KGRhdGEsIGNvbnRleHQubXV0YWJsZVRhcmdldHMpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2IgPSBBcnJheS5mcm9tKGRhdGEuZW50cmllcygpKTsgX2kgPCBfYi5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBfYyA9IF9iW19pXSwgaW5kZXggPSBfY1swXSwgaXRlbSA9IF9jWzFdO1xuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtZW1vW2luZGV4XSA9IG51bGw7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWFza2VkID0gbWFza1NlbGVjdGlvblNldChpdGVtLCBzZWxlY3Rpb25TZXQsIGNvbnRleHQsIG1pZ3JhdGlvbiwgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSA/IFwiXCIuY29uY2F0KHBhdGggfHwgXCJcIiwgXCJbXCIpLmNvbmNhdChpbmRleCwgXCJdXCIpIDogdm9pZCAwKTtcbiAgICAgICAgICAgIGlmIChrbm93bkNoYW5nZWQuaGFzKG1hc2tlZCkpIHtcbiAgICAgICAgICAgICAgICBrbm93bkNoYW5nZWQuYWRkKG1lbW8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVtb1tpbmRleF0gPSBtYXNrZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGtub3duQ2hhbmdlZC5oYXMobWVtbykgPyBtZW1vIDogZGF0YTtcbiAgICB9XG4gICAgZm9yICh2YXIgX2QgPSAwLCBfZSA9IHNlbGVjdGlvblNldC5zZWxlY3Rpb25zOyBfZCA8IF9lLmxlbmd0aDsgX2QrKykge1xuICAgICAgICB2YXIgc2VsZWN0aW9uID0gX2VbX2RdO1xuICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgICAgIC8vIHdlIGxhdGVyIHdhbnQgdG8gYWRkIGFjZXNzb3Igd2FybmluZ3MgdG8gdGhlIGZpbmFsIHJlc3VsdFxuICAgICAgICAvLyBzbyB3ZSBuZWVkIGEgbmV3IG9iamVjdCB0byBhZGQgdGhlIGFjY2Vzc29yIHdhcm5pbmcgdG9cbiAgICAgICAgaWYgKG1pZ3JhdGlvbikge1xuICAgICAgICAgICAga25vd25DaGFuZ2VkLmFkZChtZW1vKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0aW9uLmtpbmQgPT09IEtpbmQuRklFTEQpIHtcbiAgICAgICAgICAgIHZhciBrZXlOYW1lID0gcmVzdWx0S2V5TmFtZUZyb21GaWVsZChzZWxlY3Rpb24pO1xuICAgICAgICAgICAgdmFyIGNoaWxkU2VsZWN0aW9uU2V0ID0gc2VsZWN0aW9uLnNlbGVjdGlvblNldDtcbiAgICAgICAgICAgIHZhbHVlID0gbWVtb1trZXlOYW1lXSB8fCBkYXRhW2tleU5hbWVdO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGlsZFNlbGVjdGlvblNldCAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBtYXNrZWQgPSBtYXNrU2VsZWN0aW9uU2V0KGRhdGFba2V5TmFtZV0sIGNoaWxkU2VsZWN0aW9uU2V0LCBjb250ZXh0LCBtaWdyYXRpb24sIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgPyBcIlwiLmNvbmNhdChwYXRoIHx8IFwiXCIsIFwiLlwiKS5jb25jYXQoa2V5TmFtZSkgOiB2b2lkIDApO1xuICAgICAgICAgICAgICAgIGlmIChrbm93bkNoYW5nZWQuaGFzKG1hc2tlZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBtYXNrZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICBtZW1vW2tleU5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmIChtaWdyYXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAga2V5TmFtZSAhPT0gXCJfX3R5cGVuYW1lXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gZWl0aGVyIHRoZSBmaWVsZCBpcyBub3QgcHJlc2VudCBpbiB0aGUgbWVtbyBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgLy8gb3IgaXQgaGFzIGEgYGdldGAgZGVzY3JpcHRvciwgbm90IGEgYHZhbHVlYCBkZXNjcmlwdG9yXG4gICAgICAgICAgICAgICAgICAgIC8vID0+IGl0IGlzIGEgd2FybmluZyBhY2Nlc3NvciBhbmQgd2UgY2FuIG92ZXJ3cml0ZSBpdFxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGFub3RoZXIgYWNjZXNzb3JcbiAgICAgICAgICAgICAgICAgICAgISgoX2EgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG1lbW8sIGtleU5hbWUpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZW1vLCBrZXlOYW1lLCBnZXRBY2Nlc3Nvcldhcm5pbmdEZXNjcmlwdG9yKGtleU5hbWUsIHZhbHVlLCBwYXRoIHx8IFwiXCIsIGNvbnRleHQub3BlcmF0aW9uTmFtZSwgY29udGV4dC5vcGVyYXRpb25UeXBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbWVtb1trZXlOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgbWVtb1trZXlOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0aW9uLmtpbmQgPT09IEtpbmQuSU5MSU5FX0ZSQUdNRU5UICYmXG4gICAgICAgICAgICAoIXNlbGVjdGlvbi50eXBlQ29uZGl0aW9uIHx8XG4gICAgICAgICAgICAgICAgY29udGV4dC5jYWNoZS5mcmFnbWVudE1hdGNoZXMoc2VsZWN0aW9uLCBkYXRhLl9fdHlwZW5hbWUpKSkge1xuICAgICAgICAgICAgdmFsdWUgPSBtYXNrU2VsZWN0aW9uU2V0KGRhdGEsIHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQsIGNvbnRleHQsIG1pZ3JhdGlvbiwgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdGlvbi5raW5kID09PSBLaW5kLkZSQUdNRU5UX1NQUkVBRCkge1xuICAgICAgICAgICAgdmFyIGZyYWdtZW50TmFtZSA9IHNlbGVjdGlvbi5uYW1lLnZhbHVlO1xuICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gY29udGV4dC5mcmFnbWVudE1hcFtmcmFnbWVudE5hbWVdIHx8XG4gICAgICAgICAgICAgICAgKGNvbnRleHQuZnJhZ21lbnRNYXBbZnJhZ21lbnROYW1lXSA9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2FjaGUubG9va3VwRnJhZ21lbnQoZnJhZ21lbnROYW1lKSk7XG4gICAgICAgICAgICBpbnZhcmlhbnQoZnJhZ21lbnQsIDU5LCBmcmFnbWVudE5hbWUpO1xuICAgICAgICAgICAgdmFyIG1vZGUgPSBnZXRGcmFnbWVudE1hc2tNb2RlKHNlbGVjdGlvbik7XG4gICAgICAgICAgICBpZiAobW9kZSAhPT0gXCJtYXNrXCIpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG1hc2tTZWxlY3Rpb25TZXQoZGF0YSwgZnJhZ21lbnQuc2VsZWN0aW9uU2V0LCBjb250ZXh0LCBtb2RlID09PSBcIm1pZ3JhdGVcIiwgcGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtub3duQ2hhbmdlZC5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICBrbm93bkNoYW5nZWQuYWRkKG1lbW8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChcIl9fdHlwZW5hbWVcIiBpbiBkYXRhICYmICEoXCJfX3R5cGVuYW1lXCIgaW4gbWVtbykpIHtcbiAgICAgICAgbWVtby5fX3R5cGVuYW1lID0gZGF0YS5fX3R5cGVuYW1lO1xuICAgIH1cbiAgICAvLyBUaGlzIGNoZWNrIHByZXZlbnRzIGNhc2VzIHdoZXJlIG1hc2tlZCBmaWVsZHMgbWF5IGFjY2lkZW50YWxseSBiZVxuICAgIC8vIHJldHVybmVkIGFzIHBhcnQgb2YgdGhpcyBvYmplY3Qgd2hlbiB0aGUgZnJhZ21lbnQgYWxzbyBzZWxlY3RzXG4gICAgLy8gYWRkaXRpb25hbCBmaWVsZHMgZnJvbSB0aGUgc2FtZSBjaGlsZCBzZWxlY3Rpb24uXG4gICAgaWYgKE9iamVjdC5rZXlzKG1lbW8pLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoKSB7XG4gICAgICAgIGtub3duQ2hhbmdlZC5hZGQobWVtbyk7XG4gICAgfVxuICAgIHJldHVybiBrbm93bkNoYW5nZWQuaGFzKG1lbW8pID8gbWVtbyA6IGRhdGE7XG59XG5mdW5jdGlvbiBnZXRBY2Nlc3Nvcldhcm5pbmdEZXNjcmlwdG9yKGZpZWxkTmFtZSwgdmFsdWUsIHBhdGgsIG9wZXJhdGlvbk5hbWUsIG9wZXJhdGlvblR5cGUpIHtcbiAgICB2YXIgZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChkaXNhYmxlV2FybmluZ3NTbG90LmdldFZhbHVlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKDYwLCBvcGVyYXRpb25OYW1lID9cbiAgICAgICAgICAgIFwiXCIuY29uY2F0KG9wZXJhdGlvblR5cGUsIFwiICdcIikuY29uY2F0KG9wZXJhdGlvbk5hbWUsIFwiJ1wiKVxuICAgICAgICAgICAgOiBcImFub255bW91cyBcIi5jb25jYXQob3BlcmF0aW9uVHlwZSksIFwiXCIuY29uY2F0KHBhdGgsIFwiLlwiKS5jb25jYXQoZmllbGROYW1lKS5yZXBsYWNlKC9eXFwuLywgXCJcIikpO1xuICAgICAgICBnZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9O1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRWYWx1ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXdWYWx1ZTsgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXNrRGVmaW5pdGlvbi5qcy5tYXAiLAogICAgImltcG9ydCB7IEtpbmQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgTWFwSW1wbCwgU2V0SW1wbCwgd2Fybk9uSW1wcm9wZXJDYWNoZUltcGxlbWVudGF0aW9uLCB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCBlcXVhbCBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgbWFza0RlZmluaXRpb24gfSBmcm9tIFwiLi9tYXNrRGVmaW5pdGlvbi5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRnJhZ21lbnRNYXAsIGdldEZyYWdtZW50RGVmaW5pdGlvbnMsIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hc2tGcmFnbWVudChkYXRhLCBkb2N1bWVudCwgY2FjaGUsIGZyYWdtZW50TmFtZSkge1xuICAgIGlmICghY2FjaGUuZnJhZ21lbnRNYXRjaGVzKSB7XG4gICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuT25JbXByb3BlckNhY2hlSW1wbGVtZW50YXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgdmFyIGZyYWdtZW50cyA9IGRvY3VtZW50LmRlZmluaXRpb25zLmZpbHRlcihmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5raW5kID09PSBLaW5kLkZSQUdNRU5UX0RFRklOSVRJT047XG4gICAgfSk7XG4gICAgaWYgKHR5cGVvZiBmcmFnbWVudE5hbWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaW52YXJpYW50KGZyYWdtZW50cy5sZW5ndGggPT09IDEsIDYxLCBmcmFnbWVudHMubGVuZ3RoKTtcbiAgICAgICAgZnJhZ21lbnROYW1lID0gZnJhZ21lbnRzWzBdLm5hbWUudmFsdWU7XG4gICAgfVxuICAgIHZhciBmcmFnbWVudCA9IGZyYWdtZW50cy5maW5kKGZ1bmN0aW9uIChmcmFnbWVudCkgeyByZXR1cm4gZnJhZ21lbnQubmFtZS52YWx1ZSA9PT0gZnJhZ21lbnROYW1lOyB9KTtcbiAgICBpbnZhcmlhbnQoISFmcmFnbWVudCwgNjIsIGZyYWdtZW50TmFtZSk7XG4gICAgaWYgKGRhdGEgPT0gbnVsbCkge1xuICAgICAgICAvLyBNYWludGFpbiB0aGUgb3JpZ2luYWwgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAoZXF1YWwoZGF0YSwge30pKSB7XG4gICAgICAgIC8vIFJldHVybiBlYXJseSBhbmQgc2tpcCB0aGUgbWFza2luZyBhbGdvcml0aG0gaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgZGF0YVxuICAgICAgICAvLyB5ZXQuIFRoaXMgY2FuIGhhcHBlbiB3aGVuIGNhY2hlLmRpZmYgcmV0dXJucyBhbiBlbXB0eSBvYmplY3Qgd2hpY2ggaXNcbiAgICAgICAgLy8gdXNlZCBmcm9tIHdhdGNoRnJhZ21lbnQuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICByZXR1cm4gbWFza0RlZmluaXRpb24oZGF0YSwgZnJhZ21lbnQuc2VsZWN0aW9uU2V0LCB7XG4gICAgICAgIG9wZXJhdGlvblR5cGU6IFwiZnJhZ21lbnRcIixcbiAgICAgICAgb3BlcmF0aW9uTmFtZTogZnJhZ21lbnQubmFtZS52YWx1ZSxcbiAgICAgICAgZnJhZ21lbnRNYXA6IGNyZWF0ZUZyYWdtZW50TWFwKGdldEZyYWdtZW50RGVmaW5pdGlvbnMoZG9jdW1lbnQpKSxcbiAgICAgICAgY2FjaGU6IGNhY2hlLFxuICAgICAgICBtdXRhYmxlVGFyZ2V0czogbmV3IE1hcEltcGwoKSxcbiAgICAgICAga25vd25DaGFuZ2VkOiBuZXcgU2V0SW1wbCgpLFxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFza0ZyYWdtZW50LmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIi4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVGcmFnbWVudE1hcCwgZ2V0RnJhZ21lbnREZWZpbml0aW9ucywgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbiwgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBtYXNrRGVmaW5pdGlvbiB9IGZyb20gXCIuL21hc2tEZWZpbml0aW9uLmpzXCI7XG5pbXBvcnQgeyBNYXBJbXBsLCBTZXRJbXBsLCB3YXJuT25JbXByb3BlckNhY2hlSW1wbGVtZW50YXRpb24sIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXNrT3BlcmF0aW9uKGRhdGEsIGRvY3VtZW50LCBjYWNoZSkge1xuICAgIHZhciBfYTtcbiAgICBpZiAoIWNhY2hlLmZyYWdtZW50TWF0Y2hlcykge1xuICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgd2Fybk9uSW1wcm9wZXJDYWNoZUltcGxlbWVudGF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIHZhciBkZWZpbml0aW9uID0gZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbihkb2N1bWVudCk7XG4gICAgaW52YXJpYW50KGRlZmluaXRpb24sIDYzKTtcbiAgICBpZiAoZGF0YSA9PSBudWxsKSB7XG4gICAgICAgIC8vIE1haW50YWluIHRoZSBvcmlnaW5hbCBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdmFsdWVcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIHJldHVybiBtYXNrRGVmaW5pdGlvbihkYXRhLCBkZWZpbml0aW9uLnNlbGVjdGlvblNldCwge1xuICAgICAgICBvcGVyYXRpb25UeXBlOiBkZWZpbml0aW9uLm9wZXJhdGlvbixcbiAgICAgICAgb3BlcmF0aW9uTmFtZTogKF9hID0gZGVmaW5pdGlvbi5uYW1lKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudmFsdWUsXG4gICAgICAgIGZyYWdtZW50TWFwOiBjcmVhdGVGcmFnbWVudE1hcChnZXRGcmFnbWVudERlZmluaXRpb25zKGRvY3VtZW50KSksXG4gICAgICAgIGNhY2hlOiBjYWNoZSxcbiAgICAgICAgbXV0YWJsZVRhcmdldHM6IG5ldyBNYXBJbXBsKCksXG4gICAgICAgIGtub3duQ2hhbmdlZDogbmV3IFNldEltcGwoKSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hc2tPcGVyYXRpb24uanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2Fzc2lnbiwgX19yZXN0IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSBcIm9wdGltaXNtXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBjYWNoZVNpemVzLCBnZXRGcmFnbWVudERlZmluaXRpb24sIGdldEZyYWdtZW50UXVlcnlEb2N1bWVudCwgbWVyZ2VEZWVwQXJyYXksIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgV2Vha0NhY2hlIH0gZnJvbSBcIkB3cnkvY2FjaGVzXCI7XG5pbXBvcnQgeyBnZXRBcG9sbG9DYWNoZU1lbW9yeUludGVybmFscyB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvY2FjaGluZy9nZXRNZW1vcnlJbnRlcm5hbHMuanNcIjtcbmltcG9ydCB7IGVxdWFsQnlRdWVyeSB9IGZyb20gXCIuLi8uLi9jb3JlL2VxdWFsQnlRdWVyeS5qc1wiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBtYXNrRnJhZ21lbnQgfSBmcm9tIFwiLi4vLi4vbWFza2luZy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgbXV0ZURlcHJlY2F0aW9ucywgd2FyblJlbW92ZWRPcHRpb24sIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9kZXByZWNhdGlvbi9pbmRleC5qc1wiO1xudmFyIEFwb2xsb0NhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFwb2xsb0NhY2hlKCkge1xuICAgICAgICB0aGlzLmFzc3VtZUltbXV0YWJsZVJlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGNvbXB1dGUgdGhlIHNhbWUgKD09PSkgZnJhZ21lbnQgcXVlcnkgZG9jdW1lbnQgZXZlcnlcbiAgICAgICAgLy8gdGltZSB3ZSByZWNlaXZlIHRoZSBzYW1lIGZyYWdtZW50IGluIHJlYWRGcmFnbWVudC5cbiAgICAgICAgdGhpcy5nZXRGcmFnbWVudERvYyA9IHdyYXAoZ2V0RnJhZ21lbnRRdWVyeURvY3VtZW50LCB7XG4gICAgICAgICAgICBtYXg6IGNhY2hlU2l6ZXNbXCJjYWNoZS5mcmFnbWVudFF1ZXJ5RG9jdW1lbnRzXCJdIHx8XG4gICAgICAgICAgICAgICAgMTAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcImNhY2hlLmZyYWdtZW50UXVlcnlEb2N1bWVudHNcIl0gKi8sXG4gICAgICAgICAgICBjYWNoZTogV2Vha0NhY2hlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gRnVuY3Rpb24gdXNlZCB0byBsb29rdXAgYSBmcmFnbWVudCB3aGVuIGEgZnJhZ21lbnQgZGVmaW5pdGlvbiBpcyBub3QgcGFydFxuICAgIC8vIG9mIHRoZSBHcmFwaFFMIGRvY3VtZW50LiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FjaGVzLCBzdWNoIGFzIEluTWVtb3J5Q2FjaGUsXG4gICAgLy8gdGhhdCByZWdpc3RlciBmcmFnbWVudHMgYWhlYWQgb2YgdGltZSBzbyB0aGV5IGNhbiBiZSByZWZlcmVuY2VkIGJ5IG5hbWUuXG4gICAgQXBvbGxvQ2FjaGUucHJvdG90eXBlLmxvb2t1cEZyYWdtZW50ID0gZnVuY3Rpb24gKGZyYWdtZW50TmFtZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIC8vIFRyYW5zYWN0aW9uYWwgQVBJXG4gICAgLy8gVGhlIGJhdGNoIG1ldGhvZCBpcyBpbnRlbmRlZCB0byByZXBsYWNlL3N1YnN1bWUgYm90aCBwZXJmb3JtVHJhbnNhY3Rpb25cbiAgICAvLyBhbmQgcmVjb3JkT3B0aW1pc3RpY1RyYW5zYWN0aW9uLCBidXQgcGVyZm9ybVRyYW5zYWN0aW9uIGNhbWUgZmlyc3QsIHNvIHdlXG4gICAgLy8gcHJvdmlkZSBhIGRlZmF1bHQgYmF0Y2ggaW1wbGVtZW50YXRpb24gdGhhdCdzIGp1c3QgYW5vdGhlciB3YXkgb2YgY2FsbGluZ1xuICAgIC8vIHBlcmZvcm1UcmFuc2FjdGlvbi4gU3ViY2xhc3NlcyBvZiBBcG9sbG9DYWNoZSAoc3VjaCBhcyBJbk1lbW9yeUNhY2hlKSBjYW5cbiAgICAvLyBvdmVycmlkZSB0aGUgYmF0Y2ggbWV0aG9kIHRvIGRvIG1vcmUgaW50ZXJlc3RpbmcgdGhpbmdzIHdpdGggaXRzIG9wdGlvbnMuXG4gICAgQXBvbGxvQ2FjaGUucHJvdG90eXBlLmJhdGNoID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGltaXN0aWNJZCA9IHR5cGVvZiBvcHRpb25zLm9wdGltaXN0aWMgPT09IFwic3RyaW5nXCIgPyBvcHRpb25zLm9wdGltaXN0aWNcbiAgICAgICAgICAgIDogb3B0aW9ucy5vcHRpbWlzdGljID09PSBmYWxzZSA/IG51bGxcbiAgICAgICAgICAgICAgICA6IHZvaWQgMDtcbiAgICAgICAgdmFyIHVwZGF0ZVJlc3VsdDtcbiAgICAgICAgdGhpcy5wZXJmb3JtVHJhbnNhY3Rpb24oZnVuY3Rpb24gKCkgeyByZXR1cm4gKHVwZGF0ZVJlc3VsdCA9IG9wdGlvbnMudXBkYXRlKF90aGlzKSk7IH0sIG9wdGltaXN0aWNJZCk7XG4gICAgICAgIHJldHVybiB1cGRhdGVSZXN1bHQ7XG4gICAgfTtcbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUucmVjb3JkT3B0aW1pc3RpY1RyYW5zYWN0aW9uID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBvcHRpbWlzdGljSWQpIHtcbiAgICAgICAgdGhpcy5wZXJmb3JtVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24sIG9wdGltaXN0aWNJZCk7XG4gICAgfTtcbiAgICAvLyBPcHRpb25hbCBBUElcbiAgICAvLyBDYWxsZWQgb25jZSBwZXIgaW5wdXQgZG9jdW1lbnQsIGFsbG93aW5nIHRoZSBjYWNoZSB0byBtYWtlIHN0YXRpYyBjaGFuZ2VzXG4gICAgLy8gdG8gdGhlIHF1ZXJ5LCBzdWNoIGFzIGFkZGluZyBfX3R5cGVuYW1lIGZpZWxkcy5cbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUudHJhbnNmb3JtRG9jdW1lbnQgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH07XG4gICAgLy8gQ2FsbGVkIGJlZm9yZSBlYWNoIEFwb2xsb0xpbmsgcmVxdWVzdCwgYWxsb3dpbmcgdGhlIGNhY2hlIHRvIG1ha2UgZHluYW1pY1xuICAgIC8vIGNoYW5nZXMgdG8gdGhlIHF1ZXJ5LCBzdWNoIGFzIGZpbGxpbmcgaW4gbWlzc2luZyBmcmFnbWVudCBkZWZpbml0aW9ucy5cbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUudHJhbnNmb3JtRm9yTGluayA9IGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgfTtcbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS5nYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH07XG4gICAgQXBvbGxvQ2FjaGUucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8vIERhdGFQcm94eSBBUElcbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUucmVhZFF1ZXJ5ID0gZnVuY3Rpb24gKG9wdGlvbnMsIG9wdGltaXN0aWMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKG9wdGltaXN0aWMgPT09IHZvaWQgMCkgeyBvcHRpbWlzdGljID0gISFvcHRpb25zLm9wdGltaXN0aWM7IH1cbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKG9wdGlvbnMsIFwiY2Fub25pemVSZXN1bHRzXCIsIFwiY2FjaGUucmVhZFF1ZXJ5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtdXRlRGVwcmVjYXRpb25zKFwiY2Fub25pemVSZXN1bHRzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWFkKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyByb290SWQ6IG9wdGlvbnMuaWQgfHwgXCJST09UX1FVRVJZXCIsIG9wdGltaXN0aWM6IG9wdGltaXN0aWMgfSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKiB7QGluaGVyaXREb2MgQGFwb2xsby9jbGllbnQhQXBvbGxvQ2xpZW50I3dhdGNoRnJhZ21lbnQ6bWVtYmVyKDEpfSAqL1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS53YXRjaEZyYWdtZW50ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGZyYWdtZW50ID0gb3B0aW9ucy5mcmFnbWVudCwgZnJhZ21lbnROYW1lID0gb3B0aW9ucy5mcmFnbWVudE5hbWUsIGZyb20gPSBvcHRpb25zLmZyb20sIF9hID0gb3B0aW9ucy5vcHRpbWlzdGljLCBvcHRpbWlzdGljID0gX2EgPT09IHZvaWQgMCA/IHRydWUgOiBfYSwgb3RoZXJPcHRpb25zID0gX19yZXN0KG9wdGlvbnMsIFtcImZyYWdtZW50XCIsIFwiZnJhZ21lbnROYW1lXCIsIFwiZnJvbVwiLCBcIm9wdGltaXN0aWNcIl0pO1xuICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLmdldEZyYWdtZW50RG9jKGZyYWdtZW50LCBmcmFnbWVudE5hbWUpO1xuICAgICAgICAvLyBXaGlsZSBvdXIgVHlwZVNjcmlwdCB0eXBlcyBkbyBub3QgYWxsb3cgZm9yIGB1bmRlZmluZWRgIGFzIGEgdmFsaWRcbiAgICAgICAgLy8gYGZyb21gLCBpdHMgcG9zc2libGUgYHVzZUZyYWdtZW50YCBnaXZlcyB1cyBhbiBgdW5kZWZpbmVkYCBzaW5jZSBpdFxuICAgICAgICAvLyBjYWxsc2AgY2FjaGUuaWRlbnRpZnlgIGFuZCBwcm92aWRlcyB0aGF0IHZhbHVlIHRvIGBmcm9tYC4gV2UgYXJlXG4gICAgICAgIC8vIGFkZGluZyB0aGlzIGZpeCBoZXJlIGhvd2V2ZXIgdG8gZW5zdXJlIHRob3NlIHVzaW5nIHBsYWluIEphdmFTY3JpcHRcbiAgICAgICAgLy8gYW5kIHVzaW5nIGBjYWNoZS5pZGVudGlmeWAgdGhlbXNlbHZlcyB3aWxsIGF2b2lkIHNlZWluZyB0aGUgb2JzY3VyZVxuICAgICAgICAvLyB3YXJuaW5nLlxuICAgICAgICB2YXIgaWQgPSB0eXBlb2YgZnJvbSA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJzdHJpbmdcIiA/XG4gICAgICAgICAgICBmcm9tXG4gICAgICAgICAgICA6IHRoaXMuaWRlbnRpZnkoZnJvbSk7XG4gICAgICAgIHZhciBkYXRhTWFza2luZyA9ICEhb3B0aW9uc1tTeW1ib2wuZm9yKFwiYXBvbGxvLmRhdGFNYXNraW5nXCIpXTtcbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZhciBhY3R1YWxGcmFnbWVudE5hbWUgPSBmcmFnbWVudE5hbWUgfHwgZ2V0RnJhZ21lbnREZWZpbml0aW9uKGZyYWdtZW50KS5uYW1lLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oMSwgYWN0dWFsRnJhZ21lbnROYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZGlmZk9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3RoZXJPcHRpb25zKSwgeyByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSwgaWQ6IGlkLCBxdWVyeTogcXVlcnksIG9wdGltaXN0aWM6IG9wdGltaXN0aWMgfSk7XG4gICAgICAgIHZhciBsYXRlc3REaWZmO1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMud2F0Y2goX19hc3NpZ24oX19hc3NpZ24oe30sIGRpZmZPcHRpb25zKSwgeyBpbW1lZGlhdGU6IHRydWUsIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGlmZikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGRhdGFNYXNraW5nID9cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tGcmFnbWVudChkaWZmLnJlc3VsdCwgZnJhZ21lbnQsIF90aGlzLCBmcmFnbWVudE5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRpZmYucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBlbnN1cmUgd2UgZGVsaXZlciB0aGUgZmlyc3QgcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIGxhdGVzdERpZmYgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxdWFsQnlRdWVyeShxdWVyeSwgeyBkYXRhOiBsYXRlc3REaWZmLnJlc3VsdCB9LCB7IGRhdGE6IGRhdGEgfSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBGaXggdGhlIHR5cGUgb24gV2F0Y2hGcmFnbWVudE9wdGlvbnMgc28gdGhhdCBUVmFyc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXh0ZW5kcyBPcGVyYXRpb25WYXJpYWJsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudmFyaWFibGVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6ICEhZGlmZi5jb21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYubWlzc2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm1pc3NpbmcgPSBtZXJnZURlZXBBcnJheShkaWZmLm1pc3NpbmcubWFwKGZ1bmN0aW9uIChlcnJvcikgeyByZXR1cm4gZXJyb3IubWlzc2luZzsgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxhdGVzdERpZmYgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZGlmZiksIHsgcmVzdWx0OiBkYXRhIH0pO1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSB9KSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQXBvbGxvQ2FjaGUucHJvdG90eXBlLnJlYWRGcmFnbWVudCA9IGZ1bmN0aW9uIChvcHRpb25zLCBvcHRpbWlzdGljKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChvcHRpbWlzdGljID09PSB2b2lkIDApIHsgb3B0aW1pc3RpYyA9ICEhb3B0aW9ucy5vcHRpbWlzdGljOyB9XG4gICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuUmVtb3ZlZE9wdGlvbihvcHRpb25zLCBcImNhbm9uaXplUmVzdWx0c1wiLCBcImNhY2hlLnJlYWRGcmFnbWVudFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbXV0ZURlcHJlY2F0aW9ucyhcImNhbm9uaXplUmVzdWx0c1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVhZChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgcXVlcnk6IF90aGlzLmdldEZyYWdtZW50RG9jKG9wdGlvbnMuZnJhZ21lbnQsIG9wdGlvbnMuZnJhZ21lbnROYW1lKSwgcm9vdElkOiBvcHRpb25zLmlkLCBvcHRpbWlzdGljOiBvcHRpbWlzdGljIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUud3JpdGVRdWVyeSA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgaWQgPSBfYS5pZCwgZGF0YSA9IF9hLmRhdGEsIG9wdGlvbnMgPSBfX3Jlc3QoX2EsIFtcImlkXCIsIFwiZGF0YVwiXSk7XG4gICAgICAgIHJldHVybiB0aGlzLndyaXRlKE9iamVjdC5hc3NpZ24ob3B0aW9ucywge1xuICAgICAgICAgICAgZGF0YUlkOiBpZCB8fCBcIlJPT1RfUVVFUllcIixcbiAgICAgICAgICAgIHJlc3VsdDogZGF0YSxcbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgQXBvbGxvQ2FjaGUucHJvdG90eXBlLndyaXRlRnJhZ21lbnQgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIGlkID0gX2EuaWQsIGRhdGEgPSBfYS5kYXRhLCBmcmFnbWVudCA9IF9hLmZyYWdtZW50LCBmcmFnbWVudE5hbWUgPSBfYS5mcmFnbWVudE5hbWUsIG9wdGlvbnMgPSBfX3Jlc3QoX2EsIFtcImlkXCIsIFwiZGF0YVwiLCBcImZyYWdtZW50XCIsIFwiZnJhZ21lbnROYW1lXCJdKTtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JpdGUoT2JqZWN0LmFzc2lnbihvcHRpb25zLCB7XG4gICAgICAgICAgICBxdWVyeTogdGhpcy5nZXRGcmFnbWVudERvYyhmcmFnbWVudCwgZnJhZ21lbnROYW1lKSxcbiAgICAgICAgICAgIGRhdGFJZDogaWQsXG4gICAgICAgICAgICByZXN1bHQ6IGRhdGEsXG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS51cGRhdGVRdWVyeSA9IGZ1bmN0aW9uIChvcHRpb25zLCB1cGRhdGUpIHtcbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKG9wdGlvbnMsIFwiY2Fub25pemVSZXN1bHRzXCIsIFwiY2FjaGUudXBkYXRlUXVlcnlcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2goe1xuICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBtdXRlRGVwcmVjYXRpb25zKFwiY2Fub25pemVSZXN1bHRzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnJlYWRRdWVyeShvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHVwZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09IHZvaWQgMCB8fCBkYXRhID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgY2FjaGUud3JpdGVRdWVyeShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgZGF0YTogZGF0YSB9KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEFwb2xsb0NhY2hlLnByb3RvdHlwZS51cGRhdGVGcmFnbWVudCA9IGZ1bmN0aW9uIChvcHRpb25zLCB1cGRhdGUpIHtcbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKG9wdGlvbnMsIFwiY2Fub25pemVSZXN1bHRzXCIsIFwiY2FjaGUudXBkYXRlRnJhZ21lbnRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2goe1xuICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBtdXRlRGVwcmVjYXRpb25zKFwiY2Fub25pemVSZXN1bHRzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnJlYWRGcmFnbWVudChvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHVwZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09IHZvaWQgMCB8fCBkYXRhID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgY2FjaGUud3JpdGVGcmFnbWVudChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgZGF0YTogZGF0YSB9KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBBcG9sbG9DYWNoZTtcbn0oKSk7XG5leHBvcnQgeyBBcG9sbG9DYWNoZSB9O1xuaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICBBcG9sbG9DYWNoZS5wcm90b3R5cGUuZ2V0TWVtb3J5SW50ZXJuYWxzID0gZ2V0QXBvbGxvQ2FjaGVNZW1vcnlJbnRlcm5hbHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWNoZS5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xudmFyIE1pc3NpbmdGaWVsZEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNaXNzaW5nRmllbGRFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNaXNzaW5nRmllbGRFcnJvcihtZXNzYWdlLCBwYXRoLCBxdWVyeSwgdmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gJ0Vycm9yJyBicmVha3MgcHJvdG90eXBlIGNoYWluIGhlcmVcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIF90aGlzLnBhdGggPSBwYXRoO1xuICAgICAgICBfdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICAgICAgICBfdGhpcy52YXJpYWJsZXMgPSB2YXJpYWJsZXM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KF90aGlzLnBhdGgpKSB7XG4gICAgICAgICAgICBfdGhpcy5taXNzaW5nID0gX3RoaXMubWVzc2FnZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBfdGhpcy5wYXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubWlzc2luZyA9IChfYSA9IHt9LCBfYVtfdGhpcy5wYXRoW2ldXSA9IF90aGlzLm1pc3NpbmcsIF9hKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLm1pc3NpbmcgPSBfdGhpcy5wYXRoO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlJ3JlIG5vdCB1c2luZyBgT2JqZWN0LnNldFByb3RvdHlwZU9mYCBoZXJlIGFzIGl0IGlzbid0IGZ1bGx5IHN1cHBvcnRlZFxuICAgICAgICAvLyBvbiBBbmRyb2lkIChzZWUgaXNzdWUgIzMyMzYpLlxuICAgICAgICBfdGhpcy5fX3Byb3RvX18gPSBNaXNzaW5nRmllbGRFcnJvci5wcm90b3R5cGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE1pc3NpbmdGaWVsZEVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0IHsgTWlzc2luZ0ZpZWxkRXJyb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLAogICAgImltcG9ydCB7IGlzUmVmZXJlbmNlLCBpc0ZpZWxkLCBEZWVwTWVyZ2VyLCByZXN1bHRLZXlOYW1lRnJvbUZpZWxkLCBzaG91bGRJbmNsdWRlLCBpc05vbk51bGxPYmplY3QsIGNvbXBhY3QsIGNyZWF0ZUZyYWdtZW50TWFwLCBnZXRGcmFnbWVudERlZmluaXRpb25zLCBpc0FycmF5LCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmV4cG9ydCB2YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmV4cG9ydCBmdW5jdGlvbiBpc051bGxpc2godmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHZvaWQgMDtcbn1cbmV4cG9ydCB7IGlzQXJyYXkgfTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0RGF0YUlkRnJvbU9iamVjdChfYSwgY29udGV4dCkge1xuICAgIHZhciBfX3R5cGVuYW1lID0gX2EuX190eXBlbmFtZSwgaWQgPSBfYS5pZCwgX2lkID0gX2EuX2lkO1xuICAgIGlmICh0eXBlb2YgX190eXBlbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICAgICAgY29udGV4dC5rZXlPYmplY3QgPVxuICAgICAgICAgICAgICAgICFpc051bGxpc2goaWQpID8geyBpZDogaWQgfVxuICAgICAgICAgICAgICAgICAgICA6ICFpc051bGxpc2goX2lkKSA/IHsgX2lkOiBfaWQgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gb2JqZWN0LmlkLCBmYWxsIGJhY2sgdG8gb2JqZWN0Ll9pZC5cbiAgICAgICAgaWYgKGlzTnVsbGlzaChpZCkgJiYgIWlzTnVsbGlzaChfaWQpKSB7XG4gICAgICAgICAgICBpZCA9IF9pZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTnVsbGlzaChpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiLmNvbmNhdChfX3R5cGVuYW1lLCBcIjpcIikuY29uY2F0KHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgaWQgPT09IFwic3RyaW5nXCIgP1xuICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShpZCkpO1xuICAgICAgICB9XG4gICAgfVxufVxudmFyIGRlZmF1bHRDb25maWcgPSB7XG4gICAgZGF0YUlkRnJvbU9iamVjdDogZGVmYXVsdERhdGFJZEZyb21PYmplY3QsXG4gICAgYWRkVHlwZW5hbWU6IHRydWUsXG4gICAgcmVzdWx0Q2FjaGluZzogdHJ1ZSxcbiAgICAvLyBUaGFua3MgdG8gdGhlIHNob3VsZENhbm9uaXplUmVzdWx0cyBoZWxwZXIsIHRoaXMgc2hvdWxkIGJlIHRoZSBvbmx5IGxpbmVcbiAgICAvLyB5b3UgaGF2ZSB0byBjaGFuZ2UgdG8gcmVlbmFibGUgY2Fub25pemF0aW9uIGJ5IGRlZmF1bHQgaW4gdGhlIGZ1dHVyZS5cbiAgICBjYW5vbml6ZVJlc3VsdHM6IGZhbHNlLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVDb25maWcoY29uZmlnKSB7XG4gICAgcmV0dXJuIGNvbXBhY3QoZGVmYXVsdENvbmZpZywgY29uZmlnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRDYW5vbml6ZVJlc3VsdHMoY29uZmlnKSB7XG4gICAgdmFyIHZhbHVlID0gY29uZmlnLmNhbm9uaXplUmVzdWx0cztcbiAgICByZXR1cm4gdmFsdWUgPT09IHZvaWQgMCA/IGRlZmF1bHRDb25maWcuY2Fub25pemVSZXN1bHRzIDogdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZW5hbWVGcm9tU3RvcmVPYmplY3Qoc3RvcmUsIG9iamVjdE9yUmVmZXJlbmNlKSB7XG4gICAgcmV0dXJuIGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKSA/XG4gICAgICAgIHN0b3JlLmdldChvYmplY3RPclJlZmVyZW5jZS5fX3JlZiwgXCJfX3R5cGVuYW1lXCIpXG4gICAgICAgIDogb2JqZWN0T3JSZWZlcmVuY2UgJiYgb2JqZWN0T3JSZWZlcmVuY2UuX190eXBlbmFtZTtcbn1cbmV4cG9ydCB2YXIgVHlwZU9yRmllbGROYW1lUmVnRXhwID0gL15bX2Etel1bXzAtOWEtel0qL2k7XG5leHBvcnQgZnVuY3Rpb24gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSkge1xuICAgIHZhciBtYXRjaCA9IHN0b3JlRmllbGROYW1lLm1hdGNoKFR5cGVPckZpZWxkTmFtZVJlZ0V4cCk7XG4gICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMF0gOiBzdG9yZUZpZWxkTmFtZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0KHNlbGVjdGlvblNldCwgcmVzdWx0LCB2YXJpYWJsZXMpIHtcbiAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkocmVzdWx0KSA/XG4gICAgICAgICAgICByZXN1bHQuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdChzZWxlY3Rpb25TZXQsIGl0ZW0sIHZhcmlhYmxlcyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiBzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5ldmVyeShmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNGaWVsZChmaWVsZCkgJiYgc2hvdWxkSW5jbHVkZShmaWVsZCwgdmFyaWFibGVzKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gcmVzdWx0S2V5TmFtZUZyb21GaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoaGFzT3duLmNhbGwocmVzdWx0LCBrZXkpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoIWZpZWxkLnNlbGVjdGlvblNldCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQoZmllbGQuc2VsZWN0aW9uU2V0LCByZXN1bHRba2V5XSwgdmFyaWFibGVzKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc2VsZWN0aW9uIGhhcyBiZWVuIHNraXBwZWQgd2l0aCBAc2tpcCh0cnVlKSBvclxuICAgICAgICAgICAgICAgIC8vIEBpbmNsdWRlKGZhbHNlKSwgaXQgc2hvdWxkIG5vdCBjb3VudCBhZ2FpbnN0IHRoZSBtYXRjaGluZy4gSWZcbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VsZWN0aW9uIGlzIG5vdCBhIGZpZWxkLCBpdCBtdXN0IGJlIGEgZnJhZ21lbnQgKGlubGluZSBvclxuICAgICAgICAgICAgICAgIC8vIG5hbWVkKS4gV2Ugd2lsbCBkZXRlcm1pbmUgaWYgc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdCBmb3IgdGhhdFxuICAgICAgICAgICAgICAgIC8vIGZyYWdtZW50IHdoZW4gd2UgZ2V0IHRvIGl0LCBzbyBmb3Igbm93IHdlIHJldHVybiB0cnVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVZhbHVlSXNTdG9yZU9iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiBpc05vbk51bGxPYmplY3QodmFsdWUpICYmICFpc1JlZmVyZW5jZSh2YWx1ZSkgJiYgIWlzQXJyYXkodmFsdWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQcm9jZXNzZWRGaWVsZHNNZXJnZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBEZWVwTWVyZ2VyKCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEZyYWdtZW50Q29udGV4dChkb2N1bWVudCwgZnJhZ21lbnRzKSB7XG4gICAgLy8gRnJhZ21lbnRNYXAgY29uc2lzdGluZyBvbmx5IG9mIGZyYWdtZW50cyBkZWZpbmVkIGRpcmVjdGx5IGluIGRvY3VtZW50LCBub3RcbiAgICAvLyBpbmNsdWRpbmcgb3RoZXIgZnJhZ21lbnRzIHJlZ2lzdGVyZWQgaW4gdGhlIEZyYWdtZW50UmVnaXN0cnkuXG4gICAgdmFyIGZyYWdtZW50TWFwID0gY3JlYXRlRnJhZ21lbnRNYXAoZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhkb2N1bWVudCkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGZyYWdtZW50TWFwOiBmcmFnbWVudE1hcCxcbiAgICAgICAgbG9va3VwRnJhZ21lbnQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICB2YXIgZGVmID0gZnJhZ21lbnRNYXBbbmFtZV07XG4gICAgICAgICAgICBpZiAoIWRlZiAmJiBmcmFnbWVudHMpIHtcbiAgICAgICAgICAgICAgICBkZWYgPSBmcmFnbWVudHMubG9va3VwKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZiB8fCBudWxsO1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWxwZXJzLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3NpZ24sIF9fZXh0ZW5kcywgX19yZXN0IH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IGRlcCB9IGZyb20gXCJvcHRpbWlzbVwiO1xuaW1wb3J0IHsgZXF1YWwgfSBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgVHJpZSB9IGZyb20gXCJAd3J5L3RyaWVcIjtcbmltcG9ydCB7IGlzUmVmZXJlbmNlLCBtYWtlUmVmZXJlbmNlLCBEZWVwTWVyZ2VyLCBtYXliZURlZXBGcmVlemUsIGNhblVzZVdlYWtNYXAsIGlzTm9uTnVsbE9iamVjdCwgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBoYXNPd24sIGZpZWxkTmFtZUZyb21TdG9yZU5hbWUgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG52YXIgREVMRVRFID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbnZhciBkZWxNb2RpZmllciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIERFTEVURTsgfTtcbnZhciBJTlZBTElEQVRFID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbnZhciBFbnRpdHlTdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFbnRpdHlTdG9yZShwb2xpY2llcywgZ3JvdXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5wb2xpY2llcyA9IHBvbGljaWVzO1xuICAgICAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XG4gICAgICAgIHRoaXMuZGF0YSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIC8vIE1hcHMgcm9vdCBlbnRpdHkgSURzIHRvIHRoZSBudW1iZXIgb2YgdGltZXMgdGhleSBoYXZlIGJlZW4gcmV0YWluZWQsIG1pbnVzXG4gICAgICAgIC8vIHRoZSBudW1iZXIgb2YgdGltZXMgdGhleSBoYXZlIGJlZW4gcmVsZWFzZWQuIFJldGFpbmVkIGVudGl0aWVzIGtlZXAgb3RoZXJcbiAgICAgICAgLy8gZW50aXRpZXMgdGhleSByZWZlcmVuY2UgKGV2ZW4gaW5kaXJlY3RseSkgZnJvbSBiZWluZyBnYXJiYWdlIGNvbGxlY3RlZC5cbiAgICAgICAgdGhpcy5yb290SWRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgLy8gTGF6aWx5IHRyYWNrcyB7IF9fcmVmOiA8ZGF0YUlkPiB9IHN0cmluZ3MgY29udGFpbmVkIGJ5IHRoaXMuZGF0YVtkYXRhSWRdLlxuICAgICAgICB0aGlzLnJlZnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAvLyBCb3VuZCBmdW5jdGlvbiB0aGF0IGNhbiBiZSBwYXNzZWQgYXJvdW5kIHRvIHByb3ZpZGUgZWFzeSBhY2Nlc3MgdG8gZmllbGRzXG4gICAgICAgIC8vIG9mIFJlZmVyZW5jZSBvYmplY3RzIGFzIHdlbGwgYXMgb3JkaW5hcnkgb2JqZWN0cy5cbiAgICAgICAgdGhpcy5nZXRGaWVsZFZhbHVlID0gZnVuY3Rpb24gKG9iamVjdE9yUmVmZXJlbmNlLCBzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1heWJlRGVlcEZyZWV6ZShpc1JlZmVyZW5jZShvYmplY3RPclJlZmVyZW5jZSkgP1xuICAgICAgICAgICAgICAgIF90aGlzLmdldChvYmplY3RPclJlZmVyZW5jZS5fX3JlZiwgc3RvcmVGaWVsZE5hbWUpXG4gICAgICAgICAgICAgICAgOiBvYmplY3RPclJlZmVyZW5jZSAmJiBvYmplY3RPclJlZmVyZW5jZVtzdG9yZUZpZWxkTmFtZV0pO1xuICAgICAgICB9O1xuICAgICAgICAvLyBSZXR1cm5zIHRydWUgZm9yIG5vbi1ub3JtYWxpemVkIFN0b3JlT2JqZWN0cyBhbmQgbm9uLWRhbmdsaW5nXG4gICAgICAgIC8vIFJlZmVyZW5jZXMsIGluZGljYXRpbmcgdGhhdCByZWFkRmllbGQobmFtZSwgb2JqT3JSZWYpIGhhcyBhIGNoYW5jZSBvZlxuICAgICAgICAvLyB3b3JraW5nLiBVc2VmdWwgZm9yIGZpbHRlcmluZyBvdXQgZGFuZ2xpbmcgcmVmZXJlbmNlcyBmcm9tIGxpc3RzLlxuICAgICAgICB0aGlzLmNhblJlYWQgPSBmdW5jdGlvbiAob2JqT3JSZWYpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1JlZmVyZW5jZShvYmpPclJlZikgP1xuICAgICAgICAgICAgICAgIF90aGlzLmhhcyhvYmpPclJlZi5fX3JlZilcbiAgICAgICAgICAgICAgICA6IHR5cGVvZiBvYmpPclJlZiA9PT0gXCJvYmplY3RcIjtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQm91bmQgZnVuY3Rpb24gdGhhdCBjb252ZXJ0cyBhbiBpZCBvciBhbiBvYmplY3Qgd2l0aCBhIF9fdHlwZW5hbWUgYW5kXG4gICAgICAgIC8vIHByaW1hcnkga2V5IGZpZWxkcyB0byBhIFJlZmVyZW5jZSBvYmplY3QuIElmIGNhbGxlZCB3aXRoIGEgUmVmZXJlbmNlIG9iamVjdCxcbiAgICAgICAgLy8gdGhhdCBzYW1lIFJlZmVyZW5jZSBvYmplY3QgaXMgcmV0dXJuZWQuIFBhc3MgdHJ1ZSBmb3IgbWVyZ2VJbnRvU3RvcmUgdG8gcGVyc2lzdFxuICAgICAgICAvLyBhbiBvYmplY3QgaW50byB0aGUgc3RvcmUuXG4gICAgICAgIHRoaXMudG9SZWZlcmVuY2UgPSBmdW5jdGlvbiAob2JqT3JJZE9yUmVmLCBtZXJnZUludG9TdG9yZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmpPcklkT3JSZWYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFrZVJlZmVyZW5jZShvYmpPcklkT3JSZWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUmVmZXJlbmNlKG9iak9ySWRPclJlZikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqT3JJZE9yUmVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlkID0gX3RoaXMucG9saWNpZXMuaWRlbnRpZnkob2JqT3JJZE9yUmVmKVswXTtcbiAgICAgICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgICAgIHZhciByZWYgPSBtYWtlUmVmZXJlbmNlKGlkKTtcbiAgICAgICAgICAgICAgICBpZiAobWVyZ2VJbnRvU3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubWVyZ2UoaWQsIG9iak9ySWRPclJlZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZWY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEFsdGhvdWdoIHRoZSBFbnRpdHlTdG9yZSBjbGFzcyBpcyBhYnN0cmFjdCwgaXQgY29udGFpbnMgY29uY3JldGVcbiAgICAvLyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIHZhcmlvdXMgTm9ybWFsaXplZENhY2hlIGludGVyZmFjZSBtZXRob2RzIHRoYXRcbiAgICAvLyBhcmUgaW5oZXJpdGVkIGJ5IHRoZSBSb290IGFuZCBMYXllciBzdWJjbGFzc2VzLlxuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKHt9LCB0aGlzLmRhdGEpO1xuICAgIH07XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChkYXRhSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9va3VwKGRhdGFJZCwgdHJ1ZSkgIT09IHZvaWQgMDtcbiAgICB9O1xuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoZGF0YUlkLCBmaWVsZE5hbWUpIHtcbiAgICAgICAgdGhpcy5ncm91cC5kZXBlbmQoZGF0YUlkLCBmaWVsZE5hbWUpO1xuICAgICAgICBpZiAoaGFzT3duLmNhbGwodGhpcy5kYXRhLCBkYXRhSWQpKSB7XG4gICAgICAgICAgICB2YXIgc3RvcmVPYmplY3QgPSB0aGlzLmRhdGFbZGF0YUlkXTtcbiAgICAgICAgICAgIGlmIChzdG9yZU9iamVjdCAmJiBoYXNPd24uY2FsbChzdG9yZU9iamVjdCwgZmllbGROYW1lKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZU9iamVjdFtmaWVsZE5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZE5hbWUgPT09IFwiX190eXBlbmFtZVwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkLCBkYXRhSWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb2xpY2llcy5yb290VHlwZW5hbWVzQnlJZFtkYXRhSWRdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXQoZGF0YUlkLCBmaWVsZE5hbWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUubG9va3VwID0gZnVuY3Rpb24gKGRhdGFJZCwgZGVwZW5kT25FeGlzdGVuY2UpIHtcbiAgICAgICAgLy8gVGhlIGhhcyBtZXRob2QgKGFib3ZlKSBjYWxscyBsb29rdXAgd2l0aCBkZXBlbmRPbkV4aXN0ZW5jZSA9IHRydWUsIHNvXG4gICAgICAgIC8vIHRoYXQgaXQgY2FuIGxhdGVyIGJlIGludmFsaWRhdGVkIHdoZW4gd2UgYWRkIG9yIHJlbW92ZSBhIFN0b3JlT2JqZWN0IGZvclxuICAgICAgICAvLyB0aGlzIGRhdGFJZC4gQW55IGNvbnN1bWVyIHdobyBjYXJlcyBhYm91dCB0aGUgY29udGVudHMgb2YgdGhlIFN0b3JlT2JqZWN0XG4gICAgICAgIC8vIHNob3VsZCBub3QgcmVseSBvbiB0aGlzIGRlcGVuZGVuY3ksIHNpbmNlIHRoZSBjb250ZW50cyBjb3VsZCBjaGFuZ2VcbiAgICAgICAgLy8gd2l0aG91dCB0aGUgb2JqZWN0IGJlaW5nIGFkZGVkIG9yIHJlbW92ZWQuXG4gICAgICAgIGlmIChkZXBlbmRPbkV4aXN0ZW5jZSlcbiAgICAgICAgICAgIHRoaXMuZ3JvdXAuZGVwZW5kKGRhdGFJZCwgXCJfX2V4aXN0c1wiKTtcbiAgICAgICAgaWYgKGhhc093bi5jYWxsKHRoaXMuZGF0YSwgZGF0YUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtkYXRhSWRdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5sb29rdXAoZGF0YUlkLCBkZXBlbmRPbkV4aXN0ZW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbZGF0YUlkXSkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uIChvbGRlciwgbmV3ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGRhdGFJZDtcbiAgICAgICAgLy8gQ29udmVydCB1bmV4cGVjdGVkIHJlZmVyZW5jZXMgdG8gSUQgc3RyaW5ncy5cbiAgICAgICAgaWYgKGlzUmVmZXJlbmNlKG9sZGVyKSlcbiAgICAgICAgICAgIG9sZGVyID0gb2xkZXIuX19yZWY7XG4gICAgICAgIGlmIChpc1JlZmVyZW5jZShuZXdlcikpXG4gICAgICAgICAgICBuZXdlciA9IG5ld2VyLl9fcmVmO1xuICAgICAgICB2YXIgZXhpc3RpbmcgPSB0eXBlb2Ygb2xkZXIgPT09IFwic3RyaW5nXCIgPyB0aGlzLmxvb2t1cCgoZGF0YUlkID0gb2xkZXIpKSA6IG9sZGVyO1xuICAgICAgICB2YXIgaW5jb21pbmcgPSB0eXBlb2YgbmV3ZXIgPT09IFwic3RyaW5nXCIgPyB0aGlzLmxvb2t1cCgoZGF0YUlkID0gbmV3ZXIpKSA6IG5ld2VyO1xuICAgICAgICAvLyBJZiBuZXdlciB3YXMgYSBzdHJpbmcgSUQsIGJ1dCB0aGF0IElEIHdhcyBub3QgZGVmaW5lZCBpbiB0aGlzIHN0b3JlLFxuICAgICAgICAvLyB0aGVuIHRoZXJlIGFyZSBubyBmaWVsZHMgdG8gYmUgbWVyZ2VkLCBzbyB3ZSdyZSBkb25lLlxuICAgICAgICBpZiAoIWluY29taW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpbnZhcmlhbnQodHlwZW9mIGRhdGFJZCA9PT0gXCJzdHJpbmdcIiwgMik7XG4gICAgICAgIHZhciBtZXJnZWQgPSBuZXcgRGVlcE1lcmdlcihzdG9yZU9iamVjdFJlY29uY2lsZXIpLm1lcmdlKGV4aXN0aW5nLCBpbmNvbWluZyk7XG4gICAgICAgIC8vIEV2ZW4gaWYgbWVyZ2VkID09PSBleGlzdGluZywgZXhpc3RpbmcgbWF5IGhhdmUgY29tZSBmcm9tIGEgbG93ZXJcbiAgICAgICAgLy8gbGF5ZXIsIHNvIHdlIGFsd2F5cyBuZWVkIHRvIHNldCB0aGlzLmRhdGFbZGF0YUlkXSBvbiB0aGlzIGxldmVsLlxuICAgICAgICB0aGlzLmRhdGFbZGF0YUlkXSA9IG1lcmdlZDtcbiAgICAgICAgaWYgKG1lcmdlZCAhPT0gZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlZnNbZGF0YUlkXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwLmNhY2hpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGRzVG9EaXJ0eV8xID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBhZGRlZCBhIG5ldyBTdG9yZU9iamVjdCB3aGVyZSB0aGVyZSB3YXMgcHJldmlvdXNseSBub25lLCBkaXJ0eVxuICAgICAgICAgICAgICAgIC8vIGFueXRoaW5nIHRoYXQgZGVwZW5kZWQgb24gdGhlIGV4aXN0ZW5jZSBvZiB0aGlzIGRhdGFJZCwgc3VjaCBhcyB0aGVcbiAgICAgICAgICAgICAgICAvLyBFbnRpdHlTdG9yZSNoYXMgbWV0aG9kLlxuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmcpXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkc1RvRGlydHlfMS5fX2V4aXN0cyA9IDE7XG4gICAgICAgICAgICAgICAgLy8gTm93IGludmFsaWRhdGUgZGVwZW5kZW50cyB3aG8gY2FsbGVkIGdldEZpZWxkVmFsdWUgZm9yIGFueSBmaWVsZHNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGFyZSBjaGFuZ2luZyBhcyBhIHJlc3VsdCBvZiB0aGlzIG1lcmdlLlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGluY29taW5nKS5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1tzdG9yZUZpZWxkTmFtZV0gIT09IG1lcmdlZFtzdG9yZUZpZWxkTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBkaXJ0eSB0aGUgZnVsbCBzdG9yZUZpZWxkTmFtZSwgd2hpY2ggbWF5IGluY2x1ZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlcmlhbGl6ZWQgYXJndW1lbnRzIGZvbGxvd2luZyB0aGUgZmllbGROYW1lIHByZWZpeC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1RvRGlydHlfMVtzdG9yZUZpZWxkTmFtZV0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxzbyBkaXJ0eSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKSBpZiBpdCdzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkaWZmZXJlbnQgZnJvbSBzdG9yZUZpZWxkTmFtZSBhbmQgdGhpcyBmaWVsZCBkb2VzIG5vdCBoYXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBrZXlBcmdzIGNvbmZpZ3VyZWQsIGJlY2F1c2UgdGhhdCBtZWFucyB0aGUgY2FjaGUgY2FuJ3QgbWFrZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW55IGFzc3VtcHRpb25zIGFib3V0IGhvdyBmaWVsZCB2YWx1ZXMgd2l0aCB0aGUgc2FtZSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmFtZSBidXQgZGlmZmVyZW50IGFyZ3VtZW50cyBtaWdodCBiZSBpbnRlcnJlbGF0ZWQsIHNvIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtdXN0IGVyciBvbiB0aGUgc2lkZSBvZiBpbnZhbGlkYXRpbmcgYWxsIGZpZWxkIHZhbHVlcyB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaGFyZSB0aGUgc2FtZSBzaG9ydCBmaWVsZE5hbWUsIHJlZ2FyZGxlc3Mgb2YgYXJndW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkTmFtZSAhPT0gc3RvcmVGaWVsZE5hbWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhX3RoaXMucG9saWNpZXMuaGFzS2V5QXJncyhtZXJnZWQuX190eXBlbmFtZSwgZmllbGROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc1RvRGlydHlfMVtmaWVsZE5hbWVdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG1lcmdlZFtzdG9yZUZpZWxkTmFtZV0gaGFzIGJlY29tZSB1bmRlZmluZWQsIGFuZCB0aGlzIGlzIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUm9vdCBsYXllciwgYWN0dWFsbHkgZGVsZXRlIHRoZSBwcm9wZXJ0eSBmcm9tIHRoZSBtZXJnZWQgb2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hpY2ggaXMgZ3VhcmFudGVlZCB0byBoYXZlIGJlZW4gY3JlYXRlZCBmcmVzaCBpbiB0aGlzIG1ldGhvZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZWRbc3RvcmVGaWVsZE5hbWVdID09PSB2b2lkIDAgJiYgIShfdGhpcyBpbnN0YW5jZW9mIExheWVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXJnZWRbc3RvcmVGaWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkc1RvRGlydHlfMS5fX3R5cGVuYW1lICYmXG4gICAgICAgICAgICAgICAgICAgICEoZXhpc3RpbmcgJiYgZXhpc3RpbmcuX190eXBlbmFtZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gU2luY2Ugd2UgcmV0dXJuIGRlZmF1bHQgcm9vdCBfX3R5cGVuYW1lIHN0cmluZ3NcbiAgICAgICAgICAgICAgICAgICAgLy8gYXV0b21hdGljYWxseSBmcm9tIHN0b3JlLmdldCwgd2UgZG9uJ3QgbmVlZCB0byBkaXJ0eSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gUk9PVF9RVUVSWS5fX3R5cGVuYW1lIGZpZWxkIGlmIG1lcmdlZC5fX3R5cGVuYW1lIGlzIGVxdWFsXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBkZWZhdWx0IHN0cmluZyAodXN1YWxseSBcIlF1ZXJ5XCIpLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkW2RhdGFJZF0gPT09IG1lcmdlZC5fX3R5cGVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmaWVsZHNUb0RpcnR5XzEuX190eXBlbmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZmllbGRzVG9EaXJ0eV8xKS5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIChkYXRhSWQsIGZpZWxkcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc3RvcmVPYmplY3QgPSB0aGlzLmxvb2t1cChkYXRhSWQpO1xuICAgICAgICBpZiAoc3RvcmVPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBjaGFuZ2VkRmllbGRzXzEgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgdmFyIG5lZWRUb01lcmdlXzEgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBhbGxEZWxldGVkXzEgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIHNoYXJlZERldGFpbHNfMSA9IHtcbiAgICAgICAgICAgICAgICBERUxFVEU6IERFTEVURSxcbiAgICAgICAgICAgICAgICBJTlZBTElEQVRFOiBJTlZBTElEQVRFLFxuICAgICAgICAgICAgICAgIGlzUmVmZXJlbmNlOiBpc1JlZmVyZW5jZSxcbiAgICAgICAgICAgICAgICB0b1JlZmVyZW5jZTogdGhpcy50b1JlZmVyZW5jZSxcbiAgICAgICAgICAgICAgICBjYW5SZWFkOiB0aGlzLmNhblJlYWQsXG4gICAgICAgICAgICAgICAgcmVhZEZpZWxkOiBmdW5jdGlvbiAoZmllbGROYW1lT3JPcHRpb25zLCBmcm9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wb2xpY2llcy5yZWFkRmllbGQodHlwZW9mIGZpZWxkTmFtZU9yT3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZE5hbWVPck9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogZnJvbSB8fCBtYWtlUmVmZXJlbmNlKGRhdGFJZCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IGZpZWxkTmFtZU9yT3B0aW9ucywgeyBzdG9yZTogX3RoaXMgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZU9iamVjdCkuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSBzdG9yZU9iamVjdFtzdG9yZUZpZWxkTmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgPT09IHZvaWQgMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciBtb2RpZnkgPSB0eXBlb2YgZmllbGRzID09PSBcImZ1bmN0aW9uXCIgPyBmaWVsZHMgOiAoZmllbGRzW3N0b3JlRmllbGROYW1lXSB8fCBmaWVsZHNbZmllbGROYW1lXSk7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGlmeSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBtb2RpZnkgPT09IGRlbE1vZGlmaWVyID8gREVMRVRFIDogKG1vZGlmeShtYXliZURlZXBGcmVlemUoZmllbGRWYWx1ZSksIF9fYXNzaWduKF9fYXNzaWduKHt9LCBzaGFyZWREZXRhaWxzXzEpLCB7IGZpZWxkTmFtZTogZmllbGROYW1lLCBzdG9yZUZpZWxkTmFtZTogc3RvcmVGaWVsZE5hbWUsIHN0b3JhZ2U6IF90aGlzLmdldFN0b3JhZ2UoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSkgfSkpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBJTlZBTElEQVRFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gREVMRVRFKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBmaWVsZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZEZpZWxkc18xW3N0b3JlRmllbGROYW1lXSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRUb01lcmdlXzEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hlY2tSZWZlcmVuY2UgPSBmdW5jdGlvbiAocmVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMubG9va3VwKHJlZi5fX3JlZikgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oMywgcmVmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVmZXJlbmNlKG5ld1ZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tSZWZlcmVuY2UobmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXYXJuIGFib3V0IHdyaXRpbmcgXCJtaXhlZFwiIGFycmF5cyBvZiBSZWZlcmVuY2UgYW5kIG5vbi1SZWZlcmVuY2Ugb2JqZWN0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlZW5SZWZlcmVuY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzb21lTm9uUmVmZXJlbmNlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBuZXdWYWx1ZV8xID0gbmV3VmFsdWU7IF9pIDwgbmV3VmFsdWVfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBuZXdWYWx1ZV8xW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2UodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZW5SZWZlcmVuY2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tSZWZlcmVuY2UodmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3Qgd2FybiBvbiBwcmltaXRpdmUgdmFsdWVzLCBzaW5jZSB0aG9zZSBjb3VsZCBuZXZlciBiZSByZXByZXNlbnRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBieSBhIHJlZmVyZW5jZS4gVGhpcyBpcyBhIHZhbGlkIChhbGJlaXQgdW5jb21tb24pIHVzZSBjYXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmICEhdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IF90aGlzLnBvbGljaWVzLmlkZW50aWZ5KHZhbHVlKVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIG9iamVjdCBjb3VsZCBldmVuIGJlIHJlZmVyZW5jZWQsIG90aGVyd2lzZSB3ZSBhcmUgbm90IGludGVyZXN0ZWQgaW4gaXQgZm9yIHRoaXMgd2FybmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29tZU5vblJlZmVyZW5jZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWVuUmVmZXJlbmNlICYmIHNvbWVOb25SZWZlcmVuY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKDQsIHNvbWVOb25SZWZlcmVuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBhbGxEZWxldGVkXzEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChuZWVkVG9NZXJnZV8xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXJnZShkYXRhSWQsIGNoYW5nZWRGaWVsZHNfMSk7XG4gICAgICAgICAgICAgICAgaWYgKGFsbERlbGV0ZWRfMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIExheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbZGF0YUlkXSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRhdGFbZGF0YUlkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgXCJfX2V4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLy8gSWYgY2FsbGVkIHdpdGggb25seSBvbmUgYXJndW1lbnQsIHJlbW92ZXMgdGhlIGVudGlyZSBlbnRpdHlcbiAgICAvLyBpZGVudGlmaWVkIGJ5IGRhdGFJZC4gSWYgY2FsbGVkIHdpdGggYSBmaWVsZE5hbWUgYXMgd2VsbCwgcmVtb3ZlcyBhbGxcbiAgICAvLyBmaWVsZHMgb2YgdGhhdCBlbnRpdHkgd2hvc2UgbmFtZXMgbWF0Y2ggZmllbGROYW1lIGFjY29yZGluZyB0byB0aGVcbiAgICAvLyBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lIGhlbHBlciBmdW5jdGlvbi4gSWYgY2FsbGVkIHdpdGggYSBmaWVsZE5hbWVcbiAgICAvLyBhbmQgdmFyaWFibGVzLCByZW1vdmVzIGFsbCBmaWVsZHMgb2YgdGhhdCBlbnRpdHkgd2hvc2UgbmFtZXMgbWF0Y2ggZmllbGROYW1lXG4gICAgLy8gYW5kIHdob3NlIGFyZ3VtZW50cyB3aGVuIGNhY2hlZCBleGFjdGx5IG1hdGNoIHRoZSB2YXJpYWJsZXMgcGFzc2VkLlxuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoZGF0YUlkLCBmaWVsZE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgc3RvcmVPYmplY3QgPSB0aGlzLmxvb2t1cChkYXRhSWQpO1xuICAgICAgICBpZiAoc3RvcmVPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciB0eXBlbmFtZSA9IHRoaXMuZ2V0RmllbGRWYWx1ZShzdG9yZU9iamVjdCwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgdmFyIHN0b3JlRmllbGROYW1lID0gZmllbGROYW1lICYmIGFyZ3MgP1xuICAgICAgICAgICAgICAgIHRoaXMucG9saWNpZXMuZ2V0U3RvcmVGaWVsZE5hbWUoeyB0eXBlbmFtZTogdHlwZW5hbWUsIGZpZWxkTmFtZTogZmllbGROYW1lLCBhcmdzOiBhcmdzIH0pXG4gICAgICAgICAgICAgICAgOiBmaWVsZE5hbWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb2RpZnkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSA/IChfYSA9IHt9LFxuICAgICAgICAgICAgICAgIF9hW3N0b3JlRmllbGROYW1lXSA9IGRlbE1vZGlmaWVyLFxuICAgICAgICAgICAgICAgIF9hKSA6IGRlbE1vZGlmaWVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUuZXZpY3QgPSBmdW5jdGlvbiAob3B0aW9ucywgbGltaXQpIHtcbiAgICAgICAgdmFyIGV2aWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG9wdGlvbnMuaWQpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbCh0aGlzLmRhdGEsIG9wdGlvbnMuaWQpKSB7XG4gICAgICAgICAgICAgICAgZXZpY3RlZCA9IHRoaXMuZGVsZXRlKG9wdGlvbnMuaWQsIG9wdGlvbnMuZmllbGROYW1lLCBvcHRpb25zLmFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllciAmJiB0aGlzICE9PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgIGV2aWN0ZWQgPSB0aGlzLnBhcmVudC5ldmljdChvcHRpb25zLCBsaW1pdCkgfHwgZXZpY3RlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFsd2F5cyBpbnZhbGlkYXRlIHRoZSBmaWVsZCB0byB0cmlnZ2VyIHJlcmVhZGluZyBvZiB3YXRjaGVkXG4gICAgICAgICAgICAvLyBxdWVyaWVzLCBldmVuIGlmIG5vIGNhY2hlIGRhdGEgd2FzIG1vZGlmaWVkIGJ5IHRoZSBldmljdGlvbixcbiAgICAgICAgICAgIC8vIGJlY2F1c2UgcXVlcmllcyBtYXkgZGVwZW5kIG9uIGNvbXB1dGVkIGZpZWxkcyB3aXRoIGN1c3RvbSByZWFkXG4gICAgICAgICAgICAvLyBmdW5jdGlvbnMsIHdob3NlIHZhbHVlcyBhcmUgbm90IHN0b3JlZCBpbiB0aGUgRW50aXR5U3RvcmUuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5maWVsZE5hbWUgfHwgZXZpY3RlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXAuZGlydHkob3B0aW9ucy5pZCwgb3B0aW9ucy5maWVsZE5hbWUgfHwgXCJfX2V4aXN0c1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZpY3RlZDtcbiAgICB9O1xuICAgIEVudGl0eVN0b3JlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZXBsYWNlKG51bGwpO1xuICAgIH07XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLmV4dHJhY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvYmogPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgICAgIHZhciBleHRyYVJvb3RJZHMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXRSb290SWRTZXQoKS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgaWYgKCFoYXNPd24uY2FsbChfdGhpcy5wb2xpY2llcy5yb290VHlwZW5hbWVzQnlJZCwgaWQpKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFSb290SWRzLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGV4dHJhUm9vdElkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iai5fX01FVEEgPSB7IGV4dHJhUm9vdElkczogZXh0cmFSb290SWRzLnNvcnQoKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoZGF0YUlkKSB7XG4gICAgICAgICAgICBpZiAoIShuZXdEYXRhICYmIGhhc093bi5jYWxsKG5ld0RhdGEsIGRhdGFJZCkpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZGVsZXRlKGRhdGFJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobmV3RGF0YSkge1xuICAgICAgICAgICAgdmFyIF9fTUVUQSA9IG5ld0RhdGEuX19NRVRBLCByZXN0XzEgPSBfX3Jlc3QobmV3RGF0YSwgW1wiX19NRVRBXCJdKTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3RfMSkuZm9yRWFjaChmdW5jdGlvbiAoZGF0YUlkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubWVyZ2UoZGF0YUlkLCByZXN0XzFbZGF0YUlkXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChfX01FVEEpIHtcbiAgICAgICAgICAgICAgICBfX01FVEEuZXh0cmFSb290SWRzLmZvckVhY2godGhpcy5yZXRhaW4sIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUucmV0YWluID0gZnVuY3Rpb24gKHJvb3RJZCkge1xuICAgICAgICByZXR1cm4gKHRoaXMucm9vdElkc1tyb290SWRdID0gKHRoaXMucm9vdElkc1tyb290SWRdIHx8IDApICsgMSk7XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uIChyb290SWQpIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdElkc1tyb290SWRdID4gMCkge1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gLS10aGlzLnJvb3RJZHNbcm9vdElkXTtcbiAgICAgICAgICAgIGlmICghY291bnQpXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucm9vdElkc1tyb290SWRdO1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgLy8gUmV0dXJuIGEgU2V0PHN0cmluZz4gb2YgYWxsIHRoZSBJRCBzdHJpbmdzIHRoYXQgaGF2ZSBiZWVuIHJldGFpbmVkIGJ5XG4gICAgLy8gdGhpcyBsYXllci9yb290ICphbmQqIGFueSBsYXllcnMvcm9vdHMgYmVuZWF0aCBpdC5cbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUuZ2V0Um9vdElkU2V0ID0gZnVuY3Rpb24gKGlkcykge1xuICAgICAgICBpZiAoaWRzID09PSB2b2lkIDApIHsgaWRzID0gbmV3IFNldCgpOyB9XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMucm9vdElkcykuZm9yRWFjaChpZHMuYWRkLCBpZHMpO1xuICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIExheWVyKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5nZXRSb290SWRTZXQoaWRzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIE9mZmljaWFsIHNpbmdsZXRvbiBJRHMgbGlrZSBST09UX1FVRVJZIGFuZCBST09UX01VVEFUSU9OIGFyZVxuICAgICAgICAgICAgLy8gYWx3YXlzIGNvbnNpZGVyZWQgcm9vdHMgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiwgcmVnYXJkbGVzcyBvZlxuICAgICAgICAgICAgLy8gdGhlaXIgcmV0YWlubWVudCBjb3VudHMgaW4gdGhpcy5yb290SWRzLlxuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5wb2xpY2llcy5yb290VHlwZW5hbWVzQnlJZCkuZm9yRWFjaChpZHMuYWRkLCBpZHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpZHM7XG4gICAgfTtcbiAgICAvLyBUaGUgZ29hbCBvZiBnYXJiYWdlIGNvbGxlY3Rpb24gaXMgdG8gcmVtb3ZlIElEcyBmcm9tIHRoZSBSb290IGxheWVyIG9mIHRoZVxuICAgIC8vIHN0b3JlIHRoYXQgYXJlIG5vIGxvbmdlciByZWFjaGFibGUgc3RhcnRpbmcgZnJvbSBhbnkgSURzIHRoYXQgaGF2ZSBiZWVuXG4gICAgLy8gZXhwbGljaXRseSByZXRhaW5lZCAoc2VlIHJldGFpbiBhbmQgcmVsZWFzZSwgYWJvdmUpLiBSZXR1cm5zIGFuIGFycmF5IG9mXG4gICAgLy8gZGF0YUlkIHN0cmluZ3MgdGhhdCB3ZXJlIHJlbW92ZWQgZnJvbSB0aGUgc3RvcmUuXG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLmdjID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgaWRzID0gdGhpcy5nZXRSb290SWRTZXQoKTtcbiAgICAgICAgdmFyIHNuYXBzaG90ID0gdGhpcy50b09iamVjdCgpO1xuICAgICAgICBpZHMuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChzbmFwc2hvdCwgaWQpKSB7XG4gICAgICAgICAgICAgICAgLy8gQmVjYXVzZSB3ZSBhcmUgaXRlcmF0aW5nIG92ZXIgYW4gRUNNQVNjcmlwdCBTZXQsIHRoZSBJRHMgd2UgYWRkIGhlcmVcbiAgICAgICAgICAgICAgICAvLyB3aWxsIGJlIHZpc2l0ZWQgaW4gbGF0ZXIgaXRlcmF0aW9ucyBvZiB0aGUgZm9yRWFjaCBsb29wIG9ubHkgaWYgdGhleVxuICAgICAgICAgICAgICAgIC8vIHdlcmUgbm90IHByZXZpb3VzbHkgY29udGFpbmVkIGJ5IHRoZSBTZXQuXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoX3RoaXMuZmluZENoaWxkUmVmSWRzKGlkKSkuZm9yRWFjaChpZHMuYWRkLCBpZHMpO1xuICAgICAgICAgICAgICAgIC8vIEJ5IHJlbW92aW5nIElEcyBmcm9tIHRoZSBzbmFwc2hvdCBvYmplY3QgaGVyZSwgd2UgcHJvdGVjdCB0aGVtIGZyb21cbiAgICAgICAgICAgICAgICAvLyBnZXR0aW5nIHJlbW92ZWQgZnJvbSB0aGUgcm9vdCBzdG9yZSBsYXllciBiZWxvdy5cbiAgICAgICAgICAgICAgICBkZWxldGUgc25hcHNob3RbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGlkc1RvUmVtb3ZlID0gT2JqZWN0LmtleXMoc25hcHNob3QpO1xuICAgICAgICBpZiAoaWRzVG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgcm9vdF8xID0gdGhpcztcbiAgICAgICAgICAgIHdoaWxlIChyb290XzEgaW5zdGFuY2VvZiBMYXllcilcbiAgICAgICAgICAgICAgICByb290XzEgPSByb290XzEucGFyZW50O1xuICAgICAgICAgICAgaWRzVG9SZW1vdmUuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIHJvb3RfMS5kZWxldGUoaWQpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaWRzVG9SZW1vdmU7XG4gICAgfTtcbiAgICBFbnRpdHlTdG9yZS5wcm90b3R5cGUuZmluZENoaWxkUmVmSWRzID0gZnVuY3Rpb24gKGRhdGFJZCkge1xuICAgICAgICBpZiAoIWhhc093bi5jYWxsKHRoaXMucmVmcywgZGF0YUlkKSkge1xuICAgICAgICAgICAgdmFyIGZvdW5kXzEgPSAodGhpcy5yZWZzW2RhdGFJZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgICAgICAgICAgIHZhciByb290ID0gdGhpcy5kYXRhW2RhdGFJZF07XG4gICAgICAgICAgICBpZiAoIXJvb3QpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kXzE7XG4gICAgICAgICAgICB2YXIgd29ya1NldF8xID0gbmV3IFNldChbcm9vdF0pO1xuICAgICAgICAgICAgLy8gV2l0aGluIHRoZSBzdG9yZSwgb25seSBhcnJheXMgYW5kIG9iamVjdHMgY2FuIGNvbnRhaW4gY2hpbGQgZW50aXR5XG4gICAgICAgICAgICAvLyByZWZlcmVuY2VzLCBzbyB3ZSBjYW4gcHJ1bmUgdGhlIHRyYXZlcnNhbCB1c2luZyB0aGlzIHByZWRpY2F0ZTpcbiAgICAgICAgICAgIHdvcmtTZXRfMS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2Uob2JqKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3VuZF8xW29iai5fX3JlZl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBJbiByYXJlIGNhc2VzLCBhIHsgX19yZWYgfSBSZWZlcmVuY2Ugb2JqZWN0IG1heSBoYXZlIG90aGVyIGZpZWxkcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBvZnRlbiBpbmRpY2F0ZXMgYSBtaXNtZXJnaW5nIG9mIFJlZmVyZW5jZXMgd2l0aCBTdG9yZU9iamVjdHMsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBnYXJiYWdlIGNvbGxlY3Rpb24gc2hvdWxkIG5vdCBiZSBmb29sZWQgYnkgYSBzdHJheSBfX3JlZlxuICAgICAgICAgICAgICAgICAgICAvLyBwcm9wZXJ0eSBpbiBhIFN0b3JlT2JqZWN0IChpZ25vcmluZyBhbGwgdGhlIG90aGVyIGZpZWxkcyBqdXN0XG4gICAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIFN0b3JlT2JqZWN0IGxvb2tzIGxpa2UgYSBSZWZlcmVuY2UpLiBUbyBhdm9pZCB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHByZW1hdHVyZSB0ZXJtaW5hdGlvbiBvZiBmaW5kQ2hpbGRSZWZJZHMgcmVjdXJzaW9uLCB3ZSBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gdGhlIGNvZGUgYmVsb3csIHdoaWNoIHdpbGwgaGFuZGxlIGFueSBvdGhlciBwcm9wZXJ0aWVzIG9mIG9iai5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzTm9uTnVsbE9iamVjdChvYmopKSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gYWRkIHByaW1pdGl2ZSB2YWx1ZXMgdG8gdGhlIHdvcmtTZXQsIHNpbmNlIHRoZXkgY2Fubm90XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250YWluIHJlZmVyZW5jZSBvYmplY3RzLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm9uTnVsbE9iamVjdChjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrU2V0XzEuYWRkKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVmc1tkYXRhSWRdO1xuICAgIH07XG4gICAgRW50aXR5U3RvcmUucHJvdG90eXBlLm1ha2VDYWNoZUtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JvdXAua2V5TWFrZXIubG9va3VwQXJyYXkoYXJndW1lbnRzKTtcbiAgICB9O1xuICAgIHJldHVybiBFbnRpdHlTdG9yZTtcbn0oKSk7XG5leHBvcnQgeyBFbnRpdHlTdG9yZSB9O1xuLy8gQSBzaW5nbGUgQ2FjaGVHcm91cCByZXByZXNlbnRzIGEgc2V0IG9mIG9uZSBvciBtb3JlIEVudGl0eVN0b3JlIG9iamVjdHMsXG4vLyB0eXBpY2FsbHkgdGhlIFJvb3Qgc3RvcmUgaW4gYSBDYWNoZUdyb3VwIGJ5IGl0c2VsZiwgYW5kIGFsbCBhY3RpdmUgTGF5ZXJcbi8vIHN0b3JlcyBpbiBhIGdyb3VwIHRvZ2V0aGVyLiBBIHNpbmdsZSBFbnRpdHlTdG9yZSBvYmplY3QgYmVsb25ncyB0byBvbmx5XG4vLyBvbmUgQ2FjaGVHcm91cCwgc3RvcmUuZ3JvdXAuIFRoZSBDYWNoZUdyb3VwIGlzIHJlc3BvbnNpYmxlIGZvciB0cmFja2luZ1xuLy8gZGVwZW5kZW5jaWVzLCBzbyBzdG9yZS5ncm91cCBpcyBoZWxwZnVsIGZvciBnZW5lcmF0aW5nIHVuaXF1ZSBrZXlzIGZvclxuLy8gY2FjaGVkIHJlc3VsdHMgdGhhdCBuZWVkIHRvIGJlIGludmFsaWRhdGVkIHdoZW4vaWYgdGhvc2UgZGVwZW5kZW5jaWVzXG4vLyBjaGFuZ2UuIElmIHdlIHVzZWQgdGhlIEVudGl0eVN0b3JlIG9iamVjdHMgdGhlbXNlbHZlcyBhcyBjYWNoZSBrZXlzICh0aGF0XG4vLyBpcywgc3RvcmUgcmF0aGVyIHRoYW4gc3RvcmUuZ3JvdXApLCB0aGUgY2FjaGUgd291bGQgYmVjb21lIHVubmVjZXNzYXJpbHlcbi8vIGZyYWdtZW50ZWQgYnkgYWxsIHRoZSBkaWZmZXJlbnQgTGF5ZXIgb2JqZWN0cy4gSW5zdGVhZCwgdGhlIENhY2hlR3JvdXBcbi8vIGFwcHJvYWNoIGFsbG93cyBhbGwgb3B0aW1pc3RpYyBMYXllciBvYmplY3RzIGluIHRoZSBzYW1lIGxpbmtlZCBsaXN0IHRvXG4vLyBiZWxvbmcgdG8gb25lIENhY2hlR3JvdXAsIHdpdGggdGhlIG5vbi1vcHRpbWlzdGljIFJvb3Qgb2JqZWN0IGJlbG9uZ2luZ1xuLy8gdG8gYW5vdGhlciBDYWNoZUdyb3VwLCBhbGxvd2luZyByZXN1bHRDYWNoaW5nIGRlcGVuZGVuY2llcyB0byBiZSB0cmFja2VkXG4vLyBzZXBhcmF0ZWx5IGZvciBvcHRpbWlzdGljIGFuZCBub24tb3B0aW1pc3RpYyBlbnRpdHkgZGF0YS5cbnZhciBDYWNoZUdyb3VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENhY2hlR3JvdXAoY2FjaGluZywgcGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQgPT09IHZvaWQgMCkgeyBwYXJlbnQgPSBudWxsOyB9XG4gICAgICAgIHRoaXMuY2FjaGluZyA9IGNhY2hpbmc7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmQgPSBudWxsO1xuICAgICAgICB0aGlzLnJlc2V0Q2FjaGluZygpO1xuICAgIH1cbiAgICBDYWNoZUdyb3VwLnByb3RvdHlwZS5yZXNldENhY2hpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZCA9IHRoaXMuY2FjaGluZyA/IGRlcCgpIDogbnVsbDtcbiAgICAgICAgdGhpcy5rZXlNYWtlciA9IG5ldyBUcmllKGNhblVzZVdlYWtNYXApO1xuICAgIH07XG4gICAgQ2FjaGVHcm91cC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZCkge1xuICAgICAgICAgICAgdGhpcy5kKG1ha2VEZXBLZXkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgaWYgKGZpZWxkTmFtZSAhPT0gc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICAvLyBGaWVsZHMgd2l0aCBhcmd1bWVudHMgdGhhdCBjb250cmlidXRlIGV4dHJhIGlkZW50aWZ5aW5nXG4gICAgICAgICAgICAgICAgLy8gaW5mb3JtYXRpb24gdG8gdGhlIGZpZWxkTmFtZSAodGh1cyBmb3JtaW5nIHRoZSBzdG9yZUZpZWxkTmFtZSlcbiAgICAgICAgICAgICAgICAvLyBkZXBlbmQgbm90IG9ubHkgb24gdGhlIGZ1bGwgc3RvcmVGaWVsZE5hbWUgYnV0IGFsc28gb24gdGhlXG4gICAgICAgICAgICAgICAgLy8gc2hvcnQgZmllbGROYW1lLCBzbyB0aGUgZmllbGQgY2FuIGJlIGludmFsaWRhdGVkIHVzaW5nIGVpdGhlclxuICAgICAgICAgICAgICAgIC8vIGxldmVsIG9mIHNwZWNpZmljaXR5LlxuICAgICAgICAgICAgICAgIHRoaXMuZChtYWtlRGVwS2V5KGRhdGFJZCwgZmllbGROYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5kZXBlbmQoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENhY2hlR3JvdXAucHJvdG90eXBlLmRpcnR5ID0gZnVuY3Rpb24gKGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZCkge1xuICAgICAgICAgICAgdGhpcy5kLmRpcnR5KG1ha2VEZXBLZXkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSksIFxuICAgICAgICAgICAgLy8gV2hlbiBzdG9yZUZpZWxkTmFtZSA9PT0gXCJfX2V4aXN0c1wiLCB0aGF0IG1lYW5zIHRoZSBlbnRpdHkgaWRlbnRpZmllZFxuICAgICAgICAgICAgLy8gYnkgZGF0YUlkIGhhcyBlaXRoZXIgZGlzYXBwZWFyZWQgZnJvbSB0aGUgY2FjaGUgb3Igd2FzIG5ld2x5IGFkZGVkLFxuICAgICAgICAgICAgLy8gc28gdGhlIHJlc3VsdCBjYWNoaW5nIHN5c3RlbSB3b3VsZCBkbyB3ZWxsIHRvIFwiZm9yZ2V0IGV2ZXJ5dGhpbmcgaXRcbiAgICAgICAgICAgIC8vIGtub3dzXCIgYWJvdXQgdGhhdCBvYmplY3QuIFRvIGFjaGlldmUgdGhhdCBraW5kIG9mIGludmFsaWRhdGlvbiwgd2VcbiAgICAgICAgICAgIC8vIG5vdCBvbmx5IGRpcnR5IHRoZSBhc3NvY2lhdGVkIHJlc3VsdCBjYWNoZSBlbnRyeSwgYnV0IGFsc28gcmVtb3ZlIGl0XG4gICAgICAgICAgICAvLyBjb21wbGV0ZWx5IGZyb20gdGhlIGRlcGVuZGVuY3kgZ3JhcGguIEZvciB0aGUgb3B0aW1pc20gaW1wbGVtZW50YXRpb25cbiAgICAgICAgICAgIC8vIGRldGFpbHMsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmVuamFtbi9vcHRpbWlzbS9wdWxsLzE5NS5cbiAgICAgICAgICAgIHN0b3JlRmllbGROYW1lID09PSBcIl9fZXhpc3RzXCIgPyBcImZvcmdldFwiIDogXCJzZXREaXJ0eVwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIENhY2hlR3JvdXA7XG59KCkpO1xuZnVuY3Rpb24gbWFrZURlcEtleShkYXRhSWQsIHN0b3JlRmllbGROYW1lKSB7XG4gICAgLy8gU2luY2UgZmllbGQgbmFtZXMgY2Fubm90IGhhdmUgJyMnIGNoYXJhY3RlcnMgaW4gdGhlbSwgdGhpcyBtZXRob2RcbiAgICAvLyBvZiBqb2luaW5nIHRoZSBmaWVsZCBuYW1lIGFuZCB0aGUgSUQgc2hvdWxkIGJlIHVuYW1iaWd1b3VzLCBhbmQgbXVjaFxuICAgIC8vIGNoZWFwZXIgdGhhbiBKU09OLnN0cmluZ2lmeShbZGF0YUlkLCBmaWVsZE5hbWVdKS5cbiAgICByZXR1cm4gc3RvcmVGaWVsZE5hbWUgKyBcIiNcIiArIGRhdGFJZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXliZURlcGVuZE9uRXhpc3RlbmNlT2ZFbnRpdHkoc3RvcmUsIGVudGl0eUlkKSB7XG4gICAgaWYgKHN1cHBvcnRzUmVzdWx0Q2FjaGluZyhzdG9yZSkpIHtcbiAgICAgICAgLy8gV2UgdXNlIHRoaXMgcHNldWRvLWZpZWxkIF9fZXhpc3RzIGVsc2V3aGVyZSBpbiB0aGUgRW50aXR5U3RvcmUgY29kZSB0b1xuICAgICAgICAvLyByZXByZXNlbnQgY2hhbmdlcyBpbiB0aGUgZXhpc3RlbmNlIG9mIHRoZSBlbnRpdHkgb2JqZWN0IGlkZW50aWZpZWQgYnlcbiAgICAgICAgLy8gZW50aXR5SWQuIFRoaXMgZGVwZW5kZW5jeSBnZXRzIHJlbGlhYmx5IGRpcnRpZWQgd2hlbmV2ZXIgYW4gb2JqZWN0IHdpdGhcbiAgICAgICAgLy8gdGhpcyBJRCBpcyBkZWxldGVkIChvciBuZXdseSBjcmVhdGVkKSB3aXRoaW4gdGhpcyBncm91cCwgc28gYW55IHJlc3VsdFxuICAgICAgICAvLyBjYWNoZSBlbnRyaWVzIChmb3IgZXhhbXBsZSwgU3RvcmVSZWFkZXIjZXhlY3V0ZVNlbGVjdGlvblNldCByZXN1bHRzKSB0aGF0XG4gICAgICAgIC8vIGRlcGVuZCBvbiBfX2V4aXN0cyBmb3IgdGhpcyBlbnRpdHlJZCB3aWxsIGdldCBkaXJ0aWVkIGFzIHdlbGwsIGxlYWRpbmcgdG9cbiAgICAgICAgLy8gdGhlIGV2ZW50dWFsIHJlY29tcHV0YXRpb24gKGluc3RlYWQgb2YgcmV1c2UpIG9mIHRob3NlIHJlc3VsdCBvYmplY3RzIHRoZVxuICAgICAgICAvLyBuZXh0IHRpbWUgc29tZW9uZSByZWFkcyB0aGVtIGZyb20gdGhlIGNhY2hlLlxuICAgICAgICBzdG9yZS5ncm91cC5kZXBlbmQoZW50aXR5SWQsIFwiX19leGlzdHNcIik7XG4gICAgfVxufVxuKGZ1bmN0aW9uIChFbnRpdHlTdG9yZSkge1xuICAgIC8vIFJlZmVyIHRvIHRoaXMgY2xhc3MgYXMgRW50aXR5U3RvcmUuUm9vdCBvdXRzaWRlIHRoaXMgbmFtZXNwYWNlLlxuICAgIHZhciBSb290ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICBfX2V4dGVuZHMoUm9vdCwgX3N1cGVyKTtcbiAgICAgICAgZnVuY3Rpb24gUm9vdChfYSkge1xuICAgICAgICAgICAgdmFyIHBvbGljaWVzID0gX2EucG9saWNpZXMsIF9iID0gX2EucmVzdWx0Q2FjaGluZywgcmVzdWx0Q2FjaGluZyA9IF9iID09PSB2b2lkIDAgPyB0cnVlIDogX2IsIHNlZWQgPSBfYS5zZWVkO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9saWNpZXMsIG5ldyBDYWNoZUdyb3VwKHJlc3VsdENhY2hpbmcpKSB8fCB0aGlzO1xuICAgICAgICAgICAgX3RoaXMuc3R1bXAgPSBuZXcgU3R1bXAoX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMuc3RvcmFnZVRyaWUgPSBuZXcgVHJpZShjYW5Vc2VXZWFrTWFwKTtcbiAgICAgICAgICAgIGlmIChzZWVkKVxuICAgICAgICAgICAgICAgIF90aGlzLnJlcGxhY2Uoc2VlZCk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgUm9vdC5wcm90b3R5cGUuYWRkTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXJJZCwgcmVwbGF5KSB7XG4gICAgICAgICAgICAvLyBBZGRpbmcgYW4gb3B0aW1pc3RpYyBMYXllciBvbiB0b3Agb2YgdGhlIFJvb3QgYWN0dWFsbHkgYWRkcyB0aGUgTGF5ZXJcbiAgICAgICAgICAgIC8vIG9uIHRvcCBvZiB0aGUgU3R1bXAsIHNvIHRoZSBTdHVtcCBhbHdheXMgY29tZXMgYmV0d2VlbiB0aGUgUm9vdCBhbmRcbiAgICAgICAgICAgIC8vIGFueSBMYXllciBvYmplY3RzIHRoYXQgd2UndmUgYWRkZWQuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHVtcC5hZGRMYXllcihsYXllcklkLCByZXBsYXkpO1xuICAgICAgICB9O1xuICAgICAgICBSb290LnByb3RvdHlwZS5yZW1vdmVMYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIE5ldmVyIHJlbW92ZSB0aGUgcm9vdCBsYXllci5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBSb290LnByb3RvdHlwZS5nZXRTdG9yYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZVRyaWUubG9va3VwQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFJvb3Q7XG4gICAgfShFbnRpdHlTdG9yZSkpO1xuICAgIEVudGl0eVN0b3JlLlJvb3QgPSBSb290O1xufSkoRW50aXR5U3RvcmUgfHwgKEVudGl0eVN0b3JlID0ge30pKTtcbi8vIE5vdCBleHBvcnRlZCwgc2luY2UgYWxsIExheWVyIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBieSB0aGUgYWRkTGF5ZXIgbWV0aG9kXG4vLyBvZiB0aGUgRW50aXR5U3RvcmUuUm9vdCBjbGFzcy5cbnZhciBMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTGF5ZXIoaWQsIHBhcmVudCwgcmVwbGF5LCBncm91cCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJlbnQucG9saWNpZXMsIGdyb3VwKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5pZCA9IGlkO1xuICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIF90aGlzLnJlcGxheSA9IHJlcGxheTtcbiAgICAgICAgX3RoaXMuZ3JvdXAgPSBncm91cDtcbiAgICAgICAgcmVwbGF5KF90aGlzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBMYXllci5wcm90b3R5cGUuYWRkTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXJJZCwgcmVwbGF5KSB7XG4gICAgICAgIHJldHVybiBuZXcgTGF5ZXIobGF5ZXJJZCwgdGhpcywgcmVwbGF5LCB0aGlzLmdyb3VwKTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5yZW1vdmVMYXllciA9IGZ1bmN0aW9uIChsYXllcklkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vIFJlbW92ZSBhbGwgaW5zdGFuY2VzIG9mIHRoZSBnaXZlbiBpZCwgbm90IGp1c3QgdGhlIGZpcnN0IG9uZS5cbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50LnJlbW92ZUxheWVyKGxheWVySWQpO1xuICAgICAgICBpZiAobGF5ZXJJZCA9PT0gdGhpcy5pZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXAuY2FjaGluZykge1xuICAgICAgICAgICAgICAgIC8vIERpcnR5IGV2ZXJ5IElEIHdlJ3JlIHJlbW92aW5nLiBUZWNobmljYWxseSB3ZSBtaWdodCBiZSBhYmxlIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gZGlydHlpbmcgZmllbGRzIHRoYXQgaGF2ZSB2YWx1ZXMgaW4gaGlnaGVyIGxheWVycywgYnV0IHdlIGRvbid0IGhhdmVcbiAgICAgICAgICAgICAgICAvLyBlYXN5IGFjY2VzcyB0byBoaWdoZXIgbGF5ZXJzIGhlcmUsIGFuZCB3ZSdyZSBhYm91dCB0byByZWNyZWF0ZSB0aG9zZVxuICAgICAgICAgICAgICAgIC8vIGxheWVycyBhbnl3YXkgKHNlZSBwYXJlbnQuYWRkTGF5ZXIgYmVsb3cpLlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoZGF0YUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvd25TdG9yZU9iamVjdCA9IF90aGlzLmRhdGFbZGF0YUlkXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudFN0b3JlT2JqZWN0ID0gcGFyZW50W1wibG9va3VwXCJdKGRhdGFJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyZW50U3RvcmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBTdG9yZU9iamVjdCBpZGVudGlmaWVkIGJ5IGRhdGFJZCB3YXMgZGVmaW5lZCBpbiB0aGlzIGxheWVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgd2lsbCBiZSB1bmRlZmluZWQgaW4gdGhlIHBhcmVudCBsYXllciwgc28gd2UgY2FuIGRlbGV0ZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdob2xlIGVudGl0eSB1c2luZyB0aGlzLmRlbGV0ZShkYXRhSWQpLiBTaW5jZSB3ZSdyZSBhYm91dCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhyb3cgdGhpcyBsYXllciBhd2F5LCB0aGUgb25seSBnb2FsIG9mIHRoaXMgZGVsZXRpb24gaXMgdG8gZGlydHlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZW1vdmVkIGZpZWxkcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlbGV0ZShkYXRhSWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFvd25TdG9yZU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBsYXllciBoYWQgYW4gZW50cnkgZm9yIGRhdGFJZCBidXQgaXQgd2FzIHVuZGVmaW5lZCwgd2hpY2hcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lYW5zIHRoZSBlbnRpdHkgd2FzIGRlbGV0ZWQgaW4gdGhpcyBsYXllciwgYW5kIGl0J3MgYWJvdXQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlY29tZSB1bmRlbGV0ZWQgd2hlbiB3ZSByZW1vdmUgdGhpcyBsYXllciwgc28gd2UgbmVlZCB0byBkaXJ0eVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxsIGZpZWxkcyB0aGF0IGFyZSBhYm91dCB0byBiZSByZWV4cG9zZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIFwiX19leGlzdHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwYXJlbnRTdG9yZU9iamVjdCkuZm9yRWFjaChmdW5jdGlvbiAoc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG93blN0b3JlT2JqZWN0ICE9PSBwYXJlbnRTdG9yZU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgb3duU3RvcmVPYmplY3QgaXMgbm90IGV4YWN0bHkgdGhlIHNhbWUgYXMgcGFyZW50U3RvcmVPYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXJ0eSBhbnkgZmllbGRzIHdob3NlIHZhbHVlcyB3aWxsIGNoYW5nZSBhcyBhIHJlc3VsdCBvZiB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmFsLlxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMob3duU3RvcmVPYmplY3QpLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlRmllbGROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcXVhbChvd25TdG9yZU9iamVjdFtzdG9yZUZpZWxkTmFtZV0sIHBhcmVudFN0b3JlT2JqZWN0W3N0b3JlRmllbGROYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ3JvdXAuZGlydHkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm8gY2hhbmdlcyBhcmUgbmVjZXNzYXJ5IGlmIHRoZSBwYXJlbnQgY2hhaW4gcmVtYWlucyBpZGVudGljYWwuXG4gICAgICAgIGlmIChwYXJlbnQgPT09IHRoaXMucGFyZW50KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIC8vIFJlY3JlYXRlIHRoaXMgbGF5ZXIgb24gdG9wIG9mIHRoZSBuZXcgcGFyZW50LlxuICAgICAgICByZXR1cm4gcGFyZW50LmFkZExheWVyKHRoaXMuaWQsIHRoaXMucmVwbGF5KTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS50b09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLnBhcmVudC50b09iamVjdCgpKSwgdGhpcy5kYXRhKTtcbiAgICB9O1xuICAgIExheWVyLnByb3RvdHlwZS5maW5kQ2hpbGRSZWZJZHMgPSBmdW5jdGlvbiAoZGF0YUlkKSB7XG4gICAgICAgIHZhciBmcm9tUGFyZW50ID0gdGhpcy5wYXJlbnQuZmluZENoaWxkUmVmSWRzKGRhdGFJZCk7XG4gICAgICAgIHJldHVybiBoYXNPd24uY2FsbCh0aGlzLmRhdGEsIGRhdGFJZCkgPyBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZnJvbVBhcmVudCksIF9zdXBlci5wcm90b3R5cGUuZmluZENoaWxkUmVmSWRzLmNhbGwodGhpcywgZGF0YUlkKSkgOiBmcm9tUGFyZW50O1xuICAgIH07XG4gICAgTGF5ZXIucHJvdG90eXBlLmdldFN0b3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIHdoaWxlIChwLnBhcmVudClcbiAgICAgICAgICAgIHAgPSBwLnBhcmVudDtcbiAgICAgICAgcmV0dXJuIHAuZ2V0U3RvcmFnZS5hcHBseShwLCBcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgcmV0dXJuIExheWVyO1xufShFbnRpdHlTdG9yZSkpO1xuLy8gUmVwcmVzZW50cyBhIExheWVyIHBlcm1hbmVudGx5IGluc3RhbGxlZCBqdXN0IGFib3ZlIHRoZSBSb290LCB3aGljaCBhbGxvd3Ncbi8vIHJlYWRpbmcgb3B0aW1pc3RpY2FsbHkgKGFuZCByZWdpc3RlcmluZyBvcHRpbWlzdGljIGRlcGVuZGVuY2llcykgZXZlbiB3aGVuXG4vLyBubyBvcHRpbWlzdGljIGxheWVycyBhcmUgY3VycmVudGx5IGFjdGl2ZS4gVGhlIHN0dW1wLmdyb3VwIENhY2hlR3JvdXAgb2JqZWN0XG4vLyBpcyBzaGFyZWQgYnkgYW55L2FsbCBMYXllciBvYmplY3RzIGFkZGVkIG9uIHRvcCBvZiB0aGUgU3R1bXAuXG52YXIgU3R1bXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN0dW1wLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN0dW1wKHJvb3QpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIFwiRW50aXR5U3RvcmUuU3R1bXBcIiwgcm9vdCwgZnVuY3Rpb24gKCkgeyB9LCBuZXcgQ2FjaGVHcm91cChyb290Lmdyb3VwLmNhY2hpbmcsIHJvb3QuZ3JvdXApKSB8fCB0aGlzO1xuICAgIH1cbiAgICBTdHVtcC5wcm90b3R5cGUucmVtb3ZlTGF5ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIE5ldmVyIHJlbW92ZSB0aGUgU3R1bXAgbGF5ZXIuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgU3R1bXAucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24gKG9sZGVyLCBuZXdlcikge1xuICAgICAgICAvLyBXZSBuZXZlciB3YW50IHRvIHdyaXRlIGFueSBkYXRhIGludG8gdGhlIFN0dW1wLCBzbyB3ZSBmb3J3YXJkIGFueSBtZXJnZVxuICAgICAgICAvLyBjYWxscyB0byB0aGUgUm9vdCBpbnN0ZWFkLiBBbm90aGVyIG9wdGlvbiBoZXJlIHdvdWxkIGJlIHRvIHRocm93IGFuXG4gICAgICAgIC8vIGV4Y2VwdGlvbiwgYnV0IHRoZSB0b1JlZmVyZW5jZShvYmplY3QsIHRydWUpIGZ1bmN0aW9uIGNhbiBzb21ldGltZXNcbiAgICAgICAgLy8gdHJpZ2dlciBTdHVtcCB3cml0ZXMgKHdoaWNoIHVzZWQgdG8gYmUgUm9vdCB3cml0ZXMsIGJlZm9yZSB0aGUgU3R1bXBcbiAgICAgICAgLy8gY29uY2VwdCB3YXMgaW50cm9kdWNlZCkuXG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5tZXJnZShvbGRlciwgbmV3ZXIpO1xuICAgIH07XG4gICAgcmV0dXJuIFN0dW1wO1xufShMYXllcikpO1xuZnVuY3Rpb24gc3RvcmVPYmplY3RSZWNvbmNpbGVyKGV4aXN0aW5nT2JqZWN0LCBpbmNvbWluZ09iamVjdCwgcHJvcGVydHkpIHtcbiAgICB2YXIgZXhpc3RpbmdWYWx1ZSA9IGV4aXN0aW5nT2JqZWN0W3Byb3BlcnR5XTtcbiAgICB2YXIgaW5jb21pbmdWYWx1ZSA9IGluY29taW5nT2JqZWN0W3Byb3BlcnR5XTtcbiAgICAvLyBXaGVyZXZlciB0aGVyZSBpcyBhIGtleSBjb2xsaXNpb24sIHByZWZlciB0aGUgaW5jb21pbmcgdmFsdWUsIHVubGVzc1xuICAgIC8vIGl0IGlzIGRlZXBseSBlcXVhbCB0byB0aGUgZXhpc3RpbmcgdmFsdWUuIEl0J3Mgd29ydGggY2hlY2tpbmcgZGVlcFxuICAgIC8vIGVxdWFsaXR5IGhlcmUgKGV2ZW4gdGhvdWdoIGJsaW5kbHkgcmV0dXJuaW5nIGluY29taW5nIHdvdWxkIGJlXG4gICAgLy8gbG9naWNhbGx5IGNvcnJlY3QpIGJlY2F1c2UgcHJlc2VydmluZyB0aGUgcmVmZXJlbnRpYWwgaWRlbnRpdHkgb2ZcbiAgICAvLyBleGlzdGluZyBkYXRhIGNhbiBwcmV2ZW50IG5lZWRsZXNzIHJlcmVhZGluZyBhbmQgcmVyZW5kZXJpbmcuXG4gICAgcmV0dXJuIGVxdWFsKGV4aXN0aW5nVmFsdWUsIGluY29taW5nVmFsdWUpID8gZXhpc3RpbmdWYWx1ZSA6IGluY29taW5nVmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gc3VwcG9ydHNSZXN1bHRDYWNoaW5nKHN0b3JlKSB7XG4gICAgLy8gV2hlbiByZXN1bHQgY2FjaGluZyBpcyBkaXNhYmxlZCwgc3RvcmUuZGVwZW5kIHdpbGwgYmUgbnVsbC5cbiAgICByZXR1cm4gISEoc3RvcmUgaW5zdGFuY2VvZiBFbnRpdHlTdG9yZSAmJiBzdG9yZS5ncm91cC5jYWNoaW5nKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVudGl0eVN0b3JlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFRyaWUgfSBmcm9tIFwiQHdyeS90cmllXCI7XG5pbXBvcnQgeyBjYW5Vc2VXZWFrTWFwLCBjYW5Vc2VXZWFrU2V0LCBpc05vbk51bGxPYmplY3QgYXMgaXNPYmplY3RPckFycmF5LCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5mdW5jdGlvbiBzaGFsbG93Q29weSh2YWx1ZSkge1xuICAgIGlmIChpc09iamVjdE9yQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBpc0FycmF5KHZhbHVlKSA/XG4gICAgICAgICAgICB2YWx1ZS5zbGljZSgwKVxuICAgICAgICAgICAgOiBfX2Fzc2lnbih7IF9fcHJvdG9fXzogT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSB9LCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbi8vIFdoZW4gcHJvZ3JhbW1lcnMgdGFsayBhYm91dCB0aGUgXCJjYW5vbmljYWwgZm9ybVwiIG9mIGFuIG9iamVjdCwgdGhleVxuLy8gdXN1YWxseSBoYXZlIHRoZSBmb2xsb3dpbmcgbWVhbmluZyBpbiBtaW5kLCB3aGljaCBJJ3ZlIGNvcGllZCBmcm9tXG4vLyBodHRwczovL2VuLndpa3Rpb25hcnkub3JnL3dpa2kvY2Fub25pY2FsX2Zvcm06XG4vL1xuLy8gMS4gQSBzdGFuZGFyZCBvciBub3JtYWwgcHJlc2VudGF0aW9uIG9mIGEgbWF0aGVtYXRpY2FsIGVudGl0eSBbb3Jcbi8vICAgIG9iamVjdF0uIEEgY2Fub25pY2FsIGZvcm0gaXMgYW4gZWxlbWVudCBvZiBhIHNldCBvZiByZXByZXNlbnRhdGl2ZXNcbi8vICAgIG9mIGVxdWl2YWxlbmNlIGNsYXNzZXMgb2YgZm9ybXMgc3VjaCB0aGF0IHRoZXJlIGlzIGEgZnVuY3Rpb24gb3Jcbi8vICAgIHByb2NlZHVyZSB3aGljaCBwcm9qZWN0cyBldmVyeSBlbGVtZW50IG9mIGVhY2ggZXF1aXZhbGVuY2UgY2xhc3Ncbi8vICAgIG9udG8gdGhhdCBvbmUgZWxlbWVudCwgdGhlIGNhbm9uaWNhbCBmb3JtIG9mIHRoYXQgZXF1aXZhbGVuY2Vcbi8vICAgIGNsYXNzLiBUaGUgY2Fub25pY2FsIGZvcm0gaXMgZXhwZWN0ZWQgdG8gYmUgc2ltcGxlciB0aGFuIHRoZSByZXN0IG9mXG4vLyAgICB0aGUgZm9ybXMgaW4gc29tZSB3YXkuXG4vL1xuLy8gVGhhdCdzIGEgbG9uZy13aW5kZWQgd2F5IG9mIHNheWluZyBhbnkgdHdvIG9iamVjdHMgdGhhdCBoYXZlIHRoZSBzYW1lXG4vLyBjYW5vbmljYWwgZm9ybSBtYXkgYmUgY29uc2lkZXJlZCBlcXVpdmFsZW50LCBldmVuIGlmIHRoZXkgYXJlICE9PSxcbi8vIHdoaWNoIHVzdWFsbHkgbWVhbnMgdGhlIG9iamVjdHMgYXJlIHN0cnVjdHVyYWxseSBlcXVpdmFsZW50IChkZWVwbHlcbi8vIGVxdWFsKSwgYnV0IGRvbid0IG5lY2Vzc2FyaWx5IHVzZSB0aGUgc2FtZSBtZW1vcnkuXG4vL1xuLy8gTGlrZSBhIGxpdGVyYXJ5IG9yIG11c2ljYWwgY2Fub24sIHRoaXMgT2JqZWN0Q2Fub24gY2xhc3MgcmVwcmVzZW50cyBhXG4vLyBjb2xsZWN0aW9uIG9mIHVuaXF1ZSBjYW5vbmljYWwgaXRlbXMgKEphdmFTY3JpcHQgb2JqZWN0cyksIHdpdGggdGhlXG4vLyBpbXBvcnRhbnQgcHJvcGVydHkgdGhhdCBjYW5vbi5hZG1pdChhKSA9PT0gY2Fub24uYWRtaXQoYikgaWYgYSBhbmQgYlxuLy8gYXJlIGRlZXBseSBlcXVhbCB0byBlYWNoIG90aGVyLiBJbiB0ZXJtcyBvZiB0aGUgZGVmaW5pdGlvbiBhYm92ZSwgdGhlXG4vLyBjYW5vbi5hZG1pdCBtZXRob2QgaXMgdGhlIFwiZnVuY3Rpb24gb3IgcHJvY2VkdXJlIHdoaWNoIHByb2plY3RzIGV2ZXJ5XCJcbi8vIG9iamVjdCBcIm9udG8gdGhhdCBvbmUgZWxlbWVudCwgdGhlIGNhbm9uaWNhbCBmb3JtLlwiXG4vL1xuLy8gSW4gdGhlIHdvcnN0IGNhc2UsIHRoZSBjYW5vbmljYWxpemF0aW9uIHByb2Nlc3MgbWF5IGludm9sdmUgbG9va2luZyBhdFxuLy8gZXZlcnkgcHJvcGVydHkgaW4gdGhlIHByb3ZpZGVkIG9iamVjdCB0cmVlLCBzbyBpdCB0YWtlcyB0aGUgc2FtZSBvcmRlclxuLy8gb2YgdGltZSBhcyBkZWVwIGVxdWFsaXR5IGNoZWNraW5nLiBGb3J0dW5hdGVseSwgYWxyZWFkeS1jYW5vbmljYWxpemVkXG4vLyBvYmplY3RzIGFyZSByZXR1cm5lZCBpbW1lZGlhdGVseSBmcm9tIGNhbm9uLmFkbWl0LCBzbyB0aGUgcHJlc2VuY2Ugb2Zcbi8vIGNhbm9uaWNhbCBzdWJ0cmVlcyB0ZW5kcyB0byBzcGVlZCB1cCBjYW5vbmljYWxpemF0aW9uLlxuLy9cbi8vIFNpbmNlIGNvbnN1bWVycyBvZiBjYW5vbmljYWwgb2JqZWN0cyBjYW4gY2hlY2sgZm9yIGRlZXAgZXF1YWxpdHkgaW5cbi8vIGNvbnN0YW50IHRpbWUsIGNhbm9uaWNhbGl6aW5nIGNhY2hlIHJlc3VsdHMgY2FuIG1hc3NpdmVseSBpbXByb3ZlIHRoZVxuLy8gcGVyZm9ybWFuY2Ugb2YgYXBwbGljYXRpb24gY29kZSB0aGF0IHNraXBzIHJlLXJlbmRlcmluZyB1bmNoYW5nZWRcbi8vIHJlc3VsdHMsIHN1Y2ggYXMgXCJwdXJlXCIgVUkgY29tcG9uZW50cyBpbiBhIGZyYW1ld29yayBsaWtlIFJlYWN0LlxuLy9cbi8vIE9mIGNvdXJzZSwgc2luY2UgY2Fub25pY2FsIG9iamVjdHMgbWF5IGJlIHNoYXJlZCB3aWRlbHkgYmV0d2VlblxuLy8gdW5yZWxhdGVkIGNvbnN1bWVycywgaXQncyBpbXBvcnRhbnQgdG8gdGhpbmsgb2YgdGhlbSBhcyBpbW11dGFibGUsIGV2ZW5cbi8vIHRob3VnaCB0aGV5IGFyZSBub3QgYWN0dWFsbHkgZnJvemVuIHdpdGggT2JqZWN0LmZyZWV6ZSBpbiBwcm9kdWN0aW9uLFxuLy8gZHVlIHRvIHRoZSBleHRyYSBwZXJmb3JtYW5jZSBvdmVyaGVhZCB0aGF0IGNvbWVzIHdpdGggZnJvemVuIG9iamVjdHMuXG4vL1xuLy8gQ3VzdG9tIHNjYWxhciBvYmplY3RzIHdob3NlIGludGVybmFsIGNsYXNzIG5hbWUgaXMgbmVpdGhlciBBcnJheSBub3Jcbi8vIE9iamVjdCBjYW4gYmUgaW5jbHVkZWQgc2FmZWx5IGluIHRoZSBhZG1pdHRlZCB0cmVlLCBidXQgdGhleSB3aWxsIG5vdFxuLy8gYmUgcmVwbGFjZWQgd2l0aCBhIGNhbm9uaWNhbCB2ZXJzaW9uICh0byBwdXQgaXQgYW5vdGhlciB3YXksIHRoZXkgYXJlXG4vLyBhc3N1bWVkIHRvIGJlIGNhbm9uaWNhbCBhbHJlYWR5KS5cbi8vXG4vLyBJZiB3ZSBpZ25vcmUgY3VzdG9tIG9iamVjdHMsIG5vIGRldGVjdGlvbiBvZiBjeWNsZXMgb3IgcmVwZWF0ZWQgb2JqZWN0XG4vLyByZWZlcmVuY2VzIGlzIGN1cnJlbnRseSByZXF1aXJlZCBieSB0aGUgU3RvcmVSZWFkZXIgY2xhc3MsIHNpbmNlXG4vLyBHcmFwaFFMIHJlc3VsdCBvYmplY3RzIGFyZSBKU09OLXNlcmlhbGl6YWJsZSB0cmVlcyAoYW5kIHRodXMgY29udGFpblxuLy8gbmVpdGhlciBjeWNsZXMgbm9yIHJlcGVhdGVkIHN1YnRyZWVzKSwgc28gd2UgY2FuIGF2b2lkIHRoZSBjb21wbGV4aXR5XG4vLyBvZiBrZWVwaW5nIHRyYWNrIG9mIG9iamVjdHMgd2UndmUgYWxyZWFkeSBzZWVuIGR1cmluZyB0aGUgcmVjdXJzaW9uIG9mXG4vLyB0aGUgYWRtaXQgbWV0aG9kLlxuLy9cbi8vIEluIHRoZSBmdXR1cmUsIHdlIG1heSBjb25zaWRlciBhZGRpbmcgYWRkaXRpb25hbCBjYXNlcyB0byB0aGUgc3dpdGNoXG4vLyBzdGF0ZW1lbnQgdG8gaGFuZGxlIG90aGVyIGNvbW1vbiBvYmplY3QgdHlwZXMsIHN1Y2ggYXMgXCJbb2JqZWN0IERhdGVdXCJcbi8vIG9iamVjdHMsIGFzIG5lZWRlZC5cbnZhciBPYmplY3RDYW5vbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPYmplY3RDYW5vbigpIHtcbiAgICAgICAgLy8gU2V0IG9mIGFsbCBjYW5vbmljYWwgb2JqZWN0cyB0aGlzIE9iamVjdENhbm9uIGhhcyBhZG1pdHRlZCwgYWxsb3dpbmdcbiAgICAgICAgLy8gY2Fub24uYWRtaXQgdG8gcmV0dXJuIHByZXZpb3VzbHktY2Fub25pY2FsaXplZCBvYmplY3RzIGltbWVkaWF0ZWx5LlxuICAgICAgICB0aGlzLmtub3duID0gbmV3IChjYW5Vc2VXZWFrU2V0ID8gV2Vha1NldCA6IFNldCkoKTtcbiAgICAgICAgLy8gRWZmaWNpZW50IHN0b3JhZ2UvbG9va3VwIHN0cnVjdHVyZSBmb3IgY2Fub25pY2FsIG9iamVjdHMuXG4gICAgICAgIHRoaXMucG9vbCA9IG5ldyBUcmllKGNhblVzZVdlYWtNYXApO1xuICAgICAgICAvLyBNYWtlIHRoZSBPYmplY3RDYW5vbiBhc3N1bWUgdGhpcyB2YWx1ZSBoYXMgYWxyZWFkeSBiZWVuXG4gICAgICAgIC8vIGNhbm9uaWNhbGl6ZWQuXG4gICAgICAgIHRoaXMucGFzc2VzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgLy8gQXJyYXlzIHRoYXQgY29udGFpbiB0aGUgc2FtZSBlbGVtZW50cyBpbiBhIGRpZmZlcmVudCBvcmRlciBjYW4gc2hhcmVcbiAgICAgICAgLy8gdGhlIHNhbWUgU29ydGVkS2V5c0luZm8gb2JqZWN0LCB0byBzYXZlIG1lbW9yeS5cbiAgICAgICAgdGhpcy5rZXlzQnlKU09OID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyBUaGlzIGhhcyB0byBjb21lIGxhc3QgYmVjYXVzZSBpdCBkZXBlbmRzIG9uIGtleXNCeUpTT04uXG4gICAgICAgIHRoaXMuZW1wdHkgPSB0aGlzLmFkbWl0KHt9KTtcbiAgICB9XG4gICAgT2JqZWN0Q2Fub24ucHJvdG90eXBlLmlzS25vd24gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGlzT2JqZWN0T3JBcnJheSh2YWx1ZSkgJiYgdGhpcy5rbm93bi5oYXModmFsdWUpO1xuICAgIH07XG4gICAgT2JqZWN0Q2Fub24ucHJvdG90eXBlLnBhc3MgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0T3JBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhciBjb3B5ID0gc2hhbGxvd0NvcHkodmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5wYXNzZXMuc2V0KGNvcHksIHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBjb3B5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIE9iamVjdENhbm9uLnByb3RvdHlwZS5hZG1pdCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoaXNPYmplY3RPckFycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdmFyIG9yaWdpbmFsID0gdGhpcy5wYXNzZXMuZ2V0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChvcmlnaW5hbClcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWw7XG4gICAgICAgICAgICB2YXIgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICAgICAgICAgICAgc3dpdGNoIChwcm90bykge1xuICAgICAgICAgICAgICAgIGNhc2UgQXJyYXkucHJvdG90eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmtub3duLmhhcyh2YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IHZhbHVlLm1hcCh0aGlzLmFkbWl0LCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXJyYXlzIGFyZSBsb29rZWQgdXAgaW4gdGhlIFRyaWUgdXNpbmcgdGhlaXIgcmVjdXJzaXZlbHlcbiAgICAgICAgICAgICAgICAgICAgLy8gY2Fub25pY2FsaXplZCBlbGVtZW50cywgYW5kIHRoZSBrbm93biB2ZXJzaW9uIG9mIHRoZSBhcnJheSBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgYXMgbm9kZS5hcnJheS5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnBvb2wubG9va3VwQXJyYXkoYXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUuYXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMua25vd24uYWRkKChub2RlLmFycmF5ID0gYXJyYXkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIGNhbm9uaWNhbCBhcnJheXMgbWF5IGJlIHNoYXJlZCB3aWRlbHkgYmV0d2VlblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5yZWxhdGVkIGNvbnN1bWVycywgaXQncyBpbXBvcnRhbnQgdG8gcmVnYXJkIHRoZW0gYXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGltbXV0YWJsZSwgZXZlbiBpZiB0aGV5IGFyZSBub3QgZnJvemVuIGluIHByb2R1Y3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5mcmVlemUoYXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLmFycmF5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIG51bGw6XG4gICAgICAgICAgICAgICAgY2FzZSBPYmplY3QucHJvdG90eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmtub3duLmhhcyh2YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm90b18xID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5XzEgPSBbcHJvdG9fMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gdGhpcy5zb3J0ZWRLZXlzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlfMS5wdXNoKGtleXMuanNvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdFZhbHVlSW5kZXhfMSA9IGFycmF5XzEubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnNvcnRlZC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5XzEucHVzaChfdGhpcy5hZG1pdCh2YWx1ZVtrZXldKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBPYmplY3RzIGFyZSBsb29rZWQgdXAgaW4gdGhlIFRyaWUgYnkgdGhlaXIgcHJvdG90eXBlICh3aGljaFxuICAgICAgICAgICAgICAgICAgICAvLyBpcyAqbm90KiByZWN1cnNpdmVseSBjYW5vbmljYWxpemVkKSwgZm9sbG93ZWQgYnkgYSBKU09OXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcHJlc2VudGF0aW9uIG9mIHRoZWlyIChzb3J0ZWQpIGtleXMsIGZvbGxvd2VkIGJ5IHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBvZiByZWN1cnNpdmVseSBjYW5vbmljYWxpemVkIHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIHRob3NlIGtleXMuIFRvIGtlZXAgdGhlIGZpbmFsIHJlc3VsdHMgdW5hbWJpZ3VvdXMgd2l0aCBvdGhlclxuICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZXMgKHN1Y2ggYXMgYXJyYXlzIHRoYXQganVzdCBoYXBwZW4gdG8gY29udGFpbiBbcHJvdG8sXG4gICAgICAgICAgICAgICAgICAgIC8vIGtleXMuanNvbiwgdmFsdWUxLCB2YWx1ZTIsIC4uLl0pLCB0aGUga25vd24gdmVyc2lvbiBvZiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gb2JqZWN0IGlzIHN0b3JlZCBhcyBub2RlLm9iamVjdC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnBvb2wubG9va3VwQXJyYXkoYXJyYXlfMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbm9kZS5vYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmpfMSA9IChub2RlLm9iamVjdCA9IE9iamVjdC5jcmVhdGUocHJvdG9fMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rbm93bi5hZGQob2JqXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5cy5zb3J0ZWQuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqXzFba2V5XSA9IGFycmF5XzFbZmlyc3RWYWx1ZUluZGV4XzEgKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2luY2UgY2Fub25pY2FsIG9iamVjdHMgbWF5IGJlIHNoYXJlZCB3aWRlbHkgYmV0d2VlblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5yZWxhdGVkIGNvbnN1bWVycywgaXQncyBpbXBvcnRhbnQgdG8gcmVnYXJkIHRoZW0gYXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGltbXV0YWJsZSwgZXZlbiBpZiB0aGV5IGFyZSBub3QgZnJvemVuIGluIHByb2R1Y3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5mcmVlemUob2JqXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLm9iamVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgLy8gSXQncyB3b3J0aHdoaWxlIHRvIGNhY2hlIHRoZSBzb3J0aW5nIG9mIGFycmF5cyBvZiBzdHJpbmdzLCBzaW5jZSB0aGVcbiAgICAvLyBzYW1lIGluaXRpYWwgdW5zb3J0ZWQgYXJyYXlzIHRlbmQgdG8gYmUgZW5jb3VudGVyZWQgbWFueSB0aW1lcy5cbiAgICAvLyBGb3J0dW5hdGVseSwgd2UgY2FuIHJldXNlIHRoZSBUcmllIG1hY2hpbmVyeSB0byBsb29rIHVwIHRoZSBzb3J0ZWRcbiAgICAvLyBhcnJheXMgaW4gbGluZWFyIHRpbWUgKHdoaWNoIGlzIGZhc3RlciB0aGFuIHNvcnRpbmcgbGFyZ2UgYXJyYXlzKS5cbiAgICBPYmplY3RDYW5vbi5wcm90b3R5cGUuc29ydGVkS2V5cyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICAgICAgICB2YXIgbm9kZSA9IHRoaXMucG9vbC5sb29rdXBBcnJheShrZXlzKTtcbiAgICAgICAgaWYgKCFub2RlLmtleXMpIHtcbiAgICAgICAgICAgIGtleXMuc29ydCgpO1xuICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeShrZXlzKTtcbiAgICAgICAgICAgIGlmICghKG5vZGUua2V5cyA9IHRoaXMua2V5c0J5SlNPTi5nZXQoanNvbikpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzQnlKU09OLnNldChqc29uLCAobm9kZS5rZXlzID0geyBzb3J0ZWQ6IGtleXMsIGpzb246IGpzb24gfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlLmtleXM7XG4gICAgfTtcbiAgICByZXR1cm4gT2JqZWN0Q2Fub247XG59KCkpO1xuZXhwb3J0IHsgT2JqZWN0Q2Fub24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9iamVjdC1jYW5vbi5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIG5ld0ludmFyaWFudEVycm9yIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBLaW5kIH0gZnJvbSBcImdyYXBocWxcIjtcbmltcG9ydCB7IHdyYXAgfSBmcm9tIFwib3B0aW1pc21cIjtcbmltcG9ydCB7IGlzRmllbGQsIHJlc3VsdEtleU5hbWVGcm9tRmllbGQsIGlzUmVmZXJlbmNlLCBtYWtlUmVmZXJlbmNlLCBzaG91bGRJbmNsdWRlLCBhZGRUeXBlbmFtZVRvRG9jdW1lbnQsIGdldERlZmF1bHRWYWx1ZXMsIGdldE1haW5EZWZpbml0aW9uLCBnZXRRdWVyeURlZmluaXRpb24sIGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbiwgbWF5YmVEZWVwRnJlZXplLCBtZXJnZURlZXBBcnJheSwgRGVlcE1lcmdlciwgaXNOb25OdWxsT2JqZWN0LCBjYW5Vc2VXZWFrTWFwLCBjb21wYWN0LCBjYW5vbmljYWxTdHJpbmdpZnksIGNhY2hlU2l6ZXMsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgbWF5YmVEZXBlbmRPbkV4aXN0ZW5jZU9mRW50aXR5LCBzdXBwb3J0c1Jlc3VsdENhY2hpbmcsIH0gZnJvbSBcIi4vZW50aXR5U3RvcmUuanNcIjtcbmltcG9ydCB7IGlzQXJyYXksIGV4dHJhY3RGcmFnbWVudENvbnRleHQsIGdldFR5cGVuYW1lRnJvbVN0b3JlT2JqZWN0LCBzaG91bGRDYW5vbml6ZVJlc3VsdHMsIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgTWlzc2luZ0ZpZWxkRXJyb3IgfSBmcm9tIFwiLi4vY29yZS90eXBlcy9jb21tb24uanNcIjtcbmltcG9ydCB7IE9iamVjdENhbm9uIH0gZnJvbSBcIi4vb2JqZWN0LWNhbm9uLmpzXCI7XG5mdW5jdGlvbiBleGVjU2VsZWN0aW9uU2V0S2V5QXJncyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25TZXQsXG4gICAgICAgIG9wdGlvbnMub2JqZWN0T3JSZWZlcmVuY2UsXG4gICAgICAgIG9wdGlvbnMuY29udGV4dCxcbiAgICAgICAgLy8gV2Ugc3BsaXQgb3V0IHRoaXMgcHJvcGVydHkgc28gd2UgY2FuIHBhc3MgZGlmZmVyZW50IHZhbHVlc1xuICAgICAgICAvLyBpbmRlcGVuZGVudGx5IHdpdGhvdXQgbW9kaWZ5aW5nIG9wdGlvbnMuY29udGV4dCBpdHNlbGYuXG4gICAgICAgIG9wdGlvbnMuY29udGV4dC5jYW5vbml6ZVJlc3VsdHMsXG4gICAgXTtcbn1cbnZhciBTdG9yZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdG9yZVJlYWRlcihjb25maWcpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5rbm93blJlc3VsdHMgPSBuZXcgKGNhblVzZVdlYWtNYXAgPyBXZWFrTWFwIDogTWFwKSgpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbXBhY3QoY29uZmlnLCB7XG4gICAgICAgICAgICBhZGRUeXBlbmFtZTogY29uZmlnLmFkZFR5cGVuYW1lICE9PSBmYWxzZSxcbiAgICAgICAgICAgIGNhbm9uaXplUmVzdWx0czogc2hvdWxkQ2Fub25pemVSZXN1bHRzKGNvbmZpZyksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNhbm9uID0gY29uZmlnLmNhbm9uIHx8IG5ldyBPYmplY3RDYW5vbigpO1xuICAgICAgICAvLyBtZW1vaXplZCBmdW5jdGlvbnMgaW4gdGhpcyBjbGFzcyB3aWxsIGJlIFwiZ2FyYmFnZS1jb2xsZWN0ZWRcIlxuICAgICAgICAvLyBieSByZWNyZWF0aW5nIHRoZSB3aG9sZSBgU3RvcmVSZWFkZXJgIGluXG4gICAgICAgIC8vIGBJbk1lbW9yeUNhY2hlLnJlc2V0UmVzdWx0c0NhY2hlYFxuICAgICAgICAvLyAodHJpZ2dlcmVkIGZyb20gYEluTWVtb3J5Q2FjaGUuZ2NgIHdpdGggYHJlc2V0UmVzdWx0Q2FjaGU6IHRydWVgKVxuICAgICAgICB0aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQgPSB3cmFwKGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICB2YXIgY2Fub25pemVSZXN1bHRzID0gb3B0aW9ucy5jb250ZXh0LmNhbm9uaXplUmVzdWx0cztcbiAgICAgICAgICAgIHZhciBwZWVrQXJncyA9IGV4ZWNTZWxlY3Rpb25TZXRLZXlBcmdzKG9wdGlvbnMpO1xuICAgICAgICAgICAgLy8gTmVnYXRlIHRoaXMgYm9vbGVhbiBvcHRpb24gc28gd2UgY2FuIGZpbmQgb3V0IGlmIHdlJ3ZlIGFscmVhZHkgcmVhZFxuICAgICAgICAgICAgLy8gdGhpcyByZXN1bHQgdXNpbmcgdGhlIG90aGVyIGJvb2xlYW4gdmFsdWUuXG4gICAgICAgICAgICBwZWVrQXJnc1szXSA9ICFjYW5vbml6ZVJlc3VsdHM7XG4gICAgICAgICAgICB2YXIgb3RoZXIgPSAoX2EgPSBfdGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0KS5wZWVrLmFwcGx5KF9hLCBwZWVrQXJncyk7XG4gICAgICAgICAgICBpZiAob3RoZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2Fub25pemVSZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3RoZXIpLCB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgcHJldmlvdXNseSByZWFkIHRoaXMgcmVzdWx0IHdpdGhvdXQgY2Fub25pemluZyBpdCwgd2UgY2FuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXVzZSB0aGF0IHJlc3VsdCBzaW1wbHkgYnkgY2Fub25pemluZyBpdCBub3cuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IF90aGlzLmNhbm9uLmFkbWl0KG90aGVyLnJlc3VsdCkgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHdlIHByZXZpb3VzbHkgcmVhZCB0aGlzIHJlc3VsdCB3aXRoIGNhbm9uaXphdGlvbiBlbmFibGVkLCB3ZSBjYW5cbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdGhhdCBjYW5vbml6ZWQgcmVzdWx0IGFzLWlzLlxuICAgICAgICAgICAgICAgIHJldHVybiBvdGhlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1heWJlRGVwZW5kT25FeGlzdGVuY2VPZkVudGl0eShvcHRpb25zLmNvbnRleHQuc3RvcmUsIG9wdGlvbnMuZW5jbG9zaW5nUmVmLl9fcmVmKTtcbiAgICAgICAgICAgIC8vIEZpbmFsbHksIGlmIHdlIGRpZG4ndCBmaW5kIGFueSB1c2VmdWwgcHJldmlvdXMgcmVzdWx0cywgcnVuIHRoZSByZWFsXG4gICAgICAgICAgICAvLyBleGVjU2VsZWN0aW9uU2V0SW1wbCBtZXRob2Qgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5leGVjU2VsZWN0aW9uU2V0SW1wbChvcHRpb25zKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbWF4OiB0aGlzLmNvbmZpZy5yZXN1bHRDYWNoZU1heFNpemUgfHxcbiAgICAgICAgICAgICAgICBjYWNoZVNpemVzW1wiaW5NZW1vcnlDYWNoZS5leGVjdXRlU2VsZWN0aW9uU2V0XCJdIHx8XG4gICAgICAgICAgICAgICAgNTAwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJpbk1lbW9yeUNhY2hlLmV4ZWN1dGVTZWxlY3Rpb25TZXRcIl0gKi8sXG4gICAgICAgICAgICBrZXlBcmdzOiBleGVjU2VsZWN0aW9uU2V0S2V5QXJncyxcbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgcGFyYW1ldGVycyBvZiBtYWtlQ2FjaGVLZXkgYXJlIGRldGVybWluZWQgYnkgdGhlXG4gICAgICAgICAgICAvLyBhcnJheSByZXR1cm5lZCBieSBrZXlBcmdzLlxuICAgICAgICAgICAgbWFrZUNhY2hlS2V5OiBmdW5jdGlvbiAoc2VsZWN0aW9uU2V0LCBwYXJlbnQsIGNvbnRleHQsIGNhbm9uaXplUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0c1Jlc3VsdENhY2hpbmcoY29udGV4dC5zdG9yZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuc3RvcmUubWFrZUNhY2hlS2V5KHNlbGVjdGlvblNldCwgaXNSZWZlcmVuY2UocGFyZW50KSA/IHBhcmVudC5fX3JlZiA6IHBhcmVudCwgY29udGV4dC52YXJTdHJpbmcsIGNhbm9uaXplUmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXkgPSB3cmFwKGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICBtYXliZURlcGVuZE9uRXhpc3RlbmNlT2ZFbnRpdHkob3B0aW9ucy5jb250ZXh0LnN0b3JlLCBvcHRpb25zLmVuY2xvc2luZ1JlZi5fX3JlZik7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZXhlY1N1YlNlbGVjdGVkQXJyYXlJbXBsKG9wdGlvbnMpO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtYXg6IHRoaXMuY29uZmlnLnJlc3VsdENhY2hlTWF4U2l6ZSB8fFxuICAgICAgICAgICAgICAgIGNhY2hlU2l6ZXNbXCJpbk1lbW9yeUNhY2hlLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5XCJdIHx8XG4gICAgICAgICAgICAgICAgMTAwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJpbk1lbW9yeUNhY2hlLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5XCJdICovLFxuICAgICAgICAgICAgbWFrZUNhY2hlS2V5OiBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmllbGQgPSBfYS5maWVsZCwgYXJyYXkgPSBfYS5hcnJheSwgY29udGV4dCA9IF9hLmNvbnRleHQ7XG4gICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzUmVzdWx0Q2FjaGluZyhjb250ZXh0LnN0b3JlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5zdG9yZS5tYWtlQ2FjaGVLZXkoZmllbGQsIGFycmF5LCBjb250ZXh0LnZhclN0cmluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFN0b3JlUmVhZGVyLnByb3RvdHlwZS5yZXNldENhbm9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNhbm9uID0gbmV3IE9iamVjdENhbm9uKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIHN0b3JlIGFuZCBhIHF1ZXJ5LCByZXR1cm4gYXMgbXVjaCBvZiB0aGUgcmVzdWx0IGFzIHBvc3NpYmxlIGFuZFxuICAgICAqIGlkZW50aWZ5IGlmIGFueSBkYXRhIHdhcyBtaXNzaW5nIGZyb20gdGhlIHN0b3JlLlxuICAgICAqL1xuICAgIFN0b3JlUmVhZGVyLnByb3RvdHlwZS5kaWZmUXVlcnlBZ2FpbnN0U3RvcmUgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgdmFyIHN0b3JlID0gX2Euc3RvcmUsIHF1ZXJ5ID0gX2EucXVlcnksIF9iID0gX2Eucm9vdElkLCByb290SWQgPSBfYiA9PT0gdm9pZCAwID8gXCJST09UX1FVRVJZXCIgOiBfYiwgdmFyaWFibGVzID0gX2EudmFyaWFibGVzLCBfYyA9IF9hLnJldHVyblBhcnRpYWxEYXRhLCByZXR1cm5QYXJ0aWFsRGF0YSA9IF9jID09PSB2b2lkIDAgPyB0cnVlIDogX2MsIF9kID0gX2EuY2Fub25pemVSZXN1bHRzLCBjYW5vbml6ZVJlc3VsdHMgPSBfZCA9PT0gdm9pZCAwID8gdGhpcy5jb25maWcuY2Fub25pemVSZXN1bHRzIDogX2Q7XG4gICAgICAgIHZhciBwb2xpY2llcyA9IHRoaXMuY29uZmlnLmNhY2hlLnBvbGljaWVzO1xuICAgICAgICB2YXJpYWJsZXMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZ2V0RGVmYXVsdFZhbHVlcyhnZXRRdWVyeURlZmluaXRpb24ocXVlcnkpKSksIHZhcmlhYmxlcyk7XG4gICAgICAgIHZhciByb290UmVmID0gbWFrZVJlZmVyZW5jZShyb290SWQpO1xuICAgICAgICB2YXIgZXhlY1Jlc3VsdCA9IHRoaXMuZXhlY3V0ZVNlbGVjdGlvblNldCh7XG4gICAgICAgICAgICBzZWxlY3Rpb25TZXQ6IGdldE1haW5EZWZpbml0aW9uKHF1ZXJ5KS5zZWxlY3Rpb25TZXQsXG4gICAgICAgICAgICBvYmplY3RPclJlZmVyZW5jZTogcm9vdFJlZixcbiAgICAgICAgICAgIGVuY2xvc2luZ1JlZjogcm9vdFJlZixcbiAgICAgICAgICAgIGNvbnRleHQ6IF9fYXNzaWduKHsgc3RvcmU6IHN0b3JlLCBxdWVyeTogcXVlcnksIHBvbGljaWVzOiBwb2xpY2llcywgdmFyaWFibGVzOiB2YXJpYWJsZXMsIHZhclN0cmluZzogY2Fub25pY2FsU3RyaW5naWZ5KHZhcmlhYmxlcyksIGNhbm9uaXplUmVzdWx0czogY2Fub25pemVSZXN1bHRzIH0sIGV4dHJhY3RGcmFnbWVudENvbnRleHQocXVlcnksIHRoaXMuY29uZmlnLmZyYWdtZW50cykpLFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1pc3Npbmc7XG4gICAgICAgIGlmIChleGVjUmVzdWx0Lm1pc3NpbmcpIHtcbiAgICAgICAgICAgIC8vIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3ZSBzdGlsbCByZXBvcnQgYW4gYXJyYXkgb2ZcbiAgICAgICAgICAgIC8vIE1pc3NpbmdGaWVsZEVycm9yIG9iamVjdHMsIGV2ZW4gdGhvdWdoIHRoZXJlIHdpbGwgb25seSBldmVyIGJlIGF0IG1vc3RcbiAgICAgICAgICAgIC8vIG9uZSBvZiB0aGVtLCBub3cgdGhhdCBhbGwgbWlzc2luZyBmaWVsZCBlcnJvciBtZXNzYWdlcyBhcmUgZ3JvdXBlZFxuICAgICAgICAgICAgLy8gdG9nZXRoZXIgaW4gdGhlIGV4ZWNSZXN1bHQubWlzc2luZyB0cmVlLlxuICAgICAgICAgICAgbWlzc2luZyA9IFtcbiAgICAgICAgICAgICAgICBuZXcgTWlzc2luZ0ZpZWxkRXJyb3IoZmlyc3RNaXNzaW5nKGV4ZWNSZXN1bHQubWlzc2luZyksIGV4ZWNSZXN1bHQubWlzc2luZywgcXVlcnksIHZhcmlhYmxlcyksXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaWYgKCFyZXR1cm5QYXJ0aWFsRGF0YSkge1xuICAgICAgICAgICAgICAgIHRocm93IG1pc3NpbmdbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3VsdDogZXhlY1Jlc3VsdC5yZXN1bHQsXG4gICAgICAgICAgICBjb21wbGV0ZTogIW1pc3NpbmcsXG4gICAgICAgICAgICBtaXNzaW5nOiBtaXNzaW5nLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgU3RvcmVSZWFkZXIucHJvdG90eXBlLmlzRnJlc2ggPSBmdW5jdGlvbiAocmVzdWx0LCBwYXJlbnQsIHNlbGVjdGlvblNldCwgY29udGV4dCkge1xuICAgICAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKGNvbnRleHQuc3RvcmUpICYmXG4gICAgICAgICAgICB0aGlzLmtub3duUmVzdWx0cy5nZXQocmVzdWx0KSA9PT0gc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICB2YXIgbGF0ZXN0ID0gdGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0LnBlZWsoc2VsZWN0aW9uU2V0LCBwYXJlbnQsIGNvbnRleHQsIFxuICAgICAgICAgICAgLy8gSWYgcmVzdWx0IGlzIGNhbm9uaWNhbCwgdGhlbiBpdCBjb3VsZCBvbmx5IGhhdmUgYmVlbiBwcmV2aW91c2x5XG4gICAgICAgICAgICAvLyBjYWNoZWQgYnkgdGhlIGNhbm9uaXppbmcgdmVyc2lvbiBvZiBleGVjdXRlU2VsZWN0aW9uU2V0LCBzbyB3ZSBjYW5cbiAgICAgICAgICAgIC8vIGF2b2lkIGNoZWNraW5nIGJvdGggcG9zc2liaWxpdGllcyBoZXJlLlxuICAgICAgICAgICAgdGhpcy5jYW5vbi5pc0tub3duKHJlc3VsdCkpO1xuICAgICAgICAgICAgaWYgKGxhdGVzdCAmJiByZXN1bHQgPT09IGxhdGVzdC5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvLyBVbmNhY2hlZCB2ZXJzaW9uIG9mIGV4ZWN1dGVTZWxlY3Rpb25TZXQuXG4gICAgU3RvcmVSZWFkZXIucHJvdG90eXBlLmV4ZWNTZWxlY3Rpb25TZXRJbXBsID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzZWxlY3Rpb25TZXQgPSBfYS5zZWxlY3Rpb25TZXQsIG9iamVjdE9yUmVmZXJlbmNlID0gX2Eub2JqZWN0T3JSZWZlcmVuY2UsIGVuY2xvc2luZ1JlZiA9IF9hLmVuY2xvc2luZ1JlZiwgY29udGV4dCA9IF9hLmNvbnRleHQ7XG4gICAgICAgIGlmIChpc1JlZmVyZW5jZShvYmplY3RPclJlZmVyZW5jZSkgJiZcbiAgICAgICAgICAgICFjb250ZXh0LnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkW29iamVjdE9yUmVmZXJlbmNlLl9fcmVmXSAmJlxuICAgICAgICAgICAgIWNvbnRleHQuc3RvcmUuaGFzKG9iamVjdE9yUmVmZXJlbmNlLl9fcmVmKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHRoaXMuY2Fub24uZW1wdHksXG4gICAgICAgICAgICAgICAgbWlzc2luZzogXCJEYW5nbGluZyByZWZlcmVuY2UgdG8gbWlzc2luZyBcIi5jb25jYXQob2JqZWN0T3JSZWZlcmVuY2UuX19yZWYsIFwiIG9iamVjdFwiKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhcmlhYmxlcyA9IGNvbnRleHQudmFyaWFibGVzLCBwb2xpY2llcyA9IGNvbnRleHQucG9saWNpZXMsIHN0b3JlID0gY29udGV4dC5zdG9yZTtcbiAgICAgICAgdmFyIHR5cGVuYW1lID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShvYmplY3RPclJlZmVyZW5jZSwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICB2YXIgb2JqZWN0c1RvTWVyZ2UgPSBbXTtcbiAgICAgICAgdmFyIG1pc3Npbmc7XG4gICAgICAgIHZhciBtaXNzaW5nTWVyZ2VyID0gbmV3IERlZXBNZXJnZXIoKTtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmFkZFR5cGVuYW1lICYmXG4gICAgICAgICAgICB0eXBlb2YgdHlwZW5hbWUgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICFwb2xpY2llcy5yb290SWRzQnlUeXBlbmFtZVt0eXBlbmFtZV0pIHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSB3ZSBhbHdheXMgaW5jbHVkZSBhIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBfX3R5cGVuYW1lXG4gICAgICAgICAgICAvLyBmaWVsZCwgaWYgd2UgaGF2ZSBvbmUsIGFuZCB0aGlzLmNvbmZpZy5hZGRUeXBlbmFtZSBpcyB0cnVlLiBOb3RlXG4gICAgICAgICAgICAvLyB0aGF0IHRoaXMgZmllbGQgY2FuIGJlIG92ZXJyaWRkZW4gYnkgb3RoZXIgbWVyZ2VkIG9iamVjdHMuXG4gICAgICAgICAgICBvYmplY3RzVG9NZXJnZS5wdXNoKHsgX190eXBlbmFtZTogdHlwZW5hbWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTWlzc2luZyhyZXN1bHQsIHJlc3VsdE5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQubWlzc2luZykge1xuICAgICAgICAgICAgICAgIG1pc3NpbmcgPSBtaXNzaW5nTWVyZ2VyLm1lcmdlKG1pc3NpbmcsIChfYSA9IHt9LFxuICAgICAgICAgICAgICAgICAgICBfYVtyZXN1bHROYW1lXSA9IHJlc3VsdC5taXNzaW5nLFxuICAgICAgICAgICAgICAgICAgICBfYSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdvcmtTZXQgPSBuZXcgU2V0KHNlbGVjdGlvblNldC5zZWxlY3Rpb25zKTtcbiAgICAgICAgd29ya1NldC5mb3JFYWNoKGZ1bmN0aW9uIChzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgICAgICAvLyBPbWl0IGZpZWxkcyB3aXRoIGRpcmVjdGl2ZXMgQHNraXAoaWY6IDx0cnV0aHkgdmFsdWU+KSBvclxuICAgICAgICAgICAgLy8gQGluY2x1ZGUoaWY6IDxmYWxzeSB2YWx1ZT4pLlxuICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlKHNlbGVjdGlvbiwgdmFyaWFibGVzKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAoaXNGaWVsZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkVmFsdWUgPSBwb2xpY2llcy5yZWFkRmllbGQoe1xuICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IHNlbGVjdGlvbi5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZDogc2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGNvbnRleHQudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICBmcm9tOiBvYmplY3RPclJlZmVyZW5jZSxcbiAgICAgICAgICAgICAgICB9LCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0TmFtZSA9IHJlc3VsdEtleU5hbWVGcm9tRmllbGQoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWRkVHlwZW5hbWVUb0RvY3VtZW50LmFkZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pc3NpbmcgPSBtaXNzaW5nTWVyZ2VyLm1lcmdlKG1pc3NpbmcsIChfYSA9IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hW3Jlc3VsdE5hbWVdID0gXCJDYW4ndCBmaW5kIGZpZWxkICdcIi5jb25jYXQoc2VsZWN0aW9uLm5hbWUudmFsdWUsIFwiJyBvbiBcIikuY29uY2F0KGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdE9yUmVmZXJlbmNlLl9fcmVmICsgXCIgb2JqZWN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIm9iamVjdCBcIiArIEpTT04uc3RyaW5naWZ5KG9iamVjdE9yUmVmZXJlbmNlLCBudWxsLCAyKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5KGZpZWxkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSBoYW5kbGVNaXNzaW5nKF90aGlzLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogc2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5OiBmaWVsZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY2xvc2luZ1JlZjogZW5jbG9zaW5nUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSwgcmVzdWx0TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNlbGVjdGlvbi5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGZpZWxkIGRvZXMgbm90IGhhdmUgYSBzZWxlY3Rpb24gc2V0LCB0aGVuIHdlIGhhbmRsZSBpdFxuICAgICAgICAgICAgICAgICAgICAvLyBhcyBhIHNjYWxhciB2YWx1ZS4gVG8ga2VlcCB0aGlzLmNhbm9uIGZyb20gY2Fub25pY2FsaXppbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB2YWx1ZSwgd2UgdXNlIHRoaXMuY2Fub24ucGFzcyB0byB3cmFwIGZpZWxkVmFsdWUgaW4gYVxuICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIG9iamVjdCB0aGF0IHRoaXMuY2Fub24uYWRtaXQgd2lsbCBsYXRlciB1bndyYXAgYXMtaXMuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmNhbm9uaXplUmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IF90aGlzLmNhbm9uLnBhc3MoZmllbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZmllbGRWYWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSwgYmVjYXVzZSB3ZSBrbm93IHRoZSBmaWVsZCBoYXMgYSBzZWxlY3Rpb24gc2V0LFxuICAgICAgICAgICAgICAgICAgICAvLyBpdCBtdXN0IGJlIHRyeWluZyB0byBxdWVyeSBhIEdyYXBoUUxPYmplY3RUeXBlLCB3aGljaCBpcyB3aHlcbiAgICAgICAgICAgICAgICAgICAgLy8gZmllbGRWYWx1ZSBtdXN0IGJlICE9IG51bGwuXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSBoYW5kbGVNaXNzaW5nKF90aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uU2V0OiBzZWxlY3Rpb24uc2VsZWN0aW9uU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0T3JSZWZlcmVuY2U6IGZpZWxkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmNsb3NpbmdSZWY6IGlzUmVmZXJlbmNlKGZpZWxkVmFsdWUpID8gZmllbGRWYWx1ZSA6IGVuY2xvc2luZ1JlZixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIH0pLCByZXN1bHROYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3RzVG9NZXJnZS5wdXNoKChfYiA9IHt9LCBfYltyZXN1bHROYW1lXSA9IGZpZWxkVmFsdWUsIF9iKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGZyYWdtZW50ID0gZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uKHNlbGVjdGlvbiwgY29udGV4dC5sb29rdXBGcmFnbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKCFmcmFnbWVudCAmJiBzZWxlY3Rpb24ua2luZCA9PT0gS2luZC5GUkFHTUVOVF9TUFJFQUQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3SW52YXJpYW50RXJyb3IoMTAsIHNlbGVjdGlvbi5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZyYWdtZW50ICYmIHBvbGljaWVzLmZyYWdtZW50TWF0Y2hlcyhmcmFnbWVudCwgdHlwZW5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50LnNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmZvckVhY2god29ya1NldC5hZGQsIHdvcmtTZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciByZXN1bHQgPSBtZXJnZURlZXBBcnJheShvYmplY3RzVG9NZXJnZSk7XG4gICAgICAgIHZhciBmaW5hbFJlc3VsdCA9IHsgcmVzdWx0OiByZXN1bHQsIG1pc3Npbmc6IG1pc3NpbmcgfTtcbiAgICAgICAgdmFyIGZyb3plbiA9IGNvbnRleHQuY2Fub25pemVSZXN1bHRzID9cbiAgICAgICAgICAgIHRoaXMuY2Fub24uYWRtaXQoZmluYWxSZXN1bHQpXG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzLmNhbm9uIGlzIG5vcm1hbGx5IHJlc3BvbnNpYmxlIGZvciBmcmVlemluZyByZXN1bHRzIChvbmx5IGluXG4gICAgICAgICAgICAvLyBkZXZlbG9wbWVudCksIGZyZWV6ZSB0aGVtIG1hbnVhbGx5IGlmIGNhbm9uaXphdGlvbiBpcyBkaXNhYmxlZC5cbiAgICAgICAgICAgIDogbWF5YmVEZWVwRnJlZXplKGZpbmFsUmVzdWx0KTtcbiAgICAgICAgLy8gU3RvcmUgdGhpcyByZXN1bHQgd2l0aCBpdHMgc2VsZWN0aW9uIHNldCBzbyB0aGF0IHdlIGNhbiBxdWlja2x5XG4gICAgICAgIC8vIHJlY29nbml6ZSBpdCBhZ2FpbiBpbiB0aGUgU3RvcmVSZWFkZXIjaXNGcmVzaCBtZXRob2QuXG4gICAgICAgIGlmIChmcm96ZW4ucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmtub3duUmVzdWx0cy5zZXQoZnJvemVuLnJlc3VsdCwgc2VsZWN0aW9uU2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJvemVuO1xuICAgIH07XG4gICAgLy8gVW5jYWNoZWQgdmVyc2lvbiBvZiBleGVjdXRlU3ViU2VsZWN0ZWRBcnJheS5cbiAgICBTdG9yZVJlYWRlci5wcm90b3R5cGUuZXhlY1N1YlNlbGVjdGVkQXJyYXlJbXBsID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBmaWVsZCA9IF9hLmZpZWxkLCBhcnJheSA9IF9hLmFycmF5LCBlbmNsb3NpbmdSZWYgPSBfYS5lbmNsb3NpbmdSZWYsIGNvbnRleHQgPSBfYS5jb250ZXh0O1xuICAgICAgICB2YXIgbWlzc2luZztcbiAgICAgICAgdmFyIG1pc3NpbmdNZXJnZXIgPSBuZXcgRGVlcE1lcmdlcigpO1xuICAgICAgICBmdW5jdGlvbiBoYW5kbGVNaXNzaW5nKGNoaWxkUmVzdWx0LCBpKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAoY2hpbGRSZXN1bHQubWlzc2luZykge1xuICAgICAgICAgICAgICAgIG1pc3NpbmcgPSBtaXNzaW5nTWVyZ2VyLm1lcmdlKG1pc3NpbmcsIChfYSA9IHt9LCBfYVtpXSA9IGNoaWxkUmVzdWx0Lm1pc3NpbmcsIF9hKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hpbGRSZXN1bHQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICAgIGFycmF5ID0gYXJyYXkuZmlsdGVyKGNvbnRleHQuc3RvcmUuY2FuUmVhZCk7XG4gICAgICAgIH1cbiAgICAgICAgYXJyYXkgPSBhcnJheS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgICAgIC8vIG51bGwgdmFsdWUgaW4gYXJyYXlcbiAgICAgICAgICAgIGlmIChpdGVtID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgbmVzdGVkIGFycmF5LCByZWN1cnNlXG4gICAgICAgICAgICBpZiAoaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVNaXNzaW5nKF90aGlzLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5KHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBhcnJheTogaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgZW5jbG9zaW5nUmVmOiBlbmNsb3NpbmdSZWYsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICAgICAgfSksIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhbiBvYmplY3QsIHJ1biB0aGUgc2VsZWN0aW9uIHNldCBvbiBpdFxuICAgICAgICAgICAgaWYgKGZpZWxkLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVNaXNzaW5nKF90aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQoe1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25TZXQ6IGZpZWxkLnNlbGVjdGlvblNldCxcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0T3JSZWZlcmVuY2U6IGl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIGVuY2xvc2luZ1JlZjogaXNSZWZlcmVuY2UoaXRlbSkgPyBpdGVtIDogZW5jbG9zaW5nUmVmLFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgICAgIH0pLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0U2VsZWN0aW9uU2V0Rm9ySWRWYWx1ZShjb250ZXh0LnN0b3JlLCBmaWVsZCwgaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN1bHQ6IGNvbnRleHQuY2Fub25pemVSZXN1bHRzID8gdGhpcy5jYW5vbi5hZG1pdChhcnJheSkgOiBhcnJheSxcbiAgICAgICAgICAgIG1pc3Npbmc6IG1pc3NpbmcsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gU3RvcmVSZWFkZXI7XG59KCkpO1xuZXhwb3J0IHsgU3RvcmVSZWFkZXIgfTtcbmZ1bmN0aW9uIGZpcnN0TWlzc2luZyh0cmVlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkodHJlZSwgZnVuY3Rpb24gKF8sIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIHRocm93IHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydFNlbGVjdGlvblNldEZvcklkVmFsdWUoc3RvcmUsIGZpZWxkLCBmaWVsZFZhbHVlKSB7XG4gICAgaWYgKCFmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgdmFyIHdvcmtTZXRfMSA9IG5ldyBTZXQoW2ZpZWxkVmFsdWVdKTtcbiAgICAgICAgd29ya1NldF8xLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGludmFyaWFudChcbiAgICAgICAgICAgICAgICAgICAgIWlzUmVmZXJlbmNlKHZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgMTEsXG4gICAgICAgICAgICAgICAgICAgIGdldFR5cGVuYW1lRnJvbVN0b3JlT2JqZWN0KHN0b3JlLCB2YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLm5hbWUudmFsdWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXModmFsdWUpLmZvckVhY2god29ya1NldF8xLmFkZCwgd29ya1NldF8xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhZEZyb21TdG9yZS5qcy5tYXAiLAogICAgImltcG9ydCB7IGRlcCwgU2xvdCB9IGZyb20gXCJvcHRpbWlzbVwiO1xuLy8gQ29udGV4dHVhbCBTbG90IHRoYXQgYWNxdWlyZXMgaXRzIHZhbHVlIHdoZW4gY3VzdG9tIHJlYWQgZnVuY3Rpb25zIGFyZVxuLy8gY2FsbGVkIGluIFBvbGljaWVzI3JlYWRGaWVsZC5cbmV4cG9ydCB2YXIgY2FjaGVTbG90ID0gbmV3IFNsb3QoKTtcbnZhciBjYWNoZUluZm9NYXAgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gZ2V0Q2FjaGVJbmZvKGNhY2hlKSB7XG4gICAgdmFyIGluZm8gPSBjYWNoZUluZm9NYXAuZ2V0KGNhY2hlKTtcbiAgICBpZiAoIWluZm8pIHtcbiAgICAgICAgY2FjaGVJbmZvTWFwLnNldChjYWNoZSwgKGluZm8gPSB7XG4gICAgICAgICAgICB2YXJzOiBuZXcgU2V0KCksXG4gICAgICAgICAgICBkZXA6IGRlcCgpLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJldHVybiBpbmZvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcmdldENhY2hlKGNhY2hlKSB7XG4gICAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS52YXJzLmZvckVhY2goZnVuY3Rpb24gKHJ2KSB7IHJldHVybiBydi5mb3JnZXRDYWNoZShjYWNoZSk7IH0pO1xufVxuLy8gQ2FsbGluZyBmb3JnZXRDYWNoZShjYWNoZSkgc2VydmVzIHRvIHNpbGVuY2UgYnJvYWRjYXN0cyBhbmQgYWxsb3dzIHRoZVxuLy8gY2FjaGUgdG8gYmUgZ2FyYmFnZSBjb2xsZWN0ZWQuIEhvd2V2ZXIsIHRoZSB2YXJzQnlDYWNoZSBXZWFrTWFwXG4vLyBwcmVzZXJ2ZXMgdGhlIHNldCBvZiByZWFjdGl2ZSB2YXJpYWJsZXMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYXNzb2NpYXRlZFxuLy8gd2l0aCB0aGlzIGNhY2hlLCB3aGljaCBtYWtlcyBpdCBwb3NzaWJsZSB0byBcInJlY2FsbFwiIHRoZSBjYWNoZSBhdCBhXG4vLyBsYXRlciB0aW1lLCBieSByZWF0dGFjaGluZyBpdCB0byB0aG9zZSB2YXJpYWJsZXMuIElmIHRoZSBjYWNoZSBoYXMgYmVlblxuLy8gZ2FyYmFnZSBjb2xsZWN0ZWQgaW4gdGhlIG1lYW50aW1lLCBiZWNhdXNlIGl0IGlzIG5vIGxvbmdlciByZWFjaGFibGUsXG4vLyB5b3Ugd29uJ3QgYmUgYWJsZSB0byBjYWxsIHJlY2FsbENhY2hlKGNhY2hlKSwgYW5kIHRoZSBjYWNoZSB3aWxsXG4vLyBhdXRvbWF0aWNhbGx5IGRpc2FwcGVhciBmcm9tIHRoZSB2YXJzQnlDYWNoZSBXZWFrTWFwLlxuZXhwb3J0IGZ1bmN0aW9uIHJlY2FsbENhY2hlKGNhY2hlKSB7XG4gICAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS52YXJzLmZvckVhY2goZnVuY3Rpb24gKHJ2KSB7IHJldHVybiBydi5hdHRhY2hDYWNoZShjYWNoZSk7IH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VWYXIodmFsdWUpIHtcbiAgICB2YXIgY2FjaGVzID0gbmV3IFNldCgpO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gICAgdmFyIHJ2ID0gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgY2FjaGVzLmZvckVhY2goZnVuY3Rpb24gKGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWRhdGUgYW55IGZpZWxkcyB3aXRoIGN1c3RvbSByZWFkIGZ1bmN0aW9ucyB0aGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnN1bWVkIHRoaXMgdmFyaWFibGUsIHNvIHF1ZXJ5IHJlc3VsdHMgaW52b2x2aW5nIHRob3NlXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpZWxkcyB3aWxsIGJlIHJlY29tcHV0ZWQgdGhlIG5leHQgdGltZSB3ZSByZWFkIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIGdldENhY2hlSW5mbyhjYWNoZSkuZGVwLmRpcnR5KHJ2KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQnJvYWRjYXN0IGNoYW5nZXMgdG8gYW55IGNhY2hlcyB0aGF0IGhhdmUgcHJldmlvdXNseSByZWFkXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb20gdGhpcyB2YXJpYWJsZS5cbiAgICAgICAgICAgICAgICAgICAgYnJvYWRjYXN0KGNhY2hlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBGaW5hbGx5LCBub3RpZnkgYW55IGxpc3RlbmVycyBhZGRlZCB2aWEgcnYub25OZXh0Q2hhbmdlLlxuICAgICAgICAgICAgICAgIHZhciBvbGRMaXN0ZW5lcnMgPSBBcnJheS5mcm9tKGxpc3RlbmVycyk7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgb2xkTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7IHJldHVybiBsaXN0ZW5lcih2YWx1ZSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV2hlbiByZWFkaW5nIGZyb20gdGhlIHZhcmlhYmxlLCBvYnRhaW4gdGhlIGN1cnJlbnQgY2FjaGUgZnJvbVxuICAgICAgICAgICAgLy8gY29udGV4dCB2aWEgY2FjaGVTbG90LiBUaGlzIGlzbid0IGVudGlyZWx5IGZvb2xwcm9vZiwgYnV0IGl0J3NcbiAgICAgICAgICAgIC8vIHRoZSBzYW1lIHN5c3RlbSB0aGF0IHBvd2VycyB2YXJEZXAuXG4gICAgICAgICAgICB2YXIgY2FjaGUgPSBjYWNoZVNsb3QuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgICAgIGF0dGFjaChjYWNoZSk7XG4gICAgICAgICAgICAgICAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS5kZXAocnYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIHJ2Lm9uTmV4dENoYW5nZSA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdmFyIGF0dGFjaCA9IChydi5hdHRhY2hDYWNoZSA9IGZ1bmN0aW9uIChjYWNoZSkge1xuICAgICAgICBjYWNoZXMuYWRkKGNhY2hlKTtcbiAgICAgICAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS52YXJzLmFkZChydik7XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9KTtcbiAgICBydi5mb3JnZXRDYWNoZSA9IGZ1bmN0aW9uIChjYWNoZSkgeyByZXR1cm4gY2FjaGVzLmRlbGV0ZShjYWNoZSk7IH07XG4gICAgcmV0dXJuIHJ2O1xufVxuZnVuY3Rpb24gYnJvYWRjYXN0KGNhY2hlKSB7XG4gICAgaWYgKGNhY2hlLmJyb2FkY2FzdFdhdGNoZXMpIHtcbiAgICAgICAgY2FjaGUuYnJvYWRjYXN0V2F0Y2hlcygpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWN0aXZlVmFycy5qcy5tYXAiLAogICAgImltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkLCBEZWVwTWVyZ2VyLCBpc05vbkVtcHR5QXJyYXksIGlzTm9uTnVsbE9iamVjdCwgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBoYXNPd24sIGlzQXJyYXkgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG4vLyBNYXBwaW5nIGZyb20gSlNPTi1lbmNvZGVkIEtleVNwZWNpZmllciBzdHJpbmdzIHRvIGFzc29jaWF0ZWQgaW5mb3JtYXRpb24uXG52YXIgc3BlY2lmaWVySW5mb0NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmZ1bmN0aW9uIGxvb2t1cFNwZWNpZmllckluZm8oc3BlYykge1xuICAgIC8vIEl0J3Mgc2FmZSB0byBlbmNvZGUgS2V5U3BlY2lmaWVyIGFycmF5cyB3aXRoIEpTT04uc3RyaW5naWZ5LCBzaW5jZSB0aGV5J3JlXG4gICAgLy8ganVzdCBhcnJheXMgb2Ygc3RyaW5ncyBvciBuZXN0ZWQgS2V5U3BlY2lmaWVyIGFycmF5cywgYW5kIHRoZSBvcmRlciBvZiB0aGVcbiAgICAvLyBhcnJheSBlbGVtZW50cyBpcyBpbXBvcnRhbnQgKGFuZCBzdWl0YWJseSBwcmVzZXJ2ZWQgYnkgSlNPTi5zdHJpbmdpZnkpLlxuICAgIHZhciBjYWNoZUtleSA9IEpTT04uc3RyaW5naWZ5KHNwZWMpO1xuICAgIHJldHVybiAoc3BlY2lmaWVySW5mb0NhY2hlW2NhY2hlS2V5XSB8fFxuICAgICAgICAoc3BlY2lmaWVySW5mb0NhY2hlW2NhY2hlS2V5XSA9IE9iamVjdC5jcmVhdGUobnVsbCkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBrZXlGaWVsZHNGbkZyb21TcGVjaWZpZXIoc3BlY2lmaWVyKSB7XG4gICAgdmFyIGluZm8gPSBsb29rdXBTcGVjaWZpZXJJbmZvKHNwZWNpZmllcik7XG4gICAgcmV0dXJuIChpbmZvLmtleUZpZWxkc0ZuIHx8IChpbmZvLmtleUZpZWxkc0ZuID0gZnVuY3Rpb24gKG9iamVjdCwgY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGV4dHJhY3QgPSBmdW5jdGlvbiAoZnJvbSwga2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQucmVhZEZpZWxkKGtleSwgZnJvbSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGtleU9iamVjdCA9IChjb250ZXh0LmtleU9iamVjdCA9IGNvbGxlY3RTcGVjaWZpZXJQYXRocyhzcGVjaWZpZXIsIGZ1bmN0aW9uIChzY2hlbWFLZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RlZCA9IGV4dHJhY3RLZXlQYXRoKGNvbnRleHQuc3RvcmVPYmplY3QsIHNjaGVtYUtleVBhdGgsIFxuICAgICAgICAgICAgICAgIC8vIFVzaW5nIGNvbnRleHQucmVhZEZpZWxkIHRvIGV4dHJhY3QgcGF0aHMgZnJvbSBjb250ZXh0LnN0b3JlT2JqZWN0XG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIHRoZSBleHRyYWN0aW9uIHRvIHNlZSB0aHJvdWdoIFJlZmVyZW5jZSBvYmplY3RzIGFuZCByZXNwZWN0XG4gICAgICAgICAgICAgICAgLy8gY3VzdG9tIHJlYWQgZnVuY3Rpb25zLlxuICAgICAgICAgICAgICAgIGV4dHJhY3QpO1xuICAgICAgICAgICAgICAgIGlmIChleHRyYWN0ZWQgPT09IHZvaWQgMCAmJlxuICAgICAgICAgICAgICAgICAgICBvYmplY3QgIT09IGNvbnRleHQuc3RvcmVPYmplY3QgJiZcbiAgICAgICAgICAgICAgICAgICAgaGFzT3duLmNhbGwob2JqZWN0LCBzY2hlbWFLZXlQYXRoWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBjb250ZXh0LnN0b3JlT2JqZWN0IGZhaWxzIHRvIHByb3ZpZGUgYSB2YWx1ZSBmb3IgdGhlIHJlcXVlc3RlZFxuICAgICAgICAgICAgICAgICAgICAvLyBwYXRoLCBmYWxsIGJhY2sgdG8gdGhlIHJhdyByZXN1bHQgb2JqZWN0LCBpZiBpdCBoYXMgYSB0b3AtbGV2ZWwga2V5XG4gICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoaW5nIHRoZSBmaXJzdCBrZXkgaW4gdGhlIHBhdGggKHNjaGVtYUtleVBhdGhbMF0pLiBUaGlzIGFsbG93c1xuICAgICAgICAgICAgICAgICAgICAvLyBrZXkgZmllbGRzIGluY2x1ZGVkIGluIHRoZSB3cml0dGVuIGRhdGEgdG8gYmUgc2F2ZWQgaW4gdGhlIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW4gaWYgdGhleSBhcmUgbm90IHNlbGVjdGVkIGV4cGxpY2l0bHkgaW4gY29udGV4dC5zZWxlY3Rpb25TZXQuXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdCBiZWluZyBtZW50aW9uZWQgYnkgY29udGV4dC5zZWxlY3Rpb25TZXQgaXMgY29udmVuaWVudCBoZXJlLFxuICAgICAgICAgICAgICAgICAgICAvLyBzaW5jZSBpdCBtZWFucyB0aGVzZSBleHRyYSBmaWVsZHMgY2Fubm90IGJlIGFmZmVjdGVkIGJ5IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsaWFzaW5nLCB3aGljaCBpcyB3aHkgd2UgY2FuIHVzZSBleHRyYWN0S2V5IGluc3RlYWQgb2ZcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGV4dC5yZWFkRmllbGQgZm9yIHRoaXMgZXh0cmFjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkID0gZXh0cmFjdEtleVBhdGgob2JqZWN0LCBzY2hlbWFLZXlQYXRoLCBleHRyYWN0S2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW52YXJpYW50KGV4dHJhY3RlZCAhPT0gdm9pZCAwLCA1LCBzY2hlbWFLZXlQYXRoLmpvaW4oXCIuXCIpLCBvYmplY3QpO1xuICAgICAgICAgICAgICAgIHJldHVybiBleHRyYWN0ZWQ7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gXCJcIi5jb25jYXQoY29udGV4dC50eXBlbmFtZSwgXCI6XCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShrZXlPYmplY3QpKTtcbiAgICAgICAgfSkpO1xufVxuLy8gVGhlIGtleUFyZ3MgZXh0cmFjdGlvbiBwcm9jZXNzIGlzIHJvdWdobHkgYW5hbG9nb3VzIHRvIGtleUZpZWxkcyBleHRyYWN0aW9uLFxuLy8gYnV0IHRoZXJlIGFyZSBubyBhbGlhc2VzIGludm9sdmVkLCBtaXNzaW5nIGZpZWxkcyBhcmUgdG9sZXJhdGVkIChieSBtZXJlbHlcbi8vIG9taXR0aW5nIHRoZW0gZnJvbSB0aGUga2V5KSwgYW5kIGRyYXdpbmcgZnJvbSBmaWVsZC5kaXJlY3RpdmVzIG9yIHZhcmlhYmxlc1xuLy8gaXMgYWxsb3dlZCAoaW4gYWRkaXRpb24gdG8gZHJhd2luZyBmcm9tIHRoZSBmaWVsZCdzIGFyZ3VtZW50cyBvYmplY3QpLlxuLy8gQ29uY3JldGVseSwgdGhlc2UgZGlmZmVyZW5jZXMgbWVhbiBwYXNzaW5nIGEgZGlmZmVyZW50IGtleSBwYXRoIGV4dHJhY3RvclxuLy8gZnVuY3Rpb24gdG8gY29sbGVjdFNwZWNpZmllclBhdGhzLCByZXVzaW5nIHRoZSBzaGFyZWQgZXh0cmFjdEtleVBhdGggaGVscGVyXG4vLyB3aGVyZXZlciBwb3NzaWJsZS5cbmV4cG9ydCBmdW5jdGlvbiBrZXlBcmdzRm5Gcm9tU3BlY2lmaWVyKHNwZWNpZmllcikge1xuICAgIHZhciBpbmZvID0gbG9va3VwU3BlY2lmaWVySW5mbyhzcGVjaWZpZXIpO1xuICAgIHJldHVybiAoaW5mby5rZXlBcmdzRm4gfHxcbiAgICAgICAgKGluZm8ua2V5QXJnc0ZuID0gZnVuY3Rpb24gKGFyZ3MsIF9hKSB7XG4gICAgICAgICAgICB2YXIgZmllbGQgPSBfYS5maWVsZCwgdmFyaWFibGVzID0gX2EudmFyaWFibGVzLCBmaWVsZE5hbWUgPSBfYS5maWVsZE5hbWU7XG4gICAgICAgICAgICB2YXIgY29sbGVjdGVkID0gY29sbGVjdFNwZWNpZmllclBhdGhzKHNwZWNpZmllciwgZnVuY3Rpb24gKGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RLZXkgPSBrZXlQYXRoWzBdO1xuICAgICAgICAgICAgICAgIHZhciBmaXJzdENoYXIgPSBmaXJzdEtleS5jaGFyQXQoMCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Q2hhciA9PT0gXCJAXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkICYmIGlzTm9uRW1wdHlBcnJheShmaWVsZC5kaXJlY3RpdmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZU5hbWVfMSA9IGZpcnN0S2V5LnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRpcmVjdGl2ZSBhcHBlYXJzIG11bHRpcGxlIHRpbWVzLCBvbmx5IHRoZSBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2NjdXJyZW5jZSdzIGFyZ3VtZW50cyB3aWxsIGJlIHVzZWQuIFRPRE8gQWxsb3cgcmVwZXRpdGlvbj9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2FjaGUgdGhpcyB3b3JrIHNvbWVob3csIGEgbGEgYWxpYXNNYXA/XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGZpZWxkLmRpcmVjdGl2ZXMuZmluZChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lLnZhbHVlID09PSBkaXJlY3RpdmVOYW1lXzE7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9ydHVuYXRlbHkgYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkIHdvcmtzIGZvciBEaXJlY3RpdmVOb2RlIVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZUFyZ3MgPSBkICYmIGFyZ3VtZW50c09iamVjdEZyb21GaWVsZChkLCB2YXJpYWJsZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGRpcmVjdGl2ZXMgd2l0aG91dCBhcmd1bWVudHMgKGQgZGVmaW5lZCwgYnV0IGRpcmVjdGl2ZUFyZ3MgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBudWxsKSwgdGhlIHByZXNlbmNlIG9yIGFic2VuY2Ugb2YgdGhlIGRpcmVjdGl2ZSBzdGlsbCBjb3VudHMgYXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnQgb2YgdGhlIGZpZWxkIGtleSwgc28gd2UgcmV0dXJuIG51bGwgaW4gdGhvc2UgY2FzZXMuIElmIG5vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXJlY3RpdmUgd2l0aCB0aGlzIG5hbWUgd2FzIGZvdW5kIGZvciB0aGlzIGZpZWxkIChkIHVuZGVmaW5lZCBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRodXMgZGlyZWN0aXZlQXJncyB1bmRlZmluZWQpLCB3ZSByZXR1cm4gdW5kZWZpbmVkLCB3aGljaCBjYXVzZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgdmFsdWUgdG8gYmUgb21pdHRlZCBmcm9tIHRoZSBrZXkgb2JqZWN0IHJldHVybmVkIGJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0U3BlY2lmaWVyUGF0aHMuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGRpcmVjdGl2ZUFyZ3MgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0S2V5UGF0aChkaXJlY3RpdmVBcmdzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBrZXlQYXRoLmxlbmd0aCA9PT0gMSwgdGhpcyBjb2RlIGNhbGxzIGV4dHJhY3RLZXlQYXRoIHdpdGggYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbXB0eSBwYXRoLCB3aGljaCB3b3JrcyBiZWNhdXNlIGl0IHVzZXMgZGlyZWN0aXZlQXJncyBhcyB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBleHRyYWN0ZWQgdmFsdWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5UGF0aC5zbGljZSgxKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBrZXkgc3RhcnRlZCB3aXRoIEAgYnV0IHRoZXJlIHdhcyBubyBjb3JyZXNwb25kaW5nIGRpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Ugd2FudCB0byBvbWl0IHRoaXMgdmFsdWUgZnJvbSB0aGUga2V5IG9iamVjdCwgbm90IGZhbGwgdGhyb3VnaCB0b1xuICAgICAgICAgICAgICAgICAgICAvLyB0cmVhdGluZyBAd2hhdGV2ZXIgYXMgYSBub3JtYWwgYXJndW1lbnQgbmFtZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RDaGFyID09PSBcIiRcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFyaWFibGVOYW1lID0gZmlyc3RLZXkuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YXJpYWJsZXMgJiYgaGFzT3duLmNhbGwodmFyaWFibGVzLCB2YXJpYWJsZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFyS2V5UGF0aCA9IGtleVBhdGguc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJLZXlQYXRoWzBdID0gdmFyaWFibGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RLZXlQYXRoKHZhcmlhYmxlcywgdmFyS2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGtleSBzdGFydGVkIHdpdGggJCBidXQgdGhlcmUgd2FzIG5vIGNvcnJlc3BvbmRpbmcgdmFyaWFibGUsIHdlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdhbnQgdG8gb21pdCB0aGlzIHZhbHVlIGZyb20gdGhlIGtleSBvYmplY3QsIG5vdCBmYWxsIHRocm91Z2ggdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gdHJlYXRpbmcgJHdoYXRldmVyIGFzIGEgbm9ybWFsIGFyZ3VtZW50IG5hbWUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RLZXlQYXRoKGFyZ3MsIGtleVBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHN1ZmZpeCA9IEpTT04uc3RyaW5naWZ5KGNvbGxlY3RlZCk7XG4gICAgICAgICAgICAvLyBJZiBubyBhcmd1bWVudHMgd2VyZSBwYXNzZWQgdG8gdGhpcyBmaWVsZCwgYW5kIGl0IGRpZG4ndCBoYXZlIGFueSBvdGhlclxuICAgICAgICAgICAgLy8gZmllbGQga2V5IGNvbnRyaWJ1dGlvbnMgZnJvbSBkaXJlY3RpdmVzIG9yIHZhcmlhYmxlcywgaGlkZSB0aGUgZW1wdHlcbiAgICAgICAgICAgIC8vIDp7fSBzdWZmaXggZnJvbSB0aGUgZmllbGQga2V5LiBIb3dldmVyLCBhIGZpZWxkIHBhc3NlZCBubyBhcmd1bWVudHMgY2FuXG4gICAgICAgICAgICAvLyBzdGlsbCBlbmQgdXAgd2l0aCBhIG5vbi1lbXB0eSA6ey4uLn0gc3VmZml4IGlmIGl0cyBrZXkgY29uZmlndXJhdGlvblxuICAgICAgICAgICAgLy8gcmVmZXJzIHRvIGRpcmVjdGl2ZXMgb3IgdmFyaWFibGVzLlxuICAgICAgICAgICAgaWYgKGFyZ3MgfHwgc3VmZml4ICE9PSBcInt9XCIpIHtcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWUgKz0gXCI6XCIgKyBzdWZmaXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmllbGROYW1lO1xuICAgICAgICB9KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29sbGVjdFNwZWNpZmllclBhdGhzKHNwZWNpZmllciwgZXh0cmFjdG9yKSB7XG4gICAgLy8gRm9yIGVhY2ggcGF0aCBzcGVjaWZpZWQgYnkgc3BlY2lmaWVyLCBpbnZva2UgdGhlIGV4dHJhY3RvciwgYW5kIHJlcGVhdGVkbHlcbiAgICAvLyBtZXJnZSB0aGUgcmVzdWx0cyB0b2dldGhlciwgd2l0aCBhcHByb3ByaWF0ZSBhbmNlc3RvciBjb250ZXh0LlxuICAgIHZhciBtZXJnZXIgPSBuZXcgRGVlcE1lcmdlcigpO1xuICAgIHJldHVybiBnZXRTcGVjaWZpZXJQYXRocyhzcGVjaWZpZXIpLnJlZHVjZShmdW5jdGlvbiAoY29sbGVjdGVkLCBwYXRoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIHRvTWVyZ2UgPSBleHRyYWN0b3IocGF0aCk7XG4gICAgICAgIGlmICh0b01lcmdlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIC8vIFRoaXMgcGF0aCBpcyBub3QgZXhwZWN0ZWQgdG8gY29udGFpbiBhcnJheSBpbmRleGVzLCBzbyB0aGUgdG9NZXJnZVxuICAgICAgICAgICAgLy8gcmVjb25zdHJ1Y3Rpb24gd2lsbCBub3QgY29udGFpbiBhcnJheXMuIFRPRE8gRml4IHRoaXM/XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIHRvTWVyZ2UgPSAoX2EgPSB7fSwgX2FbcGF0aFtpXV0gPSB0b01lcmdlLCBfYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xsZWN0ZWQgPSBtZXJnZXIubWVyZ2UoY29sbGVjdGVkLCB0b01lcmdlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGVjdGVkO1xuICAgIH0sIE9iamVjdC5jcmVhdGUobnVsbCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNwZWNpZmllclBhdGhzKHNwZWMpIHtcbiAgICB2YXIgaW5mbyA9IGxvb2t1cFNwZWNpZmllckluZm8oc3BlYyk7XG4gICAgaWYgKCFpbmZvLnBhdGhzKSB7XG4gICAgICAgIHZhciBwYXRoc18xID0gKGluZm8ucGF0aHMgPSBbXSk7XG4gICAgICAgIHZhciBjdXJyZW50UGF0aF8xID0gW107XG4gICAgICAgIHNwZWMuZm9yRWFjaChmdW5jdGlvbiAocywgaSkge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkocykpIHtcbiAgICAgICAgICAgICAgICBnZXRTcGVjaWZpZXJQYXRocyhzKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwYXRoc18xLnB1c2goY3VycmVudFBhdGhfMS5jb25jYXQocCkpOyB9KTtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aF8xLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aF8xLnB1c2gocyk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5KHNwZWNbaSArIDFdKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXRoc18xLnB1c2goY3VycmVudFBhdGhfMS5zbGljZSgwKSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoXzEubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gaW5mby5wYXRocztcbn1cbmZ1bmN0aW9uIGV4dHJhY3RLZXkob2JqZWN0LCBrZXkpIHtcbiAgICByZXR1cm4gb2JqZWN0W2tleV07XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEtleVBhdGgob2JqZWN0LCBwYXRoLCBleHRyYWN0KSB7XG4gICAgLy8gRm9yIGVhY2gga2V5IGluIHBhdGgsIGV4dHJhY3QgdGhlIGNvcnJlc3BvbmRpbmcgY2hpbGQgcHJvcGVydHkgZnJvbSBvYmosXG4gICAgLy8gZmxhdHRlbmluZyBhcnJheXMgaWYgZW5jb3VudGVyZWQgKHVuY29tbW9uIGZvciBrZXlGaWVsZHMgYW5kIGtleUFyZ3MsIGJ1dFxuICAgIC8vIHBvc3NpYmxlKS4gVGhlIGZpbmFsIHJlc3VsdCBvZiBwYXRoLnJlZHVjZSBpcyBub3JtYWxpemVkIHNvIHVuZXhwZWN0ZWQgbGVhZlxuICAgIC8vIG9iamVjdHMgaGF2ZSB0aGVpciBrZXlzIHNhZmVseSBzb3J0ZWQuIFRoYXQgZmluYWwgcmVzdWx0IGlzIGRpZmZpY3VsdCB0b1xuICAgIC8vIHR5cGUgYXMgYW55dGhpbmcgb3RoZXIgdGhhbiBhbnkuIFlvdSdyZSB3ZWxjb21lIHRvIHRyeSB0byBpbXByb3ZlIHRoZVxuICAgIC8vIHJldHVybiB0eXBlLCBidXQga2VlcCBpbiBtaW5kIGV4dHJhY3RLZXlQYXRoIGlzIG5vdCBhIHB1YmxpYyBmdW5jdGlvblxuICAgIC8vIChleHBvcnRlZCBvbmx5IGZvciB0ZXN0aW5nKSwgc28gdGhlIGVmZm9ydCBtYXkgbm90IGJlIHdvcnRod2hpbGUgdW5sZXNzIHRoZVxuICAgIC8vIGxpbWl0ZWQgc2V0IG9mIGFjdHVhbCBjYWxsZXJzIChzZWUgYWJvdmUpIHBhc3MgYXJndW1lbnRzIHRoYXQgVHlwZVNjcmlwdFxuICAgIC8vIGNhbiBzdGF0aWNhbGx5IHR5cGUuIElmIHdlIGtub3cgb25seSB0aGF0IHBhdGggaXMgc29tZSBhcnJheSBvZiBzdHJpbmdzXG4gICAgLy8gKGFuZCBub3QsIHNheSwgYSBzcGVjaWZpYyB0dXBsZSBvZiBzdGF0aWNhbGx5IGtub3duIHN0cmluZ3MpLCBhbnkgKG9yXG4gICAgLy8gcG9zc2libHkgdW5rbm93bikgaXMgdGhlIGhvbmVzdCBhbnN3ZXIuXG4gICAgZXh0cmFjdCA9IGV4dHJhY3QgfHwgZXh0cmFjdEtleTtcbiAgICByZXR1cm4gbm9ybWFsaXplKHBhdGgucmVkdWNlKGZ1bmN0aW9uIHJlZHVjZXIob2JqLCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkob2JqKSA/XG4gICAgICAgICAgICBvYmoubWFwKGZ1bmN0aW9uIChjaGlsZCkgeyByZXR1cm4gcmVkdWNlcihjaGlsZCwga2V5KTsgfSlcbiAgICAgICAgICAgIDogb2JqICYmIGV4dHJhY3Qob2JqLCBrZXkpO1xuICAgIH0sIG9iamVjdCkpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplKHZhbHVlKSB7XG4gICAgLy8gVXN1YWxseSB0aGUgZXh0cmFjdGVkIHZhbHVlIHdpbGwgYmUgYSBzY2FsYXIgdmFsdWUsIHNpbmNlIG1vc3QgcHJpbWFyeVxuICAgIC8vIGtleSBmaWVsZHMgYXJlIHNjYWxhciwgYnV0IGp1c3QgaW4gY2FzZSB3ZSBnZXQgYW4gb2JqZWN0IG9yIGFuIGFycmF5LCB3ZVxuICAgIC8vIG5lZWQgdG8gZG8gc29tZSBub3JtYWxpemF0aW9uIG9mIHRoZSBvcmRlciBvZiAobmVzdGVkKSBrZXlzLlxuICAgIGlmIChpc05vbk51bGxPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChub3JtYWxpemUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xsZWN0U3BlY2lmaWVyUGF0aHMoT2JqZWN0LmtleXModmFsdWUpLnNvcnQoKSwgZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBleHRyYWN0S2V5UGF0aCh2YWx1ZSwgcGF0aCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZXktZXh0cmFjdG9yLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3NpZ24sIF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52YXJpYW50LCBuZXdJbnZhcmlhbnRFcnJvciB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgc3RvcmVLZXlOYW1lRnJvbUZpZWxkLCBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQsIGlzUmVmZXJlbmNlLCBnZXRTdG9yZUtleU5hbWUsIGlzTm9uTnVsbE9iamVjdCwgc3RyaW5naWZ5Rm9yRGlzcGxheSwgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBoYXNPd24sIGZpZWxkTmFtZUZyb21TdG9yZU5hbWUsIHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0LCBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0LCBUeXBlT3JGaWVsZE5hbWVSZWdFeHAsIGRlZmF1bHREYXRhSWRGcm9tT2JqZWN0LCBpc0FycmF5LCB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbmltcG9ydCB7IGNhY2hlU2xvdCB9IGZyb20gXCIuL3JlYWN0aXZlVmFycy5qc1wiO1xuaW1wb3J0IHsga2V5QXJnc0ZuRnJvbVNwZWNpZmllciwga2V5RmllbGRzRm5Gcm9tU3BlY2lmaWVyLCB9IGZyb20gXCIuL2tleS1leHRyYWN0b3IuanNcIjtcbmltcG9ydCB7IGRpc2FibGVXYXJuaW5nc1Nsb3QgfSBmcm9tIFwiLi4vLi4vbWFza2luZy9pbmRleC5qc1wiO1xuZnVuY3Rpb24gYXJnc0Zyb21GaWVsZFNwZWNpZmllcihzcGVjKSB7XG4gICAgcmV0dXJuIChzcGVjLmFyZ3MgIT09IHZvaWQgMCA/IHNwZWMuYXJnc1xuICAgICAgICA6IHNwZWMuZmllbGQgPyBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQoc3BlYy5maWVsZCwgc3BlYy52YXJpYWJsZXMpXG4gICAgICAgICAgICA6IG51bGwpO1xufVxudmFyIG51bGxLZXlGaWVsZHNGbiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZvaWQgMDsgfTtcbnZhciBzaW1wbGVLZXlBcmdzRm4gPSBmdW5jdGlvbiAoX2FyZ3MsIGNvbnRleHQpIHsgcmV0dXJuIGNvbnRleHQuZmllbGROYW1lOyB9O1xuLy8gVGhlc2UgbWVyZ2UgZnVuY3Rpb25zIGNhbiBiZSBzZWxlY3RlZCBieSBzcGVjaWZ5aW5nIG1lcmdlOnRydWUgb3Jcbi8vIG1lcmdlOmZhbHNlIGluIGEgZmllbGQgcG9saWN5LlxudmFyIG1lcmdlVHJ1ZUZuID0gZnVuY3Rpb24gKGV4aXN0aW5nLCBpbmNvbWluZywgX2EpIHtcbiAgICB2YXIgbWVyZ2VPYmplY3RzID0gX2EubWVyZ2VPYmplY3RzO1xuICAgIHJldHVybiBtZXJnZU9iamVjdHMoZXhpc3RpbmcsIGluY29taW5nKTtcbn07XG52YXIgbWVyZ2VGYWxzZUZuID0gZnVuY3Rpb24gKF8sIGluY29taW5nKSB7IHJldHVybiBpbmNvbWluZzsgfTtcbnZhciBQb2xpY2llcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQb2xpY2llcyhjb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMudHlwZVBvbGljaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy50b0JlQWRkZWQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAvLyBNYXAgZnJvbSBzdWJ0eXBlIG5hbWVzIHRvIHNldHMgb2Ygc3VwZXJ0eXBlIG5hbWVzLiBOb3RlIHRoYXQgdGhpc1xuICAgICAgICAvLyByZXByZXNlbnRhdGlvbiBpbnZlcnRzIHRoZSBzdHJ1Y3R1cmUgb2YgcG9zc2libGVUeXBlcyAod2hvc2Uga2V5cyBhcmVcbiAgICAgICAgLy8gc3VwZXJ0eXBlcyBhbmQgd2hvc2UgdmFsdWVzIGFyZSBhcnJheXMgb2Ygc3VidHlwZXMpIGJlY2F1c2UgaXQgdGVuZHNcbiAgICAgICAgLy8gdG8gYmUgbXVjaCBtb3JlIGVmZmljaWVudCB0byBzZWFyY2ggdXB3YXJkcyB0aGFuIGRvd253YXJkcy5cbiAgICAgICAgdGhpcy5zdXBlcnR5cGVNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIEFueSBmdXp6eSBzdWJ0eXBlcyBzcGVjaWZpZWQgYnkgcG9zc2libGVUeXBlcyB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAgICAgICAvLyBSZWdFeHAgb2JqZWN0cyBhbmQgcmVjb3JkZWQgaGVyZS4gRXZlcnkga2V5IG9mIHRoaXMgbWFwIGNhbiBhbHNvIGJlXG4gICAgICAgIC8vIGZvdW5kIGluIHN1cGVydHlwZU1hcC4gSW4gbWFueSBjYXNlcyB0aGlzIE1hcCB3aWxsIGJlIGVtcHR5LCB3aGljaFxuICAgICAgICAvLyBtZWFucyBubyBmdXp6eSBzdWJ0eXBlIGNoZWNraW5nIHdpbGwgaGFwcGVuIGluIGZyYWdtZW50TWF0Y2hlcy5cbiAgICAgICAgdGhpcy5mdXp6eVN1YnR5cGVzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnJvb3RJZHNCeVR5cGVuYW1lID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5yb290VHlwZW5hbWVzQnlJZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMudXNpbmdQb3NzaWJsZVR5cGVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29uZmlnID0gX19hc3NpZ24oeyBkYXRhSWRGcm9tT2JqZWN0OiBkZWZhdWx0RGF0YUlkRnJvbU9iamVjdCB9LCBjb25maWcpO1xuICAgICAgICB0aGlzLmNhY2hlID0gdGhpcy5jb25maWcuY2FjaGU7XG4gICAgICAgIHRoaXMuc2V0Um9vdFR5cGVuYW1lKFwiUXVlcnlcIik7XG4gICAgICAgIHRoaXMuc2V0Um9vdFR5cGVuYW1lKFwiTXV0YXRpb25cIik7XG4gICAgICAgIHRoaXMuc2V0Um9vdFR5cGVuYW1lKFwiU3Vic2NyaXB0aW9uXCIpO1xuICAgICAgICBpZiAoY29uZmlnLnBvc3NpYmxlVHlwZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkUG9zc2libGVUeXBlcyhjb25maWcucG9zc2libGVUeXBlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy50eXBlUG9saWNpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHlwZVBvbGljaWVzKGNvbmZpZy50eXBlUG9saWNpZXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFBvbGljaWVzLnByb3RvdHlwZS5pZGVudGlmeSA9IGZ1bmN0aW9uIChvYmplY3QsIHBhcnRpYWxDb250ZXh0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIHBvbGljaWVzID0gdGhpcztcbiAgICAgICAgdmFyIHR5cGVuYW1lID0gKHBhcnRpYWxDb250ZXh0ICYmXG4gICAgICAgICAgICAocGFydGlhbENvbnRleHQudHlwZW5hbWUgfHwgKChfYSA9IHBhcnRpYWxDb250ZXh0LnN0b3JlT2JqZWN0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX190eXBlbmFtZSkpKSB8fFxuICAgICAgICAgICAgb2JqZWN0Ll9fdHlwZW5hbWU7XG4gICAgICAgIC8vIEl0IHNob3VsZCBiZSBwb3NzaWJsZSB0byB3cml0ZSByb290IFF1ZXJ5IGZpZWxkcyB3aXRoIHdyaXRlRnJhZ21lbnQsXG4gICAgICAgIC8vIHVzaW5nIHsgX190eXBlbmFtZTogXCJRdWVyeVwiLCAuLi4gfSBhcyB0aGUgZGF0YSwgYnV0IGl0IGRvZXMgbm90IG1ha2VcbiAgICAgICAgLy8gc2Vuc2UgdG8gYWxsb3cgdGhlIHNhbWUgaWRlbnRpZmljYXRpb24gYmVoYXZpb3IgZm9yIHRoZSBNdXRhdGlvbiBhbmRcbiAgICAgICAgLy8gU3Vic2NyaXB0aW9uIHR5cGVzLCBzaW5jZSBhcHBsaWNhdGlvbiBjb2RlIHNob3VsZCBuZXZlciBiZSB3cml0aW5nXG4gICAgICAgIC8vIGRpcmVjdGx5IHRvIChvciByZWFkaW5nIGRpcmVjdGx5IGZyb20pIHRob3NlIHJvb3Qgb2JqZWN0cy5cbiAgICAgICAgaWYgKHR5cGVuYW1lID09PSB0aGlzLnJvb3RUeXBlbmFtZXNCeUlkLlJPT1RfUVVFUlkpIHtcbiAgICAgICAgICAgIHJldHVybiBbXCJST09UX1FVRVJZXCJdO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlZmF1bHQgY29udGV4dC5zdG9yZU9iamVjdCB0byBvYmplY3QgaWYgbm90IG90aGVyd2lzZSBwcm92aWRlZC5cbiAgICAgICAgdmFyIHN0b3JlT2JqZWN0ID0gKHBhcnRpYWxDb250ZXh0ICYmIHBhcnRpYWxDb250ZXh0LnN0b3JlT2JqZWN0KSB8fCBvYmplY3Q7XG4gICAgICAgIHZhciBjb250ZXh0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHBhcnRpYWxDb250ZXh0KSwgeyB0eXBlbmFtZTogdHlwZW5hbWUsIHN0b3JlT2JqZWN0OiBzdG9yZU9iamVjdCwgcmVhZEZpZWxkOiAocGFydGlhbENvbnRleHQgJiYgcGFydGlhbENvbnRleHQucmVhZEZpZWxkKSB8fFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBub3JtYWxpemVSZWFkRmllbGRPcHRpb25zKGFyZ3VtZW50cywgc3RvcmVPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9saWNpZXMucmVhZEZpZWxkKG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBwb2xpY2llcy5jYWNoZVtcImRhdGFcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IH0pO1xuICAgICAgICB2YXIgaWQ7XG4gICAgICAgIHZhciBwb2xpY3kgPSB0eXBlbmFtZSAmJiB0aGlzLmdldFR5cGVQb2xpY3kodHlwZW5hbWUpO1xuICAgICAgICB2YXIga2V5Rm4gPSAocG9saWN5ICYmIHBvbGljeS5rZXlGbikgfHwgdGhpcy5jb25maWcuZGF0YUlkRnJvbU9iamVjdDtcbiAgICAgICAgZGlzYWJsZVdhcm5pbmdzU2xvdC53aXRoVmFsdWUodHJ1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2hpbGUgKGtleUZuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwZWNpZmllck9ySWQgPSBrZXlGbihfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb2JqZWN0KSwgc3RvcmVPYmplY3QpLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShzcGVjaWZpZXJPcklkKSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlGbiA9IGtleUZpZWxkc0ZuRnJvbVNwZWNpZmllcihzcGVjaWZpZXJPcklkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlkID0gc3BlY2lmaWVyT3JJZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWQgPSBpZCA/IFN0cmluZyhpZCkgOiB2b2lkIDA7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmtleU9iamVjdCA/IFtpZCwgY29udGV4dC5rZXlPYmplY3RdIDogW2lkXTtcbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5hZGRUeXBlUG9saWNpZXMgPSBmdW5jdGlvbiAodHlwZVBvbGljaWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIE9iamVjdC5rZXlzKHR5cGVQb2xpY2llcykuZm9yRWFjaChmdW5jdGlvbiAodHlwZW5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IHR5cGVQb2xpY2llc1t0eXBlbmFtZV0sIHF1ZXJ5VHlwZSA9IF9hLnF1ZXJ5VHlwZSwgbXV0YXRpb25UeXBlID0gX2EubXV0YXRpb25UeXBlLCBzdWJzY3JpcHRpb25UeXBlID0gX2Euc3Vic2NyaXB0aW9uVHlwZSwgaW5jb21pbmcgPSBfX3Jlc3QoX2EsIFtcInF1ZXJ5VHlwZVwiLCBcIm11dGF0aW9uVHlwZVwiLCBcInN1YnNjcmlwdGlvblR5cGVcIl0pO1xuICAgICAgICAgICAgLy8gVGhvdWdoIHtxdWVyeSxtdXRhdGlvbixzdWJzY3JpcHRpb259VHlwZSBjb25maWd1cmF0aW9ucyBhcmUgcmFyZSxcbiAgICAgICAgICAgIC8vIGl0J3MgaW1wb3J0YW50IHRvIGNhbGwgc2V0Um9vdFR5cGVuYW1lIGFzIGVhcmx5IGFzIHBvc3NpYmxlLFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlc2UgY29uZmlndXJhdGlvbnMgc2hvdWxkIGFwcGx5IGNvbnNpc3RlbnRseSBmb3IgdGhlXG4gICAgICAgICAgICAvLyBlbnRpcmUgbGlmZXRpbWUgb2YgdGhlIGNhY2hlLiBBbHNvLCBzaW5jZSBvbmx5IG9uZSBfX3R5cGVuYW1lIGNhblxuICAgICAgICAgICAgLy8gcXVhbGlmeSBhcyBvbmUgb2YgdGhlc2Ugcm9vdCB0eXBlcywgdGhlc2UgdGhyZWUgcHJvcGVydGllcyBjYW5ub3RcbiAgICAgICAgICAgIC8vIGJlIGluaGVyaXRlZCwgdW5saWtlIHRoZSByZXN0IG9mIHRoZSBpbmNvbWluZyBwcm9wZXJ0aWVzLiBUaGF0XG4gICAgICAgICAgICAvLyByZXN0cmljdGlvbiBpcyBjb252ZW5pZW50LCBiZWNhdXNlIHRoZSBwdXJwb3NlIG9mIHRoaXMudG9CZUFkZGVkXG4gICAgICAgICAgICAvLyBpcyB0byBkZWxheSB0aGUgcHJvY2Vzc2luZyBvZiB0eXBlL2ZpZWxkIHBvbGljaWVzIHVudGlsIHRoZSBmaXJzdFxuICAgICAgICAgICAgLy8gdGltZSB0aGV5J3JlIHVzZWQsIGFsbG93aW5nIHBvbGljaWVzIHRvIGJlIGFkZGVkIGluIGFueSBvcmRlciBhc1xuICAgICAgICAgICAgLy8gbG9uZyBhcyBhbGwgcmVsZXZhbnQgcG9saWNpZXMgKGluY2x1ZGluZyBwb2xpY2llcyBmb3Igc3VwZXJ0eXBlcylcbiAgICAgICAgICAgIC8vIGhhdmUgYmVlbiBhZGRlZCBieSB0aGUgdGltZSBhIGdpdmVuIHBvbGljeSBpcyB1c2VkIGZvciB0aGUgZmlyc3RcbiAgICAgICAgICAgIC8vIHRpbWUuIEluIG90aGVyIHdvcmRzLCBzaW5jZSBpbmhlcml0YW5jZSBkb2Vzbid0IG1hdHRlciBmb3IgdGhlc2VcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMsIHRoZXJlJ3MgYWxzbyBubyBuZWVkIHRvIGRlbGF5IHRoZWlyIHByb2Nlc3NpbmcgdXNpbmdcbiAgICAgICAgICAgIC8vIHRoZSB0aGlzLnRvQmVBZGRlZCBxdWV1ZS5cbiAgICAgICAgICAgIGlmIChxdWVyeVR5cGUpXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0Um9vdFR5cGVuYW1lKFwiUXVlcnlcIiwgdHlwZW5hbWUpO1xuICAgICAgICAgICAgaWYgKG11dGF0aW9uVHlwZSlcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRSb290VHlwZW5hbWUoXCJNdXRhdGlvblwiLCB0eXBlbmFtZSk7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uVHlwZSlcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRSb290VHlwZW5hbWUoXCJTdWJzY3JpcHRpb25cIiwgdHlwZW5hbWUpO1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKF90aGlzLnRvQmVBZGRlZCwgdHlwZW5hbWUpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudG9CZUFkZGVkW3R5cGVuYW1lXS5wdXNoKGluY29taW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLnRvQmVBZGRlZFt0eXBlbmFtZV0gPSBbaW5jb21pbmddO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS51cGRhdGVUeXBlUG9saWN5ID0gZnVuY3Rpb24gKHR5cGVuYW1lLCBpbmNvbWluZywgZXhpc3RpbmdGaWVsZFBvbGljaWVzKSB7XG4gICAgICAgIHZhciBleGlzdGluZyA9IHRoaXMuZ2V0VHlwZVBvbGljeSh0eXBlbmFtZSk7XG4gICAgICAgIHZhciBrZXlGaWVsZHMgPSBpbmNvbWluZy5rZXlGaWVsZHMsIGZpZWxkcyA9IGluY29taW5nLmZpZWxkcztcbiAgICAgICAgZnVuY3Rpb24gc2V0TWVyZ2UoZXhpc3RpbmcsIG1lcmdlKSB7XG4gICAgICAgICAgICBleGlzdGluZy5tZXJnZSA9XG4gICAgICAgICAgICAgICAgdHlwZW9mIG1lcmdlID09PSBcImZ1bmN0aW9uXCIgPyBtZXJnZVxuICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIG1lcmdlOnRydWUgYXMgYSBzaG9ydGhhbmQgZm9yIGEgbWVyZ2UgaW1wbGVtZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCByZXR1cm5zIG9wdGlvbnMubWVyZ2VPYmplY3RzKGV4aXN0aW5nLCBpbmNvbWluZykuXG4gICAgICAgICAgICAgICAgICAgIDogbWVyZ2UgPT09IHRydWUgPyBtZXJnZVRydWVGblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyBtZXJnZTpmYWxzZSB0byBtYWtlIGluY29taW5nIGFsd2F5cyByZXBsYWNlIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aXRob3V0IGFueSB3YXJuaW5ncyBhYm91dCBkYXRhIGNsb2JiZXJpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG1lcmdlID09PSBmYWxzZSA/IG1lcmdlRmFsc2VGblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZXhpc3RpbmcubWVyZ2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVHlwZSBwb2xpY2llcyBjYW4gZGVmaW5lIG1lcmdlIGZ1bmN0aW9ucywgYXMgYW4gYWx0ZXJuYXRpdmUgdG9cbiAgICAgICAgLy8gdXNpbmcgZmllbGQgcG9saWNpZXMgdG8gbWVyZ2UgY2hpbGQgb2JqZWN0cy5cbiAgICAgICAgc2V0TWVyZ2UoZXhpc3RpbmcsIGluY29taW5nLm1lcmdlKTtcbiAgICAgICAgZXhpc3Rpbmcua2V5Rm4gPVxuICAgICAgICAgICAgLy8gUGFzcyBmYWxzZSB0byBkaXNhYmxlIG5vcm1hbGl6YXRpb24gZm9yIHRoaXMgdHlwZW5hbWUuXG4gICAgICAgICAgICBrZXlGaWVsZHMgPT09IGZhbHNlID8gbnVsbEtleUZpZWxkc0ZuXG4gICAgICAgICAgICAgICAgLy8gUGFzcyBhbiBhcnJheSBvZiBzdHJpbmdzIHRvIHVzZSB0aG9zZSBmaWVsZHMgdG8gY29tcHV0ZSBhXG4gICAgICAgICAgICAgICAgLy8gY29tcG9zaXRlIElEIGZvciBvYmplY3RzIG9mIHRoaXMgdHlwZW5hbWUuXG4gICAgICAgICAgICAgICAgOiBpc0FycmF5KGtleUZpZWxkcykgPyBrZXlGaWVsZHNGbkZyb21TcGVjaWZpZXIoa2V5RmllbGRzKVxuICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIGEgZnVuY3Rpb24gdG8gdGFrZSBmdWxsIGNvbnRyb2wgb3ZlciBpZGVudGlmaWNhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2Yga2V5RmllbGRzID09PSBcImZ1bmN0aW9uXCIgPyBrZXlGaWVsZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlYXZlIGV4aXN0aW5nLmtleUZuIHVuY2hhbmdlZCBpZiBhYm92ZSBjYXNlcyBmYWlsLlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBleGlzdGluZy5rZXlGbjtcbiAgICAgICAgaWYgKGZpZWxkcykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZmllbGRzKS5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBleGlzdGluZ0ZpZWxkUG9saWNpZXNbZmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICAvLyBGaWVsZCBwb2xpY3kgaW5oZXJpdGFuY2UgaXMgYXRvbWljL3NoYWxsb3c6IHlvdSBjYW4ndCBpbmhlcml0IGFcbiAgICAgICAgICAgICAgICAvLyBmaWVsZCBwb2xpY3kgYW5kIHRoZW4gb3ZlcnJpZGUganVzdCBpdHMgcmVhZCBmdW5jdGlvbiwgc2luY2UgcmVhZFxuICAgICAgICAgICAgICAgIC8vIGFuZCBtZXJnZSBmdW5jdGlvbnMgb2Z0ZW4gbmVlZCB0byBjb29wZXJhdGUsIHNvIGNoYW5naW5nIG9ubHkgb25lXG4gICAgICAgICAgICAgICAgLy8gb2YgdGhlbSB3b3VsZCBiZSBhIHJlY2lwZSBmb3IgaW5jb25zaXN0ZW5jeS5cbiAgICAgICAgICAgICAgICAvLyBTbyBoZXJlIHdlIGF2b2lkIG1lcmdpbmcgYW4gaW5oZXJpdGVkIGZpZWxkIHBvbGljeSB3aXRoIGFuIHVwZGF0ZWQgb25lLlxuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmcgfHwgKGV4aXN0aW5nID09PSBudWxsIHx8IGV4aXN0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBleGlzdGluZy50eXBlbmFtZSkgIT09IHR5cGVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gZXhpc3RpbmdGaWVsZFBvbGljaWVzW2ZpZWxkTmFtZV0gPSB7IHR5cGVuYW1lOiB0eXBlbmFtZSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaW5jb21pbmcgPSBmaWVsZHNbZmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluY29taW5nID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcucmVhZCA9IGluY29taW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleUFyZ3MgPSBpbmNvbWluZy5rZXlBcmdzLCByZWFkID0gaW5jb21pbmcucmVhZCwgbWVyZ2UgPSBpbmNvbWluZy5tZXJnZTtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3Rpbmcua2V5Rm4gPVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyBmYWxzZSB0byBkaXNhYmxlIGFyZ3VtZW50LWJhc2VkIGRpZmZlcmVudGlhdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmllbGQgaWRlbnRpdGllcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleUFyZ3MgPT09IGZhbHNlID8gc2ltcGxlS2V5QXJnc0ZuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyBhbiBhcnJheSBvZiBzdHJpbmdzIHRvIHVzZSBuYW1lZCBhcmd1bWVudHMgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21wdXRlIGEgY29tcG9zaXRlIGlkZW50aXR5IGZvciB0aGUgZmllbGQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBpc0FycmF5KGtleUFyZ3MpID8ga2V5QXJnc0ZuRnJvbVNwZWNpZmllcihrZXlBcmdzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIGEgZnVuY3Rpb24gdG8gdGFrZSBmdWxsIGNvbnRyb2wgb3ZlciBmaWVsZCBpZGVudGl0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2Yga2V5QXJncyA9PT0gXCJmdW5jdGlvblwiID8ga2V5QXJnc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVhdmUgZXhpc3Rpbmcua2V5Rm4gdW5jaGFuZ2VkIGlmIGFib3ZlIGNhc2VzIGZhaWwuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGV4aXN0aW5nLmtleUZuO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlYWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcucmVhZCA9IHJlYWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0TWVyZ2UoZXhpc3RpbmcsIG1lcmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nLnJlYWQgJiYgZXhpc3RpbmcubWVyZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBib3RoIGEgcmVhZCBhbmQgYSBtZXJnZSBmdW5jdGlvbiwgYXNzdW1lXG4gICAgICAgICAgICAgICAgICAgIC8vIGtleUFyZ3M6ZmFsc2UsIGJlY2F1c2UgcmVhZCBhbmQgbWVyZ2UgdG9nZXRoZXIgY2FuIHRha2VcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzcG9uc2liaWxpdHkgZm9yIGludGVycHJldGluZyBhcmd1bWVudHMgaW4gYW5kIG91dC4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IGFzc3VtcHRpb24gY2FuIGFsd2F5cyBiZSBvdmVycmlkZGVuIGJ5IHNwZWNpZnlpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8ga2V5QXJncyBleHBsaWNpdGx5IGluIHRoZSBGaWVsZFBvbGljeS5cbiAgICAgICAgICAgICAgICAgICAgZXhpc3Rpbmcua2V5Rm4gPSBleGlzdGluZy5rZXlGbiB8fCBzaW1wbGVLZXlBcmdzRm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5zZXRSb290VHlwZW5hbWUgPSBmdW5jdGlvbiAod2hpY2gsIHR5cGVuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlbmFtZSA9PT0gdm9pZCAwKSB7IHR5cGVuYW1lID0gd2hpY2g7IH1cbiAgICAgICAgdmFyIHJvb3RJZCA9IFwiUk9PVF9cIiArIHdoaWNoLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIHZhciBvbGQgPSB0aGlzLnJvb3RUeXBlbmFtZXNCeUlkW3Jvb3RJZF07XG4gICAgICAgIGlmICh0eXBlbmFtZSAhPT0gb2xkKSB7XG4gICAgICAgICAgICBpbnZhcmlhbnQoIW9sZCB8fCBvbGQgPT09IHdoaWNoLCA2LCB3aGljaCk7XG4gICAgICAgICAgICAvLyBGaXJzdCwgZGVsZXRlIGFueSBvbGQgX190eXBlbmFtZSBhc3NvY2lhdGVkIHdpdGggdGhpcyByb290SWQgZnJvbVxuICAgICAgICAgICAgLy8gcm9vdElkc0J5VHlwZW5hbWUuXG4gICAgICAgICAgICBpZiAob2xkKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJvb3RJZHNCeVR5cGVuYW1lW29sZF07XG4gICAgICAgICAgICAvLyBOb3cgbWFrZSB0aGlzIHRoZSBvbmx5IF9fdHlwZW5hbWUgdGhhdCBtYXBzIHRvIHRoaXMgcm9vdElkLlxuICAgICAgICAgICAgdGhpcy5yb290SWRzQnlUeXBlbmFtZVt0eXBlbmFtZV0gPSByb290SWQ7XG4gICAgICAgICAgICAvLyBGaW5hbGx5LCB1cGRhdGUgdGhlIF9fdHlwZW5hbWUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcm9vdElkLlxuICAgICAgICAgICAgdGhpcy5yb290VHlwZW5hbWVzQnlJZFtyb290SWRdID0gdHlwZW5hbWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5hZGRQb3NzaWJsZVR5cGVzID0gZnVuY3Rpb24gKHBvc3NpYmxlVHlwZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy51c2luZ1Bvc3NpYmxlVHlwZXMgPSB0cnVlO1xuICAgICAgICBPYmplY3Qua2V5cyhwb3NzaWJsZVR5cGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChzdXBlcnR5cGUpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgdHlwZXMgaGF2ZSBhbiBlbnRyeSBpbiB0aGlzLnN1cGVydHlwZU1hcCwgZXZlbiBpZlxuICAgICAgICAgICAgLy8gdGhlaXIgc3VwZXJ0eXBlIHNldCBpcyBlbXB0eSwgc28gd2UgY2FuIHJldHVybiBmYWxzZSBpbW1lZGlhdGVseVxuICAgICAgICAgICAgLy8gZnJvbSBwb2xpY2llcy5mcmFnbWVudE1hdGNoZXMgZm9yIHVua25vd24gc3VwZXJ0eXBlcy5cbiAgICAgICAgICAgIF90aGlzLmdldFN1cGVydHlwZVNldChzdXBlcnR5cGUsIHRydWUpO1xuICAgICAgICAgICAgcG9zc2libGVUeXBlc1tzdXBlcnR5cGVdLmZvckVhY2goZnVuY3Rpb24gKHN1YnR5cGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXRTdXBlcnR5cGVTZXQoc3VidHlwZSwgdHJ1ZSkuYWRkKHN1cGVydHlwZSk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gc3VidHlwZS5tYXRjaChUeXBlT3JGaWVsZE5hbWVSZWdFeHApO1xuICAgICAgICAgICAgICAgIGlmICghbWF0Y2ggfHwgbWF0Y2hbMF0gIT09IHN1YnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBEb24ndCBpbnRlcnByZXQganVzdCBhbnkgaW52YWxpZCB0eXBlbmFtZSBhcyBhIFJlZ0V4cC5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZnV6enlTdWJ0eXBlcy5zZXQoc3VidHlwZSwgbmV3IFJlZ0V4cChzdWJ0eXBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLmdldFR5cGVQb2xpY3kgPSBmdW5jdGlvbiAodHlwZW5hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCFoYXNPd24uY2FsbCh0aGlzLnR5cGVQb2xpY2llcywgdHlwZW5hbWUpKSB7XG4gICAgICAgICAgICB2YXIgcG9saWN5XzEgPSAodGhpcy50eXBlUG9saWNpZXNbdHlwZW5hbWVdID0gT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gICAgICAgICAgICBwb2xpY3lfMS5maWVsZHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgLy8gV2hlbiB0aGUgVHlwZVBvbGljeSBmb3IgdHlwZW5hbWUgaXMgZmlyc3QgYWNjZXNzZWQsIGluc3RlYWQgb2ZcbiAgICAgICAgICAgIC8vIHN0YXJ0aW5nIHdpdGggYW4gZW1wdHkgcG9saWN5IG9iamVjdCwgaW5oZXJpdCBhbnkgcHJvcGVydGllcyBvclxuICAgICAgICAgICAgLy8gZmllbGRzIGZyb20gdGhlIHR5cGUgcG9saWNpZXMgb2YgdGhlIHN1cGVydHlwZXMgb2YgdHlwZW5hbWUuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gQW55IHByb3BlcnRpZXMgb3IgZmllbGRzIGRlZmluZWQgZXhwbGljaXRseSB3aXRoaW4gdGhlIFR5cGVQb2xpY3lcbiAgICAgICAgICAgIC8vIGZvciB0eXBlbmFtZSB3aWxsIHRha2UgcHJlY2VkZW5jZSwgYW5kIGlmIHRoZXJlIGFyZSBtdWx0aXBsZVxuICAgICAgICAgICAgLy8gc3VwZXJ0eXBlcywgdGhlIHByb3BlcnRpZXMgb2YgcG9saWNpZXMgd2hvc2UgdHlwZXMgd2VyZSBhZGRlZFxuICAgICAgICAgICAgLy8gbGF0ZXIgdmlhIGFkZFBvc3NpYmxlVHlwZXMgd2lsbCB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aG9zZSBvZlxuICAgICAgICAgICAgLy8gZWFybGllciBzdXBlcnR5cGVzLiBUT0RPIFBlcmhhcHMgd2Ugc2hvdWxkIHdhcm4gYWJvdXQgdGhlc2VcbiAgICAgICAgICAgIC8vIGNvbmZsaWN0cyBpbiBkZXZlbG9wbWVudCwgYW5kIHJlY29tbWVuZCBkZWZpbmluZyB0aGUgcHJvcGVydHlcbiAgICAgICAgICAgIC8vIGV4cGxpY2l0bHkgaW4gdGhlIHN1YnR5cGUgcG9saWN5P1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEZpZWxkIHBvbGljeSBpbmhlcml0YW5jZSBpcyBhdG9taWMvc2hhbGxvdzogeW91IGNhbid0IGluaGVyaXQgYVxuICAgICAgICAgICAgLy8gZmllbGQgcG9saWN5IGFuZCB0aGVuIG92ZXJyaWRlIGp1c3QgaXRzIHJlYWQgZnVuY3Rpb24sIHNpbmNlIHJlYWRcbiAgICAgICAgICAgIC8vIGFuZCBtZXJnZSBmdW5jdGlvbnMgb2Z0ZW4gbmVlZCB0byBjb29wZXJhdGUsIHNvIGNoYW5naW5nIG9ubHkgb25lXG4gICAgICAgICAgICAvLyBvZiB0aGVtIHdvdWxkIGJlIGEgcmVjaXBlIGZvciBpbmNvbnNpc3RlbmN5LlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIE9uY2UgdGhlIFR5cGVQb2xpY3kgZm9yIHR5cGVuYW1lIGhhcyBiZWVuIGFjY2Vzc2VkLCBpdHMgcHJvcGVydGllcyBjYW5cbiAgICAgICAgICAgIC8vIHN0aWxsIGJlIHVwZGF0ZWQgZGlyZWN0bHkgdXNpbmcgYWRkVHlwZVBvbGljaWVzLCBidXQgZnV0dXJlIGNoYW5nZXMgdG9cbiAgICAgICAgICAgIC8vIGluaGVyaXRlZCBzdXBlcnR5cGUgcG9saWNpZXMgd2lsbCBub3QgYmUgcmVmbGVjdGVkIGluIHRoaXMgc3VidHlwZVxuICAgICAgICAgICAgLy8gcG9saWN5LCBiZWNhdXNlIHRoaXMgY29kZSBydW5zIGF0IG1vc3Qgb25jZSBwZXIgdHlwZW5hbWUuXG4gICAgICAgICAgICB2YXIgc3VwZXJ0eXBlc18xID0gdGhpcy5zdXBlcnR5cGVNYXAuZ2V0KHR5cGVuYW1lKTtcbiAgICAgICAgICAgIGlmICghc3VwZXJ0eXBlc18xICYmIHRoaXMuZnV6enlTdWJ0eXBlcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgLy8gVG8gbWFrZSB0aGUgaW5oZXJpdGFuY2UgbG9naWMgd29yayBmb3IgdW5rbm93biB0eXBlbmFtZSBzdHJpbmdzIHRoYXRcbiAgICAgICAgICAgICAgICAvLyBtYXkgaGF2ZSBmdXp6eSBzdXBlcnR5cGVzLCB3ZSBnaXZlIHRoaXMgdHlwZW5hbWUgYW4gZW1wdHkgc3VwZXJ0eXBlXG4gICAgICAgICAgICAgICAgLy8gc2V0IGFuZCB0aGVuIHBvcHVsYXRlIGl0IHdpdGggYW55IGZ1enp5IHN1cGVydHlwZXMgdGhhdCBtYXRjaC5cbiAgICAgICAgICAgICAgICBzdXBlcnR5cGVzXzEgPSB0aGlzLmdldFN1cGVydHlwZVNldCh0eXBlbmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBvbmx5IHdvcmtzIGZvciB0eXBlbmFtZXMgdGhhdCBhcmUgZGlyZWN0bHkgbWF0Y2hlZCBieSBhIGZ1enp5XG4gICAgICAgICAgICAgICAgLy8gc3VwZXJ0eXBlLiBXaGF0IGlmIHRoZXJlIGlzIGFuIGludGVybWVkaWF0ZSBjaGFpbiBvZiBzdXBlcnR5cGVzP1xuICAgICAgICAgICAgICAgIC8vIFdoaWxlIHBvc3NpYmxlLCB0aGF0IHNpdHVhdGlvbiBjYW4gb25seSBiZSBzb2x2ZWQgZWZmZWN0aXZlbHkgYnlcbiAgICAgICAgICAgICAgICAvLyBzcGVjaWZ5aW5nIHRoZSBpbnRlcm1lZGlhdGUgcmVsYXRpb25zaGlwcyB2aWEgcG9zc2libGVUeXBlcywgbWFudWFsbHlcbiAgICAgICAgICAgICAgICAvLyBhbmQgaW4gYSBub24tZnV6enkgd2F5LlxuICAgICAgICAgICAgICAgIHRoaXMuZnV6enlTdWJ0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWdFeHAsIGZ1enp5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWdFeHAudGVzdCh0eXBlbmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBmdXp6eSBwYXJhbWV0ZXIgaXMganVzdCB0aGUgb3JpZ2luYWwgc3RyaW5nIHZlcnNpb24gb2YgcmVnRXhwXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAobm90IGEgdmFsaWQgX190eXBlbmFtZSBzdHJpbmcpLCBidXQgd2UgY2FuIGxvb2sgdXAgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHN1cGVydHlwZShzKSBpbiB0aGlzLnN1cGVydHlwZU1hcC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmdXp6eVN1cGVydHlwZXMgPSBfdGhpcy5zdXBlcnR5cGVNYXAuZ2V0KGZ1enp5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmdXp6eVN1cGVydHlwZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdXp6eVN1cGVydHlwZXMuZm9yRWFjaChmdW5jdGlvbiAoc3VwZXJ0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdXBlcnR5cGVzXzEuYWRkKHN1cGVydHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdXBlcnR5cGVzXzEgJiYgc3VwZXJ0eXBlc18xLnNpemUpIHtcbiAgICAgICAgICAgICAgICBzdXBlcnR5cGVzXzEuZm9yRWFjaChmdW5jdGlvbiAoc3VwZXJ0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLmdldFR5cGVQb2xpY3koc3VwZXJ0eXBlKSwgZmllbGRzID0gX2EuZmllbGRzLCByZXN0ID0gX19yZXN0KF9hLCBbXCJmaWVsZHNcIl0pO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHBvbGljeV8xLCByZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwb2xpY3lfMS5maWVsZHMsIGZpZWxkcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluYm94ID0gdGhpcy50b0JlQWRkZWRbdHlwZW5hbWVdO1xuICAgICAgICBpZiAoaW5ib3ggJiYgaW5ib3gubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBNZXJnZSB0aGUgcGVuZGluZyBwb2xpY2llcyBpbnRvIHRoaXMudHlwZVBvbGljaWVzLCBpbiB0aGUgb3JkZXIgdGhleVxuICAgICAgICAgICAgLy8gd2VyZSBvcmlnaW5hbGx5IHBhc3NlZCB0byBhZGRUeXBlUG9saWN5LlxuICAgICAgICAgICAgaW5ib3guc3BsaWNlKDApLmZvckVhY2goZnVuY3Rpb24gKHBvbGljeSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVR5cGVQb2xpY3kodHlwZW5hbWUsIHBvbGljeSwgX3RoaXMudHlwZVBvbGljaWVzW3R5cGVuYW1lXS5maWVsZHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZVBvbGljaWVzW3R5cGVuYW1lXTtcbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5nZXRGaWVsZFBvbGljeSA9IGZ1bmN0aW9uICh0eXBlbmFtZSwgZmllbGROYW1lKSB7XG4gICAgICAgIGlmICh0eXBlbmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHlwZVBvbGljeSh0eXBlbmFtZSkuZmllbGRzW2ZpZWxkTmFtZV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5nZXRTdXBlcnR5cGVTZXQgPSBmdW5jdGlvbiAoc3VidHlwZSwgY3JlYXRlSWZNaXNzaW5nKSB7XG4gICAgICAgIHZhciBzdXBlcnR5cGVTZXQgPSB0aGlzLnN1cGVydHlwZU1hcC5nZXQoc3VidHlwZSk7XG4gICAgICAgIGlmICghc3VwZXJ0eXBlU2V0ICYmIGNyZWF0ZUlmTWlzc2luZykge1xuICAgICAgICAgICAgdGhpcy5zdXBlcnR5cGVNYXAuc2V0KHN1YnR5cGUsIChzdXBlcnR5cGVTZXQgPSBuZXcgU2V0KCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXJ0eXBlU2V0O1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLmZyYWdtZW50TWF0Y2hlcyA9IGZ1bmN0aW9uIChmcmFnbWVudCwgdHlwZW5hbWUsIHJlc3VsdCwgdmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghZnJhZ21lbnQudHlwZUNvbmRpdGlvbilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAvLyBJZiB0aGUgZnJhZ21lbnQgaGFzIGEgdHlwZSBjb25kaXRpb24gYnV0IHRoZSBvYmplY3Qgd2UncmUgbWF0Y2hpbmdcbiAgICAgICAgLy8gYWdhaW5zdCBkb2VzIG5vdCBoYXZlIGEgX190eXBlbmFtZSwgdGhlIGZyYWdtZW50IGNhbm5vdCBtYXRjaC5cbiAgICAgICAgaWYgKCF0eXBlbmFtZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIHN1cGVydHlwZSA9IGZyYWdtZW50LnR5cGVDb25kaXRpb24ubmFtZS52YWx1ZTtcbiAgICAgICAgLy8gQ29tbW9uIGNhc2U6IGZyYWdtZW50IHR5cGUgY29uZGl0aW9uIGFuZCBfX3R5cGVuYW1lIGFyZSB0aGUgc2FtZS5cbiAgICAgICAgaWYgKHR5cGVuYW1lID09PSBzdXBlcnR5cGUpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMudXNpbmdQb3NzaWJsZVR5cGVzICYmIHRoaXMuc3VwZXJ0eXBlTWFwLmhhcyhzdXBlcnR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgdHlwZW5hbWVTdXBlcnR5cGVTZXQgPSB0aGlzLmdldFN1cGVydHlwZVNldCh0eXBlbmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgd29ya1F1ZXVlXzEgPSBbdHlwZW5hbWVTdXBlcnR5cGVTZXRdO1xuICAgICAgICAgICAgdmFyIG1heWJlRW5xdWV1ZV8xID0gZnVuY3Rpb24gKHN1YnR5cGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VwZXJ0eXBlU2V0ID0gX3RoaXMuZ2V0U3VwZXJ0eXBlU2V0KHN1YnR5cGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBpZiAoc3VwZXJ0eXBlU2V0ICYmXG4gICAgICAgICAgICAgICAgICAgIHN1cGVydHlwZVNldC5zaXplICYmXG4gICAgICAgICAgICAgICAgICAgIHdvcmtRdWV1ZV8xLmluZGV4T2Yoc3VwZXJ0eXBlU2V0KSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd29ya1F1ZXVlXzEucHVzaChzdXBlcnR5cGVTZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGZ1enp5IHN1YnR5cGVzIG9ubHkgaWYgd2UgZW5jb3VudGVyZWQgZnV6enlcbiAgICAgICAgICAgIC8vIHN1YnR5cGUgc3RyaW5ncyBpbiBhZGRQb3NzaWJsZVR5cGVzLCBhbmQgb25seSB3aGlsZSB3cml0aW5nIHRvXG4gICAgICAgICAgICAvLyB0aGUgY2FjaGUsIHNpbmNlIHRoYXQncyB3aGVuIHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQgZ2l2ZXMgYVxuICAgICAgICAgICAgLy8gc3Ryb25nIHNpZ25hbCBvZiBmcmFnbWVudCBtYXRjaGluZy4gVGhlIFN0b3JlUmVhZGVyIGNsYXNzIGNhbGxzXG4gICAgICAgICAgICAvLyBwb2xpY2llcy5mcmFnbWVudE1hdGNoZXMgd2l0aG91dCBwYXNzaW5nIGEgcmVzdWx0IG9iamVjdCwgc29cbiAgICAgICAgICAgIC8vIG5lZWRUb0NoZWNrRnV6enlTdWJ0eXBlcyBpcyBhbHdheXMgZmFsc2Ugd2hpbGUgcmVhZGluZy5cbiAgICAgICAgICAgIHZhciBuZWVkVG9DaGVja0Z1enp5U3VidHlwZXMgPSAhIShyZXN1bHQgJiYgdGhpcy5mdXp6eVN1YnR5cGVzLnNpemUpO1xuICAgICAgICAgICAgdmFyIGNoZWNraW5nRnV6enlTdWJ0eXBlcyA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gSXQncyBpbXBvcnRhbnQgdG8ga2VlcCBldmFsdWF0aW5nIHdvcmtRdWV1ZS5sZW5ndGggZWFjaCB0aW1lIHRocm91Z2hcbiAgICAgICAgICAgIC8vIHRoZSBsb29wLCBiZWNhdXNlIHRoZSBxdWV1ZSBjYW4gZ3JvdyB3aGlsZSB3ZSdyZSBpdGVyYXRpbmcgb3ZlciBpdC5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd29ya1F1ZXVlXzEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VwZXJ0eXBlU2V0ID0gd29ya1F1ZXVlXzFbaV07XG4gICAgICAgICAgICAgICAgaWYgKHN1cGVydHlwZVNldC5oYXMoc3VwZXJ0eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXR5cGVuYW1lU3VwZXJ0eXBlU2V0LmhhcyhzdXBlcnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tpbmdGdXp6eVN1YnR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2Fybig3LCB0eXBlbmFtZSwgc3VwZXJ0eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY29yZCBwb3NpdGl2ZSByZXN1bHRzIGZvciBmYXN0ZXIgZnV0dXJlIGxvb2t1cC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIHdlIGNhbm5vdCBzYWZlbHkgY2FjaGUgbmVnYXRpdmUgcmVzdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgbmV3IHBvc3NpYmxlVHlwZXMgZGF0YSBjb3VsZCBhbHdheXMgYmUgYWRkZWQgdG8gdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQb2xpY2llcyBjbGFzcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVuYW1lU3VwZXJ0eXBlU2V0LmFkZChzdXBlcnR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdXBlcnR5cGVTZXQuZm9yRWFjaChtYXliZUVucXVldWVfMSk7XG4gICAgICAgICAgICAgICAgaWYgKG5lZWRUb0NoZWNrRnV6enlTdWJ0eXBlcyAmJlxuICAgICAgICAgICAgICAgICAgICAvLyBTdGFydCBjaGVja2luZyBmdXp6eSBzdWJ0eXBlcyBvbmx5IGFmdGVyIGV4aGF1c3RpbmcgYWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vbi1mdXp6eSBzdWJ0eXBlcyAoYWZ0ZXIgdGhlIGZpbmFsIGl0ZXJhdGlvbiBvZiB0aGUgbG9vcCkuXG4gICAgICAgICAgICAgICAgICAgIGkgPT09IHdvcmtRdWV1ZV8xLmxlbmd0aCAtIDEgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgY291bGQgd2FpdCB0byBjb21wYXJlIGZyYWdtZW50LnNlbGVjdGlvblNldCB0byByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgd2UgdmVyaWZ5IHRoZSBzdXBlcnR5cGUsIGJ1dCB0aGlzIGNoZWNrIGlzIG9mdGVuIGxlc3NcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIHRoYW4gdGhhdCBzZWFyY2gsIGFuZCB3ZSB3aWxsIGhhdmUgdG8gZG8gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXBhcmlzb24gYW55d2F5IHdoZW5ldmVyIHdlIGZpbmQgYSBwb3RlbnRpYWwgbWF0Y2guXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQoZnJhZ21lbnQuc2VsZWN0aW9uU2V0LCByZXN1bHQsIHZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgYWx3YXlzIG5lZWQgdG8gY2hlY2sgZnV6enkgc3VidHlwZXMgKGlmIG5vIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAvLyB3YXMgcHJvdmlkZWQsIG9yICF0aGlzLmZ1enp5U3VidHlwZXMuc2l6ZSksIGJ1dCwgd2hlbiB3ZSBkbyxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Ugb25seSB3YW50IHRvIGNoZWNrIHRoZW0gb25jZS5cbiAgICAgICAgICAgICAgICAgICAgbmVlZFRvQ2hlY2tGdXp6eVN1YnR5cGVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNraW5nRnV6enlTdWJ0eXBlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGZpbmQgYW55IGZ1enp5IHN1YnR5cGVzIHRoYXQgbWF0Y2ggdHlwZW5hbWUsIGV4dGVuZCB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gd29ya1F1ZXVlIHRvIHNlYXJjaCB0aHJvdWdoIHRoZSBzdXBlcnR5cGVzIG9mIHRob3NlIGZ1enp5XG4gICAgICAgICAgICAgICAgICAgIC8vIHN1YnR5cGVzLiBPdGhlcndpc2UgdGhlIGZvci1sb29wIHdpbGwgdGVybWluYXRlIGFuZCB3ZSdsbFxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZmFsc2UgYmVsb3cuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnV6enlTdWJ0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWdFeHAsIGZ1enp5U3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSB0eXBlbmFtZS5tYXRjaChyZWdFeHApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzBdID09PSB0eXBlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlRW5xdWV1ZV8xKGZ1enp5U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5oYXNLZXlBcmdzID0gZnVuY3Rpb24gKHR5cGVuYW1lLCBmaWVsZE5hbWUpIHtcbiAgICAgICAgdmFyIHBvbGljeSA9IHRoaXMuZ2V0RmllbGRQb2xpY3kodHlwZW5hbWUsIGZpZWxkTmFtZSk7XG4gICAgICAgIHJldHVybiAhIShwb2xpY3kgJiYgcG9saWN5LmtleUZuKTtcbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5nZXRTdG9yZUZpZWxkTmFtZSA9IGZ1bmN0aW9uIChmaWVsZFNwZWMpIHtcbiAgICAgICAgdmFyIHR5cGVuYW1lID0gZmllbGRTcGVjLnR5cGVuYW1lLCBmaWVsZE5hbWUgPSBmaWVsZFNwZWMuZmllbGROYW1lO1xuICAgICAgICB2YXIgcG9saWN5ID0gdGhpcy5nZXRGaWVsZFBvbGljeSh0eXBlbmFtZSwgZmllbGROYW1lKTtcbiAgICAgICAgdmFyIHN0b3JlRmllbGROYW1lO1xuICAgICAgICB2YXIga2V5Rm4gPSBwb2xpY3kgJiYgcG9saWN5LmtleUZuO1xuICAgICAgICBpZiAoa2V5Rm4gJiYgdHlwZW5hbWUpIHtcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgIHR5cGVuYW1lOiB0eXBlbmFtZSxcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgICBmaWVsZDogZmllbGRTcGVjLmZpZWxkIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzOiBmaWVsZFNwZWMudmFyaWFibGVzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJnc0Zyb21GaWVsZFNwZWNpZmllcihmaWVsZFNwZWMpO1xuICAgICAgICAgICAgd2hpbGUgKGtleUZuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwZWNpZmllck9yU3RyaW5nID0ga2V5Rm4oYXJncywgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoc3BlY2lmaWVyT3JTdHJpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleUZuID0ga2V5QXJnc0ZuRnJvbVNwZWNpZmllcihzcGVjaWZpZXJPclN0cmluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY3VzdG9tIGtleUZuIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZmFsbCBiYWNrIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpZWxkTmFtZSBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgICAgICBzdG9yZUZpZWxkTmFtZSA9IHNwZWNpZmllck9yU3RyaW5nIHx8IGZpZWxkTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdG9yZUZpZWxkTmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBzdG9yZUZpZWxkTmFtZSA9XG4gICAgICAgICAgICAgICAgZmllbGRTcGVjLmZpZWxkID9cbiAgICAgICAgICAgICAgICAgICAgc3RvcmVLZXlOYW1lRnJvbUZpZWxkKGZpZWxkU3BlYy5maWVsZCwgZmllbGRTcGVjLnZhcmlhYmxlcylcbiAgICAgICAgICAgICAgICAgICAgOiBnZXRTdG9yZUtleU5hbWUoZmllbGROYW1lLCBhcmdzRnJvbUZpZWxkU3BlY2lmaWVyKGZpZWxkU3BlYykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybmluZyBmYWxzZSBmcm9tIGEga2V5QXJncyBmdW5jdGlvbiBpcyBsaWtlIGNvbmZpZ3VyaW5nXG4gICAgICAgIC8vIGtleUFyZ3M6IGZhbHNlLCBidXQgbW9yZSBkeW5hbWljLlxuICAgICAgICBpZiAoc3RvcmVGaWVsZE5hbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmllbGROYW1lO1xuICAgICAgICB9XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBjdXN0b20gZmllbGQgbmFtZXMgc3RhcnQgd2l0aCB0aGUgYWN0dWFsIGZpZWxkLm5hbWUudmFsdWVcbiAgICAgICAgLy8gb2YgdGhlIGZpZWxkLCBzbyB3ZSBjYW4gYWx3YXlzIGZpZ3VyZSBvdXQgd2hpY2ggcHJvcGVydGllcyBvZiBhXG4gICAgICAgIC8vIFN0b3JlT2JqZWN0IGNvcnJlc3BvbmQgdG8gd2hpY2ggb3JpZ2luYWwgZmllbGQgbmFtZXMuXG4gICAgICAgIHJldHVybiBmaWVsZE5hbWUgPT09IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpID8gc3RvcmVGaWVsZE5hbWVcbiAgICAgICAgICAgIDogZmllbGROYW1lICsgXCI6XCIgKyBzdG9yZUZpZWxkTmFtZTtcbiAgICB9O1xuICAgIFBvbGljaWVzLnByb3RvdHlwZS5yZWFkRmllbGQgPSBmdW5jdGlvbiAob3B0aW9ucywgY29udGV4dCkge1xuICAgICAgICB2YXIgb2JqZWN0T3JSZWZlcmVuY2UgPSBvcHRpb25zLmZyb207XG4gICAgICAgIGlmICghb2JqZWN0T3JSZWZlcmVuY2UpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBuYW1lT3JGaWVsZCA9IG9wdGlvbnMuZmllbGQgfHwgb3B0aW9ucy5maWVsZE5hbWU7XG4gICAgICAgIGlmICghbmFtZU9yRmllbGQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChvcHRpb25zLnR5cGVuYW1lID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHZhciB0eXBlbmFtZSA9IGNvbnRleHQuc3RvcmUuZ2V0RmllbGRWYWx1ZShvYmplY3RPclJlZmVyZW5jZSwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgaWYgKHR5cGVuYW1lKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMudHlwZW5hbWUgPSB0eXBlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RvcmVGaWVsZE5hbWUgPSB0aGlzLmdldFN0b3JlRmllbGROYW1lKG9wdGlvbnMpO1xuICAgICAgICB2YXIgZmllbGROYW1lID0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgIHZhciBleGlzdGluZyA9IGNvbnRleHQuc3RvcmUuZ2V0RmllbGRWYWx1ZShvYmplY3RPclJlZmVyZW5jZSwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICB2YXIgcG9saWN5ID0gdGhpcy5nZXRGaWVsZFBvbGljeShvcHRpb25zLnR5cGVuYW1lLCBmaWVsZE5hbWUpO1xuICAgICAgICB2YXIgcmVhZCA9IHBvbGljeSAmJiBwb2xpY3kucmVhZDtcbiAgICAgICAgaWYgKHJlYWQpIHtcbiAgICAgICAgICAgIHZhciByZWFkT3B0aW9ucyA9IG1ha2VGaWVsZEZ1bmN0aW9uT3B0aW9ucyh0aGlzLCBvYmplY3RPclJlZmVyZW5jZSwgb3B0aW9ucywgY29udGV4dCwgY29udGV4dC5zdG9yZS5nZXRTdG9yYWdlKGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKSA/XG4gICAgICAgICAgICAgICAgb2JqZWN0T3JSZWZlcmVuY2UuX19yZWZcbiAgICAgICAgICAgICAgICA6IG9iamVjdE9yUmVmZXJlbmNlLCBzdG9yZUZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgLy8gQ2FsbCByZWFkKGV4aXN0aW5nLCByZWFkT3B0aW9ucykgd2l0aCBjYWNoZVNsb3QgaG9sZGluZyB0aGlzLmNhY2hlLlxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlU2xvdC53aXRoVmFsdWUodGhpcy5jYWNoZSwgcmVhZCwgW1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nLFxuICAgICAgICAgICAgICAgIHJlYWRPcHRpb25zLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLmdldFJlYWRGdW5jdGlvbiA9IGZ1bmN0aW9uICh0eXBlbmFtZSwgZmllbGROYW1lKSB7XG4gICAgICAgIHZhciBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KHR5cGVuYW1lLCBmaWVsZE5hbWUpO1xuICAgICAgICByZXR1cm4gcG9saWN5ICYmIHBvbGljeS5yZWFkO1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLmdldE1lcmdlRnVuY3Rpb24gPSBmdW5jdGlvbiAocGFyZW50VHlwZW5hbWUsIGZpZWxkTmFtZSwgY2hpbGRUeXBlbmFtZSkge1xuICAgICAgICB2YXIgcG9saWN5ID0gdGhpcy5nZXRGaWVsZFBvbGljeShwYXJlbnRUeXBlbmFtZSwgZmllbGROYW1lKTtcbiAgICAgICAgdmFyIG1lcmdlID0gcG9saWN5ICYmIHBvbGljeS5tZXJnZTtcbiAgICAgICAgaWYgKCFtZXJnZSAmJiBjaGlsZFR5cGVuYW1lKSB7XG4gICAgICAgICAgICBwb2xpY3kgPSB0aGlzLmdldFR5cGVQb2xpY3koY2hpbGRUeXBlbmFtZSk7XG4gICAgICAgICAgICBtZXJnZSA9IHBvbGljeSAmJiBwb2xpY3kubWVyZ2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lcmdlO1xuICAgIH07XG4gICAgUG9saWNpZXMucHJvdG90eXBlLnJ1bk1lcmdlRnVuY3Rpb24gPSBmdW5jdGlvbiAoZXhpc3RpbmcsIGluY29taW5nLCBfYSwgY29udGV4dCwgc3RvcmFnZSkge1xuICAgICAgICB2YXIgZmllbGQgPSBfYS5maWVsZCwgdHlwZW5hbWUgPSBfYS50eXBlbmFtZSwgbWVyZ2UgPSBfYS5tZXJnZTtcbiAgICAgICAgaWYgKG1lcmdlID09PSBtZXJnZVRydWVGbikge1xuICAgICAgICAgICAgLy8gSW5zdGVhZCBvZiBnb2luZyB0byB0aGUgdHJvdWJsZSBvZiBjcmVhdGluZyBhIGZ1bGxcbiAgICAgICAgICAgIC8vIEZpZWxkRnVuY3Rpb25PcHRpb25zIG9iamVjdCBhbmQgY2FsbGluZyBtZXJnZVRydWVGbiwgd2UgY2FuXG4gICAgICAgICAgICAvLyBzaW1wbHkgY2FsbCBtZXJnZU9iamVjdHMsIGFzIG1lcmdlVHJ1ZUZuIHdvdWxkLlxuICAgICAgICAgICAgcmV0dXJuIG1ha2VNZXJnZU9iamVjdHNGdW5jdGlvbihjb250ZXh0LnN0b3JlKShleGlzdGluZywgaW5jb21pbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXJnZSA9PT0gbWVyZ2VGYWxzZUZuKSB7XG4gICAgICAgICAgICAvLyBMaWtld2lzZSBmb3IgbWVyZ2VGYWxzZUZuLCB3aG9zZSBpbXBsZW1lbnRhdGlvbiBpcyBldmVuIHNpbXBsZXIuXG4gICAgICAgICAgICByZXR1cm4gaW5jb21pbmc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgY2FjaGUud3JpdGVRdWVyeSBvciBjYWNoZS53cml0ZUZyYWdtZW50IHdhcyBjYWxsZWQgd2l0aFxuICAgICAgICAvLyBvcHRpb25zLm92ZXJ3cml0ZSBzZXQgdG8gdHJ1ZSwgd2Ugc3RpbGwgY2FsbCBtZXJnZSBmdW5jdGlvbnMsIGJ1dFxuICAgICAgICAvLyB0aGUgZXhpc3RpbmcgZGF0YSBpcyBhbHdheXMgdW5kZWZpbmVkLCBzbyB0aGUgbWVyZ2UgZnVuY3Rpb24gd2lsbFxuICAgICAgICAvLyBub3QgYXR0ZW1wdCB0byBjb21iaW5lIHRoZSBpbmNvbWluZyBkYXRhIHdpdGggdGhlIGV4aXN0aW5nIGRhdGEuXG4gICAgICAgIGlmIChjb250ZXh0Lm92ZXJ3cml0ZSkge1xuICAgICAgICAgICAgZXhpc3RpbmcgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lcmdlKGV4aXN0aW5nLCBpbmNvbWluZywgbWFrZUZpZWxkRnVuY3Rpb25PcHRpb25zKHRoaXMsIFxuICAgICAgICAvLyBVbmxpa2Ugb3B0aW9ucy5yZWFkRmllbGQgZm9yIHJlYWQgZnVuY3Rpb25zLCB3ZSBkbyBub3QgZmFsbFxuICAgICAgICAvLyBiYWNrIHRvIHRoZSBjdXJyZW50IG9iamVjdCBpZiBubyBmb3JlaWduT2JqT3JSZWYgaXMgcHJvdmlkZWQsXG4gICAgICAgIC8vIGJlY2F1c2UgaXQncyBub3QgY2xlYXIgd2hhdCB0aGUgY3VycmVudCBvYmplY3Qgc2hvdWxkIGJlIGZvclxuICAgICAgICAvLyBtZXJnZSBmdW5jdGlvbnM6IHRoZSAocG9zc2libHkgdW5kZWZpbmVkKSBleGlzdGluZyBvYmplY3QsIG9yXG4gICAgICAgIC8vIHRoZSBpbmNvbWluZyBvYmplY3Q/IElmIHlvdSB0aGluayB5b3VyIG1lcmdlIGZ1bmN0aW9uIG5lZWRzXG4gICAgICAgIC8vIHRvIHJlYWQgc2libGluZyBmaWVsZHMgaW4gb3JkZXIgdG8gcHJvZHVjZSBhIG5ldyB2YWx1ZSBmb3JcbiAgICAgICAgLy8gdGhlIGN1cnJlbnQgZmllbGQsIHlvdSBtaWdodCB3YW50IHRvIHJldGhpbmsgeW91ciBzdHJhdGVneSxcbiAgICAgICAgLy8gYmVjYXVzZSB0aGF0J3MgYSByZWNpcGUgZm9yIG1ha2luZyBtZXJnZSBiZWhhdmlvciBzZW5zaXRpdmVcbiAgICAgICAgLy8gdG8gdGhlIG9yZGVyIGluIHdoaWNoIGZpZWxkcyBhcmUgd3JpdHRlbiBpbnRvIHRoZSBjYWNoZS5cbiAgICAgICAgLy8gSG93ZXZlciwgcmVhZEZpZWxkKG5hbWUsIHJlZikgaXMgdXNlZnVsIGZvciBtZXJnZSBmdW5jdGlvbnNcbiAgICAgICAgLy8gdGhhdCBuZWVkIHRvIGRlZHVwbGljYXRlIGNoaWxkIG9iamVjdHMgYW5kIHJlZmVyZW5jZXMuXG4gICAgICAgIHZvaWQgMCwge1xuICAgICAgICAgICAgdHlwZW5hbWU6IHR5cGVuYW1lLFxuICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZC5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgZmllbGQ6IGZpZWxkLFxuICAgICAgICAgICAgdmFyaWFibGVzOiBjb250ZXh0LnZhcmlhYmxlcyxcbiAgICAgICAgfSwgY29udGV4dCwgc3RvcmFnZSB8fCBPYmplY3QuY3JlYXRlKG51bGwpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9saWNpZXM7XG59KCkpO1xuZXhwb3J0IHsgUG9saWNpZXMgfTtcbmZ1bmN0aW9uIG1ha2VGaWVsZEZ1bmN0aW9uT3B0aW9ucyhwb2xpY2llcywgb2JqZWN0T3JSZWZlcmVuY2UsIGZpZWxkU3BlYywgY29udGV4dCwgc3RvcmFnZSkge1xuICAgIHZhciBzdG9yZUZpZWxkTmFtZSA9IHBvbGljaWVzLmdldFN0b3JlRmllbGROYW1lKGZpZWxkU3BlYyk7XG4gICAgdmFyIGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgIHZhciB2YXJpYWJsZXMgPSBmaWVsZFNwZWMudmFyaWFibGVzIHx8IGNvbnRleHQudmFyaWFibGVzO1xuICAgIHZhciBfYSA9IGNvbnRleHQuc3RvcmUsIHRvUmVmZXJlbmNlID0gX2EudG9SZWZlcmVuY2UsIGNhblJlYWQgPSBfYS5jYW5SZWFkO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFyZ3M6IGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoZmllbGRTcGVjKSxcbiAgICAgICAgZmllbGQ6IGZpZWxkU3BlYy5maWVsZCB8fCBudWxsLFxuICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZSxcbiAgICAgICAgc3RvcmVGaWVsZE5hbWU6IHN0b3JlRmllbGROYW1lLFxuICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgaXNSZWZlcmVuY2U6IGlzUmVmZXJlbmNlLFxuICAgICAgICB0b1JlZmVyZW5jZTogdG9SZWZlcmVuY2UsXG4gICAgICAgIHN0b3JhZ2U6IHN0b3JhZ2UsXG4gICAgICAgIGNhY2hlOiBwb2xpY2llcy5jYWNoZSxcbiAgICAgICAgY2FuUmVhZDogY2FuUmVhZCxcbiAgICAgICAgcmVhZEZpZWxkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcG9saWNpZXMucmVhZEZpZWxkKG5vcm1hbGl6ZVJlYWRGaWVsZE9wdGlvbnMoYXJndW1lbnRzLCBvYmplY3RPclJlZmVyZW5jZSwgdmFyaWFibGVzKSwgY29udGV4dCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1lcmdlT2JqZWN0czogbWFrZU1lcmdlT2JqZWN0c0Z1bmN0aW9uKGNvbnRleHQuc3RvcmUpLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUmVhZEZpZWxkT3B0aW9ucyhyZWFkRmllbGRBcmdzLCBvYmplY3RPclJlZmVyZW5jZSwgdmFyaWFibGVzKSB7XG4gICAgdmFyIGZpZWxkTmFtZU9yT3B0aW9ucyA9IHJlYWRGaWVsZEFyZ3NbMF0sIGZyb20gPSByZWFkRmllbGRBcmdzWzFdLCBhcmdjID0gcmVhZEZpZWxkQXJncy5sZW5ndGg7XG4gICAgdmFyIG9wdGlvbnM7XG4gICAgaWYgKHR5cGVvZiBmaWVsZE5hbWVPck9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGROYW1lT3JPcHRpb25zLFxuICAgICAgICAgICAgLy8gRGVmYXVsdCB0byBvYmplY3RPclJlZmVyZW5jZSBvbmx5IHdoZW4gbm8gc2Vjb25kIGFyZ3VtZW50IHdhc1xuICAgICAgICAgICAgLy8gcGFzc2VkIGZvciB0aGUgZnJvbSBwYXJhbWV0ZXIsIG5vdCB3aGVuIHVuZGVmaW5lZCBpcyBleHBsaWNpdGx5XG4gICAgICAgICAgICAvLyBwYXNzZWQgYXMgdGhlIHNlY29uZCBhcmd1bWVudC5cbiAgICAgICAgICAgIGZyb206IGFyZ2MgPiAxID8gZnJvbSA6IG9iamVjdE9yUmVmZXJlbmNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb3B0aW9ucyA9IF9fYXNzaWduKHt9LCBmaWVsZE5hbWVPck9wdGlvbnMpO1xuICAgICAgICAvLyBEZWZhdWx0IHRvIG9iamVjdE9yUmVmZXJlbmNlIG9ubHkgd2hlbiBmaWVsZE5hbWVPck9wdGlvbnMuZnJvbSBpc1xuICAgICAgICAvLyBhY3R1YWxseSBvbWl0dGVkLCByYXRoZXIgdGhhbiBqdXN0IHVuZGVmaW5lZC5cbiAgICAgICAgaWYgKCFoYXNPd24uY2FsbChvcHRpb25zLCBcImZyb21cIikpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZnJvbSA9IG9iamVjdE9yUmVmZXJlbmNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIG9wdGlvbnMuZnJvbSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oOCwgc3RyaW5naWZ5Rm9yRGlzcGxheShBcnJheS5mcm9tKHJlYWRGaWVsZEFyZ3MpKSk7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgPT09IG9wdGlvbnMudmFyaWFibGVzKSB7XG4gICAgICAgIG9wdGlvbnMudmFyaWFibGVzID0gdmFyaWFibGVzO1xuICAgIH1cbiAgICByZXR1cm4gb3B0aW9ucztcbn1cbmZ1bmN0aW9uIG1ha2VNZXJnZU9iamVjdHNGdW5jdGlvbihzdG9yZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZU9iamVjdHMoZXhpc3RpbmcsIGluY29taW5nKSB7XG4gICAgICAgIGlmIChpc0FycmF5KGV4aXN0aW5nKSB8fCBpc0FycmF5KGluY29taW5nKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3SW52YXJpYW50RXJyb3IoOSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlc2UgZHluYW1pYyBjaGVja3MgYXJlIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBwYXJhbWV0ZXJzIG9mIGFcbiAgICAgICAgLy8gY3VzdG9tIG1lcmdlIGZ1bmN0aW9uIGNhbiBlYXNpbHkgaGF2ZSB0aGUgYW55IHR5cGUsIHNvIHRoZSB0eXBlXG4gICAgICAgIC8vIHN5c3RlbSBjYW5ub3QgYWx3YXlzIGVuZm9yY2UgdGhlIFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlIHBhcmFtZXRlclxuICAgICAgICAvLyB0eXBlcyBvZiBvcHRpb25zLm1lcmdlT2JqZWN0cy5cbiAgICAgICAgaWYgKGlzTm9uTnVsbE9iamVjdChleGlzdGluZykgJiYgaXNOb25OdWxsT2JqZWN0KGluY29taW5nKSkge1xuICAgICAgICAgICAgdmFyIGVUeXBlID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShleGlzdGluZywgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgdmFyIGlUeXBlID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShpbmNvbWluZywgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgdmFyIHR5cGVzRGlmZmVyID0gZVR5cGUgJiYgaVR5cGUgJiYgZVR5cGUgIT09IGlUeXBlO1xuICAgICAgICAgICAgaWYgKHR5cGVzRGlmZmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUmVmZXJlbmNlKGV4aXN0aW5nKSAmJiBzdG9yZVZhbHVlSXNTdG9yZU9iamVjdChpbmNvbWluZykpIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIG5vcm1hbGl6ZWQgRW50aXR5U3RvcmUgZm9yIHRoZSBlbnRpdHkgaWRlbnRpZmllZCBieVxuICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nLl9fcmVmLCBwcmVmZXJyaW5nL292ZXJ3cml0aW5nIGFueSBmaWVsZHMgY29udHJpYnV0ZWQgYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV3ZXIgaW5jb21pbmcgU3RvcmVPYmplY3QuXG4gICAgICAgICAgICAgICAgc3RvcmUubWVyZ2UoZXhpc3RpbmcuX19yZWYsIGluY29taW5nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3Rpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QoZXhpc3RpbmcpICYmIGlzUmVmZXJlbmNlKGluY29taW5nKSkge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbm9ybWFsaXplZCBFbnRpdHlTdG9yZSBmb3IgdGhlIGVudGl0eSBpZGVudGlmaWVkIGJ5XG4gICAgICAgICAgICAgICAgLy8gaW5jb21pbmcuX19yZWYsIHRha2luZyBmaWVsZHMgZnJvbSB0aGUgb2xkZXIgZXhpc3Rpbmcgb2JqZWN0IG9ubHkgaWZcbiAgICAgICAgICAgICAgICAvLyB0aG9zZSBmaWVsZHMgYXJlIG5vdCBhbHJlYWR5IHByZXNlbnQgaW4gdGhlIG5ld2VyIFN0b3JlT2JqZWN0XG4gICAgICAgICAgICAgICAgLy8gaWRlbnRpZmllZCBieSBpbmNvbWluZy5fX3JlZi5cbiAgICAgICAgICAgICAgICBzdG9yZS5tZXJnZShleGlzdGluZywgaW5jb21pbmcuX19yZWYpO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmNvbWluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdG9yZVZhbHVlSXNTdG9yZU9iamVjdChleGlzdGluZykgJiZcbiAgICAgICAgICAgICAgICBzdG9yZVZhbHVlSXNTdG9yZU9iamVjdChpbmNvbWluZykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGV4aXN0aW5nKSwgaW5jb21pbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNvbWluZztcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG9saWNpZXMuanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW52YXJpYW50LCBuZXdJbnZhcmlhbnRFcnJvciB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZXF1YWwgfSBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgVHJpZSB9IGZyb20gXCJAd3J5L3RyaWVcIjtcbmltcG9ydCB7IEtpbmQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uLCBnZXREZWZhdWx0VmFsdWVzLCBnZXRPcGVyYXRpb25EZWZpbml0aW9uLCBnZXRUeXBlbmFtZUZyb21SZXN1bHQsIG1ha2VSZWZlcmVuY2UsIGlzRmllbGQsIHJlc3VsdEtleU5hbWVGcm9tRmllbGQsIGlzUmVmZXJlbmNlLCBzaG91bGRJbmNsdWRlLCBjbG9uZURlZXAsIGFkZFR5cGVuYW1lVG9Eb2N1bWVudCwgaXNOb25FbXB0eUFycmF5LCBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQsIGNhbm9uaWNhbFN0cmluZ2lmeSwgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBpc0FycmF5LCBtYWtlUHJvY2Vzc2VkRmllbGRzTWVyZ2VyLCBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lLCBzdG9yZVZhbHVlSXNTdG9yZU9iamVjdCwgZXh0cmFjdEZyYWdtZW50Q29udGV4dCwgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBub3JtYWxpemVSZWFkRmllbGRPcHRpb25zIH0gZnJvbSBcIi4vcG9saWNpZXMuanNcIjtcbi8vIFNpbmNlIHRoZXJlIGFyZSBvbmx5IGZvdXIgcG9zc2libGUgY29tYmluYXRpb25zIG9mIGNvbnRleHQuY2xpZW50T25seSBhbmRcbi8vIGNvbnRleHQuZGVmZXJyZWQgdmFsdWVzLCB3ZSBzaG91bGQgbmVlZCBhdCBtb3N0IGZvdXIgXCJmbGF2b3JzXCIgb2YgYW55IGdpdmVuXG4vLyBXcml0ZUNvbnRleHQuIFRvIGF2b2lkIGNyZWF0aW5nIG11bHRpcGxlIGNvcGllcyBvZiB0aGUgc2FtZSBjb250ZXh0LCB3ZSBjYWNoZVxuLy8gdGhlIGNvbnRleHRzIGluIHRoZSBjb250ZXh0LmZsYXZvcnMgTWFwIChzaGFyZWQgYnkgYWxsIGZsYXZvcnMpIGFjY29yZGluZyB0b1xuLy8gdGhlaXIgY2xpZW50T25seSBhbmQgZGVmZXJyZWQgdmFsdWVzIChhbHdheXMgaW4gdGhhdCBvcmRlcikuXG5mdW5jdGlvbiBnZXRDb250ZXh0Rmxhdm9yKGNvbnRleHQsIGNsaWVudE9ubHksIGRlZmVycmVkKSB7XG4gICAgdmFyIGtleSA9IFwiXCIuY29uY2F0KGNsaWVudE9ubHkpLmNvbmNhdChkZWZlcnJlZCk7XG4gICAgdmFyIGZsYXZvcmVkID0gY29udGV4dC5mbGF2b3JzLmdldChrZXkpO1xuICAgIGlmICghZmxhdm9yZWQpIHtcbiAgICAgICAgY29udGV4dC5mbGF2b3JzLnNldChrZXksIChmbGF2b3JlZCA9XG4gICAgICAgICAgICBjb250ZXh0LmNsaWVudE9ubHkgPT09IGNsaWVudE9ubHkgJiYgY29udGV4dC5kZWZlcnJlZCA9PT0gZGVmZXJyZWQgP1xuICAgICAgICAgICAgICAgIGNvbnRleHRcbiAgICAgICAgICAgICAgICA6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb250ZXh0KSwgeyBjbGllbnRPbmx5OiBjbGllbnRPbmx5LCBkZWZlcnJlZDogZGVmZXJyZWQgfSkpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZsYXZvcmVkO1xufVxudmFyIFN0b3JlV3JpdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0b3JlV3JpdGVyKGNhY2hlLCByZWFkZXIsIGZyYWdtZW50cykge1xuICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgICAgIHRoaXMucmVhZGVyID0gcmVhZGVyO1xuICAgICAgICB0aGlzLmZyYWdtZW50cyA9IGZyYWdtZW50cztcbiAgICB9XG4gICAgU3RvcmVXcml0ZXIucHJvdG90eXBlLndyaXRlVG9TdG9yZSA9IGZ1bmN0aW9uIChzdG9yZSwgX2EpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHF1ZXJ5ID0gX2EucXVlcnksIHJlc3VsdCA9IF9hLnJlc3VsdCwgZGF0YUlkID0gX2EuZGF0YUlkLCB2YXJpYWJsZXMgPSBfYS52YXJpYWJsZXMsIG92ZXJ3cml0ZSA9IF9hLm92ZXJ3cml0ZTtcbiAgICAgICAgdmFyIG9wZXJhdGlvbkRlZmluaXRpb24gPSBnZXRPcGVyYXRpb25EZWZpbml0aW9uKHF1ZXJ5KTtcbiAgICAgICAgdmFyIG1lcmdlciA9IG1ha2VQcm9jZXNzZWRGaWVsZHNNZXJnZXIoKTtcbiAgICAgICAgdmFyaWFibGVzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGdldERlZmF1bHRWYWx1ZXMob3BlcmF0aW9uRGVmaW5pdGlvbikpLCB2YXJpYWJsZXMpO1xuICAgICAgICB2YXIgY29udGV4dCA9IF9fYXNzaWduKF9fYXNzaWduKHsgc3RvcmU6IHN0b3JlLCB3cml0dGVuOiBPYmplY3QuY3JlYXRlKG51bGwpLCBtZXJnZTogZnVuY3Rpb24gKGV4aXN0aW5nLCBpbmNvbWluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXJnZXIubWVyZ2UoZXhpc3RpbmcsIGluY29taW5nKTtcbiAgICAgICAgICAgIH0sIHZhcmlhYmxlczogdmFyaWFibGVzLCB2YXJTdHJpbmc6IGNhbm9uaWNhbFN0cmluZ2lmeSh2YXJpYWJsZXMpIH0sIGV4dHJhY3RGcmFnbWVudENvbnRleHQocXVlcnksIHRoaXMuZnJhZ21lbnRzKSksIHsgb3ZlcndyaXRlOiAhIW92ZXJ3cml0ZSwgaW5jb21pbmdCeUlkOiBuZXcgTWFwKCksIGNsaWVudE9ubHk6IGZhbHNlLCBkZWZlcnJlZDogZmFsc2UsIGZsYXZvcnM6IG5ldyBNYXAoKSB9KTtcbiAgICAgICAgdmFyIHJlZiA9IHRoaXMucHJvY2Vzc1NlbGVjdGlvblNldCh7XG4gICAgICAgICAgICByZXN1bHQ6IHJlc3VsdCB8fCBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgICAgICAgZGF0YUlkOiBkYXRhSWQsXG4gICAgICAgICAgICBzZWxlY3Rpb25TZXQ6IG9wZXJhdGlvbkRlZmluaXRpb24uc2VsZWN0aW9uU2V0LFxuICAgICAgICAgICAgbWVyZ2VUcmVlOiB7IG1hcDogbmV3IE1hcCgpIH0sXG4gICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFpc1JlZmVyZW5jZShyZWYpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXdJbnZhcmlhbnRFcnJvcigxMiwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTbyBmYXIsIHRoZSBzdG9yZSBoYXMgbm90IGJlZW4gbW9kaWZpZWQsIHNvIG5vdyBpdCdzIHRpbWUgdG8gcHJvY2Vzc1xuICAgICAgICAvLyBjb250ZXh0LmluY29taW5nQnlJZCBhbmQgbWVyZ2UgdGhvc2UgaW5jb21pbmcgZmllbGRzIGludG8gY29udGV4dC5zdG9yZS5cbiAgICAgICAgY29udGV4dC5pbmNvbWluZ0J5SWQuZm9yRWFjaChmdW5jdGlvbiAoX2EsIGRhdGFJZCkge1xuICAgICAgICAgICAgdmFyIHN0b3JlT2JqZWN0ID0gX2Euc3RvcmVPYmplY3QsIG1lcmdlVHJlZSA9IF9hLm1lcmdlVHJlZSwgZmllbGROb2RlU2V0ID0gX2EuZmllbGROb2RlU2V0O1xuICAgICAgICAgICAgdmFyIGVudGl0eVJlZiA9IG1ha2VSZWZlcmVuY2UoZGF0YUlkKTtcbiAgICAgICAgICAgIGlmIChtZXJnZVRyZWUgJiYgbWVyZ2VUcmVlLm1hcC5zaXplKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFwcGxpZWQgPSBfdGhpcy5hcHBseU1lcmdlcyhtZXJnZVRyZWUsIGVudGl0eVJlZiwgc3RvcmVPYmplY3QsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc1JlZmVyZW5jZShhcHBsaWVkKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBc3N1bWUgUmVmZXJlbmNlcyByZXR1cm5lZCBieSBhcHBseU1lcmdlcyBoYXZlIGFscmVhZHkgYmVlbiBtZXJnZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW50byB0aGUgc3RvcmUuIFNlZSBtYWtlTWVyZ2VPYmplY3RzRnVuY3Rpb24gaW4gcG9saWNpZXMudHMgZm9yIGFuXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4YW1wbGUgb2YgaG93IHRoaXMgY2FuIGhhcHBlbi5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGFwcGx5TWVyZ2VzIHJldHVybmVkIGEgU3RvcmVPYmplY3QsIHdob3NlIGZpZWxkcyB3ZSBzaG91bGRcbiAgICAgICAgICAgICAgICAvLyBtZXJnZSBpbnRvIHRoZSBzdG9yZSAoc2VlIHN0b3JlLm1lcmdlIHN0YXRlbWVudCBiZWxvdykuXG4gICAgICAgICAgICAgICAgc3RvcmVPYmplY3QgPSBhcHBsaWVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgIWNvbnRleHQub3ZlcndyaXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkc1dpdGhTZWxlY3Rpb25TZXRzXzEgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgICAgICAgIGZpZWxkTm9kZVNldC5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNXaXRoU2VsZWN0aW9uU2V0c18xW2ZpZWxkLm5hbWUudmFsdWVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBoYXNTZWxlY3Rpb25TZXRfMSA9IGZ1bmN0aW9uIChzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRzV2l0aFNlbGVjdGlvblNldHNfMVtmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKV0gPT09XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGhhc01lcmdlRnVuY3Rpb25fMSA9IGZ1bmN0aW9uIChzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRUcmVlID0gbWVyZ2VUcmVlICYmIG1lcmdlVHJlZS5tYXAuZ2V0KHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4oY2hpbGRUcmVlICYmIGNoaWxkVHJlZS5pbmZvICYmIGNoaWxkVHJlZS5pbmZvLm1lcmdlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JlT2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhIG1lcmdlIGZ1bmN0aW9uIHdhcyBkZWZpbmVkIGZvciB0aGlzIGZpZWxkLCB0cnVzdCB0aGF0IGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpZCB0aGUgcmlnaHQgdGhpbmcgYWJvdXQgKG5vdCkgY2xvYmJlcmluZyBkYXRhLiBJZiB0aGUgZmllbGRcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFzIG5vIHNlbGVjdGlvbiBzZXQsIGl0J3MgYSBzY2FsYXIgZmllbGQsIHNvIGl0IGRvZXNuJ3QgbmVlZFxuICAgICAgICAgICAgICAgICAgICAvLyBhIG1lcmdlIGZ1bmN0aW9uIChldmVuIGlmIGl0J3MgYW4gb2JqZWN0LCBsaWtlIEpTT04gZGF0YSkuXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNTZWxlY3Rpb25TZXRfMShzdG9yZUZpZWxkTmFtZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFoYXNNZXJnZUZ1bmN0aW9uXzEoc3RvcmVGaWVsZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuQWJvdXREYXRhTG9zcyhlbnRpdHlSZWYsIHN0b3JlT2JqZWN0LCBzdG9yZUZpZWxkTmFtZSwgY29udGV4dC5zdG9yZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JlLm1lcmdlKGRhdGFJZCwgc3RvcmVPYmplY3QpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQW55IElEcyB3cml0dGVuIGV4cGxpY2l0bHkgdG8gdGhlIGNhY2hlIHdpbGwgYmUgcmV0YWluZWQgYXNcbiAgICAgICAgLy8gcmVhY2hhYmxlIHJvb3QgSURzIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gcHVycG9zZXMuIEFsdGhvdWdoIHRoaXNcbiAgICAgICAgLy8gbG9naWMgaW5jbHVkZXMgcm9vdCBJRHMgbGlrZSBST09UX1FVRVJZIGFuZCBST09UX01VVEFUSU9OLCB0aGVpclxuICAgICAgICAvLyByZXRhaW5tZW50IGNvdW50cyBhcmUgZWZmZWN0aXZlbHkgaWdub3JlZCBiZWNhdXNlIGNhY2hlLmdjKCkgYWx3YXlzXG4gICAgICAgIC8vIGluY2x1ZGVzIHRoZW0gaW4gaXRzIHJvb3QgSUQgc2V0LlxuICAgICAgICBzdG9yZS5yZXRhaW4ocmVmLl9fcmVmKTtcbiAgICAgICAgcmV0dXJuIHJlZjtcbiAgICB9O1xuICAgIFN0b3JlV3JpdGVyLnByb3RvdHlwZS5wcm9jZXNzU2VsZWN0aW9uU2V0ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBkYXRhSWQgPSBfYS5kYXRhSWQsIHJlc3VsdCA9IF9hLnJlc3VsdCwgc2VsZWN0aW9uU2V0ID0gX2Euc2VsZWN0aW9uU2V0LCBjb250ZXh0ID0gX2EuY29udGV4dCwgXG4gICAgICAgIC8vIFRoaXMgb2JqZWN0IGFsbG93cyBwcm9jZXNzU2VsZWN0aW9uU2V0IHRvIHJlcG9ydCB1c2VmdWwgaW5mb3JtYXRpb25cbiAgICAgICAgLy8gdG8gaXRzIGNhbGxlcnMgd2l0aG91dCBleHBsaWNpdGx5IHJldHVybmluZyB0aGF0IGluZm9ybWF0aW9uLlxuICAgICAgICBtZXJnZVRyZWUgPSBfYS5tZXJnZVRyZWU7XG4gICAgICAgIHZhciBwb2xpY2llcyA9IHRoaXMuY2FjaGUucG9saWNpZXM7XG4gICAgICAgIC8vIFRoaXMgdmFyaWFibGUgd2lsbCBiZSByZXBlYXRlZGx5IHVwZGF0ZWQgdXNpbmcgY29udGV4dC5tZXJnZSB0b1xuICAgICAgICAvLyBhY2N1bXVsYXRlIGFsbCBmaWVsZHMgdGhhdCBuZWVkIHRvIGJlIHdyaXR0ZW4gaW50byB0aGUgc3RvcmUuXG4gICAgICAgIHZhciBpbmNvbWluZyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIC8vIElmIHR5cGVuYW1lIHdhcyBub3QgcGFzc2VkIGluLCBpbmZlciBpdC4gTm90ZSB0aGF0IHR5cGVuYW1lIGlzXG4gICAgICAgIC8vIGFsd2F5cyBwYXNzZWQgaW4gZm9yIHRyaWNreS10by1pbmZlciBjYXNlcyBzdWNoIGFzIFwiUXVlcnlcIiBmb3JcbiAgICAgICAgLy8gUk9PVF9RVUVSWS5cbiAgICAgICAgdmFyIHR5cGVuYW1lID0gKGRhdGFJZCAmJiBwb2xpY2llcy5yb290VHlwZW5hbWVzQnlJZFtkYXRhSWRdKSB8fFxuICAgICAgICAgICAgZ2V0VHlwZW5hbWVGcm9tUmVzdWx0KHJlc3VsdCwgc2VsZWN0aW9uU2V0LCBjb250ZXh0LmZyYWdtZW50TWFwKSB8fFxuICAgICAgICAgICAgKGRhdGFJZCAmJiBjb250ZXh0LnN0b3JlLmdldChkYXRhSWQsIFwiX190eXBlbmFtZVwiKSk7XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgdHlwZW5hbWUpIHtcbiAgICAgICAgICAgIGluY29taW5nLl9fdHlwZW5hbWUgPSB0eXBlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIHJlYWRGaWVsZCBmdW5jdGlvbiB3aWxsIGJlIHBhc3NlZCBhcyBjb250ZXh0LnJlYWRGaWVsZCBpbiB0aGVcbiAgICAgICAgLy8gS2V5RmllbGRzQ29udGV4dCBvYmplY3QgY3JlYXRlZCB3aXRoaW4gcG9saWNpZXMuaWRlbnRpZnkgKGNhbGxlZCBiZWxvdykuXG4gICAgICAgIC8vIEluIGFkZGl0aW9uIHRvIHJlYWRpbmcgZnJvbSB0aGUgZXhpc3RpbmcgY29udGV4dC5zdG9yZSAodGhhbmtzIHRvIHRoZVxuICAgICAgICAvLyBwb2xpY2llcy5yZWFkRmllbGQob3B0aW9ucywgY29udGV4dCkgbGluZSBhdCB0aGUgdmVyeSBib3R0b20pLCB0aGlzXG4gICAgICAgIC8vIHZlcnNpb24gb2YgcmVhZEZpZWxkIGNhbiByZWFkIGZyb20gUmVmZXJlbmNlIG9iamVjdHMgdGhhdCBhcmUgY3VycmVudGx5XG4gICAgICAgIC8vIHBlbmRpbmcgaW4gY29udGV4dC5pbmNvbWluZ0J5SWQsIHdoaWNoIGlzIGltcG9ydGFudCB3aGVuZXZlciBrZXlGaWVsZHNcbiAgICAgICAgLy8gbmVlZCB0byBiZSBleHRyYWN0ZWQgZnJvbSBhIGNoaWxkIG9iamVjdCB0aGF0IHByb2Nlc3NTZWxlY3Rpb25TZXQgaGFzXG4gICAgICAgIC8vIHR1cm5lZCBpbnRvIGEgUmVmZXJlbmNlLlxuICAgICAgICB2YXIgcmVhZEZpZWxkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBub3JtYWxpemVSZWFkRmllbGRPcHRpb25zKGFyZ3VtZW50cywgaW5jb21pbmcsIGNvbnRleHQudmFyaWFibGVzKTtcbiAgICAgICAgICAgIGlmIChpc1JlZmVyZW5jZShvcHRpb25zLmZyb20pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZm8gPSBjb250ZXh0LmluY29taW5nQnlJZC5nZXQob3B0aW9ucy5mcm9tLl9fcmVmKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSBwb2xpY2llcy5yZWFkRmllbGQoX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGZyb206IGluZm8uc3RvcmVPYmplY3QgfSksIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0XzEgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdF8xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBvbGljaWVzLnJlYWRGaWVsZChvcHRpb25zLCBjb250ZXh0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGZpZWxkTm9kZVNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5mbGF0dGVuRmllbGRzKHNlbGVjdGlvblNldCwgcmVzdWx0LCBcbiAgICAgICAgLy8gVGhpcyBXcml0ZUNvbnRleHQgd2lsbCBiZSB0aGUgZGVmYXVsdCBjb250ZXh0IHZhbHVlIGZvciBmaWVsZHMgcmV0dXJuZWRcbiAgICAgICAgLy8gYnkgdGhlIGZsYXR0ZW5GaWVsZHMgbWV0aG9kLCBidXQgc29tZSBmaWVsZHMgbWF5IGJlIGFzc2lnbmVkIGEgbW9kaWZpZWRcbiAgICAgICAgLy8gY29udGV4dCwgZGVwZW5kaW5nIG9uIHRoZSBwcmVzZW5jZSBvZiBAY2xpZW50IGFuZCBvdGhlciBkaXJlY3RpdmVzLlxuICAgICAgICBjb250ZXh0LCB0eXBlbmFtZSkuZm9yRWFjaChmdW5jdGlvbiAoY29udGV4dCwgZmllbGQpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciByZXN1bHRGaWVsZEtleSA9IHJlc3VsdEtleU5hbWVGcm9tRmllbGQoZmllbGQpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0W3Jlc3VsdEZpZWxkS2V5XTtcbiAgICAgICAgICAgIGZpZWxkTm9kZVNldC5hZGQoZmllbGQpO1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RvcmVGaWVsZE5hbWUgPSBwb2xpY2llcy5nZXRTdG9yZUZpZWxkTmFtZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVuYW1lOiB0eXBlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZC5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZDogZmllbGQsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogY29udGV4dC52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkVHJlZSA9IGdldENoaWxkTWVyZ2VUcmVlKG1lcmdlVHJlZSwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIHZhciBpbmNvbWluZ1ZhbHVlID0gX3RoaXMucHJvY2Vzc0ZpZWxkVmFsdWUodmFsdWUsIGZpZWxkLCBcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb250ZXh0LmNsaWVudE9ubHkgYW5kIGNvbnRleHQuZGVmZXJyZWQgdG8gdGhlaXIgZGVmYXVsdFxuICAgICAgICAgICAgICAgIC8vIHZhbHVlcyBiZWZvcmUgcHJvY2Vzc2luZyBuZXN0ZWQgc2VsZWN0aW9uIHNldHMuXG4gICAgICAgICAgICAgICAgZmllbGQuc2VsZWN0aW9uU2V0ID9cbiAgICAgICAgICAgICAgICAgICAgZ2V0Q29udGV4dEZsYXZvcihjb250ZXh0LCBmYWxzZSwgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIDogY29udGV4dCwgY2hpbGRUcmVlKTtcbiAgICAgICAgICAgICAgICAvLyBUbyBkZXRlcm1pbmUgaWYgdGhpcyBmaWVsZCBob2xkcyBhIGNoaWxkIG9iamVjdCB3aXRoIGEgbWVyZ2UgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAvLyBkZWZpbmVkIGluIGl0cyB0eXBlIHBvbGljeSAoc2VlIFBSICM3MDcwKSwgd2UgbmVlZCB0byBmaWd1cmUgb3V0IHRoZVxuICAgICAgICAgICAgICAgIC8vIGNoaWxkIG9iamVjdCdzIF9fdHlwZW5hbWUuXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkVHlwZW5hbWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGZpZWxkJ3MgdmFsdWUgY2FuIGJlIGFuIG9iamVjdCB0aGF0IGhhcyBhIF9fdHlwZW5hbWUgb25seSBpZiB0aGVcbiAgICAgICAgICAgICAgICAvLyBmaWVsZCBoYXMgYSBzZWxlY3Rpb24gc2V0LiBPdGhlcndpc2UgaW5jb21pbmdWYWx1ZSBpcyBzY2FsYXIuXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLnNlbGVjdGlvblNldCAmJlxuICAgICAgICAgICAgICAgICAgICAoaXNSZWZlcmVuY2UoaW5jb21pbmdWYWx1ZSkgfHwgc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QoaW5jb21pbmdWYWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkVHlwZW5hbWUgPSByZWFkRmllbGQoXCJfX3R5cGVuYW1lXCIsIGluY29taW5nVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWVyZ2UgPSBwb2xpY2llcy5nZXRNZXJnZUZ1bmN0aW9uKHR5cGVuYW1lLCBmaWVsZC5uYW1lLnZhbHVlLCBjaGlsZFR5cGVuYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWVyZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRUcmVlLmluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIENoZWNrIGNvbXBhdGliaWxpdHkgYWdhaW5zdCBhbnkgZXhpc3RpbmcgY2hpbGRUcmVlLmZpZWxkP1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW5hbWU6IHR5cGVuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2U6IG1lcmdlLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWF5YmVSZWN5Y2xlQ2hpbGRNZXJnZVRyZWUobWVyZ2VUcmVlLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluY29taW5nID0gY29udGV4dC5tZXJnZShpbmNvbWluZywgKF9hID0ge30sXG4gICAgICAgICAgICAgICAgICAgIF9hW3N0b3JlRmllbGROYW1lXSA9IGluY29taW5nVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIF9hKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgIWNvbnRleHQuY2xpZW50T25seSAmJlxuICAgICAgICAgICAgICAgICFjb250ZXh0LmRlZmVycmVkICYmXG4gICAgICAgICAgICAgICAgIWFkZFR5cGVuYW1lVG9Eb2N1bWVudC5hZGRlZChmaWVsZCkgJiZcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZmllbGQgaGFzIGEgcmVhZCBmdW5jdGlvbiwgaXQgbWF5IGJlIGEgc3ludGhldGljIGZpZWxkIG9yXG4gICAgICAgICAgICAgICAgLy8gcHJvdmlkZSBhIGRlZmF1bHQgdmFsdWUsIHNvIGl0cyBhYnNlbmNlIGZyb20gdGhlIHdyaXR0ZW4gZGF0YSBzaG91bGRcbiAgICAgICAgICAgICAgICAvLyBub3QgYmUgY2F1c2UgZm9yIGFsYXJtLlxuICAgICAgICAgICAgICAgICFwb2xpY2llcy5nZXRSZWFkRnVuY3Rpb24odHlwZW5hbWUsIGZpZWxkLm5hbWUudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQuZXJyb3IoMTMsIHJlc3VsdEtleU5hbWVGcm9tRmllbGQoZmllbGQpLCByZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gSWRlbnRpZnkgdGhlIHJlc3VsdCBvYmplY3QsIGV2ZW4gaWYgZGF0YUlkIHdhcyBhbHJlYWR5IHByb3ZpZGVkLFxuICAgICAgICAvLyBzaW5jZSB3ZSBhbHdheXMgbmVlZCBrZXlPYmplY3QgYmVsb3cuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgX2IgPSBwb2xpY2llcy5pZGVudGlmeShyZXN1bHQsIHtcbiAgICAgICAgICAgICAgICB0eXBlbmFtZTogdHlwZW5hbWUsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uU2V0OiBzZWxlY3Rpb25TZXQsXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRNYXA6IGNvbnRleHQuZnJhZ21lbnRNYXAsXG4gICAgICAgICAgICAgICAgc3RvcmVPYmplY3Q6IGluY29taW5nLFxuICAgICAgICAgICAgICAgIHJlYWRGaWVsZDogcmVhZEZpZWxkLFxuICAgICAgICAgICAgfSksIGlkID0gX2JbMF0sIGtleU9iamVjdCA9IF9iWzFdO1xuICAgICAgICAgICAgLy8gSWYgZGF0YUlkIHdhcyBub3QgcHJvdmlkZWQsIGZhbGwgYmFjayB0byB0aGUgaWQganVzdCBnZW5lcmF0ZWQgYnlcbiAgICAgICAgICAgIC8vIHBvbGljaWVzLmlkZW50aWZ5LlxuICAgICAgICAgICAgZGF0YUlkID0gZGF0YUlkIHx8IGlkO1xuICAgICAgICAgICAgLy8gV3JpdGUgYW55IGtleSBmaWVsZHMgdGhhdCB3ZXJlIHVzZWQgZHVyaW5nIGlkZW50aWZpY2F0aW9uLCBldmVuIGlmXG4gICAgICAgICAgICAvLyB0aGV5IHdlcmUgbm90IG1lbnRpb25lZCBpbiB0aGUgb3JpZ2luYWwgcXVlcnkuXG4gICAgICAgICAgICBpZiAoa2V5T2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBSZXZlcnNlIHRoZSBvcmRlciBvZiB0aGUgYXJndW1lbnRzP1xuICAgICAgICAgICAgICAgIGluY29taW5nID0gY29udGV4dC5tZXJnZShpbmNvbWluZywga2V5T2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gSWYgZGF0YUlkIHdhcyBwcm92aWRlZCwgdG9sZXJhdGUgZmFpbHVyZSBvZiBwb2xpY2llcy5pZGVudGlmeS5cbiAgICAgICAgICAgIGlmICghZGF0YUlkKVxuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiBkYXRhSWQpIHtcbiAgICAgICAgICAgIHZhciBkYXRhUmVmID0gbWFrZVJlZmVyZW5jZShkYXRhSWQpO1xuICAgICAgICAgICAgLy8gQXZvaWQgcHJvY2Vzc2luZyB0aGUgc2FtZSBlbnRpdHkgb2JqZWN0IHVzaW5nIHRoZSBzYW1lIHNlbGVjdGlvblxuICAgICAgICAgICAgLy8gc2V0IG1vcmUgdGhhbiBvbmNlLiBXZSB1c2UgYW4gYXJyYXkgaW5zdGVhZCBvZiBhIFNldCBzaW5jZSBtb3N0XG4gICAgICAgICAgICAvLyBlbnRpdHkgSURzIHdpbGwgYmUgd3JpdHRlbiB1c2luZyBvbmx5IG9uZSBzZWxlY3Rpb24gc2V0LCBzbyB0aGVcbiAgICAgICAgICAgIC8vIHNpemUgb2YgdGhpcyBhcnJheSBpcyBsaWtlbHkgdG8gYmUgdmVyeSBzbWFsbCwgbWVhbmluZyBpbmRleE9mIGlzXG4gICAgICAgICAgICAvLyBsaWtlbHkgdG8gYmUgZmFzdGVyIHRoYW4gU2V0LnByb3RvdHlwZS5oYXMuXG4gICAgICAgICAgICB2YXIgc2V0cyA9IGNvbnRleHQud3JpdHRlbltkYXRhSWRdIHx8IChjb250ZXh0LndyaXR0ZW5bZGF0YUlkXSA9IFtdKTtcbiAgICAgICAgICAgIGlmIChzZXRzLmluZGV4T2Yoc2VsZWN0aW9uU2V0KSA+PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhUmVmO1xuICAgICAgICAgICAgc2V0cy5wdXNoKHNlbGVjdGlvblNldCk7XG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBhYm91dCB0byB3cml0ZSBhIHJlc3VsdCBvYmplY3QgaW50byB0aGUgc3RvcmUsIGJ1dCB3ZVxuICAgICAgICAgICAgLy8gaGFwcGVuIHRvIGtub3cgdGhhdCB0aGUgZXhhY3Qgc2FtZSAoPT09KSByZXN1bHQgb2JqZWN0IHdvdWxkIGJlXG4gICAgICAgICAgICAvLyByZXR1cm5lZCBpZiB3ZSB3ZXJlIHRvIHJlcmVhZCB0aGUgcmVzdWx0IHdpdGggdGhlIHNhbWUgaW5wdXRzLFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSBjYW4gc2tpcCB0aGUgcmVzdCBvZiB0aGUgcHJvY2Vzc1NlbGVjdGlvblNldCB3b3JrIGZvclxuICAgICAgICAgICAgLy8gdGhpcyBvYmplY3QsIGFuZCBpbW1lZGlhdGVseSByZXR1cm4gYSBSZWZlcmVuY2UgdG8gaXQuXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkZXIgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWRlci5pc0ZyZXNoKHJlc3VsdCwgZGF0YVJlZiwgc2VsZWN0aW9uU2V0LCBjb250ZXh0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhUmVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXZpb3VzXzEgPSBjb250ZXh0LmluY29taW5nQnlJZC5nZXQoZGF0YUlkKTtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c18xKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNfMS5zdG9yZU9iamVjdCA9IGNvbnRleHQubWVyZ2UocHJldmlvdXNfMS5zdG9yZU9iamVjdCwgaW5jb21pbmcpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzXzEubWVyZ2VUcmVlID0gbWVyZ2VNZXJnZVRyZWVzKHByZXZpb3VzXzEubWVyZ2VUcmVlLCBtZXJnZVRyZWUpO1xuICAgICAgICAgICAgICAgIGZpZWxkTm9kZVNldC5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkgeyByZXR1cm4gcHJldmlvdXNfMS5maWVsZE5vZGVTZXQuYWRkKGZpZWxkKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmluY29taW5nQnlJZC5zZXQoZGF0YUlkLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlT2JqZWN0OiBpbmNvbWluZyxcbiAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSBhIHJlZmVyZW5jZSB0byBtZXJnZVRyZWUgb25seSBpZiBpdCBpcyBub3QgZW1wdHksIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1wdHkgTWVyZ2VUcmVlcyBtYXkgYmUgcmVjeWNsZWQgYnkgbWF5YmVSZWN5Y2xlQ2hpbGRNZXJnZVRyZWUgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldXNlZCBmb3IgZW50aXJlbHkgZGlmZmVyZW50IHBhcnRzIG9mIHRoZSByZXN1bHQgdHJlZS5cbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VUcmVlOiBtZXJnZVRyZWVJc0VtcHR5KG1lcmdlVHJlZSkgPyB2b2lkIDAgOiBtZXJnZVRyZWUsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTm9kZVNldDogZmllbGROb2RlU2V0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGFSZWY7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH07XG4gICAgU3RvcmVXcml0ZXIucHJvdG90eXBlLnByb2Nlc3NGaWVsZFZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBmaWVsZCwgY29udGV4dCwgbWVyZ2VUcmVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghZmllbGQuc2VsZWN0aW9uU2V0IHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBJbiBkZXZlbG9wbWVudCwgd2UgbmVlZCB0byBjbG9uZSBzY2FsYXIgdmFsdWVzIHNvIHRoYXQgdGhleSBjYW4gYmVcbiAgICAgICAgICAgIC8vIHNhZmVseSBmcm96ZW4gd2l0aCBtYXliZURlZXBGcmVlemUgaW4gcmVhZEZyb21TdG9yZS50cy4gSW4gcHJvZHVjdGlvbixcbiAgICAgICAgICAgIC8vIGl0J3MgY2hlYXBlciB0byBzdG9yZSB0aGUgc2NhbGFyIHZhbHVlcyBkaXJlY3RseSBpbiB0aGUgY2FjaGUuXG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSA/IGNsb25lRGVlcCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfdGhpcy5wcm9jZXNzRmllbGRWYWx1ZShpdGVtLCBmaWVsZCwgY29udGV4dCwgZ2V0Q2hpbGRNZXJnZVRyZWUobWVyZ2VUcmVlLCBpKSk7XG4gICAgICAgICAgICAgICAgbWF5YmVSZWN5Y2xlQ2hpbGRNZXJnZVRyZWUobWVyZ2VUcmVlLCBpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzU2VsZWN0aW9uU2V0KHtcbiAgICAgICAgICAgIHJlc3VsdDogdmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb25TZXQ6IGZpZWxkLnNlbGVjdGlvblNldCxcbiAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICBtZXJnZVRyZWU6IG1lcmdlVHJlZSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvLyBJbXBsZW1lbnRzIGh0dHBzOi8vc3BlYy5ncmFwaHFsLm9yZy9kcmFmdC8jc2VjLUZpZWxkLUNvbGxlY3Rpb24sIGJ1dCB3aXRoXG4gICAgLy8gc29tZSBhZGRpdGlvbnMgZm9yIHRyYWNraW5nIEBjbGllbnQgYW5kIEBkZWZlciBkaXJlY3RpdmVzLlxuICAgIFN0b3JlV3JpdGVyLnByb3RvdHlwZS5mbGF0dGVuRmllbGRzID0gZnVuY3Rpb24gKHNlbGVjdGlvblNldCwgcmVzdWx0LCBjb250ZXh0LCB0eXBlbmFtZSkge1xuICAgICAgICBpZiAodHlwZW5hbWUgPT09IHZvaWQgMCkgeyB0eXBlbmFtZSA9IGdldFR5cGVuYW1lRnJvbVJlc3VsdChyZXN1bHQsIHNlbGVjdGlvblNldCwgY29udGV4dC5mcmFnbWVudE1hcCk7IH1cbiAgICAgICAgdmFyIGZpZWxkTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIgcG9saWNpZXMgPSB0aGlzLmNhY2hlLnBvbGljaWVzO1xuICAgICAgICB2YXIgbGltaXRpbmdUcmllID0gbmV3IFRyaWUoZmFsc2UpOyAvLyBObyBuZWVkIGZvciBXZWFrTWFwLCBzaW5jZSBsaW1pdGluZ1RyaWUgZG9lcyBub3QgZXNjYXBlLlxuICAgICAgICAoZnVuY3Rpb24gZmxhdHRlbihzZWxlY3Rpb25TZXQsIGluaGVyaXRlZENvbnRleHQpIHtcbiAgICAgICAgICAgIHZhciB2aXNpdGVkTm9kZSA9IGxpbWl0aW5nVHJpZS5sb29rdXAoc2VsZWN0aW9uU2V0LCBcbiAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2UgdGFrZSBpbmhlcml0ZWRDbGllbnRPbmx5IGFuZCBpbmhlcml0ZWREZWZlcnJlZCBpbnRvXG4gICAgICAgICAgICAvLyBjb25zaWRlcmF0aW9uIGhlcmUgKGluIGFkZGl0aW9uIHRvIHNlbGVjdGlvblNldCksIGl0J3MgcG9zc2libGUgZm9yXG4gICAgICAgICAgICAvLyB0aGUgc2FtZSBzZWxlY3Rpb24gc2V0IHRvIGJlIGZsYXR0ZW5lZCBtb3JlIHRoYW4gb25jZSwgaWYgaXQgYXBwZWFyc1xuICAgICAgICAgICAgLy8gaW4gdGhlIHF1ZXJ5IHdpdGggZGlmZmVyZW50IEBjbGllbnQgYW5kL29yIEBkaXJlY3RpdmUgY29uZmlndXJhdGlvbnMuXG4gICAgICAgICAgICBpbmhlcml0ZWRDb250ZXh0LmNsaWVudE9ubHksIGluaGVyaXRlZENvbnRleHQuZGVmZXJyZWQpO1xuICAgICAgICAgICAgaWYgKHZpc2l0ZWROb2RlLnZpc2l0ZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmlzaXRlZE5vZGUudmlzaXRlZCA9IHRydWU7XG4gICAgICAgICAgICBzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNob3VsZEluY2x1ZGUoc2VsZWN0aW9uLCBjb250ZXh0LnZhcmlhYmxlcykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50T25seSA9IGluaGVyaXRlZENvbnRleHQuY2xpZW50T25seSwgZGVmZXJyZWQgPSBpbmhlcml0ZWRDb250ZXh0LmRlZmVycmVkO1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGUgcHJlc2VuY2Ugb2YgQGNsaWVudCBvciBAZGVmZXIgb24gdGhpcyBmaWVsZCBjYW4gb25seVxuICAgICAgICAgICAgICAgIC8vIGNhdXNlIGNsaWVudE9ubHkgb3IgZGVmZXJyZWQgdG8gYmVjb21lIHRydWUsIHdlIGNhbiBza2lwIHRoZVxuICAgICAgICAgICAgICAgIC8vIGZvckVhY2ggbG9vcCBpZiBib3RoIGNsaWVudE9ubHkgYW5kIGRlZmVycmVkIGFyZSBhbHJlYWR5IHRydWUuXG4gICAgICAgICAgICAgICAgIShjbGllbnRPbmx5ICYmIGRlZmVycmVkKSAmJlxuICAgICAgICAgICAgICAgICAgICBpc05vbkVtcHR5QXJyYXkoc2VsZWN0aW9uLmRpcmVjdGl2ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5kaXJlY3RpdmVzLmZvckVhY2goZnVuY3Rpb24gKGRpcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBkaXIubmFtZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSBcImNsaWVudFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwiZGVmZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkKGRpciwgY29udGV4dC52YXJpYWJsZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBAZGVmZXIgZGlyZWN0aXZlIHRha2VzIGFuIG9wdGlvbmFsIGFyZ3MuaWYgYm9vbGVhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFyZ3VtZW50LCBzaW1pbGFyIHRvIEBpbmNsdWRlKGlmOiBib29sZWFuKS4gTm90ZSB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQGRlZmVyKGlmOiBmYWxzZSkgZG9lcyBub3QgbWFrZSBjb250ZXh0LmRlZmVycmVkIGZhbHNlLCBidXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIGJlaGF2ZXMgYXMgaWYgdGhlcmUgd2FzIG5vIEBkZWZlciBkaXJlY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmdzIHx8IGFyZ3MuaWYgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBJbiB0aGUgZnV0dXJlLCB3ZSBtYXkgd2FudCB0byByZWNvcmQgYXJncy5sYWJlbCB1c2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRleHQuZGVmZXJyZWQsIGlmIGEgbGFiZWwgaXMgc3BlY2lmaWVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBmaWVsZE1hcC5nZXQoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZpZWxkIGhhcyBiZWVuIHZpc2l0ZWQgYWxvbmcgYW5vdGhlciByZWN1cnNpdmUgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlLCB0aGUgZmluYWwgY29udGV4dCBzaG91bGQgaGF2ZSBjbGllbnRPbmx5IG9yIGRlZmVycmVkIHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gdHJ1ZSBvbmx5IGlmICphbGwqIHBhdGhzIGhhdmUgdGhlIGRpcmVjdGl2ZSAoaGVuY2UgdGhlICYmKS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudE9ubHkgPSBjbGllbnRPbmx5ICYmIGV4aXN0aW5nLmNsaWVudE9ubHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZCA9IGRlZmVycmVkICYmIGV4aXN0aW5nLmRlZmVycmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTWFwLnNldChzZWxlY3Rpb24sIGdldENvbnRleHRGbGF2b3IoY29udGV4dCwgY2xpZW50T25seSwgZGVmZXJyZWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbihzZWxlY3Rpb24sIGNvbnRleHQubG9va3VwRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZyYWdtZW50ICYmIHNlbGVjdGlvbi5raW5kID09PSBLaW5kLkZSQUdNRU5UX1NQUkVBRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3SW52YXJpYW50RXJyb3IoMTQsIHNlbGVjdGlvbi5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZnJhZ21lbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljaWVzLmZyYWdtZW50TWF0Y2hlcyhmcmFnbWVudCwgdHlwZW5hbWUsIHJlc3VsdCwgY29udGV4dC52YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGF0dGVuKGZyYWdtZW50LnNlbGVjdGlvblNldCwgZ2V0Q29udGV4dEZsYXZvcihjb250ZXh0LCBjbGllbnRPbmx5LCBkZWZlcnJlZCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKHNlbGVjdGlvblNldCwgY29udGV4dCk7XG4gICAgICAgIHJldHVybiBmaWVsZE1hcDtcbiAgICB9O1xuICAgIFN0b3JlV3JpdGVyLnByb3RvdHlwZS5hcHBseU1lcmdlcyA9IGZ1bmN0aW9uIChtZXJnZVRyZWUsIGV4aXN0aW5nLCBpbmNvbWluZywgY29udGV4dCwgZ2V0U3RvcmFnZUFyZ3MpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAobWVyZ2VUcmVlLm1hcC5zaXplICYmICFpc1JlZmVyZW5jZShpbmNvbWluZykpIHtcbiAgICAgICAgICAgIHZhciBlXzEgPSBcbiAgICAgICAgICAgIC8vIEl0ZW1zIGluIHRoZSBzYW1lIHBvc2l0aW9uIGluIGRpZmZlcmVudCBhcnJheXMgYXJlIG5vdFxuICAgICAgICAgICAgLy8gbmVjZXNzYXJpbHkgcmVsYXRlZCB0byBlYWNoIG90aGVyLCBzbyB3aGVuIGluY29taW5nIGlzIGFuIGFycmF5XG4gICAgICAgICAgICAvLyB3ZSBwcm9jZXNzIGl0cyBlbGVtZW50cyBhcyBpZiB0aGVyZSB3YXMgbm8gZXhpc3RpbmcgZGF0YS5cbiAgICAgICAgICAgICghaXNBcnJheShpbmNvbWluZykgJiZcbiAgICAgICAgICAgICAgICAvLyBMaWtld2lzZSwgZXhpc3RpbmcgbXVzdCBiZSBlaXRoZXIgYSBSZWZlcmVuY2Ugb3IgYSBTdG9yZU9iamVjdFxuICAgICAgICAgICAgICAgIC8vIGluIG9yZGVyIGZvciBpdHMgZmllbGRzIHRvIGJlIHNhZmUgdG8gbWVyZ2Ugd2l0aCB0aGUgZmllbGRzIG9mXG4gICAgICAgICAgICAgICAgLy8gdGhlIGluY29taW5nIG9iamVjdC5cbiAgICAgICAgICAgICAgICAoaXNSZWZlcmVuY2UoZXhpc3RpbmcpIHx8IHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGV4aXN0aW5nKSkpID9cbiAgICAgICAgICAgICAgICBleGlzdGluZ1xuICAgICAgICAgICAgICAgIDogdm9pZCAwO1xuICAgICAgICAgICAgLy8gVGhpcyBuYXJyb3dpbmcgaXMgaW1wbGllZCBieSBtZXJnZVRyZWUubWFwLnNpemUgPiAwIGFuZFxuICAgICAgICAgICAgLy8gIWlzUmVmZXJlbmNlKGluY29taW5nKSwgdGhvdWdoIFR5cGVTY3JpcHQgdW5kZXJzdGFuZGFibHkgY2Fubm90XG4gICAgICAgICAgICAvLyBob3BlIHRvIGluZmVyIHRoaXMgdHlwZS5cbiAgICAgICAgICAgIHZhciBpXzEgPSBpbmNvbWluZztcbiAgICAgICAgICAgIC8vIFRoZSBvcHRpb25zLnN0b3JhZ2Ugb2JqZWN0cyBwcm92aWRlZCB0byByZWFkIGFuZCBtZXJnZSBmdW5jdGlvbnNcbiAgICAgICAgICAgIC8vIGFyZSBkZXJpdmVkIGZyb20gdGhlIGlkZW50aXR5IG9mIHRoZSBwYXJlbnQgb2JqZWN0IHBsdXMgYVxuICAgICAgICAgICAgLy8gc2VxdWVuY2Ugb2Ygc3RvcmVGaWVsZE5hbWUgc3RyaW5ncy9udW1iZXJzIGlkZW50aWZ5aW5nIHRoZSBuZXN0ZWRcbiAgICAgICAgICAgIC8vIGZpZWxkIG5hbWUgcGF0aCBvZiBlYWNoIGZpZWxkIHZhbHVlIHRvIGJlIG1lcmdlZC5cbiAgICAgICAgICAgIGlmIChlXzEgJiYgIWdldFN0b3JhZ2VBcmdzKSB7XG4gICAgICAgICAgICAgICAgZ2V0U3RvcmFnZUFyZ3MgPSBbaXNSZWZlcmVuY2UoZV8xKSA/IGVfMS5fX3JlZiA6IGVfMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgYXBwbHlpbmcgbWVyZ2UgZnVuY3Rpb25zIHRvIHRoaXMgc3VidHJlZSB3aWxsXG4gICAgICAgICAgICAvLyBub3QgY2hhbmdlIHRoZSBpbmNvbWluZyBkYXRhLCBzbyB0aGlzIHZhcmlhYmxlIHRyYWNrcyB0aGUgZmllbGRzXG4gICAgICAgICAgICAvLyB0aGF0IGRpZCBjaGFuZ2UsIHNvIHdlIGNhbiBjcmVhdGUgYSBuZXcgaW5jb21pbmcgb2JqZWN0IHdoZW4gKGFuZFxuICAgICAgICAgICAgLy8gb25seSB3aGVuKSBhdCBsZWFzdCBvbmUgaW5jb21pbmcgZmllbGQgaGFzIGNoYW5nZWQuIFdlIHVzZSBhIE1hcFxuICAgICAgICAgICAgLy8gdG8gcHJlc2VydmUgdGhlIHR5cGUgb2YgbnVtZXJpYyBrZXlzLlxuICAgICAgICAgICAgdmFyIGNoYW5nZWRGaWVsZHNfMTtcbiAgICAgICAgICAgIHZhciBnZXRWYWx1ZV8xID0gZnVuY3Rpb24gKGZyb20sIG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGlzQXJyYXkoZnJvbSkgP1xuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgbmFtZSA9PT0gXCJudW1iZXJcIiA/XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tW25hbWVdXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHZvaWQgMFxuICAgICAgICAgICAgICAgICAgICA6IGNvbnRleHQuc3RvcmUuZ2V0RmllbGRWYWx1ZShmcm9tLCBTdHJpbmcobmFtZSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBtZXJnZVRyZWUubWFwLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkVHJlZSwgc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZVZhbCA9IGdldFZhbHVlXzEoZV8xLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgdmFyIGlWYWwgPSBnZXRWYWx1ZV8xKGlfMSwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbm8gaW5jb21pbmcgZGF0YSwgbGVhdmUgYW55IGV4aXN0aW5nIGRhdGEgdW50b3VjaGVkLlxuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGlWYWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZ2V0U3RvcmFnZUFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0U3RvcmFnZUFyZ3MucHVzaChzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBhVmFsID0gX3RoaXMuYXBwbHlNZXJnZXMoY2hpbGRUcmVlLCBlVmFsLCBpVmFsLCBjb250ZXh0LCBnZXRTdG9yYWdlQXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKGFWYWwgIT09IGlWYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZEZpZWxkc18xID0gY2hhbmdlZEZpZWxkc18xIHx8IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZEZpZWxkc18xLnNldChzdG9yZUZpZWxkTmFtZSwgYVZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnZXRTdG9yYWdlQXJncykge1xuICAgICAgICAgICAgICAgICAgICBpbnZhcmlhbnQoZ2V0U3RvcmFnZUFyZ3MucG9wKCkgPT09IHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VkRmllbGRzXzEpIHtcbiAgICAgICAgICAgICAgICAvLyBTaGFsbG93IGNsb25lIGkgc28gd2UgY2FuIGFkZCBjaGFuZ2VkIGZpZWxkcyB0byBpdC5cbiAgICAgICAgICAgICAgICBpbmNvbWluZyA9IChpc0FycmF5KGlfMSkgPyBpXzEuc2xpY2UoMCkgOiBfX2Fzc2lnbih7fSwgaV8xKSk7XG4gICAgICAgICAgICAgICAgY2hhbmdlZEZpZWxkc18xLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGluY29taW5nW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lcmdlVHJlZS5pbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5wb2xpY2llcy5ydW5NZXJnZUZ1bmN0aW9uKGV4aXN0aW5nLCBpbmNvbWluZywgbWVyZ2VUcmVlLmluZm8sIGNvbnRleHQsIGdldFN0b3JhZ2VBcmdzICYmIChfYSA9IGNvbnRleHQuc3RvcmUpLmdldFN0b3JhZ2UuYXBwbHkoX2EsIGdldFN0b3JhZ2VBcmdzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH07XG4gICAgcmV0dXJuIFN0b3JlV3JpdGVyO1xufSgpKTtcbmV4cG9ydCB7IFN0b3JlV3JpdGVyIH07XG52YXIgZW1wdHlNZXJnZVRyZWVQb29sID0gW107XG5mdW5jdGlvbiBnZXRDaGlsZE1lcmdlVHJlZShfYSwgbmFtZSkge1xuICAgIHZhciBtYXAgPSBfYS5tYXA7XG4gICAgaWYgKCFtYXAuaGFzKG5hbWUpKSB7XG4gICAgICAgIG1hcC5zZXQobmFtZSwgZW1wdHlNZXJnZVRyZWVQb29sLnBvcCgpIHx8IHsgbWFwOiBuZXcgTWFwKCkgfSk7XG4gICAgfVxuICAgIHJldHVybiBtYXAuZ2V0KG5hbWUpO1xufVxuZnVuY3Rpb24gbWVyZ2VNZXJnZVRyZWVzKGxlZnQsIHJpZ2h0KSB7XG4gICAgaWYgKGxlZnQgPT09IHJpZ2h0IHx8ICFyaWdodCB8fCBtZXJnZVRyZWVJc0VtcHR5KHJpZ2h0KSlcbiAgICAgICAgcmV0dXJuIGxlZnQ7XG4gICAgaWYgKCFsZWZ0IHx8IG1lcmdlVHJlZUlzRW1wdHkobGVmdCkpXG4gICAgICAgIHJldHVybiByaWdodDtcbiAgICB2YXIgaW5mbyA9IGxlZnQuaW5mbyAmJiByaWdodC5pbmZvID8gX19hc3NpZ24oX19hc3NpZ24oe30sIGxlZnQuaW5mbyksIHJpZ2h0LmluZm8pIDogbGVmdC5pbmZvIHx8IHJpZ2h0LmluZm87XG4gICAgdmFyIG5lZWRUb01lcmdlTWFwcyA9IGxlZnQubWFwLnNpemUgJiYgcmlnaHQubWFwLnNpemU7XG4gICAgdmFyIG1hcCA9IG5lZWRUb01lcmdlTWFwcyA/IG5ldyBNYXAoKVxuICAgICAgICA6IGxlZnQubWFwLnNpemUgPyBsZWZ0Lm1hcFxuICAgICAgICAgICAgOiByaWdodC5tYXA7XG4gICAgdmFyIG1lcmdlZCA9IHsgaW5mbzogaW5mbywgbWFwOiBtYXAgfTtcbiAgICBpZiAobmVlZFRvTWVyZ2VNYXBzKSB7XG4gICAgICAgIHZhciByZW1haW5pbmdSaWdodEtleXNfMSA9IG5ldyBTZXQocmlnaHQubWFwLmtleXMoKSk7XG4gICAgICAgIGxlZnQubWFwLmZvckVhY2goZnVuY3Rpb24gKGxlZnRUcmVlLCBrZXkpIHtcbiAgICAgICAgICAgIG1lcmdlZC5tYXAuc2V0KGtleSwgbWVyZ2VNZXJnZVRyZWVzKGxlZnRUcmVlLCByaWdodC5tYXAuZ2V0KGtleSkpKTtcbiAgICAgICAgICAgIHJlbWFpbmluZ1JpZ2h0S2V5c18xLmRlbGV0ZShrZXkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nUmlnaHRLZXlzXzEuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBtZXJnZWQubWFwLnNldChrZXksIG1lcmdlTWVyZ2VUcmVlcyhyaWdodC5tYXAuZ2V0KGtleSksIGxlZnQubWFwLmdldChrZXkpKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkO1xufVxuZnVuY3Rpb24gbWVyZ2VUcmVlSXNFbXB0eSh0cmVlKSB7XG4gICAgcmV0dXJuICF0cmVlIHx8ICEodHJlZS5pbmZvIHx8IHRyZWUubWFwLnNpemUpO1xufVxuZnVuY3Rpb24gbWF5YmVSZWN5Y2xlQ2hpbGRNZXJnZVRyZWUoX2EsIG5hbWUpIHtcbiAgICB2YXIgbWFwID0gX2EubWFwO1xuICAgIHZhciBjaGlsZFRyZWUgPSBtYXAuZ2V0KG5hbWUpO1xuICAgIGlmIChjaGlsZFRyZWUgJiYgbWVyZ2VUcmVlSXNFbXB0eShjaGlsZFRyZWUpKSB7XG4gICAgICAgIGVtcHR5TWVyZ2VUcmVlUG9vbC5wdXNoKGNoaWxkVHJlZSk7XG4gICAgICAgIG1hcC5kZWxldGUobmFtZSk7XG4gICAgfVxufVxudmFyIHdhcm5pbmdzID0gbmV3IFNldCgpO1xuLy8gTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgdW51c2VkIGluIHByb2R1Y3Rpb24sIGFuZCB0aHVzIHNob3VsZCBiZVxuLy8gcHJ1bmVkIGJ5IGFueSB3ZWxsLWNvbmZpZ3VyZWQgbWluaWZpZXIuXG5mdW5jdGlvbiB3YXJuQWJvdXREYXRhTG9zcyhleGlzdGluZ1JlZiwgaW5jb21pbmdPYmosIHN0b3JlRmllbGROYW1lLCBzdG9yZSkge1xuICAgIHZhciBnZXRDaGlsZCA9IGZ1bmN0aW9uIChvYmpPclJlZikge1xuICAgICAgICB2YXIgY2hpbGQgPSBzdG9yZS5nZXRGaWVsZFZhbHVlKG9iak9yUmVmLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgIHJldHVybiB0eXBlb2YgY2hpbGQgPT09IFwib2JqZWN0XCIgJiYgY2hpbGQ7XG4gICAgfTtcbiAgICB2YXIgZXhpc3RpbmcgPSBnZXRDaGlsZChleGlzdGluZ1JlZik7XG4gICAgaWYgKCFleGlzdGluZylcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciBpbmNvbWluZyA9IGdldENoaWxkKGluY29taW5nT2JqKTtcbiAgICBpZiAoIWluY29taW5nKVxuICAgICAgICByZXR1cm47XG4gICAgLy8gSXQncyBhbHdheXMgc2FmZSB0byByZXBsYWNlIGEgcmVmZXJlbmNlLCBzaW5jZSBpdCByZWZlcnMgdG8gZGF0YVxuICAgIC8vIHNhZmVseSBzdG9yZWQgZWxzZXdoZXJlLlxuICAgIGlmIChpc1JlZmVyZW5jZShleGlzdGluZykpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBJZiB0aGUgdmFsdWVzIGFyZSBzdHJ1Y3R1cmFsbHkgZXF1aXZhbGVudCwgd2UgZG8gbm90IG5lZWQgdG8gd29ycnlcbiAgICAvLyBhYm91dCBpbmNvbWluZyByZXBsYWNpbmcgZXhpc3RpbmcuXG4gICAgaWYgKGVxdWFsKGV4aXN0aW5nLCBpbmNvbWluZykpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBJZiB3ZSdyZSByZXBsYWNpbmcgZXZlcnkga2V5IG9mIHRoZSBleGlzdGluZyBvYmplY3QsIHRoZW4gdGhlXG4gICAgLy8gZXhpc3RpbmcgZGF0YSB3b3VsZCBiZSBvdmVyd3JpdHRlbiBldmVuIGlmIHRoZSBvYmplY3RzIHdlcmVcbiAgICAvLyBub3JtYWxpemVkLCBzbyB3YXJuaW5nIHdvdWxkIG5vdCBiZSBoZWxwZnVsIGhlcmUuXG4gICAgaWYgKE9iamVjdC5rZXlzKGV4aXN0aW5nKS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBzdG9yZS5nZXRGaWVsZFZhbHVlKGluY29taW5nLCBrZXkpICE9PSB2b2lkIDA7IH0pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHBhcmVudFR5cGUgPSBzdG9yZS5nZXRGaWVsZFZhbHVlKGV4aXN0aW5nUmVmLCBcIl9fdHlwZW5hbWVcIikgfHxcbiAgICAgICAgc3RvcmUuZ2V0RmllbGRWYWx1ZShpbmNvbWluZ09iaiwgXCJfX3R5cGVuYW1lXCIpO1xuICAgIHZhciBmaWVsZE5hbWUgPSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKTtcbiAgICB2YXIgdHlwZURvdE5hbWUgPSBcIlwiLmNvbmNhdChwYXJlbnRUeXBlLCBcIi5cIikuY29uY2F0KGZpZWxkTmFtZSk7XG4gICAgLy8gQXZvaWQgd2FybmluZyBtb3JlIHRoYW4gb25jZSBmb3IgdGhlIHNhbWUgdHlwZSBhbmQgZmllbGQgbmFtZS5cbiAgICBpZiAod2FybmluZ3MuaGFzKHR5cGVEb3ROYW1lKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHdhcm5pbmdzLmFkZCh0eXBlRG90TmFtZSk7XG4gICAgdmFyIGNoaWxkVHlwZW5hbWVzID0gW107XG4gICAgLy8gQXJyYXlzIGRvIG5vdCBoYXZlIF9fdHlwZW5hbWUgZmllbGRzLCBhbmQgYWx3YXlzIG5lZWQgYSBjdXN0b20gbWVyZ2VcbiAgICAvLyBmdW5jdGlvbiwgZXZlbiBpZiB0aGVpciBlbGVtZW50cyBhcmUgbm9ybWFsaXplZCBlbnRpdGllcy5cbiAgICBpZiAoIWlzQXJyYXkoZXhpc3RpbmcpICYmICFpc0FycmF5KGluY29taW5nKSkge1xuICAgICAgICBbZXhpc3RpbmcsIGluY29taW5nXS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgICAgdmFyIHR5cGVuYW1lID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShjaGlsZCwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlbmFtZSA9PT0gXCJzdHJpbmdcIiAmJiAhY2hpbGRUeXBlbmFtZXMuaW5jbHVkZXModHlwZW5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRUeXBlbmFtZXMucHVzaCh0eXBlbmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKDE1LCBmaWVsZE5hbWUsIHBhcmVudFR5cGUsIGNoaWxkVHlwZW5hbWVzLmxlbmd0aCA/XG4gICAgICAgIFwiZWl0aGVyIGVuc3VyZSBhbGwgb2JqZWN0cyBvZiB0eXBlIFwiICtcbiAgICAgICAgICAgIGNoaWxkVHlwZW5hbWVzLmpvaW4oXCIgYW5kIFwiKSArXG4gICAgICAgICAgICBcIiBoYXZlIGFuIElEIG9yIGEgY3VzdG9tIG1lcmdlIGZ1bmN0aW9uLCBvciBcIlxuICAgICAgICA6IFwiXCIsIHR5cGVEb3ROYW1lLCBfX2Fzc2lnbih7fSwgZXhpc3RpbmcpLCBfX2Fzc2lnbih7fSwgaW5jb21pbmcpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdyaXRlVG9TdG9yZS5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fYXNzaWduLCBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi8uLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuLy8gTWFrZSBidWlsdGlucyBsaWtlIE1hcCBhbmQgU2V0IHNhZmUgdG8gdXNlIHdpdGggbm9uLWV4dGVuc2libGUgb2JqZWN0cy5cbmltcG9ydCBcIi4vZml4UG9seWZpbGxzLmpzXCI7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSBcIm9wdGltaXNtXCI7XG5pbXBvcnQgeyBlcXVhbCB9IGZyb20gXCJAd3J5L2VxdWFsaXR5XCI7XG5pbXBvcnQgeyBBcG9sbG9DYWNoZSB9IGZyb20gXCIuLi9jb3JlL2NhY2hlLmpzXCI7XG5pbXBvcnQgeyBNaXNzaW5nRmllbGRFcnJvciB9IGZyb20gXCIuLi9jb3JlL3R5cGVzL2NvbW1vbi5qc1wiO1xuaW1wb3J0IHsgYWRkVHlwZW5hbWVUb0RvY3VtZW50LCBpc1JlZmVyZW5jZSwgRG9jdW1lbnRUcmFuc2Zvcm0sIGNhbm9uaWNhbFN0cmluZ2lmeSwgcHJpbnQsIGNhY2hlU2l6ZXMsIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgU3RvcmVSZWFkZXIgfSBmcm9tIFwiLi9yZWFkRnJvbVN0b3JlLmpzXCI7XG5pbXBvcnQgeyBTdG9yZVdyaXRlciB9IGZyb20gXCIuL3dyaXRlVG9TdG9yZS5qc1wiO1xuaW1wb3J0IHsgRW50aXR5U3RvcmUsIHN1cHBvcnRzUmVzdWx0Q2FjaGluZyB9IGZyb20gXCIuL2VudGl0eVN0b3JlLmpzXCI7XG5pbXBvcnQgeyBtYWtlVmFyLCBmb3JnZXRDYWNoZSwgcmVjYWxsQ2FjaGUgfSBmcm9tIFwiLi9yZWFjdGl2ZVZhcnMuanNcIjtcbmltcG9ydCB7IFBvbGljaWVzIH0gZnJvbSBcIi4vcG9saWNpZXMuanNcIjtcbmltcG9ydCB7IGhhc093biwgbm9ybWFsaXplQ29uZmlnLCBzaG91bGRDYW5vbml6ZVJlc3VsdHMgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBnZXRJbk1lbW9yeUNhY2hlTWVtb3J5SW50ZXJuYWxzIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9jYWNoaW5nL2dldE1lbW9yeUludGVybmFscy5qc1wiO1xuaW1wb3J0IHsgbXV0ZURlcHJlY2F0aW9ucywgd2FyblJlbW92ZWRPcHRpb24sIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9kZXByZWNhdGlvbi9pbmRleC5qc1wiO1xudmFyIEluTWVtb3J5Q2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEluTWVtb3J5Q2FjaGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSW5NZW1vcnlDYWNoZShjb25maWcpIHtcbiAgICAgICAgaWYgKGNvbmZpZyA9PT0gdm9pZCAwKSB7IGNvbmZpZyA9IHt9OyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLndhdGNoZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIF90aGlzLmFkZFR5cGVuYW1lVHJhbnNmb3JtID0gbmV3IERvY3VtZW50VHJhbnNmb3JtKGFkZFR5cGVuYW1lVG9Eb2N1bWVudCk7XG4gICAgICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHZhbHVlLCBzaW5jZSBJbk1lbW9yeUNhY2hlIHJlc3VsdCBvYmplY3RzIGFyZSBmcm96ZW5cbiAgICAgICAgLy8gaW4gZGV2ZWxvcG1lbnQgYW5kIGV4cGVjdGVkIHRvIHJlbWFpbiBsb2dpY2FsbHkgaW1tdXRhYmxlIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIF90aGlzLmFzc3VtZUltbXV0YWJsZVJlc3VsdHMgPSB0cnVlO1xuICAgICAgICBfdGhpcy5tYWtlVmFyID0gbWFrZVZhcjtcbiAgICAgICAgX3RoaXMudHhDb3VudCA9IDA7XG4gICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuUmVtb3ZlZE9wdGlvbihjb25maWcsIFwiYWRkVHlwZW5hbWVcIiwgXCJJbk1lbW9yeUNhY2hlXCIsIFwiUGxlYXNlIHJlbW92ZSB0aGUgYGFkZFR5cGVuYW1lYCBvcHRpb24gd2hlbiBpbml0aWFsaXppbmcgYEluTWVtb3J5Q2FjaGVgLlwiKTtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKGNvbmZpZywgXCJjYW5vbml6ZVJlc3VsdHNcIiwgXCJJbk1lbW9yeUNhY2hlXCIsIFwiUGxlYXNlIHJlbW92ZSB0aGUgYGNhbm9uaXplUmVzdWx0c2Agb3B0aW9uIHdoZW4gaW5pdGlhbGl6aW5nIGBJbk1lbW9yeUNhY2hlYC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuY29uZmlnID0gbm9ybWFsaXplQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIF90aGlzLmFkZFR5cGVuYW1lID0gISFfdGhpcy5jb25maWcuYWRkVHlwZW5hbWU7XG4gICAgICAgIF90aGlzLnBvbGljaWVzID0gbmV3IFBvbGljaWVzKHtcbiAgICAgICAgICAgIGNhY2hlOiBfdGhpcyxcbiAgICAgICAgICAgIGRhdGFJZEZyb21PYmplY3Q6IF90aGlzLmNvbmZpZy5kYXRhSWRGcm9tT2JqZWN0LFxuICAgICAgICAgICAgcG9zc2libGVUeXBlczogX3RoaXMuY29uZmlnLnBvc3NpYmxlVHlwZXMsXG4gICAgICAgICAgICB0eXBlUG9saWNpZXM6IF90aGlzLmNvbmZpZy50eXBlUG9saWNpZXMsXG4gICAgICAgIH0pO1xuICAgICAgICBfdGhpcy5pbml0KCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUGFzc2luZyB7IHJlc3VsdENhY2hpbmc6IGZhbHNlIH0gaW4gdGhlIEluTWVtb3J5Q2FjaGUgY29uc3RydWN0b3Igb3B0aW9uc1xuICAgICAgICAvLyB3aWxsIGNvbXBsZXRlbHkgZGlzYWJsZSBkZXBlbmRlbmN5IHRyYWNraW5nLCB3aGljaCB3aWxsIGltcHJvdmUgbWVtb3J5XG4gICAgICAgIC8vIHVzYWdlIGJ1dCB3b3JzZW4gdGhlIHBlcmZvcm1hbmNlIG9mIHJlcGVhdGVkIHJlYWRzLlxuICAgICAgICB2YXIgcm9vdFN0b3JlID0gKHRoaXMuZGF0YSA9IG5ldyBFbnRpdHlTdG9yZS5Sb290KHtcbiAgICAgICAgICAgIHBvbGljaWVzOiB0aGlzLnBvbGljaWVzLFxuICAgICAgICAgICAgcmVzdWx0Q2FjaGluZzogdGhpcy5jb25maWcucmVzdWx0Q2FjaGluZyxcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBXaGVuIG5vIG9wdGltaXN0aWMgd3JpdGVzIGFyZSBjdXJyZW50bHkgYWN0aXZlLCBjYWNoZS5vcHRpbWlzdGljRGF0YSA9PT1cbiAgICAgICAgLy8gY2FjaGUuZGF0YSwgc28gdGhlcmUgYXJlIG5vIGFkZGl0aW9uYWwgbGF5ZXJzIG9uIHRvcCBvZiB0aGUgYWN0dWFsIGRhdGEuXG4gICAgICAgIC8vIFdoZW4gYW4gb3B0aW1pc3RpYyB1cGRhdGUgaGFwcGVucywgdGhpcy5vcHRpbWlzdGljRGF0YSB3aWxsIGJlY29tZSBhXG4gICAgICAgIC8vIGxpbmtlZCBsaXN0IG9mIEVudGl0eVN0b3JlIExheWVyIG9iamVjdHMgdGhhdCB0ZXJtaW5hdGVzIHdpdGggdGhlXG4gICAgICAgIC8vIG9yaWdpbmFsIHRoaXMuZGF0YSBjYWNoZSBvYmplY3QuXG4gICAgICAgIHRoaXMub3B0aW1pc3RpY0RhdGEgPSByb290U3RvcmUuc3R1bXA7XG4gICAgICAgIHRoaXMucmVzZXRSZXN1bHRDYWNoZSgpO1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUucmVzZXRSZXN1bHRDYWNoZSA9IGZ1bmN0aW9uIChyZXNldFJlc3VsdElkZW50aXRpZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHByZXZpb3VzUmVhZGVyID0gdGhpcy5zdG9yZVJlYWRlcjtcbiAgICAgICAgdmFyIGZyYWdtZW50cyA9IHRoaXMuY29uZmlnLmZyYWdtZW50cztcbiAgICAgICAgdGhpcy5hZGRUeXBlbmFtZVRyYW5zZm9ybS5yZXNldENhY2hlKCk7XG4gICAgICAgIGZyYWdtZW50cyA9PT0gbnVsbCB8fCBmcmFnbWVudHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZyYWdtZW50cy5yZXNldENhY2hlcygpO1xuICAgICAgICAvLyBUaGUgU3RvcmVXcml0ZXIgaXMgbW9zdGx5IHN0YXRlbGVzcyBhbmQgc28gZG9lc24ndCByZWFsbHkgbmVlZCB0byBiZVxuICAgICAgICAvLyByZXNldCwgYnV0IGl0IGRvZXMgbmVlZCB0byBoYXZlIGl0cyB3cml0ZXIuc3RvcmVSZWFkZXIgcmVmZXJlbmNlIHVwZGF0ZWQsXG4gICAgICAgIC8vIHNvIGl0J3Mgc2ltcGxlciB0byB1cGRhdGUgdGhpcy5zdG9yZVdyaXRlciBhcyB3ZWxsLlxuICAgICAgICB0aGlzLnN0b3JlV3JpdGVyID0gbmV3IFN0b3JlV3JpdGVyKHRoaXMsICh0aGlzLnN0b3JlUmVhZGVyID0gbmV3IFN0b3JlUmVhZGVyKHtcbiAgICAgICAgICAgIGNhY2hlOiB0aGlzLFxuICAgICAgICAgICAgYWRkVHlwZW5hbWU6IHRoaXMuYWRkVHlwZW5hbWUsXG4gICAgICAgICAgICByZXN1bHRDYWNoZU1heFNpemU6IHRoaXMuY29uZmlnLnJlc3VsdENhY2hlTWF4U2l6ZSxcbiAgICAgICAgICAgIGNhbm9uaXplUmVzdWx0czogc2hvdWxkQ2Fub25pemVSZXN1bHRzKHRoaXMuY29uZmlnKSxcbiAgICAgICAgICAgIGNhbm9uOiByZXNldFJlc3VsdElkZW50aXRpZXMgPyB2b2lkIDAgOiAocHJldmlvdXNSZWFkZXIgJiYgcHJldmlvdXNSZWFkZXIuY2Fub24pLFxuICAgICAgICAgICAgZnJhZ21lbnRzOiBmcmFnbWVudHMsXG4gICAgICAgIH0pKSwgZnJhZ21lbnRzKTtcbiAgICAgICAgdGhpcy5tYXliZUJyb2FkY2FzdFdhdGNoID0gd3JhcChmdW5jdGlvbiAoYywgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmJyb2FkY2FzdFdhdGNoKGMsIG9wdGlvbnMpO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtYXg6IHRoaXMuY29uZmlnLnJlc3VsdENhY2hlTWF4U2l6ZSB8fFxuICAgICAgICAgICAgICAgIGNhY2hlU2l6ZXNbXCJpbk1lbW9yeUNhY2hlLm1heWJlQnJvYWRjYXN0V2F0Y2hcIl0gfHxcbiAgICAgICAgICAgICAgICA1MDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wiaW5NZW1vcnlDYWNoZS5tYXliZUJyb2FkY2FzdFdhdGNoXCJdICovLFxuICAgICAgICAgICAgbWFrZUNhY2hlS2V5OiBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiBhIGNhY2hlIGtleSAodGh1cyBlbmFibGluZyByZXN1bHQgY2FjaGluZykgb25seSBpZiB3ZSdyZVxuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnRseSB1c2luZyBhIGRhdGEgc3RvcmUgdGhhdCBjYW4gdHJhY2sgY2FjaGUgZGVwZW5kZW5jaWVzLlxuICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IGMub3B0aW1pc3RpYyA/IF90aGlzLm9wdGltaXN0aWNEYXRhIDogX3RoaXMuZGF0YTtcbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKHN0b3JlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW1pc3RpYyA9IGMub3B0aW1pc3RpYywgaWQgPSBjLmlkLCB2YXJpYWJsZXMgPSBjLnZhcmlhYmxlcztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLm1ha2VDYWNoZUtleShjLnF1ZXJ5LCBcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlmZmVyZW50IHdhdGNoZXMgY2FuIGhhdmUgdGhlIHNhbWUgcXVlcnksIG9wdGltaXN0aWNcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RhdHVzLCByb290SWQsIGFuZCB2YXJpYWJsZXMsIGJ1dCBpZiB0aGVpciBjYWxsYmFja3MgYXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVudCwgdGhlIChpZGVudGljYWwpIHJlc3VsdCBuZWVkcyB0byBiZSBkZWxpdmVyZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gZWFjaCBkaXN0aW5jdCBjYWxsYmFjay4gVGhlIGVhc2llc3Qgd2F5IHRvIGFjaGlldmUgdGhhdFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXBhcmF0aW9uIGlzIHRvIGluY2x1ZGUgYy5jYWxsYmFjayBpbiB0aGUgY2FjaGUga2V5IGZvclxuICAgICAgICAgICAgICAgICAgICAvLyBtYXliZUJyb2FkY2FzdFdhdGNoIGNhbGxzLiBTZWUgaXNzdWUgIzU3MzMuXG4gICAgICAgICAgICAgICAgICAgIGMuY2FsbGJhY2ssIGNhbm9uaWNhbFN0cmluZ2lmeSh7IG9wdGltaXN0aWM6IG9wdGltaXN0aWMsIGlkOiBpZCwgdmFyaWFibGVzOiB2YXJpYWJsZXMgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTaW5jZSB3ZSBoYXZlIHRocm93biBhd2F5IGFsbCB0aGUgY2FjaGVkIGZ1bmN0aW9ucyB0aGF0IGRlcGVuZCBvbiB0aGVcbiAgICAgICAgLy8gQ2FjaGVHcm91cCBkZXBlbmRlbmNpZXMgbWFpbnRhaW5lZCBieSBFbnRpdHlTdG9yZSwgd2Ugc2hvdWxkIGFsc28gcmVzZXRcbiAgICAgICAgLy8gYWxsIENhY2hlR3JvdXAgZGVwZW5kZW5jeSBpbmZvcm1hdGlvbi5cbiAgICAgICAgbmV3IFNldChbdGhpcy5kYXRhLmdyb3VwLCB0aGlzLm9wdGltaXN0aWNEYXRhLmdyb3VwXSkuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybiBncm91cC5yZXNldENhY2hpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIC8vIFNpbmNlIGNhbGxpbmcgdGhpcy5pbml0KCkgZGlzY2FyZHMvcmVwbGFjZXMgdGhlIGVudGlyZSBTdG9yZVJlYWRlciwgYWxvbmdcbiAgICAgICAgLy8gd2l0aCB0aGUgcmVzdWx0IGNhY2hlcyBpdCBtYWludGFpbnMsIHRoaXMuZGF0YS5yZXBsYWNlKGRhdGEpIHdvbid0IGhhdmVcbiAgICAgICAgLy8gdG8gYm90aGVyIGRlbGV0aW5nIHRoZSBvbGQgZGF0YS5cbiAgICAgICAgaWYgKGRhdGEpXG4gICAgICAgICAgICB0aGlzLmRhdGEucmVwbGFjZShkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5leHRyYWN0ID0gZnVuY3Rpb24gKG9wdGltaXN0aWMpIHtcbiAgICAgICAgaWYgKG9wdGltaXN0aWMgPT09IHZvaWQgMCkgeyBvcHRpbWlzdGljID0gZmFsc2U7IH1cbiAgICAgICAgcmV0dXJuIChvcHRpbWlzdGljID8gdGhpcy5vcHRpbWlzdGljRGF0YSA6IHRoaXMuZGF0YSkuZXh0cmFjdCgpO1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuUmVtb3ZlZE9wdGlvbihvcHRpb25zLCBcImNhbm9uaXplUmVzdWx0c1wiLCBcImNhY2hlLnJlYWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIFxuICAgICAgICAvLyBTaW5jZSByZWFkIHJldHVybnMgZGF0YSBvciBudWxsLCB3aXRob3V0IGFueSBhZGRpdGlvbmFsIG1ldGFkYXRhXG4gICAgICAgIC8vIGFib3V0IHdoZXRoZXIvd2hlcmUgdGhlcmUgbWlnaHQgaGF2ZSBiZWVuIG1pc3NpbmcgZmllbGRzLCB0aGVcbiAgICAgICAgLy8gZGVmYXVsdCBiZWhhdmlvciBjYW5ub3QgYmUgcmV0dXJuUGFydGlhbERhdGEgPSB0cnVlIChsaWtlIGl0IGlzXG4gICAgICAgIC8vIGZvciB0aGUgZGlmZiBtZXRob2QpLCBzaW5jZSBkZWZhdWx0aW5nIHRvIHRydWUgd291bGQgdmlvbGF0ZSB0aGVcbiAgICAgICAgLy8gaW50ZWdyaXR5IG9mIHRoZSBUIGluIHRoZSByZXR1cm4gdHlwZS4gSG93ZXZlciwgcGFydGlhbCBkYXRhIG1heVxuICAgICAgICAvLyBiZSB1c2VmdWwgaW4gc29tZSBjYXNlcywgc28gcmV0dXJuUGFydGlhbERhdGE6dHJ1ZSBtYXkgYmVcbiAgICAgICAgLy8gc3BlY2lmaWVkIGV4cGxpY2l0bHkuXG4gICAgICAgIF9hID0gb3B0aW9ucy5yZXR1cm5QYXJ0aWFsRGF0YSwgXG4gICAgICAgIC8vIFNpbmNlIHJlYWQgcmV0dXJucyBkYXRhIG9yIG51bGwsIHdpdGhvdXQgYW55IGFkZGl0aW9uYWwgbWV0YWRhdGFcbiAgICAgICAgLy8gYWJvdXQgd2hldGhlci93aGVyZSB0aGVyZSBtaWdodCBoYXZlIGJlZW4gbWlzc2luZyBmaWVsZHMsIHRoZVxuICAgICAgICAvLyBkZWZhdWx0IGJlaGF2aW9yIGNhbm5vdCBiZSByZXR1cm5QYXJ0aWFsRGF0YSA9IHRydWUgKGxpa2UgaXQgaXNcbiAgICAgICAgLy8gZm9yIHRoZSBkaWZmIG1ldGhvZCksIHNpbmNlIGRlZmF1bHRpbmcgdG8gdHJ1ZSB3b3VsZCB2aW9sYXRlIHRoZVxuICAgICAgICAvLyBpbnRlZ3JpdHkgb2YgdGhlIFQgaW4gdGhlIHJldHVybiB0eXBlLiBIb3dldmVyLCBwYXJ0aWFsIGRhdGEgbWF5XG4gICAgICAgIC8vIGJlIHVzZWZ1bCBpbiBzb21lIGNhc2VzLCBzbyByZXR1cm5QYXJ0aWFsRGF0YTp0cnVlIG1heSBiZVxuICAgICAgICAvLyBzcGVjaWZpZWQgZXhwbGljaXRseS5cbiAgICAgICAgcmV0dXJuUGFydGlhbERhdGEgPSBfYSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5zdG9yZVJlYWRlci5kaWZmUXVlcnlBZ2FpbnN0U3RvcmUoX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IHN0b3JlOiBvcHRpb25zLm9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhLCBjb25maWc6IHRoaXMuY29uZmlnLCByZXR1cm5QYXJ0aWFsRGF0YTogcmV0dXJuUGFydGlhbERhdGEgfSkpLnJlc3VsdCB8fCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBNaXNzaW5nRmllbGRFcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIFN3YWxsb3cgTWlzc2luZ0ZpZWxkRXJyb3IgYW5kIHJldHVybiBudWxsLCBzbyBjYWxsZXJzIGRvIG5vdCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gd29ycnkgYWJvdXQgY2F0Y2hpbmcgXCJub3JtYWxcIiBleGNlcHRpb25zIHJlc3VsdGluZyBmcm9tIGluY29tcGxldGVcbiAgICAgICAgICAgICAgICAvLyBjYWNoZSBkYXRhLiBVbmV4cGVjdGVkIGVycm9ycyB3aWxsIGJlIHJlLXRocm93bi4gSWYgeW91IG5lZWQgbW9yZVxuICAgICAgICAgICAgICAgIC8vIGluZm9ybWF0aW9uIGFib3V0IHdoaWNoIGZpZWxkcyB3ZXJlIG1pc3NpbmcsIHVzZSBjYWNoZS5kaWZmIGluc3RlYWQsXG4gICAgICAgICAgICAgICAgLy8gYW5kIGV4YW1pbmUgZGlmZlJlc3VsdC5taXNzaW5nLlxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgKyt0aGlzLnR4Q291bnQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdG9yZVdyaXRlci53cml0ZVRvU3RvcmUodGhpcy5kYXRhLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmICghLS10aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLm1vZGlmeSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmIChoYXNPd24uY2FsbChvcHRpb25zLCBcImlkXCIpICYmICFvcHRpb25zLmlkKSB7XG4gICAgICAgICAgICAvLyBUbyBteSBrbm93bGVkZ2UsIFR5cGVTY3JpcHQgZG9lcyBub3QgY3VycmVudGx5IHByb3ZpZGUgYSB3YXkgdG9cbiAgICAgICAgICAgIC8vIGVuZm9yY2UgdGhhdCBhbiBvcHRpb25hbCBwcm9wZXJ0eT86dHlwZSBtdXN0ICpub3QqIGJlIHVuZGVmaW5lZFxuICAgICAgICAgICAgLy8gd2hlbiBwcmVzZW50LiBUaGF0IGFiaWxpdHkgd291bGQgYmUgdXNlZnVsIGhlcmUsIGJlY2F1c2Ugd2Ugd2FudFxuICAgICAgICAgICAgLy8gb3B0aW9ucy5pZCB0byBkZWZhdWx0IHRvIFJPT1RfUVVFUlkgb25seSB3aGVuIG5vIG9wdGlvbnMuaWQgd2FzXG4gICAgICAgICAgICAvLyBwcm92aWRlZC4gSWYgdGhlIGNhbGxlciBhdHRlbXB0cyB0byBwYXNzIG9wdGlvbnMuaWQgd2l0aCBhXG4gICAgICAgICAgICAvLyBmYWxzeS91bmRlZmluZWQgdmFsdWUgKHBlcmhhcHMgYmVjYXVzZSBjYWNoZS5pZGVudGlmeSBmYWlsZWQpLCB3ZVxuICAgICAgICAgICAgLy8gc2hvdWxkIG5vdCBhc3N1bWUgdGhlIGdvYWwgd2FzIHRvIG1vZGlmeSB0aGUgUk9PVF9RVUVSWSBvYmplY3QuXG4gICAgICAgICAgICAvLyBXZSBjb3VsZCB0aHJvdywgYnV0IGl0IHNlZW1zIG5hdHVyYWwgdG8gcmV0dXJuIGZhbHNlIHRvIGluZGljYXRlXG4gICAgICAgICAgICAvLyB0aGF0IG5vdGhpbmcgd2FzIG1vZGlmaWVkLlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdG9yZSA9ICgob3B0aW9ucy5vcHRpbWlzdGljKSAvLyBEZWZhdWx0cyB0byBmYWxzZS5cbiAgICAgICAgKSA/XG4gICAgICAgICAgICB0aGlzLm9wdGltaXN0aWNEYXRhXG4gICAgICAgICAgICA6IHRoaXMuZGF0YTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICsrdGhpcy50eENvdW50O1xuICAgICAgICAgICAgcmV0dXJuIHN0b3JlLm1vZGlmeShvcHRpb25zLmlkIHx8IFwiUk9PVF9RVUVSWVwiLCBvcHRpb25zLmZpZWxkcyk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoIS0tdGhpcy50eENvdW50ICYmIG9wdGlvbnMuYnJvYWRjYXN0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5kaWZmID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKG9wdGlvbnMsIFwiY2Fub25pemVSZXN1bHRzXCIsIFwiY2FjaGUuZGlmZlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZVJlYWRlci5kaWZmUXVlcnlBZ2FpbnN0U3RvcmUoX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IHN0b3JlOiBvcHRpb25zLm9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhLCByb290SWQ6IG9wdGlvbnMuaWQgfHwgXCJST09UX1FVRVJZXCIsIGNvbmZpZzogdGhpcy5jb25maWcgfSkpO1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUud2F0Y2ggPSBmdW5jdGlvbiAod2F0Y2gpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLndhdGNoZXMuc2l6ZSkge1xuICAgICAgICAgICAgLy8gSW4gY2FzZSB3ZSBwcmV2aW91c2x5IGNhbGxlZCBmb3JnZXRDYWNoZSh0aGlzKSBiZWNhdXNlXG4gICAgICAgICAgICAvLyB0aGlzLndhdGNoZXMgYmVjYW1lIGVtcHR5IChzZWUgYmVsb3cpLCByZWF0dGFjaCB0aGlzIGNhY2hlIHRvIGFueVxuICAgICAgICAgICAgLy8gcmVhY3RpdmUgdmFyaWFibGVzIG9uIHdoaWNoIGl0IHByZXZpb3VzbHkgZGVwZW5kZWQuIEl0IG1pZ2h0IHNlZW1cbiAgICAgICAgICAgIC8vIHBhcmFkb3hpY2FsIHRoYXQgd2UncmUgYWJsZSB0byByZWNhbGwgc29tZXRoaW5nIHdlIHN1cHBvc2VkbHlcbiAgICAgICAgICAgIC8vIGZvcmdvdCwgYnV0IHRoZSBwb2ludCBvZiBjYWxsaW5nIGZvcmdldENhY2hlKHRoaXMpIGlzIHRvIHNpbGVuY2VcbiAgICAgICAgICAgIC8vIHVzZWxlc3MgYnJvYWRjYXN0cyB3aGlsZSB0aGlzLndhdGNoZXMgaXMgZW1wdHksIGFuZCB0byBhbGxvdyB0aGVcbiAgICAgICAgICAgIC8vIGNhY2hlIHRvIGJlIGdhcmJhZ2UgY29sbGVjdGVkLiBJZiwgaG93ZXZlciwgd2UgbWFuYWdlIHRvIGNhbGxcbiAgICAgICAgICAgIC8vIHJlY2FsbENhY2hlKHRoaXMpIGhlcmUsIHRoaXMgY2FjaGUgb2JqZWN0IG11c3Qgbm90IGhhdmUgYmVlblxuICAgICAgICAgICAgLy8gZ2FyYmFnZSBjb2xsZWN0ZWQgeWV0LCBhbmQgc2hvdWxkIHJlc3VtZSByZWNlaXZpbmcgdXBkYXRlcyBmcm9tXG4gICAgICAgICAgICAvLyByZWFjdGl2ZSB2YXJpYWJsZXMsIG5vdyB0aGF0IGl0IGhhcyBhIHdhdGNoZXIgdG8gbm90aWZ5LlxuICAgICAgICAgICAgcmVjYWxsQ2FjaGUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YXRjaGVzLmFkZCh3YXRjaCk7XG4gICAgICAgIGlmICh3YXRjaC5pbW1lZGlhdGUpIHtcbiAgICAgICAgICAgIHRoaXMubWF5YmVCcm9hZGNhc3RXYXRjaCh3YXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIE9uY2Ugd2UgcmVtb3ZlIHRoZSBsYXN0IHdhdGNoIGZyb20gdGhpcy53YXRjaGVzLCBjYWNoZS5icm9hZGNhc3RXYXRjaGVzXG4gICAgICAgICAgICAvLyBubyBsb25nZXIgZG9lcyBhbnl0aGluZywgc28gd2UgcHJlZW1wdGl2ZWx5IHRlbGwgdGhlIHJlYWN0aXZlIHZhcmlhYmxlXG4gICAgICAgICAgICAvLyBzeXN0ZW0gdG8gZXhjbHVkZSB0aGlzIGNhY2hlIGZyb20gZnV0dXJlIGJyb2FkY2FzdHMuXG4gICAgICAgICAgICBpZiAoX3RoaXMud2F0Y2hlcy5kZWxldGUod2F0Y2gpICYmICFfdGhpcy53YXRjaGVzLnNpemUpIHtcbiAgICAgICAgICAgICAgICBmb3JnZXRDYWNoZShfdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhpcyB3YXRjaCBmcm9tIHRoZSBMUlUgY2FjaGUgbWFuYWdlZCBieSB0aGVcbiAgICAgICAgICAgIC8vIG1heWJlQnJvYWRjYXN0V2F0Y2ggT3B0aW1pc3RpY1dyYXBwZXJGdW5jdGlvbiwgdG8gcHJldmVudCBtZW1vcnlcbiAgICAgICAgICAgIC8vIGxlYWtzIGludm9sdmluZyB0aGUgY2xvc3VyZSBvZiB3YXRjaC5jYWxsYmFjay5cbiAgICAgICAgICAgIF90aGlzLm1heWJlQnJvYWRjYXN0V2F0Y2guZm9yZ2V0KHdhdGNoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLmdjID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKG9wdGlvbnMgfHwge30sIFwicmVzZXRSZXN1bHRJZGVudGl0aWVzXCIsIFwiY2FjaGUuZ2NcIiwgXCJGaXJzdCBlbnN1cmUgYWxsIHVzYWdlcyBvZiBgY2Fub25pemVSZXN1bHRzYCBhcmUgcmVtb3ZlZCwgdGhlbiByZW1vdmUgdGhpcyBvcHRpb24uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNhbm9uaWNhbFN0cmluZ2lmeS5yZXNldCgpO1xuICAgICAgICBwcmludC5yZXNldCgpO1xuICAgICAgICB2YXIgaWRzID0gdGhpcy5vcHRpbWlzdGljRGF0YS5nYygpO1xuICAgICAgICBpZiAob3B0aW9ucyAmJiAhdGhpcy50eENvdW50KSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZXNldFJlc3VsdENhY2hlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFJlc3VsdENhY2hlKG9wdGlvbnMucmVzZXRSZXN1bHRJZGVudGl0aWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMucmVzZXRSZXN1bHRJZGVudGl0aWVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZVJlYWRlci5yZXNldENhbm9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICB9O1xuICAgIC8vIENhbGwgdGhpcyBtZXRob2QgdG8gZW5zdXJlIHRoZSBnaXZlbiByb290IElEIHJlbWFpbnMgaW4gdGhlIGNhY2hlIGFmdGVyXG4gICAgLy8gZ2FyYmFnZSBjb2xsZWN0aW9uLCBhbG9uZyB3aXRoIGl0cyB0cmFuc2l0aXZlIGNoaWxkIGVudGl0aWVzLiBOb3RlIHRoYXRcbiAgICAvLyB0aGUgY2FjaGUgYXV0b21hdGljYWxseSByZXRhaW5zIGFsbCBkaXJlY3RseSB3cml0dGVuIGVudGl0aWVzLiBCeSBkZWZhdWx0LFxuICAgIC8vIHRoZSByZXRhaW5tZW50IHBlcnNpc3RzIGFmdGVyIG9wdGltaXN0aWMgdXBkYXRlcyBhcmUgcmVtb3ZlZC4gUGFzcyB0cnVlXG4gICAgLy8gZm9yIHRoZSBvcHRpbWlzdGljIGFyZ3VtZW50IGlmIHlvdSB3b3VsZCBwcmVmZXIgZm9yIHRoZSByZXRhaW5tZW50IHRvIGJlXG4gICAgLy8gZGlzY2FyZGVkIHdoZW4gdGhlIHRvcC1tb3N0IG9wdGltaXN0aWMgbGF5ZXIgaXMgcmVtb3ZlZC4gUmV0dXJucyB0aGVcbiAgICAvLyByZXN1bHRpbmcgKG5vbi1uZWdhdGl2ZSkgcmV0YWlubWVudCBjb3VudC5cbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5yZXRhaW4gPSBmdW5jdGlvbiAocm9vdElkLCBvcHRpbWlzdGljKSB7XG4gICAgICAgIHJldHVybiAob3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGEpLnJldGFpbihyb290SWQpO1xuICAgIH07XG4gICAgLy8gQ2FsbCB0aGlzIG1ldGhvZCB0byB1bmRvIHRoZSBlZmZlY3Qgb2YgdGhlIHJldGFpbiBtZXRob2QsIGFib3ZlLiBPbmNlIHRoZVxuICAgIC8vIHJldGFpbm1lbnQgY291bnQgZmFsbHMgdG8gemVybywgdGhlIGdpdmVuIElEIHdpbGwgbm8gbG9uZ2VyIGJlIHByZXNlcnZlZFxuICAgIC8vIGR1cmluZyBnYXJiYWdlIGNvbGxlY3Rpb24sIHRob3VnaCBpdCBtYXkgc3RpbGwgYmUgcHJlc2VydmVkIGJ5IG90aGVyIHNhZmVcbiAgICAvLyBlbnRpdGllcyB0aGF0IHJlZmVyIHRvIGl0LiBSZXR1cm5zIHRoZSByZXN1bHRpbmcgKG5vbi1uZWdhdGl2ZSkgcmV0YWlubWVudFxuICAgIC8vIGNvdW50LCBpbiBjYXNlIHRoYXQncyB1c2VmdWwuXG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uIChyb290SWQsIG9wdGltaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIChvcHRpbWlzdGljID8gdGhpcy5vcHRpbWlzdGljRGF0YSA6IHRoaXMuZGF0YSkucmVsZWFzZShyb290SWQpO1xuICAgIH07XG4gICAgLy8gUmV0dXJucyB0aGUgY2Fub25pY2FsIElEIGZvciBhIGdpdmVuIFN0b3JlT2JqZWN0LCBvYmV5aW5nIHR5cGVQb2xpY2llc1xuICAgIC8vIGFuZCBrZXlGaWVsZHMgKGFuZCBkYXRhSWRGcm9tT2JqZWN0LCBpZiB5b3Ugc3RpbGwgdXNlIHRoYXQpLiBBdCBtaW5pbXVtLFxuICAgIC8vIHRoZSBvYmplY3QgbXVzdCBjb250YWluIGEgX190eXBlbmFtZSBhbmQgYW55IHByaW1hcnkga2V5IGZpZWxkcyByZXF1aXJlZFxuICAgIC8vIHRvIGlkZW50aWZ5IGVudGl0aWVzIG9mIHRoYXQgdHlwZS4gSWYgeW91IHBhc3MgYSBxdWVyeSByZXN1bHQgb2JqZWN0LCBiZVxuICAgIC8vIHN1cmUgdGhhdCBub25lIG9mIHRoZSBwcmltYXJ5IGtleSBmaWVsZHMgaGF2ZSBiZWVuIHJlbmFtZWQgYnkgYWxpYXNpbmcuXG4gICAgLy8gSWYgeW91IHBhc3MgYSBSZWZlcmVuY2Ugb2JqZWN0LCBpdHMgX19yZWYgSUQgc3RyaW5nIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUuaWRlbnRpZnkgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIGlmIChpc1JlZmVyZW5jZShvYmplY3QpKVxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdC5fX3JlZjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvbGljaWVzLmlkZW50aWZ5KG9iamVjdClbMF07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLmV2aWN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zLmlkKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwob3B0aW9ucywgXCJpZFwiKSkge1xuICAgICAgICAgICAgICAgIC8vIFNlZSBjb21tZW50IGluIG1vZGlmeSBtZXRob2QgYWJvdXQgd2h5IHdlIHJldHVybiBmYWxzZSB3aGVuXG4gICAgICAgICAgICAgICAgLy8gb3B0aW9ucy5pZCBleGlzdHMgYnV0IGlzIGZhbHN5L3VuZGVmaW5lZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGlkOiBcIlJPT1RfUVVFUllcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSXQncyB1bmxpa2VseSB0aGF0IHRoZSBldmljdGlvbiB3aWxsIGVuZCB1cCBpbnZva2luZyBhbnkgb3RoZXJcbiAgICAgICAgICAgIC8vIGNhY2hlIHVwZGF0ZSBvcGVyYXRpb25zIHdoaWxlIGl0J3MgcnVubmluZywgYnV0IHtpbixkZX1jcmVtZW50aW5nXG4gICAgICAgICAgICAvLyB0aGlzLnR4Q291bnQgc3RpbGwgc2VlbXMgbGlrZSBhIGdvb2QgaWRlYSwgZm9yIHVuaWZvcm1pdHkgd2l0aFxuICAgICAgICAgICAgLy8gdGhlIG90aGVyIHVwZGF0ZSBtZXRob2RzLlxuICAgICAgICAgICAgKyt0aGlzLnR4Q291bnQ7XG4gICAgICAgICAgICAvLyBQYXNzIHRoaXMuZGF0YSBhcyBhIGxpbWl0IG9uIHRoZSBkZXB0aCBvZiB0aGUgZXZpY3Rpb24sIHNvIGV2aWN0aW9uc1xuICAgICAgICAgICAgLy8gZHVyaW5nIG9wdGltaXN0aWMgdXBkYXRlcyAod2hlbiB0aGlzLmRhdGEgaXMgdGVtcG9yYXJpbHkgc2V0IGVxdWFsIHRvXG4gICAgICAgICAgICAvLyB0aGlzLm9wdGltaXN0aWNEYXRhKSBkbyBub3QgZXNjYXBlIHRoZWlyIG9wdGltaXN0aWMgTGF5ZXIuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpbWlzdGljRGF0YS5ldmljdChvcHRpb25zLCB0aGlzLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKCEtLXRoaXMudHhDb3VudCAmJiBvcHRpb25zLmJyb2FkY2FzdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgY2Fub25pY2FsU3RyaW5naWZ5LnJlc2V0KCk7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZGlzY2FyZFdhdGNoZXMpIHtcbiAgICAgICAgICAgIC8vIFNpbWlsYXIgdG8gd2hhdCBoYXBwZW5zIGluIHRoZSB1bnN1YnNjcmliZSBmdW5jdGlvbiByZXR1cm5lZCBieVxuICAgICAgICAgICAgLy8gY2FjaGUud2F0Y2gsIGFwcGxpZWQgdG8gYWxsIGN1cnJlbnQgd2F0Y2hlcy5cbiAgICAgICAgICAgIHRoaXMud2F0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uICh3YXRjaCkgeyByZXR1cm4gX3RoaXMubWF5YmVCcm9hZGNhc3RXYXRjaC5mb3JnZXQod2F0Y2gpOyB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hlcy5jbGVhcigpO1xuICAgICAgICAgICAgZm9yZ2V0Q2FjaGUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBDYWxsaW5nIHRoaXMuaW5pdCgpIGFib3ZlIHVuYmxvY2tzIGFsbCBtYXliZUJyb2FkY2FzdFdhdGNoIGNhY2hpbmcsIHNvXG4gICAgICAgICAgICAvLyB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKSB0cmlnZ2VycyBhIGJyb2FkY2FzdCB0byBldmVyeSBjdXJyZW50IHdhdGNoZXJcbiAgICAgICAgICAgIC8vIChsZXR0aW5nIHRoZW0ga25vdyB0aGVpciBkYXRhIGlzIG5vdyBtaXNzaW5nKS4gVGhpcyBkZWZhdWx0IGJlaGF2aW9yIGlzXG4gICAgICAgICAgICAvLyBjb252ZW5pZW50IGJlY2F1c2UgaXQgbWVhbnMgdGhlIHdhdGNoZXMgZG8gbm90IGhhdmUgdG8gYmUgbWFudWFsbHlcbiAgICAgICAgICAgIC8vIHJlZXN0YWJsaXNoZWQgYWZ0ZXIgcmVzZXR0aW5nIHRoZSBjYWNoZS4gVG8gcHJldmVudCB0aGlzIGJyb2FkY2FzdCBhbmRcbiAgICAgICAgICAgIC8vIGNhbmNlbCBhbGwgd2F0Y2hlcywgcGFzcyB0cnVlIGZvciBvcHRpb25zLmRpc2NhcmRXYXRjaGVzLlxuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUucmVtb3ZlT3B0aW1pc3RpYyA9IGZ1bmN0aW9uIChpZFRvUmVtb3ZlKSB7XG4gICAgICAgIHZhciBuZXdPcHRpbWlzdGljRGF0YSA9IHRoaXMub3B0aW1pc3RpY0RhdGEucmVtb3ZlTGF5ZXIoaWRUb1JlbW92ZSk7XG4gICAgICAgIGlmIChuZXdPcHRpbWlzdGljRGF0YSAhPT0gdGhpcy5vcHRpbWlzdGljRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpbWlzdGljRGF0YSA9IG5ld09wdGltaXN0aWNEYXRhO1xuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLmJhdGNoID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHVwZGF0ZSA9IG9wdGlvbnMudXBkYXRlLCBfYSA9IG9wdGlvbnMub3B0aW1pc3RpYywgb3B0aW1pc3RpYyA9IF9hID09PSB2b2lkIDAgPyB0cnVlIDogX2EsIHJlbW92ZU9wdGltaXN0aWMgPSBvcHRpb25zLnJlbW92ZU9wdGltaXN0aWMsIG9uV2F0Y2hVcGRhdGVkID0gb3B0aW9ucy5vbldhdGNoVXBkYXRlZDtcbiAgICAgICAgdmFyIHVwZGF0ZVJlc3VsdDtcbiAgICAgICAgdmFyIHBlcmZvcm0gPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLCBkYXRhID0gX2EuZGF0YSwgb3B0aW1pc3RpY0RhdGEgPSBfYS5vcHRpbWlzdGljRGF0YTtcbiAgICAgICAgICAgICsrX3RoaXMudHhDb3VudDtcbiAgICAgICAgICAgIGlmIChsYXllcikge1xuICAgICAgICAgICAgICAgIF90aGlzLmRhdGEgPSBfdGhpcy5vcHRpbWlzdGljRGF0YSA9IGxheWVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHVwZGF0ZVJlc3VsdCA9IHVwZGF0ZShfdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgLS1fdGhpcy50eENvdW50O1xuICAgICAgICAgICAgICAgIF90aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgIF90aGlzLm9wdGltaXN0aWNEYXRhID0gb3B0aW1pc3RpY0RhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhbHJlYWR5RGlydHkgPSBuZXcgU2V0KCk7XG4gICAgICAgIGlmIChvbldhdGNoVXBkYXRlZCAmJiAhdGhpcy50eENvdW50KSB7XG4gICAgICAgICAgICAvLyBJZiBhbiBvcHRpb25zLm9uV2F0Y2hVcGRhdGVkIGNhbGxiYWNrIGlzIHByb3ZpZGVkLCB3ZSB3YW50IHRvIGNhbGwgaXRcbiAgICAgICAgICAgIC8vIHdpdGggb25seSB0aGUgQ2FjaGUuV2F0Y2hPcHRpb25zIG9iamVjdHMgYWZmZWN0ZWQgYnkgb3B0aW9ucy51cGRhdGUsXG4gICAgICAgICAgICAvLyBidXQgdGhlcmUgbWlnaHQgYmUgZGlydHkgd2F0Y2hlcnMgYWxyZWFkeSB3YWl0aW5nIHRvIGJlIGJyb2FkY2FzdCB0aGF0XG4gICAgICAgICAgICAvLyBoYXZlIG5vdGhpbmcgdG8gZG8gd2l0aCB0aGUgdXBkYXRlLiBUbyBwcmV2ZW50IGluY2x1ZGluZyB0aG9zZSB3YXRjaGVyc1xuICAgICAgICAgICAgLy8gaW4gdGhlIHBvc3QtdXBkYXRlIGJyb2FkY2FzdCwgd2UgcGVyZm9ybSB0aGlzIGluaXRpYWwgYnJvYWRjYXN0IHRvXG4gICAgICAgICAgICAvLyBjb2xsZWN0IHRoZSBkaXJ0eSB3YXRjaGVycywgc28gd2UgY2FuIHJlLWRpcnR5IHRoZW0gbGF0ZXIsIGFmdGVyIHRoZVxuICAgICAgICAgICAgLy8gcG9zdC11cGRhdGUgYnJvYWRjYXN0LCBhbGxvd2luZyB0aGVtIHRvIHJlY2VpdmUgdGhlaXIgcGVuZGluZ1xuICAgICAgICAgICAgLy8gYnJvYWRjYXN0cyB0aGUgbmV4dCB0aW1lIGJyb2FkY2FzdFdhdGNoZXMgaXMgY2FsbGVkLCBqdXN0IGFzIHRoZXkgd291bGRcbiAgICAgICAgICAgIC8vIGlmIHdlIG5ldmVyIGNhbGxlZCBjYWNoZS5iYXRjaC5cbiAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcyhfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgb25XYXRjaFVwZGF0ZWQ6IGZ1bmN0aW9uICh3YXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBhbHJlYWR5RGlydHkuYWRkKHdhdGNoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW1pc3RpYyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZXJlIGNhbiBiZSBtdWx0aXBsZSBsYXllcnMgd2l0aCB0aGUgc2FtZSBvcHRpbWlzdGljIElELlxuICAgICAgICAgICAgLy8gV2hlbiByZW1vdmVPcHRpbWlzdGljKGlkKSBpcyBjYWxsZWQgZm9yIHRoYXQgaWQsIGFsbCBtYXRjaGluZyBsYXllcnNcbiAgICAgICAgICAgIC8vIHdpbGwgYmUgcmVtb3ZlZCwgYW5kIHRoZSByZW1haW5pbmcgbGF5ZXJzIHdpbGwgYmUgcmVhcHBsaWVkLlxuICAgICAgICAgICAgdGhpcy5vcHRpbWlzdGljRGF0YSA9IHRoaXMub3B0aW1pc3RpY0RhdGEuYWRkTGF5ZXIob3B0aW1pc3RpYywgcGVyZm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW1pc3RpYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBib3RoIHRoaXMuZGF0YSBhbmQgdGhpcy5vcHRpbWlzdGljRGF0YSByZWZlciB0byB0aGUgcm9vdFxuICAgICAgICAgICAgLy8gKG5vbi1vcHRpbWlzdGljKSBsYXllciBvZiB0aGUgY2FjaGUgZHVyaW5nIHRoZSB1cGRhdGUuIE5vdGUgdGhhdFxuICAgICAgICAgICAgLy8gdGhpcy5kYXRhIGNvdWxkIGJlIGEgTGF5ZXIgaWYgd2UgYXJlIGN1cnJlbnRseSBleGVjdXRpbmcgYW4gb3B0aW1pc3RpY1xuICAgICAgICAgICAgLy8gdXBkYXRlIGZ1bmN0aW9uLCBidXQgb3RoZXJ3aXNlIHdpbGwgYWx3YXlzIGJlIGFuIEVudGl0eVN0b3JlLlJvb3RcbiAgICAgICAgICAgIC8vIGluc3RhbmNlLlxuICAgICAgICAgICAgcGVyZm9ybSh0aGlzLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBsZWF2ZSB0aGlzLmRhdGEgYW5kIHRoaXMub3B0aW1pc3RpY0RhdGEgdW5jaGFuZ2VkIGFuZCBydW5cbiAgICAgICAgICAgIC8vIHRoZSB1cGRhdGUgd2l0aCBicm9hZGNhc3QgYmF0Y2hpbmcuXG4gICAgICAgICAgICBwZXJmb3JtKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiByZW1vdmVPcHRpbWlzdGljID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGltaXN0aWNEYXRhID0gdGhpcy5vcHRpbWlzdGljRGF0YS5yZW1vdmVMYXllcihyZW1vdmVPcHRpbWlzdGljKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOb3RlOiBpZiB0aGlzLnR4Q291bnQgPiAwLCB0aGVuIGFscmVhZHlEaXJ0eS5zaXplID09PSAwLCBzbyB0aGlzIGNvZGVcbiAgICAgICAgLy8gdGFrZXMgdGhlIGVsc2UgYnJhbmNoIGFuZCBjYWxscyB0aGlzLmJyb2FkY2FzdFdhdGNoZXMob3B0aW9ucyksIHdoaWNoXG4gICAgICAgIC8vIGRvZXMgbm90aGluZyB3aGVuIHRoaXMudHhDb3VudCA+IDAuXG4gICAgICAgIGlmIChvbldhdGNoVXBkYXRlZCAmJiBhbHJlYWR5RGlydHkuc2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBvbldhdGNoVXBkYXRlZDogZnVuY3Rpb24gKHdhdGNoLCBkaWZmKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBvbldhdGNoVXBkYXRlZC5jYWxsKHRoaXMsIHdhdGNoLCBkaWZmKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIG9uV2F0Y2hVcGRhdGVkIGRpZCBub3QgcmV0dXJuIGZhbHNlLCB0aGlzIGRpZmYgaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFib3V0IHRvIGJlIGJyb2FkY2FzdCB0byB3YXRjaC5jYWxsYmFjaywgc28gd2UgZG9uJ3QgbmVlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gcmUtZGlydHkgaXQgd2l0aCB0aGUgb3RoZXIgYWxyZWFkeURpcnR5IHdhdGNoZXMgYmVsb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHJlYWR5RGlydHkuZGVsZXRlKHdhdGNoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0gfSkpO1xuICAgICAgICAgICAgLy8gU2lsZW50bHkgcmUtZGlydHkgYW55IHdhdGNoZXMgdGhhdCB3ZXJlIGFscmVhZHkgZGlydHkgYmVmb3JlIHRoZSB1cGRhdGVcbiAgICAgICAgICAgIC8vIHdhcyBwZXJmb3JtZWQsIGFuZCB3ZXJlIG5vdCBicm9hZGNhc3QganVzdCBub3cuXG4gICAgICAgICAgICBpZiAoYWxyZWFkeURpcnR5LnNpemUpIHtcbiAgICAgICAgICAgICAgICBhbHJlYWR5RGlydHkuZm9yRWFjaChmdW5jdGlvbiAod2F0Y2gpIHsgcmV0dXJuIF90aGlzLm1heWJlQnJvYWRjYXN0V2F0Y2guZGlydHkod2F0Y2gpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIGFscmVhZHlEaXJ0eSBpcyBlbXB0eSBvciB3ZSBkb24ndCBoYXZlIGFuIG9uV2F0Y2hVcGRhdGVkXG4gICAgICAgICAgICAvLyBmdW5jdGlvbiwgd2UgZG9uJ3QgbmVlZCB0byBnbyB0byB0aGUgdHJvdWJsZSBvZiB3cmFwcGluZ1xuICAgICAgICAgICAgLy8gb3B0aW9ucy5vbldhdGNoVXBkYXRlZC5cbiAgICAgICAgICAgIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcyhvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXBkYXRlUmVzdWx0O1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUucGVyZm9ybVRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKHVwZGF0ZSwgb3B0aW1pc3RpY0lkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoKHtcbiAgICAgICAgICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgICAgICAgICAgb3B0aW1pc3RpYzogb3B0aW1pc3RpY0lkIHx8IG9wdGltaXN0aWNJZCAhPT0gbnVsbCxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS50cmFuc2Zvcm1Eb2N1bWVudCA9IGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRUeXBlbmFtZVRvRG9jdW1lbnQodGhpcy5hZGRGcmFnbWVudHNUb0RvY3VtZW50KGRvY3VtZW50KSk7XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5mcmFnbWVudE1hdGNoZXMgPSBmdW5jdGlvbiAoZnJhZ21lbnQsIHR5cGVuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvbGljaWVzLmZyYWdtZW50TWF0Y2hlcyhmcmFnbWVudCwgdHlwZW5hbWUpO1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUubG9va3VwRnJhZ21lbnQgPSBmdW5jdGlvbiAoZnJhZ21lbnROYW1lKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmNvbmZpZy5mcmFnbWVudHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sb29rdXAoZnJhZ21lbnROYW1lKSkgfHwgbnVsbDtcbiAgICB9O1xuICAgIEluTWVtb3J5Q2FjaGUucHJvdG90eXBlLmJyb2FkY2FzdFdhdGNoZXMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMudHhDb3VudCkge1xuICAgICAgICAgICAgdGhpcy53YXRjaGVzLmZvckVhY2goZnVuY3Rpb24gKGMpIHsgcmV0dXJuIF90aGlzLm1heWJlQnJvYWRjYXN0V2F0Y2goYywgb3B0aW9ucyk7IH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5hZGRGcmFnbWVudHNUb0RvY3VtZW50ID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgICAgIHZhciBmcmFnbWVudHMgPSB0aGlzLmNvbmZpZy5mcmFnbWVudHM7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHMgPyBmcmFnbWVudHMudHJhbnNmb3JtKGRvY3VtZW50KSA6IGRvY3VtZW50O1xuICAgIH07XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUuYWRkVHlwZW5hbWVUb0RvY3VtZW50ID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmFkZFR5cGVuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRUeXBlbmFtZVRyYW5zZm9ybS50cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH07XG4gICAgLy8gVGhpcyBtZXRob2QgaXMgd3JhcHBlZCBieSBtYXliZUJyb2FkY2FzdFdhdGNoLCB3aGljaCBpcyBjYWxsZWQgYnlcbiAgICAvLyBicm9hZGNhc3RXYXRjaGVzLCBzbyB0aGF0IHdlIGNvbXB1dGUgYW5kIGJyb2FkY2FzdCByZXN1bHRzIG9ubHkgd2hlblxuICAgIC8vIHRoZSBkYXRhIHRoYXQgd291bGQgYmUgYnJvYWRjYXN0IG1pZ2h0IGhhdmUgY2hhbmdlZC4gSXQgd291bGQgYmVcbiAgICAvLyBzaW1wbGVyIHRvIGNoZWNrIGZvciBjaGFuZ2VzIGFmdGVyIHJlY29tcHV0aW5nIGEgcmVzdWx0IGJ1dCBiZWZvcmVcbiAgICAvLyBicm9hZGNhc3RpbmcgaXQsIGJ1dCB0aGlzIHdyYXBwaW5nIGFwcHJvYWNoIGFsbG93cyB1cyB0byBza2lwIGJvdGhcbiAgICAvLyB0aGUgcmVjb21wdXRhdGlvbiBhbmQgdGhlIGJyb2FkY2FzdCwgaW4gbW9zdCBjYXNlcy5cbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5icm9hZGNhc3RXYXRjaCA9IGZ1bmN0aW9uIChjLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBsYXN0RGlmZiA9IGMubGFzdERpZmY7XG4gICAgICAgIC8vIEJvdGggV2F0Y2hPcHRpb25zIGFuZCBEaWZmT3B0aW9ucyBleHRlbmQgUmVhZE9wdGlvbnMsIGFuZCBEaWZmT3B0aW9uc1xuICAgICAgICAvLyBjdXJyZW50bHkgcmVxdWlyZXMgbm8gYWRkaXRpb25hbCBwcm9wZXJ0aWVzLCBzbyB3ZSBjYW4gdXNlIGMgKGFcbiAgICAgICAgLy8gV2F0Y2hPcHRpb25zIG9iamVjdCkgYXMgRGlmZk9wdGlvbnMsIHdpdGhvdXQgaGF2aW5nIHRvIGFsbG9jYXRlIGEgbmV3XG4gICAgICAgIC8vIG9iamVjdCwgYW5kIHdpdGhvdXQgaGF2aW5nIHRvIGVudW1lcmF0ZSB0aGUgcmVsZXZhbnQgcHJvcGVydGllcyAocXVlcnksXG4gICAgICAgIC8vIHZhcmlhYmxlcywgZXRjLikgZXhwbGljaXRseS4gVGhlcmUgd2lsbCBiZSBzb21lIGFkZGl0aW9uYWwgcHJvcGVydGllc1xuICAgICAgICAvLyAobGFzdERpZmYsIGNhbGxiYWNrLCBldGMuKSwgYnV0IGNhY2hlLmRpZmYgaWdub3JlcyB0aGVtLlxuICAgICAgICB2YXIgZGlmZiA9IG11dGVEZXByZWNhdGlvbnMoXCJjYW5vbml6ZVJlc3VsdHNcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZGlmZihjKTsgfSk7XG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoYy5vcHRpbWlzdGljICYmIHR5cGVvZiBvcHRpb25zLm9wdGltaXN0aWMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBkaWZmLmZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMub25XYXRjaFVwZGF0ZWQgJiZcbiAgICAgICAgICAgICAgICBvcHRpb25zLm9uV2F0Y2hVcGRhdGVkLmNhbGwodGhpcywgYywgZGlmZiwgbGFzdERpZmYpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIFJldHVybmluZyBmYWxzZSBmcm9tIHRoZSBvbldhdGNoVXBkYXRlZCBjYWxsYmFjayB3aWxsIHByZXZlbnRcbiAgICAgICAgICAgICAgICAvLyBjYWxsaW5nIGMuY2FsbGJhY2soZGlmZikgZm9yIHRoaXMgd2F0Y2hlci5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsYXN0RGlmZiB8fCAhZXF1YWwobGFzdERpZmYucmVzdWx0LCBkaWZmLnJlc3VsdCkpIHtcbiAgICAgICAgICAgIGMuY2FsbGJhY2soKGMubGFzdERpZmYgPSBkaWZmKSwgbGFzdERpZmYpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gSW5NZW1vcnlDYWNoZTtcbn0oQXBvbGxvQ2FjaGUpKTtcbmV4cG9ydCB7IEluTWVtb3J5Q2FjaGUgfTtcbmlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgSW5NZW1vcnlDYWNoZS5wcm90b3R5cGUuZ2V0TWVtb3J5SW50ZXJuYWxzID0gZ2V0SW5NZW1vcnlDYWNoZU1lbW9yeUludGVybmFscztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluTWVtb3J5Q2FjaGUuanMubWFwIiwKICAgICIvKipcbiAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiBhIHF1ZXJ54oCZcyBleGVjdXRpb24gaW4gb3VyIHN5c3RlbS5cbiAqL1xuZXhwb3J0IHZhciBOZXR3b3JrU3RhdHVzO1xuKGZ1bmN0aW9uIChOZXR3b3JrU3RhdHVzKSB7XG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGhhcyBuZXZlciBiZWVuIHJ1biBiZWZvcmUgYW5kIHRoZSBxdWVyeSBpcyBub3cgY3VycmVudGx5IHJ1bm5pbmcuIEEgcXVlcnkgd2lsbCBzdGlsbFxuICAgICAqIGhhdmUgdGhpcyBuZXR3b3JrIHN0YXR1cyBldmVuIGlmIGEgcGFydGlhbCBkYXRhIHJlc3VsdCB3YXMgcmV0dXJuZWQgZnJvbSB0aGUgY2FjaGUsIGJ1dCBhXG4gICAgICogcXVlcnkgd2FzIGRpc3BhdGNoZWQgYW55d2F5LlxuICAgICAqL1xuICAgIE5ldHdvcmtTdGF0dXNbTmV0d29ya1N0YXR1c1tcImxvYWRpbmdcIl0gPSAxXSA9IFwibG9hZGluZ1wiO1xuICAgIC8qKlxuICAgICAqIElmIGBzZXRWYXJpYWJsZXNgIHdhcyBjYWxsZWQgYW5kIGEgcXVlcnkgd2FzIGZpcmVkIGJlY2F1c2Ugb2YgdGhhdCB0aGVuIHRoZSBuZXR3b3JrIHN0YXR1c1xuICAgICAqIHdpbGwgYmUgYHNldFZhcmlhYmxlc2AgdW50aWwgdGhlIHJlc3VsdCBvZiB0aGF0IHF1ZXJ5IGNvbWVzIGJhY2suXG4gICAgICovXG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wic2V0VmFyaWFibGVzXCJdID0gMl0gPSBcInNldFZhcmlhYmxlc1wiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IGBmZXRjaE1vcmVgIHdhcyBjYWxsZWQgb24gdGhpcyBxdWVyeSBhbmQgdGhhdCB0aGUgcXVlcnkgY3JlYXRlZCBpcyBjdXJyZW50bHkgaW5cbiAgICAgKiBmbGlnaHQuXG4gICAgICovXG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wiZmV0Y2hNb3JlXCJdID0gM10gPSBcImZldGNoTW9yZVwiO1xuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8gdGhlIGBzZXRWYXJpYWJsZXNgIG5ldHdvcmsgc3RhdHVzLiBJdCBtZWFucyB0aGF0IGByZWZldGNoYCB3YXMgY2FsbGVkIG9uIGEgcXVlcnlcbiAgICAgKiBhbmQgdGhlIHJlZmV0Y2ggcmVxdWVzdCBpcyBjdXJyZW50bHkgaW4gZmxpZ2h0LlxuICAgICAqL1xuICAgIE5ldHdvcmtTdGF0dXNbTmV0d29ya1N0YXR1c1tcInJlZmV0Y2hcIl0gPSA0XSA9IFwicmVmZXRjaFwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IGEgcG9sbGluZyBxdWVyeSBpcyBjdXJyZW50bHkgaW4gZmxpZ2h0LiBTbyBmb3IgZXhhbXBsZSBpZiB5b3UgYXJlIHBvbGxpbmcgYVxuICAgICAqIHF1ZXJ5IGV2ZXJ5IDEwIHNlY29uZHMgdGhlbiB0aGUgbmV0d29yayBzdGF0dXMgd2lsbCBzd2l0Y2ggdG8gYHBvbGxgIGV2ZXJ5IDEwIHNlY29uZHMgd2hlbmV2ZXJcbiAgICAgKiBhIHBvbGwgcmVxdWVzdCBoYXMgYmVlbiBzZW50IGJ1dCBub3QgcmVzb2x2ZWQuXG4gICAgICovXG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wicG9sbFwiXSA9IDZdID0gXCJwb2xsXCI7XG4gICAgLyoqXG4gICAgICogTm8gcmVxdWVzdCBpcyBpbiBmbGlnaHQgZm9yIHRoaXMgcXVlcnksIGFuZCBubyBlcnJvcnMgaGFwcGVuZWQuIEV2ZXJ5dGhpbmcgaXMgT0suXG4gICAgICovXG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wicmVhZHlcIl0gPSA3XSA9IFwicmVhZHlcIjtcbiAgICAvKipcbiAgICAgKiBObyByZXF1ZXN0IGlzIGluIGZsaWdodCBmb3IgdGhpcyBxdWVyeSwgYnV0IG9uZSBvciBtb3JlIGVycm9ycyB3ZXJlIGRldGVjdGVkLlxuICAgICAqL1xuICAgIE5ldHdvcmtTdGF0dXNbTmV0d29ya1N0YXR1c1tcImVycm9yXCJdID0gOF0gPSBcImVycm9yXCI7XG59KShOZXR3b3JrU3RhdHVzIHx8IChOZXR3b3JrU3RhdHVzID0ge30pKTtcbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZXJlIGlzIGN1cnJlbnRseSBhIG5ldHdvcmsgcmVxdWVzdCBpbiBmbGlnaHQgYWNjb3JkaW5nIHRvIGEgZ2l2ZW4gbmV0d29ya1xuICogc3RhdHVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0KG5ldHdvcmtTdGF0dXMpIHtcbiAgICByZXR1cm4gbmV0d29ya1N0YXR1cyA/IG5ldHdvcmtTdGF0dXMgPCA3IDogZmFsc2U7XG59XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgbmV0d29yayByZXF1ZXN0IGlzIGluIHJlYWR5IG9yIGVycm9yIHN0YXRlIGFjY29yZGluZyB0byBhIGdpdmVuIG5ldHdvcmtcbiAqIHN0YXR1cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTmV0d29ya1JlcXVlc3RTZXR0bGVkKG5ldHdvcmtTdGF0dXMpIHtcbiAgICByZXR1cm4gbmV0d29ya1N0YXR1cyA9PT0gNyB8fCBuZXR3b3JrU3RhdHVzID09PSA4O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmV0d29ya1N0YXR1cy5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fYXNzaWduLCBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZXF1YWwgfSBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgTmV0d29ya1N0YXR1cywgaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0IH0gZnJvbSBcIi4vbmV0d29ya1N0YXR1cy5qc1wiO1xuaW1wb3J0IHsgY2xvbmVEZWVwLCBjb21wYWN0LCBnZXRPcGVyYXRpb25EZWZpbml0aW9uLCBPYnNlcnZhYmxlLCBpdGVyYXRlT2JzZXJ2ZXJzU2FmZWx5LCBmaXhPYnNlcnZhYmxlU3ViY2xhc3MsIGdldFF1ZXJ5RGVmaW5pdGlvbiwgcHJldmVudFVuaGFuZGxlZFJlamVjdGlvbiwgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBcG9sbG9FcnJvciwgaXNBcG9sbG9FcnJvciB9IGZyb20gXCIuLi9lcnJvcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IGVxdWFsQnlRdWVyeSB9IGZyb20gXCIuL2VxdWFsQnlRdWVyeS5qc1wiO1xuaW1wb3J0IHsgU2xvdCB9IGZyb20gXCJvcHRpbWlzbVwiO1xuaW1wb3J0IHsgbXV0ZURlcHJlY2F0aW9ucywgd2FybkRlcHJlY2F0ZWQsIHdhcm5SZW1vdmVkT3B0aW9uLCB9IGZyb20gXCIuLi91dGlsaXRpZXMvZGVwcmVjYXRpb24vaW5kZXguanNcIjtcbnZhciBhc3NpZ24gPSBPYmplY3QuYXNzaWduLCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5oYXNPd25Qcm9wZXJ0eTtcbnZhciBPYnNlcnZhYmxlUXVlcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9ic2VydmFibGVRdWVyeSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlUXVlcnkoX2EpIHtcbiAgICAgICAgdmFyIHF1ZXJ5TWFuYWdlciA9IF9hLnF1ZXJ5TWFuYWdlciwgcXVlcnlJbmZvID0gX2EucXVlcnlJbmZvLCBvcHRpb25zID0gX2Eub3B0aW9ucztcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHN0YXJ0ZWRJbmFjdGl2ZSA9IE9ic2VydmFibGVRdWVyeS5pbmFjdGl2ZU9uQ3JlYXRpb24uZ2V0VmFsdWUoKTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIF90aGlzLl9nZXRPckNyZWF0ZVF1ZXJ5KCk7XG4gICAgICAgICAgICAvLyBaZW4gT2JzZXJ2YWJsZSBoYXMgaXRzIG93biBlcnJvciBmdW5jdGlvbiwgc28gaW4gb3JkZXIgdG8gbG9nIGNvcnJlY3RseVxuICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBwcm92aWRlIGEgY3VzdG9tIGVycm9yIGNhbGxiYWNrLlxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgc3ViT2JzZXJ2ZXIgPSBvYnNlcnZlci5fc3Vic2NyaXB0aW9uLl9vYnNlcnZlcjtcbiAgICAgICAgICAgICAgICBpZiAoc3ViT2JzZXJ2ZXIgJiYgIXN1Yk9ic2VydmVyLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Yk9ic2VydmVyLmVycm9yID0gZGVmYXVsdFN1YnNjcmlwdGlvbk9ic2VydmVyRXJyb3JDYWxsYmFjaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICAgICAgdmFyIGZpcnN0ID0gIV90aGlzLm9ic2VydmVycy5zaXplO1xuICAgICAgICAgICAgX3RoaXMub2JzZXJ2ZXJzLmFkZChvYnNlcnZlcik7XG4gICAgICAgICAgICAvLyBEZWxpdmVyIG1vc3QgcmVjZW50IGVycm9yIG9yIHJlc3VsdC5cbiAgICAgICAgICAgIHZhciBsYXN0ID0gX3RoaXMubGFzdDtcbiAgICAgICAgICAgIGlmIChsYXN0ICYmIGxhc3QuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvciAmJiBvYnNlcnZlci5lcnJvcihsYXN0LmVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxhc3QgJiYgbGFzdC5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0ICYmIG9ic2VydmVyLm5leHQoX3RoaXMubWFza1Jlc3VsdChsYXN0LnJlc3VsdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSW5pdGlhdGUgb2JzZXJ2YXRpb24gb2YgdGhpcyBxdWVyeSBpZiBpdCBoYXNuJ3QgYmVlbiByZXBvcnRlZCB0b1xuICAgICAgICAgICAgLy8gdGhlIFF1ZXJ5TWFuYWdlciB5ZXQuXG4gICAgICAgICAgICBpZiAoZmlyc3QpIHtcbiAgICAgICAgICAgICAgICAvLyBCbGluZGx5IGNhdGNoaW5nIGhlcmUgcHJldmVudHMgdW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9ucyxcbiAgICAgICAgICAgICAgICAvLyBhbmQgaXMgc2FmZSBiZWNhdXNlIHRoZSBPYnNlcnZhYmxlUXVlcnkgaGFuZGxlcyB0aGlzIGVycm9yIHdpdGhcbiAgICAgICAgICAgICAgICAvLyB0aGlzLm9ic2VydmVyLmVycm9yLCBzbyB3ZSdyZSBub3QganVzdCBzd2FsbG93aW5nIHRoZSBlcnJvciBieVxuICAgICAgICAgICAgICAgIC8vIGlnbm9yaW5nIGl0IGhlcmUuXG4gICAgICAgICAgICAgICAgX3RoaXMucmVvYnNlcnZlKCkuY2F0Y2goZnVuY3Rpb24gKCkgeyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9ic2VydmVycy5kZWxldGUob2JzZXJ2ZXIpICYmICFfdGhpcy5vYnNlcnZlcnMuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50ZWFyRG93blF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub2JzZXJ2ZXJzID0gbmV3IFNldCgpO1xuICAgICAgICBfdGhpcy5zdWJzY3JpcHRpb25zID0gbmV3IFNldCgpO1xuICAgICAgICBfdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5fZ2V0T3JDcmVhdGVRdWVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChzdGFydGVkSW5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBxdWVyeU1hbmFnZXJbXCJxdWVyaWVzXCJdLnNldChfdGhpcy5xdWVyeUlkLCBxdWVyeUluZm8pO1xuICAgICAgICAgICAgICAgIHN0YXJ0ZWRJbmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnF1ZXJ5TWFuYWdlci5nZXRPckNyZWF0ZVF1ZXJ5KF90aGlzLnF1ZXJ5SWQpO1xuICAgICAgICB9O1xuICAgICAgICAvLyByZWxhdGVkIGNsYXNzZXNcbiAgICAgICAgX3RoaXMucXVlcnlJbmZvID0gcXVlcnlJbmZvO1xuICAgICAgICBfdGhpcy5xdWVyeU1hbmFnZXIgPSBxdWVyeU1hbmFnZXI7XG4gICAgICAgIC8vIGFjdGl2ZSBzdGF0ZVxuICAgICAgICBfdGhpcy53YWl0Rm9yT3duUmVzdWx0ID0gc2tpcENhY2hlRGF0YUZvcihvcHRpb25zLmZldGNoUG9saWN5KTtcbiAgICAgICAgX3RoaXMuaXNUb3JuRG93biA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5zdWJzY3JpYmVUb01vcmUgPSBfdGhpcy5zdWJzY3JpYmVUb01vcmUuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLm1hc2tSZXN1bHQgPSBfdGhpcy5tYXNrUmVzdWx0LmJpbmQoX3RoaXMpO1xuICAgICAgICB2YXIgX2IgPSBxdWVyeU1hbmFnZXIuZGVmYXVsdE9wdGlvbnMud2F0Y2hRdWVyeSwgX2MgPSBfYiA9PT0gdm9pZCAwID8ge30gOiBfYiwgX2QgPSBfYy5mZXRjaFBvbGljeSwgZGVmYXVsdEZldGNoUG9saWN5ID0gX2QgPT09IHZvaWQgMCA/IFwiY2FjaGUtZmlyc3RcIiA6IF9kO1xuICAgICAgICB2YXIgX2UgPSBvcHRpb25zLmZldGNoUG9saWN5LCBmZXRjaFBvbGljeSA9IF9lID09PSB2b2lkIDAgPyBkZWZhdWx0RmV0Y2hQb2xpY3kgOiBfZSwgXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCBzdG9yZSBcInN0YW5kYnlcIiBhcyB0aGUgaW5pdGlhbEZldGNoUG9saWN5LlxuICAgICAgICBfZiA9IG9wdGlvbnMuaW5pdGlhbEZldGNoUG9saWN5LCBcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGRvbid0IHN0b3JlIFwic3RhbmRieVwiIGFzIHRoZSBpbml0aWFsRmV0Y2hQb2xpY3kuXG4gICAgICAgIGluaXRpYWxGZXRjaFBvbGljeSA9IF9mID09PSB2b2lkIDAgPyBmZXRjaFBvbGljeSA9PT0gXCJzdGFuZGJ5XCIgPyBkZWZhdWx0RmV0Y2hQb2xpY3kgOiAoZmV0Y2hQb2xpY3kpIDogX2Y7XG4gICAgICAgIF90aGlzLm9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgXG4gICAgICAgICAgICAvLyBSZW1lbWJlciB0aGUgaW5pdGlhbCBvcHRpb25zLmZldGNoUG9saWN5IHNvIHdlIGNhbiByZXZlcnQgYmFjayB0byB0aGlzXG4gICAgICAgICAgICAvLyBwb2xpY3kgd2hlbiB2YXJpYWJsZXMgY2hhbmdlLiBUaGlzIGluZm9ybWF0aW9uIGNhbiBhbHNvIGJlIHNwZWNpZmllZFxuICAgICAgICAgICAgLy8gKG9yIG92ZXJyaWRkZW4pIGJ5IHByb3ZpZGluZyBvcHRpb25zLmluaXRpYWxGZXRjaFBvbGljeSBleHBsaWNpdGx5LlxuICAgICAgICAgICAgaW5pdGlhbEZldGNoUG9saWN5OiBpbml0aWFsRmV0Y2hQb2xpY3ksIFxuICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoaXMub3B0aW9ucy5mZXRjaFBvbGljeSBhbHdheXMgaGFzIGEgc3RyaW5nIHZhbHVlLCBpblxuICAgICAgICAgICAgLy8gY2FzZSBvcHRpb25zLmZldGNoUG9saWN5IHdhcyBub3QgcHJvdmlkZWQuXG4gICAgICAgICAgICBmZXRjaFBvbGljeTogZmV0Y2hQb2xpY3kgfSk7XG4gICAgICAgIF90aGlzLnF1ZXJ5SWQgPSBxdWVyeUluZm8ucXVlcnlJZCB8fCBxdWVyeU1hbmFnZXIuZ2VuZXJhdGVRdWVyeUlkKCk7XG4gICAgICAgIHZhciBvcERlZiA9IGdldE9wZXJhdGlvbkRlZmluaXRpb24oX3RoaXMucXVlcnkpO1xuICAgICAgICBfdGhpcy5xdWVyeU5hbWUgPSBvcERlZiAmJiBvcERlZi5uYW1lICYmIG9wRGVmLm5hbWUudmFsdWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUsIFwicXVlcnlcIiwge1xuICAgICAgICAvLyBUaGUgYHF1ZXJ5YCBjb21wdXRlZCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyByZWZsZWN0IHRoZSBkb2N1bWVudCB0cmFuc2Zvcm1lZFxuICAgICAgICAvLyBieSB0aGUgbGFzdCBydW4gcXVlcnkuIGB0aGlzLm9wdGlvbnMucXVlcnlgIHdpbGwgYWx3YXlzIHJlZmxlY3QgdGhlIHJhd1xuICAgICAgICAvLyB1bnRyYW5zZm9ybWVkIHF1ZXJ5IHRvIGVuc3VyZSBkb2N1bWVudCB0cmFuc2Zvcm1zIHdpdGggcnVudGltZSBjb25kaXRpb25hbHNcbiAgICAgICAgLy8gYXJlIHJ1biBvbiB0aGUgb3JpZ2luYWwgZG9jdW1lbnQuXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFzdFF1ZXJ5IHx8IHRoaXMub3B0aW9ucy5xdWVyeTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLCBcInZhcmlhYmxlc1wiLCB7XG4gICAgICAgIC8vIENvbXB1dGVkIHNob3J0aGFuZCBmb3IgdGhpcy5vcHRpb25zLnZhcmlhYmxlcywgcHJlc2VydmVkIGZvclxuICAgICAgICAvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSB2YXJpYWJsZXMgdGhhdCB3ZXJlIHByb3ZpZGVkIGZvciB0aGUgcXVlcnkuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMudmFyaWFibGVzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgYHJlc3VsdGAgd2lsbCBiZSByZW1vdmVkIGluIEFwb2xsbyBDbGllbnQgNC4wLlxuICAgICAqXG4gICAgICogKipSZWNvbW1lbmRlZCBub3cqKlxuICAgICAqXG4gICAgICogSWYgeW91IGNvbnRpbnVlIHRvIG5lZWQgdGhpcyBmdW5jdGlvbmFsaXR5LCBzdWJzY3JpYmUgdG8gYE9ic2VydmFibGVRdWVyeWBcbiAgICAgKiB0byBnZXQgdGhlIGZpcnN0IHZhbHVlIGVtaXR0ZWQgZnJvbSB0aGUgb2JzZXJ2YWJsZSwgdGhlbiBpbW1lZGlhdGVseSB1bnN1YnNjcmliZS5cbiAgICAgKlxuICAgICAqICoqV2hlbiB1cGdyYWRpbmcqKlxuICAgICAqXG4gICAgICogVXNlIFJ4SlMncyBbYGZpcnN0UmVzdWx0RnJvbWBdKGh0dHBzOi8vcnhqcy5kZXYvYXBpL2luZGV4L2Z1bmN0aW9uL2ZpcnN0VmFsdWVGcm9tKSBmdW5jdGlvbiB0byBtaW1pYyB0aGlzIGZ1bmN0aW9uYWxpdHkuXG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZpcnN0VmFsdWVGcm9tKGZyb20ob2JzZXJ2YWJsZVF1ZXJ5KSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5yZXN1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuRGVwcmVjYXRlZChcIm9ic2VydmFibGVRdWVyeS5yZXN1bHRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oMjMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IHRoaXMgY29kZSBkb2VzbuKAmXQgYWN0dWFsbHkgbWFrZSBzZW5zZSBpbnNvZmFyIGFzIHRoZSBvYnNlcnZlclxuICAgICAgICAgICAgLy8gd2lsbCBuZXZlciBleGlzdCBpbiB0aGlzLm9ic2VydmVycyBkdWUgaG93IHplbi1vYnNlcnZhYmxlIHdyYXBzIG9ic2VydmFibGVzLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvemVuLW9ic2VydmFibGUvYmxvYi9tYXN0ZXIvc3JjL09ic2VydmFibGUuanMjTDE2OVxuICAgICAgICAgICAgdmFyIG9ic2VydmVyID0ge1xuICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBTdG9wIHRoZSBxdWVyeSB3aXRoaW4gdGhlIFF1ZXJ5TWFuYWdlciBpZiB3ZSBjYW4gYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgZnVuY3Rpb24gcmV0dXJucy5cbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG8gdGhpcyBpbiBvcmRlciB0byBwcmV2ZW50IG9ic2VydmVycyBwaWxpbmcgdXAgd2l0aGluXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBRdWVyeU1hbmFnZXIuIE5vdGljZSB0aGF0IHdlIG9ubHkgZnVsbHkgdW5zdWJzY3JpYmVcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSB0aGUgc3Vic2NyaXB0aW9uIGluIGEgc2V0VGltZW91dCguLi4sIDApICBjYWxsLiBUaGlzIGNhbGwgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjdHVhbGx5IGJlIGhhbmRsZWQgYnkgdGhlIGJyb3dzZXIgYXQgYSBtdWNoIGxhdGVyIHRpbWUuIElmIHF1ZXJpZXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYXJlIGZpcmVkIGluIHRoZSBtZWFudGltZSwgb2JzZXJ2ZXJzIHRoYXQgc2hvdWxkIGhhdmUgYmVlbiByZW1vdmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyb20gdGhlIFF1ZXJ5TWFuYWdlciB3aWxsIGNvbnRpbnVlIHRvIGZpcmUsIGNhdXNpbmcgYW4gdW5uZWNlc3NhcnlcbiAgICAgICAgICAgICAgICAgICAgLy8gcGVyZm9ybWFuY2UgaGl0LlxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vYnNlcnZlcnMuZGVsZXRlKG9ic2VydmVyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5vYnNlcnZlcnMuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVlcnlNYW5hZ2VyLnJlbW92ZVF1ZXJ5KF90aGlzLnF1ZXJ5SWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IHJlamVjdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5yZXNldERpZmYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucXVlcnlJbmZvLnJlc2V0RGlmZigpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5nZXRDdXJyZW50RnVsbFJlc3VsdCA9IGZ1bmN0aW9uIChzYXZlQXNMYXN0UmVzdWx0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChzYXZlQXNMYXN0UmVzdWx0ID09PSB2b2lkIDApIHsgc2F2ZUFzTGFzdFJlc3VsdCA9IHRydWU7IH1cbiAgICAgICAgLy8gVXNlIHRoZSBsYXN0IHJlc3VsdCBhcyBsb25nIGFzIHRoZSB2YXJpYWJsZXMgbWF0Y2ggdGhpcy52YXJpYWJsZXMuXG4gICAgICAgIHZhciBsYXN0UmVzdWx0ID0gbXV0ZURlcHJlY2F0aW9ucyhcImdldExhc3RSZXN1bHRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldExhc3RSZXN1bHQodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbmV0d29ya1N0YXR1cyA9IHRoaXMucXVlcnlJbmZvLm5ldHdvcmtTdGF0dXMgfHxcbiAgICAgICAgICAgIChsYXN0UmVzdWx0ICYmIGxhc3RSZXN1bHQubmV0d29ya1N0YXR1cykgfHxcbiAgICAgICAgICAgIE5ldHdvcmtTdGF0dXMucmVhZHk7XG4gICAgICAgIHZhciByZXN1bHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgbGFzdFJlc3VsdCksIHsgbG9hZGluZzogaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0KG5ldHdvcmtTdGF0dXMpLCBuZXR3b3JrU3RhdHVzOiBuZXR3b3JrU3RhdHVzIH0pO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3ksIGZldGNoUG9saWN5ID0gX2EgPT09IHZvaWQgMCA/IFwiY2FjaGUtZmlyc3RcIiA6IF9hO1xuICAgICAgICBpZiAoXG4gICAgICAgIC8vIFRoZXNlIGZldGNoIHBvbGljaWVzIHNob3VsZCBuZXZlciBkZWxpdmVyIGRhdGEgZnJvbSB0aGUgY2FjaGUsIHVubGVzc1xuICAgICAgICAvLyByZWRlbGl2ZXJpbmcgYSBwcmV2aW91c2x5IGRlbGl2ZXJlZCByZXN1bHQuXG4gICAgICAgIHNraXBDYWNoZURhdGFGb3IoZmV0Y2hQb2xpY3kpIHx8XG4gICAgICAgICAgICAvLyBJZiB0aGlzLm9wdGlvbnMucXVlcnkgaGFzIEBjbGllbnQoYWx3YXlzOiB0cnVlKSBmaWVsZHMsIHdlIGNhbm5vdFxuICAgICAgICAgICAgLy8gdHJ1c3QgZGlmZi5yZXN1bHQsIHNpbmNlIGl0IHdhcyByZWFkIGZyb20gdGhlIGNhY2hlIHdpdGhvdXQgcnVubmluZ1xuICAgICAgICAgICAgLy8gbG9jYWwgcmVzb2x2ZXJzIChhbmQgaXQncyB0b28gbGF0ZSB0byBydW4gcmVzb2x2ZXJzIG5vdywgc2luY2Ugd2UgbXVzdFxuICAgICAgICAgICAgLy8gcmV0dXJuIGEgcmVzdWx0IHN5bmNocm9ub3VzbHkpLlxuICAgICAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIuZ2V0RG9jdW1lbnRJbmZvKHRoaXMucXVlcnkpLmhhc0ZvcmNlZFJlc29sdmVycykge1xuICAgICAgICAgICAgLy8gRmFsbCB0aHJvdWdoLlxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMud2FpdEZvck93blJlc3VsdCkge1xuICAgICAgICAgICAgLy8gVGhpcyB3b3VsZCB1c3VhbGx5IGJlIGEgcGFydCBvZiBgUXVlcnlJbmZvLmdldERpZmYoKWAuXG4gICAgICAgICAgICAvLyB3aGljaCB3ZSBza2lwIGluIHRoZSB3YWl0Rm9yT3duUmVzdWx0IGNhc2Ugc2luY2Ugd2UgYXJlIG5vdFxuICAgICAgICAgICAgLy8gaW50ZXJlc3RlZCBpbiB0aGUgZGlmZi5cbiAgICAgICAgICAgIHRoaXMucXVlcnlJbmZvW1widXBkYXRlV2F0Y2hcIl0oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkaWZmID0gdGhpcy5xdWVyeUluZm8uZ2V0RGlmZigpO1xuICAgICAgICAgICAgaWYgKGRpZmYuY29tcGxldGUgfHwgdGhpcy5vcHRpb25zLnJldHVyblBhcnRpYWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSBkaWZmLnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlcXVhbChyZXN1bHQuZGF0YSwge30pKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSB2b2lkIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlmZi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIC8vIFNpbWlsYXIgdG8gc2V0dGluZyByZXN1bHQucGFydGlhbCB0byBmYWxzZSwgYnV0IHRha2luZyBhZHZhbnRhZ2Ugb2YgdGhlXG4gICAgICAgICAgICAgICAgLy8gZmFsc2luZXNzIG9mIG1pc3NpbmcgZmllbGRzLlxuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQucGFydGlhbDtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZGlmZiBpcyBjb21wbGV0ZSwgYW5kIHdlJ3JlIHVzaW5nIGEgRmV0Y2hQb2xpY3kgdGhhdFxuICAgICAgICAgICAgICAgIC8vIHRlcm1pbmF0ZXMgYWZ0ZXIgYSBjb21wbGV0ZSBjYWNoZSByZWFkLCB3ZSBjYW4gYXNzdW1lIHRoZSBuZXh0IHJlc3VsdFxuICAgICAgICAgICAgICAgIC8vIHdlIHJlY2VpdmUgd2lsbCBoYXZlIE5ldHdvcmtTdGF0dXMucmVhZHkgYW5kICFsb2FkaW5nLlxuICAgICAgICAgICAgICAgIGlmIChkaWZmLmNvbXBsZXRlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5uZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLmxvYWRpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgKGZldGNoUG9saWN5ID09PSBcImNhY2hlLWZpcnN0XCIgfHwgZmV0Y2hQb2xpY3kgPT09IFwiY2FjaGUtb25seVwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQubmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMucmVhZHk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnBhcnRpYWwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBjaGVjayBmb3IgYm90aCBib3RoIGBlcnJvcmAgYW5kIGBlcnJvcnNgIGZpZWxkIGJlY2F1c2UgdGhlcmVcbiAgICAgICAgICAgIC8vIGFyZSBjYXNlcyB3aGVyZSBzb21ldGltZXMgYGVycm9yYCBpcyBzZXQsIGJ1dCBub3QgYGVycm9yc2AgYW5kXG4gICAgICAgICAgICAvLyB2aWNlLXZlcnNhLiBUaGlzIHdpbGwgYmUgdXBkYXRlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIHdoZW5cbiAgICAgICAgICAgIC8vIGBlcnJvcnNgIGlzIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgYGVycm9yYC5cbiAgICAgICAgICAgIGlmIChyZXN1bHQubmV0d29ya1N0YXR1cyA9PT0gTmV0d29ya1N0YXR1cy5yZWFkeSAmJlxuICAgICAgICAgICAgICAgIChyZXN1bHQuZXJyb3IgfHwgcmVzdWx0LmVycm9ycykpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQubmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMuZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJlxuICAgICAgICAgICAgICAgICFkaWZmLmNvbXBsZXRlICYmXG4gICAgICAgICAgICAgICAgIXRoaXMub3B0aW9ucy5wYXJ0aWFsUmVmZXRjaCAmJlxuICAgICAgICAgICAgICAgICFyZXN1bHQubG9hZGluZyAmJlxuICAgICAgICAgICAgICAgICFyZXN1bHQuZGF0YSAmJlxuICAgICAgICAgICAgICAgICFyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dNaXNzaW5nRmllbGRFcnJvcnMoZGlmZi5taXNzaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2F2ZUFzTGFzdFJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMYXN0UmVzdWx0KHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuZ2V0Q3VycmVudFJlc3VsdCA9IGZ1bmN0aW9uIChzYXZlQXNMYXN0UmVzdWx0KSB7XG4gICAgICAgIGlmIChzYXZlQXNMYXN0UmVzdWx0ID09PSB2b2lkIDApIHsgc2F2ZUFzTGFzdFJlc3VsdCA9IHRydWU7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMubWFza1Jlc3VsdCh0aGlzLmdldEN1cnJlbnRGdWxsUmVzdWx0KHNhdmVBc0xhc3RSZXN1bHQpKTtcbiAgICB9O1xuICAgIC8vIENvbXBhcmVzIG5ld1Jlc3VsdCB0byB0aGUgc25hcHNob3Qgd2UgdG9vayBvZiB0aGlzLmxhc3RSZXN1bHQgd2hlbiBpdCB3YXNcbiAgICAvLyBmaXJzdCByZWNlaXZlZC5cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLmlzRGlmZmVyZW50RnJvbUxhc3RSZXN1bHQgPSBmdW5jdGlvbiAobmV3UmVzdWx0LCB2YXJpYWJsZXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxhc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkb2N1bWVudEluZm8gPSB0aGlzLnF1ZXJ5TWFuYWdlci5nZXREb2N1bWVudEluZm8odGhpcy5xdWVyeSk7XG4gICAgICAgIHZhciBkYXRhTWFza2luZyA9IHRoaXMucXVlcnlNYW5hZ2VyLmRhdGFNYXNraW5nO1xuICAgICAgICB2YXIgcXVlcnkgPSBkYXRhTWFza2luZyA/IGRvY3VtZW50SW5mby5ub25SZWFjdGl2ZVF1ZXJ5IDogdGhpcy5xdWVyeTtcbiAgICAgICAgdmFyIHJlc3VsdElzRGlmZmVyZW50ID0gZGF0YU1hc2tpbmcgfHwgZG9jdW1lbnRJbmZvLmhhc05vbnJlYWN0aXZlRGlyZWN0aXZlID9cbiAgICAgICAgICAgICFlcXVhbEJ5UXVlcnkocXVlcnksIHRoaXMubGFzdC5yZXN1bHQsIG5ld1Jlc3VsdCwgdGhpcy52YXJpYWJsZXMpXG4gICAgICAgICAgICA6ICFlcXVhbCh0aGlzLmxhc3QucmVzdWx0LCBuZXdSZXN1bHQpO1xuICAgICAgICByZXR1cm4gKHJlc3VsdElzRGlmZmVyZW50IHx8ICh2YXJpYWJsZXMgJiYgIWVxdWFsKHRoaXMubGFzdC52YXJpYWJsZXMsIHZhcmlhYmxlcykpKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuZ2V0TGFzdCA9IGZ1bmN0aW9uIChrZXksIHZhcmlhYmxlc011c3RNYXRjaCkge1xuICAgICAgICB2YXIgbGFzdCA9IHRoaXMubGFzdDtcbiAgICAgICAgaWYgKGxhc3QgJiZcbiAgICAgICAgICAgIGxhc3Rba2V5XSAmJlxuICAgICAgICAgICAgKCF2YXJpYWJsZXNNdXN0TWF0Y2ggfHwgZXF1YWwobGFzdC52YXJpYWJsZXMsIHRoaXMudmFyaWFibGVzKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXN0W2tleV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIGBnZXRMYXN0UmVzdWx0YCB3aWxsIGJlIHJlbW92ZWQgaW4gQXBvbGxvIENsaWVudCA0LjAuIFBsZWFzZVxuICAgICAqIGRpc2NvbnRpbnVlIHVzaW5nIHRoaXMgbWV0aG9kLlxuICAgICAqL1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuZ2V0TGFzdFJlc3VsdCA9IGZ1bmN0aW9uICh2YXJpYWJsZXNNdXN0TWF0Y2gpIHtcbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdhcm5EZXByZWNhdGVkKFwiZ2V0TGFzdFJlc3VsdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2FybigyNCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXRMYXN0KFwicmVzdWx0XCIsIHZhcmlhYmxlc011c3RNYXRjaCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBgZ2V0TGFzdEVycm9yYCB3aWxsIGJlIHJlbW92ZWQgaW4gQXBvbGxvIENsaWVudCA0LjAuIFBsZWFzZVxuICAgICAqIGRpc2NvbnRpbnVlIHVzaW5nIHRoaXMgbWV0aG9kLlxuICAgICAqL1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuZ2V0TGFzdEVycm9yID0gZnVuY3Rpb24gKHZhcmlhYmxlc011c3RNYXRjaCkge1xuICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgd2FybkRlcHJlY2F0ZWQoXCJnZXRMYXN0RXJyb3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oMjUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGFzdChcImVycm9yXCIsIHZhcmlhYmxlc011c3RNYXRjaCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBgcmVzZXRMYXN0UmVzdWx0c2Agd2lsbCBiZSByZW1vdmVkIGluIEFwb2xsbyBDbGllbnQgNC4wLiBQbGVhc2VcbiAgICAgKiBkaXNjb250aW51ZSB1c2luZyB0aGlzIG1ldGhvZC5cbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlc2V0TGFzdFJlc3VsdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuRGVwcmVjYXRlZChcInJlc2V0TGFzdFJlc3VsdHNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oMjYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMubGFzdDtcbiAgICAgICAgdGhpcy5pc1Rvcm5Eb3duID0gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBgcmVzZXRRdWVyeVN0b3JlRXJyb3JzYCB3aWxsIGJlIHJlbW92ZWQgaW4gQXBvbGxvIENsaWVudCA0LjAuXG4gICAgICogUGxlYXNlIGRpc2NvbnRpbnVlIHVzaW5nIHRoaXMgbWV0aG9kLlxuICAgICAqL1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUucmVzZXRRdWVyeVN0b3JlRXJyb3JzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2FybigyNyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIucmVzZXRFcnJvcnModGhpcy5xdWVyeUlkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgdmFyaWFibGVzIG9mIHRoaXMgb2JzZXJ2YWJsZSBxdWVyeSwgYW5kIGZldGNoIHRoZSBuZXcgcmVzdWx0cy5cbiAgICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgcHJlZmVycmVkIG92ZXIgYHNldFZhcmlhYmxlc2AgaW4gbW9zdCB1c2UgY2FzZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFyaWFibGVzIC0gVGhlIG5ldyBzZXQgb2YgdmFyaWFibGVzLiBJZiB0aGVyZSBhcmUgbWlzc2luZyB2YXJpYWJsZXMsXG4gICAgICogdGhlIHByZXZpb3VzIHZhbHVlcyBvZiB0aG9zZSB2YXJpYWJsZXMgd2lsbCBiZSB1c2VkLlxuICAgICAqL1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUucmVmZXRjaCA9IGZ1bmN0aW9uICh2YXJpYWJsZXMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgcmVvYnNlcnZlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC8vIEFsd2F5cyBkaXNhYmxlIHBvbGxpbmcgZm9yIHJlZmV0Y2hlcy5cbiAgICAgICAgICAgIHBvbGxJbnRlcnZhbDogMCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVW5sZXNzIHRoZSBwcm92aWRlZCBmZXRjaFBvbGljeSBhbHdheXMgY29uc3VsdHMgdGhlIG5ldHdvcmtcbiAgICAgICAgLy8gKG5vLWNhY2hlLCBuZXR3b3JrLW9ubHksIG9yIGNhY2hlLWFuZC1uZXR3b3JrKSwgb3ZlcnJpZGUgaXQgd2l0aFxuICAgICAgICAvLyBuZXR3b3JrLW9ubHkgdG8gZm9yY2UgdGhlIHJlZmV0Y2ggZm9yIHRoaXMgZmV0Y2hRdWVyeSBjYWxsLlxuICAgICAgICB2YXIgZmV0Y2hQb2xpY3kgPSB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3k7XG4gICAgICAgIGlmIChmZXRjaFBvbGljeSA9PT0gXCJuby1jYWNoZVwiKSB7XG4gICAgICAgICAgICByZW9ic2VydmVPcHRpb25zLmZldGNoUG9saWN5ID0gXCJuby1jYWNoZVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVvYnNlcnZlT3B0aW9ucy5mZXRjaFBvbGljeSA9IFwibmV0d29yay1vbmx5XCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgdmFyaWFibGVzICYmIGhhc093blByb3BlcnR5LmNhbGwodmFyaWFibGVzLCBcInZhcmlhYmxlc1wiKSkge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5RGVmID0gZ2V0UXVlcnlEZWZpbml0aW9uKHRoaXMucXVlcnkpO1xuICAgICAgICAgICAgdmFyIHZhcnMgPSBxdWVyeURlZi52YXJpYWJsZURlZmluaXRpb25zO1xuICAgICAgICAgICAgaWYgKCF2YXJzIHx8ICF2YXJzLnNvbWUoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYudmFyaWFibGUubmFtZS52YWx1ZSA9PT0gXCJ2YXJpYWJsZXNcIjsgfSkpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKFxuICAgICAgICAgICAgICAgICAgICAyOCxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAoKF9hID0gcXVlcnlEZWYubmFtZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZhbHVlKSB8fCBxdWVyeURlZlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhcmlhYmxlcyAmJiAhZXF1YWwodGhpcy5vcHRpb25zLnZhcmlhYmxlcywgdmFyaWFibGVzKSkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyBvcHRpb25zIHdpdGggbmV3IHZhcmlhYmxlc1xuICAgICAgICAgICAgcmVvYnNlcnZlT3B0aW9ucy52YXJpYWJsZXMgPSB0aGlzLm9wdGlvbnMudmFyaWFibGVzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMub3B0aW9ucy52YXJpYWJsZXMpLCB2YXJpYWJsZXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVlcnlJbmZvLnJlc2V0TGFzdFdyaXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlb2JzZXJ2ZShyZW9ic2VydmVPcHRpb25zLCBOZXR3b3JrU3RhdHVzLnJlZmV0Y2gpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGhlbHBzIHlvdSBmZXRjaCB0aGUgbmV4dCBzZXQgb2YgcmVzdWx0cyBmb3IgYSBbcGFnaW5hdGVkIGxpc3QgZmllbGRdKGh0dHBzOi8vd3d3LmFwb2xsb2dyYXBocWwuY29tL2RvY3MvcmVhY3QvcGFnaW5hdGlvbi9jb3JlLWFwaS8pLlxuICAgICAqL1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuZmV0Y2hNb3JlID0gZnVuY3Rpb24gKGZldGNoTW9yZU9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNvbWJpbmVkT3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCAoZmV0Y2hNb3JlT3B0aW9ucy5xdWVyeSA/IGZldGNoTW9yZU9wdGlvbnMgOiAoX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMub3B0aW9ucyksIHsgcXVlcnk6IHRoaXMub3B0aW9ucy5xdWVyeSB9KSwgZmV0Y2hNb3JlT3B0aW9ucyksIHsgdmFyaWFibGVzOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5vcHRpb25zLnZhcmlhYmxlcyksIGZldGNoTW9yZU9wdGlvbnMudmFyaWFibGVzKSB9KSkpKSwgeyBcbiAgICAgICAgICAgIC8vIFRoZSBmZXRjaE1vcmUgcmVxdWVzdCBnb2VzIGltbWVkaWF0ZWx5IHRvIHRoZSBuZXR3b3JrIGFuZCBkb2VzXG4gICAgICAgICAgICAvLyBub3QgYXV0b21hdGljYWxseSB3cml0ZSBpdHMgcmVzdWx0IHRvIHRoZSBjYWNoZSAoaGVuY2Ugbm8tY2FjaGVcbiAgICAgICAgICAgIC8vIGluc3RlYWQgb2YgbmV0d29yay1vbmx5KSwgYmVjYXVzZSB3ZSBhbGxvdyB0aGUgY2FsbGVyIG9mXG4gICAgICAgICAgICAvLyBmZXRjaE1vcmUgdG8gcHJvdmlkZSBhbiB1cGRhdGVRdWVyeSBjYWxsYmFjayB0aGF0IGRldGVybWluZXMgaG93XG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBnZXRzIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLlxuICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IFwibm8tY2FjaGVcIiB9KTtcbiAgICAgICAgY29tYmluZWRPcHRpb25zLnF1ZXJ5ID0gdGhpcy50cmFuc2Zvcm1Eb2N1bWVudChjb21iaW5lZE9wdGlvbnMucXVlcnkpO1xuICAgICAgICB2YXIgcWlkID0gdGhpcy5xdWVyeU1hbmFnZXIuZ2VuZXJhdGVRdWVyeUlkKCk7XG4gICAgICAgIC8vIElmIGEgdGVtcG9yYXJ5IHF1ZXJ5IGlzIHBhc3NlZCB0byBgZmV0Y2hNb3JlYCwgd2UgZG9uJ3Qgd2FudCB0byBzdG9yZVxuICAgICAgICAvLyBpdCBhcyB0aGUgbGFzdCBxdWVyeSByZXN1bHQgc2luY2UgaXQgbWF5IGJlIGFuIG9wdGltaXplZCBxdWVyeSBmb3JcbiAgICAgICAgLy8gcGFnaW5hdGlvbi4gV2Ugd2lsbCBob3dldmVyIHJ1biB0aGUgdHJhbnNmb3JtcyBvbiB0aGUgb3JpZ2luYWwgZG9jdW1lbnRcbiAgICAgICAgLy8gYXMgd2VsbCBhcyB0aGUgZG9jdW1lbnQgcGFzc2VkIGluIGBmZXRjaE1vcmVPcHRpb25zYCB0byBlbnN1cmUgdGhlIGNhY2hlXG4gICAgICAgIC8vIHVzZXMgdGhlIG1vc3QgdXAtdG8tZGF0ZSBkb2N1bWVudCB3aGljaCBtYXkgcmVseSBvbiBydW50aW1lIGNvbmRpdGlvbmFscy5cbiAgICAgICAgdGhpcy5sYXN0UXVlcnkgPVxuICAgICAgICAgICAgZmV0Y2hNb3JlT3B0aW9ucy5xdWVyeSA/XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1Eb2N1bWVudCh0aGlzLm9wdGlvbnMucXVlcnkpXG4gICAgICAgICAgICAgICAgOiBjb21iaW5lZE9wdGlvbnMucXVlcnk7XG4gICAgICAgIC8vIFNpbXVsYXRlIGEgbG9hZGluZyByZXN1bHQgZm9yIHRoZSBvcmlnaW5hbCBxdWVyeSB3aXRoXG4gICAgICAgIC8vIHJlc3VsdC5uZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLmZldGNoTW9yZS5cbiAgICAgICAgdmFyIHF1ZXJ5SW5mbyA9IHRoaXMucXVlcnlJbmZvO1xuICAgICAgICB2YXIgb3JpZ2luYWxOZXR3b3JrU3RhdHVzID0gcXVlcnlJbmZvLm5ldHdvcmtTdGF0dXM7XG4gICAgICAgIHF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5mZXRjaE1vcmU7XG4gICAgICAgIGlmIChjb21iaW5lZE9wdGlvbnMubm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmUoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXBkYXRlZFF1ZXJ5U2V0ID0gbmV3IFNldCgpO1xuICAgICAgICB2YXIgdXBkYXRlUXVlcnkgPSBmZXRjaE1vcmVPcHRpb25zID09PSBudWxsIHx8IGZldGNoTW9yZU9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZldGNoTW9yZU9wdGlvbnMudXBkYXRlUXVlcnk7XG4gICAgICAgIHZhciBpc0NhY2hlZCA9IHRoaXMub3B0aW9ucy5mZXRjaFBvbGljeSAhPT0gXCJuby1jYWNoZVwiO1xuICAgICAgICBpZiAoIWlzQ2FjaGVkKSB7XG4gICAgICAgICAgICBpbnZhcmlhbnQodXBkYXRlUXVlcnksIDI5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXJcbiAgICAgICAgICAgIC5mZXRjaFF1ZXJ5KHFpZCwgY29tYmluZWRPcHRpb25zLCBOZXR3b3JrU3RhdHVzLmZldGNoTW9yZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChmZXRjaE1vcmVSZXN1bHQpIHtcbiAgICAgICAgICAgIF90aGlzLnF1ZXJ5TWFuYWdlci5yZW1vdmVRdWVyeShxaWQpO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLmZldGNoTW9yZSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzID0gb3JpZ2luYWxOZXR3b3JrU3RhdHVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQ2FjaGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gUGVyZm9ybWluZyB0aGlzIGNhY2hlIHVwZGF0ZSBpbnNpZGUgYSBjYWNoZS5iYXRjaCB0cmFuc2FjdGlvbiBlbnN1cmVzXG4gICAgICAgICAgICAgICAgLy8gYW55IGFmZmVjdGVkIGNhY2hlLndhdGNoIHdhdGNoZXJzIGFyZSBub3RpZmllZCBhdCBtb3N0IG9uY2UgYWJvdXQgYW55XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlcy4gTW9zdCB3YXRjaGVycyB3aWxsIGJlIHVzaW5nIHRoZSBRdWVyeUluZm8gY2xhc3MsIHdoaWNoXG4gICAgICAgICAgICAgICAgLy8gcmVzcG9uZHMgdG8gbm90aWZpY2F0aW9ucyBieSBjYWxsaW5nIHJlb2JzZXJ2ZUNhY2hlRmlyc3QgdG8gZGVsaXZlclxuICAgICAgICAgICAgICAgIC8vIGZldGNoTW9yZSBjYWNoZSByZXN1bHRzIGJhY2sgdG8gdGhpcyBPYnNlcnZhYmxlUXVlcnkuXG4gICAgICAgICAgICAgICAgX3RoaXMucXVlcnlNYW5hZ2VyLmNhY2hlLmJhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVRdWVyeSA9IGZldGNoTW9yZU9wdGlvbnMudXBkYXRlUXVlcnk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS51cGRhdGVRdWVyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBfdGhpcy5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBfdGhpcy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWlzdGljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocHJldmlvdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZVF1ZXJ5KHByZXZpb3VzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaE1vcmVSZXN1bHQ6IGZldGNoTW9yZVJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBjb21iaW5lZE9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIHVzaW5nIGEgZmllbGQgcG9saWN5IGluc3RlYWQgb2YgdXBkYXRlUXVlcnksIHRoZSBvbmx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpbmcgd2UgbmVlZCB0byBkbyBpcyB3cml0ZSB0aGUgbmV3IGRhdGEgdG8gdGhlIGNhY2hlIHVzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tYmluZWRPcHRpb25zLnZhcmlhYmxlcyAoaW5zdGVhZCBvZiB0aGlzLnZhcmlhYmxlcywgd2hpY2ggaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGF0IHRoaXMudXBkYXRlUXVlcnkgdXNlcywgYmVjYXVzZSBpdCB3b3JrcyBieSBhYnVzaW5nIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yaWdpbmFsIGZpZWxkIHZhbHVlLCBrZXllZCBieSB0aGUgb3JpZ2luYWwgdmFyaWFibGVzKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS53cml0ZVF1ZXJ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IGNvbWJpbmVkT3B0aW9ucy5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBjb21iaW5lZE9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBmZXRjaE1vcmVSZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25XYXRjaFVwZGF0ZWQ6IGZ1bmN0aW9uICh3YXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBEb2N1bWVudE5vZGUgYXNzb2NpYXRlZCB3aXRoIGFueSB3YXRjaGVkIHF1ZXJ5IHdob3NlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIHdlcmUgdXBkYXRlZCBieSB0aGUgY2FjaGUgd3JpdGVzIGFib3ZlLlxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFF1ZXJ5U2V0LmFkZCh3YXRjaC5xdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBhIHBvc3NpYmlsaXR5IGBsYXN0UmVzdWx0YCBtYXkgbm90IGJlIHNldCB3aGVuXG4gICAgICAgICAgICAgICAgLy8gYGZldGNoTW9yZWAgaXMgY2FsbGVkIHdoaWNoIHdvdWxkIGNhdXNlIHRoaXMgdG8gY3Jhc2guIFRoaXMgc2hvdWxkXG4gICAgICAgICAgICAgICAgLy8gb25seSBoYXBwZW4gaWYgd2UgaGF2ZW4ndCBwcmV2aW91c2x5IHJlcG9ydGVkIGEgcmVzdWx0LiBXZSBkb24ndFxuICAgICAgICAgICAgICAgIC8vIHF1aXRlIGtub3cgd2hhdCB0aGUgcmlnaHQgYmVoYXZpb3Igc2hvdWxkIGJlIGhlcmUgc2luY2UgdGhpcyBibG9ja1xuICAgICAgICAgICAgICAgIC8vIG9mIGNvZGUgcnVucyBhZnRlciB0aGUgZmV0Y2ggcmVzdWx0IGhhcyBleGVjdXRlZCBvbiB0aGUgbmV0d29yay5cbiAgICAgICAgICAgICAgICAvLyBXZSBwbGFuIHRvIGxldCBpdCBjcmFzaCBpbiB0aGUgbWVhbnRpbWUuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBnZXQgYnVnIHJlcG9ydHMgZHVlIHRvIHRoZSBgZGF0YWAgcHJvcGVydHkgYWNjZXNzIG9uXG4gICAgICAgICAgICAgICAgLy8gdW5kZWZpbmVkLCB0aGlzIHNob3VsZCBnaXZlIHVzIGEgcmVhbC13b3JsZCBzY2VuYXJpbyB0aGF0IHdlIGNhblxuICAgICAgICAgICAgICAgIC8vIHVzZSB0byB0ZXN0IGFnYWluc3QgYW5kIGRldGVybWluZSB0aGUgcmlnaHQgYmVoYXZpb3IuIElmIHdlIGRvIGVuZFxuICAgICAgICAgICAgICAgIC8vIHVwIGNoYW5naW5nIHRoaXMgYmVoYXZpb3IsIHRoaXMgbWF5IHJlcXVpcmUsIGZvciBleGFtcGxlLCBhblxuICAgICAgICAgICAgICAgIC8vIGFkanVzdG1lbnQgdG8gdGhlIHR5cGVzIG9uIGB1cGRhdGVRdWVyeWAgc2luY2UgdGhhdCBmdW5jdGlvblxuICAgICAgICAgICAgICAgIC8vIGV4cGVjdHMgdGhhdCB0aGUgZmlyc3QgYXJndW1lbnQgYWx3YXlzIGNvbnRhaW5zIHByZXZpb3VzIHJlc3VsdFxuICAgICAgICAgICAgICAgIC8vIGRhdGEsIGJ1dCBub3QgYHVuZGVmaW5lZGAuXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RSZXN1bHQgPSBfdGhpcy5nZXRMYXN0KFwicmVzdWx0XCIpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gdXBkYXRlUXVlcnkobGFzdFJlc3VsdC5kYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgIGZldGNoTW9yZVJlc3VsdDogZmV0Y2hNb3JlUmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogY29tYmluZWRPcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZXBvcnRSZXN1bHQoX19hc3NpZ24oX19hc3NpZ24oe30sIGxhc3RSZXN1bHQpLCB7IG5ldHdvcmtTdGF0dXM6IG9yaWdpbmFsTmV0d29ya1N0YXR1cywgbG9hZGluZzogaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0KG9yaWdpbmFsTmV0d29ya1N0YXR1cyksIGRhdGE6IGRhdGEgfSksIF90aGlzLnZhcmlhYmxlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubWFza1Jlc3VsdChmZXRjaE1vcmVSZXN1bHQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gSW4gY2FzZSB0aGUgY2FjaGUgd3JpdGVzIGFib3ZlIGRpZCBub3QgZ2VuZXJhdGUgYSBicm9hZGNhc3RcbiAgICAgICAgICAgIC8vIG5vdGlmaWNhdGlvbiAod2hpY2ggd291bGQgaGF2ZSBiZWVuIGludGVyY2VwdGVkIGJ5IG9uV2F0Y2hVcGRhdGVkKSxcbiAgICAgICAgICAgIC8vIGxpa2VseSBiZWNhdXNlIHRoZSB3cml0dGVuIGRhdGEgd2VyZSB0aGUgc2FtZSBhcyB3aGF0IHdhcyBhbHJlYWR5IGluXG4gICAgICAgICAgICAvLyB0aGUgY2FjaGUsIHdlIHN0aWxsIHdhbnQgZmV0Y2hNb3JlIHRvIGRlbGl2ZXIgaXRzIGZpbmFsIGxvYWRpbmc6ZmFsc2VcbiAgICAgICAgICAgIC8vIHJlc3VsdCB3aXRoIHRoZSB1bmNoYW5nZWQgZGF0YS5cbiAgICAgICAgICAgIGlmIChpc0NhY2hlZCAmJiAhdXBkYXRlZFF1ZXJ5U2V0LmhhcyhfdGhpcy5xdWVyeSkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5yZW9ic2VydmVDYWNoZUZpcnN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy8gWFhYIHRoZSBzdWJzY3JpcHRpb24gdmFyaWFibGVzIGFyZSBzZXBhcmF0ZSBmcm9tIHRoZSBxdWVyeSB2YXJpYWJsZXMuXG4gICAgLy8gaWYgeW91IHdhbnQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbiB2YXJpYWJsZXMsIHJpZ2h0IG5vdyB5b3UgaGF2ZSB0byBkbyB0aGF0IHNlcGFyYXRlbHksXG4gICAgLy8gYW5kIHlvdSBjYW4gb25seSBkbyBpdCBieSBzdG9wcGluZyB0aGUgc3Vic2NyaXB0aW9uIGFuZCB0aGVuIHN1YnNjcmliaW5nIGFnYWluIHdpdGggbmV3IHZhcmlhYmxlcy5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZW5hYmxlcyB5b3UgdG8gZXhlY3V0ZSBhIFtzdWJzY3JpcHRpb25dKGh0dHBzOi8vd3d3LmFwb2xsb2dyYXBocWwuY29tL2RvY3MvcmVhY3QvZGF0YS9zdWJzY3JpcHRpb25zLyksIHVzdWFsbHkgdG8gc3Vic2NyaWJlIHRvIHNwZWNpZmljIGZpZWxkcyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhlIHF1ZXJ5LlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIF9hbm90aGVyXyBmdW5jdGlvbiB0aGF0IHlvdSBjYW4gY2FsbCB0byB0ZXJtaW5hdGUgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnN1YnNjcmliZVRvTW9yZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnF1ZXJ5TWFuYWdlclxuICAgICAgICAgICAgLnN0YXJ0R3JhcGhRTFN1YnNjcmlwdGlvbih7XG4gICAgICAgICAgICBxdWVyeTogb3B0aW9ucy5kb2N1bWVudCxcbiAgICAgICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgICBjb250ZXh0OiBvcHRpb25zLmNvbnRleHQsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChzdWJzY3JpcHRpb25EYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVwZGF0ZVF1ZXJ5ID0gb3B0aW9ucy51cGRhdGVRdWVyeTtcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlUXVlcnkoZnVuY3Rpb24gKHByZXZpb3VzLCB1cGRhdGVPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlUXVlcnkocHJldmlvdXMsIF9fYXNzaWduKHsgc3Vic2NyaXB0aW9uRGF0YTogc3Vic2NyaXB0aW9uRGF0YSB9LCB1cGRhdGVPcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQuZXJyb3IoMzAsIGVycik7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZChzdWJzY3JpcHRpb24pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnN1YnNjcmlwdGlvbnMuZGVsZXRlKHN1YnNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIGBzZXRPcHRpb25zYCB3aWxsIGJlIHJlbW92ZWQgaW4gQXBvbGxvIENsaWVudCA0LjAuIFBsZWFzZSB1c2VcbiAgICAgKiBgb2JzZXJ2YWJsZVF1ZXJ5LnJlb2JzZXJ2ZShuZXdPcHRpb25zKWAgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiAobmV3T3B0aW9ucykge1xuICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgd2FyblJlbW92ZWRPcHRpb24obmV3T3B0aW9ucywgXCJjYW5vbml6ZVJlc3VsdHNcIiwgXCJzZXRPcHRpb25zXCIpO1xuICAgICAgICAgICAgd2FybkRlcHJlY2F0ZWQoXCJzZXRPcHRpb25zXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKDMxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlb2JzZXJ2ZShuZXdPcHRpb25zKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuc2lsZW50U2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChuZXdPcHRpb25zKSB7XG4gICAgICAgIHZhciBtZXJnZWRPcHRpb25zID0gY29tcGFjdCh0aGlzLm9wdGlvbnMsIG5ld09wdGlvbnMgfHwge30pO1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBtZXJnZWRPcHRpb25zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgdmFyaWFibGVzIG9mIHRoaXMgb2JzZXJ2YWJsZSBxdWVyeSwgYW5kIGZldGNoIHRoZSBuZXcgcmVzdWx0c1xuICAgICAqIGlmIHRoZXkndmUgY2hhbmdlZC4gTW9zdCB1c2VycyBzaG91bGQgcHJlZmVyIGByZWZldGNoYCBpbnN0ZWFkIG9mXG4gICAgICogYHNldFZhcmlhYmxlc2AgaW4gb3JkZXIgdG8gdG8gYmUgcHJvcGVybHkgbm90aWZpZWQgb2YgcmVzdWx0cyBldmVuIHdoZW5cbiAgICAgKiB0aGV5IGNvbWUgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBOb3RlOiB0aGUgYG5leHRgIGNhbGxiYWNrIHdpbGwgKm5vdCogZmlyZSBpZiB0aGUgdmFyaWFibGVzIGhhdmUgbm90IGNoYW5nZWRcbiAgICAgKiBvciBpZiB0aGUgcmVzdWx0IGlzIGNvbWluZyBmcm9tIGNhY2hlLlxuICAgICAqXG4gICAgICogTm90ZTogdGhlIHByb21pc2Ugd2lsbCByZXR1cm4gdGhlIG9sZCByZXN1bHRzIGltbWVkaWF0ZWx5IGlmIHRoZSB2YXJpYWJsZXNcbiAgICAgKiBoYXZlIG5vdCBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogTm90ZTogdGhlIHByb21pc2Ugd2lsbCByZXR1cm4gbnVsbCBpbW1lZGlhdGVseSBpZiB0aGUgcXVlcnkgaXMgbm90IGFjdGl2ZVxuICAgICAqICh0aGVyZSBhcmUgbm8gc3Vic2NyaWJlcnMpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhcmlhYmxlcyAtIFRoZSBuZXcgc2V0IG9mIHZhcmlhYmxlcy4gSWYgdGhlcmUgYXJlIG1pc3NpbmcgdmFyaWFibGVzLFxuICAgICAqIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgdGhvc2UgdmFyaWFibGVzIHdpbGwgYmUgdXNlZC5cbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnNldFZhcmlhYmxlcyA9IGZ1bmN0aW9uICh2YXJpYWJsZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGVxdWFsKHRoaXMudmFyaWFibGVzLCB2YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vIG9ic2VydmVycywgdGhlbiB3ZSBkb24ndCBhY3R1YWxseSB3YW50IHRvIG1ha2UgYSBuZXR3b3JrXG4gICAgICAgICAgICAvLyByZXF1ZXN0LiBBcyBzb29uIGFzIHNvbWVvbmUgb2JzZXJ2ZXMgdGhlIHF1ZXJ5LCB0aGUgcmVxdWVzdCB3aWxsIGtpY2tcbiAgICAgICAgICAgIC8vIG9mZi4gRm9yIG5vdywgd2UganVzdCBzdG9yZSBhbnkgY2hhbmdlcy4gKFNlZSAjMTA3NylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5zaXplID9cbiAgICAgICAgICAgICAgICBtdXRlRGVwcmVjYXRpb25zKFwib2JzZXJ2YWJsZVF1ZXJ5LnJlc3VsdFwiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZXN1bHQoKTsgfSlcbiAgICAgICAgICAgICAgICA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9ucy52YXJpYWJsZXMgPSB2YXJpYWJsZXM7XG4gICAgICAgIC8vIFNlZSBjb21tZW50IGFib3ZlXG4gICAgICAgIGlmICghdGhpcy5vYnNlcnZlcnMuc2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlb2JzZXJ2ZSh7XG4gICAgICAgICAgICAvLyBSZXNldCBvcHRpb25zLmZldGNoUG9saWN5IHRvIGl0cyBvcmlnaW5hbCB2YWx1ZS5cbiAgICAgICAgICAgIGZldGNoUG9saWN5OiB0aGlzLm9wdGlvbnMuaW5pdGlhbEZldGNoUG9saWN5LFxuICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgIH0sIE5ldHdvcmtTdGF0dXMuc2V0VmFyaWFibGVzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBlbmFibGVzIHlvdSB0byB1cGRhdGUgdGhlIHF1ZXJ5J3MgY2FjaGVkIHJlc3VsdCB3aXRob3V0IGV4ZWN1dGluZyBhIGZvbGxvd3VwIEdyYXBoUUwgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogU2VlIFt1c2luZyB1cGRhdGVRdWVyeSBhbmQgdXBkYXRlRnJhZ21lbnRdKGh0dHBzOi8vd3d3LmFwb2xsb2dyYXBocWwuY29tL2RvY3MvcmVhY3QvY2FjaGluZy9jYWNoZS1pbnRlcmFjdGlvbi8jdXNpbmctdXBkYXRlcXVlcnktYW5kLXVwZGF0ZWZyYWdtZW50KSBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnVwZGF0ZVF1ZXJ5ID0gZnVuY3Rpb24gKG1hcEZuKSB7XG4gICAgICAgIHZhciBxdWVyeU1hbmFnZXIgPSB0aGlzLnF1ZXJ5TWFuYWdlcjtcbiAgICAgICAgdmFyIF9hID0gcXVlcnlNYW5hZ2VyLmNhY2hlLmRpZmYoe1xuICAgICAgICAgICAgcXVlcnk6IHRoaXMub3B0aW9ucy5xdWVyeSxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdGhpcy52YXJpYWJsZXMsXG4gICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgIG9wdGltaXN0aWM6IGZhbHNlLFxuICAgICAgICB9KSwgcmVzdWx0ID0gX2EucmVzdWx0LCBjb21wbGV0ZSA9IF9hLmNvbXBsZXRlO1xuICAgICAgICB2YXIgbmV3UmVzdWx0ID0gbWFwRm4ocmVzdWx0LCB7XG4gICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLFxuICAgICAgICAgICAgY29tcGxldGU6ICEhY29tcGxldGUsXG4gICAgICAgICAgICBwcmV2aW91c0RhdGE6IHJlc3VsdCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChuZXdSZXN1bHQpIHtcbiAgICAgICAgICAgIHF1ZXJ5TWFuYWdlci5jYWNoZS53cml0ZVF1ZXJ5KHtcbiAgICAgICAgICAgICAgICBxdWVyeTogdGhpcy5vcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgICAgIGRhdGE6IG5ld1Jlc3VsdCxcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBxdWVyeU1hbmFnZXIuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgaW5zdHJ1Y3RzIHRoZSBxdWVyeSB0byBiZWdpbiByZS1leGVjdXRpbmcgYXQgYSBzcGVjaWZpZWQgaW50ZXJ2YWwgKGluIG1pbGxpc2Vjb25kcykuXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5zdGFydFBvbGxpbmcgPSBmdW5jdGlvbiAocG9sbEludGVydmFsKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5wb2xsSW50ZXJ2YWwgPSBwb2xsSW50ZXJ2YWw7XG4gICAgICAgIHRoaXMudXBkYXRlUG9sbGluZygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGluc3RydWN0cyB0aGUgcXVlcnkgdG8gc3RvcCBwb2xsaW5nIGFmdGVyIGEgcHJldmlvdXMgY2FsbCB0byBgc3RhcnRQb2xsaW5nYC5cbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnN0b3BQb2xsaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMucG9sbEludGVydmFsID0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgfTtcbiAgICAvLyBVcGRhdGUgb3B0aW9ucy5mZXRjaFBvbGljeSBhY2NvcmRpbmcgdG8gb3B0aW9ucy5uZXh0RmV0Y2hQb2xpY3kuXG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5hcHBseU5leHRGZXRjaFBvbGljeSA9IGZ1bmN0aW9uIChyZWFzb24sIFxuICAgIC8vIEl0J3MgcG9zc2libGUgdG8gdXNlIHRoaXMgbWV0aG9kIHRvIGFwcGx5IG9wdGlvbnMubmV4dEZldGNoUG9saWN5IHRvXG4gICAgLy8gb3B0aW9ucy5mZXRjaFBvbGljeSBldmVuIGlmIG9wdGlvbnMgIT09IHRoaXMub3B0aW9ucywgdGhvdWdoIHRoYXQgaGFwcGVuc1xuICAgIC8vIG1vc3Qgb2Z0ZW4gd2hlbiB0aGUgb3B0aW9ucyBhcmUgdGVtcG9yYXJ5LCB1c2VkIGZvciBvbmx5IG9uZSByZXF1ZXN0IGFuZFxuICAgIC8vIHRoZW4gdGhyb3duIGF3YXksIHNvIG5leHRGZXRjaFBvbGljeSBtYXkgbm90IGVuZCB1cCBtYXR0ZXJpbmcuXG4gICAgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucy5uZXh0RmV0Y2hQb2xpY3kpIHtcbiAgICAgICAgICAgIHZhciBfYSA9IG9wdGlvbnMuZmV0Y2hQb2xpY3ksIGZldGNoUG9saWN5ID0gX2EgPT09IHZvaWQgMCA/IFwiY2FjaGUtZmlyc3RcIiA6IF9hLCBfYiA9IG9wdGlvbnMuaW5pdGlhbEZldGNoUG9saWN5LCBpbml0aWFsRmV0Y2hQb2xpY3kgPSBfYiA9PT0gdm9pZCAwID8gZmV0Y2hQb2xpY3kgOiBfYjtcbiAgICAgICAgICAgIGlmIChmZXRjaFBvbGljeSA9PT0gXCJzdGFuZGJ5XCIpIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nLCBsZWF2aW5nIG9wdGlvbnMuZmV0Y2hQb2xpY3kgdW5jaGFuZ2VkLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMubmV4dEZldGNoUG9saWN5ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHNvbWVvbmUgY2hvb3NlcyBcImNhY2hlLWFuZC1uZXR3b3JrXCIgb3IgXCJuZXR3b3JrLW9ubHlcIiBhcyB0aGVpclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWwgRmV0Y2hQb2xpY3ksIHRoZXkgb2Z0ZW4gZG8gbm90IHdhbnQgZnV0dXJlIGNhY2hlIHVwZGF0ZXMgdG9cbiAgICAgICAgICAgICAgICAvLyB0cmlnZ2VyIHVuY29uZGl0aW9uYWwgbmV0d29yayByZXF1ZXN0cywgd2hpY2ggaXMgd2hhdCByZXBlYXRlZGx5XG4gICAgICAgICAgICAgICAgLy8gYXBwbHlpbmcgdGhlIFwiY2FjaGUtYW5kLW5ldHdvcmtcIiBvciBcIm5ldHdvcmstb25seVwiIHBvbGljaWVzIHdvdWxkXG4gICAgICAgICAgICAgICAgLy8gc2VlbSB0byBpbXBseS4gSW5zdGVhZCwgd2hlbiB0aGUgY2FjaGUgcmVwb3J0cyBhbiB1cGRhdGUgYWZ0ZXIgdGhlXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbCBuZXR3b3JrIHJlcXVlc3QsIGl0IG1heSBiZSBkZXNpcmFibGUgZm9yIHN1YnNlcXVlbnQgbmV0d29ya1xuICAgICAgICAgICAgICAgIC8vIHJlcXVlc3RzIHRvIGJlIHRyaWdnZXJlZCBvbmx5IGlmIHRoZSBjYWNoZSByZXN1bHQgaXMgaW5jb21wbGV0ZS4gVG9cbiAgICAgICAgICAgICAgICAvLyB0aGF0IGVuZCwgdGhlIG9wdGlvbnMubmV4dEZldGNoUG9saWN5IG9wdGlvbiBwcm92aWRlcyBhbiBlYXN5IHdheSB0b1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBvcHRpb25zLmZldGNoUG9saWN5IGFmdGVyIHRoZSBpbml0aWFsIG5ldHdvcmsgcmVxdWVzdCwgd2l0aG91dFxuICAgICAgICAgICAgICAgIC8vIGhhdmluZyB0byBjYWxsIG9ic2VydmFibGVRdWVyeS5zZXRPcHRpb25zLlxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmV0Y2hQb2xpY3kgPSBvcHRpb25zLm5leHRGZXRjaFBvbGljeShmZXRjaFBvbGljeSwge1xuICAgICAgICAgICAgICAgICAgICByZWFzb246IHJlYXNvbixcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZTogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbEZldGNoUG9saWN5OiBpbml0aWFsRmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZWFzb24gPT09IFwidmFyaWFibGVzLWNoYW5nZWRcIikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmV0Y2hQb2xpY3kgPSBpbml0aWFsRmV0Y2hQb2xpY3k7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmZldGNoUG9saWN5ID0gb3B0aW9ucy5uZXh0RmV0Y2hQb2xpY3k7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZmV0Y2hQb2xpY3k7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24gKG9wdGlvbnMsIG5ld05ldHdvcmtTdGF0dXMsIHF1ZXJ5KSB7XG4gICAgICAgIC8vIFRPRE8gTWFrZSBzdXJlIHdlIHVwZGF0ZSB0aGUgbmV0d29ya1N0YXR1cyAoYW5kIGluZmVyIGZldGNoVmFyaWFibGVzKVxuICAgICAgICAvLyBiZWZvcmUgYWN0dWFsbHkgY29tbWl0dGluZyB0byB0aGUgZmV0Y2guXG4gICAgICAgIHZhciBxdWVyeUluZm8gPSB0aGlzLl9nZXRPckNyZWF0ZVF1ZXJ5KCk7XG4gICAgICAgIHF1ZXJ5SW5mby5zZXRPYnNlcnZhYmxlUXVlcnkodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlcltcImZldGNoQ29uY2FzdFdpdGhJbmZvXCJdKHF1ZXJ5SW5mbywgb3B0aW9ucywgbmV3TmV0d29ya1N0YXR1cywgcXVlcnkpO1xuICAgIH07XG4gICAgLy8gVHVybnMgcG9sbGluZyBvbiBvciBvZmYgYmFzZWQgb24gdGhpcy5vcHRpb25zLnBvbGxJbnRlcnZhbC5cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnVwZGF0ZVBvbGxpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vIEF2b2lkIHBvbGxpbmcgaW4gU1NSIG1vZGVcbiAgICAgICAgaWYgKHRoaXMucXVlcnlNYW5hZ2VyLnNzck1vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBwb2xsaW5nSW5mbyA9IF9hLnBvbGxpbmdJbmZvLCBwb2xsSW50ZXJ2YWwgPSBfYS5vcHRpb25zLnBvbGxJbnRlcnZhbDtcbiAgICAgICAgaWYgKCFwb2xsSW50ZXJ2YWwgfHwgIXRoaXMuaGFzT2JzZXJ2ZXJzKCkpIHtcbiAgICAgICAgICAgIGlmIChwb2xsaW5nSW5mbykge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChwb2xsaW5nSW5mby50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wb2xsaW5nSW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9sbGluZ0luZm8gJiYgcG9sbGluZ0luZm8uaW50ZXJ2YWwgPT09IHBvbGxJbnRlcnZhbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGludmFyaWFudChwb2xsSW50ZXJ2YWwsIDMyKTtcbiAgICAgICAgdmFyIGluZm8gPSBwb2xsaW5nSW5mbyB8fCAodGhpcy5wb2xsaW5nSW5mbyA9IHt9KTtcbiAgICAgICAgaW5mby5pbnRlcnZhbCA9IHBvbGxJbnRlcnZhbDtcbiAgICAgICAgdmFyIG1heWJlRmV0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgaWYgKF90aGlzLnBvbGxpbmdJbmZvKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQoX3RoaXMucXVlcnlJbmZvLm5ldHdvcmtTdGF0dXMpICYmXG4gICAgICAgICAgICAgICAgICAgICEoKF9iID0gKF9hID0gX3RoaXMub3B0aW9ucykuc2tpcFBvbGxBdHRlbXB0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlb2JzZXJ2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3N0IGZldGNoUG9saWN5IG9wdGlvbnMgZG9uJ3QgbWFrZSBzZW5zZSB0byB1c2UgaW4gYSBwb2xsaW5nIGNvbnRleHQsIGFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VycyB3b3VsZG4ndCB3YW50IHRvIGJlIHBvbGxpbmcgdGhlIGNhY2hlIGRpcmVjdGx5LiBIb3dldmVyLCBuZXR3b3JrLW9ubHkgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuby1jYWNoZSBhcmUgYm90aCB1c2VmdWwgZm9yIHdoZW4gdGhlIHVzZXIgd2FudHMgdG8gY29udHJvbCB3aGV0aGVyIG9yIG5vdCB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbGxlZCByZXN1bHRzIGFyZSB3cml0dGVuIHRvIHRoZSBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUG9saWN5OiBfdGhpcy5vcHRpb25zLmluaXRpYWxGZXRjaFBvbGljeSA9PT0gXCJuby1jYWNoZVwiID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5vLWNhY2hlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwibmV0d29yay1vbmx5XCIsXG4gICAgICAgICAgICAgICAgICAgIH0sIE5ldHdvcmtTdGF0dXMucG9sbCkudGhlbihwb2xsLCBwb2xsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvbGwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBwb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZm8gPSBfdGhpcy5wb2xsaW5nSW5mbztcbiAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGluZm8udGltZW91dCk7XG4gICAgICAgICAgICAgICAgaW5mby50aW1lb3V0ID0gc2V0VGltZW91dChtYXliZUZldGNoLCBpbmZvLmludGVydmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcG9sbCgpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS51cGRhdGVMYXN0UmVzdWx0ID0gZnVuY3Rpb24gKG5ld1Jlc3VsdCwgdmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh2YXJpYWJsZXMgPT09IHZvaWQgMCkgeyB2YXJpYWJsZXMgPSB0aGlzLnZhcmlhYmxlczsgfVxuICAgICAgICB2YXIgZXJyb3IgPSBtdXRlRGVwcmVjYXRpb25zKFwiZ2V0TGFzdEVycm9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRMYXN0RXJyb3IoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFByZXNlcnZlIHRoaXMubGFzdC5lcnJvciB1bmxlc3MgdGhlIHZhcmlhYmxlcyBoYXZlIGNoYW5nZWQuXG4gICAgICAgIGlmIChlcnJvciAmJiB0aGlzLmxhc3QgJiYgIWVxdWFsKHZhcmlhYmxlcywgdGhpcy5sYXN0LnZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgIGVycm9yID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAodGhpcy5sYXN0ID0gX19hc3NpZ24oeyByZXN1bHQ6IHRoaXMucXVlcnlNYW5hZ2VyLmFzc3VtZUltbXV0YWJsZVJlc3VsdHMgP1xuICAgICAgICAgICAgICAgIG5ld1Jlc3VsdFxuICAgICAgICAgICAgICAgIDogY2xvbmVEZWVwKG5ld1Jlc3VsdCksIHZhcmlhYmxlczogdmFyaWFibGVzIH0sIChlcnJvciA/IHsgZXJyb3I6IGVycm9yIH0gOiBudWxsKSkpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5yZW9ic2VydmVBc0NvbmNhc3QgPSBmdW5jdGlvbiAobmV3T3B0aW9ucywgbmV3TmV0d29ya1N0YXR1cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzVG9ybkRvd24gPSBmYWxzZTtcbiAgICAgICAgdmFyIHVzZURpc3Bvc2FibGVDb25jYXN0ID0gXG4gICAgICAgIC8vIFJlZmV0Y2hpbmcgdXNlcyBhIGRpc3Bvc2FibGUgQ29uY2FzdCB0byBhbGxvdyByZWZldGNoZXMgdXNpbmcgZGlmZmVyZW50XG4gICAgICAgIC8vIG9wdGlvbnMvdmFyaWFibGVzLCB3aXRob3V0IHBlcm1hbmVudGx5IGFsdGVyaW5nIHRoZSBvcHRpb25zIG9mIHRoZVxuICAgICAgICAvLyBvcmlnaW5hbCBPYnNlcnZhYmxlUXVlcnkuXG4gICAgICAgIG5ld05ldHdvcmtTdGF0dXMgPT09IE5ldHdvcmtTdGF0dXMucmVmZXRjaCB8fFxuICAgICAgICAgICAgLy8gVGhlIGZldGNoTW9yZSBtZXRob2QgZG9lcyBub3QgYWN0dWFsbHkgY2FsbCB0aGUgcmVvYnNlcnZlIG1ldGhvZCwgYnV0LFxuICAgICAgICAgICAgLy8gaWYgaXQgZGlkLCBpdCB3b3VsZCBkZWZpbml0ZWx5IHVzZSBhIGRpc3Bvc2FibGUgQ29uY2FzdC5cbiAgICAgICAgICAgIG5ld05ldHdvcmtTdGF0dXMgPT09IE5ldHdvcmtTdGF0dXMuZmV0Y2hNb3JlIHx8XG4gICAgICAgICAgICAvLyBQb2xsaW5nIHVzZXMgYSBkaXNwb3NhYmxlIENvbmNhc3Qgc28gdGhlIHBvbGxpbmcgb3B0aW9ucyAod2hpY2ggZm9yY2VcbiAgICAgICAgICAgIC8vIGZldGNoUG9saWN5IHRvIGJlIFwibmV0d29yay1vbmx5XCIgb3IgXCJuby1jYWNoZVwiKSB3b24ndCBvdmVycmlkZSB0aGUgb3JpZ2luYWwgb3B0aW9ucy5cbiAgICAgICAgICAgIG5ld05ldHdvcmtTdGF0dXMgPT09IE5ldHdvcmtTdGF0dXMucG9sbDtcbiAgICAgICAgLy8gU2F2ZSB0aGUgb2xkIHZhcmlhYmxlcywgc2luY2UgT2JqZWN0LmFzc2lnbiBtYXkgbW9kaWZ5IHRoZW0gYmVsb3cuXG4gICAgICAgIHZhciBvbGRWYXJpYWJsZXMgPSB0aGlzLm9wdGlvbnMudmFyaWFibGVzO1xuICAgICAgICB2YXIgb2xkRmV0Y2hQb2xpY3kgPSB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3k7XG4gICAgICAgIHZhciBtZXJnZWRPcHRpb25zID0gY29tcGFjdCh0aGlzLm9wdGlvbnMsIG5ld09wdGlvbnMgfHwge30pO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHVzZURpc3Bvc2FibGVDb25jYXN0ID9cbiAgICAgICAgICAgIC8vIERpc3Bvc2FibGUgQ29uY2FzdCBmZXRjaGVzIHJlY2VpdmUgYSBzaGFsbG93IGNvcHkgb2YgdGhpcy5vcHRpb25zXG4gICAgICAgICAgICAvLyAobWVyZ2VkIHdpdGggbmV3T3B0aW9ucyksIGxlYXZpbmcgdGhpcy5vcHRpb25zIHVubW9kaWZpZWQuXG4gICAgICAgICAgICBtZXJnZWRPcHRpb25zXG4gICAgICAgICAgICA6IGFzc2lnbih0aGlzLm9wdGlvbnMsIG1lcmdlZE9wdGlvbnMpO1xuICAgICAgICAvLyBEb24ndCB1cGRhdGUgb3B0aW9ucy5xdWVyeSB3aXRoIHRoZSB0cmFuc2Zvcm1lZCBxdWVyeSB0byBhdm9pZFxuICAgICAgICAvLyBvdmVyd3JpdGluZyB0aGlzLm9wdGlvbnMucXVlcnkgd2hlbiB3ZSBhcmVuJ3QgdXNpbmcgYSBkaXNwb3NhYmxlIGNvbmNhc3QuXG4gICAgICAgIC8vIFdlIHdhbnQgdG8gZW5zdXJlIHdlIGNhbiByZS1ydW4gdGhlIGN1c3RvbSBkb2N1bWVudCB0cmFuc2Zvcm1zIHRoZSBuZXh0XG4gICAgICAgIC8vIHRpbWUgYSByZXF1ZXN0IGlzIG1hZGUgYWdhaW5zdCB0aGUgb3JpZ2luYWwgcXVlcnkuXG4gICAgICAgIHZhciBxdWVyeSA9IHRoaXMudHJhbnNmb3JtRG9jdW1lbnQob3B0aW9ucy5xdWVyeSk7XG4gICAgICAgIHRoaXMubGFzdFF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgIGlmICghdXNlRGlzcG9zYWJsZUNvbmNhc3QpIHtcbiAgICAgICAgICAgIC8vIFdlIGNhbiBza2lwIGNhbGxpbmcgdXBkYXRlUG9sbGluZyBpZiB3ZSdyZSBub3QgY2hhbmdpbmcgdGhpcy5vcHRpb25zLlxuICAgICAgICAgICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgICAgICAgICAvLyBSZXNldCBvcHRpb25zLmZldGNoUG9saWN5IHRvIGl0cyBvcmlnaW5hbCB2YWx1ZSB3aGVuIHZhcmlhYmxlcyBjaGFuZ2UsXG4gICAgICAgICAgICAvLyB1bmxlc3MgYSBuZXcgZmV0Y2hQb2xpY3kgd2FzIHByb3ZpZGVkIGJ5IG5ld09wdGlvbnMuXG4gICAgICAgICAgICBpZiAobmV3T3B0aW9ucyAmJlxuICAgICAgICAgICAgICAgIG5ld09wdGlvbnMudmFyaWFibGVzICYmXG4gICAgICAgICAgICAgICAgIWVxdWFsKG5ld09wdGlvbnMudmFyaWFibGVzLCBvbGRWYXJpYWJsZXMpICYmXG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgbWVzcyB3aXRoIHRoZSBmZXRjaFBvbGljeSBpZiBpdCdzIGN1cnJlbnRseSBcInN0YW5kYnlcIi5cbiAgICAgICAgICAgICAgICBvcHRpb25zLmZldGNoUG9saWN5ICE9PSBcInN0YW5kYnlcIiAmJlxuICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIGNoYW5naW5nIHRoZSBmZXRjaFBvbGljeSBhbnl3YXksIGRvbid0IHRyeSB0byBjaGFuZ2UgaXQgaGVyZVxuICAgICAgICAgICAgICAgIC8vIHVzaW5nIGFwcGx5TmV4dEZldGNoUG9saWN5LiBUaGUgZXhwbGljaXQgb3B0aW9ucy5mZXRjaFBvbGljeSB3aW5zLlxuICAgICAgICAgICAgICAgIChvcHRpb25zLmZldGNoUG9saWN5ID09PSBvbGRGZXRjaFBvbGljeSB8fFxuICAgICAgICAgICAgICAgICAgICAvLyBBIGBuZXh0RmV0Y2hQb2xpY3lgIGZ1bmN0aW9uIGhhcyBldmVuIGhpZ2hlciBwcmlvcml0eSwgdGhvdWdoLFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBpbiB0aGF0IGNhc2UgYGFwcGx5TmV4dEZldGNoUG9saWN5YCBtdXN0IGJlIGNhbGxlZC5cbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMubmV4dEZldGNoUG9saWN5ID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseU5leHRGZXRjaFBvbGljeShcInZhcmlhYmxlcy1jaGFuZ2VkXCIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdOZXR3b3JrU3RhdHVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3TmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMuc2V0VmFyaWFibGVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLndhaXRGb3JPd25SZXN1bHQgJiYgKHRoaXMud2FpdEZvck93blJlc3VsdCA9IHNraXBDYWNoZURhdGFGb3Iob3B0aW9ucy5mZXRjaFBvbGljeSkpO1xuICAgICAgICB2YXIgZmluaXNoV2FpdGluZ0Zvck93blJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5jb25jYXN0ID09PSBjb25jYXN0KSB7XG4gICAgICAgICAgICAgICAgX3RoaXMud2FpdEZvck93blJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdmFyaWFibGVzID0gb3B0aW9ucy52YXJpYWJsZXMgJiYgX19hc3NpZ24oe30sIG9wdGlvbnMudmFyaWFibGVzKTtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5mZXRjaChvcHRpb25zLCBuZXdOZXR3b3JrU3RhdHVzLCBxdWVyeSksIGNvbmNhc3QgPSBfYS5jb25jYXN0LCBmcm9tTGluayA9IF9hLmZyb21MaW5rO1xuICAgICAgICB2YXIgb2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGVxdWFsKF90aGlzLnZhcmlhYmxlcywgdmFyaWFibGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hXYWl0aW5nRm9yT3duUmVzdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlcG9ydFJlc3VsdChyZXN1bHQsIHZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXF1YWwoX3RoaXMudmFyaWFibGVzLCB2YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvbWluZyBmcm9tIGBnZXRSZXN1bHRzRnJvbUxpbmtgLCBgZXJyb3JgIGhlcmUgc2hvdWxkIGFsd2F5cyBiZSBhbiBgQXBvbGxvRXJyb3JgLlxuICAgICAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCBjYWxsaW5nIGBjb25jYXN0LmNhbmNlbGAgY2FuIGluamVjdCBhbm90aGVyIHR5cGUgb2YgZXJyb3IsIHNvIHdlIGhhdmUgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gd3JhcCBpdCBhZ2FpbiBoZXJlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQXBvbGxvRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBBcG9sbG9FcnJvcih7IG5ldHdvcmtFcnJvcjogZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluaXNoV2FpdGluZ0Zvck93blJlc3VsdCgpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXBvcnRFcnJvcihlcnJvciwgdmFyaWFibGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXVzZURpc3Bvc2FibGVDb25jYXN0ICYmIChmcm9tTGluayB8fCAhdGhpcy5jb25jYXN0KSkge1xuICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSB7YWRkLHJlbW92ZX1PYnNlcnZlciBtZXRob2RzIGRpcmVjdGx5IHRvIGF2b2lkIHdyYXBwaW5nXG4gICAgICAgICAgICAvLyBvYnNlcnZlciB3aXRoIGFuIHVubmVjZXNzYXJ5IFN1YnNjcmlwdGlvbk9ic2VydmVyIG9iamVjdC5cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmNhc3QgJiYgdGhpcy5vYnNlcnZlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29uY2FzdC5yZW1vdmVPYnNlcnZlcih0aGlzLm9ic2VydmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29uY2FzdCA9IGNvbmNhc3Q7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgY29uY2FzdC5hZGRPYnNlcnZlcihvYnNlcnZlcik7XG4gICAgICAgIHJldHVybiBjb25jYXN0O1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5yZW9ic2VydmUgPSBmdW5jdGlvbiAobmV3T3B0aW9ucywgbmV3TmV0d29ya1N0YXR1cykge1xuICAgICAgICByZXR1cm4gcHJldmVudFVuaGFuZGxlZFJlamVjdGlvbih0aGlzLnJlb2JzZXJ2ZUFzQ29uY2FzdChuZXdPcHRpb25zLCBuZXdOZXR3b3JrU3RhdHVzKS5wcm9taXNlLnRoZW4odGhpcy5tYXNrUmVzdWx0KSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlc3Vic2NyaWJlQWZ0ZXJFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBgbGFzdEVycm9yYCBpcyBzZXQgaW4gdGhlIGN1cnJlbnQgd2hlbiB0aGUgc3Vic2NyaXB0aW9uIGlzIHJlLWNyZWF0ZWQsXG4gICAgICAgIC8vIHRoZSBzdWJzY3JpcHRpb24gd2lsbCBpbW1lZGlhdGVseSByZWNlaXZlIHRoZSBlcnJvciwgd2hpY2ggd2lsbFxuICAgICAgICAvLyBjYXVzZSBpdCB0byB0ZXJtaW5hdGUgYWdhaW4uIFRvIGF2b2lkIHRoaXMsIHdlIGZpcnN0IGNsZWFyXG4gICAgICAgIC8vIHRoZSBsYXN0IGVycm9yL3Jlc3VsdCBmcm9tIHRoZSBgb2JzZXJ2YWJsZVF1ZXJ5YCBiZWZvcmUgcmUtc3RhcnRpbmdcbiAgICAgICAgLy8gdGhlIHN1YnNjcmlwdGlvbiwgYW5kIHJlc3RvcmUgdGhlIGxhc3QgdmFsdWUgYWZ0ZXJ3YXJkcyBzbyB0aGF0IHRoZVxuICAgICAgICAvLyBzdWJzY3JpcHRpb24gaGFzIGEgY2hhbmNlIHRvIHN0YXkgb3Blbi5cbiAgICAgICAgdmFyIGxhc3QgPSB0aGlzLmxhc3Q7XG4gICAgICAgIG11dGVEZXByZWNhdGlvbnMoXCJyZXNldExhc3RSZXN1bHRzXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnJlc2V0TGFzdFJlc3VsdHMoKTsgfSk7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmliZS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgdGhpcy5sYXN0ID0gbGFzdDtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIC8vIChSZSlkZWxpdmVyIHRoZSBjdXJyZW50IHJlc3VsdCB0byB0aGlzLm9ic2VydmVycyB3aXRob3V0IGFwcGx5aW5nIGZldGNoXG4gICAgLy8gcG9saWNpZXMgb3IgbWFraW5nIG5ldHdvcmsgcmVxdWVzdHMuXG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlcG9ydFJlc3VsdChcbiAgICAgICAgLy8gUGFzc2luZyBmYWxzZSBpcyBpbXBvcnRhbnQgc28gdGhhdCB0aGlzLmdldEN1cnJlbnRSZXN1bHQgZG9lc24ndFxuICAgICAgICAvLyBzYXZlIHRoZSBmZXRjaE1vcmUgcmVzdWx0IGFzIHRoaXMubGFzdFJlc3VsdCwgY2F1c2luZyBpdCB0byBiZVxuICAgICAgICAvLyBpZ25vcmVkIGR1ZSB0byB0aGUgdGhpcy5pc0RpZmZlcmVudEZyb21MYXN0UmVzdWx0IGNoZWNrIGluXG4gICAgICAgIC8vIHRoaXMucmVwb3J0UmVzdWx0LlxuICAgICAgICB0aGlzLmdldEN1cnJlbnRGdWxsUmVzdWx0KGZhbHNlKSwgdGhpcy52YXJpYWJsZXMpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5yZXBvcnRSZXN1bHQgPSBmdW5jdGlvbiAocmVzdWx0LCB2YXJpYWJsZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGxhc3RFcnJvciA9IG11dGVEZXByZWNhdGlvbnMoXCJnZXRMYXN0RXJyb3JcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldExhc3RFcnJvcigpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGlzRGlmZmVyZW50ID0gdGhpcy5pc0RpZmZlcmVudEZyb21MYXN0UmVzdWx0KHJlc3VsdCwgdmFyaWFibGVzKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBsYXN0IHJlc3VsdCBldmVuIHdoZW4gaXNEaWZmZXJlbnRGcm9tTGFzdFJlc3VsdCByZXR1cm5zIGZhbHNlLFxuICAgICAgICAvLyBiZWNhdXNlIHRoZSBxdWVyeSBtYXkgYmUgdXNpbmcgdGhlIEBub25yZWFjdGl2ZSBkaXJlY3RpdmUsIGFuZCB3ZSB3YW50IHRvXG4gICAgICAgIC8vIHNhdmUgdGhlIHRoZSBsYXRlc3QgdmVyc2lvbiBvZiBhbnkgbm9ucmVhY3RpdmUgc3VidHJlZXMgKGluIGNhc2VcbiAgICAgICAgLy8gZ2V0Q3VycmVudFJlc3VsdCBpcyBjYWxsZWQpLCBldmVuIHRob3VnaCB3ZSBza2lwIGJyb2FkY2FzdGluZyBjaGFuZ2VzLlxuICAgICAgICBpZiAobGFzdEVycm9yIHx8ICFyZXN1bHQucGFydGlhbCB8fCB0aGlzLm9wdGlvbnMucmV0dXJuUGFydGlhbERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTGFzdFJlc3VsdChyZXN1bHQsIHZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RFcnJvciB8fCBpc0RpZmZlcmVudCkge1xuICAgICAgICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseSh0aGlzLm9ic2VydmVycywgXCJuZXh0XCIsIHRoaXMubWFza1Jlc3VsdChyZXN1bHQpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5yZXBvcnRFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgdmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vIFNpbmNlIHdlIGRvbid0IGdldCB0aGUgY3VycmVudCByZXN1bHQgb24gZXJyb3JzLCBvbmx5IHRoZSBlcnJvciwgd2VcbiAgICAgICAgLy8gbXVzdCBtaXJyb3IgdGhlIHVwZGF0ZXMgdGhhdCBvY2N1ciBpbiBRdWVyeVN0b3JlLm1hcmtRdWVyeUVycm9yIGhlcmVcbiAgICAgICAgdmFyIGVycm9yUmVzdWx0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG11dGVEZXByZWNhdGlvbnMoXCJnZXRMYXN0UmVzdWx0XCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmdldExhc3RSZXN1bHQoKTsgfSkpLCB7IGVycm9yOiBlcnJvciwgZXJyb3JzOiBlcnJvci5ncmFwaFFMRXJyb3JzLCBuZXR3b3JrU3RhdHVzOiBOZXR3b3JrU3RhdHVzLmVycm9yLCBsb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0UmVzdWx0KGVycm9yUmVzdWx0LCB2YXJpYWJsZXMpO1xuICAgICAgICBpdGVyYXRlT2JzZXJ2ZXJzU2FmZWx5KHRoaXMub2JzZXJ2ZXJzLCBcImVycm9yXCIsICh0aGlzLmxhc3QuZXJyb3IgPSBlcnJvcikpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5oYXNPYnNlcnZlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5zaXplID4gMDtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUudGVhckRvd25RdWVyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNUb3JuRG93bilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuY29uY2FzdCAmJiB0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmNhc3QucmVtb3ZlT2JzZXJ2ZXIodGhpcy5vYnNlcnZlcik7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jb25jYXN0O1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgICAgICAvLyBzdG9wIGFsbCBhY3RpdmUgR3JhcGhRTCBzdWJzY3JpcHRpb25zXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzdWIpIHsgcmV0dXJuIHN1Yi51bnN1YnNjcmliZSgpOyB9KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLnN0b3BRdWVyeSh0aGlzLnF1ZXJ5SWQpO1xuICAgICAgICB0aGlzLm9ic2VydmVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLmlzVG9ybkRvd24gPSB0cnVlO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS50cmFuc2Zvcm1Eb2N1bWVudCA9IGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIudHJhbnNmb3JtKGRvY3VtZW50KTtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUubWFza1Jlc3VsdCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdCAmJiBcImRhdGFcIiBpbiByZXN1bHQgPyBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVzdWx0KSwgeyBkYXRhOiB0aGlzLnF1ZXJ5TWFuYWdlci5tYXNrT3BlcmF0aW9uKHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogdGhpcy5xdWVyeSxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICBmZXRjaFBvbGljeTogdGhpcy5vcHRpb25zLmZldGNoUG9saWN5LFxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLnF1ZXJ5SWQsXG4gICAgICAgICAgICB9KSB9KSA6IHJlc3VsdDtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnJlc2V0Tm90aWZpY2F0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxOb3RpZnlUaW1lb3V0KCk7XG4gICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB9O1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUuY2FuY2VsTm90aWZ5VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubm90aWZ5VGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubm90aWZ5VGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeVRpbWVvdXQgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBPYnNlcnZhYmxlUXVlcnkucHJvdG90eXBlLnNjaGVkdWxlTm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5kaXJ0eSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy5ub3RpZnlUaW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm5vdGlmeSgpOyB9LCAwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIE9ic2VydmFibGVRdWVyeS5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNhbmNlbE5vdGlmeVRpbWVvdXQoKTtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3kgPT0gXCJjYWNoZS1vbmx5XCIgfHxcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3kgPT0gXCJjYWNoZS1hbmQtbmV0d29ya1wiIHx8XG4gICAgICAgICAgICAgICAgIWlzTmV0d29ya1JlcXVlc3RJbkZsaWdodCh0aGlzLnF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzKSkge1xuICAgICAgICAgICAgICAgIHZhciBkaWZmID0gdGhpcy5xdWVyeUluZm8uZ2V0RGlmZigpO1xuICAgICAgICAgICAgICAgIGlmIChkaWZmLmZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBkaWZmIGNhbWUgZnJvbSBhbiBvcHRpbWlzdGljIHRyYW5zYWN0aW9uLCBkZWxpdmVyIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGNhY2hlIGRhdGEgdG8gdGhlIE9ic2VydmFibGVRdWVyeSwgYnV0IGRvbid0IHBlcmZvcm0gYVxuICAgICAgICAgICAgICAgICAgICAvLyByZW9ic2VydmF0aW9uLCBzaW5jZSBvcS5yZW9ic2VydmVDYWNoZUZpcnN0IG1pZ2h0IG1ha2UgYSBuZXR3b3JrXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcXVlc3QsIGFuZCB3ZSBuZXZlciB3YW50IHRvIHRyaWdnZXIgbmV0d29yayByZXF1ZXN0cyBpbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gbWlkZGxlIG9mIG9wdGltaXN0aWMgdXBkYXRlcy5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYnNlcnZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIG1ha2UgdGhlIE9ic2VydmFibGVRdWVyeSBcInJlb2JzZXJ2ZVwiIHRoZSBsYXRlc3QgZGF0YVxuICAgICAgICAgICAgICAgICAgICAvLyB1c2luZyBhIHRlbXBvcmFyeSBmZXRjaCBwb2xpY3kgb2YgXCJjYWNoZS1maXJzdFwiLCBzbyBjb21wbGV0ZSBjYWNoZVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHRzIGhhdmUgYSBjaGFuY2UgdG8gYmUgZGVsaXZlcmVkIHdpdGhvdXQgdHJpZ2dlcmluZyBhZGRpdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgIC8vIG5ldHdvcmsgcmVxdWVzdHMsIGV2ZW4gd2hlbiBvcHRpb25zLmZldGNoUG9saWN5IGlzIFwibmV0d29yay1vbmx5XCJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3IgXCJjYWNoZS1hbmQtbmV0d29ya1wiLiBBbGwgb3RoZXIgZmV0Y2ggcG9saWNpZXMgYXJlIHByZXNlcnZlZCBieVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIG1ldGhvZCwgYW5kIGFyZSBoYW5kbGVkIGJ5IGNhbGxpbmcgb3EucmVvYnNlcnZlKCkuIElmIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVvYnNlcnZhdGlvbiBpcyBzcHVyaW91cywgaXNEaWZmZXJlbnRGcm9tTGFzdFJlc3VsdCBzdGlsbCBoYXMgYVxuICAgICAgICAgICAgICAgICAgICAvLyBjaGFuY2UgdG8gY2F0Y2ggaXQgYmVmb3JlIGRlbGl2ZXJ5IHRvIE9ic2VydmFibGVRdWVyeSBzdWJzY3JpYmVycy5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW9ic2VydmVDYWNoZUZpcnN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB9O1xuICAgIC8vIFJlb2JzZXJ2ZSB3aXRoIGZldGNoUG9saWN5IGVmZmVjdGl2ZWx5IHNldCB0byBcImNhY2hlLWZpcnN0XCIsIHRyaWdnZXJpbmdcbiAgICAvLyBkZWxpdmVyeSBvZiBhbnkgbmV3IGRhdGEgZnJvbSB0aGUgY2FjaGUsIHBvc3NpYmx5IGZhbGxpbmcgYmFjayB0byB0aGUgbmV0d29ya1xuICAgIC8vIGlmIGFueSBjYWNoZSBkYXRhIGFyZSBtaXNzaW5nLiBUaGlzIGFsbG93cyBfY29tcGxldGVfIGNhY2hlIHJlc3VsdHMgdG8gYmVcbiAgICAvLyBkZWxpdmVyZWQgd2l0aG91dCBhbHNvIGtpY2tpbmcgb2ZmIHVubmVjZXNzYXJ5IG5ldHdvcmsgcmVxdWVzdHMgd2hlblxuICAgIC8vIHRoaXMub3B0aW9ucy5mZXRjaFBvbGljeSBpcyBcImNhY2hlLWFuZC1uZXR3b3JrXCIgb3IgXCJuZXR3b3JrLW9ubHlcIi4gV2hlblxuICAgIC8vIHRoaXMub3B0aW9ucy5mZXRjaFBvbGljeSBpcyBhbnkgb3RoZXIgcG9saWN5IChcImNhY2hlLWZpcnN0XCIsIFwiY2FjaGUtb25seVwiLFxuICAgIC8vIFwic3RhbmRieVwiLCBvciBcIm5vLWNhY2hlXCIpLCB3ZSBjYWxsIHRoaXMucmVvYnNlcnZlKCkgYXMgdXN1YWwuXG4gICAgT2JzZXJ2YWJsZVF1ZXJ5LnByb3RvdHlwZS5yZW9ic2VydmVDYWNoZUZpcnN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLm9wdGlvbnMsIGZldGNoUG9saWN5ID0gX2EuZmV0Y2hQb2xpY3ksIG5leHRGZXRjaFBvbGljeSA9IF9hLm5leHRGZXRjaFBvbGljeTtcbiAgICAgICAgaWYgKGZldGNoUG9saWN5ID09PSBcImNhY2hlLWFuZC1uZXR3b3JrXCIgfHwgZmV0Y2hQb2xpY3kgPT09IFwibmV0d29yay1vbmx5XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlb2JzZXJ2ZSh7XG4gICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IFwiY2FjaGUtZmlyc3RcIixcbiAgICAgICAgICAgICAgICAvLyBVc2UgYSB0ZW1wb3JhcnkgbmV4dEZldGNoUG9saWN5IGZ1bmN0aW9uIHRoYXQgcmVwbGFjZXMgaXRzZWxmIHdpdGggdGhlXG4gICAgICAgICAgICAgICAgLy8gcHJldmlvdXMgbmV4dEZldGNoUG9saWN5IHZhbHVlIGFuZCByZXR1cm5zIHRoZSBvcmlnaW5hbCBmZXRjaFBvbGljeS5cbiAgICAgICAgICAgICAgICBuZXh0RmV0Y2hQb2xpY3k6IGZ1bmN0aW9uIChjdXJyZW50RmV0Y2hQb2xpY3ksIGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGlzIG5leHRGZXRjaFBvbGljeSBmdW5jdGlvbiBpbiB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gb3JpZ2luYWwgdGhpcy5vcHRpb25zLm5leHRGZXRjaFBvbGljeSB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0RmV0Y2hQb2xpY3kgPSBuZXh0RmV0Y2hQb2xpY3k7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBvcmlnaW5hbCBuZXh0RmV0Y2hQb2xpY3kgdmFsdWUgd2FzIGEgZnVuY3Rpb24sIGdpdmUgaXQgYVxuICAgICAgICAgICAgICAgICAgICAvLyBjaGFuY2UgdG8gZGVjaWRlIHdoYXQgaGFwcGVucyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMubmV4dEZldGNoUG9saWN5ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRGZXRjaFBvbGljeShjdXJyZW50RmV0Y2hQb2xpY3ksIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBnbyBiYWNrIHRvIHRoZSBvcmlnaW5hbCB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3kuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaFBvbGljeTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVvYnNlcnZlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBBIHNsb3QgdXNlZCBieSB0aGUgYHVzZVF1ZXJ5YCBob29rIHRvIGluZGljYXRlIHRoYXQgYGNsaWVudC53YXRjaFF1ZXJ5YFxuICAgICAqIHNob3VsZCBub3QgcmVnaXN0ZXIgdGhlIHF1ZXJ5IGltbWVkaWF0ZWx5LCBidXQgaW5zdGVhZCB3YWl0IGZvciB0aGUgcXVlcnkgdG9cbiAgICAgKiBiZSBzdGFydGVkIHJlZ2lzdGVyZWQgd2l0aCB0aGUgYFF1ZXJ5TWFuYWdlcmAgd2hlbiBgdXNlU3luY0V4dGVybmFsU3RvcmVgXG4gICAgICogYWN0aXZlbHkgc3Vic2NyaWJlcyB0byBpdC5cbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlUXVlcnkuaW5hY3RpdmVPbkNyZWF0aW9uID0gbmV3IFNsb3QoKTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZVF1ZXJ5O1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgeyBPYnNlcnZhYmxlUXVlcnkgfTtcbi8vIE5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBPYnNlcnZhYmxlUXVlcnkgY29uc3RydWN0b3IgaGFzIGEgZGlmZmVyZW50XG4vLyBzaWduYXR1cmUgdGhhbiB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3Rvci5cbmZpeE9ic2VydmFibGVTdWJjbGFzcyhPYnNlcnZhYmxlUXVlcnkpO1xuZnVuY3Rpb24gZGVmYXVsdFN1YnNjcmlwdGlvbk9ic2VydmVyRXJyb3JDYWxsYmFjayhlcnJvcikge1xuICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50LmVycm9yKDMzLCBlcnJvci5tZXNzYWdlLCBlcnJvci5zdGFjayk7XG59XG5leHBvcnQgZnVuY3Rpb24gbG9nTWlzc2luZ0ZpZWxkRXJyb3JzKG1pc3NpbmcpIHtcbiAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBtaXNzaW5nKSB7XG4gICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50LmRlYnVnKDM0LCBtaXNzaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBza2lwQ2FjaGVEYXRhRm9yKGZldGNoUG9saWN5IC8qIGB1bmRlZmluZWRgIHdvdWxkIG1lYW4gYFwiY2FjaGUtZmlyc3RcImAgKi8pIHtcbiAgICByZXR1cm4gKGZldGNoUG9saWN5ID09PSBcIm5ldHdvcmstb25seVwiIHx8XG4gICAgICAgIGZldGNoUG9saWN5ID09PSBcIm5vLWNhY2hlXCIgfHxcbiAgICAgICAgZmV0Y2hQb2xpY3kgPT09IFwic3RhbmRieVwiKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGVRdWVyeS5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBlcXVhbCB9IGZyb20gXCJAd3J5L2VxdWFsaXR5XCI7XG5pbXBvcnQgeyBEZWVwTWVyZ2VyIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgbWVyZ2VJbmNyZW1lbnRhbERhdGEgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBpc05vbkVtcHR5QXJyYXksIGdyYXBoUUxSZXN1bHRIYXNFcnJvciwgY2FuVXNlV2Vha01hcCwgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBOZXR3b3JrU3RhdHVzIH0gZnJvbSBcIi4vbmV0d29ya1N0YXR1cy5qc1wiO1xuaW1wb3J0IHsgbXV0ZURlcHJlY2F0aW9ucyB9IGZyb20gXCIuLi91dGlsaXRpZXMvZGVwcmVjYXRpb24vaW5kZXguanNcIjtcbnZhciBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cyA9IG5ldyAoY2FuVXNlV2Vha01hcCA/IFdlYWtNYXAgOiBNYXApKCk7XG5mdW5jdGlvbiB3cmFwRGVzdHJ1Y3RpdmVDYWNoZU1ldGhvZChjYWNoZSwgbWV0aG9kTmFtZSkge1xuICAgIHZhciBvcmlnaW5hbCA9IGNhY2hlW21ldGhvZE5hbWVdO1xuICAgIGlmICh0eXBlb2Ygb3JpZ2luYWwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRoaXMgaXMganVzdCB0b28gZ2VuZXJpYyB0byBiZSB0eXBlZCBjb3JyZWN0bHlcbiAgICAgICAgY2FjaGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5zZXQoY2FjaGUsIFxuICAgICAgICAgICAgLy8gVGhlICUxZTE1IGFsbG93cyB0aGUgY291bnQgdG8gd3JhcCBhcm91bmQgdG8gMCBzYWZlbHkgZXZlcnlcbiAgICAgICAgICAgIC8vIHF1YWRyaWxsaW9uIGV2aWN0aW9ucywgc28gdGhlcmUncyBubyByaXNrIG9mIG92ZXJmbG93LiBUbyBiZVxuICAgICAgICAgICAgLy8gY2xlYXIsIHRoaXMgaXMgbW9yZSBvZiBhIHBlZGFudGljIHByaW5jaXBsZSB0aGFuIHNvbWV0aGluZ1xuICAgICAgICAgICAgLy8gdGhhdCBtYXR0ZXJzIGluIGFueSBjb25jZWl2YWJsZSBwcmFjdGljYWwgc2NlbmFyaW8uXG4gICAgICAgICAgICAoZGVzdHJ1Y3RpdmVNZXRob2RDb3VudHMuZ2V0KGNhY2hlKSArIDEpICUgMWUxNSk7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRoaXMgaXMganVzdCB0b28gZ2VuZXJpYyB0byBiZSB0eXBlZCBjb3JyZWN0bHlcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIEEgUXVlcnlJbmZvIG9iamVjdCByZXByZXNlbnRzIGEgc2luZ2xlIHF1ZXJ5IG1hbmFnZWQgYnkgdGhlXG4vLyBRdWVyeU1hbmFnZXIsIHdoaWNoIHRyYWNrcyBhbGwgUXVlcnlJbmZvIG9iamVjdHMgYnkgcXVlcnlJZCBpbiBpdHNcbi8vIHRoaXMucXVlcmllcyBNYXAuIFF1ZXJ5SW5mbyBvYmplY3RzIHN0b3JlIHRoZSBsYXRlc3QgcmVzdWx0cyBhbmQgZXJyb3JzXG4vLyBmb3IgdGhlIGdpdmVuIHF1ZXJ5LCBhbmQgYXJlIHJlc3BvbnNpYmxlIGZvciByZXBvcnRpbmcgdGhvc2UgcmVzdWx0cyB0b1xuLy8gdGhlIGNvcnJlc3BvbmRpbmcgT2JzZXJ2YWJsZVF1ZXJ5LCB2aWEgdGhlIFF1ZXJ5SW5mby5ub3RpZnkgbWV0aG9kLlxuLy8gUmVzdWx0cyBhcmUgcmVwb3J0ZWQgYXN5bmNocm9ub3VzbHkgd2hlbmV2ZXIgc2V0RGlmZiBtYXJrcyB0aGVcbi8vIFF1ZXJ5SW5mbyBvYmplY3QgYXMgZGlydHksIHRob3VnaCBhIGNhbGwgdG8gdGhlIFF1ZXJ5TWFuYWdlcidzXG4vLyBicm9hZGNhc3RRdWVyaWVzIG1ldGhvZCBtYXkgdHJpZ2dlciB0aGUgbm90aWZpY2F0aW9uIGJlZm9yZSBpdCBoYXBwZW5zXG4vLyBhdXRvbWF0aWNhbGx5LiBUaGlzIGNsYXNzIHVzZWQgdG8gYmUgYSBzaW1wbGUgaW50ZXJmYWNlIHR5cGUgd2l0aG91dFxuLy8gYW55IGZpZWxkIHByaXZhY3kgb3IgbWVhbmluZ2Z1bCBtZXRob2RzLCB3aGljaCBpcyB3aHkgaXQgc3RpbGwgaGFzIHNvXG4vLyBtYW55IHB1YmxpYyBmaWVsZHMuIFRoZSBlZmZvcnQgdG8gbG9jayBkb3duIGFuZCBzaW1wbGlmeSB0aGUgUXVlcnlJbmZvXG4vLyBpbnRlcmZhY2UgaXMgb25nb2luZywgYW5kIGZ1cnRoZXIgaW1wcm92ZW1lbnRzIGFyZSB3ZWxjb21lLlxudmFyIFF1ZXJ5SW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBRdWVyeUluZm8ocXVlcnlNYW5hZ2VyLCBxdWVyeUlkKSB7XG4gICAgICAgIGlmIChxdWVyeUlkID09PSB2b2lkIDApIHsgcXVlcnlJZCA9IHF1ZXJ5TWFuYWdlci5nZW5lcmF0ZVF1ZXJ5SWQoKTsgfVxuICAgICAgICB0aGlzLnF1ZXJ5SWQgPSBxdWVyeUlkO1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0UmVxdWVzdElkID0gMTtcbiAgICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZVF1ZXJ5ID0gbnVsbDtcbiAgICAgICAgdmFyIGNhY2hlID0gKHRoaXMuY2FjaGUgPSBxdWVyeU1hbmFnZXIuY2FjaGUpO1xuICAgICAgICAvLyBUcmFjayBob3cgb2Z0ZW4gY2FjaGUuZXZpY3QgaXMgY2FsbGVkLCBzaW5jZSB3ZSB3YW50IGV2aWN0aW9uIHRvXG4gICAgICAgIC8vIG92ZXJyaWRlIHRoZSBmZXVkLXN0b3BwaW5nIGxvZ2ljIGluIHRoZSBtYXJrUmVzdWx0IG1ldGhvZCwgYnlcbiAgICAgICAgLy8gY2F1c2luZyBzaG91bGRXcml0ZSB0byByZXR1cm4gdHJ1ZS4gV3JhcHBpbmcgdGhlIGNhY2hlLmV2aWN0IG1ldGhvZFxuICAgICAgICAvLyBpcyBhIGJpdCBvZiBhIGhhY2ssIGJ1dCBpdCBzYXZlcyB1cyBmcm9tIGhhdmluZyB0byBtYWtlIGV2aWN0aW9uXG4gICAgICAgIC8vIGNvdW50aW5nIGFuIG9mZmljaWFsIHBhcnQgb2YgdGhlIEFwb2xsb0NhY2hlIEFQSS5cbiAgICAgICAgaWYgKCFkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5oYXMoY2FjaGUpKSB7XG4gICAgICAgICAgICBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5zZXQoY2FjaGUsIDApO1xuICAgICAgICAgICAgd3JhcERlc3RydWN0aXZlQ2FjaGVNZXRob2QoY2FjaGUsIFwiZXZpY3RcIik7XG4gICAgICAgICAgICB3cmFwRGVzdHJ1Y3RpdmVDYWNoZU1ldGhvZChjYWNoZSwgXCJtb2RpZnlcIik7XG4gICAgICAgICAgICB3cmFwRGVzdHJ1Y3RpdmVDYWNoZU1ldGhvZChjYWNoZSwgXCJyZXNldFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgICAgdmFyIG5ldHdvcmtTdGF0dXMgPSBxdWVyeS5uZXR3b3JrU3RhdHVzIHx8IE5ldHdvcmtTdGF0dXMubG9hZGluZztcbiAgICAgICAgaWYgKHRoaXMudmFyaWFibGVzICYmXG4gICAgICAgICAgICB0aGlzLm5ldHdvcmtTdGF0dXMgIT09IE5ldHdvcmtTdGF0dXMubG9hZGluZyAmJlxuICAgICAgICAgICAgIWVxdWFsKHRoaXMudmFyaWFibGVzLCBxdWVyeS52YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICBuZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5zZXRWYXJpYWJsZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlcXVhbChxdWVyeS52YXJpYWJsZXMsIHRoaXMudmFyaWFibGVzKSkge1xuICAgICAgICAgICAgdGhpcy5sYXN0RGlmZiA9IHZvaWQgMDtcbiAgICAgICAgICAgIC8vIEVuc3VyZSB3ZSBkb24ndCBjb250aW51ZSB0byByZWNlaXZlIGNhY2hlIHVwZGF0ZXMgZm9yIG9sZCB2YXJpYWJsZXNcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCB7XG4gICAgICAgICAgICBkb2N1bWVudDogcXVlcnkuZG9jdW1lbnQsXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHF1ZXJ5LnZhcmlhYmxlcyxcbiAgICAgICAgICAgIG5ldHdvcmtFcnJvcjogbnVsbCxcbiAgICAgICAgICAgIGdyYXBoUUxFcnJvcnM6IHRoaXMuZ3JhcGhRTEVycm9ycyB8fCBbXSxcbiAgICAgICAgICAgIG5ldHdvcmtTdGF0dXM6IG5ldHdvcmtTdGF0dXMsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocXVlcnkub2JzZXJ2YWJsZVF1ZXJ5KSB7XG4gICAgICAgICAgICB0aGlzLnNldE9ic2VydmFibGVRdWVyeShxdWVyeS5vYnNlcnZhYmxlUXVlcnkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChxdWVyeS5sYXN0UmVxdWVzdElkKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RSZXF1ZXN0SWQgPSBxdWVyeS5sYXN0UmVxdWVzdElkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5yZXNldERpZmYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGFzdERpZmYgPSB2b2lkIDA7XG4gICAgfTtcbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLmdldERpZmYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5nZXREaWZmT3B0aW9ucygpO1xuICAgICAgICBpZiAodGhpcy5sYXN0RGlmZiAmJiBlcXVhbChvcHRpb25zLCB0aGlzLmxhc3REaWZmLm9wdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYXN0RGlmZi5kaWZmO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlV2F0Y2godGhpcy52YXJpYWJsZXMpO1xuICAgICAgICB2YXIgb3EgPSB0aGlzLm9ic2VydmFibGVRdWVyeTtcbiAgICAgICAgaWYgKG9xICYmIG9xLm9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIikge1xuICAgICAgICAgICAgcmV0dXJuIHsgY29tcGxldGU6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRpZmYgPSBtdXRlRGVwcmVjYXRpb25zKFwiY2Fub25pemVSZXN1bHRzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5jYWNoZS5kaWZmKG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0RGlmZihkaWZmLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGRpZmY7XG4gICAgfTtcbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLnVwZGF0ZUxhc3REaWZmID0gZnVuY3Rpb24gKGRpZmYsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sYXN0RGlmZiA9XG4gICAgICAgICAgICBkaWZmID9cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRpZmY6IGRpZmYsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMgfHwgdGhpcy5nZXREaWZmT3B0aW9ucygpLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHZvaWQgMDtcbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUuZ2V0RGlmZk9wdGlvbnMgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHZhcmlhYmxlcyA9PT0gdm9pZCAwKSB7IHZhcmlhYmxlcyA9IHRoaXMudmFyaWFibGVzOyB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBxdWVyeTogdGhpcy5kb2N1bWVudCxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgcmV0dXJuUGFydGlhbERhdGE6IHRydWUsXG4gICAgICAgICAgICBvcHRpbWlzdGljOiB0cnVlLFxuICAgICAgICAgICAgY2Fub25pemVSZXN1bHRzOiAoX2EgPSB0aGlzLm9ic2VydmFibGVRdWVyeSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9wdGlvbnMuY2Fub25pemVSZXN1bHRzLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5zZXREaWZmID0gZnVuY3Rpb24gKGRpZmYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgb2xkRGlmZiA9IHRoaXMubGFzdERpZmYgJiYgdGhpcy5sYXN0RGlmZi5kaWZmO1xuICAgICAgICAvLyBJZiB3ZSBhcmUgdHJ5aW5nIHRvIGRlbGl2ZXIgYW4gaW5jb21wbGV0ZSBjYWNoZSByZXN1bHQsIHdlIGF2b2lkXG4gICAgICAgIC8vIHJlcG9ydGluZyBpdCBpZiB0aGUgcXVlcnkgaGFzIGVycm9yZWQsIG90aGVyd2lzZSB3ZSBsZXQgdGhlIGJyb2FkY2FzdCB0cnlcbiAgICAgICAgLy8gYW5kIHJlcGFpciB0aGUgcGFydGlhbCByZXN1bHQgYnkgcmVmZXRjaGluZyB0aGUgcXVlcnkuIFRoaXMgY2hlY2sgYXZvaWRzXG4gICAgICAgIC8vIGEgc2l0dWF0aW9uIHdoZXJlIGEgcXVlcnkgdGhhdCBlcnJvcnMgYW5kIGFub3RoZXIgc3VjY2VlZHMgd2l0aFxuICAgICAgICAvLyBvdmVybGFwcGluZyBkYXRhIGRvZXMgbm90IHJlcG9ydCB0aGUgcGFydGlhbCBkYXRhIHJlc3VsdCB0byB0aGUgZXJyb3JlZFxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcG9sbG9ncmFwaHFsL2Fwb2xsby1jbGllbnQvaXNzdWVzLzExNDAwIGZvciBtb3JlXG4gICAgICAgIC8vIGluZm9ybWF0aW9uIG9uIHRoaXMgaXNzdWUuXG4gICAgICAgIGlmIChkaWZmICYmXG4gICAgICAgICAgICAhZGlmZi5jb21wbGV0ZSAmJlxuICAgICAgICAgICAgbXV0ZURlcHJlY2F0aW9ucyhcImdldExhc3RFcnJvclwiLCBmdW5jdGlvbiAoKSB7IHZhciBfYTsgcmV0dXJuIChfYSA9IF90aGlzLm9ic2VydmFibGVRdWVyeSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldExhc3RFcnJvcigpOyB9KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlTGFzdERpZmYoZGlmZik7XG4gICAgICAgIGlmICghZXF1YWwob2xkRGlmZiAmJiBvbGREaWZmLnJlc3VsdCwgZGlmZiAmJiBkaWZmLnJlc3VsdCkpIHtcbiAgICAgICAgICAgIChfYSA9IHRoaXMub2JzZXJ2YWJsZVF1ZXJ5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbXCJzY2hlZHVsZU5vdGlmeVwiXSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLnNldE9ic2VydmFibGVRdWVyeSA9IGZ1bmN0aW9uIChvcSkge1xuICAgICAgICBpZiAob3EgPT09IHRoaXMub2JzZXJ2YWJsZVF1ZXJ5KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLm9ic2VydmFibGVRdWVyeSA9IG9xO1xuICAgICAgICBpZiAob3EpIHtcbiAgICAgICAgICAgIG9xW1wicXVlcnlJbmZvXCJdID0gdGhpcztcbiAgICAgICAgfVxuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghdGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgLy8gQ2FuY2VsIHRoZSBwZW5kaW5nIG5vdGlmeSB0aW1lb3V0XG4gICAgICAgICAgICAoX2EgPSB0aGlzLm9ic2VydmFibGVRdWVyeSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW1wicmVzZXROb3RpZmljYXRpb25zXCJdKCk7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAgICAgdmFyIG9xID0gdGhpcy5vYnNlcnZhYmxlUXVlcnk7XG4gICAgICAgICAgICBpZiAob3EpXG4gICAgICAgICAgICAgICAgb3Euc3RvcFBvbGxpbmcoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUXVlcnlJbmZvLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgKF9hID0gdGhpcy5jYW5jZWxXYXRjaCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMuY2FuY2VsV2F0Y2ggPSB2b2lkIDA7XG4gICAgfTtcbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLnVwZGF0ZVdhdGNoID0gZnVuY3Rpb24gKHZhcmlhYmxlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodmFyaWFibGVzID09PSB2b2lkIDApIHsgdmFyaWFibGVzID0gdGhpcy52YXJpYWJsZXM7IH1cbiAgICAgICAgdmFyIG9xID0gdGhpcy5vYnNlcnZhYmxlUXVlcnk7XG4gICAgICAgIGlmIChvcSAmJiBvcS5vcHRpb25zLmZldGNoUG9saWN5ID09PSBcIm5vLWNhY2hlXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2F0Y2hPcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuZ2V0RGlmZk9wdGlvbnModmFyaWFibGVzKSksIHsgd2F0Y2hlcjogdGhpcywgY2FsbGJhY2s6IGZ1bmN0aW9uIChkaWZmKSB7IHJldHVybiBfdGhpcy5zZXREaWZmKGRpZmYpOyB9IH0pO1xuICAgICAgICBpZiAoIXRoaXMubGFzdFdhdGNoIHx8ICFlcXVhbCh3YXRjaE9wdGlvbnMsIHRoaXMubGFzdFdhdGNoKSkge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsV2F0Y2ggPSB0aGlzLmNhY2hlLndhdGNoKCh0aGlzLmxhc3RXYXRjaCA9IHdhdGNoT3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLnJlc2V0TGFzdFdyaXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxhc3RXcml0ZSA9IHZvaWQgMDtcbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUuc2hvdWxkV3JpdGUgPSBmdW5jdGlvbiAocmVzdWx0LCB2YXJpYWJsZXMpIHtcbiAgICAgICAgdmFyIGxhc3RXcml0ZSA9IHRoaXMubGFzdFdyaXRlO1xuICAgICAgICByZXR1cm4gIShsYXN0V3JpdGUgJiZcbiAgICAgICAgICAgIC8vIElmIGNhY2hlLmV2aWN0IGhhcyBiZWVuIGNhbGxlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHdlIHdyb3RlIHRoaXNcbiAgICAgICAgICAgIC8vIGRhdGEgaW50byB0aGUgY2FjaGUsIHRoZXJlJ3MgYSBjaGFuY2Ugd3JpdGluZyB0aGlzIHJlc3VsdCBpbnRvXG4gICAgICAgICAgICAvLyB0aGUgY2FjaGUgd2lsbCByZXBhaXIgd2hhdCB3YXMgZXZpY3RlZC5cbiAgICAgICAgICAgIGxhc3RXcml0ZS5kbUNvdW50ID09PSBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5nZXQodGhpcy5jYWNoZSkgJiZcbiAgICAgICAgICAgIGVxdWFsKHZhcmlhYmxlcywgbGFzdFdyaXRlLnZhcmlhYmxlcykgJiZcbiAgICAgICAgICAgIGVxdWFsKHJlc3VsdC5kYXRhLCBsYXN0V3JpdGUucmVzdWx0LmRhdGEpKTtcbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUubWFya1Jlc3VsdCA9IGZ1bmN0aW9uIChyZXN1bHQsIGRvY3VtZW50LCBvcHRpb25zLCBjYWNoZVdyaXRlQmVoYXZpb3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB2YXIgbWVyZ2VyID0gbmV3IERlZXBNZXJnZXIoKTtcbiAgICAgICAgdmFyIGdyYXBoUUxFcnJvcnMgPSBpc05vbkVtcHR5QXJyYXkocmVzdWx0LmVycm9ycykgPyByZXN1bHQuZXJyb3JzLnNsaWNlKDApIDogW107XG4gICAgICAgIC8vIENhbmNlbCB0aGUgcGVuZGluZyBub3RpZnkgdGltZW91dCAoaWYgaXQgZXhpc3RzKSB0byBwcmV2ZW50IGV4dHJhbmVvdXMgbmV0d29ya1xuICAgICAgICAvLyByZXF1ZXN0cy4gVG8gYWxsb3cgZnV0dXJlIG5vdGlmeSB0aW1lb3V0cywgZGlmZiBhbmQgZGlydHkgYXJlIHJlc2V0IGFzIHdlbGwuXG4gICAgICAgIChfYSA9IHRoaXMub2JzZXJ2YWJsZVF1ZXJ5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbXCJyZXNldE5vdGlmaWNhdGlvbnNcIl0oKTtcbiAgICAgICAgaWYgKFwiaW5jcmVtZW50YWxcIiBpbiByZXN1bHQgJiYgaXNOb25FbXB0eUFycmF5KHJlc3VsdC5pbmNyZW1lbnRhbCkpIHtcbiAgICAgICAgICAgIHZhciBtZXJnZWREYXRhID0gbWVyZ2VJbmNyZW1lbnRhbERhdGEodGhpcy5nZXREaWZmKCkucmVzdWx0LCByZXN1bHQpO1xuICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSBtZXJnZWREYXRhO1xuICAgICAgICAgICAgLy8gRGV0ZWN0IHRoZSBmaXJzdCBjaHVuayBvZiBhIGRlZmVycmVkIHF1ZXJ5IGFuZCBtZXJnZSBpdCB3aXRoIGV4aXN0aW5nXG4gICAgICAgICAgICAvLyBjYWNoZSBkYXRhLiBUaGlzIGVuc3VyZXMgYSBgY2FjaGUtZmlyc3RgIGZldGNoIHBvbGljeSB0aGF0IHJldHVybnNcbiAgICAgICAgICAgIC8vIHBhcnRpYWwgY2FjaGUgZGF0YSBvciBhIGBjYWNoZS1hbmQtbmV0d29ya2AgZmV0Y2ggcG9saWN5IHRoYXQgYWxyZWFkeVxuICAgICAgICAgICAgLy8gaGFzIGZ1bGwgZGF0YSBpbiB0aGUgY2FjaGUgZG9lcyBub3QgY29tcGxhaW4gd2hlbiB0cnlpbmcgdG8gbWVyZ2UgdGhlXG4gICAgICAgICAgICAvLyBpbml0aWFsIGRlZmVycmVkIHNlcnZlciBkYXRhIHdpdGggZXhpc3RpbmcgY2FjaGUgZGF0YS5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChcImhhc05leHRcIiBpbiByZXN1bHQgJiYgcmVzdWx0Lmhhc05leHQpIHtcbiAgICAgICAgICAgIHZhciBkaWZmID0gdGhpcy5nZXREaWZmKCk7XG4gICAgICAgICAgICByZXN1bHQuZGF0YSA9IG1lcmdlci5tZXJnZShkaWZmLnJlc3VsdCwgcmVzdWx0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ3JhcGhRTEVycm9ycyA9IGdyYXBoUUxFcnJvcnM7XG4gICAgICAgIGlmIChvcHRpb25zLmZldGNoUG9saWN5ID09PSBcIm5vLWNhY2hlXCIpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTGFzdERpZmYoeyByZXN1bHQ6IHJlc3VsdC5kYXRhLCBjb21wbGV0ZTogdHJ1ZSB9LCB0aGlzLmdldERpZmZPcHRpb25zKG9wdGlvbnMudmFyaWFibGVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FjaGVXcml0ZUJlaGF2aW9yICE9PSAwIC8qIENhY2hlV3JpdGVCZWhhdmlvci5GT1JCSUQgKi8pIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRXcml0ZVJlc3VsdChyZXN1bHQsIG9wdGlvbnMuZXJyb3JQb2xpY3kpKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNpbmcgYSB0cmFuc2FjdGlvbiBoZXJlIHNvIHdlIGhhdmUgYSBjaGFuY2UgdG8gcmVhZCB0aGUgcmVzdWx0XG4gICAgICAgICAgICAgICAgLy8gYmFjayBmcm9tIHRoZSBjYWNoZSBiZWZvcmUgdGhlIHdhdGNoIGNhbGxiYWNrIGZpcmVzIGFzIGEgcmVzdWx0XG4gICAgICAgICAgICAgICAgLy8gb2Ygd3JpdGVRdWVyeSwgc28gd2UgY2FuIHN0b3JlIHRoZSBuZXcgZGlmZiBxdWlldGx5IGFuZCBpZ25vcmVcbiAgICAgICAgICAgICAgICAvLyBpdCB3aGVuIHdlIHJlY2VpdmUgaXQgcmVkdW5kYW50bHkgZnJvbSB0aGUgd2F0Y2ggY2FsbGJhY2suXG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZS5wZXJmb3JtVHJhbnNhY3Rpb24oZnVuY3Rpb24gKGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zaG91bGRXcml0ZShyZXN1bHQsIG9wdGlvbnMudmFyaWFibGVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUud3JpdGVRdWVyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IGRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcndyaXRlOiBjYWNoZVdyaXRlQmVoYXZpb3IgPT09IDEgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLk9WRVJXUklURSAqLyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGFzdFdyaXRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG1Db3VudDogZGVzdHJ1Y3RpdmVNZXRob2RDb3VudHMuZ2V0KF90aGlzLmNhY2hlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiByZXN1bHQgaXMgdGhlIHNhbWUgYXMgdGhlIGxhc3QgcmVzdWx0IHdlIHJlY2VpdmVkIGZyb21cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBuZXR3b3JrIChhbmQgdGhlIHZhcmlhYmxlcyBtYXRjaCB0b28pLCBhdm9pZCB3cml0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgaW50byB0aGUgY2FjaGUgYWdhaW4uIFRoZSB3aXNkb20gb2Ygc2tpcHBpbmcgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUgd3JpdGUgaXMgZmFyIGZyb20gb2J2aW91cywgc2luY2UgYW55IGNhY2hlIHdyaXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3VsZCBiZSB0aGUgb25lIHRoYXQgcHV0cyB0aGUgY2FjaGUgYmFjayBpbnRvIGEgZGVzaXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhdGUsIGZpeGluZyBjb3JydXB0aW9uIG9yIG1pc3NpbmcgZGF0YS4gSG93ZXZlciwgaWYgd2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsd2F5cyB3cml0ZSBldmVyeSBuZXR3b3JrIHJlc3VsdCBpbnRvIHRoZSBjYWNoZSwgd2UgZW5hYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmZXVkcyBiZXR3ZWVuIHF1ZXJpZXMgY29tcGV0aW5nIHRvIHVwZGF0ZSB0aGUgc2FtZSBkYXRhIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNvbXBhdGlibGUgd2F5cywgd2hpY2ggY2FuIGxlYWQgdG8gYW4gZW5kbGVzcyBjeWNsZSBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUgYnJvYWRjYXN0cyBhbmQgdXNlbGVzcyBuZXR3b3JrIHJlcXVlc3RzLiBBcyB3aXRoIGFueVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmV1ZCwgZXZlbnR1YWxseSBvbmUgc2lkZSBtdXN0IHN0ZXAgYmFjayBmcm9tIHRoZSBicmluayxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldHRpbmcgdGhlIG90aGVyIHNpZGUocykgaGF2ZSB0aGUgbGFzdCB3b3JkKHMpLiBUaGVyZSBtYXlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlIG90aGVyIHBvaW50cyB3aGVyZSB3ZSBjb3VsZCBicmVhayB0aGlzIGN5Y2xlLCBzdWNoIGFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaWxlbmNpbmcgdGhlIGJyb2FkY2FzdCBmb3IgY2FjaGUud3JpdGVRdWVyeSAobm90IGEgZ29vZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWRlYSwgc2luY2UgaXQganVzdCBkZWxheXMgdGhlIGZldWQgYSBiaXQpIG9yIHNvbWVob3dcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkaW5nIHRoZSBuZXR3b3JrIHJlcXVlc3QgdGhhdCBqdXN0IGhhcHBlbmVkIChhbHNvIGJhZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIHNlcnZlciBjb3VsZCByZXR1cm4gdXNlZnVsIG5ldyBkYXRhKS4gQWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvcHRpb25zIGNvbnNpZGVyZWQsIHNraXBwaW5nIHRoaXMgY2FjaGUgd3JpdGUgc2VlbXMgdG8gYmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBsZWFzdCBkYW1hZ2luZyBwbGFjZSB0byBicmVhayB0aGUgY3ljbGUsIGJlY2F1c2UgaXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmxlY3RzIHRoZSBpbnR1aXRpb24gdGhhdCB3ZSByZWNlbnRseSB3cm90ZSB0aGlzIGV4YWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgaW50byB0aGUgY2FjaGUsIHNvIHRoZSBjYWNoZSAqc2hvdWxkKiBhbHJlYWR5L3N0aWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250YWluIHRoaXMgZGF0YS4gSWYgc29tZSBvdGhlciBxdWVyeSBoYXMgY2xvYmJlcmVkIHRoYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRhdGEgaW4gdGhlIG1lYW50aW1lLCB0aGF0J3MgdG9vIGJhZCwgYnV0IHRoZXJlIHdpbGwgYmUgbm9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpbm5lcnMgaWYgZXZlcnkgcXVlcnkgYmxpbmRseSByZXZlcnRzIHRvIGl0cyBvd24gdmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2YgdGhlIGRhdGEuIFRoaXMgYXBwcm9hY2ggYWxzbyBnaXZlcyB0aGUgbmV0d29yayBhIGNoYW5jZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gcmV0dXJuIG5ldyBkYXRhLCB3aGljaCB3aWxsIGJlIHdyaXR0ZW4gaW50byB0aGUgY2FjaGUgYXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzdWFsLCBub3RpZnlpbmcgb25seSB0aG9zZSBxdWVyaWVzIHRoYXQgYXJlIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZmZlY3RlZCBieSB0aGUgY2FjaGUgdXBkYXRlcywgYXMgdXN1YWwuIEluIHRoZSBmdXR1cmUsIGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVuIG1vcmUgc29waGlzdGljYXRlZCBjYWNoZSBjb3VsZCBwZXJoYXBzIHByZXZlbnQgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1pdGlnYXRlIHRoZSBjbG9iYmVyaW5nIHNvbWVob3csIGJ1dCB0aGF0IHdvdWxkIG1ha2UgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFydGljdWxhciBjYWNoZSB3cml0ZSBldmVuIGxlc3MgaW1wb3J0YW50LCBhbmQgdGh1c1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2tpcHBpbmcgaXQgd291bGQgYmUgZXZlbiBzYWZlciB0aGFuIGl0IGlzIHRvZGF5LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmxhc3REaWZmICYmIF90aGlzLmxhc3REaWZmLmRpZmYuY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXVzZSBkYXRhIGZyb20gdGhlIGxhc3QgZ29vZCAoY29tcGxldGUpIGRpZmYgdGhhdCB3ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY2VpdmVkLCB3aGVuIHBvc3NpYmxlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhID0gX3RoaXMubGFzdERpZmYuZGlmZi5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHByZXZpb3VzIHRoaXMuZGlmZiB3YXMgaW5jb21wbGV0ZSwgZmFsbCB0aHJvdWdoIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZS1yZWFkaW5nIHRoZSBsYXRlc3QgZGF0YSB3aXRoIGNhY2hlLmRpZmYsIGJlbG93LlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBkaWZmT3B0aW9ucyA9IF90aGlzLmdldERpZmZPcHRpb25zKG9wdGlvbnMudmFyaWFibGVzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpZmYgPSBtdXRlRGVwcmVjYXRpb25zKFwiY2Fub25pemVSZXN1bHRzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZS5kaWZmKGRpZmZPcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgdGhlIFF1ZXJ5TWFuYWdlciBzdG9wcyB0aGlzIFF1ZXJ5SW5mbyBiZWZvcmUgaXRzXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdHMgYXJlIGRlbGl2ZXJlZCwgaXQncyBpbXBvcnRhbnQgdG8gYXZvaWQgcmVzdGFydGluZyB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUgd2F0Y2ggd2hlbiBtYXJrUmVzdWx0IGlzIGNhbGxlZC4gV2UgYWxzbyBhdm9pZCB1cGRhdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgd2F0Y2ggaWYgd2UgYXJlIHdyaXRpbmcgYSByZXN1bHQgdGhhdCBkb2Vzbid0IG1hdGNoIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHZhcmlhYmxlcyB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnMgZnJvbSBicm9hZGNhc3RpbmcgdGhlIHdyb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5zdG9wcGVkICYmIGVxdWFsKF90aGlzLnZhcmlhYmxlcywgb3B0aW9ucy52YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBbnkgdGltZSB3ZSdyZSBhYm91dCB0byB1cGRhdGUgdGhpcy5kaWZmLCB3ZSBuZWVkIHRvIG1ha2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN1cmUgd2UndmUgc3RhcnRlZCB3YXRjaGluZyB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVXYXRjaChvcHRpb25zLnZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UncmUgYWxsb3dlZCB0byB3cml0ZSB0byB0aGUgY2FjaGUsIGFuZCB3ZSBjYW4gcmVhZCBhXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXBsZXRlIHJlc3VsdCBmcm9tIHRoZSBjYWNoZSwgdXBkYXRlIHJlc3VsdC5kYXRhIHRvIGJlIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgZnJvbSB0aGUgY2FjaGUsIHJhdGhlciB0aGFuIHRoZSByYXcgbmV0d29yayByZXN1bHQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCB3aXRob3V0IHNldERpZmYgdG8gYXZvaWQgdHJpZ2dlcmluZyBhIG5vdGlmeSBjYWxsLCBzaW5jZVxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBoYXZlIG90aGVyIHdheXMgb2Ygbm90aWZ5aW5nIGZvciB0aGlzIHJlc3VsdC5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlTGFzdERpZmYoZGlmZiwgZGlmZk9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSBkaWZmLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGUgPSB2b2lkIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFF1ZXJ5SW5mby5wcm90b3R5cGUubWFya1JlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm5ldHdvcmtFcnJvciA9IG51bGw7XG4gICAgICAgIHJldHVybiAodGhpcy5uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5yZWFkeSk7XG4gICAgfTtcbiAgICBRdWVyeUluZm8ucHJvdG90eXBlLm1hcmtFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMubmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMuZXJyb3I7XG4gICAgICAgIHRoaXMubGFzdFdyaXRlID0gdm9pZCAwO1xuICAgICAgICAoX2EgPSB0aGlzLm9ic2VydmFibGVRdWVyeSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW1wicmVzZXROb3RpZmljYXRpb25zXCJdKCk7XG4gICAgICAgIGlmIChlcnJvci5ncmFwaFFMRXJyb3JzKSB7XG4gICAgICAgICAgICB0aGlzLmdyYXBoUUxFcnJvcnMgPSBlcnJvci5ncmFwaFFMRXJyb3JzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvci5uZXR3b3JrRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMubmV0d29ya0Vycm9yID0gZXJyb3IubmV0d29ya0Vycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9O1xuICAgIHJldHVybiBRdWVyeUluZm87XG59KCkpO1xuZXhwb3J0IHsgUXVlcnlJbmZvIH07XG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkV3JpdGVSZXN1bHQocmVzdWx0LCBlcnJvclBvbGljeSkge1xuICAgIGlmIChlcnJvclBvbGljeSA9PT0gdm9pZCAwKSB7IGVycm9yUG9saWN5ID0gXCJub25lXCI7IH1cbiAgICB2YXIgaWdub3JlRXJyb3JzID0gZXJyb3JQb2xpY3kgPT09IFwiaWdub3JlXCIgfHwgZXJyb3JQb2xpY3kgPT09IFwiYWxsXCI7XG4gICAgdmFyIHdyaXRlV2l0aEVycm9ycyA9ICFncmFwaFFMUmVzdWx0SGFzRXJyb3IocmVzdWx0KTtcbiAgICBpZiAoIXdyaXRlV2l0aEVycm9ycyAmJiBpZ25vcmVFcnJvcnMgJiYgcmVzdWx0LmRhdGEpIHtcbiAgICAgICAgd3JpdGVXaXRoRXJyb3JzID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHdyaXRlV2l0aEVycm9ycztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXJ5SW5mby5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fYXNzaWduLCBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIG5ld0ludmFyaWFudEVycm9yIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9nbG9iYWxzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBlcXVhbCB9IGZyb20gXCJAd3J5L2VxdWFsaXR5XCI7XG5pbXBvcnQgeyBleGVjdXRlIH0gZnJvbSBcIi4uL2xpbmsvY29yZS9pbmRleC5qc1wiO1xuaW1wb3J0IHsgYWRkTm9uUmVhY3RpdmVUb05hbWVkRnJhZ21lbnRzLCBoYXNEaXJlY3RpdmVzLCBpc0V4ZWN1dGlvblBhdGNoSW5jcmVtZW50YWxSZXN1bHQsIGlzRXhlY3V0aW9uUGF0Y2hSZXN1bHQsIGlzRnVsbHlVbm1hc2tlZE9wZXJhdGlvbiwgcmVtb3ZlRGlyZWN0aXZlc0Zyb21Eb2N1bWVudCwgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjYW5vbmljYWxTdHJpbmdpZnkgfSBmcm9tIFwiLi4vY2FjaGUvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRWYWx1ZXMsIGdldE9wZXJhdGlvbkRlZmluaXRpb24sIGdldE9wZXJhdGlvbk5hbWUsIGhhc0NsaWVudEV4cG9ydHMsIGdyYXBoUUxSZXN1bHRIYXNFcnJvciwgZ2V0R3JhcGhRTEVycm9yc0Zyb21SZXN1bHQsIE9ic2VydmFibGUsIGFzeW5jTWFwLCBpc05vbkVtcHR5QXJyYXksIENvbmNhc3QsIG1ha2VVbmlxdWVJZCwgaXNEb2N1bWVudE5vZGUsIGlzTm9uTnVsbE9iamVjdCwgRG9jdW1lbnRUcmFuc2Zvcm0sIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgbWVyZ2VJbmNyZW1lbnRhbERhdGEgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2NvbW1vbi9pbmNyZW1lbnRhbFJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgQXBvbGxvRXJyb3IsIGlzQXBvbGxvRXJyb3IsIGdyYXBoUUxSZXN1bHRIYXNQcm90b2NvbEVycm9ycywgfSBmcm9tIFwiLi4vZXJyb3JzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlUXVlcnksIGxvZ01pc3NpbmdGaWVsZEVycm9ycyB9IGZyb20gXCIuL09ic2VydmFibGVRdWVyeS5qc1wiO1xuaW1wb3J0IHsgTmV0d29ya1N0YXR1cywgaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0IH0gZnJvbSBcIi4vbmV0d29ya1N0YXR1cy5qc1wiO1xuaW1wb3J0IHsgUXVlcnlJbmZvLCBzaG91bGRXcml0ZVJlc3VsdCwgfSBmcm9tIFwiLi9RdWVyeUluZm8uanNcIjtcbmltcG9ydCB7IFBST1RPQ09MX0VSUk9SU19TWU1CT0wgfSBmcm9tIFwiLi4vZXJyb3JzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBwcmludCB9IGZyb20gXCIuLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgSUdOT1JFID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmltcG9ydCB7IFRyaWUgfSBmcm9tIFwiQHdyeS90cmllXCI7XG5pbXBvcnQgeyBBdXRvQ2xlYW5lZFdlYWtDYWNoZSwgY2FjaGVTaXplcyB9IGZyb20gXCIuLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IG1hc2tGcmFnbWVudCwgbWFza09wZXJhdGlvbiB9IGZyb20gXCIuLi9tYXNraW5nL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBtdXRlRGVwcmVjYXRpb25zIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9kZXByZWNhdGlvbi9pbmRleC5qc1wiO1xudmFyIFF1ZXJ5TWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBRdWVyeU1hbmFnZXIob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmNsaWVudEF3YXJlbmVzcyA9IHt9O1xuICAgICAgICAvLyBBbGwgdGhlIHF1ZXJpZXMgdGhhdCB0aGUgUXVlcnlNYW5hZ2VyIGlzIGN1cnJlbnRseSBtYW5hZ2luZyAobm90XG4gICAgICAgIC8vIGluY2x1ZGluZyBtdXRhdGlvbnMgYW5kIHN1YnNjcmlwdGlvbnMpLlxuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIE1hcHMgZnJvbSBxdWVyeUlkIHN0cmluZ3MgdG8gUHJvbWlzZSByZWplY3Rpb24gZnVuY3Rpb25zIGZvclxuICAgICAgICAvLyBjdXJyZW50bHkgYWN0aXZlIHF1ZXJpZXMgYW5kIGZldGNoZXMuXG4gICAgICAgIC8vIFVzZSBwcm90ZWN0ZWQgaW5zdGVhZCBvZiBwcml2YXRlIGZpZWxkIHNvXG4gICAgICAgIC8vIEBhcG9sbG8vZXhwZXJpbWVudGFsLW5leHRqcy1hcHAtc3VwcG9ydCBjYW4gYWNjZXNzIHR5cGUgaW5mby5cbiAgICAgICAgdGhpcy5mZXRjaENhbmNlbEZucyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1DYWNoZSA9IG5ldyBBdXRvQ2xlYW5lZFdlYWtDYWNoZShjYWNoZVNpemVzW1wicXVlcnlNYW5hZ2VyLmdldERvY3VtZW50SW5mb1wiXSB8fFxuICAgICAgICAgICAgMjAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcInF1ZXJ5TWFuYWdlci5nZXREb2N1bWVudEluZm9cIl0gKi8pO1xuICAgICAgICB0aGlzLnF1ZXJ5SWRDb3VudGVyID0gMTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SWRDb3VudGVyID0gMTtcbiAgICAgICAgdGhpcy5tdXRhdGlvbklkQ291bnRlciA9IDE7XG4gICAgICAgIC8vIFVzZSBwcm90ZWN0ZWQgaW5zdGVhZCBvZiBwcml2YXRlIGZpZWxkIHNvXG4gICAgICAgIC8vIEBhcG9sbG8vZXhwZXJpbWVudGFsLW5leHRqcy1hcHAtc3VwcG9ydCBjYW4gYWNjZXNzIHR5cGUgaW5mby5cbiAgICAgICAgdGhpcy5pbkZsaWdodExpbmtPYnNlcnZhYmxlcyA9IG5ldyBUcmllKGZhbHNlKTtcbiAgICAgICAgdGhpcy5ub0NhY2hlV2FybmluZ3NCeVF1ZXJ5SWQgPSBuZXcgU2V0KCk7XG4gICAgICAgIHZhciBkZWZhdWx0RG9jdW1lbnRUcmFuc2Zvcm0gPSBuZXcgRG9jdW1lbnRUcmFuc2Zvcm0oZnVuY3Rpb24gKGRvY3VtZW50KSB7IHJldHVybiBfdGhpcy5jYWNoZS50cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudCk7IH0sIFxuICAgICAgICAvLyBBbGxvdyB0aGUgYXBvbGxvIGNhY2hlIHRvIG1hbmFnZSBpdHMgb3duIHRyYW5zZm9ybSBjYWNoZXNcbiAgICAgICAgeyBjYWNoZTogZmFsc2UgfSk7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBvcHRpb25zLmNhY2hlO1xuICAgICAgICB0aGlzLmxpbmsgPSBvcHRpb25zLmxpbms7XG4gICAgICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSBvcHRpb25zLmRlZmF1bHRPcHRpb25zO1xuICAgICAgICB0aGlzLnF1ZXJ5RGVkdXBsaWNhdGlvbiA9IG9wdGlvbnMucXVlcnlEZWR1cGxpY2F0aW9uO1xuICAgICAgICB0aGlzLmNsaWVudEF3YXJlbmVzcyA9IG9wdGlvbnMuY2xpZW50QXdhcmVuZXNzO1xuICAgICAgICB0aGlzLmxvY2FsU3RhdGUgPSBvcHRpb25zLmxvY2FsU3RhdGU7XG4gICAgICAgIHRoaXMuc3NyTW9kZSA9IG9wdGlvbnMuc3NyTW9kZTtcbiAgICAgICAgdGhpcy5hc3N1bWVJbW11dGFibGVSZXN1bHRzID0gb3B0aW9ucy5hc3N1bWVJbW11dGFibGVSZXN1bHRzO1xuICAgICAgICB0aGlzLmRhdGFNYXNraW5nID0gb3B0aW9ucy5kYXRhTWFza2luZztcbiAgICAgICAgdmFyIGRvY3VtZW50VHJhbnNmb3JtID0gb3B0aW9ucy5kb2N1bWVudFRyYW5zZm9ybTtcbiAgICAgICAgdGhpcy5kb2N1bWVudFRyYW5zZm9ybSA9XG4gICAgICAgICAgICBkb2N1bWVudFRyYW5zZm9ybSA/XG4gICAgICAgICAgICAgICAgZGVmYXVsdERvY3VtZW50VHJhbnNmb3JtXG4gICAgICAgICAgICAgICAgICAgIC5jb25jYXQoZG9jdW1lbnRUcmFuc2Zvcm0pXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjdXN0b20gZG9jdW1lbnQgdHJhbnNmb3JtIG1heSBhZGQgbmV3IGZyYWdtZW50IHNwcmVhZHMgb3IgbmV3XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpZWxkIHNlbGVjdGlvbnMsIHNvIHdlIHdhbnQgdG8gZ2l2ZSB0aGUgY2FjaGUgYSBjaGFuY2UgdG8gcnVuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFnYWluLiBGb3IgZXhhbXBsZSwgdGhlIEluTWVtb3J5Q2FjaGUgYWRkcyBfX3R5cGVuYW1lIHRvIGZpZWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdGlvbnMgYW5kIGZyYWdtZW50cyBmcm9tIHRoZSBmcmFnbWVudCByZWdpc3RyeS5cbiAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChkZWZhdWx0RG9jdW1lbnRUcmFuc2Zvcm0pXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0RG9jdW1lbnRUcmFuc2Zvcm07XG4gICAgICAgIHRoaXMuZGVmYXVsdENvbnRleHQgPSBvcHRpb25zLmRlZmF1bHRDb250ZXh0IHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGlmICgodGhpcy5vbkJyb2FkY2FzdCA9IG9wdGlvbnMub25Ccm9hZGNhc3QpKSB7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uU3RvcmUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgdGhpcyBtZXRob2QgdG8gdGVybWluYXRlIGFueSBhY3RpdmUgcXVlcnkgcHJvY2Vzc2VzLCBtYWtpbmcgaXQgc2FmZVxuICAgICAqIHRvIGRpc3Bvc2Ugb2YgdGhpcyBRdWVyeU1hbmFnZXIgaW5zdGFuY2UuXG4gICAgICovXG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAoX2luZm8sIHF1ZXJ5SWQpIHtcbiAgICAgICAgICAgIF90aGlzLnN0b3BRdWVyeU5vQnJvYWRjYXN0KHF1ZXJ5SWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYW5jZWxQZW5kaW5nRmV0Y2hlcyhuZXdJbnZhcmlhbnRFcnJvcigzNSkpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5jYW5jZWxQZW5kaW5nRmV0Y2hlcyA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLmZldGNoQ2FuY2VsRm5zLmZvckVhY2goZnVuY3Rpb24gKGNhbmNlbCkgeyByZXR1cm4gY2FuY2VsKGVycm9yKTsgfSk7XG4gICAgICAgIHRoaXMuZmV0Y2hDYW5jZWxGbnMuY2xlYXIoKTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUubXV0YXRlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgdmFyIG11dGF0aW9uSWQsIGhhc0NsaWVudEV4cG9ydHMsIG11dGF0aW9uU3RvcmVWYWx1ZSwgaXNPcHRpbWlzdGljLCBzZWxmO1xuICAgICAgICAgICAgdmFyIF9jLCBfZDtcbiAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IF9iLm11dGF0aW9uLCB2YXJpYWJsZXMgPSBfYi52YXJpYWJsZXMsIG9wdGltaXN0aWNSZXNwb25zZSA9IF9iLm9wdGltaXN0aWNSZXNwb25zZSwgdXBkYXRlUXVlcmllcyA9IF9iLnVwZGF0ZVF1ZXJpZXMsIF9lID0gX2IucmVmZXRjaFF1ZXJpZXMsIHJlZmV0Y2hRdWVyaWVzID0gX2UgPT09IHZvaWQgMCA/IFtdIDogX2UsIF9mID0gX2IuYXdhaXRSZWZldGNoUXVlcmllcywgYXdhaXRSZWZldGNoUXVlcmllcyA9IF9mID09PSB2b2lkIDAgPyBmYWxzZSA6IF9mLCB1cGRhdGVXaXRoUHJveHlGbiA9IF9iLnVwZGF0ZSwgb25RdWVyeVVwZGF0ZWQgPSBfYi5vblF1ZXJ5VXBkYXRlZCwgX2cgPSBfYi5mZXRjaFBvbGljeSwgZmV0Y2hQb2xpY3kgPSBfZyA9PT0gdm9pZCAwID8gKChfYyA9IHRoaXMuZGVmYXVsdE9wdGlvbnMubXV0YXRlKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZmV0Y2hQb2xpY3kpIHx8IFwibmV0d29yay1vbmx5XCIgOiBfZywgX2ggPSBfYi5lcnJvclBvbGljeSwgZXJyb3JQb2xpY3kgPSBfaCA9PT0gdm9pZCAwID8gKChfZCA9IHRoaXMuZGVmYXVsdE9wdGlvbnMubXV0YXRlKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuZXJyb3JQb2xpY3kpIHx8IFwibm9uZVwiIDogX2gsIGtlZXBSb290RmllbGRzID0gX2Iua2VlcFJvb3RGaWVsZHMsIGNvbnRleHQgPSBfYi5jb250ZXh0O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfaikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2oubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW52YXJpYW50KG11dGF0aW9uLCAzNik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhcmlhbnQoZmV0Y2hQb2xpY3kgPT09IFwibmV0d29yay1vbmx5XCIgfHwgZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIiwgMzcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25JZCA9IHRoaXMuZ2VuZXJhdGVNdXRhdGlvbklkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbiA9IHRoaXMuY2FjaGUudHJhbnNmb3JtRm9yTGluayh0aGlzLnRyYW5zZm9ybShtdXRhdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2xpZW50RXhwb3J0cyA9IHRoaXMuZ2V0RG9jdW1lbnRJbmZvKG11dGF0aW9uKS5oYXNDbGllbnRFeHBvcnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzID0gdGhpcy5nZXRWYXJpYWJsZXMobXV0YXRpb24sIHZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc0NsaWVudEV4cG9ydHMpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0YXRlLmFkZEV4cG9ydGVkVmFyaWFibGVzKG11dGF0aW9uLCB2YXJpYWJsZXMsIGNvbnRleHQpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzID0gKF9qLnNlbnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfai5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uU3RvcmVWYWx1ZSA9IHRoaXMubXV0YXRpb25TdG9yZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLm11dGF0aW9uU3RvcmVbbXV0YXRpb25JZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uOiBtdXRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNPcHRpbWlzdGljID0gb3B0aW1pc3RpY1Jlc3BvbnNlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrTXV0YXRpb25PcHRpbWlzdGljKG9wdGltaXN0aWNSZXNwb25zZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbklkOiBtdXRhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogbXV0YXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaFBvbGljeTogZmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yUG9saWN5OiBlcnJvclBvbGljeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUXVlcmllczogdXBkYXRlUXVlcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiB1cGRhdGVXaXRoUHJveHlGbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2VlcFJvb3RGaWVsZHM6IGtlZXBSb290RmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhc3luY01hcChzZWxmLmdldE9ic2VydmFibGVGcm9tTGluayhtdXRhdGlvbiwgX19hc3NpZ24oX19hc3NpZ24oe30sIGNvbnRleHQpLCB7IG9wdGltaXN0aWNSZXNwb25zZTogaXNPcHRpbWlzdGljID8gb3B0aW1pc3RpY1Jlc3BvbnNlIDogdm9pZCAwIH0pLCB2YXJpYWJsZXMsIHt9LCBmYWxzZSksIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncmFwaFFMUmVzdWx0SGFzRXJyb3IocmVzdWx0KSAmJiBlcnJvclBvbGljeSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXBvbGxvRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFwaFFMRXJyb3JzOiBnZXRHcmFwaFFMRXJyb3JzRnJvbVJlc3VsdChyZXN1bHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uU3RvcmVWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uU3RvcmVWYWx1ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25TdG9yZVZhbHVlLmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZVJlc3VsdCA9IF9fYXNzaWduKHt9LCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWZldGNoUXVlcmllcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXRjaFF1ZXJpZXMgPSByZWZldGNoUXVlcmllcyhzdG9yZVJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JQb2xpY3kgPT09IFwiaWdub3JlXCIgJiYgZ3JhcGhRTFJlc3VsdEhhc0Vycm9yKHN0b3JlUmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzdG9yZVJlc3VsdC5lcnJvcnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5tYXJrTXV0YXRpb25SZXN1bHQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uSWQ6IG11dGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBzdG9yZVJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogbXV0YXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IGZldGNoUG9saWN5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yUG9saWN5OiBlcnJvclBvbGljeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogdXBkYXRlV2l0aFByb3h5Rm4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUXVlcmllczogdXBkYXRlUXVlcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdFJlZmV0Y2hRdWVyaWVzOiBhd2FpdFJlZmV0Y2hRdWVyaWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmV0Y2hRdWVyaWVzOiByZWZldGNoUXVlcmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVPcHRpbWlzdGljOiBpc09wdGltaXN0aWMgPyBtdXRhdGlvbklkIDogdm9pZCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUXVlcnlVcGRhdGVkOiBvblF1ZXJ5VXBkYXRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWVwUm9vdEZpZWxkczoga2VlcFJvb3RGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChzdG9yZVJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIG11dGF0aW9ucyBtaWdodCByZWNlaXZlIG11bHRpcGxlIHBheWxvYWRzIGZyb20gdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBvbGxvTGluayBjaGFpbiAoZS5nLiB3aGVuIHVzZWQgd2l0aCBAZGVmZXIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHJlc29sdmUgd2l0aCBhIFNpbmdsZUV4ZWN1dGlvblJlc3VsdCBvciBhZnRlciB0aGUgZmluYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRpb25QYXRjaFJlc3VsdCBoYXMgYXJyaXZlZCBhbmQgd2UgaGF2ZSBhc3NlbWJsZWQgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbXVsdGlwYXJ0IHJlc3BvbnNlIGludG8gYSBzaW5nbGUgcmVzdWx0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKFwiaGFzTmV4dFwiIGluIHN0b3JlUmVzdWx0KSB8fCBzdG9yZVJlc3VsdC5oYXNOZXh0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF9fYXNzaWduKF9fYXNzaWduKHt9LCBzdG9yZVJlc3VsdCksIHsgZGF0YTogc2VsZi5tYXNrT3BlcmF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogbXV0YXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc3RvcmVSZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaFBvbGljeTogZmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG11dGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uU3RvcmVWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvblN0b3JlVmFsdWUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvblN0b3JlVmFsdWUuZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc09wdGltaXN0aWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWNoZS5yZW1vdmVPcHRpbWlzdGljKG11dGF0aW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJyb2FkY2FzdFF1ZXJpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyIGluc3RhbmNlb2YgQXBvbGxvRXJyb3IgPyBlcnIgOiAobmV3IEFwb2xsb0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29ya0Vycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLm1hcmtNdXRhdGlvblJlc3VsdCA9IGZ1bmN0aW9uIChtdXRhdGlvbiwgY2FjaGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGNhY2hlID09PSB2b2lkIDApIHsgY2FjaGUgPSB0aGlzLmNhY2hlOyB9XG4gICAgICAgIHZhciByZXN1bHQgPSBtdXRhdGlvbi5yZXN1bHQ7XG4gICAgICAgIHZhciBjYWNoZVdyaXRlcyA9IFtdO1xuICAgICAgICB2YXIgc2tpcENhY2hlID0gbXV0YXRpb24uZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIjtcbiAgICAgICAgaWYgKCFza2lwQ2FjaGUgJiYgc2hvdWxkV3JpdGVSZXN1bHQocmVzdWx0LCBtdXRhdGlvbi5lcnJvclBvbGljeSkpIHtcbiAgICAgICAgICAgIGlmICghaXNFeGVjdXRpb25QYXRjaEluY3JlbWVudGFsUmVzdWx0KHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICBjYWNoZVdyaXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YUlkOiBcIlJPT1RfTVVUQVRJT05cIixcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IG11dGF0aW9uLmRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG11dGF0aW9uLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0V4ZWN1dGlvblBhdGNoSW5jcmVtZW50YWxSZXN1bHQocmVzdWx0KSAmJlxuICAgICAgICAgICAgICAgIGlzTm9uRW1wdHlBcnJheShyZXN1bHQuaW5jcmVtZW50YWwpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmYgPSBjYWNoZS5kaWZmKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IFwiUk9PVF9NVVRBVElPTlwiLFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY2FjaGUgY29tcGxhaW5zIGlmIHBhc3NlZCBhIG11dGF0aW9uIHdoZXJlIGl0IGV4cGVjdHMgYVxuICAgICAgICAgICAgICAgICAgICAvLyBxdWVyeSwgc28gd2UgdHJhbnNmb3JtIG11dGF0aW9ucyBhbmQgc3Vic2NyaXB0aW9ucyB0byBxdWVyaWVzXG4gICAgICAgICAgICAgICAgICAgIC8vIChvbmx5IG9uY2UsIHRoYW5rcyB0byB0aGlzLnRyYW5zZm9ybUNhY2hlKS5cbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHRoaXMuZ2V0RG9jdW1lbnRJbmZvKG11dGF0aW9uLmRvY3VtZW50KS5hc1F1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG11dGF0aW9uLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW1pc3RpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBtZXJnZWREYXRhID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmIChkaWZmLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWREYXRhID0gbWVyZ2VJbmNyZW1lbnRhbERhdGEoZGlmZi5yZXN1bHQsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVyZ2VkRGF0YSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBjYXN0IHRoZSBFeGVjdXRpb25QYXRjaFJlc3VsdCB0byBGZXRjaFJlc3VsdCBoZXJlIHNpbmNlXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGlvblBhdGNoUmVzdWx0IG5ldmVyIGhhcyBgZGF0YWAgd2hlbiByZXR1cm5lZCBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSBtZXJnZWREYXRhO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVdyaXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogbWVyZ2VkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFJZDogXCJST09UX01VVEFUSU9OXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogbXV0YXRpb24uZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG11dGF0aW9uLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHVwZGF0ZVF1ZXJpZXNfMSA9IG11dGF0aW9uLnVwZGF0ZVF1ZXJpZXM7XG4gICAgICAgICAgICBpZiAodXBkYXRlUXVlcmllc18xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzLmZvckVhY2goZnVuY3Rpb24gKF9hLCBxdWVyeUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlUXVlcnkgPSBfYS5vYnNlcnZhYmxlUXVlcnk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeU5hbWUgPSBvYnNlcnZhYmxlUXVlcnkgJiYgb2JzZXJ2YWJsZVF1ZXJ5LnF1ZXJ5TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeU5hbWUgfHwgIWhhc093blByb3BlcnR5LmNhbGwodXBkYXRlUXVlcmllc18xLCBxdWVyeU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZXIgPSB1cGRhdGVRdWVyaWVzXzFbcXVlcnlOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9iID0gX3RoaXMucXVlcmllcy5nZXQocXVlcnlJZCksIGRvY3VtZW50ID0gX2IuZG9jdW1lbnQsIHZhcmlhYmxlcyA9IF9iLnZhcmlhYmxlcztcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCB0aGUgY3VycmVudCBxdWVyeSByZXN1bHQgZnJvbSB0aGUgc3RvcmUuXG4gICAgICAgICAgICAgICAgICAgIHZhciBfYyA9IGNhY2hlLmRpZmYoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IGRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGltaXN0aWM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB9KSwgY3VycmVudFF1ZXJ5UmVzdWx0ID0gX2MucmVzdWx0LCBjb21wbGV0ZSA9IF9jLmNvbXBsZXRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGxldGUgJiYgY3VycmVudFF1ZXJ5UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSdW4gb3VyIHJlZHVjZXIgdXNpbmcgdGhlIGN1cnJlbnQgcXVlcnkgcmVzdWx0IGFuZCB0aGUgbXV0YXRpb24gcmVzdWx0LlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRRdWVyeVJlc3VsdCA9IHVwZGF0ZXIoY3VycmVudFF1ZXJ5UmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25SZXN1bHQ6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeU5hbWU6IChkb2N1bWVudCAmJiBnZXRPcGVyYXRpb25OYW1lKGRvY3VtZW50KSkgfHwgdm9pZCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5VmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBtb2RpZmllZCByZXN1bHQgYmFjayBpbnRvIHRoZSBzdG9yZSBpZiB3ZSBnb3QgYSBuZXcgcmVzdWx0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRRdWVyeVJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlV3JpdGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IG5leHRRdWVyeVJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUlkOiBcIlJPT1RfUVVFUllcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IGRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZVdyaXRlcy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAobXV0YXRpb24ucmVmZXRjaFF1ZXJpZXMgfHwgXCJcIikubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgbXV0YXRpb24udXBkYXRlIHx8XG4gICAgICAgICAgICBtdXRhdGlvbi5vblF1ZXJ5VXBkYXRlZCB8fFxuICAgICAgICAgICAgbXV0YXRpb24ucmVtb3ZlT3B0aW1pc3RpYykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdHNfMSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yZWZldGNoUXVlcmllcyh7XG4gICAgICAgICAgICAgICAgdXBkYXRlQ2FjaGU6IGZ1bmN0aW9uIChjYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNraXBDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVXcml0ZXMuZm9yRWFjaChmdW5jdGlvbiAod3JpdGUpIHsgcmV0dXJuIGNhY2hlLndyaXRlKHdyaXRlKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG11dGF0aW9uIGhhcyBzb21lIHdyaXRlcyBhc3NvY2lhdGVkIHdpdGggaXQgdGhlbiB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIGFwcGx5IHRob3NlIHdyaXRlcyB0byB0aGUgc3RvcmUgYnkgcnVubmluZyB0aGlzIHJlZHVjZXIgYWdhaW4gd2l0aFxuICAgICAgICAgICAgICAgICAgICAvLyBhIHdyaXRlIGFjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZSA9IG11dGF0aW9uLnVwZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgcmVzdWx0IGlzIGEgU2luZ2xlRXhlY3V0aW9uUmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAvLyBvciB0aGUgZmluYWwgRXhlY3V0aW9uUGF0Y2hSZXN1bHQuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0ZpbmFsUmVzdWx0ID0gIWlzRXhlY3V0aW9uUGF0Y2hSZXN1bHQocmVzdWx0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKGlzRXhlY3V0aW9uUGF0Y2hJbmNyZW1lbnRhbFJlc3VsdChyZXN1bHQpICYmICFyZXN1bHQuaGFzTmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2tpcENhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmUtcmVhZCB0aGUgUk9PVF9NVVRBVElPTiBkYXRhIHdlIGp1c3Qgd3JvdGUgaW50byB0aGUgY2FjaGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAodGhlIGZpcnN0IGNhY2hlLndyaXRlIGNhbGwgaW4gdGhlIGNhY2hlV3JpdGVzLmZvckVhY2ggbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFib3ZlKSwgc28gZmllbGQgcmVhZCBmdW5jdGlvbnMgaGF2ZSBhIGNoYW5jZSB0byBydW4gZm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmllbGRzIHdpdGhpbiBtdXRhdGlvbiByZXN1bHQgb2JqZWN0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IGNhY2hlLmRpZmYoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJST09UX01VVEFUSU9OXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjYWNoZSBjb21wbGFpbnMgaWYgcGFzc2VkIGEgbXV0YXRpb24gd2hlcmUgaXQgZXhwZWN0cyBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHF1ZXJ5LCBzbyB3ZSB0cmFuc2Zvcm0gbXV0YXRpb25zIGFuZCBzdWJzY3JpcHRpb25zIHRvIHF1ZXJpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKG9ubHkgb25jZSwgdGhhbmtzIHRvIHRoaXMudHJhbnNmb3JtQ2FjaGUpLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogX3RoaXMuZ2V0RG9jdW1lbnRJbmZvKG11dGF0aW9uLmRvY3VtZW50KS5hc1F1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG11dGF0aW9uLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1pc3RpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaWZmLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXN1bHQpLCB7IGRhdGE6IGRpZmYucmVzdWx0IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJpbmNyZW1lbnRhbFwiIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5pbmNyZW1lbnRhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJoYXNOZXh0XCIgaW4gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0Lmhhc05leHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSByZWNlaXZlZCB0aGUgd2hvbGUgcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlaXRoZXIgYSBTaW5nbGVFeGVjdXRpb25SZXN1bHQgb3IgdGhlIGZpbmFsIEV4ZWN1dGlvblBhdGNoUmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB0aGUgdXBkYXRlIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmluYWxSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoY2FjaGUsIHJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBtdXRhdGlvbi5jb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG11dGF0aW9uLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIERvIHRoaXMgd2l0aCBjYWNoZS5ldmljdCh7IGlkOiAnUk9PVF9NVVRBVElPTicgfSkgYnV0IG1ha2UgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hhbGxvdyB0byBhbGxvdyByb2xsaW5nIGJhY2sgb3B0aW1pc3RpYyBldmljdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2tpcENhY2hlICYmICFtdXRhdGlvbi5rZWVwUm9vdEZpZWxkcyAmJiBpc0ZpbmFsUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5tb2RpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcIlJPT1RfTVVUQVRJT05cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IGZ1bmN0aW9uICh2YWx1ZSwgX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IF9hLmZpZWxkTmFtZSwgREVMRVRFID0gX2EuREVMRVRFO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGROYW1lID09PSBcIl9fdHlwZW5hbWVcIiA/IHZhbHVlIDogREVMRVRFO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogbXV0YXRpb24ucmVmZXRjaFF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgLy8gV3JpdGUgdGhlIGZpbmFsIG11dGF0aW9uLnJlc3VsdCB0byB0aGUgcm9vdCBsYXllciBvZiB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgICAgb3B0aW1pc3RpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBjb3JyZXNwb25kaW5nIG9wdGltaXN0aWMgbGF5ZXIgYXQgdGhlIHNhbWUgdGltZSBhcyB3ZVxuICAgICAgICAgICAgICAgIC8vIHdyaXRlIHRoZSBmaW5hbCBub24tb3B0aW1pc3RpYyByZXN1bHQuXG4gICAgICAgICAgICAgICAgcmVtb3ZlT3B0aW1pc3RpYzogbXV0YXRpb24ucmVtb3ZlT3B0aW1pc3RpYyxcbiAgICAgICAgICAgICAgICAvLyBMZXQgdGhlIGNhbGxlciBvZiBjbGllbnQubXV0YXRlIG9wdGlvbmFsbHkgZGV0ZXJtaW5lIHRoZSByZWZldGNoaW5nXG4gICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgZm9yIHdhdGNoZWQgcXVlcmllcyBhZnRlciB0aGUgbXV0YXRpb24udXBkYXRlIGZ1bmN0aW9uIHJ1bnMuXG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gb25RdWVyeVVwZGF0ZWQgZnVuY3Rpb24gd2FzIHByb3ZpZGVkIGZvciB0aGlzIG11dGF0aW9uLCBwYXNzXG4gICAgICAgICAgICAgICAgLy8gbnVsbCBpbnN0ZWFkIG9mIHVuZGVmaW5lZCB0byBkaXNhYmxlIHRoZSBkZWZhdWx0IHJlZmV0Y2hpbmcgYmVoYXZpb3IuXG4gICAgICAgICAgICAgICAgb25RdWVyeVVwZGF0ZWQ6IG11dGF0aW9uLm9uUXVlcnlVcGRhdGVkIHx8IG51bGwsXG4gICAgICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIHJlc3VsdHNfMS5wdXNoKHJlc3VsdCk7IH0pO1xuICAgICAgICAgICAgaWYgKG11dGF0aW9uLmF3YWl0UmVmZXRjaFF1ZXJpZXMgfHwgbXV0YXRpb24ub25RdWVyeVVwZGF0ZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm5pbmcgYSBwcm9taXNlIGhlcmUgbWFrZXMgdGhlIG11dGF0aW9uIGF3YWl0IHRoYXQgcHJvbWlzZSwgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBpbmNsdWRlIHJlc3VsdHMgaW4gdGhhdCBwcm9taXNlJ3Mgd29yayBpZiBhd2FpdFJlZmV0Y2hRdWVyaWVzIG9yIGFuXG4gICAgICAgICAgICAgICAgLy8gb25RdWVyeVVwZGF0ZWQgZnVuY3Rpb24gd2FzIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVzdWx0c18xKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5tYXJrTXV0YXRpb25PcHRpbWlzdGljID0gZnVuY3Rpb24gKG9wdGltaXN0aWNSZXNwb25zZSwgbXV0YXRpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGRhdGEgPSB0eXBlb2Ygb3B0aW1pc3RpY1Jlc3BvbnNlID09PSBcImZ1bmN0aW9uXCIgP1xuICAgICAgICAgICAgb3B0aW1pc3RpY1Jlc3BvbnNlKG11dGF0aW9uLnZhcmlhYmxlcywgeyBJR05PUkU6IElHTk9SRSB9KVxuICAgICAgICAgICAgOiBvcHRpbWlzdGljUmVzcG9uc2U7XG4gICAgICAgIGlmIChkYXRhID09PSBJR05PUkUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhY2hlLnJlY29yZE9wdGltaXN0aWNUcmFuc2FjdGlvbihmdW5jdGlvbiAoY2FjaGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubWFya011dGF0aW9uUmVzdWx0KF9fYXNzaWduKF9fYXNzaWduKHt9LCBtdXRhdGlvbiksIHsgcmVzdWx0OiB7IGRhdGE6IGRhdGEgfSB9KSwgY2FjaGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBtdXRhdGlvbi5tdXRhdGlvbklkKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmZldGNoUXVlcnkgPSBmdW5jdGlvbiAocXVlcnlJZCwgb3B0aW9ucywgbmV0d29ya1N0YXR1cykge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaENvbmNhc3RXaXRoSW5mbyh0aGlzLmdldE9yQ3JlYXRlUXVlcnkocXVlcnlJZCksIG9wdGlvbnMsIG5ldHdvcmtTdGF0dXMpLmNvbmNhc3QucHJvbWlzZTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuZ2V0UXVlcnlTdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0b3JlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5xdWVyaWVzLmZvckVhY2goZnVuY3Rpb24gKGluZm8sIHF1ZXJ5SWQpIHtcbiAgICAgICAgICAgIHN0b3JlW3F1ZXJ5SWRdID0ge1xuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogaW5mby52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgbmV0d29ya1N0YXR1czogaW5mby5uZXR3b3JrU3RhdHVzLFxuICAgICAgICAgICAgICAgIG5ldHdvcmtFcnJvcjogaW5mby5uZXR3b3JrRXJyb3IsXG4gICAgICAgICAgICAgICAgZ3JhcGhRTEVycm9yczogaW5mby5ncmFwaFFMRXJyb3JzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzdG9yZTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUucmVzZXRFcnJvcnMgPSBmdW5jdGlvbiAocXVlcnlJZCkge1xuICAgICAgICB2YXIgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeUlkKTtcbiAgICAgICAgaWYgKHF1ZXJ5SW5mbykge1xuICAgICAgICAgICAgcXVlcnlJbmZvLm5ldHdvcmtFcnJvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHF1ZXJ5SW5mby5ncmFwaFFMRXJyb3JzID0gW107XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50VHJhbnNmb3JtLnRyYW5zZm9ybURvY3VtZW50KGRvY3VtZW50KTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuZ2V0RG9jdW1lbnRJbmZvID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1DYWNoZSA9IHRoaXMudHJhbnNmb3JtQ2FjaGU7XG4gICAgICAgIGlmICghdHJhbnNmb3JtQ2FjaGUuaGFzKGRvY3VtZW50KSkge1xuICAgICAgICAgICAgdmFyIGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBUaGVzZSB0aHJlZSBjYWxscyAoaGFzQ2xpZW50RXhwb3J0cywgc2hvdWxkRm9yY2VSZXNvbHZlcnMsIGFuZFxuICAgICAgICAgICAgICAgIC8vIHVzZXNOb25yZWFjdGl2ZURpcmVjdGl2ZSkgYXJlIHBlcmZvcm1pbmcgaW5kZXBlbmRlbnQgZnVsbCB0cmF2ZXJzYWxzXG4gICAgICAgICAgICAgICAgLy8gb2YgdGhlIHRyYW5zZm9ybWVkIGRvY3VtZW50LiBXZSBzaG91bGQgY29uc2lkZXIgbWVyZ2luZyB0aGVzZVxuICAgICAgICAgICAgICAgIC8vIHRyYXZlcnNhbHMgaW50byBhIHNpbmdsZSBwYXNzIGluIHRoZSBmdXR1cmUsIHRob3VnaCB0aGUgd29yayBpc1xuICAgICAgICAgICAgICAgIC8vIGNhY2hlZCBhZnRlciB0aGUgZmlyc3QgdGltZS5cbiAgICAgICAgICAgICAgICBoYXNDbGllbnRFeHBvcnRzOiBoYXNDbGllbnRFeHBvcnRzKGRvY3VtZW50KSxcbiAgICAgICAgICAgICAgICBoYXNGb3JjZWRSZXNvbHZlcnM6IHRoaXMubG9jYWxTdGF0ZS5zaG91bGRGb3JjZVJlc29sdmVycyhkb2N1bWVudCksXG4gICAgICAgICAgICAgICAgaGFzTm9ucmVhY3RpdmVEaXJlY3RpdmU6IGhhc0RpcmVjdGl2ZXMoW1wibm9ucmVhY3RpdmVcIl0sIGRvY3VtZW50KSxcbiAgICAgICAgICAgICAgICBub25SZWFjdGl2ZVF1ZXJ5OiBhZGROb25SZWFjdGl2ZVRvTmFtZWRGcmFnbWVudHMoZG9jdW1lbnQpLFxuICAgICAgICAgICAgICAgIGNsaWVudFF1ZXJ5OiB0aGlzLmxvY2FsU3RhdGUuY2xpZW50UXVlcnkoZG9jdW1lbnQpLFxuICAgICAgICAgICAgICAgIHNlcnZlclF1ZXJ5OiByZW1vdmVEaXJlY3RpdmVzRnJvbURvY3VtZW50KFtcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiBcImNsaWVudFwiLCByZW1vdmU6IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiBcImNvbm5lY3Rpb25cIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6IFwibm9ucmVhY3RpdmVcIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6IFwidW5tYXNrXCIgfSxcbiAgICAgICAgICAgICAgICBdLCBkb2N1bWVudCksXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhcnM6IGdldERlZmF1bHRWYWx1ZXMoZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbihkb2N1bWVudCkpLFxuICAgICAgICAgICAgICAgIC8vIFRyYW5zZm9ybSBhbnkgbXV0YXRpb24gb3Igc3Vic2NyaXB0aW9uIG9wZXJhdGlvbnMgdG8gcXVlcnkgb3BlcmF0aW9uc1xuICAgICAgICAgICAgICAgIC8vIHNvIHdlIGNhbiByZWFkL3dyaXRlIHRoZW0gZnJvbS90byB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgICAgYXNRdWVyeTogX19hc3NpZ24oX19hc3NpZ24oe30sIGRvY3VtZW50KSwgeyBkZWZpbml0aW9uczogZG9jdW1lbnQuZGVmaW5pdGlvbnMubWFwKGZ1bmN0aW9uIChkZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWYua2luZCA9PT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYub3BlcmF0aW9uICE9PSBcInF1ZXJ5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGRlZiksIHsgb3BlcmF0aW9uOiBcInF1ZXJ5XCIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmO1xuICAgICAgICAgICAgICAgICAgICB9KSB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cmFuc2Zvcm1DYWNoZS5zZXQoZG9jdW1lbnQsIGNhY2hlRW50cnkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1DYWNoZS5nZXQoZG9jdW1lbnQpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5nZXRWYXJpYWJsZXMgPSBmdW5jdGlvbiAoZG9jdW1lbnQsIHZhcmlhYmxlcykge1xuICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuZ2V0RG9jdW1lbnRJbmZvKGRvY3VtZW50KS5kZWZhdWx0VmFycyksIHZhcmlhYmxlcyk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLndhdGNoUXVlcnkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLnRyYW5zZm9ybShvcHRpb25zLnF1ZXJ5KTtcbiAgICAgICAgLy8gYXNzaWduIHZhcmlhYmxlIGRlZmF1bHQgdmFsdWVzIGlmIHN1cHBsaWVkXG4gICAgICAgIC8vIE5PVEU6IFdlIGRvbid0IG1vZGlmeSBvcHRpb25zLnF1ZXJ5IGhlcmUgd2l0aCB0aGUgdHJhbnNmb3JtZWQgcXVlcnkgdG9cbiAgICAgICAgLy8gZW5zdXJlIG9ic2VydmFibGUub3B0aW9ucy5xdWVyeSBpcyBzZXQgdG8gdGhlIHJhdyB1bnRyYW5zZm9ybWVkIHF1ZXJ5LlxuICAgICAgICBvcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IHZhcmlhYmxlczogdGhpcy5nZXRWYXJpYWJsZXMocXVlcnksIG9wdGlvbnMudmFyaWFibGVzKSB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgb3B0aW9ucy5ub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcXVlcnlJbmZvID0gbmV3IFF1ZXJ5SW5mbyh0aGlzKTtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZVF1ZXJ5KHtcbiAgICAgICAgICAgIHF1ZXJ5TWFuYWdlcjogdGhpcyxcbiAgICAgICAgICAgIHF1ZXJ5SW5mbzogcXVlcnlJbmZvLFxuICAgICAgICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgICAgIG9ic2VydmFibGVbXCJsYXN0UXVlcnlcIl0gPSBxdWVyeTtcbiAgICAgICAgaWYgKCFPYnNlcnZhYmxlUXVlcnlbXCJpbmFjdGl2ZU9uQ3JlYXRpb25cIl0uZ2V0VmFsdWUoKSkge1xuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLnNldChvYnNlcnZhYmxlLnF1ZXJ5SWQsIHF1ZXJ5SW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgZ2l2ZSBxdWVyeUluZm8gdGhlIHRyYW5zZm9ybWVkIHF1ZXJ5IHRvIGVuc3VyZSB0aGUgZmlyc3QgY2FjaGUgZGlmZlxuICAgICAgICAvLyB1c2VzIHRoZSB0cmFuc2Zvcm1lZCBxdWVyeSBpbnN0ZWFkIG9mIHRoZSByYXcgcXVlcnlcbiAgICAgICAgcXVlcnlJbmZvLmluaXQoe1xuICAgICAgICAgICAgZG9jdW1lbnQ6IHF1ZXJ5LFxuICAgICAgICAgICAgb2JzZXJ2YWJsZVF1ZXJ5OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgdmFyaWFibGVzOiBvYnNlcnZhYmxlLnZhcmlhYmxlcyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChvcHRpb25zLCBxdWVyeUlkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChxdWVyeUlkID09PSB2b2lkIDApIHsgcXVlcnlJZCA9IHRoaXMuZ2VuZXJhdGVRdWVyeUlkKCk7IH1cbiAgICAgICAgaW52YXJpYW50KG9wdGlvbnMucXVlcnksIDM4KTtcbiAgICAgICAgaW52YXJpYW50KG9wdGlvbnMucXVlcnkua2luZCA9PT0gXCJEb2N1bWVudFwiLCAzOSk7XG4gICAgICAgIGludmFyaWFudCghb3B0aW9ucy5yZXR1cm5QYXJ0aWFsRGF0YSwgNDApO1xuICAgICAgICBpbnZhcmlhbnQoIW9wdGlvbnMucG9sbEludGVydmFsLCA0MSk7XG4gICAgICAgIHZhciBxdWVyeSA9IHRoaXMudHJhbnNmb3JtKG9wdGlvbnMucXVlcnkpO1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaFF1ZXJ5KHF1ZXJ5SWQsIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBxdWVyeTogcXVlcnkgfSkpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0ICYmIF9fYXNzaWduKF9fYXNzaWduKHt9LCByZXN1bHQpLCB7IGRhdGE6IF90aGlzLm1hc2tPcGVyYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogcXVlcnksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBmZXRjaFBvbGljeTogb3B0aW9ucy5mZXRjaFBvbGljeSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHF1ZXJ5SWQsXG4gICAgICAgICAgICAgICAgfSkgfSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zdG9wUXVlcnkocXVlcnlJZCk7IH0pO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5nZW5lcmF0ZVF1ZXJ5SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodGhpcy5xdWVyeUlkQ291bnRlcisrKTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuZ2VuZXJhdGVSZXF1ZXN0SWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RJZENvdW50ZXIrKztcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuZ2VuZXJhdGVNdXRhdGlvbklkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHRoaXMubXV0YXRpb25JZENvdW50ZXIrKyk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLnN0b3BRdWVyeUluU3RvcmUgPSBmdW5jdGlvbiAocXVlcnlJZCkge1xuICAgICAgICB0aGlzLnN0b3BRdWVyeUluU3RvcmVOb0Jyb2FkY2FzdChxdWVyeUlkKTtcbiAgICAgICAgdGhpcy5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLnN0b3BRdWVyeUluU3RvcmVOb0Jyb2FkY2FzdCA9IGZ1bmN0aW9uIChxdWVyeUlkKSB7XG4gICAgICAgIHZhciBxdWVyeUluZm8gPSB0aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5SWQpO1xuICAgICAgICBpZiAocXVlcnlJbmZvKVxuICAgICAgICAgICAgcXVlcnlJbmZvLnN0b3AoKTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuY2xlYXJTdG9yZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGRpc2NhcmRXYXRjaGVzOiB0cnVlLFxuICAgICAgICB9OyB9XG4gICAgICAgIC8vIEJlZm9yZSB3ZSBoYXZlIHNlbnQgdGhlIHJlc2V0IGFjdGlvbiB0byB0aGUgc3RvcmUsIHdlIGNhbiBubyBsb25nZXJcbiAgICAgICAgLy8gcmVseSBvbiB0aGUgcmVzdWx0cyByZXR1cm5lZCBieSBpbi1mbGlnaHQgcmVxdWVzdHMgc2luY2UgdGhlc2UgbWF5XG4gICAgICAgIC8vIGRlcGVuZCBvbiB2YWx1ZXMgdGhhdCBwcmV2aW91c2x5IGV4aXN0ZWQgaW4gdGhlIGRhdGEgcG9ydGlvbiBvZiB0aGVcbiAgICAgICAgLy8gc3RvcmUuIFNvLCB3ZSBjYW5jZWwgdGhlIHByb21pc2VzIGFuZCBvYnNlcnZlcnMgdGhhdCB3ZSBoYXZlIGlzc3VlZFxuICAgICAgICAvLyBzbyBmYXIgYW5kIG5vdCB5ZXQgcmVzb2x2ZWQgKGluIHRoZSBjYXNlIG9mIHF1ZXJpZXMpLlxuICAgICAgICB0aGlzLmNhbmNlbFBlbmRpbmdGZXRjaGVzKG5ld0ludmFyaWFudEVycm9yKDQyKSk7XG4gICAgICAgIHRoaXMucXVlcmllcy5mb3JFYWNoKGZ1bmN0aW9uIChxdWVyeUluZm8pIHtcbiAgICAgICAgICAgIGlmIChxdWVyeUluZm8ub2JzZXJ2YWJsZVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgLy8gU2V0IGxvYWRpbmcgdG8gdHJ1ZSBzbyBsaXN0ZW5lcnMgZG9uJ3QgdHJpZ2dlciB1bmxlc3MgdGhleSB3YW50XG4gICAgICAgICAgICAgICAgLy8gcmVzdWx0cyB3aXRoIHBhcnRpYWwgZGF0YS5cbiAgICAgICAgICAgICAgICBxdWVyeUluZm8ubmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMubG9hZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5tdXRhdGlvblN0b3JlKSB7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uU3RvcmUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGJlZ2luIHJlbW92aW5nIGRhdGEgZnJvbSB0aGUgc3RvcmVcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUucmVzZXQob3B0aW9ucyk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmdldE9ic2VydmFibGVRdWVyaWVzID0gZnVuY3Rpb24gKGluY2x1ZGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGluY2x1ZGUgPT09IHZvaWQgMCkgeyBpbmNsdWRlID0gXCJhY3RpdmVcIjsgfVxuICAgICAgICB2YXIgcXVlcmllcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdmFyIHF1ZXJ5TmFtZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHZhciBxdWVyeU5hbWVzQW5kUXVlcnlTdHJpbmdzID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIgbGVnYWN5UXVlcnlPcHRpb25zID0gbmV3IFNldCgpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbmNsdWRlKSkge1xuICAgICAgICAgICAgaW5jbHVkZS5mb3JFYWNoKGZ1bmN0aW9uIChkZXNjKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5TmFtZXMuc2V0KGRlc2MsIGRlc2MpO1xuICAgICAgICAgICAgICAgICAgICBxdWVyeU5hbWVzQW5kUXVlcnlTdHJpbmdzLnNldChkZXNjLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzRG9jdW1lbnROb2RlKGRlc2MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHByaW50KF90aGlzLnRyYW5zZm9ybShkZXNjKSk7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5TmFtZXMuc2V0KHF1ZXJ5U3RyaW5nLCBnZXRPcGVyYXRpb25OYW1lKGRlc2MpKTtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlOYW1lc0FuZFF1ZXJ5U3RyaW5ncy5zZXQocXVlcnlTdHJpbmcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNOb25OdWxsT2JqZWN0KGRlc2MpICYmIGRlc2MucXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVnYWN5UXVlcnlPcHRpb25zLmFkZChkZXNjKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAoX2EsIHF1ZXJ5SWQpIHtcbiAgICAgICAgICAgIHZhciBvcSA9IF9hLm9ic2VydmFibGVRdWVyeSwgZG9jdW1lbnQgPSBfYS5kb2N1bWVudDtcbiAgICAgICAgICAgIGlmIChvcSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlID09PSBcImFsbFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJpZXMuc2V0KHF1ZXJ5SWQsIG9xKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlOYW1lID0gb3EucXVlcnlOYW1lLCBmZXRjaFBvbGljeSA9IG9xLm9wdGlvbnMuZmV0Y2hQb2xpY3k7XG4gICAgICAgICAgICAgICAgaWYgKGZldGNoUG9saWN5ID09PSBcInN0YW5kYnlcIiB8fFxuICAgICAgICAgICAgICAgICAgICAoaW5jbHVkZSA9PT0gXCJhY3RpdmVcIiAmJiAhb3EuaGFzT2JzZXJ2ZXJzKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluY2x1ZGUgPT09IFwiYWN0aXZlXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgKHF1ZXJ5TmFtZSAmJiBxdWVyeU5hbWVzQW5kUXVlcnlTdHJpbmdzLmhhcyhxdWVyeU5hbWUpKSB8fFxuICAgICAgICAgICAgICAgICAgICAoZG9jdW1lbnQgJiYgcXVlcnlOYW1lc0FuZFF1ZXJ5U3RyaW5ncy5oYXMocHJpbnQoZG9jdW1lbnQpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcmllcy5zZXQocXVlcnlJZCwgb3EpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlOYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlOYW1lc0FuZFF1ZXJ5U3RyaW5ncy5zZXQocXVlcnlOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlOYW1lc0FuZFF1ZXJ5U3RyaW5ncy5zZXQocHJpbnQoZG9jdW1lbnQpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobGVnYWN5UXVlcnlPcHRpb25zLnNpemUpIHtcbiAgICAgICAgICAgIGxlZ2FjeVF1ZXJ5T3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2lsbCBiZSBpc3N1aW5nIGEgZnJlc2ggbmV0d29yayByZXF1ZXN0IGZvciB0aGlzIHF1ZXJ5LCBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIHByZS1hbGxvY2F0ZSBhIG5ldyBxdWVyeSBJRCBoZXJlLCB1c2luZyBhIHNwZWNpYWwgcHJlZml4IHRvIGVuYWJsZVxuICAgICAgICAgICAgICAgIC8vIGNsZWFuaW5nIHVwIHRoZXNlIHRlbXBvcmFyeSBxdWVyaWVzIGxhdGVyLCBhZnRlciBmZXRjaGluZy5cbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlJZCA9IG1ha2VVbmlxdWVJZChcImxlZ2FjeU9uZVRpbWVRdWVyeVwiKTtcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlJbmZvID0gX3RoaXMuZ2V0T3JDcmVhdGVRdWVyeShxdWVyeUlkKS5pbml0KHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IG9wdGlvbnMucXVlcnksXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIG9xID0gbmV3IE9ic2VydmFibGVRdWVyeSh7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5TWFuYWdlcjogX3RoaXMsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5SW5mbzogcXVlcnlJbmZvLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgb3B0aW9ucyksIHsgZmV0Y2hQb2xpY3k6IFwibmV0d29yay1vbmx5XCIgfSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaW52YXJpYW50KG9xLnF1ZXJ5SWQgPT09IHF1ZXJ5SWQpO1xuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby5zZXRPYnNlcnZhYmxlUXVlcnkob3EpO1xuICAgICAgICAgICAgICAgIHF1ZXJpZXMuc2V0KHF1ZXJ5SWQsIG9xKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIHF1ZXJ5TmFtZXNBbmRRdWVyeVN0cmluZ3Muc2l6ZSkge1xuICAgICAgICAgICAgcXVlcnlOYW1lc0FuZFF1ZXJ5U3RyaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChpbmNsdWRlZCwgbmFtZU9yUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWluY2x1ZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeU5hbWUgPSBxdWVyeU5hbWVzLmdldChuYW1lT3JRdWVyeVN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50Lndhcm4oNDMsIHF1ZXJ5TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKDQ0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBxdWVyaWVzO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5yZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMgPSBmdW5jdGlvbiAoaW5jbHVkZVN0YW5kYnkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGluY2x1ZGVTdGFuZGJ5ID09PSB2b2lkIDApIHsgaW5jbHVkZVN0YW5kYnkgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgb2JzZXJ2YWJsZVF1ZXJ5UHJvbWlzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXRPYnNlcnZhYmxlUXVlcmllcyhpbmNsdWRlU3RhbmRieSA/IFwiYWxsXCIgOiBcImFjdGl2ZVwiKS5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZhYmxlUXVlcnksIHF1ZXJ5SWQpIHtcbiAgICAgICAgICAgIHZhciBmZXRjaFBvbGljeSA9IG9ic2VydmFibGVRdWVyeS5vcHRpb25zLmZldGNoUG9saWN5O1xuICAgICAgICAgICAgbXV0ZURlcHJlY2F0aW9ucyhcInJlc2V0TGFzdFJlc3VsdHNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYnNlcnZhYmxlUXVlcnkucmVzZXRMYXN0UmVzdWx0cygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoaW5jbHVkZVN0YW5kYnkgfHxcbiAgICAgICAgICAgICAgICAoZmV0Y2hQb2xpY3kgIT09IFwic3RhbmRieVwiICYmIGZldGNoUG9saWN5ICE9PSBcImNhY2hlLW9ubHlcIikpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZhYmxlUXVlcnlQcm9taXNlcy5wdXNoKG9ic2VydmFibGVRdWVyeS5yZWZldGNoKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKF90aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5SWQpIHx8IG9ic2VydmFibGVRdWVyeVtcInF1ZXJ5SW5mb1wiXSkuc2V0RGlmZihudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob2JzZXJ2YWJsZVF1ZXJ5UHJvbWlzZXMpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5zdGFydEdyYXBoUUxTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcXVlcnkgPSBvcHRpb25zLnF1ZXJ5LCB2YXJpYWJsZXMgPSBvcHRpb25zLnZhcmlhYmxlcztcbiAgICAgICAgdmFyIGZldGNoUG9saWN5ID0gb3B0aW9ucy5mZXRjaFBvbGljeSwgX2EgPSBvcHRpb25zLmVycm9yUG9saWN5LCBlcnJvclBvbGljeSA9IF9hID09PSB2b2lkIDAgPyBcIm5vbmVcIiA6IF9hLCBfYiA9IG9wdGlvbnMuY29udGV4dCwgY29udGV4dCA9IF9iID09PSB2b2lkIDAgPyB7fSA6IF9iLCBfYyA9IG9wdGlvbnMuZXh0ZW5zaW9ucywgZXh0ZW5zaW9ucyA9IF9jID09PSB2b2lkIDAgPyB7fSA6IF9jO1xuICAgICAgICBxdWVyeSA9IHRoaXMudHJhbnNmb3JtKHF1ZXJ5KTtcbiAgICAgICAgdmFyaWFibGVzID0gdGhpcy5nZXRWYXJpYWJsZXMocXVlcnksIHZhcmlhYmxlcyk7XG4gICAgICAgIHZhciBtYWtlT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICh2YXJpYWJsZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRPYnNlcnZhYmxlRnJvbUxpbmsocXVlcnksIGNvbnRleHQsIHZhcmlhYmxlcywgZXh0ZW5zaW9ucykubWFwKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmV0Y2hQb2xpY3kgIT09IFwibm8tY2FjaGVcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc3Vic2NyaXB0aW9uIGludGVyZmFjZSBzaG91bGQgaGFuZGxlIG5vdCBzZW5kaW5nIHVzIHJlc3VsdHMgd2Ugbm8gbG9uZ2VyIHN1YnNjcmliZSB0by5cbiAgICAgICAgICAgICAgICAgICAgLy8gWFhYIEkgZG9uJ3QgdGhpbmsgd2UgZXZlciBzZW5kIGluIGFuIG9iamVjdCB3aXRoIGVycm9ycywgYnV0IHdlIG1pZ2h0IGluIHRoZSBmdXR1cmUuLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZFdyaXRlUmVzdWx0KHJlc3VsdCwgZXJyb3JQb2xpY3kpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYWNoZS53cml0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUlkOiBcIlJPT1RfU1VCU0NSSVBUSU9OXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBoYXNFcnJvcnMgPSBncmFwaFFMUmVzdWx0SGFzRXJyb3IocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB2YXIgaGFzUHJvdG9jb2xFcnJvcnMgPSBncmFwaFFMUmVzdWx0SGFzUHJvdG9jb2xFcnJvcnMocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzRXJyb3JzIHx8IGhhc1Byb3RvY29sRXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvcnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0Vycm9ycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLmdyYXBoUUxFcnJvcnMgPSByZXN1bHQuZXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNQcm90b2NvbEVycm9ycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnByb3RvY29sRXJyb3JzID0gcmVzdWx0LmV4dGVuc2lvbnNbUFJPVE9DT0xfRVJST1JTX1NZTUJPTF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gYGVycm9yUG9saWN5YCBpcyBhIG1lY2hhbmlzbSBmb3IgaGFuZGxpbmcgR3JhcGhRTCBlcnJvcnMsIGFjY29yZGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyB0byBvdXIgZG9jdW1lbnRhdGlvbiwgc28gd2UgdGhyb3cgcHJvdG9jb2wgZXJyb3JzIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCBlcnJvciBwb2xpY3kuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvclBvbGljeSA9PT0gXCJub25lXCIgfHwgaGFzUHJvdG9jb2xFcnJvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcG9sbG9FcnJvcihlcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlcnJvclBvbGljeSA9PT0gXCJpZ25vcmVcIikge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0LmVycm9ycztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5nZXREb2N1bWVudEluZm8ocXVlcnkpLmhhc0NsaWVudEV4cG9ydHMpIHtcbiAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlUHJvbWlzZV8xID0gdGhpcy5sb2NhbFN0YXRlXG4gICAgICAgICAgICAgICAgLmFkZEV4cG9ydGVkVmFyaWFibGVzKHF1ZXJ5LCB2YXJpYWJsZXMsIGNvbnRleHQpXG4gICAgICAgICAgICAgICAgLnRoZW4obWFrZU9ic2VydmFibGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgICAgICAgIHZhciBzdWIgPSBudWxsO1xuICAgICAgICAgICAgICAgIG9ic2VydmFibGVQcm9taXNlXzEudGhlbihmdW5jdGlvbiAob2JzZXJ2YWJsZSkgeyByZXR1cm4gKHN1YiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKSk7IH0sIG9ic2VydmVyLmVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3ViICYmIHN1Yi51bnN1YnNjcmliZSgpOyB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1ha2VPYnNlcnZhYmxlKHZhcmlhYmxlcyk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLnN0b3BRdWVyeSA9IGZ1bmN0aW9uIChxdWVyeUlkKSB7XG4gICAgICAgIHRoaXMuc3RvcFF1ZXJ5Tm9Ccm9hZGNhc3QocXVlcnlJZCk7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5zdG9wUXVlcnlOb0Jyb2FkY2FzdCA9IGZ1bmN0aW9uIChxdWVyeUlkKSB7XG4gICAgICAgIHRoaXMuc3RvcFF1ZXJ5SW5TdG9yZU5vQnJvYWRjYXN0KHF1ZXJ5SWQpO1xuICAgICAgICB0aGlzLnJlbW92ZVF1ZXJ5KHF1ZXJ5SWQpO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5yZW1vdmVRdWVyeSA9IGZ1bmN0aW9uIChxdWVyeUlkKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gdGVhcmRvd24gYWxsIGxpbmtzXG4gICAgICAgIC8vIEJvdGggYFF1ZXJ5TWFuYWdlci5mZXRjaFJlcXVlc3RgIGFuZCBgUXVlcnlNYW5hZ2VyLnF1ZXJ5YCBjcmVhdGUgc2VwYXJhdGUgcHJvbWlzZXNcbiAgICAgICAgLy8gdGhhdCBlYWNoIGFkZCB0aGVpciByZWplY3QgZnVuY3Rpb25zIHRvIGZldGNoQ2FuY2VsRm5zLlxuICAgICAgICAvLyBBIHF1ZXJ5IGNyZWF0ZWQgd2l0aCBgUXVlcnlNYW5hZ2VyLnF1ZXJ5KClgIGNvdWxkIHRyaWdnZXIgYSBgUXVlcnlNYW5hZ2VyLmZldGNoUmVxdWVzdGAuXG4gICAgICAgIC8vIFRoZSBzYW1lIHF1ZXJ5SWQgY291bGQgaGF2ZSB0d28gcmVqZWN0aW9uIGZucyBmb3IgdHdvIHByb21pc2VzXG4gICAgICAgIHRoaXMuZmV0Y2hDYW5jZWxGbnMuZGVsZXRlKHF1ZXJ5SWQpO1xuICAgICAgICBpZiAodGhpcy5xdWVyaWVzLmhhcyhxdWVyeUlkKSkge1xuICAgICAgICAgICAgKF9hID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeUlkKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5kZWxldGUocXVlcnlJZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuYnJvYWRjYXN0UXVlcmllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub25Ccm9hZGNhc3QpXG4gICAgICAgICAgICB0aGlzLm9uQnJvYWRjYXN0KCk7XG4gICAgICAgIHRoaXMucXVlcmllcy5mb3JFYWNoKGZ1bmN0aW9uIChpbmZvKSB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGluZm8ub2JzZXJ2YWJsZVF1ZXJ5KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbXCJub3RpZnlcIl0oKTsgfSk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmdldExvY2FsU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RhdGU7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmdldE9ic2VydmFibGVGcm9tTGluayA9IGZ1bmN0aW9uIChxdWVyeSwgY29udGV4dCwgdmFyaWFibGVzLCBleHRlbnNpb25zLCBcbiAgICAvLyBQcmVmZXIgY29udGV4dC5xdWVyeURlZHVwbGljYXRpb24gaWYgc3BlY2lmaWVkLlxuICAgIGRlZHVwbGljYXRpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoZGVkdXBsaWNhdGlvbiA9PT0gdm9pZCAwKSB7IGRlZHVwbGljYXRpb24gPSAoX2EgPSBjb250ZXh0ID09PSBudWxsIHx8IGNvbnRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbnRleHQucXVlcnlEZWR1cGxpY2F0aW9uKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0aGlzLnF1ZXJ5RGVkdXBsaWNhdGlvbjsgfVxuICAgICAgICB2YXIgb2JzZXJ2YWJsZTtcbiAgICAgICAgdmFyIF9iID0gdGhpcy5nZXREb2N1bWVudEluZm8ocXVlcnkpLCBzZXJ2ZXJRdWVyeSA9IF9iLnNlcnZlclF1ZXJ5LCBjbGllbnRRdWVyeSA9IF9iLmNsaWVudFF1ZXJ5O1xuICAgICAgICBpZiAoc2VydmVyUXVlcnkpIHtcbiAgICAgICAgICAgIHZhciBfYyA9IHRoaXMsIGluRmxpZ2h0TGlua09ic2VydmFibGVzXzEgPSBfYy5pbkZsaWdodExpbmtPYnNlcnZhYmxlcywgbGluayA9IF9jLmxpbms7XG4gICAgICAgICAgICB2YXIgb3BlcmF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBzZXJ2ZXJRdWVyeSxcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25OYW1lOiBnZXRPcGVyYXRpb25OYW1lKHNlcnZlclF1ZXJ5KSB8fCB2b2lkIDAsXG4gICAgICAgICAgICAgICAgY29udGV4dDogdGhpcy5wcmVwYXJlQ29udGV4dChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgY29udGV4dCksIHsgZm9yY2VGZXRjaDogIWRlZHVwbGljYXRpb24gfSkpLFxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnM6IGV4dGVuc2lvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29udGV4dCA9IG9wZXJhdGlvbi5jb250ZXh0O1xuICAgICAgICAgICAgaWYgKGRlZHVwbGljYXRpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJpbnRlZFNlcnZlclF1ZXJ5XzEgPSBwcmludChzZXJ2ZXJRdWVyeSk7XG4gICAgICAgICAgICAgICAgdmFyIHZhckpzb25fMSA9IGNhbm9uaWNhbFN0cmluZ2lmeSh2YXJpYWJsZXMpO1xuICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IGluRmxpZ2h0TGlua09ic2VydmFibGVzXzEubG9va3VwKHByaW50ZWRTZXJ2ZXJRdWVyeV8xLCB2YXJKc29uXzEpO1xuICAgICAgICAgICAgICAgIG9ic2VydmFibGUgPSBlbnRyeS5vYnNlcnZhYmxlO1xuICAgICAgICAgICAgICAgIGlmICghb2JzZXJ2YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uY2FzdF8xID0gbmV3IENvbmNhc3QoW1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZShsaW5rLCBvcGVyYXRpb24pLFxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZSA9IGVudHJ5Lm9ic2VydmFibGUgPSBjb25jYXN0XzE7XG4gICAgICAgICAgICAgICAgICAgIGNvbmNhc3RfMS5iZWZvcmVOZXh0KGZ1bmN0aW9uIGNiKG1ldGhvZCwgYXJnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIm5leHRcIiAmJiBcImhhc05leHRcIiBpbiBhcmcgJiYgYXJnLmhhc05leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jYXN0XzEuYmVmb3JlTmV4dChjYik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbkZsaWdodExpbmtPYnNlcnZhYmxlc18xLnJlbW92ZShwcmludGVkU2VydmVyUXVlcnlfMSwgdmFySnNvbl8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2YWJsZSA9IG5ldyBDb25jYXN0KFtcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZShsaW5rLCBvcGVyYXRpb24pLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JzZXJ2YWJsZSA9IG5ldyBDb25jYXN0KFtPYnNlcnZhYmxlLm9mKHsgZGF0YToge30gfSldKTtcbiAgICAgICAgICAgIGNvbnRleHQgPSB0aGlzLnByZXBhcmVDb250ZXh0KGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbGllbnRRdWVyeSkge1xuICAgICAgICAgICAgb2JzZXJ2YWJsZSA9IGFzeW5jTWFwKG9ic2VydmFibGUsIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxTdGF0ZS5ydW5SZXNvbHZlcnMoe1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogY2xpZW50UXVlcnksXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVJlc3VsdDogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5nZXRSZXN1bHRzRnJvbUxpbmsgPSBmdW5jdGlvbiAocXVlcnlJbmZvLCBjYWNoZVdyaXRlQmVoYXZpb3IsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlcXVlc3RJZCA9IChxdWVyeUluZm8ubGFzdFJlcXVlc3RJZCA9IHRoaXMuZ2VuZXJhdGVSZXF1ZXN0SWQoKSk7XG4gICAgICAgIC8vIFBlcmZvcm1pbmcgdHJhbnNmb3JtRm9yTGluayBoZXJlIGdpdmVzIHRoaXMuY2FjaGUgYSBjaGFuY2UgdG8gZmlsbCBpblxuICAgICAgICAvLyBtaXNzaW5nIGZyYWdtZW50IGRlZmluaXRpb25zIChmb3IgZXhhbXBsZSkgYmVmb3JlIHNlbmRpbmcgdGhpcyBkb2N1bWVudFxuICAgICAgICAvLyB0aHJvdWdoIHRoZSBsaW5rIGNoYWluLlxuICAgICAgICB2YXIgbGlua0RvY3VtZW50ID0gdGhpcy5jYWNoZS50cmFuc2Zvcm1Gb3JMaW5rKG9wdGlvbnMucXVlcnkpO1xuICAgICAgICByZXR1cm4gYXN5bmNNYXAodGhpcy5nZXRPYnNlcnZhYmxlRnJvbUxpbmsobGlua0RvY3VtZW50LCBvcHRpb25zLmNvbnRleHQsIG9wdGlvbnMudmFyaWFibGVzKSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgdmFyIGdyYXBoUUxFcnJvcnMgPSBnZXRHcmFwaFFMRXJyb3JzRnJvbVJlc3VsdChyZXN1bHQpO1xuICAgICAgICAgICAgdmFyIGhhc0Vycm9ycyA9IGdyYXBoUUxFcnJvcnMubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIHZhciBlcnJvclBvbGljeSA9IG9wdGlvbnMuZXJyb3JQb2xpY3k7XG4gICAgICAgICAgICAvLyBJZiB3ZSBpbnRlcnJ1cHRlZCB0aGlzIHJlcXVlc3QgYnkgY2FsbGluZyBnZXRSZXN1bHRzRnJvbUxpbmsgYWdhaW5cbiAgICAgICAgICAgIC8vIHdpdGggdGhlIHNhbWUgUXVlcnlJbmZvIG9iamVjdCwgd2UgaWdub3JlIHRoZSBvbGQgcmVzdWx0cy5cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0SWQgPj0gcXVlcnlJbmZvLmxhc3RSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzRXJyb3JzICYmIGVycm9yUG9saWN5ID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaHJvd2luZyBoZXJlIGVmZmVjdGl2ZWx5IGNhbGxzIG9ic2VydmVyLmVycm9yLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBxdWVyeUluZm8ubWFya0Vycm9yKG5ldyBBcG9sbG9FcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBncmFwaFFMRXJyb3JzOiBncmFwaFFMRXJyb3JzLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFVzZSBsaW5rRG9jdW1lbnQgcmF0aGVyIHRoYW4gcXVlcnlJbmZvLmRvY3VtZW50IHNvIHRoZVxuICAgICAgICAgICAgICAgIC8vIG9wZXJhdGlvbi9mcmFnbWVudHMgdXNlZCB0byB3cml0ZSB0aGUgcmVzdWx0IGFyZSB0aGUgc2FtZSBhcyB0aGVcbiAgICAgICAgICAgICAgICAvLyBvbmVzIHVzZWQgdG8gb2J0YWluIGl0IGZyb20gdGhlIGxpbmsuXG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLm1hcmtSZXN1bHQocmVzdWx0LCBsaW5rRG9jdW1lbnQsIG9wdGlvbnMsIGNhY2hlV3JpdGVCZWhhdmlvcik7XG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLm1hcmtSZWFkeSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFxciA9IHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuZXR3b3JrU3RhdHVzOiBOZXR3b3JrU3RhdHVzLnJlYWR5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEluIHRoZSBjYXNlIHdlIHN0YXJ0IG11bHRpcGxlIG5ldHdvcmsgcmVxdWVzdHMgc2ltdWxhdGVub3VzbHksIHdlXG4gICAgICAgICAgICAvLyB3YW50IHRvIGVuc3VyZSB3ZSBwcm9wZXJseSBzZXQgYGRhdGFgIGlmIHdlJ3JlIHJlcG9ydGluZyBvbiBhbiBvbGRcbiAgICAgICAgICAgIC8vIHJlc3VsdCB3aGljaCB3aWxsIG5vdCBiZSBjYXVnaHQgYnkgdGhlIGNvbmRpdGlvbmFsIGFib3ZlIHRoYXQgZW5kcyB1cFxuICAgICAgICAgICAgLy8gdGhyb3dpbmcgdGhlIG1hcmtFcnJvciByZXN1bHQuXG4gICAgICAgICAgICBpZiAoaGFzRXJyb3JzICYmIGVycm9yUG9saWN5ID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgIGFxci5kYXRhID0gdm9pZCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0Vycm9ycyAmJiBlcnJvclBvbGljeSAhPT0gXCJpZ25vcmVcIikge1xuICAgICAgICAgICAgICAgIGFxci5lcnJvcnMgPSBncmFwaFFMRXJyb3JzO1xuICAgICAgICAgICAgICAgIGFxci5uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5lcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcXI7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChuZXR3b3JrRXJyb3IpIHtcbiAgICAgICAgICAgIHZhciBlcnJvciA9IGlzQXBvbGxvRXJyb3IobmV0d29ya0Vycm9yKSA/IG5ldHdvcmtFcnJvciA6IChuZXcgQXBvbGxvRXJyb3IoeyBuZXR3b3JrRXJyb3I6IG5ldHdvcmtFcnJvciB9KSk7XG4gICAgICAgICAgICAvLyBBdm9pZCBzdG9yaW5nIGVycm9ycyBmcm9tIG9sZGVyIGludGVycnVwdGVkIHF1ZXJpZXMuXG4gICAgICAgICAgICBpZiAocmVxdWVzdElkID49IHF1ZXJ5SW5mby5sYXN0UmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLm1hcmtFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLmZldGNoQ29uY2FzdFdpdGhJbmZvID0gZnVuY3Rpb24gKHF1ZXJ5SW5mbywgb3B0aW9ucywgXG4gICAgLy8gVGhlIGluaXRpYWwgbmV0d29ya1N0YXR1cyBmb3IgdGhpcyBmZXRjaCwgbW9zdCBvZnRlblxuICAgIC8vIE5ldHdvcmtTdGF0dXMubG9hZGluZywgYnV0IGFsc28gcG9zc2libHkgZmV0Y2hNb3JlLCBwb2xsLCByZWZldGNoLFxuICAgIC8vIG9yIHNldFZhcmlhYmxlcy5cbiAgICBuZXR3b3JrU3RhdHVzLCBxdWVyeSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAobmV0d29ya1N0YXR1cyA9PT0gdm9pZCAwKSB7IG5ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLmxvYWRpbmc7IH1cbiAgICAgICAgaWYgKHF1ZXJ5ID09PSB2b2lkIDApIHsgcXVlcnkgPSBvcHRpb25zLnF1ZXJ5OyB9XG4gICAgICAgIHZhciB2YXJpYWJsZXMgPSB0aGlzLmdldFZhcmlhYmxlcyhxdWVyeSwgb3B0aW9ucy52YXJpYWJsZXMpO1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRPcHRpb25zLndhdGNoUXVlcnk7XG4gICAgICAgIHZhciBfYSA9IG9wdGlvbnMuZmV0Y2hQb2xpY3ksIGZldGNoUG9saWN5ID0gX2EgPT09IHZvaWQgMCA/IChkZWZhdWx0cyAmJiBkZWZhdWx0cy5mZXRjaFBvbGljeSkgfHwgXCJjYWNoZS1maXJzdFwiIDogX2EsIF9iID0gb3B0aW9ucy5lcnJvclBvbGljeSwgZXJyb3JQb2xpY3kgPSBfYiA9PT0gdm9pZCAwID8gKGRlZmF1bHRzICYmIGRlZmF1bHRzLmVycm9yUG9saWN5KSB8fCBcIm5vbmVcIiA6IF9iLCBfYyA9IG9wdGlvbnMucmV0dXJuUGFydGlhbERhdGEsIHJldHVyblBhcnRpYWxEYXRhID0gX2MgPT09IHZvaWQgMCA/IGZhbHNlIDogX2MsIF9kID0gb3B0aW9ucy5ub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UsIG5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSA9IF9kID09PSB2b2lkIDAgPyBmYWxzZSA6IF9kLCBfZSA9IG9wdGlvbnMuY29udGV4dCwgY29udGV4dCA9IF9lID09PSB2b2lkIDAgPyB7fSA6IF9lO1xuICAgICAgICB2YXIgbm9ybWFsaXplZCA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMsIHtcbiAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IGZldGNoUG9saWN5LFxuICAgICAgICAgICAgZXJyb3JQb2xpY3k6IGVycm9yUG9saWN5LFxuICAgICAgICAgICAgcmV0dXJuUGFydGlhbERhdGE6IHJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgICAgICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlOiBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UsXG4gICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGZyb21WYXJpYWJsZXMgPSBmdW5jdGlvbiAodmFyaWFibGVzKSB7XG4gICAgICAgICAgICAvLyBTaW5jZSBub3JtYWxpemVkIGlzIGFsd2F5cyBhIGZyZXNoIGNvcHkgb2Ygb3B0aW9ucywgaXQncyBzYWZlIHRvXG4gICAgICAgICAgICAvLyBtb2RpZnkgaXRzIHByb3BlcnRpZXMgaGVyZSwgcmF0aGVyIHRoYW4gY3JlYXRpbmcgeWV0IGFub3RoZXIgbmV3XG4gICAgICAgICAgICAvLyBXYXRjaFF1ZXJ5T3B0aW9ucyBvYmplY3QuXG4gICAgICAgICAgICBub3JtYWxpemVkLnZhcmlhYmxlcyA9IHZhcmlhYmxlcztcbiAgICAgICAgICAgIHZhciBzb3VyY2VzV2l0aEluZm8gPSBfdGhpcy5mZXRjaFF1ZXJ5QnlQb2xpY3kocXVlcnlJbmZvLCBub3JtYWxpemVkLCBuZXR3b3JrU3RhdHVzKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIElmIHdlJ3JlIGluIHN0YW5kYnksIHBvc3Rwb25lIGFkdmFuY2luZyBvcHRpb25zLmZldGNoUG9saWN5IHVzaW5nXG4gICAgICAgICAgICAvLyBhcHBseU5leHRGZXRjaFBvbGljeS5cbiAgICAgICAgICAgIG5vcm1hbGl6ZWQuZmV0Y2hQb2xpY3kgIT09IFwic3RhbmRieVwiICYmXG4gICAgICAgICAgICAgICAgLy8gVGhlIFwic3RhbmRieVwiIHBvbGljeSBjdXJyZW50bHkgcmV0dXJucyBbXSBmcm9tIGZldGNoUXVlcnlCeVBvbGljeSwgc29cbiAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIGFub3RoZXIgd2F5IHRvIGRldGVjdCB3aGVuIG5vdGhpbmcgd2FzIGRvbmUvZmV0Y2hlZC5cbiAgICAgICAgICAgICAgICBzb3VyY2VzV2l0aEluZm8uc291cmNlcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLm9ic2VydmFibGVRdWVyeSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby5vYnNlcnZhYmxlUXVlcnlbXCJhcHBseU5leHRGZXRjaFBvbGljeVwiXShcImFmdGVyLWZldGNoXCIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZXNXaXRoSW5mbztcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVGhpcyBjYW5jZWwgZnVuY3Rpb24gbmVlZHMgdG8gYmUgc2V0IGJlZm9yZSB0aGUgY29uY2FzdCBpcyBjcmVhdGVkLFxuICAgICAgICAvLyBpbiBjYXNlIGNvbmNhc3QgY3JlYXRpb24gc3luY2hyb25vdXNseSBjYW5jZWxzIHRoZSByZXF1ZXN0LlxuICAgICAgICB2YXIgY2xlYW51cENhbmNlbEZuID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZmV0Y2hDYW5jZWxGbnMuZGVsZXRlKHF1ZXJ5SW5mby5xdWVyeUlkKTsgfTtcbiAgICAgICAgdGhpcy5mZXRjaENhbmNlbEZucy5zZXQocXVlcnlJbmZvLnF1ZXJ5SWQsIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIGNsZWFudXBDYW5jZWxGbigpO1xuICAgICAgICAgICAgLy8gVGhpcyBkZWxheSBlbnN1cmVzIHRoZSBjb25jYXN0IHZhcmlhYmxlIGhhcyBiZWVuIGluaXRpYWxpemVkLlxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBjb25jYXN0LmNhbmNlbChyZWFzb24pOyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBjb25jYXN0LCBjb250YWluc0RhdGFGcm9tTGluaztcbiAgICAgICAgLy8gSWYgdGhlIHF1ZXJ5IGhhcyBAZXhwb3J0KGFzOiAuLi4pIGRpcmVjdGl2ZXMsIHRoZW4gd2UgbmVlZCB0b1xuICAgICAgICAvLyBwcm9jZXNzIHRob3NlIGRpcmVjdGl2ZXMgYXN5bmNocm9ub3VzbHkuIFdoZW4gdGhlcmUgYXJlIG5vXG4gICAgICAgIC8vIEBleHBvcnQgZGlyZWN0aXZlcyAodGhlIGNvbW1vbiBjYXNlKSwgd2UgZGVsaWJlcmF0ZWx5IGF2b2lkXG4gICAgICAgIC8vIHdyYXBwaW5nIHRoZSByZXN1bHQgb2YgdGhpcy5mZXRjaFF1ZXJ5QnlQb2xpY3kgaW4gYSBQcm9taXNlLFxuICAgICAgICAvLyBzaW5jZSB0aGUgdGltaW5nIG9mIHJlc3VsdCBkZWxpdmVyeSBpcyAodW5mb3J0dW5hdGVseSkgaW1wb3J0YW50XG4gICAgICAgIC8vIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4gVE9ETyBUaGlzIGNvZGUgY291bGQgYmUgc2ltcGxlciBpZlxuICAgICAgICAvLyB3ZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkIExvY2FsU3RhdGUuXG4gICAgICAgIGlmICh0aGlzLmdldERvY3VtZW50SW5mbyhub3JtYWxpemVkLnF1ZXJ5KS5oYXNDbGllbnRFeHBvcnRzKSB7XG4gICAgICAgICAgICBjb25jYXN0ID0gbmV3IENvbmNhc3QodGhpcy5sb2NhbFN0YXRlXG4gICAgICAgICAgICAgICAgLmFkZEV4cG9ydGVkVmFyaWFibGVzKG5vcm1hbGl6ZWQucXVlcnksIG5vcm1hbGl6ZWQudmFyaWFibGVzLCBub3JtYWxpemVkLmNvbnRleHQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnJvbVZhcmlhYmxlcylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoc291cmNlc1dpdGhJbmZvKSB7IHJldHVybiBzb3VyY2VzV2l0aEluZm8uc291cmNlczsgfSkpO1xuICAgICAgICAgICAgLy8gdGhlcmUgaXMganVzdCBubyB3YXkgd2UgY2FuIHN5bmNocm9ub3VzbHkgZ2V0IHRoZSAqcmlnaHQqIHZhbHVlIGhlcmUsXG4gICAgICAgICAgICAvLyBzbyB3ZSB3aWxsIGFzc3VtZSBgdHJ1ZWAsIHdoaWNoIGlzIHRoZSBiZWhhdmlvdXIgYmVmb3JlIHRoZSBidWcgZml4IGluXG4gICAgICAgICAgICAvLyAjMTA1OTcuIFRoaXMgbWVhbnMgdGhhdCBidWcgaXMgbm90IGZpeGVkIGluIHRoYXQgY2FzZSwgYW5kIGlzIHByb2JhYmx5XG4gICAgICAgICAgICAvLyB1bi1maXhhYmxlIHdpdGggcmVhc29uYWJsZSBlZmZvcnQgZm9yIHRoZSBlZGdlIGNhc2Ugb2YgQGV4cG9ydCBhc1xuICAgICAgICAgICAgLy8gZGlyZWN0aXZlcy5cbiAgICAgICAgICAgIGNvbnRhaW5zRGF0YUZyb21MaW5rID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VzV2l0aEluZm8gPSBmcm9tVmFyaWFibGVzKG5vcm1hbGl6ZWQudmFyaWFibGVzKTtcbiAgICAgICAgICAgIGNvbnRhaW5zRGF0YUZyb21MaW5rID0gc291cmNlc1dpdGhJbmZvLmZyb21MaW5rO1xuICAgICAgICAgICAgY29uY2FzdCA9IG5ldyBDb25jYXN0KHNvdXJjZXNXaXRoSW5mby5zb3VyY2VzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25jYXN0LnByb21pc2UudGhlbihjbGVhbnVwQ2FuY2VsRm4sIGNsZWFudXBDYW5jZWxGbik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb25jYXN0OiBjb25jYXN0LFxuICAgICAgICAgICAgZnJvbUxpbms6IGNvbnRhaW5zRGF0YUZyb21MaW5rLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5yZWZldGNoUXVlcmllcyA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdXBkYXRlQ2FjaGUgPSBfYS51cGRhdGVDYWNoZSwgaW5jbHVkZSA9IF9hLmluY2x1ZGUsIF9iID0gX2Eub3B0aW1pc3RpYywgb3B0aW1pc3RpYyA9IF9iID09PSB2b2lkIDAgPyBmYWxzZSA6IF9iLCBfYyA9IF9hLnJlbW92ZU9wdGltaXN0aWMsIHJlbW92ZU9wdGltaXN0aWMgPSBfYyA9PT0gdm9pZCAwID8gb3B0aW1pc3RpYyA/IG1ha2VVbmlxdWVJZChcInJlZmV0Y2hRdWVyaWVzXCIpIDogdm9pZCAwIDogX2MsIG9uUXVlcnlVcGRhdGVkID0gX2Eub25RdWVyeVVwZGF0ZWQ7XG4gICAgICAgIHZhciBpbmNsdWRlZFF1ZXJpZXNCeUlkID0gbmV3IE1hcCgpO1xuICAgICAgICBpZiAoaW5jbHVkZSkge1xuICAgICAgICAgICAgdGhpcy5nZXRPYnNlcnZhYmxlUXVlcmllcyhpbmNsdWRlKS5mb3JFYWNoKGZ1bmN0aW9uIChvcSwgcXVlcnlJZCkge1xuICAgICAgICAgICAgICAgIGluY2x1ZGVkUXVlcmllc0J5SWQuc2V0KHF1ZXJ5SWQsIHtcbiAgICAgICAgICAgICAgICAgICAgb3E6IG9xLFxuICAgICAgICAgICAgICAgICAgICBsYXN0RGlmZjogKF90aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5SWQpIHx8IG9xW1wicXVlcnlJbmZvXCJdKS5nZXREaWZmKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgaWYgKHVwZGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLmJhdGNoKHtcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHVwZGF0ZUNhY2hlLFxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHlvdSBjYW4gcGVyZm9ybSBhbnkgY29tYmluYXRpb24gb2YgY2FjaGUgcmVhZHMgYW5kL29yIHdyaXRlcyBpblxuICAgICAgICAgICAgICAgIC8vIHRoZSBjYWNoZS5iYXRjaCB1cGRhdGUgZnVuY3Rpb24sIGl0cyBvcHRpbWlzdGljIG9wdGlvbiBjYW4gYmUgZWl0aGVyXG4gICAgICAgICAgICAgICAgLy8gYSBib29sZWFuIG9yIGEgc3RyaW5nLCByZXByZXNlbnRpbmcgdGhyZWUgZGlzdGluY3QgbW9kZXMgb2ZcbiAgICAgICAgICAgICAgICAvLyBvcGVyYXRpb246XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAqIGZhbHNlOiByZWFkL3dyaXRlIG9ubHkgdGhlIHJvb3QgbGF5ZXJcbiAgICAgICAgICAgICAgICAvLyAqIHRydWU6IHJlYWQvd3JpdGUgdGhlIHRvcG1vc3QgbGF5ZXJcbiAgICAgICAgICAgICAgICAvLyAqIHN0cmluZzogcmVhZC93cml0ZSBhIGZyZXNoIG9wdGltaXN0aWMgbGF5ZXIgd2l0aCB0aGF0IElEIHN0cmluZ1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0eXBlb2Ygb3B0aW1pc3RpYyA9PT0gXCJzdHJpbmdcIiwgYSBuZXcgb3B0aW1pc3RpYyBsYXllciB3aWxsIGJlXG4gICAgICAgICAgICAgICAgLy8gdGVtcG9yYXJpbHkgY3JlYXRlZCB3aXRoaW4gY2FjaGUuYmF0Y2ggd2l0aCB0aGF0IHN0cmluZyBhcyBpdHMgSUQuIElmXG4gICAgICAgICAgICAgICAgLy8gd2UgdGhlbiBwYXNzIHRoYXQgc2FtZSBzdHJpbmcgYXMgdGhlIHJlbW92ZU9wdGltaXN0aWMgb3B0aW9uLCB3ZSBjYW5cbiAgICAgICAgICAgICAgICAvLyBtYWtlIGNhY2hlLmJhdGNoIGltbWVkaWF0ZWx5IHJlbW92ZSB0aGUgb3B0aW1pc3RpYyBsYXllciBhZnRlclxuICAgICAgICAgICAgICAgIC8vIHJ1bm5pbmcgdGhlIHVwZGF0ZUNhY2hlIGZ1bmN0aW9uLCB0cmlnZ2VyaW5nIG9ubHkgb25lIGJyb2FkY2FzdC5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSByZWZldGNoUXVlcmllcyBtZXRob2QgYWNjZXB0cyBvbmx5IHRydWUgb3IgZmFsc2UgZm9yIGl0c1xuICAgICAgICAgICAgICAgIC8vIG9wdGltaXN0aWMgb3B0aW9uIChub3Qgc3RyaW5nKS4gV2UgaW50ZXJwcmV0IHRydWUgdG8gbWVhbiBhIHRlbXBvcmFyeVxuICAgICAgICAgICAgICAgIC8vIG9wdGltaXN0aWMgbGF5ZXIgc2hvdWxkIGJlIGNyZWF0ZWQsIHRvIGFsbG93IGVmZmljaWVudGx5IHJvbGxpbmcgYmFja1xuICAgICAgICAgICAgICAgIC8vIHRoZSBlZmZlY3Qgb2YgdGhlIHVwZGF0ZUNhY2hlIGZ1bmN0aW9uLCB3aGljaCBpbnZvbHZlcyBwYXNzaW5nIGFcbiAgICAgICAgICAgICAgICAvLyBzdHJpbmcgaW5zdGVhZCBvZiB0cnVlIGFzIHRoZSBvcHRpbWlzdGljIG9wdGlvbiB0byBjYWNoZS5iYXRjaCwgd2hlblxuICAgICAgICAgICAgICAgIC8vIHJlZmV0Y2hRdWVyaWVzIHJlY2VpdmVzIG9wdGltaXN0aWM6IHRydWUuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBJbiBvdGhlciB3b3Jkcywgd2UgYXJlIGRlbGliZXJhdGVseSBub3Qgc3VwcG9ydGluZyB0aGUgdXNlIGNhc2Ugb2ZcbiAgICAgICAgICAgICAgICAvLyB3cml0aW5nIHRvIGFuICpleGlzdGluZyogb3B0aW1pc3RpYyBsYXllciAodXNpbmcgdGhlIHJlZmV0Y2hRdWVyaWVzXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlQ2FjaGUgZnVuY3Rpb24pLCBzaW5jZSB0aGF0IHdvdWxkIHBvdGVudGlhbGx5IGludGVyZmVyZSB3aXRoXG4gICAgICAgICAgICAgICAgLy8gb3RoZXIgb3B0aW1pc3RpYyB1cGRhdGVzIGluIHByb2dyZXNzLiBJbnN0ZWFkLCB5b3UgY2FuIHJlYWQvd3JpdGVcbiAgICAgICAgICAgICAgICAvLyBvbmx5IHRoZSByb290IGxheWVyIGJ5IHBhc3Npbmcgb3B0aW1pc3RpYzogZmFsc2UgdG8gcmVmZXRjaFF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgLy8gb3IgeW91IGNhbiByZWFkL3dyaXRlIGEgYnJhbmQgbmV3IG9wdGltaXN0aWMgbGF5ZXIgdGhhdCB3aWxsIGJlXG4gICAgICAgICAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGJ5IHBhc3Npbmcgb3B0aW1pc3RpYzogdHJ1ZS5cbiAgICAgICAgICAgICAgICBvcHRpbWlzdGljOiAob3B0aW1pc3RpYyAmJiByZW1vdmVPcHRpbWlzdGljKSB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgICAvLyBUaGUgcmVtb3ZlT3B0aW1pc3RpYyBvcHRpb24gY2FuIGFsc28gYmUgcHJvdmlkZWQgYnkgaXRzZWxmLCBldmVuIGlmXG4gICAgICAgICAgICAgICAgLy8gb3B0aW1pc3RpYyA9PT0gZmFsc2UsIHRvIHJlbW92ZSBzb21lIHByZXZpb3VzbHktYWRkZWQgb3B0aW1pc3RpY1xuICAgICAgICAgICAgICAgIC8vIGxheWVyIHNhZmVseSBhbmQgZWZmaWNpZW50bHksIGxpa2Ugd2UgZG8gaW4gbWFya011dGF0aW9uUmVzdWx0LlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gSWYgYW4gZXhwbGljaXQgcmVtb3ZlT3B0aW1pc3RpYyBzdHJpbmcgaXMgcHJvdmlkZWQgd2l0aCBvcHRpbWlzdGljOlxuICAgICAgICAgICAgICAgIC8vIHRydWUsIHRoZSByZW1vdmVPcHRpbWlzdGljIHN0cmluZyB3aWxsIGRldGVybWluZSB0aGUgSUQgb2YgdGhlXG4gICAgICAgICAgICAgICAgLy8gdGVtcG9yYXJ5IG9wdGltaXN0aWMgbGF5ZXIsIGluIGNhc2UgdGhhdCBldmVyIG1hdHRlcnMuXG4gICAgICAgICAgICAgICAgcmVtb3ZlT3B0aW1pc3RpYzogcmVtb3ZlT3B0aW1pc3RpYyxcbiAgICAgICAgICAgICAgICBvbldhdGNoVXBkYXRlZDogZnVuY3Rpb24gKHdhdGNoLCBkaWZmLCBsYXN0RGlmZikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb3EgPSB3YXRjaC53YXRjaGVyIGluc3RhbmNlb2YgUXVlcnlJbmZvICYmIHdhdGNoLndhdGNoZXIub2JzZXJ2YWJsZVF1ZXJ5O1xuICAgICAgICAgICAgICAgICAgICBpZiAob3EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblF1ZXJ5VXBkYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHdlJ3JlIGFib3V0IHRvIGhhbmRsZSB0aGlzIHF1ZXJ5IG5vdywgcmVtb3ZlIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNsdWRlZFF1ZXJpZXNCeUlkLCBpbiBjYXNlIGl0IHdhcyBhZGRlZCBlYXJsaWVyIGJlY2F1c2Ugb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvcHRpb25zLmluY2x1ZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZWRRdWVyaWVzQnlJZC5kZWxldGUob3EucXVlcnlJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG9uUXVlcnlVcGRhdGVkKG9xLCBkaWZmLCBsYXN0RGlmZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgb25RdWVyeVVwZGF0ZWQgZnVuY3Rpb24gcmVxdWVzdGVkIHRoZSBkZWZhdWx0IHJlZmV0Y2hpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgYnkgcmV0dXJuaW5nIHRydWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9xLnJlZmV0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSByZXN1bHQgaW4gdGhlIHJlc3VsdHMgTWFwLCBhcyBsb25nIGFzIG9uUXVlcnlVcGRhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlkIG5vdCByZXR1cm4gZmFsc2UgdG8gc2tpcC9pZ25vcmUgdGhpcyByZXN1bHQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5zZXQob3EsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IHRoZSBkZWZhdWx0IGNhY2hlIGJyb2FkY2FzdCB0byBoYXBwZW4sIGV4Y2VwdCB3aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25RdWVyeVVwZGF0ZWQgcmV0dXJucyBmYWxzZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUXVlcnlVcGRhdGVkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBvblF1ZXJ5VXBkYXRlZCBmdW5jdGlvbiwgYW5kIG9uUXVlcnlVcGRhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2FzIG5vdCBkaXNhYmxlZCBieSBwYXNzaW5nIG51bGwsIG1ha2Ugc3VyZSB0aGlzIHF1ZXJ5IGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJpbmNsdWRlZFwiIGxpa2UgYW55IG90aGVyIG9wdGlvbnMuaW5jbHVkZS1zcGVjaWZpZWQgcXVlcnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZWRRdWVyaWVzQnlJZC5zZXQob3EucXVlcnlJZCwgeyBvcTogb3EsIGxhc3REaWZmOiBsYXN0RGlmZiwgZGlmZjogZGlmZiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5jbHVkZWRRdWVyaWVzQnlJZC5zaXplKSB7XG4gICAgICAgICAgICBpbmNsdWRlZFF1ZXJpZXNCeUlkLmZvckVhY2goZnVuY3Rpb24gKF9hLCBxdWVyeUlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9xID0gX2Eub3EsIGxhc3REaWZmID0gX2EubGFzdERpZmYsIGRpZmYgPSBfYS5kaWZmO1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICAgICAgLy8gSWYgb25RdWVyeVVwZGF0ZWQgaXMgcHJvdmlkZWQsIHdlIHdhbnQgdG8gdXNlIGl0IGZvciBhbGwgaW5jbHVkZWRcbiAgICAgICAgICAgICAgICAvLyBxdWVyaWVzLCBldmVuIHRoZSBRdWVyeU9wdGlvbnMgb25lcy5cbiAgICAgICAgICAgICAgICBpZiAob25RdWVyeVVwZGF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkaWZmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmID0gbXV0ZURlcHJlY2F0aW9ucyhcImNhbm9uaXplUmVzdWx0c1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNhY2hlLmRpZmYob3FbXCJxdWVyeUluZm9cIl1bXCJnZXREaWZmT3B0aW9uc1wiXSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9uUXVlcnlVcGRhdGVkKG9xLCBkaWZmLCBsYXN0RGlmZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgd2UgZmFsbCBiYWNrIHRvIHJlZmV0Y2hpbmcuXG4gICAgICAgICAgICAgICAgaWYgKCFvblF1ZXJ5VXBkYXRlZCB8fCByZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gb3EucmVmZXRjaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnNldChvcSwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHF1ZXJ5SWQuaW5kZXhPZihcImxlZ2FjeU9uZVRpbWVRdWVyeVwiKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnN0b3BRdWVyeU5vQnJvYWRjYXN0KHF1ZXJ5SWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZW1vdmVPcHRpbWlzdGljKSB7XG4gICAgICAgICAgICAvLyBJbiBjYXNlIG5vIHVwZGF0ZUNhY2hlIGNhbGxiYWNrIHdhcyBwcm92aWRlZCAoc28gY2FjaGUuYmF0Y2ggd2FzIG5vdFxuICAgICAgICAgICAgLy8gY2FsbGVkIGFib3ZlLCBhbmQgdGh1cyBkaWQgbm90IGFscmVhZHkgcmVtb3ZlIHRoZSBvcHRpbWlzdGljIGxheWVyKSxcbiAgICAgICAgICAgIC8vIHJlbW92ZSBpdCBoZXJlLiBTaW5jZSB0aGlzIGlzIGEgbm8tb3Agd2hlbiB0aGUgbGF5ZXIgaGFzIGFscmVhZHkgYmVlblxuICAgICAgICAgICAgLy8gcmVtb3ZlZCwgd2UgZG8gaXQgZXZlbiBpZiB3ZSBjYWxsZWQgY2FjaGUuYmF0Y2ggYWJvdmUsIHNpbmNlIGl0J3NcbiAgICAgICAgICAgIC8vIHBvc3NpYmxlIHRoaXMuY2FjaGUgaXMgYW4gaW5zdGFuY2Ugb2Ygc29tZSBBcG9sbG9DYWNoZSBzdWJjbGFzcyBvdGhlclxuICAgICAgICAgICAgLy8gdGhhbiBJbk1lbW9yeUNhY2hlLCBhbmQgZG9lcyBub3QgZnVsbHkgc3VwcG9ydCB0aGUgcmVtb3ZlT3B0aW1pc3RpY1xuICAgICAgICAgICAgLy8gb3B0aW9uIGZvciBjYWNoZS5iYXRjaC5cbiAgICAgICAgICAgIHRoaXMuY2FjaGUucmVtb3ZlT3B0aW1pc3RpYyhyZW1vdmVPcHRpbWlzdGljKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUubWFza09wZXJhdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICB2YXIgZG9jdW1lbnQgPSBvcHRpb25zLmRvY3VtZW50LCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdmFyIGZldGNoUG9saWN5ID0gb3B0aW9ucy5mZXRjaFBvbGljeSwgaWQgPSBvcHRpb25zLmlkO1xuICAgICAgICAgICAgdmFyIG9wZXJhdGlvblR5cGUgPSAoX2EgPSBnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvY3VtZW50KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9wZXJhdGlvbjtcbiAgICAgICAgICAgIHZhciBvcGVyYXRpb25JZCA9ICgoX2IgPSBvcGVyYXRpb25UeXBlID09PSBudWxsIHx8IG9wZXJhdGlvblR5cGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wZXJhdGlvblR5cGVbMF0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFwib1wiKSArIGlkO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YU1hc2tpbmcgJiZcbiAgICAgICAgICAgICAgICBmZXRjaFBvbGljeSA9PT0gXCJuby1jYWNoZVwiICYmXG4gICAgICAgICAgICAgICAgIWlzRnVsbHlVbm1hc2tlZE9wZXJhdGlvbihkb2N1bWVudCkgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5ub0NhY2hlV2FybmluZ3NCeVF1ZXJ5SWQuaGFzKG9wZXJhdGlvbklkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm9DYWNoZVdhcm5pbmdzQnlRdWVyeUlkLmFkZChvcGVyYXRpb25JZCk7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2FybihcbiAgICAgICAgICAgICAgICAgICAgNDUsXG4gICAgICAgICAgICAgICAgICAgIChfYyA9IGdldE9wZXJhdGlvbk5hbWUoZG9jdW1lbnQpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIlVubmFtZWQgXCIuY29uY2F0KG9wZXJhdGlvblR5cGUgIT09IG51bGwgJiYgb3BlcmF0aW9uVHlwZSAhPT0gdm9pZCAwID8gb3BlcmF0aW9uVHlwZSA6IFwib3BlcmF0aW9uXCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHRoaXMuZGF0YU1hc2tpbmcgP1xuICAgICAgICAgICAgbWFza09wZXJhdGlvbihkYXRhLCBkb2N1bWVudCwgdGhpcy5jYWNoZSlcbiAgICAgICAgICAgIDogZGF0YSk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLm1hc2tGcmFnbWVudCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhLCBmcmFnbWVudCA9IG9wdGlvbnMuZnJhZ21lbnQsIGZyYWdtZW50TmFtZSA9IG9wdGlvbnMuZnJhZ21lbnROYW1lO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhTWFza2luZyA/XG4gICAgICAgICAgICBtYXNrRnJhZ21lbnQoZGF0YSwgZnJhZ21lbnQsIHRoaXMuY2FjaGUsIGZyYWdtZW50TmFtZSlcbiAgICAgICAgICAgIDogZGF0YTtcbiAgICB9O1xuICAgIFF1ZXJ5TWFuYWdlci5wcm90b3R5cGUuZmV0Y2hRdWVyeUJ5UG9saWN5ID0gZnVuY3Rpb24gKHF1ZXJ5SW5mbywgX2EsIFxuICAgIC8vIFRoZSBpbml0aWFsIG5ldHdvcmtTdGF0dXMgZm9yIHRoaXMgZmV0Y2gsIG1vc3Qgb2Z0ZW5cbiAgICAvLyBOZXR3b3JrU3RhdHVzLmxvYWRpbmcsIGJ1dCBhbHNvIHBvc3NpYmx5IGZldGNoTW9yZSwgcG9sbCwgcmVmZXRjaCxcbiAgICAvLyBvciBzZXRWYXJpYWJsZXMuXG4gICAgbmV0d29ya1N0YXR1cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcXVlcnkgPSBfYS5xdWVyeSwgdmFyaWFibGVzID0gX2EudmFyaWFibGVzLCBmZXRjaFBvbGljeSA9IF9hLmZldGNoUG9saWN5LCByZWZldGNoV3JpdGVQb2xpY3kgPSBfYS5yZWZldGNoV3JpdGVQb2xpY3ksIGVycm9yUG9saWN5ID0gX2EuZXJyb3JQb2xpY3ksIHJldHVyblBhcnRpYWxEYXRhID0gX2EucmV0dXJuUGFydGlhbERhdGEsIGNvbnRleHQgPSBfYS5jb250ZXh0LCBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UgPSBfYS5ub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2U7XG4gICAgICAgIHZhciBvbGROZXR3b3JrU3RhdHVzID0gcXVlcnlJbmZvLm5ldHdvcmtTdGF0dXM7XG4gICAgICAgIHF1ZXJ5SW5mby5pbml0KHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBxdWVyeSxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgbmV0d29ya1N0YXR1czogbmV0d29ya1N0YXR1cyxcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciByZWFkQ2FjaGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBxdWVyeUluZm8uZ2V0RGlmZigpOyB9O1xuICAgICAgICB2YXIgcmVzdWx0c0Zyb21DYWNoZSA9IGZ1bmN0aW9uIChkaWZmLCBuZXR3b3JrU3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAobmV0d29ya1N0YXR1cyA9PT0gdm9pZCAwKSB7IG5ldHdvcmtTdGF0dXMgPSBxdWVyeUluZm8ubmV0d29ya1N0YXR1cyB8fCBOZXR3b3JrU3RhdHVzLmxvYWRpbmc7IH1cbiAgICAgICAgICAgIHZhciBkYXRhID0gZGlmZi5yZXN1bHQ7XG4gICAgICAgICAgICBpZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiAhcmV0dXJuUGFydGlhbERhdGEgJiYgIWVxdWFsKGRhdGEsIHt9KSkge1xuICAgICAgICAgICAgICAgIGxvZ01pc3NpbmdGaWVsZEVycm9ycyhkaWZmLm1pc3NpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZyb21EYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS5vZihfX2Fzc2lnbih7IGRhdGE6IGRhdGEsIGxvYWRpbmc6IGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodChuZXR3b3JrU3RhdHVzKSwgbmV0d29ya1N0YXR1czogbmV0d29ya1N0YXR1cyB9LCAoZGlmZi5jb21wbGV0ZSA/IG51bGwgOiB7IHBhcnRpYWw6IHRydWUgfSkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBfdGhpcy5nZXREb2N1bWVudEluZm8ocXVlcnkpLmhhc0ZvcmNlZFJlc29sdmVycykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbFN0YXRlXG4gICAgICAgICAgICAgICAgICAgIC5ydW5SZXNvbHZlcnMoe1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogcXVlcnksXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVJlc3VsdDogeyBkYXRhOiBkYXRhIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICBvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZCkgeyByZXR1cm4gZnJvbURhdGEocmVzb2x2ZWQuZGF0YSB8fCB2b2lkIDApOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlc29sdmVzIGh0dHBzOi8vZ2l0aHViLmNvbS9hcG9sbG9ncmFwaHFsL2Fwb2xsby1jbGllbnQvaXNzdWVzLzEwMzE3LlxuICAgICAgICAgICAgLy8gSWYgZXJyb3JQb2xpY3kgaXMgJ25vbmUnIGFuZCBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UgaXMgdHJ1ZSxcbiAgICAgICAgICAgIC8vIGRhdGEgd2FzIGluY29ycmVjdGx5IHJldHVybmVkIGZyb20gdGhlIGNhY2hlIG9uIHJlZmV0Y2g6XG4gICAgICAgICAgICAvLyBpZiBkaWZmLm1pc3NpbmcgZXhpc3RzLCB3ZSBzaG91bGQgbm90IHJldHVybiBjYWNoZSBkYXRhLlxuICAgICAgICAgICAgaWYgKGVycm9yUG9saWN5ID09PSBcIm5vbmVcIiAmJlxuICAgICAgICAgICAgICAgIG5ldHdvcmtTdGF0dXMgPT09IE5ldHdvcmtTdGF0dXMucmVmZXRjaCAmJlxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZGlmZi5taXNzaW5nKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tRGF0YSh2b2lkIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZyb21EYXRhKGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgY2FjaGVXcml0ZUJlaGF2aW9yID0gZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIiA/IDAgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLkZPUkJJRCAqL1xuICAgICAgICAgICAgLy8gV2F0Y2hlZCBxdWVyaWVzIG11c3Qgb3B0IGludG8gb3ZlcndyaXRpbmcgZXhpc3RpbmcgZGF0YSBvbiByZWZldGNoLFxuICAgICAgICAgICAgLy8gYnkgcGFzc2luZyByZWZldGNoV3JpdGVQb2xpY3k6IFwib3ZlcndyaXRlXCIgaW4gdGhlaXIgV2F0Y2hRdWVyeU9wdGlvbnMuXG4gICAgICAgICAgICA6IChuZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLnJlZmV0Y2ggJiZcbiAgICAgICAgICAgICAgICByZWZldGNoV3JpdGVQb2xpY3kgIT09IFwibWVyZ2VcIikgP1xuICAgICAgICAgICAgICAgIDEgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLk9WRVJXUklURSAqL1xuICAgICAgICAgICAgICAgIDogMiAvKiBDYWNoZVdyaXRlQmVoYXZpb3IuTUVSR0UgKi87XG4gICAgICAgIHZhciByZXN1bHRzRnJvbUxpbmsgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0UmVzdWx0c0Zyb21MaW5rKHF1ZXJ5SW5mbywgY2FjaGVXcml0ZUJlaGF2aW9yLCB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IGZldGNoUG9saWN5LFxuICAgICAgICAgICAgICAgIGVycm9yUG9saWN5OiBlcnJvclBvbGljeSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgc2hvdWxkTm90aWZ5ID0gbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlICYmXG4gICAgICAgICAgICB0eXBlb2Ygb2xkTmV0d29ya1N0YXR1cyA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICAgICAgb2xkTmV0d29ya1N0YXR1cyAhPT0gbmV0d29ya1N0YXR1cyAmJlxuICAgICAgICAgICAgaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0KG5ldHdvcmtTdGF0dXMpO1xuICAgICAgICBzd2l0Y2ggKGZldGNoUG9saWN5KSB7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FzZSBcImNhY2hlLWZpcnN0XCI6IHtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IHJlYWRDYWNoZSgpO1xuICAgICAgICAgICAgICAgIGlmIChkaWZmLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tTGluazogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBbcmVzdWx0c0Zyb21DYWNoZShkaWZmLCBxdWVyeUluZm8ubWFya1JlYWR5KCkpXSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblBhcnRpYWxEYXRhIHx8IHNob3VsZE5vdGlmeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUxpbms6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBbcmVzdWx0c0Zyb21DYWNoZShkaWZmKSwgcmVzdWx0c0Zyb21MaW5rKCldLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBmcm9tTGluazogdHJ1ZSwgc291cmNlczogW3Jlc3VsdHNGcm9tTGluaygpXSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImNhY2hlLWFuZC1uZXR3b3JrXCI6IHtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IHJlYWRDYWNoZSgpO1xuICAgICAgICAgICAgICAgIGlmIChkaWZmLmNvbXBsZXRlIHx8IHJldHVyblBhcnRpYWxEYXRhIHx8IHNob3VsZE5vdGlmeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUxpbms6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBbcmVzdWx0c0Zyb21DYWNoZShkaWZmKSwgcmVzdWx0c0Zyb21MaW5rKCldLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBmcm9tTGluazogdHJ1ZSwgc291cmNlczogW3Jlc3VsdHNGcm9tTGluaygpXSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImNhY2hlLW9ubHlcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmcm9tTGluazogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFtyZXN1bHRzRnJvbUNhY2hlKHJlYWRDYWNoZSgpLCBxdWVyeUluZm8ubWFya1JlYWR5KCkpXSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSBcIm5ldHdvcmstb25seVwiOlxuICAgICAgICAgICAgICAgIGlmIChzaG91bGROb3RpZnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21MaW5rOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlczogW3Jlc3VsdHNGcm9tQ2FjaGUocmVhZENhY2hlKCkpLCByZXN1bHRzRnJvbUxpbmsoKV0sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGZyb21MaW5rOiB0cnVlLCBzb3VyY2VzOiBbcmVzdWx0c0Zyb21MaW5rKCldIH07XG4gICAgICAgICAgICBjYXNlIFwibm8tY2FjaGVcIjpcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkTm90aWZ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tTGluazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBxdWVyeUluZm8uZ2V0RGlmZigpIGZvciBuby1jYWNoZSBxdWVyaWVzIGRvZXMgbm90IGNhbGxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhY2hlLmRpZmYsIGJ1dCBpbnN0ZWFkIHJldHVybnMgYSB7IGNvbXBsZXRlOiBmYWxzZSB9IHN0dWIgcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZXJlIGlzIG5vIHF1ZXJ5SW5mby5kaWZmIGFscmVhZHkgZGVmaW5lZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZXM6IFtyZXN1bHRzRnJvbUNhY2hlKHF1ZXJ5SW5mby5nZXREaWZmKCkpLCByZXN1bHRzRnJvbUxpbmsoKV0sXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGZyb21MaW5rOiB0cnVlLCBzb3VyY2VzOiBbcmVzdWx0c0Zyb21MaW5rKCldIH07XG4gICAgICAgICAgICBjYXNlIFwic3RhbmRieVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7IGZyb21MaW5rOiBmYWxzZSwgc291cmNlczogW10gfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUXVlcnlNYW5hZ2VyLnByb3RvdHlwZS5nZXRPckNyZWF0ZVF1ZXJ5ID0gZnVuY3Rpb24gKHF1ZXJ5SWQpIHtcbiAgICAgICAgaWYgKHF1ZXJ5SWQgJiYgIXRoaXMucXVlcmllcy5oYXMocXVlcnlJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5zZXQocXVlcnlJZCwgbmV3IFF1ZXJ5SW5mbyh0aGlzLCBxdWVyeUlkKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcmllcy5nZXQocXVlcnlJZCk7XG4gICAgfTtcbiAgICBRdWVyeU1hbmFnZXIucHJvdG90eXBlLnByZXBhcmVDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgeyBjb250ZXh0ID0ge307IH1cbiAgICAgICAgdmFyIG5ld0NvbnRleHQgPSB0aGlzLmxvY2FsU3RhdGUucHJlcGFyZUNvbnRleHQoY29udGV4dCk7XG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5kZWZhdWx0Q29udGV4dCksIG5ld0NvbnRleHQpLCB7IGNsaWVudEF3YXJlbmVzczogdGhpcy5jbGllbnRBd2FyZW5lc3MgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUXVlcnlNYW5hZ2VyO1xufSgpKTtcbmV4cG9ydCB7IFF1ZXJ5TWFuYWdlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVlcnlNYW5hZ2VyLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCIuLi91dGlsaXRpZXMvZ2xvYmFscy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdmlzaXQsIEJSRUFLLCBpc1NlbGVjdGlvbk5vZGUgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkLCBidWlsZFF1ZXJ5RnJvbVNlbGVjdGlvblNldCwgY3JlYXRlRnJhZ21lbnRNYXAsIGdldEZyYWdtZW50RGVmaW5pdGlvbnMsIGdldE1haW5EZWZpbml0aW9uLCBoYXNEaXJlY3RpdmVzLCBpc0ZpZWxkLCBpc0lubGluZUZyYWdtZW50LCBtZXJnZURlZXAsIG1lcmdlRGVlcEFycmF5LCByZW1vdmVDbGllbnRTZXRzRnJvbURvY3VtZW50LCByZXN1bHRLZXlOYW1lRnJvbUZpZWxkLCBzaG91bGRJbmNsdWRlLCB9IGZyb20gXCIuLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGNhY2hlU2xvdCB9IGZyb20gXCIuLi9jYWNoZS9pbmRleC5qc1wiO1xudmFyIExvY2FsU3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTG9jYWxTdGF0ZShfYSkge1xuICAgICAgICB2YXIgY2FjaGUgPSBfYS5jYWNoZSwgY2xpZW50ID0gX2EuY2xpZW50LCByZXNvbHZlcnMgPSBfYS5yZXNvbHZlcnMsIGZyYWdtZW50TWF0Y2hlciA9IF9hLmZyYWdtZW50TWF0Y2hlcjtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25zVG9SZXNvbHZlQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgICAgIGlmIChjbGllbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvbHZlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkUmVzb2x2ZXJzKHJlc29sdmVycyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyYWdtZW50TWF0Y2hlcikge1xuICAgICAgICAgICAgdGhpcy5zZXRGcmFnbWVudE1hdGNoZXIoZnJhZ21lbnRNYXRjaGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5hZGRSZXNvbHZlcnMgPSBmdW5jdGlvbiAocmVzb2x2ZXJzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMucmVzb2x2ZXJzID0gdGhpcy5yZXNvbHZlcnMgfHwge307XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc29sdmVycykpIHtcbiAgICAgICAgICAgIHJlc29sdmVycy5mb3JFYWNoKGZ1bmN0aW9uIChyZXNvbHZlckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucmVzb2x2ZXJzID0gbWVyZ2VEZWVwKF90aGlzLnJlc29sdmVycywgcmVzb2x2ZXJHcm91cCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXJzID0gbWVyZ2VEZWVwKHRoaXMucmVzb2x2ZXJzLCByZXNvbHZlcnMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5zZXRSZXNvbHZlcnMgPSBmdW5jdGlvbiAocmVzb2x2ZXJzKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZXJzID0ge307XG4gICAgICAgIHRoaXMuYWRkUmVzb2x2ZXJzKHJlc29sdmVycyk7XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5nZXRSZXNvbHZlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVycyB8fCB7fTtcbiAgICB9O1xuICAgIC8vIFJ1biBsb2NhbCBjbGllbnQgcmVzb2x2ZXJzIGFnYWluc3QgdGhlIGluY29taW5nIHF1ZXJ5IGFuZCByZW1vdGUgZGF0YS5cbiAgICAvLyBMb2NhbGx5IHJlc29sdmVkIGZpZWxkIHZhbHVlcyBhcmUgbWVyZ2VkIHdpdGggdGhlIGluY29taW5nIHJlbW90ZSBkYXRhLFxuICAgIC8vIGFuZCByZXR1cm5lZC4gTm90ZSB0aGF0IGxvY2FsbHkgcmVzb2x2ZWQgZmllbGRzIHdpbGwgb3ZlcndyaXRlXG4gICAgLy8gcmVtb3RlIGRhdGEgdXNpbmcgdGhlIHNhbWUgZmllbGQgbmFtZS5cbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5ydW5SZXNvbHZlcnMgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICB2YXIgZG9jdW1lbnQgPSBfYi5kb2N1bWVudCwgcmVtb3RlUmVzdWx0ID0gX2IucmVtb3RlUmVzdWx0LCBjb250ZXh0ID0gX2IuY29udGV4dCwgdmFyaWFibGVzID0gX2IudmFyaWFibGVzLCBfYyA9IF9iLm9ubHlSdW5Gb3JjZWRSZXNvbHZlcnMsIG9ubHlSdW5Gb3JjZWRSZXNvbHZlcnMgPSBfYyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2QpIHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucmVzb2x2ZURvY3VtZW50KGRvY3VtZW50LCByZW1vdGVSZXN1bHQuZGF0YSwgY29udGV4dCwgdmFyaWFibGVzLCB0aGlzLmZyYWdtZW50TWF0Y2hlciwgb25seVJ1bkZvcmNlZFJlc29sdmVycykudGhlbihmdW5jdGlvbiAobG9jYWxSZXN1bHQpIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVtb3RlUmVzdWx0KSwgeyBkYXRhOiBsb2NhbFJlc3VsdC5yZXN1bHQgfSkpOyB9KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZW1vdGVSZXN1bHRdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUuc2V0RnJhZ21lbnRNYXRjaGVyID0gZnVuY3Rpb24gKGZyYWdtZW50TWF0Y2hlcikge1xuICAgICAgICB0aGlzLmZyYWdtZW50TWF0Y2hlciA9IGZyYWdtZW50TWF0Y2hlcjtcbiAgICB9O1xuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLmdldEZyYWdtZW50TWF0Y2hlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJhZ21lbnRNYXRjaGVyO1xuICAgIH07XG4gICAgLy8gQ2xpZW50IHF1ZXJpZXMgY29udGFpbiBldmVyeXRoaW5nIGluIHRoZSBpbmNvbWluZyBkb2N1bWVudCAoaWYgYSBAY2xpZW50XG4gICAgLy8gZGlyZWN0aXZlIGlzIGZvdW5kKS5cbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5jbGllbnRRdWVyeSA9IGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICBpZiAoaGFzRGlyZWN0aXZlcyhbXCJjbGllbnRcIl0sIGRvY3VtZW50KSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzb2x2ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgLy8gU2VydmVyIHF1ZXJpZXMgYXJlIHN0cmlwcGVkIG9mIGFsbCBAY2xpZW50IGJhc2VkIHNlbGVjdGlvbiBzZXRzLlxuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLnNlcnZlclF1ZXJ5ID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiByZW1vdmVDbGllbnRTZXRzRnJvbURvY3VtZW50KGRvY3VtZW50KTtcbiAgICB9O1xuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLnByZXBhcmVDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcbiAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb250ZXh0KSwgeyBjYWNoZTogY2FjaGUsIFxuICAgICAgICAgICAgLy8gR2V0dGluZyBhbiBlbnRyeSdzIGNhY2hlIGtleSBpcyB1c2VmdWwgZm9yIGxvY2FsIHN0YXRlIHJlc29sdmVycy5cbiAgICAgICAgICAgIGdldENhY2hlS2V5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlLmlkZW50aWZ5KG9iaik7XG4gICAgICAgICAgICB9IH0pO1xuICAgIH07XG4gICAgLy8gVG8gc3VwcG9ydCBgQGNsaWVudCBAZXhwb3J0KGFzOiBcInNvbWVWYXJcIilgIHN5bnRheCwgd2UnbGwgZmlyc3QgcmVzb2x2ZVxuICAgIC8vIEBjbGllbnQgQGV4cG9ydCBmaWVsZHMgbG9jYWxseSwgdGhlbiBwYXNzIHRoZSByZXNvbHZlZCB2YWx1ZXMgYmFjayB0byBiZVxuICAgIC8vIHVzZWQgYWxvbmdzaWRlIHRoZSBvcmlnaW5hbCBvcGVyYXRpb24gdmFyaWFibGVzLlxuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLmFkZEV4cG9ydGVkVmFyaWFibGVzID0gZnVuY3Rpb24gKGRvY3VtZW50XzEpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCBhcmd1bWVudHMsIHZvaWQgMCwgZnVuY3Rpb24gKGRvY3VtZW50LCB2YXJpYWJsZXMsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIGlmICh2YXJpYWJsZXMgPT09IHZvaWQgMCkgeyB2YXJpYWJsZXMgPSB7fTsgfVxuICAgICAgICAgICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgeyBjb250ZXh0ID0ge307IH1cbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucmVzb2x2ZURvY3VtZW50KGRvY3VtZW50LCB0aGlzLmJ1aWxkUm9vdFZhbHVlRnJvbUNhY2hlKGRvY3VtZW50LCB2YXJpYWJsZXMpIHx8IHt9LCB0aGlzLnByZXBhcmVDb250ZXh0KGNvbnRleHQpLCB2YXJpYWJsZXMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIChfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdmFyaWFibGVzKSwgZGF0YS5leHBvcnRlZFZhcmlhYmxlcykpOyB9KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBfX2Fzc2lnbih7fSwgdmFyaWFibGVzKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5zaG91bGRGb3JjZVJlc29sdmVycyA9IGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICB2YXIgZm9yY2VSZXNvbHZlcnMgPSBmYWxzZTtcbiAgICAgICAgdmlzaXQoZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIERpcmVjdGl2ZToge1xuICAgICAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5uYW1lLnZhbHVlID09PSBcImNsaWVudFwiICYmIG5vZGUuYXJndW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZVJlc29sdmVycyA9IG5vZGUuYXJndW1lbnRzLnNvbWUoZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubmFtZS52YWx1ZSA9PT0gXCJhbHdheXNcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmcudmFsdWUua2luZCA9PT0gXCJCb29sZWFuVmFsdWVcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmcudmFsdWUudmFsdWUgPT09IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZVJlc29sdmVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCUkVBSztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZvcmNlUmVzb2x2ZXJzO1xuICAgIH07XG4gICAgLy8gUXVlcnkgdGhlIGNhY2hlIGFuZCByZXR1cm4gbWF0Y2hpbmcgZGF0YS5cbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5idWlsZFJvb3RWYWx1ZUZyb21DYWNoZSA9IGZ1bmN0aW9uIChkb2N1bWVudCwgdmFyaWFibGVzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmRpZmYoe1xuICAgICAgICAgICAgcXVlcnk6IGJ1aWxkUXVlcnlGcm9tU2VsZWN0aW9uU2V0KGRvY3VtZW50KSxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgcmV0dXJuUGFydGlhbERhdGE6IHRydWUsXG4gICAgICAgICAgICBvcHRpbWlzdGljOiBmYWxzZSxcbiAgICAgICAgfSkucmVzdWx0O1xuICAgIH07XG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUucmVzb2x2ZURvY3VtZW50ID0gZnVuY3Rpb24gKGRvY3VtZW50XzEsIHJvb3RWYWx1ZV8xKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgYXJndW1lbnRzLCB2b2lkIDAsIGZ1bmN0aW9uIChkb2N1bWVudCwgcm9vdFZhbHVlLCBjb250ZXh0LCB2YXJpYWJsZXMsIGZyYWdtZW50TWF0Y2hlciwgb25seVJ1bkZvcmNlZFJlc29sdmVycykge1xuICAgICAgICAgICAgdmFyIG1haW5EZWZpbml0aW9uLCBmcmFnbWVudHMsIGZyYWdtZW50TWFwLCBzZWxlY3Rpb25zVG9SZXNvbHZlLCBkZWZpbml0aW9uT3BlcmF0aW9uLCBkZWZhdWx0T3BlcmF0aW9uVHlwZSwgX2EsIGNhY2hlLCBjbGllbnQsIGV4ZWNDb250ZXh0LCBpc0NsaWVudEZpZWxkRGVzY2VuZGFudDtcbiAgICAgICAgICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHsgY29udGV4dCA9IHt9OyB9XG4gICAgICAgICAgICBpZiAodmFyaWFibGVzID09PSB2b2lkIDApIHsgdmFyaWFibGVzID0ge307IH1cbiAgICAgICAgICAgIGlmIChmcmFnbWVudE1hdGNoZXIgPT09IHZvaWQgMCkgeyBmcmFnbWVudE1hdGNoZXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9OyB9XG4gICAgICAgICAgICBpZiAob25seVJ1bkZvcmNlZFJlc29sdmVycyA9PT0gdm9pZCAwKSB7IG9ubHlSdW5Gb3JjZWRSZXNvbHZlcnMgPSBmYWxzZTsgfVxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIG1haW5EZWZpbml0aW9uID0gZ2V0TWFpbkRlZmluaXRpb24oZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgIGZyYWdtZW50cyA9IGdldEZyYWdtZW50RGVmaW5pdGlvbnMoZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgIGZyYWdtZW50TWFwID0gY3JlYXRlRnJhZ21lbnRNYXAoZnJhZ21lbnRzKTtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zVG9SZXNvbHZlID0gdGhpcy5jb2xsZWN0U2VsZWN0aW9uc1RvUmVzb2x2ZShtYWluRGVmaW5pdGlvbiwgZnJhZ21lbnRNYXApO1xuICAgICAgICAgICAgICAgIGRlZmluaXRpb25PcGVyYXRpb24gPSBtYWluRGVmaW5pdGlvbi5vcGVyYXRpb247XG4gICAgICAgICAgICAgICAgZGVmYXVsdE9wZXJhdGlvblR5cGUgPSBkZWZpbml0aW9uT3BlcmF0aW9uID9cbiAgICAgICAgICAgICAgICAgICAgZGVmaW5pdGlvbk9wZXJhdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9uT3BlcmF0aW9uLnNsaWNlKDEpXG4gICAgICAgICAgICAgICAgICAgIDogXCJRdWVyeVwiO1xuICAgICAgICAgICAgICAgIF9hID0gdGhpcywgY2FjaGUgPSBfYS5jYWNoZSwgY2xpZW50ID0gX2EuY2xpZW50O1xuICAgICAgICAgICAgICAgIGV4ZWNDb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudE1hcDogZnJhZ21lbnRNYXAsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjb250ZXh0KSwgeyBjYWNoZTogY2FjaGUsIGNsaWVudDogY2xpZW50IH0pLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRNYXRjaGVyOiBmcmFnbWVudE1hdGNoZXIsXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRPcGVyYXRpb25UeXBlOiBkZWZhdWx0T3BlcmF0aW9uVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZXhwb3J0ZWRWYXJpYWJsZXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25zVG9SZXNvbHZlOiBzZWxlY3Rpb25zVG9SZXNvbHZlLFxuICAgICAgICAgICAgICAgICAgICBvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzOiBvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaXNDbGllbnRGaWVsZERlc2NlbmRhbnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5yZXNvbHZlU2VsZWN0aW9uU2V0KG1haW5EZWZpbml0aW9uLnNlbGVjdGlvblNldCwgaXNDbGllbnRGaWVsZERlc2NlbmRhbnQsIHJvb3RWYWx1ZSwgZXhlY0NvbnRleHQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0ZWRWYXJpYWJsZXM6IGV4ZWNDb250ZXh0LmV4cG9ydGVkVmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICB9KTsgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUucmVzb2x2ZVNlbGVjdGlvblNldCA9IGZ1bmN0aW9uIChzZWxlY3Rpb25TZXQsIGlzQ2xpZW50RmllbGREZXNjZW5kYW50LCByb290VmFsdWUsIGV4ZWNDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBmcmFnbWVudE1hcCwgY29udGV4dCwgdmFyaWFibGVzLCByZXN1bHRzVG9NZXJnZSwgZXhlY3V0ZTtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnRNYXAgPSBleGVjQ29udGV4dC5mcmFnbWVudE1hcCwgY29udGV4dCA9IGV4ZWNDb250ZXh0LmNvbnRleHQsIHZhcmlhYmxlcyA9IGV4ZWNDb250ZXh0LnZhcmlhYmxlcztcbiAgICAgICAgICAgICAgICByZXN1bHRzVG9NZXJnZSA9IFtyb290VmFsdWVdO1xuICAgICAgICAgICAgICAgIGV4ZWN1dGUgPSBmdW5jdGlvbiAoc2VsZWN0aW9uKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudCwgdHlwZUNvbmRpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NsaWVudEZpZWxkRGVzY2VuZGFudCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFleGVjQ29udGV4dC5zZWxlY3Rpb25zVG9SZXNvbHZlLmhhcyhzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBzZWxlY3Rpb25zIHdpdGhvdXQgQGNsaWVudCBkaXJlY3RpdmVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKHN0aWxsIHByb2Nlc3NpbmcgaWYgb25lIG9mIHRoZSBhbmNlc3RvcnMgb3Igb25lIG9mIHRoZSBjaGlsZCBmaWVsZHMgaGFzIEBjbGllbnQgZGlyZWN0aXZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2hvdWxkSW5jbHVkZShzZWxlY3Rpb24sIHZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIHRoaXMgZW50aXJlbHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnJlc29sdmVGaWVsZChzZWxlY3Rpb24sIGlzQ2xpZW50RmllbGREZXNjZW5kYW50LCByb290VmFsdWUsIGV4ZWNDb250ZXh0KS50aGVuKGZ1bmN0aW9uIChmaWVsZFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWVsZFJlc3VsdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNUb01lcmdlLnB1c2goKF9hID0ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hW3Jlc3VsdEtleU5hbWVGcm9tRmllbGQoc2VsZWN0aW9uKV0gPSBmaWVsZFJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5saW5lRnJhZ21lbnQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gc2VsZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIG5hbWVkIGZyYWdtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gZnJhZ21lbnRNYXBbc2VsZWN0aW9uLm5hbWUudmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFyaWFudChmcmFnbWVudCwgMjEsIHNlbGVjdGlvbi5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmFnbWVudCAmJiBmcmFnbWVudC50eXBlQ29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZUNvbmRpdGlvbiA9IGZyYWdtZW50LnR5cGVDb25kaXRpb24ubmFtZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhlY0NvbnRleHQuZnJhZ21lbnRNYXRjaGVyKHJvb3RWYWx1ZSwgdHlwZUNvbmRpdGlvbiwgY29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucmVzb2x2ZVNlbGVjdGlvblNldChmcmFnbWVudC5zZWxlY3Rpb25TZXQsIGlzQ2xpZW50RmllbGREZXNjZW5kYW50LCByb290VmFsdWUsIGV4ZWNDb250ZXh0KS50aGVuKGZ1bmN0aW9uIChmcmFnbWVudFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNUb01lcmdlLnB1c2goZnJhZ21lbnRSZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7IH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UuYWxsKHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLm1hcChleGVjdXRlKSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWVyZ2VEZWVwQXJyYXkocmVzdWx0c1RvTWVyZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBMb2NhbFN0YXRlLnByb3RvdHlwZS5yZXNvbHZlRmllbGQgPSBmdW5jdGlvbiAoZmllbGQsIGlzQ2xpZW50RmllbGREZXNjZW5kYW50LCByb290VmFsdWUsIGV4ZWNDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YXJpYWJsZXMsIGZpZWxkTmFtZSwgYWxpYXNlZEZpZWxkTmFtZSwgYWxpYXNVc2VkLCBkZWZhdWx0UmVzdWx0LCByZXN1bHRQcm9taXNlLCByZXNvbHZlclR5cGUsIHJlc29sdmVyTWFwLCByZXNvbHZlO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbnVsbF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhcmlhYmxlcyA9IGV4ZWNDb250ZXh0LnZhcmlhYmxlcztcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWUgPSBmaWVsZC5uYW1lLnZhbHVlO1xuICAgICAgICAgICAgICAgIGFsaWFzZWRGaWVsZE5hbWUgPSByZXN1bHRLZXlOYW1lRnJvbUZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgICAgICBhbGlhc1VzZWQgPSBmaWVsZE5hbWUgIT09IGFsaWFzZWRGaWVsZE5hbWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFJlc3VsdCA9IHJvb3RWYWx1ZVthbGlhc2VkRmllbGROYW1lXSB8fCByb290VmFsdWVbZmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICByZXN1bHRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGRlZmF1bHRSZXN1bHQpO1xuICAgICAgICAgICAgICAgIC8vIFVzdWFsbHkgYWxsIGxvY2FsIHJlc29sdmVycyBhcmUgcnVuIHdoZW4gcGFzc2luZyB0aHJvdWdoIGhlcmUsIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGlmIHdlJ3ZlIHNwZWNpZmljYWxseSBpZGVudGlmaWVkIHRoYXQgd2Ugb25seSB3YW50IHRvIHJ1biBmb3JjZWRcbiAgICAgICAgICAgICAgICAvLyByZXNvbHZlcnMgKHRoYXQgaXMsIHJlc29sdmVycyBmb3IgZmllbGRzIG1hcmtlZCB3aXRoXG4gICAgICAgICAgICAgICAgLy8gYEBjbGllbnQoYWx3YXlzOiB0cnVlKWApLCB0aGVuIHdlJ2xsIHNraXAgcnVubmluZyBub24tZm9yY2VkIHJlc29sdmVycy5cbiAgICAgICAgICAgICAgICBpZiAoIWV4ZWNDb250ZXh0Lm9ubHlSdW5Gb3JjZWRSZXNvbHZlcnMgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG91bGRGb3JjZVJlc29sdmVycyhmaWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZXJUeXBlID0gcm9vdFZhbHVlLl9fdHlwZW5hbWUgfHwgZXhlY0NvbnRleHQuZGVmYXVsdE9wZXJhdGlvblR5cGU7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVyTWFwID0gdGhpcy5yZXNvbHZlcnMgJiYgdGhpcy5yZXNvbHZlcnNbcmVzb2x2ZXJUeXBlXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc29sdmVyTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gcmVzb2x2ZXJNYXBbYWxpYXNVc2VkID8gZmllbGROYW1lIDogYWxpYXNlZEZpZWxkTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gY2FzZSB0aGUgcmVzb2x2ZSBmdW5jdGlvbiBhY2Nlc3NlcyByZWFjdGl2ZSB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNhY2hlU2xvdCB0byB0aGUgY3VycmVudCBjYWNoZSBpbnN0YW5jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVNsb3Qud2l0aFZhbHVlKHRoaXMuY2FjaGUsIHJlc29sdmUsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQoZmllbGQsIHZhcmlhYmxlcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWNDb250ZXh0LmNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZmllbGQ6IGZpZWxkLCBmcmFnbWVudE1hcDogZXhlY0NvbnRleHQuZnJhZ21lbnRNYXAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdFByb21pc2UudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7IHJlc3VsdCA9IGRlZmF1bHRSZXN1bHQ7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGFuIEBleHBvcnQgZGlyZWN0aXZlIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBmaWVsZCwgc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBgYXNgIGV4cG9ydCB2YXJpYWJsZSBuYW1lIGFuZCBjdXJyZW50IHJlc3VsdCBmb3IgbGF0ZXIgdXNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmRpcmVjdGl2ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5kaXJlY3RpdmVzLmZvckVhY2goZnVuY3Rpb24gKGRpcmVjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aXZlLm5hbWUudmFsdWUgPT09IFwiZXhwb3J0XCIgJiYgZGlyZWN0aXZlLmFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlLmFyZ3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJnLm5hbWUudmFsdWUgPT09IFwiYXNcIiAmJiBhcmcudmFsdWUua2luZCA9PT0gXCJTdHJpbmdWYWx1ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWNDb250ZXh0LmV4cG9ydGVkVmFyaWFibGVzW2FyZy52YWx1ZS52YWx1ZV0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBhbGwgc2NhbGFyIHR5cGVzIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpZWxkLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGcm9tIGhlcmUgZG93biwgdGhlIGZpZWxkIGhhcyBhIHNlbGVjdGlvbiBzZXQsIHdoaWNoIG1lYW5zIGl0J3MgdHJ5aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBxdWVyeSBhIEdyYXBoUUxPYmplY3RUeXBlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmFzaWNhbGx5IGFueSBmaWVsZCBpbiBhIEdyYXBoUUwgcmVzcG9uc2UgY2FuIGJlIG51bGwsIG9yIG1pc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzQ2xpZW50RmllbGQgPSAoX2IgPSAoX2EgPSBmaWVsZC5kaXJlY3RpdmVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc29tZShmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5uYW1lLnZhbHVlID09PSBcImNsaWVudFwiOyB9KSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlc29sdmVTdWJTZWxlY3RlZEFycmF5KGZpZWxkLCBpc0NsaWVudEZpZWxkRGVzY2VuZGFudCB8fCBpc0NsaWVudEZpZWxkLCByZXN1bHQsIGV4ZWNDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldHVybmVkIHZhbHVlIGlzIGFuIG9iamVjdCwgYW5kIHRoZSBxdWVyeSBoYXMgYSBzdWItc2VsZWN0aW9uLiBSZWN1cnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZXNvbHZlU2VsZWN0aW9uU2V0KGZpZWxkLnNlbGVjdGlvblNldCwgaXNDbGllbnRGaWVsZERlc2NlbmRhbnQgfHwgaXNDbGllbnRGaWVsZCwgcmVzdWx0LCBleGVjQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExvY2FsU3RhdGUucHJvdG90eXBlLnJlc29sdmVTdWJTZWxlY3RlZEFycmF5ID0gZnVuY3Rpb24gKGZpZWxkLCBpc0NsaWVudEZpZWxkRGVzY2VuZGFudCwgcmVzdWx0LCBleGVjQ29udGV4dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVzdWx0Lm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBuZXN0ZWQgYXJyYXksIHJlY3Vyc2UuXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZXNvbHZlU3ViU2VsZWN0ZWRBcnJheShmaWVsZCwgaXNDbGllbnRGaWVsZERlc2NlbmRhbnQsIGl0ZW0sIGV4ZWNDb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYW4gb2JqZWN0LCBydW4gdGhlIHNlbGVjdGlvbiBzZXQgb24gaXQuXG4gICAgICAgICAgICBpZiAoZmllbGQuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlc29sdmVTZWxlY3Rpb25TZXQoZmllbGQuc2VsZWN0aW9uU2V0LCBpc0NsaWVudEZpZWxkRGVzY2VuZGFudCwgaXRlbSwgZXhlY0NvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICAvLyBDb2xsZWN0IHNlbGVjdGlvbiBub2RlcyBvbiBwYXRocyBmcm9tIGRvY3VtZW50IHJvb3QgZG93biB0byBhbGwgQGNsaWVudCBkaXJlY3RpdmVzLlxuICAgIC8vIFRoaXMgZnVuY3Rpb24gdGFrZXMgaW50byBhY2NvdW50IHRyYW5zaXRpdmUgZnJhZ21lbnQgc3ByZWFkcy5cbiAgICAvLyBDb21wbGV4aXR5IGVxdWFscyB0byBhIHNpbmdsZSBgdmlzaXRgIG92ZXIgdGhlIGZ1bGwgZG9jdW1lbnQuXG4gICAgTG9jYWxTdGF0ZS5wcm90b3R5cGUuY29sbGVjdFNlbGVjdGlvbnNUb1Jlc29sdmUgPSBmdW5jdGlvbiAobWFpbkRlZmluaXRpb24sIGZyYWdtZW50TWFwKSB7XG4gICAgICAgIHZhciBpc1NpbmdsZUFTVE5vZGUgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gIUFycmF5LmlzQXJyYXkobm9kZSk7IH07XG4gICAgICAgIHZhciBzZWxlY3Rpb25zVG9SZXNvbHZlQ2FjaGUgPSB0aGlzLnNlbGVjdGlvbnNUb1Jlc29sdmVDYWNoZTtcbiAgICAgICAgZnVuY3Rpb24gY29sbGVjdEJ5RGVmaW5pdGlvbihkZWZpbml0aW9uTm9kZSkge1xuICAgICAgICAgICAgaWYgKCFzZWxlY3Rpb25zVG9SZXNvbHZlQ2FjaGUuaGFzKGRlZmluaXRpb25Ob2RlKSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzXzEgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uc1RvUmVzb2x2ZUNhY2hlLnNldChkZWZpbml0aW9uTm9kZSwgbWF0Y2hlc18xKTtcbiAgICAgICAgICAgICAgICB2aXNpdChkZWZpbml0aW9uTm9kZSwge1xuICAgICAgICAgICAgICAgICAgICBEaXJlY3RpdmU6IGZ1bmN0aW9uIChub2RlLCBfLCBfXywgX19fLCBhbmNlc3RvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlLm5hbWUudmFsdWUgPT09IFwiY2xpZW50XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNlc3RvcnMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTaW5nbGVBU1ROb2RlKG5vZGUpICYmIGlzU2VsZWN0aW9uTm9kZShub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlc18xLmFkZChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBGcmFnbWVudFNwcmVhZDogZnVuY3Rpb24gKHNwcmVhZCwgXywgX18sIF9fXywgYW5jZXN0b3JzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJhZ21lbnQgPSBmcmFnbWVudE1hcFtzcHJlYWQubmFtZS52YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhcmlhbnQoZnJhZ21lbnQsIDIyLCBzcHJlYWQubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnJhZ21lbnRTZWxlY3Rpb25zID0gY29sbGVjdEJ5RGVmaW5pdGlvbihmcmFnbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJhZ21lbnRTZWxlY3Rpb25zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRnJhZ21lbnQgZm9yIHRoaXMgc3ByZWFkIGNvbnRhaW5zIEBjbGllbnQgZGlyZWN0aXZlIChlaXRoZXIgZGlyZWN0bHkgb3IgdHJhbnNpdGl2ZWx5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbGxlY3Qgc2VsZWN0aW9uIG5vZGVzIG9uIHBhdGhzIGZyb20gdGhlIHJvb3QgZG93biB0byBmaWVsZHMgd2l0aCB0aGUgQGNsaWVudCBkaXJlY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNlc3RvcnMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTaW5nbGVBU1ROb2RlKG5vZGUpICYmIGlzU2VsZWN0aW9uTm9kZShub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlc18xLmFkZChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXNfMS5hZGQoc3ByZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFnbWVudFNlbGVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXNfMS5hZGQoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb25zVG9SZXNvbHZlQ2FjaGUuZ2V0KGRlZmluaXRpb25Ob2RlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGVjdEJ5RGVmaW5pdGlvbihtYWluRGVmaW5pdGlvbik7XG4gICAgfTtcbiAgICByZXR1cm4gTG9jYWxTdGF0ZTtcbn0oKSk7XG5leHBvcnQgeyBMb2NhbFN0YXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Mb2NhbFN0YXRlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludmFyaWFudCwgbmV3SW52YXJpYW50RXJyb3IgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2dsb2JhbHMvaW5kZXguanNcIjtcbmltcG9ydCB7IEFwb2xsb0xpbmssIGV4ZWN1dGUgfSBmcm9tIFwiLi4vbGluay9jb3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IEh0dHBMaW5rIH0gZnJvbSBcIi4uL2xpbmsvaHR0cC9pbmRleC5qc1wiO1xuaW1wb3J0IHsgUXVlcnlNYW5hZ2VyIH0gZnJvbSBcIi4vUXVlcnlNYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBMb2NhbFN0YXRlIH0gZnJvbSBcIi4vTG9jYWxTdGF0ZS5qc1wiO1xudmFyIGhhc1N1Z2dlc3RlZERldnRvb2xzID0gZmFsc2U7XG4vLyBUaG91Z2ggbWVyZ2VPcHRpb25zIG5vdyByZXNpZGVzIGluIEBhcG9sbG8vY2xpZW50L3V0aWxpdGllcywgaXQgd2FzXG4vLyBwcmV2aW91c2x5IGRlY2xhcmVkIGFuZCBleHBvcnRlZCBmcm9tIHRoaXMgbW9kdWxlLCBhbmQgdGhlbiByZWV4cG9ydGVkIGZyb21cbi8vIEBhcG9sbG8vY2xpZW50L2NvcmUuIFNpbmNlIHdlIG5lZWQgdG8gcHJlc2VydmUgdGhhdCBBUEkgYW55d2F5LCB0aGUgZWFzaWVzdFxuLy8gc29sdXRpb24gaXMgdG8gcmVleHBvcnQgbWVyZ2VPcHRpb25zIHdoZXJlIGl0IHdhcyBwcmV2aW91c2x5IGRlY2xhcmVkIChoZXJlKS5cbmltcG9ydCB7IG1lcmdlT3B0aW9ucyB9IGZyb20gXCIuLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldEFwb2xsb0NsaWVudE1lbW9yeUludGVybmFscyB9IGZyb20gXCIuLi91dGlsaXRpZXMvY2FjaGluZy9nZXRNZW1vcnlJbnRlcm5hbHMuanNcIjtcbmltcG9ydCB7IHdhcm5SZW1vdmVkT3B0aW9uIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9kZXByZWNhdGlvbi9pbmRleC5qc1wiO1xuZXhwb3J0IHsgbWVyZ2VPcHRpb25zIH07XG4vKipcbiAqIFRoaXMgaXMgdGhlIHByaW1hcnkgQXBvbGxvIENsaWVudCBjbGFzcy4gSXQgaXMgdXNlZCB0byBzZW5kIEdyYXBoUUwgZG9jdW1lbnRzIChpLmUuIHF1ZXJpZXNcbiAqIGFuZCBtdXRhdGlvbnMpIHRvIGEgR3JhcGhRTCBzcGVjLWNvbXBsaWFudCBzZXJ2ZXIgb3ZlciBhbiBgQXBvbGxvTGlua2AgaW5zdGFuY2UsXG4gKiByZWNlaXZlIHJlc3VsdHMgZnJvbSB0aGUgc2VydmVyIGFuZCBjYWNoZSB0aGUgcmVzdWx0cyBpbiBhIHN0b3JlLiBJdCBhbHNvIGRlbGl2ZXJzIHVwZGF0ZXNcbiAqIHRvIEdyYXBoUUwgcXVlcmllcyB0aHJvdWdoIGBPYnNlcnZhYmxlYCBpbnN0YW5jZXMuXG4gKi9cbnZhciBBcG9sbG9DbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhbiBpbnN0YW5jZSBvZiBgQXBvbGxvQ2xpZW50YC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBganNcbiAgICAgKiBpbXBvcnQgeyBBcG9sbG9DbGllbnQsIEluTWVtb3J5Q2FjaGUgfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7XG4gICAgICpcbiAgICAgKiBjb25zdCBjYWNoZSA9IG5ldyBJbk1lbW9yeUNhY2hlKCk7XG4gICAgICpcbiAgICAgKiBjb25zdCBjbGllbnQgPSBuZXcgQXBvbGxvQ2xpZW50KHtcbiAgICAgKiAgIC8vIFByb3ZpZGUgcmVxdWlyZWQgY29uc3RydWN0b3IgZmllbGRzXG4gICAgICogICBjYWNoZTogY2FjaGUsXG4gICAgICogICB1cmk6ICdodHRwOi8vbG9jYWxob3N0OjQwMDAvJyxcbiAgICAgKlxuICAgICAqICAgLy8gUHJvdmlkZSBzb21lIG9wdGlvbmFsIGNvbnN0cnVjdG9yIGZpZWxkc1xuICAgICAqICAgbmFtZTogJ3JlYWN0LXdlYi1jbGllbnQnLFxuICAgICAqICAgdmVyc2lvbjogJzEuMycsXG4gICAgICogICBxdWVyeURlZHVwbGljYXRpb246IGZhbHNlLFxuICAgICAqICAgZGVmYXVsdE9wdGlvbnM6IHtcbiAgICAgKiAgICAgd2F0Y2hRdWVyeToge1xuICAgICAqICAgICAgIGZldGNoUG9saWN5OiAnY2FjaGUtYW5kLW5ldHdvcmsnLFxuICAgICAqICAgICB9LFxuICAgICAqICAgfSxcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBcG9sbG9DbGllbnQob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgdGhpcy5yZXNldFN0b3JlQ2FsbGJhY2tzID0gW107XG4gICAgICAgIHRoaXMuY2xlYXJTdG9yZUNhbGxiYWNrcyA9IFtdO1xuICAgICAgICBpZiAoIW9wdGlvbnMuY2FjaGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ld0ludmFyaWFudEVycm9yKDE2KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXJpID0gb3B0aW9ucy51cmksIGNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscywgaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycywgY2FjaGUgPSBvcHRpb25zLmNhY2hlLCBkb2N1bWVudFRyYW5zZm9ybSA9IG9wdGlvbnMuZG9jdW1lbnRUcmFuc2Zvcm0sIF9kID0gb3B0aW9ucy5zc3JNb2RlLCBzc3JNb2RlID0gX2QgPT09IHZvaWQgMCA/IGZhbHNlIDogX2QsIF9lID0gb3B0aW9ucy5zc3JGb3JjZUZldGNoRGVsYXksIHNzckZvcmNlRmV0Y2hEZWxheSA9IF9lID09PSB2b2lkIDAgPyAwIDogX2UsIFxuICAgICAgICAvLyBFeHBvc2UgdGhlIGNsaWVudCBpbnN0YW5jZSBhcyB3aW5kb3cuX19BUE9MTE9fQ0xJRU5UX18gYW5kIGNhbGxcbiAgICAgICAgLy8gb25Ccm9hZGNhc3QgaW4gcXVlcnlNYW5hZ2VyLmJyb2FkY2FzdFF1ZXJpZXMgdG8gZW5hYmxlIGJyb3dzZXJcbiAgICAgICAgLy8gZGV2dG9vbHMsIGJ1dCBkaXNhYmxlIHRoZW0gYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBjb25uZWN0VG9EZXZUb29scyA9IG9wdGlvbnMuY29ubmVjdFRvRGV2VG9vbHMsIF9mID0gb3B0aW9ucy5xdWVyeURlZHVwbGljYXRpb24sIHF1ZXJ5RGVkdXBsaWNhdGlvbiA9IF9mID09PSB2b2lkIDAgPyB0cnVlIDogX2YsIGRlZmF1bHRPcHRpb25zID0gb3B0aW9ucy5kZWZhdWx0T3B0aW9ucywgZGVmYXVsdENvbnRleHQgPSBvcHRpb25zLmRlZmF1bHRDb250ZXh0LCBfZyA9IG9wdGlvbnMuYXNzdW1lSW1tdXRhYmxlUmVzdWx0cywgYXNzdW1lSW1tdXRhYmxlUmVzdWx0cyA9IF9nID09PSB2b2lkIDAgPyBjYWNoZS5hc3N1bWVJbW11dGFibGVSZXN1bHRzIDogX2csIHJlc29sdmVycyA9IG9wdGlvbnMucmVzb2x2ZXJzLCB0eXBlRGVmcyA9IG9wdGlvbnMudHlwZURlZnMsIGZyYWdtZW50TWF0Y2hlciA9IG9wdGlvbnMuZnJhZ21lbnRNYXRjaGVyLCBjbGllbnRBd2FyZW5lc3MgPSBvcHRpb25zLmNsaWVudEF3YXJlbmVzcywgY2xpZW50QXdhcmVuZXNzTmFtZSA9IG9wdGlvbnMubmFtZSwgY2xpZW50QXdhcmVuZXNzVmVyc2lvbiA9IG9wdGlvbnMudmVyc2lvbiwgZGV2dG9vbHMgPSBvcHRpb25zLmRldnRvb2xzLCBkYXRhTWFza2luZyA9IG9wdGlvbnMuZGF0YU1hc2tpbmc7XG4gICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuUmVtb3ZlZE9wdGlvbihvcHRpb25zLCBcImNvbm5lY3RUb0RldlRvb2xzXCIsIFwiQXBvbGxvQ2xpZW50XCIsIFwiUGxlYXNlIHVzZSBgZGV2dG9vbHMuZW5hYmxlZGAgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICB3YXJuUmVtb3ZlZE9wdGlvbihvcHRpb25zLCBcInVyaVwiLCBcIkFwb2xsb0NsaWVudFwiLCBcIlBsZWFzZSBpbml0aWFsaXplIGFuIGluc3RhbmNlIG9mIGBIdHRwTGlua2Agd2l0aCBgdXJpYCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKG9wdGlvbnMsIFwiY3JlZGVudGlhbHNcIiwgXCJBcG9sbG9DbGllbnRcIiwgXCJQbGVhc2UgaW5pdGlhbGl6ZSBhbiBpbnN0YW5jZSBvZiBgSHR0cExpbmtgIHdpdGggYGNyZWRlbnRpYWxzYCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKG9wdGlvbnMsIFwiaGVhZGVyc1wiLCBcIkFwb2xsb0NsaWVudFwiLCBcIlBsZWFzZSBpbml0aWFsaXplIGFuIGluc3RhbmNlIG9mIGBIdHRwTGlua2Agd2l0aCBgaGVhZGVyc2AgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICB3YXJuUmVtb3ZlZE9wdGlvbihvcHRpb25zLCBcIm5hbWVcIiwgXCJBcG9sbG9DbGllbnRcIiwgXCJQbGVhc2UgdXNlIHRoZSBgY2xpZW50QXdhcmVuZXNzLm5hbWVgIG9wdGlvbiBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKG9wdGlvbnMsIFwidmVyc2lvblwiLCBcIkFwb2xsb0NsaWVudFwiLCBcIlBsZWFzZSB1c2UgdGhlIGBjbGllbnRBd2FyZW5lc3MudmVyc2lvbmAgb3B0aW9uIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgd2FyblJlbW92ZWRPcHRpb24ob3B0aW9ucywgXCJ0eXBlRGVmc1wiLCBcIkFwb2xsb0NsaWVudFwiKTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5saW5rKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSAmJiBpbnZhcmlhbnQud2FybigxNyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpbmsgPSBvcHRpb25zLmxpbms7XG4gICAgICAgIGlmICghbGluaykge1xuICAgICAgICAgICAgbGluayA9XG4gICAgICAgICAgICAgICAgdXJpID8gbmV3IEh0dHBMaW5rKHsgdXJpOiB1cmksIGNyZWRlbnRpYWxzOiBjcmVkZW50aWFscywgaGVhZGVyczogaGVhZGVycyB9KSA6IEFwb2xsb0xpbmsuZW1wdHkoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgICAgIHRoaXMuZGlzYWJsZU5ldHdvcmtGZXRjaGVzID0gc3NyTW9kZSB8fCBzc3JGb3JjZUZldGNoRGVsYXkgPiAwO1xuICAgICAgICB0aGlzLnF1ZXJ5RGVkdXBsaWNhdGlvbiA9IHF1ZXJ5RGVkdXBsaWNhdGlvbjtcbiAgICAgICAgdGhpcy5kZWZhdWx0T3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zIHx8IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMudHlwZURlZnMgPSB0eXBlRGVmcztcbiAgICAgICAgdGhpcy5kZXZ0b29sc0NvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZXZ0b29scyksIHsgZW5hYmxlZDogKF9hID0gZGV2dG9vbHMgPT09IG51bGwgfHwgZGV2dG9vbHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRldnRvb2xzLmVuYWJsZWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGNvbm5lY3RUb0RldlRvb2xzIH0pO1xuICAgICAgICBpZiAodGhpcy5kZXZ0b29sc0NvbmZpZy5lbmFibGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGV2dG9vbHNDb25maWcuZW5hYmxlZCA9IGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNzckZvcmNlRmV0Y2hEZWxheSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiAoX3RoaXMuZGlzYWJsZU5ldHdvcmtGZXRjaGVzID0gZmFsc2UpOyB9LCBzc3JGb3JjZUZldGNoRGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2F0Y2hRdWVyeSA9IHRoaXMud2F0Y2hRdWVyeS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5xdWVyeS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm11dGF0ZSA9IHRoaXMubXV0YXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMud2F0Y2hGcmFnbWVudCA9IHRoaXMud2F0Y2hGcmFnbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlc2V0U3RvcmUgPSB0aGlzLnJlc2V0U3RvcmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMgPSB0aGlzLnJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICB0aGlzLmxvY2FsU3RhdGUgPSBuZXcgTG9jYWxTdGF0ZSh7XG4gICAgICAgICAgICBjYWNoZTogY2FjaGUsXG4gICAgICAgICAgICBjbGllbnQ6IHRoaXMsXG4gICAgICAgICAgICByZXNvbHZlcnM6IHJlc29sdmVycyxcbiAgICAgICAgICAgIGZyYWdtZW50TWF0Y2hlcjogZnJhZ21lbnRNYXRjaGVyLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIgPSBuZXcgUXVlcnlNYW5hZ2VyKHtcbiAgICAgICAgICAgIGNhY2hlOiB0aGlzLmNhY2hlLFxuICAgICAgICAgICAgbGluazogdGhpcy5saW5rLFxuICAgICAgICAgICAgZGVmYXVsdE9wdGlvbnM6IHRoaXMuZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgICAgICBkZWZhdWx0Q29udGV4dDogZGVmYXVsdENvbnRleHQsXG4gICAgICAgICAgICBkb2N1bWVudFRyYW5zZm9ybTogZG9jdW1lbnRUcmFuc2Zvcm0sXG4gICAgICAgICAgICBxdWVyeURlZHVwbGljYXRpb246IHF1ZXJ5RGVkdXBsaWNhdGlvbixcbiAgICAgICAgICAgIHNzck1vZGU6IHNzck1vZGUsXG4gICAgICAgICAgICBkYXRhTWFza2luZzogISFkYXRhTWFza2luZyxcbiAgICAgICAgICAgIGNsaWVudEF3YXJlbmVzczoge1xuICAgICAgICAgICAgICAgIG5hbWU6IChfYiA9IGNsaWVudEF3YXJlbmVzcyA9PT0gbnVsbCB8fCBjbGllbnRBd2FyZW5lc3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsaWVudEF3YXJlbmVzcy5uYW1lKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBjbGllbnRBd2FyZW5lc3NOYW1lLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IChfYyA9IGNsaWVudEF3YXJlbmVzcyA9PT0gbnVsbCB8fCBjbGllbnRBd2FyZW5lc3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsaWVudEF3YXJlbmVzcy52ZXJzaW9uKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBjbGllbnRBd2FyZW5lc3NWZXJzaW9uLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxvY2FsU3RhdGU6IHRoaXMubG9jYWxTdGF0ZSxcbiAgICAgICAgICAgIGFzc3VtZUltbXV0YWJsZVJlc3VsdHM6IGFzc3VtZUltbXV0YWJsZVJlc3VsdHMsXG4gICAgICAgICAgICBvbkJyb2FkY2FzdDogdGhpcy5kZXZ0b29sc0NvbmZpZy5lbmFibGVkID9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5kZXZUb29sc0hvb2tDYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGV2VG9vbHNIb29rQ2Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcmllczogX3RoaXMucXVlcnlNYW5hZ2VyLmdldFF1ZXJ5U3RvcmUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zOiBfdGhpcy5xdWVyeU1hbmFnZXIubXV0YXRpb25TdG9yZSB8fCB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFXaXRoT3B0aW1pc3RpY1Jlc3VsdHM6IF90aGlzLmNhY2hlLmV4dHJhY3QodHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHZvaWQgMCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLmRldnRvb2xzQ29uZmlnLmVuYWJsZWQpXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RUb0RldlRvb2xzKCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcG9sbG9DbGllbnQucHJvdG90eXBlLCBcInByaW9yaXRpemVDYWNoZVZhbHVlc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIHByaW9yaXRpemUgY2FjaGUgdmFsdWVzIG92ZXIgbmV0d29yayByZXN1bHRzIHdoZW4gYHF1ZXJ5YCBvciBgd2F0Y2hRdWVyeWAgaXMgY2FsbGVkLlxuICAgICAgICAgKiBUaGlzIHdpbGwgZXNzZW50aWFsbHkgdHVybiBhIGBcIm5ldHdvcmstb25seVwiYCBvciBgXCJjYWNoZS1hbmQtbmV0d29ya1wiYCBmZXRjaFBvbGljeSBpbnRvIGEgYFwiY2FjaGUtZmlyc3RcImAgZmV0Y2hQb2xpY3ksXG4gICAgICAgICAqIGJ1dCB3aXRob3V0IGluZmx1ZW5jaW5nIHRoZSBgZmV0Y2hQb2xpY3lgIG9mIHRoZSBjcmVhdGVkIGBPYnNlcnZhYmxlUXVlcnlgIGxvbmctdGVybS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBjYW4gZS5nLiBiZSB1c2VkIHRvIHByaW9yaXRpemUgdGhlIGNhY2hlIGR1cmluZyB0aGUgZmlyc3QgcmVuZGVyIGFmdGVyIFNTUi5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZU5ldHdvcmtGZXRjaGVzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlTmV0d29ya0ZldGNoZXMgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuY29ubmVjdFRvRGV2VG9vbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpbmRvd1dpdGhEZXZUb29scyA9IHdpbmRvdztcbiAgICAgICAgdmFyIGRldnRvb2xzU3ltYm9sID0gU3ltYm9sLmZvcihcImFwb2xsby5kZXZ0b29sc1wiKTtcbiAgICAgICAgKHdpbmRvd1dpdGhEZXZUb29sc1tkZXZ0b29sc1N5bWJvbF0gPVxuICAgICAgICAgICAgd2luZG93V2l0aERldlRvb2xzW2RldnRvb2xzU3ltYm9sXSB8fCBbXSkucHVzaCh0aGlzKTtcbiAgICAgICAgd2luZG93V2l0aERldlRvb2xzLl9fQVBPTExPX0NMSUVOVF9fID0gdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN1Z2dlc3QgaW5zdGFsbGluZyB0aGUgZGV2dG9vbHMgZm9yIGRldmVsb3BlcnMgd2hvIGRvbid0IGhhdmUgdGhlbVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCFoYXNTdWdnZXN0ZWREZXZ0b29scyAmJiBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBoYXNTdWdnZXN0ZWREZXZ0b29scyA9IHRydWU7XG4gICAgICAgICAgICBpZiAod2luZG93LmRvY3VtZW50ICYmXG4gICAgICAgICAgICAgICAgd2luZG93LnRvcCA9PT0gd2luZG93LnNlbGYgJiZcbiAgICAgICAgICAgICAgICAvXihodHRwcz98ZmlsZSk6JC8udGVzdCh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wpKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93Ll9fQVBPTExPX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYXYgPSB3aW5kb3cubmF2aWdhdG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVhID0gbmF2ICYmIG5hdi51c2VyQWdlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1YS5pbmRleE9mKFwiQ2hyb21lL1wiKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20vd2Vic3RvcmUvZGV0YWlsL1wiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFwb2xsby1jbGllbnQtZGV2ZWxvcGVyLXQvamRra25ra2JlYmJhcGlsZ29lY2NjaWdsa2ZibWJuZm1cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodWEuaW5kZXhPZihcIkZpcmVmb3gvXCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly9hZGRvbnMubW96aWxsYS5vcmcvZW4tVVMvZmlyZWZveC9hZGRvbi9hcG9sbG8tZGV2ZWxvcGVyLXRvb2xzL1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC5sb2coXCJEb3dubG9hZCB0aGUgQXBvbGxvIERldlRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXhwZXJpZW5jZTogJXNcIiwgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDEwMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFwb2xsb0NsaWVudC5wcm90b3R5cGUsIFwiZG9jdW1lbnRUcmFuc2Zvcm1cIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGBEb2N1bWVudFRyYW5zZm9ybWAgdXNlZCB0byBtb2RpZnkgR3JhcGhRTCBkb2N1bWVudHMgYmVmb3JlIGEgcmVxdWVzdFxuICAgICAgICAgKiBpcyBtYWRlLiBJZiBhIGN1c3RvbSBgRG9jdW1lbnRUcmFuc2Zvcm1gIGlzIG5vdCBwcm92aWRlZCwgdGhpcyB3aWxsIGJlIHRoZVxuICAgICAgICAgKiBkZWZhdWx0IGRvY3VtZW50IHRyYW5zZm9ybS5cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLmRvY3VtZW50VHJhbnNmb3JtO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byB0ZXJtaW5hdGUgYW55IGFjdGl2ZSBjbGllbnQgcHJvY2Vzc2VzLCBtYWtpbmcgaXQgc2FmZVxuICAgICAqIHRvIGRpc3Bvc2Ugb2YgdGhpcyBgQXBvbGxvQ2xpZW50YCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLnN0b3AoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgd2F0Y2hlcyB0aGUgY2FjaGUgc3RvcmUgb2YgdGhlIHF1ZXJ5IGFjY29yZGluZyB0byB0aGUgb3B0aW9ucyBzcGVjaWZpZWQgYW5kXG4gICAgICogcmV0dXJucyBhbiBgT2JzZXJ2YWJsZVF1ZXJ5YC4gV2UgY2FuIHN1YnNjcmliZSB0byB0aGlzIGBPYnNlcnZhYmxlUXVlcnlgIGFuZFxuICAgICAqIHJlY2VpdmUgdXBkYXRlZCByZXN1bHRzIHRocm91Z2ggYW4gb2JzZXJ2ZXIgd2hlbiB0aGUgY2FjaGUgc3RvcmUgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgYW4gaW1wbGVtZW50YXRpb24gb2YgR3JhcGhRTCBzdWJzY3JpcHRpb25zLiBSYXRoZXIsXG4gICAgICogaXQgdXNlcyBBcG9sbG8ncyBzdG9yZSBpbiBvcmRlciB0byByZWFjdGl2ZWx5IGRlbGl2ZXIgdXBkYXRlcyB0byB5b3VyIHF1ZXJ5IHJlc3VsdHMuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSwgc3VwcG9zZSB5b3UgY2FsbCB3YXRjaFF1ZXJ5IG9uIGEgR3JhcGhRTCBxdWVyeSB0aGF0IGZldGNoZXMgYSBwZXJzb24nc1xuICAgICAqIGZpcnN0IGFuZCBsYXN0IG5hbWUgYW5kIHRoaXMgcGVyc29uIGhhcyBhIHBhcnRpY3VsYXIgb2JqZWN0IGlkZW50aWZpZXIsIHByb3ZpZGVkIGJ5XG4gICAgICogZGF0YUlkRnJvbU9iamVjdC4gTGF0ZXIsIGEgZGlmZmVyZW50IHF1ZXJ5IGZldGNoZXMgdGhhdCBzYW1lIHBlcnNvbidzXG4gICAgICogZmlyc3QgYW5kIGxhc3QgbmFtZSBhbmQgdGhlIGZpcnN0IG5hbWUgaGFzIG5vdyBjaGFuZ2VkLiBUaGVuLCBhbnkgb2JzZXJ2ZXJzIGFzc29jaWF0ZWRcbiAgICAgKiB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBmaXJzdCBxdWVyeSB3aWxsIGJlIHVwZGF0ZWQgd2l0aCBhIG5ldyByZXN1bHQgb2JqZWN0LlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGlmIHRoZSBjYWNoZSBkb2VzIG5vdCBjaGFuZ2UsIHRoZSBzdWJzY3JpYmVyIHdpbGwgKm5vdCogYmUgbm90aWZpZWQuXG4gICAgICpcbiAgICAgKiBTZWUgW2hlcmVdKGh0dHBzOi8vbWVkaXVtLmNvbS9hcG9sbG8tc3RhY2svdGhlLWNvbmNlcHRzLW9mLWdyYXBocWwtYmM2OGJkODE5YmUzIy4zbWIwY2JjbWMpIGZvclxuICAgICAqIGEgZGVzY3JpcHRpb24gb2Ygc3RvcmUgcmVhY3Rpdml0eS5cbiAgICAgKi9cbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLndhdGNoUXVlcnkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5kZWZhdWx0T3B0aW9ucy53YXRjaFF1ZXJ5KSB7XG4gICAgICAgICAgICBvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuZGVmYXVsdE9wdGlvbnMud2F0Y2hRdWVyeSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gWFhYIE92ZXJ3cml0aW5nIG9wdGlvbnMgaXMgcHJvYmFibHkgbm90IHRoZSBiZXN0IHdheSB0byBkbyB0aGlzIGxvbmcgdGVybS4uLlxuICAgICAgICBpZiAodGhpcy5kaXNhYmxlTmV0d29ya0ZldGNoZXMgJiZcbiAgICAgICAgICAgIChvcHRpb25zLmZldGNoUG9saWN5ID09PSBcIm5ldHdvcmstb25seVwiIHx8XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gXCJjYWNoZS1hbmQtbmV0d29ya1wiKSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBmZXRjaFBvbGljeTogXCJjYWNoZS1maXJzdFwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB3YXJuUmVtb3ZlZE9wdGlvbihvcHRpb25zLCBcImNhbm9uaXplUmVzdWx0c1wiLCBcImNsaWVudC53YXRjaFF1ZXJ5XCIpO1xuICAgICAgICAgICAgd2FyblJlbW92ZWRPcHRpb24ob3B0aW9ucywgXCJwYXJ0aWFsUmVmZXRjaFwiLCBcImNsaWVudC53YXRjaFF1ZXJ5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci53YXRjaFF1ZXJ5KG9wdGlvbnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyByZXNvbHZlcyBhIHNpbmdsZSBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc3BlY2lmaWVkIGFuZFxuICAgICAqIHJldHVybnMgYSBgUHJvbWlzZWAgd2hpY2ggaXMgZWl0aGVyIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdGluZyBkYXRhXG4gICAgICogb3IgcmVqZWN0ZWQgd2l0aCBhbiBlcnJvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IG9mIHR5cGUgYFF1ZXJ5T3B0aW9uc2AgdGhhdCBhbGxvd3MgdXMgdG9cbiAgICAgKiBkZXNjcmliZSBob3cgdGhpcyBxdWVyeSBzaG91bGQgYmUgdHJlYXRlZCBlLmcuIHdoZXRoZXIgaXQgc2hvdWxkIGhpdCB0aGVcbiAgICAgKiBzZXJ2ZXIgYXQgYWxsIG9yIGp1c3QgcmVzb2x2ZSBmcm9tIHRoZSBjYWNoZSwgZXRjLlxuICAgICAqL1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5kZWZhdWx0T3B0aW9ucy5xdWVyeSkge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmRlZmF1bHRPcHRpb25zLnF1ZXJ5LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBpbnZhcmlhbnQob3B0aW9ucy5mZXRjaFBvbGljeSAhPT0gXCJjYWNoZS1hbmQtbmV0d29ya1wiLCAxOCk7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVOZXR3b3JrRmV0Y2hlcyAmJiBvcHRpb25zLmZldGNoUG9saWN5ID09PSBcIm5ldHdvcmstb25seVwiKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGZldGNoUG9saWN5OiBcImNhY2hlLWZpcnN0XCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHdhcm5SZW1vdmVkT3B0aW9uKG9wdGlvbnMsIFwiY2Fub25pemVSZXN1bHRzXCIsIFwiY2xpZW50LnF1ZXJ5XCIpO1xuICAgICAgICAgICAgd2FyblJlbW92ZWRPcHRpb24ob3B0aW9ucywgXCJub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2VcIiwgXCJjbGllbnQucXVlcnlcIiwgXCJUaGlzIG9wdGlvbiBkb2VzIG5vdCBhZmZlY3QgYGNsaWVudC5xdWVyeWAgYW5kIGNhbiBiZSBzYWZlbHkgcmVtb3ZlZC5cIik7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gXCJzdGFuZGJ5XCIpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLl9fREVWX18gIT09IGZhbHNlICYmIGludmFyaWFudC53YXJuKDE5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIucXVlcnkob3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIHJlc29sdmVzIGEgc2luZ2xlIG11dGF0aW9uIGFjY29yZGluZyB0byB0aGUgb3B0aW9ucyBzcGVjaWZpZWQgYW5kIHJldHVybnMgYVxuICAgICAqIFByb21pc2Ugd2hpY2ggaXMgZWl0aGVyIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdGluZyBkYXRhIG9yIHJlamVjdGVkIHdpdGggYW5cbiAgICAgKiBlcnJvci4gSW4gc29tZSBjYXNlcyBib3RoIGBkYXRhYCBhbmQgYGVycm9yc2AgbWlnaHQgYmUgdW5kZWZpbmVkLCBmb3IgZXhhbXBsZVxuICAgICAqIHdoZW4gYGVycm9yUG9saWN5YCBpcyBzZXQgdG8gYCdpZ25vcmUnYC5cbiAgICAgKlxuICAgICAqIEl0IHRha2VzIG9wdGlvbnMgYXMgYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBrZXlzIGFuZCB2YWx1ZXM6XG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5tdXRhdGUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5kZWZhdWx0T3B0aW9ucy5tdXRhdGUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5kZWZhdWx0T3B0aW9ucy5tdXRhdGUsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci5tdXRhdGUob3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIHN1YnNjcmliZXMgdG8gYSBncmFwaHFsIHN1YnNjcmlwdGlvbiBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc3BlY2lmaWVkIGFuZCByZXR1cm5zIGFuXG4gICAgICogYE9ic2VydmFibGVgIHdoaWNoIGVpdGhlciBlbWl0cyByZWNlaXZlZCBkYXRhIG9yIGFuIGVycm9yLlxuICAgICAqL1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGlkID0gdGhpcy5xdWVyeU1hbmFnZXIuZ2VuZXJhdGVRdWVyeUlkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlclxuICAgICAgICAgICAgLnN0YXJ0R3JhcGhRTFN1YnNjcmlwdGlvbihvcHRpb25zKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIHJlc3VsdCksIHsgZGF0YTogX3RoaXMucXVlcnlNYW5hZ2VyLm1hc2tPcGVyYXRpb24oe1xuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBvcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgIGZldGNoUG9saWN5OiBvcHRpb25zLmZldGNoUG9saWN5LFxuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgIH0pIH0pKTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmllcyB0byByZWFkIHNvbWUgZGF0YSBmcm9tIHRoZSBzdG9yZSBpbiB0aGUgc2hhcGUgb2YgdGhlIHByb3ZpZGVkXG4gICAgICogR3JhcGhRTCBxdWVyeSB3aXRob3V0IG1ha2luZyBhIG5ldHdvcmsgcmVxdWVzdC4gVGhpcyBtZXRob2Qgd2lsbCBzdGFydCBhdFxuICAgICAqIHRoZSByb290IHF1ZXJ5LiBUbyBzdGFydCBhdCBhIHNwZWNpZmljIGlkIHJldHVybmVkIGJ5IGBkYXRhSWRGcm9tT2JqZWN0YFxuICAgICAqIHVzZSBgcmVhZEZyYWdtZW50YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpbWlzdGljIC0gU2V0IHRvIGB0cnVlYCB0byBhbGxvdyBgcmVhZFF1ZXJ5YCB0byByZXR1cm5cbiAgICAgKiBvcHRpbWlzdGljIHJlc3VsdHMuIElzIGBmYWxzZWAgYnkgZGVmYXVsdC5cbiAgICAgKi9cbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLnJlYWRRdWVyeSA9IGZ1bmN0aW9uIChvcHRpb25zLCBvcHRpbWlzdGljKSB7XG4gICAgICAgIGlmIChvcHRpbWlzdGljID09PSB2b2lkIDApIHsgb3B0aW1pc3RpYyA9IGZhbHNlOyB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLnJlYWRRdWVyeShvcHRpb25zLCBvcHRpbWlzdGljKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdhdGNoZXMgdGhlIGNhY2hlIHN0b3JlIG9mIHRoZSBmcmFnbWVudCBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc3BlY2lmaWVkXG4gICAgICogYW5kIHJldHVybnMgYW4gYE9ic2VydmFibGVgLiBXZSBjYW4gc3Vic2NyaWJlIHRvIHRoaXNcbiAgICAgKiBgT2JzZXJ2YWJsZWAgYW5kIHJlY2VpdmUgdXBkYXRlZCByZXN1bHRzIHRocm91Z2ggYW5cbiAgICAgKiBvYnNlcnZlciB3aGVuIHRoZSBjYWNoZSBzdG9yZSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogWW91IG11c3QgcGFzcyBpbiBhIEdyYXBoUUwgZG9jdW1lbnQgd2l0aCBhIHNpbmdsZSBmcmFnbWVudCBvciBhIGRvY3VtZW50XG4gICAgICogd2l0aCBtdWx0aXBsZSBmcmFnbWVudHMgdGhhdCByZXByZXNlbnQgd2hhdCB5b3UgYXJlIHJlYWRpbmcuIElmIHlvdSBwYXNzXG4gICAgICogaW4gYSBkb2N1bWVudCB3aXRoIG11bHRpcGxlIGZyYWdtZW50cyB0aGVuIHlvdSBtdXN0IGFsc28gc3BlY2lmeSBhXG4gICAgICogYGZyYWdtZW50TmFtZWAuXG4gICAgICpcbiAgICAgKiBAc2luY2UgMy4xMC4wXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvYmplY3Qgb2YgdHlwZSBgV2F0Y2hGcmFnbWVudE9wdGlvbnNgIHRoYXQgYWxsb3dzXG4gICAgICogdGhlIGNhY2hlIHRvIGlkZW50aWZ5IHRoZSBmcmFnbWVudCBhbmQgb3B0aW9uYWxseSBzcGVjaWZ5IHdoZXRoZXIgdG8gcmVhY3RcbiAgICAgKiB0byBvcHRpbWlzdGljIHVwZGF0ZXMuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS53YXRjaEZyYWdtZW50ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS53YXRjaEZyYWdtZW50KF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgKF9hID0ge30sIF9hW1N5bWJvbC5mb3IoXCJhcG9sbG8uZGF0YU1hc2tpbmdcIildID0gdGhpcy5xdWVyeU1hbmFnZXIuZGF0YU1hc2tpbmcsIF9hKSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJpZXMgdG8gcmVhZCBzb21lIGRhdGEgZnJvbSB0aGUgc3RvcmUgaW4gdGhlIHNoYXBlIG9mIHRoZSBwcm92aWRlZFxuICAgICAqIEdyYXBoUUwgZnJhZ21lbnQgd2l0aG91dCBtYWtpbmcgYSBuZXR3b3JrIHJlcXVlc3QuIFRoaXMgbWV0aG9kIHdpbGwgcmVhZCBhXG4gICAgICogR3JhcGhRTCBmcmFnbWVudCBmcm9tIGFueSBhcmJpdHJhcnkgaWQgdGhhdCBpcyBjdXJyZW50bHkgY2FjaGVkLCB1bmxpa2VcbiAgICAgKiBgcmVhZFF1ZXJ5YCB3aGljaCB3aWxsIG9ubHkgcmVhZCBmcm9tIHRoZSByb290IHF1ZXJ5LlxuICAgICAqXG4gICAgICogWW91IG11c3QgcGFzcyBpbiBhIEdyYXBoUUwgZG9jdW1lbnQgd2l0aCBhIHNpbmdsZSBmcmFnbWVudCBvciBhIGRvY3VtZW50XG4gICAgICogd2l0aCBtdWx0aXBsZSBmcmFnbWVudHMgdGhhdCByZXByZXNlbnQgd2hhdCB5b3UgYXJlIHJlYWRpbmcuIElmIHlvdSBwYXNzXG4gICAgICogaW4gYSBkb2N1bWVudCB3aXRoIG11bHRpcGxlIGZyYWdtZW50cyB0aGVuIHlvdSBtdXN0IGFsc28gc3BlY2lmeSBhXG4gICAgICogYGZyYWdtZW50TmFtZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW1pc3RpYyAtIFNldCB0byBgdHJ1ZWAgdG8gYWxsb3cgYHJlYWRGcmFnbWVudGAgdG8gcmV0dXJuXG4gICAgICogb3B0aW1pc3RpYyByZXN1bHRzLiBJcyBgZmFsc2VgIGJ5IGRlZmF1bHQuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5yZWFkRnJhZ21lbnQgPSBmdW5jdGlvbiAob3B0aW9ucywgb3B0aW1pc3RpYykge1xuICAgICAgICBpZiAob3B0aW1pc3RpYyA9PT0gdm9pZCAwKSB7IG9wdGltaXN0aWMgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5yZWFkRnJhZ21lbnQob3B0aW9ucywgb3B0aW1pc3RpYyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXcml0ZXMgc29tZSBkYXRhIGluIHRoZSBzaGFwZSBvZiB0aGUgcHJvdmlkZWQgR3JhcGhRTCBxdWVyeSBkaXJlY3RseSB0b1xuICAgICAqIHRoZSBzdG9yZS4gVGhpcyBtZXRob2Qgd2lsbCBzdGFydCBhdCB0aGUgcm9vdCBxdWVyeS4gVG8gc3RhcnQgYXQgYVxuICAgICAqIHNwZWNpZmljIGlkIHJldHVybmVkIGJ5IGBkYXRhSWRGcm9tT2JqZWN0YCB0aGVuIHVzZSBgd3JpdGVGcmFnbWVudGAuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS53cml0ZVF1ZXJ5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlZiA9IHRoaXMuY2FjaGUud3JpdGVRdWVyeShvcHRpb25zKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYnJvYWRjYXN0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWY7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXcml0ZXMgc29tZSBkYXRhIGluIHRoZSBzaGFwZSBvZiB0aGUgcHJvdmlkZWQgR3JhcGhRTCBmcmFnbWVudCBkaXJlY3RseSB0b1xuICAgICAqIHRoZSBzdG9yZS4gVGhpcyBtZXRob2Qgd2lsbCB3cml0ZSB0byBhIEdyYXBoUUwgZnJhZ21lbnQgZnJvbSBhbnkgYXJiaXRyYXJ5XG4gICAgICogaWQgdGhhdCBpcyBjdXJyZW50bHkgY2FjaGVkLCB1bmxpa2UgYHdyaXRlUXVlcnlgIHdoaWNoIHdpbGwgb25seSB3cml0ZVxuICAgICAqIGZyb20gdGhlIHJvb3QgcXVlcnkuXG4gICAgICpcbiAgICAgKiBZb3UgbXVzdCBwYXNzIGluIGEgR3JhcGhRTCBkb2N1bWVudCB3aXRoIGEgc2luZ2xlIGZyYWdtZW50IG9yIGEgZG9jdW1lbnRcbiAgICAgKiB3aXRoIG11bHRpcGxlIGZyYWdtZW50cyB0aGF0IHJlcHJlc2VudCB3aGF0IHlvdSBhcmUgd3JpdGluZy4gSWYgeW91IHBhc3NcbiAgICAgKiBpbiBhIGRvY3VtZW50IHdpdGggbXVsdGlwbGUgZnJhZ21lbnRzIHRoZW4geW91IG11c3QgYWxzbyBzcGVjaWZ5IGFcbiAgICAgKiBgZnJhZ21lbnROYW1lYC5cbiAgICAgKi9cbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLndyaXRlRnJhZ21lbnQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgcmVmID0gdGhpcy5jYWNoZS53cml0ZUZyYWdtZW50KG9wdGlvbnMpO1xuICAgICAgICBpZiAob3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlci5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZjtcbiAgICB9O1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuX19hY3Rpb25Ib29rRm9yRGV2VG9vbHMgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgdGhpcy5kZXZUb29sc0hvb2tDYiA9IGNiO1xuICAgIH07XG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5fX3JlcXVlc3RSYXcgPSBmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgICAgICByZXR1cm4gZXhlY3V0ZSh0aGlzLmxpbmssIHBheWxvYWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHlvdXIgZW50aXJlIHN0b3JlIGJ5IGNsZWFyaW5nIG91dCB5b3VyIGNhY2hlIGFuZCB0aGVuIHJlLWV4ZWN1dGluZ1xuICAgICAqIGFsbCBvZiB5b3VyIGFjdGl2ZSBxdWVyaWVzLiBUaGlzIG1ha2VzIGl0IHNvIHRoYXQgeW91IG1heSBndWFyYW50ZWUgdGhhdFxuICAgICAqIHRoZXJlIGlzIG5vIGRhdGEgbGVmdCBpbiB5b3VyIHN0b3JlIGZyb20gYSB0aW1lIGJlZm9yZSB5b3UgY2FsbGVkIHRoaXNcbiAgICAgKiBtZXRob2QuXG4gICAgICpcbiAgICAgKiBgcmVzZXRTdG9yZSgpYCBpcyB1c2VmdWwgd2hlbiB5b3VyIHVzZXIganVzdCBsb2dnZWQgb3V0LiBZb3XigJl2ZSByZW1vdmVkIHRoZVxuICAgICAqIHVzZXIgc2Vzc2lvbiwgYW5kIHlvdSBub3cgd2FudCB0byBtYWtlIHN1cmUgdGhhdCBhbnkgcmVmZXJlbmNlcyB0byBkYXRhIHlvdVxuICAgICAqIG1pZ2h0IGhhdmUgZmV0Y2hlZCB3aGlsZSB0aGUgdXNlciBzZXNzaW9uIHdhcyBhY3RpdmUgaXMgZ29uZS5cbiAgICAgKlxuICAgICAqIEl0IGlzIGltcG9ydGFudCB0byByZW1lbWJlciB0aGF0IGByZXNldFN0b3JlKClgICp3aWxsKiByZWZldGNoIGFueSBhY3RpdmVcbiAgICAgKiBxdWVyaWVzLiBUaGlzIG1lYW5zIHRoYXQgYW55IGNvbXBvbmVudHMgdGhhdCBtaWdodCBiZSBtb3VudGVkIHdpbGwgZXhlY3V0ZVxuICAgICAqIHRoZWlyIHF1ZXJpZXMgYWdhaW4gdXNpbmcgeW91ciBuZXR3b3JrIGludGVyZmFjZS4gSWYgeW91IGRvIG5vdCB3YW50IHRvXG4gICAgICogcmUtZXhlY3V0ZSBhbnkgcXVlcmllcyB0aGVuIHlvdSBzaG91bGQgbWFrZSBzdXJlIHRvIHN0b3Agd2F0Y2hpbmcgYW55XG4gICAgICogYWN0aXZlIHF1ZXJpZXMuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5yZXNldFN0b3JlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5xdWVyeU1hbmFnZXIuY2xlYXJTdG9yZSh7XG4gICAgICAgICAgICAgICAgZGlzY2FyZFdhdGNoZXM6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBQcm9taXNlLmFsbChfdGhpcy5yZXNldFN0b3JlQ2FsbGJhY2tzLm1hcChmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuKCk7IH0pKTsgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcygpOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgZGF0YSBmcm9tIHRoZSBzdG9yZS4gVW5saWtlIGByZXNldFN0b3JlYCwgYGNsZWFyU3RvcmVgIHdpbGxcbiAgICAgKiBub3QgcmVmZXRjaCBhbnkgYWN0aXZlIHF1ZXJpZXMuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5jbGVhclN0b3JlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5xdWVyeU1hbmFnZXIuY2xlYXJTdG9yZSh7XG4gICAgICAgICAgICAgICAgZGlzY2FyZFdhdGNoZXM6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFByb21pc2UuYWxsKF90aGlzLmNsZWFyU3RvcmVDYWxsYmFja3MubWFwKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4oKTsgfSkpOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFsbG93cyBjYWxsYmFja3MgdG8gYmUgcmVnaXN0ZXJlZCB0aGF0IGFyZSBleGVjdXRlZCB3aGVuIHRoZSBzdG9yZSBpc1xuICAgICAqIHJlc2V0LiBgb25SZXNldFN0b3JlYCByZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWRcbiAgICAgKiB0byByZW1vdmUgcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5vblJlc2V0U3RvcmUgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5yZXNldFN0b3JlQ2FsbGJhY2tzLnB1c2goY2IpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucmVzZXRTdG9yZUNhbGxiYWNrcyA9IF90aGlzLnJlc2V0U3RvcmVDYWxsYmFja3MuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjICE9PSBjYjsgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbGxvd3MgY2FsbGJhY2tzIHRvIGJlIHJlZ2lzdGVyZWQgdGhhdCBhcmUgZXhlY3V0ZWQgd2hlbiB0aGUgc3RvcmUgaXNcbiAgICAgKiBjbGVhcmVkLiBgb25DbGVhclN0b3JlYCByZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWRcbiAgICAgKiB0byByZW1vdmUgcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5vbkNsZWFyU3RvcmUgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5jbGVhclN0b3JlQ2FsbGJhY2tzLnB1c2goY2IpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuY2xlYXJTdG9yZUNhbGxiYWNrcyA9IF90aGlzLmNsZWFyU3RvcmVDYWxsYmFja3MuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjICE9PSBjYjsgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWZldGNoZXMgYWxsIG9mIHlvdXIgYWN0aXZlIHF1ZXJpZXMuXG4gICAgICpcbiAgICAgKiBgcmVGZXRjaE9ic2VydmFibGVRdWVyaWVzKClgIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0byBicmluZyB0aGUgY2xpZW50IGJhY2sgdG8gcHJvcGVyIHN0YXRlIGluIGNhc2Ugb2YgYSBuZXR3b3JrIG91dGFnZVxuICAgICAqXG4gICAgICogSXQgaXMgaW1wb3J0YW50IHRvIHJlbWVtYmVyIHRoYXQgYHJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcygpYCAqd2lsbCogcmVmZXRjaCBhbnkgYWN0aXZlXG4gICAgICogcXVlcmllcy4gVGhpcyBtZWFucyB0aGF0IGFueSBjb21wb25lbnRzIHRoYXQgbWlnaHQgYmUgbW91bnRlZCB3aWxsIGV4ZWN1dGVcbiAgICAgKiB0aGVpciBxdWVyaWVzIGFnYWluIHVzaW5nIHlvdXIgbmV0d29yayBpbnRlcmZhY2UuIElmIHlvdSBkbyBub3Qgd2FudCB0b1xuICAgICAqIHJlLWV4ZWN1dGUgYW55IHF1ZXJpZXMgdGhlbiB5b3Ugc2hvdWxkIG1ha2Ugc3VyZSB0byBzdG9wIHdhdGNoaW5nIGFueVxuICAgICAqIGFjdGl2ZSBxdWVyaWVzLlxuICAgICAqIFRha2VzIG9wdGlvbmFsIHBhcmFtZXRlciBgaW5jbHVkZVN0YW5kYnlgIHdoaWNoIHdpbGwgaW5jbHVkZSBxdWVyaWVzIGluIHN0YW5kYnktbW9kZSB3aGVuIHJlZmV0Y2hpbmcuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5yZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMgPSBmdW5jdGlvbiAoaW5jbHVkZVN0YW5kYnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLnJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcyhpbmNsdWRlU3RhbmRieSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWZldGNoZXMgc3BlY2lmaWVkIGFjdGl2ZSBxdWVyaWVzLiBTaW1pbGFyIHRvIFwicmVGZXRjaE9ic2VydmFibGVRdWVyaWVzKClcIiBidXQgd2l0aCBhIHNwZWNpZmljIGxpc3Qgb2YgcXVlcmllcy5cbiAgICAgKlxuICAgICAqIGByZWZldGNoUXVlcmllcygpYCBpcyB1c2VmdWwgZm9yIHVzZSBjYXNlcyB0byBpbXBlcmF0aXZlbHkgcmVmcmVzaCBhIHNlbGVjdGlvbiBvZiBxdWVyaWVzLlxuICAgICAqXG4gICAgICogSXQgaXMgaW1wb3J0YW50IHRvIHJlbWVtYmVyIHRoYXQgYHJlZmV0Y2hRdWVyaWVzKClgICp3aWxsKiByZWZldGNoIHNwZWNpZmllZCBhY3RpdmVcbiAgICAgKiBxdWVyaWVzLiBUaGlzIG1lYW5zIHRoYXQgYW55IGNvbXBvbmVudHMgdGhhdCBtaWdodCBiZSBtb3VudGVkIHdpbGwgZXhlY3V0ZVxuICAgICAqIHRoZWlyIHF1ZXJpZXMgYWdhaW4gdXNpbmcgeW91ciBuZXR3b3JrIGludGVyZmFjZS4gSWYgeW91IGRvIG5vdCB3YW50IHRvXG4gICAgICogcmUtZXhlY3V0ZSBhbnkgcXVlcmllcyB0aGVuIHlvdSBzaG91bGQgbWFrZSBzdXJlIHRvIHN0b3Agd2F0Y2hpbmcgYW55XG4gICAgICogYWN0aXZlIHF1ZXJpZXMuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5yZWZldGNoUXVlcmllcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLnF1ZXJ5TWFuYWdlci5yZWZldGNoUXVlcmllcyhvcHRpb25zKTtcbiAgICAgICAgdmFyIHF1ZXJpZXMgPSBbXTtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgbWFwLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgb2JzUXVlcnkpIHtcbiAgICAgICAgICAgIHF1ZXJpZXMucHVzaChvYnNRdWVyeSk7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciByZXN1bHQgPSBQcm9taXNlLmFsbChyZXN1bHRzKTtcbiAgICAgICAgLy8gSW4gY2FzZSB5b3UgbmVlZCB0aGUgcmF3IHJlc3VsdHMgaW1tZWRpYXRlbHksIHdpdGhvdXQgYXdhaXRpbmdcbiAgICAgICAgLy8gUHJvbWlzZS5hbGwocmVzdWx0cyk6XG4gICAgICAgIHJlc3VsdC5xdWVyaWVzID0gcXVlcmllcztcbiAgICAgICAgcmVzdWx0LnJlc3VsdHMgPSByZXN1bHRzO1xuICAgICAgICAvLyBJZiB5b3UgZGVjaWRlIHRvIGlnbm9yZSB0aGUgcmVzdWx0IFByb21pc2UgYmVjYXVzZSB5b3UncmUgdXNpbmdcbiAgICAgICAgLy8gcmVzdWx0LnF1ZXJpZXMgYW5kIHJlc3VsdC5yZXN1bHRzIGluc3RlYWQsIHlvdSBzaG91bGRuJ3QgaGF2ZSB0byB3b3JyeVxuICAgICAgICAvLyBhYm91dCBwcmV2ZW50aW5nIHVuY2F1Z2h0IHJlamVjdGlvbnMgZm9yIHRoZSBQcm9taXNlLmFsbCByZXN1bHQuXG4gICAgICAgIHJlc3VsdC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGdsb2JhbFRoaXMuX19ERVZfXyAhPT0gZmFsc2UgJiYgaW52YXJpYW50LmRlYnVnKDIwLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjdXJyZW50bHkgYWN0aXZlIGBPYnNlcnZhYmxlUXVlcnlgIG9iamVjdHMsIGluIGEgYE1hcGAga2V5ZWQgYnlcbiAgICAgKiBxdWVyeSBJRCBzdHJpbmdzLlxuICAgICAqXG4gICAgICogQW4gXCJhY3RpdmVcIiBxdWVyeSBpcyBvbmUgdGhhdCBoYXMgb2JzZXJ2ZXJzIGFuZCBhIGBmZXRjaFBvbGljeWAgb3RoZXIgdGhhblxuICAgICAqIFwic3RhbmRieVwiIG9yIFwiY2FjaGUtb25seVwiLlxuICAgICAqXG4gICAgICogWW91IGNhbiBpbmNsdWRlIGFsbCBgT2JzZXJ2YWJsZVF1ZXJ5YCBvYmplY3RzIChpbmNsdWRpbmcgdGhlIGluYWN0aXZlIG9uZXMpXG4gICAgICogYnkgcGFzc2luZyBcImFsbFwiIGluc3RlYWQgb2YgXCJhY3RpdmVcIiwgb3IgeW91IGNhbiBpbmNsdWRlIGp1c3QgYSBzdWJzZXQgb2ZcbiAgICAgKiBhY3RpdmUgcXVlcmllcyBieSBwYXNzaW5nIGFuIGFycmF5IG9mIHF1ZXJ5IG5hbWVzIG9yIERvY3VtZW50Tm9kZSBvYmplY3RzLlxuICAgICAqL1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuZ2V0T2JzZXJ2YWJsZVF1ZXJpZXMgPSBmdW5jdGlvbiAoaW5jbHVkZSkge1xuICAgICAgICBpZiAoaW5jbHVkZSA9PT0gdm9pZCAwKSB7IGluY2x1ZGUgPSBcImFjdGl2ZVwiOyB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci5nZXRPYnNlcnZhYmxlUXVlcmllcyhpbmNsdWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEV4cG9zZXMgdGhlIGNhY2hlJ3MgY29tcGxldGUgc3RhdGUsIGluIGEgc2VyaWFsaXphYmxlIGZvcm1hdCBmb3IgbGF0ZXIgcmVzdG9yYXRpb24uXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5leHRyYWN0ID0gZnVuY3Rpb24gKG9wdGltaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuZXh0cmFjdChvcHRpbWlzdGljKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIGV4aXN0aW5nIHN0YXRlIGluIHRoZSBjYWNoZSAoaWYgYW55KSB3aXRoIHRoZSB2YWx1ZXMgZXhwcmVzc2VkIGJ5XG4gICAgICogYHNlcmlhbGl6ZWRTdGF0ZWAuXG4gICAgICpcbiAgICAgKiBDYWxsZWQgd2hlbiBoeWRyYXRpbmcgYSBjYWNoZSAoc2VydmVyIHNpZGUgcmVuZGVyaW5nLCBvciBvZmZsaW5lIHN0b3JhZ2UpLFxuICAgICAqIGFuZCBhbHNvIChwb3RlbnRpYWxseSkgZHVyaW5nIGhvdCByZWxvYWRzLlxuICAgICAqL1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uIChzZXJpYWxpemVkU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUucmVzdG9yZShzZXJpYWxpemVkU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIGFkZGl0aW9uYWwgbG9jYWwgcmVzb2x2ZXJzLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgYGFkZFJlc29sdmVyc2Agd2lsbCBiZWVuIHJlbW92ZWQgaW4gQXBvbGxvIENsaWVudCA0LjAuIEl0IGlzXG4gICAgICogc2FmZSB0byBjb250aW51ZSB1c2luZyB0aGlzIG1ldGhvZCBpbiBBcG9sbG8gQ2xpZW50IDMueC5cbiAgICAgKlxuICAgICAqICoqUmVjb21tZW5kZWQgbm93KipcbiAgICAgKlxuICAgICAqIE5vIGFjdGlvbiBuZWVkZWRcbiAgICAgKlxuICAgICAqICoqV2hlbiB1cGdyYWRpbmcqKlxuICAgICAqXG4gICAgICogVXNlIGBjbGllbnQubG9jYWxTdGF0ZS5hZGRSZXNvbHZlcnMocmVzb2x2ZXJzKWAuIEFsdGVybmF0aXZlbHksIHN0b3JlXG4gICAgICogdGhlIGBMb2NhbFN0YXRlYCBpbnN0YW5jZSBpbiBhIHNlcGFyYXRlIHZhcmlhYmxlIGFuZCBjYWxsIGBhZGRSZXNvbHZlcnNgIG9uXG4gICAgICogdGhhdC5cbiAgICAgKi9cbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLmFkZFJlc29sdmVycyA9IGZ1bmN0aW9uIChyZXNvbHZlcnMpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0YXRlLmFkZFJlc29sdmVycyhyZXNvbHZlcnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IChvdmVycmlkZSBleGlzdGluZykgbG9jYWwgcmVzb2x2ZXJzLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgYHNldFJlc29sdmVyc2Agd2lsbCBiZWVuIHJlbW92ZWQgaW4gQXBvbGxvIENsaWVudCA0LjAuIEl0IGlzXG4gICAgICogc2FmZSB0byBjb250aW51ZSB1c2luZyB0aGlzIG1ldGhvZCBpbiBBcG9sbG8gQ2xpZW50IDMueC5cbiAgICAgKlxuICAgICAqICoqUmVjb21tZW5kZWQgbm93KipcbiAgICAgKlxuICAgICAqIElmIHBvc3NpYmxlLCBzdG9wIHVzaW5nIHRoZSBgc2V0UmVzb2x2ZXJzYCBtZXRob2QuXG4gICAgICpcbiAgICAgKiAqKldoZW4gdXBncmFkaW5nKipcbiAgICAgKlxuICAgICAqIFJlbW92ZSB0aGUgdXNlIG9mIGBzZXRSZXNvbHZlcnNgLlxuICAgICAqL1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuc2V0UmVzb2x2ZXJzID0gZnVuY3Rpb24gKHJlc29sdmVycykge1xuICAgICAgICB0aGlzLmxvY2FsU3RhdGUuc2V0UmVzb2x2ZXJzKHJlc29sdmVycyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIHJlZ2lzdGVyZWQgbG9jYWwgcmVzb2x2ZXJzLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgYGdldFJlc29sdmVyc2Agd2lsbCBiZSByZW1vdmVkIGluIEFwb2xsbyBDbGllbnQgNC4wLiBJdCBpc1xuICAgICAqIHNhZmUgdG8gY29udGludWUgdXNpbmcgdGhpcyBtZXRob2QgaW4gQXBvbGxvIENsaWVudCAzLnguXG4gICAgICpcbiAgICAgKiAqKlJlY29tbWVuZGVkIG5vdyoqXG4gICAgICpcbiAgICAgKiBJZiBwb3NzaWJsZSwgc3RvcCB1c2luZyB0aGUgYGdldFJlc29sdmVyc2AgbWV0aG9kLlxuICAgICAqXG4gICAgICogKipXaGVuIHVwZ3JhZGluZyoqXG4gICAgICpcbiAgICAgKiBSZW1vdmUgdGhlIHVzZSBvZiBgZ2V0UmVzb2x2ZXJzYC5cbiAgICAgKi9cbiAgICBBcG9sbG9DbGllbnQucHJvdG90eXBlLmdldFJlc29sdmVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdGF0ZS5nZXRSZXNvbHZlcnMoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIGN1c3RvbSBsb2NhbCBzdGF0ZSBmcmFnbWVudCBtYXRjaGVyLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgQ3VzdG9tIGZyYWdtZW50IG1hdGNoZXJzIHdpbGwgbm8gbG9uZ2VyIGJlIHN1cHBvcnRlZCBpbiBBcG9sbG9cbiAgICAgKiBDbGllbnQgNC4wIGFuZCBoYXMgYmVlbiByZXBsYWNlZCBieSBgY2FjaGUuZnJhZ21lbnRNYXRjaGVzYC4gSXQgaXMgc2FmZSB0b1xuICAgICAqIGNvbnRpbnVlIHVzaW5nIGBzZXRMb2NhbFN0YXRlRnJhZ21lbnRNYXRjaGVyYCBpbiBBcG9sbG8gQ2xpZW50IDMueC5cbiAgICAgKlxuICAgICAqICoqUmVjb21tZW5kZWQgbm93KipcbiAgICAgKlxuICAgICAqIE5vIGFjdGlvbiBuZWVkZWRcbiAgICAgKlxuICAgICAqICoqV2hlbiB1cGdyYWRpbmcqKlxuICAgICAqXG4gICAgICogTGV2ZXJhZ2UgYHBvc3NpYmxlVHlwZXNgIHdpdGggYEluTWVtb3J5Q2FjaGVgIHRvIGVuc3VyZSBmcmFnbWVudHMgbWF0Y2hcbiAgICAgKiBjb3JyZWN0bHkuIEVuc3VyZSBgcG9zc2libGVUeXBlc2AgaW5jbHVkZSBsb2NhbCB0eXBlcyBpZiBuZWVkZWQuIElmIHdvcmtpbmdcbiAgICAgKiB3aXRoIGEgM3JkIHBhcnR5IGNhY2hlIGltcGxlbWVudGF0aW9uLCBlbnN1cmUgdGhlIDNyZCBwYXJ0eSBjYWNoZSBpbXBsZW1lbnRzXG4gICAgICogdGhlIGBjYWNoZS5mcmFnbWVudE1hdGNoZXNgIG1ldGhvZC4gVGhpcyBmdW5jdGlvbiBzaG91bGQgbm8gbG9uZ2VyIGJlIHVzZWQuXG4gICAgICovXG4gICAgQXBvbGxvQ2xpZW50LnByb3RvdHlwZS5zZXRMb2NhbFN0YXRlRnJhZ21lbnRNYXRjaGVyID0gZnVuY3Rpb24gKGZyYWdtZW50TWF0Y2hlcikge1xuICAgICAgICB0aGlzLmxvY2FsU3RhdGUuc2V0RnJhZ21lbnRNYXRjaGVyKGZyYWdtZW50TWF0Y2hlcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZWZpbmUgYSBuZXcgQXBvbGxvTGluayAob3IgbGluayBjaGFpbikgdGhhdCBBcG9sbG8gQ2xpZW50IHdpbGwgdXNlLlxuICAgICAqL1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuc2V0TGluayA9IGZ1bmN0aW9uIChuZXdMaW5rKSB7XG4gICAgICAgIHRoaXMubGluayA9IHRoaXMucXVlcnlNYW5hZ2VyLmxpbmsgPSBuZXdMaW5rO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFwb2xsb0NsaWVudC5wcm90b3R5cGUsIFwiZGVmYXVsdENvbnRleHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci5kZWZhdWx0Q29udGV4dDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBBcG9sbG9DbGllbnQ7XG59KCkpO1xuZXhwb3J0IHsgQXBvbGxvQ2xpZW50IH07XG5pZiAoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSkge1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuZ2V0TWVtb3J5SW50ZXJuYWxzID0gZ2V0QXBvbGxvQ2xpZW50TWVtb3J5SW50ZXJuYWxzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXBvbGxvQ2xpZW50LmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSAnZ3JhcGhxbCc7XG52YXIgZG9jQ2FjaGUgPSBuZXcgTWFwKCk7XG52YXIgZnJhZ21lbnRTb3VyY2VNYXAgPSBuZXcgTWFwKCk7XG52YXIgcHJpbnRGcmFnbWVudFdhcm5pbmdzID0gdHJ1ZTtcbnZhciBleHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcyA9IGZhbHNlO1xuZnVuY3Rpb24gbm9ybWFsaXplKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvW1xccyxdKy9nLCAnICcpLnRyaW0oKTtcbn1cbmZ1bmN0aW9uIGNhY2hlS2V5RnJvbUxvYyhsb2MpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplKGxvYy5zb3VyY2UuYm9keS5zdWJzdHJpbmcobG9jLnN0YXJ0LCBsb2MuZW5kKSk7XG59XG5mdW5jdGlvbiBwcm9jZXNzRnJhZ21lbnRzKGFzdCkge1xuICAgIHZhciBzZWVuS2V5cyA9IG5ldyBTZXQoKTtcbiAgICB2YXIgZGVmaW5pdGlvbnMgPSBbXTtcbiAgICBhc3QuZGVmaW5pdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZnJhZ21lbnREZWZpbml0aW9uKSB7XG4gICAgICAgIGlmIChmcmFnbWVudERlZmluaXRpb24ua2luZCA9PT0gJ0ZyYWdtZW50RGVmaW5pdGlvbicpIHtcbiAgICAgICAgICAgIHZhciBmcmFnbWVudE5hbWUgPSBmcmFnbWVudERlZmluaXRpb24ubmFtZS52YWx1ZTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VLZXkgPSBjYWNoZUtleUZyb21Mb2MoZnJhZ21lbnREZWZpbml0aW9uLmxvYyk7XG4gICAgICAgICAgICB2YXIgc291cmNlS2V5U2V0ID0gZnJhZ21lbnRTb3VyY2VNYXAuZ2V0KGZyYWdtZW50TmFtZSk7XG4gICAgICAgICAgICBpZiAoc291cmNlS2V5U2V0ICYmICFzb3VyY2VLZXlTZXQuaGFzKHNvdXJjZUtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJpbnRGcmFnbWVudFdhcm5pbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIldhcm5pbmc6IGZyYWdtZW50IHdpdGggbmFtZSBcIiArIGZyYWdtZW50TmFtZSArIFwiIGFscmVhZHkgZXhpc3RzLlxcblwiXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwiZ3JhcGhxbC10YWcgZW5mb3JjZXMgYWxsIGZyYWdtZW50IG5hbWVzIGFjcm9zcyB5b3VyIGFwcGxpY2F0aW9uIHRvIGJlIHVuaXF1ZTsgcmVhZCBtb3JlIGFib3V0XFxuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCJ0aGlzIGluIHRoZSBkb2NzOiBodHRwOi8vZGV2LmFwb2xsb2RhdGEuY29tL2NvcmUvZnJhZ21lbnRzLmh0bWwjdW5pcXVlLW5hbWVzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFzb3VyY2VLZXlTZXQpIHtcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNvdXJjZU1hcC5zZXQoZnJhZ21lbnROYW1lLCBzb3VyY2VLZXlTZXQgPSBuZXcgU2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdXJjZUtleVNldC5hZGQoc291cmNlS2V5KTtcbiAgICAgICAgICAgIGlmICghc2VlbktleXMuaGFzKHNvdXJjZUtleSkpIHtcbiAgICAgICAgICAgICAgICBzZWVuS2V5cy5hZGQoc291cmNlS2V5KTtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9ucy5wdXNoKGZyYWdtZW50RGVmaW5pdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWZpbml0aW9ucy5wdXNoKGZyYWdtZW50RGVmaW5pdGlvbik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGFzdCksIHsgZGVmaW5pdGlvbnM6IGRlZmluaXRpb25zIH0pO1xufVxuZnVuY3Rpb24gc3RyaXBMb2MoZG9jKSB7XG4gICAgdmFyIHdvcmtTZXQgPSBuZXcgU2V0KGRvYy5kZWZpbml0aW9ucyk7XG4gICAgd29ya1NldC5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlLmxvYylcbiAgICAgICAgICAgIGRlbGV0ZSBub2RlLmxvYztcbiAgICAgICAgT2JqZWN0LmtleXMobm9kZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBub2RlW2tleV07XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHdvcmtTZXQuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgdmFyIGxvYyA9IGRvYy5sb2M7XG4gICAgaWYgKGxvYykge1xuICAgICAgICBkZWxldGUgbG9jLnN0YXJ0VG9rZW47XG4gICAgICAgIGRlbGV0ZSBsb2MuZW5kVG9rZW47XG4gICAgfVxuICAgIHJldHVybiBkb2M7XG59XG5mdW5jdGlvbiBwYXJzZURvY3VtZW50KHNvdXJjZSkge1xuICAgIHZhciBjYWNoZUtleSA9IG5vcm1hbGl6ZShzb3VyY2UpO1xuICAgIGlmICghZG9jQ2FjaGUuaGFzKGNhY2hlS2V5KSkge1xuICAgICAgICB2YXIgcGFyc2VkID0gcGFyc2Uoc291cmNlLCB7XG4gICAgICAgICAgICBleHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlczogZXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMsXG4gICAgICAgICAgICBhbGxvd0xlZ2FjeUZyYWdtZW50VmFyaWFibGVzOiBleHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlc1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFwYXJzZWQgfHwgcGFyc2VkLmtpbmQgIT09ICdEb2N1bWVudCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGEgdmFsaWQgR3JhcGhRTCBkb2N1bWVudC4nKTtcbiAgICAgICAgfVxuICAgICAgICBkb2NDYWNoZS5zZXQoY2FjaGVLZXksIHN0cmlwTG9jKHByb2Nlc3NGcmFnbWVudHMocGFyc2VkKSkpO1xuICAgIH1cbiAgICByZXR1cm4gZG9jQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBncWwobGl0ZXJhbHMpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbGl0ZXJhbHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGxpdGVyYWxzID0gW2xpdGVyYWxzXTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IGxpdGVyYWxzWzBdO1xuICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoYXJnLCBpKSB7XG4gICAgICAgIGlmIChhcmcgJiYgYXJnLmtpbmQgPT09ICdEb2N1bWVudCcpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBhcmcubG9jLnNvdXJjZS5ib2R5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0ICs9IGFyZztcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgKz0gbGl0ZXJhbHNbaSArIDFdO1xuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZURvY3VtZW50KHJlc3VsdCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDYWNoZXMoKSB7XG4gICAgZG9jQ2FjaGUuY2xlYXIoKTtcbiAgICBmcmFnbWVudFNvdXJjZU1hcC5jbGVhcigpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVGcmFnbWVudFdhcm5pbmdzKCkge1xuICAgIHByaW50RnJhZ21lbnRXYXJuaW5ncyA9IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzKCkge1xuICAgIGV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzID0gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMoKSB7XG4gICAgZXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMgPSBmYWxzZTtcbn1cbnZhciBleHRyYXMgPSB7XG4gICAgZ3FsOiBncWwsXG4gICAgcmVzZXRDYWNoZXM6IHJlc2V0Q2FjaGVzLFxuICAgIGRpc2FibGVGcmFnbWVudFdhcm5pbmdzOiBkaXNhYmxlRnJhZ21lbnRXYXJuaW5ncyxcbiAgICBlbmFibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlczogZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMsXG4gICAgZGlzYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzOiBkaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXNcbn07XG4oZnVuY3Rpb24gKGdxbF8xKSB7XG4gICAgZ3FsXzEuZ3FsID0gZXh0cmFzLmdxbCwgZ3FsXzEucmVzZXRDYWNoZXMgPSBleHRyYXMucmVzZXRDYWNoZXMsIGdxbF8xLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzID0gZXh0cmFzLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzLCBncWxfMS5lbmFibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcyA9IGV4dHJhcy5lbmFibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcywgZ3FsXzEuZGlzYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzID0gZXh0cmFzLmRpc2FibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcztcbn0pKGdxbCB8fCAoZ3FsID0ge30pKTtcbmdxbFtcImRlZmF1bHRcIl0gPSBncWw7XG5leHBvcnQgZGVmYXVsdCBncWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLAogICAgIi8qIENvcmUgKi9cbmV4cG9ydCB7IEFwb2xsb0NsaWVudCwgbWVyZ2VPcHRpb25zIH0gZnJvbSBcIi4vQXBvbGxvQ2xpZW50LmpzXCI7XG5leHBvcnQgeyBPYnNlcnZhYmxlUXVlcnkgfSBmcm9tIFwiLi9PYnNlcnZhYmxlUXVlcnkuanNcIjtcbmV4cG9ydCB7IE5ldHdvcmtTdGF0dXMsIGlzTmV0d29ya1JlcXVlc3RTZXR0bGVkIH0gZnJvbSBcIi4vbmV0d29ya1N0YXR1cy5qc1wiO1xuZXhwb3J0IHsgaXNBcG9sbG9FcnJvciwgQXBvbGxvRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzL2luZGV4LmpzXCI7XG5leHBvcnQgeyBDYWNoZSwgQXBvbGxvQ2FjaGUsIEluTWVtb3J5Q2FjaGUsIE1pc3NpbmdGaWVsZEVycm9yLCBkZWZhdWx0RGF0YUlkRnJvbU9iamVjdCwgbWFrZVZhciwgfSBmcm9tIFwiLi4vY2FjaGUvaW5kZXguanNcIjtcbi8qIExpbmsgKi9cbmV4cG9ydCAqIGZyb20gXCIuLi9saW5rL2NvcmUvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuLi9saW5rL2h0dHAvaW5kZXguanNcIjtcbmV4cG9ydCB7IGZyb21FcnJvciwgdG9Qcm9taXNlLCBmcm9tUHJvbWlzZSwgdGhyb3dTZXJ2ZXJFcnJvciwgfSBmcm9tIFwiLi4vbGluay91dGlscy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgRG9jdW1lbnRUcmFuc2Zvcm0sIE9ic2VydmFibGUsIGlzUmVmZXJlbmNlLCBtYWtlUmVmZXJlbmNlLCB9IGZyb20gXCIuLi91dGlsaXRpZXMvaW5kZXguanNcIjtcbi8qIFN1cHBvcnRpbmcgKi9cbi8vIFRoZSB2ZXJib3NpdHkgb2YgaW52YXJpYW50Lntsb2csd2FybixlcnJvcn0gY2FuIGJlIGNvbnRyb2xsZWQgZ2xvYmFsbHlcbi8vIChmb3IgYW55b25lIHVzaW5nIHRoZSBzYW1lIHRzLWludmFyaWFudCBwYWNrYWdlKSBieSBwYXNzaW5nIFwibG9nXCIsXG4vLyBcIndhcm5cIiwgXCJlcnJvclwiLCBvciBcInNpbGVudFwiIHRvIHNldFZlcmJvc2l0eSAoXCJsb2dcIiBpcyB0aGUgZGVmYXVsdCkuXG4vLyBOb3RlIHRoYXQgYWxsIGludmFyaWFudC4qIGxvZ2dpbmcgaXMgaGlkZGVuIGluIHByb2R1Y3Rpb24uXG5pbXBvcnQgeyBzZXRWZXJib3NpdHkgfSBmcm9tIFwidHMtaW52YXJpYW50XCI7XG5leHBvcnQgeyBzZXRWZXJib3NpdHkgYXMgc2V0TG9nVmVyYm9zaXR5IH07XG5zZXRWZXJib3NpdHkoZ2xvYmFsVGhpcy5fX0RFVl9fICE9PSBmYWxzZSA/IFwibG9nXCIgOiBcInNpbGVudFwiKTtcbi8vIE5vdGUgdGhhdCBpbXBvcnRpbmcgYGdxbGAgYnkgaXRzZWxmLCB0aGVuIGRlc3RydWN0dXJpbmdcbi8vIGFkZGl0aW9uYWwgcHJvcGVydGllcyBzZXBhcmF0ZWx5IGJlZm9yZSBleHBvcnRpbmcsIGlzIGludGVudGlvbmFsLlxuLy8gRHVlIHRvIHRoZSB3YXkgdGhlIGBncmFwaHFsLXRhZ2AgbGlicmFyeSBpcyBzZXR1cCwgY2VydGFpbiBidW5kbGVyc1xuLy8gY2FuJ3QgZmluZCB0aGUgcHJvcGVydGllcyBhZGRlZCB0byB0aGUgZXhwb3J0ZWQgYGdxbGAgZnVuY3Rpb24gd2l0aG91dFxuLy8gYWRkaXRpb25hbCBndWlkYW5jZSAoZS5nLiBSb2xsdXAgLSBzZWVcbi8vIGh0dHBzOi8vcm9sbHVwanMub3JnL2d1aWRlL2VuLyNlcnJvci1uYW1lLWlzLW5vdC1leHBvcnRlZC1ieS1tb2R1bGUpLlxuLy8gSW5zdGVhZCBvZiBoYXZpbmcgcGVvcGxlIHRoYXQgYXJlIHVzaW5nIGJ1bmRsZXJzIHdpdGggYEBhcG9sbG8vY2xpZW50YCBhZGRcbi8vIGV4dHJhIGJ1bmRsZXIgY29uZmlnIHRvIGhlbHAgYGdyYXBocWwtdGFnYCBleHBvcnRzIGJlIGZvdW5kICh3aGljaCB3b3VsZCBiZVxuLy8gYXdrd2FyZCBzaW5jZSB0aGV5IGFyZW4ndCBpbXBvcnRpbmcgYGdyYXBocWwtdGFnYCB0aGVtc2VsdmVzKSwgdGhpc1xuLy8gd29ya2Fyb3VuZCBvZiBwdWxsaW5nIHRoZSBleHRyYSBwcm9wZXJ0aWVzIG9mZiB0aGUgYGdxbGAgZnVuY3Rpb24sXG4vLyB0aGVuIHJlLWV4cG9ydGluZyB0aGVtIHNlcGFyYXRlbHksIGhlbHBzIGtlZXBzIGJ1bmRsZXJzIGhhcHB5IHdpdGhvdXQgYW55XG4vLyBhZGRpdGlvbmFsIGNvbmZpZyBjaGFuZ2VzLlxuZXhwb3J0IHsgZ3FsLCByZXNldENhY2hlcywgZGlzYWJsZUZyYWdtZW50V2FybmluZ3MsIGVuYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzLCBkaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMsIH0gZnJvbSBcImdyYXBocWwtdGFnXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fcmVzdCB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQXBvbGxvTGluayB9IGZyb20gXCIuLi9jb3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIi4uLy4uL3V0aWxpdGllcy9pbmRleC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHNldENvbnRleHQoc2V0dGVyKSB7XG4gICAgcmV0dXJuIG5ldyBBcG9sbG9MaW5rKGZ1bmN0aW9uIChvcGVyYXRpb24sIGZvcndhcmQpIHtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBfX3Jlc3Qob3BlcmF0aW9uLCBbXSk7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGU7XG4gICAgICAgICAgICB2YXIgY2xvc2VkID0gZmFsc2U7XG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUocmVxdWVzdClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVxKSB7IHJldHVybiBzZXR0ZXIocmVxLCBvcGVyYXRpb24uZ2V0Q29udGV4dCgpKTsgfSlcbiAgICAgICAgICAgICAgICAudGhlbihvcGVyYXRpb24uc2V0Q29udGV4dClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIG9ic2VydmVyIGlzIGFscmVhZHkgY2xvc2VkLCBubyBuZWVkIHRvIHN1YnNjcmliZS5cbiAgICAgICAgICAgICAgICBpZiAoY2xvc2VkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaGFuZGxlID0gZm9yd2FyZChvcGVyYXRpb24pLnN1YnNjcmliZSh7XG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IG9ic2VydmVyLm5leHQuYmluZChvYnNlcnZlciksXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBvYnNlcnZlci5lcnJvci5iaW5kKG9ic2VydmVyKSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IG9ic2VydmVyLmNvbXBsZXRlLmJpbmQob2JzZXJ2ZXIpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2gob2JzZXJ2ZXIuZXJyb3IuYmluZChvYnNlcnZlcikpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChoYW5kbGUpXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZS51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLAogICAgIi8qKlxuICogU3RlbmNpbCAtIEdyYXBoUUwgRE9NIEJpbmRpbmdzIExpYnJhcnkgd2l0aCBBcG9sbG8gQ2xpZW50XG4gKiBEeW5hbWljIHF1ZXJ5IGJ1aWxkZXIgdGhhdCByZWFkcyBET00gdG8gY29uc3RydWN0IEdyYXBoUUwgcXVlcmllc1xuICovXG5cbihnbG9iYWxUaGlzIGFzIGFueSkuX19ERVZfXyA9IHRydWU7XG5cbmltcG9ydCB7IEFwb2xsb0NsaWVudCwgSW5NZW1vcnlDYWNoZSwgZ3FsLCBEb2N1bWVudE5vZGUgfSBmcm9tIFwiQGFwb2xsby9jbGllbnRcIjtcbmltcG9ydCB7IEh0dHBMaW5rIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L2xpbmsvaHR0cFwiO1xuaW1wb3J0IHsgc2V0Q29udGV4dCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9saW5rL2NvbnRleHRcIjtcblxuLy8gR3JhcGhRTCBlbmRwb2ludCBjb25maWd1cmF0aW9uXG5jb25zdCBHUkFQSFFMX0VORFBPSU5UID0gXCJodHRwOi8vbG9jYWxob3N0OjgwODEvdjEvZ3JhcGhxbFwiO1xuY29uc3QgQURNSU5fU0VDUkVUID0gXCJteWFkbWluc2VjcmV0a2V5XCI7XG5cbi8vIENyZWF0ZSBBcG9sbG8gQ2xpZW50IElNTUVESUFURUxZICh3aXRoaW4gZmlyc3QgMTAgc2Vjb25kcykgZm9yIERldlRvb2xzIGRldGVjdGlvblxuY29uc3QgaHR0cExpbmsgPSBuZXcgSHR0cExpbmsoe1xuICB1cmk6IEdSQVBIUUxfRU5EUE9JTlQsXG59KTtcblxuY29uc3QgYXV0aExpbmsgPSBzZXRDb250ZXh0KChfLCB7IGhlYWRlcnMgfSkgPT4ge1xuICByZXR1cm4ge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgIC4uLmhlYWRlcnMsXG4gICAgICBcIlgtSGFzdXJhLUFkbWluLVNlY3JldFwiOiBBRE1JTl9TRUNSRVQsXG4gICAgfSxcbiAgfTtcbn0pO1xuXG5pbnRlcmZhY2UgUXVlcnlGaWVsZCB7XG4gIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gIHBhdGg6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIExvb3BDb250YWluZXIge1xuICBlbGVtZW50OiBFbGVtZW50O1xuICBhcnJheU5hbWU6IHN0cmluZztcbiAgbGltaXQ6IG51bWJlcjtcbiAgdGVtcGxhdGU6IEVsZW1lbnQ7XG59XG5cbmludGVyZmFjZSBRdWVyeVN0cnVjdHVyZSB7XG4gIFtrZXk6IHN0cmluZ106IFF1ZXJ5U3RydWN0dXJlIHwgdHJ1ZTtcbn1cblxuY2xhc3MgU3RlbmNpbEdyYXBoUUwge1xuICBwcml2YXRlIGZpZWxkczogUXVlcnlGaWVsZFtdID0gW107XG4gIHByaXZhdGUgbG9vcHM6IExvb3BDb250YWluZXJbXSA9IFtdO1xuICBwcml2YXRlIGNsaWVudDogQXBvbGxvQ2xpZW50O1xuICBwcml2YXRlIGN1cnJlbnRPZmZzZXQ6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBcIvCfjq8gU3RlbmNpbCBHcmFwaFFMIERPTSBCaW5kaW5ncyB3aXRoIEFwb2xsbyBDbGllbnQgKyBEZXZUb29scyBpbml0aWFsaXplZCFcIixcbiAgICApO1xuXG4gICAgLy8gVXNlIHRoZSBnbG9iYWxseSBjcmVhdGVkIEFwb2xsbyBDbGllbnRcbiAgICB0aGlzLmNsaWVudCA9IG5ldyBBcG9sbG9DbGllbnQoe1xuICAgICAgbGluazogYXV0aExpbmsuY29uY2F0KGh0dHBMaW5rKSxcbiAgICAgIGNhY2hlOiBuZXcgSW5NZW1vcnlDYWNoZSgpLFxuICAgICAgY29ubmVjdFRvRGV2VG9vbHM6IHRydWUsXG4gICAgICAvLyBuYW1lOiBcInN0ZW5jaWwtYXBvbGxvLWNsaWVudFwiLFxuICAgICAgLy8gdmVyc2lvbjogXCIxLjAuMFwiLFxuICAgICAgZGVmYXVsdE9wdGlvbnM6IHtcbiAgICAgICAgd2F0Y2hRdWVyeToge1xuICAgICAgICAgIGVycm9yUG9saWN5OiBcImFsbFwiLFxuICAgICAgICB9LFxuICAgICAgICBxdWVyeToge1xuICAgICAgICAgIGVycm9yUG9saWN5OiBcImFsbFwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhcIvCflJcgVXNpbmcgZ2xvYmFsIEFwb2xsbyBDbGllbnQgZm9yIEdyYXBoUUwgcXVlcmllc1wiKTtcblxuICAgICh3aW5kb3cgYXMgYW55KS5fX0FQT0xMT19DTElFTlRfXyA9IHRoaXMuY2xpZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFNjYW4gdGhlIERPTSBmb3IgZWxlbWVudHMgd2l0aCBkYXRhLWdxbC1maWVsZCBhdHRyaWJ1dGVzXG4gICAqL1xuICBzY2FuRE9NKCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBTY2FubmluZyBET00gZm9yIEdyYXBoUUwgZmllbGQgYmluZGluZ3MuLi5cIik7XG5cbiAgICAvLyBTY2FuIGZvciBsb29wIGNvbnRhaW5lcnMgZmlyc3RcbiAgICB0aGlzLnNjYW5Mb29wQ29udGFpbmVycygpO1xuICAgIFxuICAgIC8vIFNjYW4gZm9yIHJlZ3VsYXIgZmllbGQgYmluZGluZ3MgKG91dHNpZGUgb2YgdGVtcGxhdGVzKVxuICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWdxbC1maWVsZF06bm90KFtkYXRhLWdxbC10ZW1wbGF0ZV0gW2RhdGEtZ3FsLWZpZWxkXSlcIik7XG4gICAgdGhpcy5maWVsZHMgPSBbXTtcblxuICAgIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IHBhdGggPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtZ3FsLWZpZWxkXCIpO1xuICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgdGhpcy5maWVsZHMucHVzaCh7IGVsZW1lbnQsIHBhdGggfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5ONIEZvdW5kIGZpZWxkIGJpbmRpbmc6ICR7cGF0aH1gKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKGDinIUgRm91bmQgJHt0aGlzLmZpZWxkcy5sZW5ndGh9IGZpZWxkIGJpbmRpbmdzIGFuZCAke3RoaXMubG9vcHMubGVuZ3RofSBsb29wIGNvbnRhaW5lcnNgKTtcbiAgICBcbiAgICAvLyBTZXQgdXAgcmVmcmVzaCBidXR0b24gbGlzdGVuZXJzXG4gICAgdGhpcy5zZXR1cFJlZnJlc2hCdXR0b25zKCk7XG4gICAgXG4gICAgLy8gU2V0IHVwIHBhZ2luYXRpb24gYnV0dG9uIGxpc3RlbmVyc1xuICAgIHRoaXMuc2V0dXBQYWdpbmF0aW9uQnV0dG9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjYW4gZm9yIGxvb3AgY29udGFpbmVycyBhbmQgdGVtcGxhdGVzXG4gICAqL1xuICBzY2FuTG9vcENvbnRhaW5lcnMoKTogdm9pZCB7XG4gICAgY29uc3QgbG9vcEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWdxbC1sb29wXVwiKTtcbiAgICB0aGlzLmxvb3BzID0gW107XG5cbiAgICBsb29wRWxlbWVudHMuZm9yRWFjaCgobG9vcEVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGFycmF5TmFtZSA9IGxvb3BFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtZ3FsLWxvb3BcIik7XG4gICAgICBjb25zdCBsaW1pdFN0ciA9IGxvb3BFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtZ3FsLWxpbWl0XCIpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBsb29wRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtZ3FsLXRlbXBsYXRlXVwiKTtcbiAgICAgIFxuICAgICAgaWYgKGFycmF5TmFtZSAmJiB0ZW1wbGF0ZSAmJiBsaW1pdFN0cikge1xuICAgICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KGxpbWl0U3RyKSB8fCA1O1xuICAgICAgICB0aGlzLmxvb3BzLnB1c2goeyBcbiAgICAgICAgICBlbGVtZW50OiBsb29wRWxlbWVudCwgXG4gICAgICAgICAgYXJyYXlOYW1lLCBcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGUgYXMgRWxlbWVudCBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIEZvdW5kIGxvb3AgY29udGFpbmVyOiAke2FycmF5TmFtZX0gKGxpbWl0OiAke2xpbWl0fSlgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZmllbGRzIG5lZWRlZCBmb3IgYSBsb29wIHRlbXBsYXRlIGJ5IHNjYW5uaW5nIGl0cyBkYXRhLWdxbC1maWVsZCBhdHRyaWJ1dGVzXG4gICAqL1xuICBnZXRUZW1wbGF0ZUZpZWxkcyh0ZW1wbGF0ZTogRWxlbWVudCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBmaWVsZEVsZW1lbnRzID0gdGVtcGxhdGUucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZ3FsLWZpZWxkXScpO1xuICAgIGNvbnN0IGZpZWxkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIFxuICAgIGZpZWxkRWxlbWVudHMuZm9yRWFjaChmaWVsZEVsZW1lbnQgPT4ge1xuICAgICAgY29uc3QgZmllbGRQYXRoID0gZmllbGRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1ncWwtZmllbGQnKTtcbiAgICAgIGlmIChmaWVsZFBhdGgpIHtcbiAgICAgICAgZmllbGRzLmFkZChmaWVsZFBhdGgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBBcnJheS5mcm9tKGZpZWxkcyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgcmVmcmVzaCBidXR0b25zXG4gICAqL1xuICBzZXR1cFJlZnJlc2hCdXR0b25zKCk6IHZvaWQge1xuICAgIGNvbnN0IHJlZnJlc2hCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWdxbC1yZWZyZXNoXVwiKTtcbiAgICBcbiAgICByZWZyZXNoQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIvCflIQgUmVmcmVzaCBidXR0b24gY2xpY2tlZCAtIGludmFsaWRhdGluZyBjYWNoZSBhbmQgcmVmZXRjaGluZyBkYXRhLi4uXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYXIgQXBvbGxvIGNhY2hlXG4gICAgICAgIHRoaXMuY2xlYXJDYWNoZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmUtcnVuIHRoZSBxdWVyeSBwcm9jZXNzIHdpdGggZnJlc2ggZGF0YVxuICAgICAgICBjb25zdCBxdWVyeSA9IHRoaXMuYnVpbGRRdWVyeSgpO1xuICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVRdWVyeShxdWVyeSwgZmFsc2UpOyAvLyBGb3JjZSBuZXR3b3JrIHJlcXVlc3RcbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURPTShyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCLinIUgRGF0YSByZWZyZXNoZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5SEIFNldCB1cCAke3JlZnJlc2hCdXR0b25zLmxlbmd0aH0gcmVmcmVzaCBidXR0b24gbGlzdGVuZXJzYCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgcGFnaW5hdGlvbiBidXR0b25zXG4gICAqL1xuICBzZXR1cFBhZ2luYXRpb25CdXR0b25zKCk6IHZvaWQge1xuICAgIGNvbnN0IHBhZ2luYXRpb25CdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWdxbC1wYWdpbmF0ZV1cIik7XG4gICAgXG4gICAgcGFnaW5hdGlvbkJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSBidXR0b24uZ2V0QXR0cmlidXRlKFwiZGF0YS1ncWwtcGFnaW5hdGVcIik7XG4gICAgICBcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+ThCBQYWdpbmF0aW9uIGJ1dHRvbiBjbGlja2VkOiAke2RpcmVjdGlvbn1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBwYWdlIHNpemUgZnJvbSB0aGUgZmlyc3QgbG9vcCBjb250YWluZXIgKGFzc3VtZXMgb25lIHBhZ2luYXRlZCBsaXN0IHBlciBwYWdlKVxuICAgICAgICBjb25zdCBwYWdlU2l6ZSA9IHRoaXMubG9vcHMubGVuZ3RoID4gMCA/IHRoaXMubG9vcHNbMF0ubGltaXQgOiA1O1xuICAgICAgICBcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRPZmZzZXQgKz0gcGFnZVNpemU7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBcInByZXZcIiAmJiB0aGlzLmN1cnJlbnRPZmZzZXQgPj0gcGFnZVNpemUpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRPZmZzZXQgLT0gcGFnZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFByZXZlbnQgbmVnYXRpdmUgb2Zmc2V0c1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50T2Zmc2V0IDwgMCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudE9mZnNldCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OEIEN1cnJlbnQgb2Zmc2V0OiAke3RoaXMuY3VycmVudE9mZnNldH0sIHBhZ2Ugc2l6ZTogJHtwYWdlU2l6ZX1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlLXJ1biB0aGUgcXVlcnkgd2l0aCBuZXcgcGFnaW5hdGlvblxuICAgICAgICBjb25zdCBxdWVyeSA9IHRoaXMuYnVpbGRRdWVyeSgpO1xuICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVRdWVyeShxdWVyeSwgZmFsc2UpOyAvLyBGb3JjZSBmcmVzaCBkYXRhXG4gICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVET00ocmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5OEIFNldCB1cCAke3BhZ2luYXRpb25CdXR0b25zLmxlbmd0aH0gcGFnaW5hdGlvbiBidXR0b24gbGlzdGVuZXJzYCk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgbmVzdGVkIHF1ZXJ5IHN0cnVjdHVyZSBmcm9tIGZpZWxkIHBhdGhzXG4gICAqL1xuICBidWlsZFF1ZXJ5U3RydWN0dXJlKCk6IFF1ZXJ5U3RydWN0dXJlIHtcbiAgICBjb25zb2xlLmxvZyhcIvCfj5fvuI8gIEJ1aWxkaW5nIHF1ZXJ5IHN0cnVjdHVyZSBmcm9tIGZpZWxkIHBhdGhzLi4uXCIpO1xuXG4gICAgY29uc3Qgc3RydWN0dXJlOiBRdWVyeVN0cnVjdHVyZSA9IHt9O1xuXG4gICAgdGhpcy5maWVsZHMuZm9yRWFjaCgoeyBwYXRoIH0pID0+IHtcbiAgICAgIC8vIFNraXAgd2lkZ2V0IGFycmF5IHBhdGhzIC0gd2UgaGFuZGxlIHRoZXNlIHNlcGFyYXRlbHlcbiAgICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoJ3dpZGdldHMuJykgJiYgL3dpZGdldHNcXC5cXGQrXFwuLy50ZXN0KHBhdGgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2tpcCBzcGVjaWFsIGNvbXB1dGVkIGZpZWxkc1xuICAgICAgaWYgKHBhdGggPT09ICdjdXJyZW50X3BhZ2UnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KFwiLlwiKTtcbiAgICAgIGxldCBjdXJyZW50ID0gc3RydWN0dXJlO1xuXG4gICAgICBwYXJ0cy5mb3JFYWNoKChwYXJ0LCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoaW5kZXggPT09IHBhcnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAvLyBMZWFmIG5vZGVcbiAgICAgICAgICBjdXJyZW50W3BhcnRdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBOZXN0ZWQgb2JqZWN0XG4gICAgICAgICAgaWYgKCFjdXJyZW50W3BhcnRdKSB7XG4gICAgICAgICAgICBjdXJyZW50W3BhcnRdID0ge307XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W3BhcnRdIGFzIFF1ZXJ5U3RydWN0dXJlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKFwi8J+TiiBRdWVyeSBzdHJ1Y3R1cmUgYnVpbHQ6XCIsIHN0cnVjdHVyZSk7XG4gICAgcmV0dXJuIHN0cnVjdHVyZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHF1ZXJ5IHN0cnVjdHVyZSB0byBHcmFwaFFMIHN0cmluZ1xuICAgKi9cbiAgc3RydWN0dXJlVG9HcmFwaFFMKHN0cnVjdHVyZTogUXVlcnlTdHJ1Y3R1cmUsIGRlcHRoID0gMCk6IHN0cmluZyB7XG4gICAgY29uc3QgaW5kZW50ID0gXCIgIFwiLnJlcGVhdChkZXB0aCk7XG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XG5cbiAgICBPYmplY3QuZW50cmllcyhzdHJ1Y3R1cmUpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgIHJlc3VsdCArPSBgJHtpbmRlbnR9JHtrZXl9XFxuYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSBgJHtpbmRlbnR9JHtrZXl9IHtcXG5gO1xuICAgICAgICByZXN1bHQgKz0gdGhpcy5zdHJ1Y3R1cmVUb0dyYXBoUUwodmFsdWUgYXMgUXVlcnlTdHJ1Y3R1cmUsIGRlcHRoICsgMSk7XG4gICAgICAgIHJlc3VsdCArPSBgJHtpbmRlbnR9fVxcbmA7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGNvbXBsZXRlIEdyYXBoUUwgcXVlcnkgZnJvbSBkaXNjb3ZlcmVkIGZpZWxkIHBhdGhzXG4gICAqL1xuICBidWlsZFF1ZXJ5KCk6IERvY3VtZW50Tm9kZSB8IG51bGwge1xuICAgIGNvbnNvbGUubG9nKFwi8J+Pl++4jyAgQnVpbGRpbmcgR3JhcGhRTCBxdWVyeSBmcm9tIGZpZWxkIHBhdGhzLi4uXCIpO1xuXG4gICAgaWYgKHRoaXMuZmllbGRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coXCLimqDvuI8gIE5vIGZpZWxkcyBmb3VuZCB0byBxdWVyeVwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cnVjdHVyZSA9IHRoaXMuYnVpbGRRdWVyeVN0cnVjdHVyZSgpO1xuICAgIGNvbnN0IHF1ZXJ5RmllbGRzID0gdGhpcy5zdHJ1Y3R1cmVUb0dyYXBoUUwoc3RydWN0dXJlLCAxKTtcblxuICAgIC8vIEJ1aWxkIHF1ZXJpZXMgZm9yIGxvb3AgY29udGFpbmVycyBkeW5hbWljYWxseSBieSBzY2FubmluZyB0aGVpciB0ZW1wbGF0ZXNcbiAgICBsZXQgbG9vcFF1ZXJpZXMgPSAnJztcbiAgICB0aGlzLmxvb3BzLmZvckVhY2gobG9vcCA9PiB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZUZpZWxkcyA9IHRoaXMuZ2V0VGVtcGxhdGVGaWVsZHMobG9vcC50ZW1wbGF0ZSk7XG4gICAgICBcbiAgICAgIC8vIEJ1aWxkIGZpZWxkIGxpc3QgZHluYW1pY2FsbHkgZnJvbSB0ZW1wbGF0ZVxuICAgICAgbGV0IGZpZWxkTGlzdCA9ICcnO1xuICAgICAgdGVtcGxhdGVGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgIGlmIChmaWVsZCA9PT0gJ2NhdGVnb3J5Jykge1xuICAgICAgICAgIC8vIEhhbmRsZSBuZXN0ZWQgY2F0ZWdvcnkgcmVsYXRpb25zaGlwXG4gICAgICAgICAgZmllbGRMaXN0ICs9ICcgICAgICBjYXRlZ29yeSB7XFxuICAgICAgICBuYW1lXFxuICAgICAgfVxcbic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmllbGRMaXN0ICs9IGAgICAgICAke2ZpZWxkfVxcbmA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBsb29wUXVlcmllcyArPSBgICAgICR7bG9vcC5hcnJheU5hbWV9KGxpbWl0OiAke2xvb3AubGltaXR9LCBvZmZzZXQ6ICR7dGhpcy5jdXJyZW50T2Zmc2V0fSwgb3JkZXJfYnk6IHtpZDogYXNjfSkge1xuJHtmaWVsZExpc3R9ICAgIH1cbmA7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SEIEdlbmVyYXRlZCBxdWVyeSBmb3IgJHtsb29wLmFycmF5TmFtZX0gd2l0aCBmaWVsZHM6YCwgdGVtcGxhdGVGaWVsZHMpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBgXG4gICAgICBxdWVyeSBTdGVuY2lsR2VuZXJhdGVkUXVlcnkge1xuJHtsb29wUXVlcmllc30ke3F1ZXJ5RmllbGRzfSAgICAgIH1cbiAgICBgO1xuXG4gICAgY29uc29sZS5sb2coXCLwn5OdIEdlbmVyYXRlZCBHcmFwaFFMIHF1ZXJ5OlwiLCBxdWVyeVN0cmluZyk7XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGdxbChxdWVyeVN0cmluZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgSW52YWxpZCBHcmFwaFFMIHF1ZXJ5IGdlbmVyYXRlZDpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgR3JhcGhRTCBxdWVyeSB1c2luZyBBcG9sbG8gQ2xpZW50XG4gICAqL1xuICBhc3luYyBleGVjdXRlUXVlcnkoXG4gICAgcXVlcnk6IERvY3VtZW50Tm9kZSxcbiAgICB1c2VDYWNoZTogYm9vbGVhbiA9IHRydWUsXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc29sZS5sb2coXCLwn5qAIEV4ZWN1dGluZyBHcmFwaFFMIHF1ZXJ5IHdpdGggQXBvbGxvIENsaWVudC4uLlwiKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNsaWVudC5xdWVyeSh7XG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBmZXRjaFBvbGljeTogdXNlQ2FjaGUgPyBcImNhY2hlLWZpcnN0XCIgOiBcIm5ldHdvcmstb25seVwiLFxuICAgICAgICBlcnJvclBvbGljeTogXCJhbGxcIixcbiAgICAgICAgLy8gQWRkIHF1ZXJ5IG1ldGFkYXRhIGZvciBEZXZUb29sc1xuICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgcXVlcnlOYW1lOiBcIlN0ZW5jaWxHZW5lcmF0ZWRRdWVyeVwiLFxuICAgICAgICAgIHNvdXJjZTogXCJzdGVuY2lsLWRvbS1iaW5kaW5nc1wiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwi8J+TiiBRdWVyeSByZXN1bHQ6XCIsIHJlc3VsdC5kYXRhKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIFF1ZXJ5IGV4ZWN1dGlvbiBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgRE9NIGVsZW1lbnRzIHdpdGggcXVlcnkgcmVzdWx0c1xuICAgKi9cbiAgdXBkYXRlRE9NKGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwi8J+OqCBVcGRhdGluZyBET00gd2l0aCBxdWVyeSByZXN1bHRzLi4uXCIpO1xuXG4gICAgLy8gVXBkYXRlIHJlZ3VsYXIgZmllbGQgYmluZGluZ3NcbiAgICB0aGlzLmZpZWxkcy5mb3JFYWNoKCh7IGVsZW1lbnQsIHBhdGggfSkgPT4ge1xuICAgICAgbGV0IHZhbHVlO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgc3BlY2lhbCBjYXNlcyBmb3IgcGFnaW5hdGlvblxuICAgICAgaWYgKHBhdGggPT09IFwiY3VycmVudF9wYWdlXCIpIHtcbiAgICAgICAgY29uc3QgcGFnZVNpemUgPSB0aGlzLmxvb3BzLmxlbmd0aCA+IDAgPyB0aGlzLmxvb3BzWzBdLmxpbWl0IDogNTtcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKHRoaXMuY3VycmVudE9mZnNldCAvIHBhZ2VTaXplKSArIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IHRoaXMuZ2V0TmVzdGVkVmFsdWUoZGF0YSwgcGF0aCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIC8vIEZvcm1hdCBkaWZmZXJlbnQgdHlwZXMgZm9yIGRpc3BsYXlcbiAgICAgICAgbGV0IGRpc3BsYXlWYWx1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IE51bWJlcih2YWx1ZSkudG9GaXhlZCgyKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgZGlzcGxheVZhbHVlID0gdmFsdWUgPyBcIlllc1wiIDogXCJOb1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBkaXNwbGF5VmFsdWU7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinKggVXBkYXRlZCAke3BhdGh9OiAke2Rpc3BsYXlWYWx1ZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPICBObyB2YWx1ZSBmb3VuZCBmb3IgcGF0aDogJHtwYXRofWApO1xuICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gXCJOL0FcIjtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBsb29wIGNvbnRhaW5lcnNcbiAgICB0aGlzLnVwZGF0ZUxvb3BDb250YWluZXJzKGRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBsb29wIGNvbnRhaW5lcnMgYnkgcmVwbGljYXRpbmcgdGVtcGxhdGVzXG4gICAqL1xuICB1cGRhdGVMb29wQ29udGFpbmVycyhkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZygn8J+OqCBVcGRhdGluZyBsb29wIGNvbnRhaW5lcnMgd2l0aCBkYXRhOicsIGRhdGEpO1xuICAgIFxuICAgIHRoaXMubG9vcHMuZm9yRWFjaChsb29wID0+IHtcbiAgICAgIGNvbnN0IGFycmF5RGF0YSA9IGRhdGFbbG9vcC5hcnJheU5hbWVdO1xuICAgICAgY29uc29sZS5sb2coYPCflIQgUHJvY2Vzc2luZyBsb29wICR7bG9vcC5hcnJheU5hbWV9OmAsIGFycmF5RGF0YSk7XG4gICAgICBcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnJheURhdGEpKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPICBObyBhcnJheSBkYXRhIGZvdW5kIGZvciBsb29wOiAke2xvb3AuYXJyYXlOYW1lfWAsIGRhdGEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChhcnJheURhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPICBFbXB0eSBhcnJheSBmb3IgbG9vcDogJHtsb29wLmFycmF5TmFtZX1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgcmVwbGljYXRlZCBpdGVtcyAoa2VlcCB0ZW1wbGF0ZSlcbiAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbXMgPSBsb29wLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZ3FsLXJlcGxpY2F0ZWRdJyk7XG4gICAgICBjb25zb2xlLmxvZyhg8J+nuSBDbGVhcmluZyAke2V4aXN0aW5nSXRlbXMubGVuZ3RofSBleGlzdGluZyByZXBsaWNhdGVkIGl0ZW1zYCk7XG4gICAgICBleGlzdGluZ0l0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLnJlbW92ZSgpKTtcblxuICAgICAgLy8gU2hvdyB0aGUgdGVtcGxhdGUgdGVtcG9yYXJpbHkgZm9yIGNsb25pbmdcbiAgICAgIChsb29wLnRlbXBsYXRlIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cbiAgICAgIC8vIFJlcGxpY2F0ZSB0ZW1wbGF0ZSBmb3IgZWFjaCBkYXRhIGl0ZW1cbiAgICAgIGFycmF5RGF0YS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+TiyBDcmVhdGluZyByZXBsaWNhICR7aW5kZXh9IHdpdGggZGF0YTpgLCBpdGVtKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlcGxpY2EgPSBsb29wLnRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKSBhcyBFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgLy8gTWFyayBhcyByZXBsaWNhdGVkIGFuZCByZW1vdmUgdGVtcGxhdGUgYXR0cmlidXRlXG4gICAgICAgIHJlcGxpY2Euc2V0QXR0cmlidXRlKCdkYXRhLWdxbC1yZXBsaWNhdGVkJywgJ3RydWUnKTtcbiAgICAgICAgcmVwbGljYS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZ3FsLXRlbXBsYXRlJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgZmllbGQgYmluZGluZ3Mgd2l0aGluIHRoaXMgcmVwbGljYVxuICAgICAgICBjb25zdCBmaWVsZEVsZW1lbnRzID0gcmVwbGljYS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1ncWwtZmllbGRdJyk7XG4gICAgICAgIGZpZWxkRWxlbWVudHMuZm9yRWFjaChmaWVsZEVsZW1lbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IGZpZWxkUGF0aCA9IGZpZWxkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZ3FsLWZpZWxkJyk7XG4gICAgICAgICAgaWYgKGZpZWxkUGF0aCkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gaXRlbVtmaWVsZFBhdGhdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYW5kbGUgc3BlY2lhbCBjYXNlIGZvciBjYXRlZ29yeSAobmVzdGVkIG9iamVjdClcbiAgICAgICAgICAgIGlmIChmaWVsZFBhdGggPT09ICdjYXRlZ29yeScgJiYgaXRlbS5jYXRlZ29yeSkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IGl0ZW0uY2F0ZWdvcnkubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbGV0IGRpc3BsYXlWYWx1ZTtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IE51bWJlcih2YWx1ZSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVZhbHVlID0gdmFsdWUgPyBcIlllc1wiIDogXCJOb1wiO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGZpZWxkRWxlbWVudC50ZXh0Q29udGVudCA9IGRpc3BsYXlWYWx1ZTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYCAg4pyoIFVwZGF0ZWQgJHtmaWVsZFBhdGh9OiAke2Rpc3BsYXlWYWx1ZX1gKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZpZWxkRWxlbWVudC50ZXh0Q29udGVudCA9IFwiTi9BXCI7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIOKaoO+4jyAgTm8gdmFsdWUgZm9yICR7ZmllbGRQYXRofWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSW5zZXJ0IGJlZm9yZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgbG9vcC5lbGVtZW50Lmluc2VydEJlZm9yZShyZXBsaWNhLCBsb29wLnRlbXBsYXRlKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBIaWRlIHRoZSBvcmlnaW5hbCB0ZW1wbGF0ZSBhZ2FpblxuICAgICAgKGxvb3AudGVtcGxhdGUgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFVwZGF0ZWQgbG9vcCBjb250YWluZXIgJHtsb29wLmFycmF5TmFtZX0gd2l0aCAke2FycmF5RGF0YS5sZW5ndGh9IGl0ZW1zYCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IG5lc3RlZCBvYmplY3QgdmFsdWUgZnJvbSBkb3Qgbm90YXRpb24gcGF0aFxuICAgKi9cbiAgcHJpdmF0ZSBnZXROZXN0ZWRWYWx1ZShvYmo6IGFueSwgcGF0aDogc3RyaW5nKTogYW55IHtcbiAgICAvLyBIYW5kbGUgd2lkZ2V0IGFycmF5IGFjY2VzcyAod2lkZ2V0cy4wLm5hbWUgLT4gd2lkZ2V0c1swXS5uYW1lKVxuICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoJ3dpZGdldHMuJykgJiYgL3dpZGdldHNcXC5cXGQrXFwuLy50ZXN0KHBhdGgpKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IHBhdGgubWF0Y2goL153aWRnZXRzXFwuKFxcZCspXFwuKC4rKSQvKTtcbiAgICAgIGlmIChtYXRjaCAmJiBvYmoud2lkZ2V0cyAmJiBBcnJheS5pc0FycmF5KG9iai53aWRnZXRzKSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgICAgY29uc3QgZmllbGQgPSBtYXRjaFsyXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIGNhdGVnb3J5IGZpZWxkIChpdCdzIGEgbmVzdGVkIG9iamVjdClcbiAgICAgICAgaWYgKGZpZWxkID09PSAnY2F0ZWdvcnknKSB7XG4gICAgICAgICAgcmV0dXJuIG9iai53aWRnZXRzW2luZGV4XT8uY2F0ZWdvcnk/Lm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBvYmoud2lkZ2V0c1tpbmRleF0/LltmaWVsZF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcGF0aC5zcGxpdChcIi5cIikucmVkdWNlKChjdXJyZW50LCBrZXkpID0+IGN1cnJlbnQ/LltrZXldLCBvYmopO1xuICB9XG5cbiAgLyoqXG4gICAqIE1haW4gZXhlY3V0aW9uIG1ldGhvZFxuICAgKi9cbiAgYXN5bmMgcnVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKFwi8J+OrCBTdGFydGluZyBTdGVuY2lsIEdyYXBoUUwgRE9NIGJpbmRpbmcgcHJvY2Vzcy4uLlwiKTtcblxuICAgIHRoaXMuc2NhbkRPTSgpO1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5idWlsZFF1ZXJ5KCk7XG5cbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5LCB0cnVlKTsgLy8gVXNlIEFwb2xsbyBjYWNoZVxuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICB0aGlzLnVwZGF0ZURPTShyZXN1bHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwi8J+OiSBTdGVuY2lsIEdyYXBoUUwgcHJvY2VzcyBjb21wbGV0ZSFcIik7XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaCBkYXRhIGFuZCB1cGRhdGUgRE9NIChmb3JjZXMgZnJlc2ggZGF0YSwgYnlwYXNzZXMgY2FjaGUpXG4gICAqL1xuICBhc3luYyByZWZyZXNoKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKFwi8J+UhCBSZWZyZXNoaW5nIEdyYXBoUUwgZGF0YS4uLlwiKTtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuYnVpbGRRdWVyeSgpO1xuXG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVRdWVyeShxdWVyeSwgZmFsc2UpOyAvLyBGb3JjZSBuZXR3b3JrXG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHRoaXMudXBkYXRlRE9NKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIEFwb2xsbyBjYWNoZVxuICAgKi9cbiAgY2xlYXJDYWNoZSgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIvCfl5HvuI8gIENsZWFyaW5nIEFwb2xsbyBjYWNoZS4uLlwiKTtcbiAgICB0aGlzLmNsaWVudC5jYWNoZS5yZXNldCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBBcG9sbG8gY2FjaGUgc3RhdGlzdGljc1xuICAgKi9cbiAgZ2V0Q2FjaGVTdGF0cygpOiBhbnkge1xuICAgIGNvbnN0IGNhY2hlRGF0YSA9IHRoaXMuY2xpZW50LmNhY2hlLmV4dHJhY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgY2FjaGVTaXplOiBjYWNoZURhdGEgPyBPYmplY3Qua2V5cyhjYWNoZURhdGEpLmxlbmd0aCA6IDAsXG4gICAgICBjYWNoZTogY2FjaGVEYXRhLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IEFwb2xsbyBDbGllbnQgaW5zdGFuY2UgZm9yIGFkdmFuY2VkIHVzYWdlXG4gICAqL1xuICBnZXRBcG9sbG9DbGllbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50O1xuICB9XG59XG5cbi8vIEluaXRpYWxpemUgYW5kIHJ1biB3aGVuIERPTSBpcyByZWFkeVxuY29uc3Qgc3RlbmNpbCA9IG5ldyBTdGVuY2lsR3JhcGhRTCgpO1xuXG4vLyBFeHBvc2Ugc3RlbmNpbCBnbG9iYWxseSBmb3IgdGVzdGluZ1xuKHdpbmRvdyBhcyBhbnkpLnN0ZW5jaWwgPSBzdGVuY2lsO1xuXG5pZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJsb2FkaW5nXCIpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwi8J+agCBET00gaXMgcmVhZHksIGluaXRpYWxpemluZyBTdGVuY2lsLi4uXCIpO1xuICAgIHN0ZW5jaWwucnVuKCk7XG4gIH0pO1xufSBlbHNlIHtcbiAgY29uc29sZS5sb2coXCLwn5qAIERPTSBhbHJlYWR5IHJlYWR5LCBpbml0aWFsaXppbmcgU3RlbmNpbC4uLlwiKTtcbiAgc3RlbmNpbC5ydW4oKTtcbn1cbiIKICBdLAogICJtYXBwaW5ncyI6ICJBQWdCQSxJQUFJLFdBQXdCLENBQUMsRUFBRyxFQUFHLENBSWpDLE9BSEEsR0FBZ0IsT0FBTyxnQkFDbEIsQ0FBRSxVQUFXLENBQUMsQ0FBRSxZQUFhLGVBQWtCLENBQUMsRUFBRyxFQUFHLENBQUUsRUFBRSxVQUFZLFlBQzlELENBQUMsRUFBRyxFQUFHLENBQUUsUUFBUyxLQUFLLEVBQUcsR0FBSSxPQUFPLFVBQVUsZUFBZSxLQUFLLEVBQUcsQ0FBQyxFQUFHLEVBQUUsR0FBSyxFQUFFLElBQ3pGLEdBQWMsRUFBRyxDQUFDLEdBR3BCLFNBQVMsQ0FBUyxDQUFDLEVBQUcsRUFBRyxDQUM5QixVQUFXLElBQU0sWUFBYyxJQUFNLEtBQ2pDLE1BQU0sSUFBSSxVQUFVLHVCQUF5QixPQUFPLENBQUMsRUFBSSwrQkFBK0IsRUFDNUYsR0FBYyxFQUFHLENBQUMsRUFDbEIsU0FBUyxDQUFFLEVBQUcsQ0FBRSxLQUFLLFlBQWMsRUFDbkMsRUFBRSxVQUFZLElBQU0sS0FBTyxPQUFPLE9BQU8sQ0FBQyxHQUFLLEVBQUcsVUFBWSxFQUFFLFVBQVcsSUFBSSxHQUcxRSxJQUFJLFVBQW1CLEVBQUcsQ0FRL0IsT0FQQSxFQUFXLE9BQU8saUJBQW1CLENBQVEsQ0FBQyxFQUFHLENBQzdDLFFBQVMsRUFBRyxFQUFJLEVBQUcsRUFBSSxVQUFVLE9BQVEsRUFBSSxFQUFHLElBQUssQ0FDakQsRUFBSSxVQUFVLEdBQ2QsUUFBUyxLQUFLLEVBQUcsR0FBSSxPQUFPLFVBQVUsZUFBZSxLQUFLLEVBQUcsQ0FBQyxFQUFHLEVBQUUsR0FBSyxFQUFFLEdBRTlFLE9BQU8sR0FFSixFQUFTLE1BQU0sS0FBTSxTQUFTLEdBR2hDLFNBQVMsQ0FBTSxDQUFDLEVBQUcsRUFBRyxDQUMzQixJQUFJLEVBQUksQ0FBQyxFQUNULFFBQVMsS0FBSyxFQUFHLEdBQUksT0FBTyxVQUFVLGVBQWUsS0FBSyxFQUFHLENBQUMsR0FBSyxFQUFFLFFBQVEsQ0FBQyxFQUFJLEVBQzlFLEVBQUUsR0FBSyxFQUFFLEdBQ2IsR0FBSSxHQUFLLGFBQWUsT0FBTyx3QkFBMEIsWUFDckQsUUFBUyxFQUFJLEVBQUcsRUFBSSxPQUFPLHNCQUFzQixDQUFDLEVBQUcsRUFBSSxFQUFFLE9BQVEsSUFDL0QsR0FBSSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUksR0FBSyxPQUFPLFVBQVUscUJBQXFCLEtBQUssRUFBRyxFQUFFLEVBQUUsRUFDekUsRUFBRSxFQUFFLElBQU0sRUFBRSxFQUFFLElBRTFCLE9BQU8sRUErREYsU0FBUyxFQUFTLENBQUMsRUFBUyxFQUFZLEVBQUcsRUFBVyxDQUMzRCxTQUFTLENBQUssQ0FBQyxFQUFPLENBQUUsT0FBTyxhQUFpQixFQUFJLEVBQVEsSUFBSSxVQUFXLENBQUMsRUFBUyxDQUFFLEVBQVEsQ0FBSyxFQUFJLEVBQ3hHLE9BQU8sSUFBSyxJQUFNLEVBQUksa0JBQW1CLENBQUMsRUFBUyxFQUFRLENBQ3ZELFNBQVMsQ0FBUyxDQUFDLEVBQU8sQ0FBRSxHQUFJLENBQUUsRUFBSyxFQUFVLEtBQUssQ0FBSyxDQUFDLFFBQVksRUFBUCxDQUFZLEVBQU8sQ0FBQyxHQUNyRixTQUFTLENBQVEsQ0FBQyxFQUFPLENBQUUsR0FBSSxDQUFFLEVBQUssRUFBVSxNQUFTLENBQUssQ0FBQyxRQUFZLEVBQVAsQ0FBWSxFQUFPLENBQUMsR0FDeEYsU0FBUyxDQUFJLENBQUMsRUFBUSxDQUFFLEVBQU8sS0FBTyxFQUFRLEVBQU8sS0FBSyxFQUFJLEVBQU0sRUFBTyxLQUFLLEVBQUUsS0FBSyxFQUFXLENBQVEsRUFDMUcsR0FBTSxFQUFZLEVBQVUsTUFBTSxFQUFTLEdBQWMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQ3ZFLEVBR0ksU0FBUyxFQUFXLENBQUMsRUFBUyxFQUFNLENBQ3pDLElBQUksRUFBSSxDQUFFLE1BQU8sRUFBRyxhQUFjLEVBQUcsQ0FBRSxHQUFJLEVBQUUsR0FBSyxFQUFHLE1BQU0sRUFBRSxHQUFJLE9BQU8sRUFBRSxJQUFPLEtBQU0sQ0FBQyxFQUFHLElBQUssQ0FBQyxDQUFFLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBSSxPQUFPLGVBQWUsV0FBYSxXQUFhLFNBQVcsUUFBUSxTQUFTLEVBQy9MLE9BQU8sRUFBRSxLQUFPLEVBQUssQ0FBQyxFQUFHLEVBQUUsTUFBVyxFQUFLLENBQUMsRUFBRyxFQUFFLE9BQVksRUFBSyxDQUFDLFNBQVUsU0FBVyxhQUFlLEVBQUUsT0FBTyxrQkFBb0IsRUFBRyxDQUFFLE9BQU8sT0FBVSxFQUMxSixTQUFTLENBQUksQ0FBQyxFQUFHLENBQUUsZUFBZ0IsQ0FBQyxFQUFHLENBQUUsT0FBTyxFQUFLLENBQUMsRUFBRyxDQUFDLENBQUMsR0FDM0QsU0FBUyxDQUFJLENBQUMsRUFBSSxDQUNkLEdBQUksRUFBRyxNQUFNLElBQUksVUFBVSxpQ0FBaUMsRUFDNUQsTUFBTyxJQUFNLEVBQUksRUFBRyxFQUFHLEtBQU8sRUFBSSxJQUFLLEVBQUcsR0FBSSxDQUMxQyxHQUFJLEVBQUksRUFBRyxJQUFNLEVBQUksRUFBRyxHQUFLLEVBQUksRUFBRSxPQUFZLEVBQUcsR0FBSyxFQUFFLFNBQWMsRUFBSSxFQUFFLFNBQWMsRUFBRSxLQUFLLENBQUMsRUFBRyxHQUFLLEVBQUUsU0FBVyxFQUFJLEVBQUUsS0FBSyxFQUFHLEVBQUcsRUFBRSxHQUFHLEtBQU0sT0FBTyxFQUMzSixHQUFJLEVBQUksRUFBRyxFQUFHLEVBQUssQ0FBQyxFQUFHLEdBQUssRUFBRyxFQUFFLEtBQUssRUFDdEMsT0FBUSxFQUFHLFFBQ0YsT0FBUSxHQUFHLEVBQUksRUFBSSxVQUNuQixHQUFjLE9BQVgsRUFBRSxRQUFnQixDQUFFLE1BQU8sRUFBRyxHQUFJLEtBQU0sRUFBTSxNQUNqRCxHQUFHLEVBQUUsUUFBUyxFQUFJLEVBQUcsR0FBSSxFQUFLLENBQUMsQ0FBQyxFQUFHLGFBQ25DLEdBQUcsRUFBSyxFQUFFLElBQUksSUFBSSxFQUFHLEVBQUUsS0FBSyxJQUFJLEVBQUcsaUJBRXBDLElBQU0sRUFBSSxFQUFFLE9BQU0sRUFBSSxFQUFFLE9BQVMsR0FBSyxFQUFFLEVBQUUsT0FBUyxPQUFRLEVBQUcsS0FBTyxHQUFLLEVBQUcsS0FBTyxHQUFJLENBQUUsRUFBSSxFQUFHLFNBQ2pHLEdBQUksRUFBRyxLQUFPLEtBQU8sR0FBTSxFQUFHLEdBQUssRUFBRSxJQUFNLEVBQUcsR0FBSyxFQUFFLElBQU0sQ0FBRSxFQUFFLE1BQVEsRUFBRyxHQUFJLE1BQzlFLEdBQUksRUFBRyxLQUFPLEdBQUssRUFBRSxNQUFRLEVBQUUsR0FBSSxDQUFFLEVBQUUsTUFBUSxFQUFFLEdBQUksRUFBSSxFQUFJLE1BQzdELEdBQUksR0FBSyxFQUFFLE1BQVEsRUFBRSxHQUFJLENBQUUsRUFBRSxNQUFRLEVBQUUsR0FBSSxFQUFFLElBQUksS0FBSyxDQUFFLEVBQUcsTUFDM0QsR0FBSSxFQUFFLEdBQUksRUFBRSxJQUFJLElBQUksRUFDcEIsRUFBRSxLQUFLLElBQUksRUFBRyxTQUV0QixFQUFLLEVBQUssS0FBSyxFQUFTLENBQUMsUUFDcEIsRUFBUCxDQUFZLEVBQUssQ0FBQyxFQUFHLENBQUMsRUFBRyxFQUFJLFNBQUssQ0FBVSxFQUFJLEVBQUksRUFDdEQsR0FBSSxFQUFHLEdBQUssRUFBRyxNQUFNLEVBQUcsR0FBSSxNQUFPLENBQUUsTUFBTyxFQUFHLEdBQUssRUFBRyxHQUFVLE9BQUcsS0FBTSxFQUFLLEdBaUU5RSxTQUFTLENBQWEsQ0FBQyxFQUFJLEVBQU0sRUFBTSxDQUM1QyxHQUFJLEdBQVEsVUFBVSxTQUFXLEdBQUcsUUFBUyxFQUFJLEVBQUcsRUFBSSxFQUFLLE9BQVEsRUFBSSxFQUFJLEVBQUcsSUFDNUUsR0FBSSxLQUFRLEtBQUssR0FBTyxDQUNwQixJQUFLLEVBQUksRUFBSyxNQUFNLFVBQVUsTUFBTSxLQUFLLEVBQU0sRUFBRyxDQUFDLEVBQ25ELEVBQUcsR0FBSyxFQUFLLElBR3JCLE9BQU8sRUFBRyxPQUFPLEdBQU0sTUFBTSxVQUFVLE1BQU0sS0FBSyxDQUFJLENBQUMsRUMzTnpELElBQUksR0FBaUIsc0JBQ2pCLEdBQUssT0FBTyxlQUFnQixHQUFpQixLQUFZLGVBQWEsQ0FBQyxFQUFLLEVBQU8sQ0FFbkYsT0FEQSxFQUFJLFVBQVksRUFDVCxHQUNQLEdBQ0EsV0FBeUMsQ0FBQyxFQUFRLENBQ2xELEVBQVUsRUFBZ0IsQ0FBTSxFQUNoQyxTQUFTLENBQWMsQ0FBQyxFQUFTLENBQzdCLEdBQUksSUFBaUIsT0FBSyxFQUFVLEdBQ3BDLElBQUksRUFBUSxFQUFPLEtBQUssWUFBYSxJQUFZLFNBQzNDLEdBQWlCLEtBQU8sRUFBVSw2REFDbEMsQ0FBTyxHQUFLLEtBSWxCLE9BSEEsRUFBTSxZQUFjLEVBQ3BCLEVBQU0sS0FBTyxHQUNiLEdBQWUsRUFBTyxFQUFlLFNBQVMsRUFDdkMsRUFFWCxPQUFPLEdBQ1QsS0FBSyxFQUVBLFNBQVMsRUFBUyxDQUFDLEVBQVcsRUFBUyxDQUMxQyxJQUFLLEVBQ0QsTUFBTSxJQUFJLEdBQWUsQ0FBTyxFQUd4QyxJQUFJLEdBQWtCLENBQUMsUUFBUyxNQUFPLE9BQVEsUUFBUyxRQUFRLEVBQzVELEdBQWlCLEdBQWdCLFFBQVEsS0FBSyxFQUNsRCxTQUFTLEVBQWlCLENBQUMsRUFBTSxDQUM3QixlQUFnQixFQUFHLENBQ2YsR0FBSSxHQUFnQixRQUFRLENBQUksR0FBSyxHQUFnQixDQUdqRCxJQUFJLEVBQVMsUUFBUSxJQUFTLFFBQVEsSUFDdEMsT0FBTyxFQUFPLE1BQU0sUUFBUyxTQUFTLElBSWxELFNBQVUsQ0FBQyxFQUFXLENBQ2xCLEVBQVUsTUFBUSxHQUFrQixPQUFPLEVBQzNDLEVBQVUsSUFBTSxHQUFrQixLQUFLLEVBQ3ZDLEVBQVUsS0FBTyxHQUFrQixNQUFNLEVBQ3pDLEVBQVUsTUFBUSxHQUFrQixPQUFPLElBQzVDLEtBQWMsR0FBWSxDQUFDLEVBQUUsRUFDekIsU0FBUyxFQUFZLENBQUMsRUFBTyxDQUNoQyxJQUFJLEVBQU0sR0FBZ0IsSUFFMUIsT0FEQSxHQUFpQixLQUFLLElBQUksRUFBRyxHQUFnQixRQUFRLENBQUssQ0FBQyxFQUNwRCxFQy9DSixJQUFJLEdBQVUsU0NBZCxTQUFTLENBQUssQ0FBQyxFQUFPLENBQ3pCLEdBQUksQ0FDQSxPQUFPLEVBQU0sUUFFVixFQUFQLEdDSEosSUFBZ0IsYUFBZSxFQUFHLENBQUUsT0FBTyxXQUFhLEdBQ3BELFVBQWUsRUFBRyxDQUFFLE9BQU8sT0FBUyxHQUNwQyxVQUFlLEVBQUcsQ0FBRSxPQUFPLEtBQU8sR0FDbEMsVUFBZSxFQUFHLENBQUUsT0FBTyxPQUFTLEdBTXhDLFVBQWUsRUFBRyxDQUNkLE9BQU8sRUFBTSxZQUFZLGFBQWEsRUFBRSxFQUMzQyxFQ1pELElBQUksR0FBZSxJQUFJLElBR2hCLFNBQVMsRUFBWSxDQUFDLEVBQVEsQ0FDakMsSUFBSSxFQUFRLEdBQWEsSUFBSSxDQUFNLEdBQUssRUFFeEMsT0FEQSxHQUFhLElBQUksRUFBUSxFQUFRLENBQUMsRUFDM0IsR0FBRyxPQUFPLEVBQVEsR0FBRyxFQUFFLE9BQU8sRUFBTyxHQUFHLEVBQUUsT0FBTyxLQUFLLE9BQU8sRUFBRSxTQUFTLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQ0x4RixTQUFTLEVBQW1CLENBQUMsRUFBTyxFQUFPLENBQzlDLEdBQUksSUFBZSxPQUFLLEVBQVEsRUFDaEMsSUFBSSxFQUFVLEdBQWEscUJBQXFCLEVBQ2hELE9BQU8sS0FBSyxVQUFVLFVBQWdCLENBQUMsRUFBSyxFQUFPLENBQy9DLE9BQU8sSUFBZSxPQUFJLEVBQVUsR0FDckMsQ0FBSyxFQUNILE1BQU0sS0FBSyxVQUFVLENBQU8sQ0FBQyxFQUM3QixLQUFLLGFBQWEsRUNKM0IsU0FBUyxFQUFJLENBQUMsRUFBSSxDQUNkLGVBQWdCLENBQUMsRUFBUyxDQUN0QixJQUFJLEVBQU8sQ0FBQyxFQUNaLFFBQVMsRUFBSyxFQUFHLEVBQUssVUFBVSxPQUFRLElBQ3BDLEVBQUssRUFBSyxHQUFLLFVBQVUsR0FFN0IsVUFBVyxJQUFZLFNBQVUsQ0FDN0IsSUFBSSxFQUFPLEVBRVgsR0FEQSxFQUFVLEdBQW1CLENBQUksR0FDNUIsRUFDRCxFQUFVLEdBQW9CLEVBQU0sQ0FBSSxFQUN4QyxFQUFPLENBQUMsRUFHaEIsRUFBRyxNQUFXLE9BQUcsQ0FBQyxDQUFPLEVBQUUsT0FBTyxDQUFJLENBQUMsR0FHL0MsSUFBSSxFQUFZLE9BQU8sZ0JBQWdCLENBQVMsQ0FBQyxFQUFXLEVBQVMsQ0FDakUsSUFBSSxFQUFPLENBQUMsRUFDWixRQUFTLEVBQUssRUFBRyxFQUFLLFVBQVUsT0FBUSxJQUNwQyxFQUFLLEVBQUssR0FBSyxVQUFVLEdBRTdCLElBQUssRUFDRCxHQUFrQixFQUFXLEdBQW1CLEVBQVMsQ0FBSSxHQUFLLEdBQW9CLEVBQVMsQ0FBSSxDQUFDLEdBRXpHLENBQ0MsTUFBTyxHQUFLLEdBQWtCLEtBQUssRUFDbkMsSUFBSyxHQUFLLEdBQWtCLEdBQUcsRUFDL0IsS0FBTSxHQUFLLEdBQWtCLElBQUksRUFDakMsTUFBTyxHQUFLLEdBQWtCLEtBQUssQ0FDdkMsQ0FBQyxFQVdELFNBQVMsQ0FBaUIsQ0FBQyxFQUFTLENBQ2hDLElBQUksRUFBaUIsQ0FBQyxFQUN0QixRQUFTLEVBQUssRUFBRyxFQUFLLFVBQVUsT0FBUSxJQUNwQyxFQUFlLEVBQUssR0FBSyxVQUFVLEdBRXZDLE9BQU8sSUFBSSxHQUFlLEdBQW1CLEVBQVMsQ0FBYyxHQUNoRSxHQUFvQixFQUFTLENBQWMsQ0FBQyxFQUVwRCxJQUFJLEdBQTRCLE9BQU8sSUFBSSw2QkFBK0IsRUFBTyxFQUNqRixTQUFTLEVBQVMsQ0FBQyxFQUFLLENBQ3BCLFVBQVcsR0FBTyxTQUNkLE9BQU8sRUFFWCxHQUFJLENBQ0EsT0FBTyxHQUFvQixFQUFLLENBQUMsRUFBRSxNQUFNLEVBQUcsSUFBSSxRQUU3QyxFQUFQLENBQ0ksTUFBTyxzQkFHZixTQUFTLEVBQWtCLENBQUMsRUFBUyxFQUFhLENBQzlDLEdBQUksSUFBcUIsT0FBSyxFQUFjLENBQUMsRUFDN0MsSUFBSyxFQUNELE9BQ0osT0FBUSxHQUFPLEtBQ1gsR0FBTyxJQUEyQixFQUFTLEVBQVksSUFBSSxFQUFTLENBQUMsRUFFN0UsU0FBUyxFQUFtQixDQUFDLEVBQVMsRUFBYSxDQUMvQyxHQUFJLElBQXFCLE9BQUssRUFBYyxDQUFDLEVBQzdDLElBQUssRUFDRCxPQUNKLE1BQU8sK0ZBQStGLE9BQU8sbUJBQW1CLEtBQUssVUFBVSxDQUMzSSxRQUFTLEdBQ1QsUUFBUyxFQUNULEtBQU0sRUFBWSxJQUFJLEVBQVMsQ0FDbkMsQ0FBQyxDQUFDLENBQUMsRUNyRUEsSUFBSSxHQUFNLFdBQVcsVUFBWSxHQ1hqQyxTQUFTLEVBQVMsQ0FBQyxFQUFXLEVBQVMsQ0FHNUMsSUFGeUIsUUFBUSxDQUFTLEVBR3hDLE1BQU0sSUFBSSxNQUFNLENBQU8sRUNBcEIsU0FBUyxFQUFZLENBQUMsRUFBTyxDQUNsQyxjQUFjLEdBQVMsVUFBWSxJQUFVLEtDTHhDLFNBQVMsRUFBUyxDQUFDLEVBQVcsRUFBUyxDQUc1QyxJQUZ5QixRQUFRLENBQVMsRUFHeEMsTUFBTSxJQUFJLE1BQ1IsR0FBVyxLQUFPLEVBQVUsaUNBQzlCLEVDTEosSUFBTSxHQUFhLGVBU1osU0FBUyxFQUFXLENBQUMsRUFBUSxFQUFVLENBQzVDLElBQUksRUFBZ0IsRUFDaEIsRUFBTyxFQUVYLFFBQVcsS0FBUyxFQUFPLEtBQUssU0FBUyxFQUFVLEVBQUcsQ0FHcEQsVUFGTyxFQUFNLFFBQVUsVUFBWSxHQUFVLEVBQUssRUFFOUMsRUFBTSxPQUFTLEVBQ2pCLE1BR0YsRUFBZ0IsRUFBTSxNQUFRLEVBQU0sR0FBRyxPQUN2QyxHQUFRLEVBR1YsTUFBTyxDQUNMLE9BQ0EsT0FBUSxFQUFXLEVBQUksQ0FDekIsRUN2QkssU0FBUyxFQUFhLENBQUMsRUFBVSxDQUN0QyxPQUFPLEdBQ0wsRUFBUyxPQUNULEdBQVksRUFBUyxPQUFRLEVBQVMsS0FBSyxDQUM3QyxFQU1LLFNBQVMsRUFBbUIsQ0FBQyxFQUFRLEVBQWdCLENBQzFELElBQU0sRUFBd0IsRUFBTyxlQUFlLE9BQVMsRUFDdkQsRUFBTyxHQUFHLFNBQVMsQ0FBcUIsRUFBSSxFQUFPLEtBQ25ELEVBQVksRUFBZSxLQUFPLEVBQ2xDLEVBQWEsRUFBTyxlQUFlLEtBQU8sRUFDMUMsRUFBVSxFQUFlLEtBQU8sRUFDaEMsRUFBZSxFQUFlLE9BQVMsRUFBSSxFQUF3QixFQUNuRSxFQUFZLEVBQWUsT0FBUyxFQUNwQyxFQUFjLEdBQUcsRUFBTyxRQUFRLEtBQVcsTUFDM0MsRUFBUSxFQUFLLE1BQU0sY0FBYyxFQUNqQyxFQUFlLEVBQU0sR0FFM0IsR0FBSSxFQUFhLE9BQVMsSUFBSyxDQUM3QixJQUFNLEVBQWUsS0FBSyxNQUFNLEVBQVksRUFBRSxFQUN4QyxFQUFtQixFQUFZLEdBQy9CLEVBQVcsQ0FBQyxFQUVsQixRQUFTLEVBQUksRUFBRyxFQUFJLEVBQWEsT0FBUSxHQUFLLEdBQzVDLEVBQVMsS0FBSyxFQUFhLE1BQU0sRUFBRyxFQUFJLEVBQUUsQ0FBQyxFQUc3QyxPQUNFLEVBQ0EsR0FBbUIsQ0FDakIsQ0FBQyxHQUFHLE1BQWEsRUFBUyxFQUFFLEVBQzVCLEdBQUcsRUFBUyxNQUFNLEVBQUcsRUFBZSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQVksQ0FBQyxJQUFLLENBQU8sQ0FBQyxFQUN0RSxDQUFDLElBQUssSUFBSSxTQUFTLENBQWdCLENBQUMsRUFDcEMsQ0FBQyxJQUFLLEVBQVMsRUFBZSxFQUFFLENBQ2xDLENBQUMsRUFJTCxPQUNFLEVBQ0EsR0FBbUIsQ0FFakIsQ0FBQyxHQUFHLEVBQVUsTUFBTyxFQUFNLEVBQVksRUFBRSxFQUN6QyxDQUFDLEdBQUcsTUFBYSxDQUFZLEVBQzdCLENBQUMsSUFBSyxJQUFJLFNBQVMsQ0FBUyxDQUFDLEVBQzdCLENBQUMsR0FBRyxFQUFVLE1BQU8sRUFBTSxFQUFZLEVBQUUsQ0FDM0MsQ0FBQyxFQUlMLFNBQVMsRUFBa0IsQ0FBQyxFQUFPLENBQ2pDLElBQU0sRUFBZ0IsRUFBTSxPQUFPLEVBQUUsRUFBRyxLQUFVLElBQVMsTUFBUyxFQUM5RCxFQUFTLEtBQUssSUFBSSxHQUFHLEVBQWMsSUFBSSxFQUFFLEtBQVksRUFBTyxNQUFNLENBQUMsRUFDekUsT0FBTyxFQUNKLElBQUksRUFBRSxFQUFRLEtBQVUsRUFBTyxTQUFTLENBQU0sR0FBSyxFQUFPLElBQU0sRUFBTyxHQUFHLEVBQzFFLEtBQUssSUFBSSxFQ3pEZCxTQUFTLEVBQW1CLENBQUMsRUFBTSxDQUNqQyxJQUFNLEVBQVcsRUFBSyxHQUV0QixHQUFJLEdBQVksTUFBUSxTQUFVLEdBQVksV0FBWSxFQUN4RCxNQUFPLENBQ0wsTUFBTyxFQUNQLE9BQVEsRUFBSyxHQUNiLFVBQVcsRUFBSyxHQUNoQixLQUFNLEVBQUssR0FDWCxjQUFlLEVBQUssR0FDcEIsV0FBWSxFQUFLLEVBQ25CLEVBR0YsT0FBTyxFQVNGLE1BQU0sV0FBcUIsS0FBTSxDQThDdEMsV0FBVyxDQUFDLEtBQVksRUFBUyxDQUMvQixJQUFJLEVBQWEsRUFBaUIsRUFFbEMsSUFBUSxRQUFPLFNBQVEsWUFBVyxPQUFNLGdCQUFlLGNBQ3JELEdBQW9CLENBQU8sRUFDN0IsTUFBTSxDQUFPLEVBQ2IsS0FBSyxLQUFPLGVBQ1osS0FBSyxLQUFPLElBQVMsTUFBUSxJQUFjLE9BQUksRUFBTyxPQUN0RCxLQUFLLGNBQ0gsSUFBa0IsTUFBUSxJQUF1QixPQUM3QyxFQUNBLE9BRU4sS0FBSyxNQUFRLEdBQ1gsTUFBTSxRQUFRLENBQUssRUFBSSxFQUFRLEVBQVEsQ0FBQyxDQUFLLEVBQUksTUFDbkQsRUFDQSxJQUFNLEVBQWdCLElBQ25CLEVBQWMsS0FBSyxTQUFXLE1BQVEsSUFBcUIsT0FDbkQsT0FDTCxFQUFZLElBQUksQ0FBQyxJQUFTLEVBQUssR0FBRyxFQUFFLE9BQU8sQ0FBQyxJQUFRLEdBQU8sSUFBSSxDQUNyRSxFQUVBLEtBQUssT0FDSCxJQUFXLE1BQVEsSUFBZ0IsT0FDL0IsRUFDQSxJQUFrQixNQUFRLElBQXVCLE9BQzVDLFFBQ0osRUFBa0IsRUFBYyxNQUFRLE1BQ3pDLElBQXlCLE9BQ3BCLE9BQ0wsRUFBZ0IsT0FDdEIsS0FBSyxVQUNILElBQWMsTUFBUSxJQUFtQixPQUNyQyxFQUNBLElBQWtCLE1BQVEsSUFBdUIsT0FDNUMsT0FDTCxFQUFjLElBQUksQ0FBQyxJQUFRLEVBQUksS0FBSyxFQUMxQyxLQUFLLFVBQ0gsR0FBYSxFQUNULEVBQVUsSUFBSSxDQUFDLElBQVEsR0FBWSxFQUFRLENBQUcsQ0FBQyxFQUMvQyxJQUFrQixNQUFRLElBQXVCLE9BQzVDLE9BQ0wsRUFBYyxJQUFJLENBQUMsSUFBUSxHQUFZLEVBQUksT0FBUSxFQUFJLEtBQUssQ0FBQyxFQUNuRSxJQUFNLEVBQXFCLEdBQ3pCLElBQWtCLE1BQVEsSUFBdUIsT0FDeEMsT0FDTCxFQUFjLFVBQ3BCLEVBQ0ksSUFBa0IsTUFBUSxJQUF1QixPQUMxQyxPQUNMLEVBQWMsV0FDaEIsT0FtQ0osR0FsQ0EsS0FBSyxZQUNGLEVBQ0MsSUFBZSxNQUFRLElBQW9CLE9BQ3ZDLEVBQ0EsS0FBd0IsTUFBUSxJQUFjLE9BQ2hELEVBQ0EsT0FBTyxPQUFPLElBQUksRUFHeEIsT0FBTyxpQkFBaUIsS0FBTSxDQUM1QixRQUFTLENBQ1AsU0FBVSxHQUNWLFdBQVksRUFDZCxFQUNBLEtBQU0sQ0FDSixXQUFZLEVBQ2QsRUFDQSxNQUFPLENBQ0wsV0FBWSxFQUNkLEVBQ0EsT0FBUSxDQUNOLFdBQVksRUFDZCxFQUNBLFVBQVcsQ0FDVCxXQUFZLEVBQ2QsRUFDQSxjQUFlLENBQ2IsV0FBWSxFQUNkLENBQ0YsQ0FBQyxFQU1DLElBQWtCLE1BQ2xCLElBQXVCLFFBQ3ZCLEVBQWMsTUFFZCxPQUFPLGVBQWUsS0FBTSxRQUFTLENBQ25DLE1BQU8sRUFBYyxNQUNyQixTQUFVLEdBQ1YsYUFBYyxFQUNoQixDQUFDLFVBQ1EsTUFBTSxrQkFDZixNQUFNLGtCQUFrQixLQUFNLEVBQVksTUFFMUMsUUFBTyxlQUFlLEtBQU0sUUFBUyxDQUNuQyxNQUFPLE1BQU0sRUFBRSxNQUNmLFNBQVUsR0FDVixhQUFjLEVBQ2hCLENBQUMsTUFLQSxPQUFPLFlBQVksRUFBRyxDQUN6QixNQUFPLGVBR1QsUUFBUSxFQUFHLENBQ1QsSUFBSSxFQUFTLEtBQUssUUFFbEIsR0FBSSxLQUFLLE9BQ1AsUUFBVyxLQUFRLEtBQUssTUFDdEIsR0FBSSxFQUFLLElBQ1AsR0FBVSxPQUFTLEdBQWMsRUFBSyxHQUFHLFVBR3BDLEtBQUssUUFBVSxLQUFLLFVBQzdCLFFBQVcsS0FBWSxLQUFLLFVBQzFCLEdBQVUsT0FBUyxHQUFvQixLQUFLLE9BQVEsQ0FBUSxFQUloRSxPQUFPLEVBR1QsTUFBTSxFQUFHLENBQ1AsSUFBTSxFQUFpQixDQUNyQixRQUFTLEtBQUssT0FDaEIsRUFFQSxHQUFJLEtBQUssV0FBYSxLQUNwQixFQUFlLFVBQVksS0FBSyxVQUdsQyxHQUFJLEtBQUssTUFBUSxLQUNmLEVBQWUsS0FBTyxLQUFLLEtBRzdCLEdBQUksS0FBSyxZQUFjLE1BQVEsT0FBTyxLQUFLLEtBQUssVUFBVSxFQUFFLE9BQVMsRUFDbkUsRUFBZSxXQUFhLEtBQUssV0FHbkMsT0FBTyxFQUVYLENBRUEsU0FBUyxFQUFnQixDQUFDLEVBQU8sQ0FDL0IsT0FBTyxJQUFVLFFBQWEsRUFBTSxTQUFXLEVBQUksT0FBWSxFQzlOMUQsU0FBUyxDQUFXLENBQUMsRUFBUSxFQUFVLEVBQWEsQ0FDekQsT0FBTyxJQUFJLEdBQWEsaUJBQWlCLElBQWUsQ0FDdEQsU0FDQSxVQUFXLENBQUMsQ0FBUSxDQUN0QixDQUFDLEVDTkksTUFBTSxFQUFTLENBb0JwQixXQUFXLENBQUMsRUFBWSxFQUFVLEVBQVEsQ0FDeEMsS0FBSyxNQUFRLEVBQVcsTUFDeEIsS0FBSyxJQUFNLEVBQVMsSUFDcEIsS0FBSyxXQUFhLEVBQ2xCLEtBQUssU0FBVyxFQUNoQixLQUFLLE9BQVMsTUFHWCxPQUFPLFlBQVksRUFBRyxDQUN6QixNQUFPLFdBR1QsTUFBTSxFQUFHLENBQ1AsTUFBTyxDQUNMLE1BQU8sS0FBSyxNQUNaLElBQUssS0FBSyxHQUNaLEVBRUosQ0FNTyxNQUFNLEVBQU0sQ0FpQ2pCLFdBQVcsQ0FBQyxFQUFNLEVBQU8sRUFBSyxFQUFNLEVBQVEsRUFBTyxDQUNqRCxLQUFLLEtBQU8sRUFDWixLQUFLLE1BQVEsRUFDYixLQUFLLElBQU0sRUFDWCxLQUFLLEtBQU8sRUFDWixLQUFLLE9BQVMsRUFFZCxLQUFLLE1BQVEsRUFDYixLQUFLLEtBQU8sS0FDWixLQUFLLEtBQU8sU0FHVCxPQUFPLFlBQVksRUFBRyxDQUN6QixNQUFPLFFBR1QsTUFBTSxFQUFHLENBQ1AsTUFBTyxDQUNMLEtBQU0sS0FBSyxLQUNYLE1BQU8sS0FBSyxNQUNaLEtBQU0sS0FBSyxLQUNYLE9BQVEsS0FBSyxNQUNmLEVBRUosQ0FRTyxJQUFNLEdBQW9CLENBQy9CLEtBQU0sQ0FBQyxFQUNQLFNBQVUsQ0FBQyxhQUFhLEVBQ3hCLG9CQUFxQixDQUNuQixPQUNBLHNCQUNBLGFBQ0EsY0FDRixFQUNBLG1CQUFvQixDQUFDLFdBQVksT0FBUSxlQUFnQixZQUFZLEVBQ3JFLFNBQVUsQ0FBQyxNQUFNLEVBQ2pCLGFBQWMsQ0FBQyxZQUFZLEVBQzNCLE1BQU8sQ0FBQyxRQUFTLE9BQVEsWUFBYSxhQUFjLGNBQWMsRUFDbEUsU0FBVSxDQUFDLE9BQVEsT0FBTyxFQUMxQixlQUFnQixDQUFDLE9BQVEsWUFBWSxFQUNyQyxlQUFnQixDQUFDLGdCQUFpQixhQUFjLGNBQWMsRUFDOUQsbUJBQW9CLENBQ2xCLE9BQ0Esc0JBQ0EsZ0JBQ0EsYUFDQSxjQUNGLEVBQ0EsU0FBVSxDQUFDLEVBQ1gsV0FBWSxDQUFDLEVBQ2IsWUFBYSxDQUFDLEVBQ2QsYUFBYyxDQUFDLEVBQ2YsVUFBVyxDQUFDLEVBQ1osVUFBVyxDQUFDLEVBQ1osVUFBVyxDQUFDLFFBQVEsRUFDcEIsWUFBYSxDQUFDLFFBQVEsRUFDdEIsWUFBYSxDQUFDLE9BQVEsT0FBTyxFQUM3QixVQUFXLENBQUMsT0FBUSxXQUFXLEVBQy9CLFVBQVcsQ0FBQyxNQUFNLEVBQ2xCLFNBQVUsQ0FBQyxNQUFNLEVBQ2pCLFlBQWEsQ0FBQyxNQUFNLEVBQ3BCLGlCQUFrQixDQUFDLGNBQWUsYUFBYyxnQkFBZ0IsRUFDaEUsd0JBQXlCLENBQUMsTUFBTSxFQUNoQyxxQkFBc0IsQ0FBQyxjQUFlLE9BQVEsWUFBWSxFQUMxRCxxQkFBc0IsQ0FDcEIsY0FDQSxPQUNBLGFBQ0EsYUFDQSxRQUNGLEVBQ0EsZ0JBQWlCLENBQUMsY0FBZSxPQUFRLFlBQWEsT0FBUSxZQUFZLEVBQzFFLHFCQUFzQixDQUNwQixjQUNBLE9BQ0EsT0FDQSxlQUNBLFlBQ0YsRUFDQSx3QkFBeUIsQ0FDdkIsY0FDQSxPQUNBLGFBQ0EsYUFDQSxRQUNGLEVBQ0Esb0JBQXFCLENBQUMsY0FBZSxPQUFRLGFBQWMsT0FBTyxFQUNsRSxtQkFBb0IsQ0FBQyxjQUFlLE9BQVEsYUFBYyxRQUFRLEVBQ2xFLG9CQUFxQixDQUFDLGNBQWUsT0FBUSxZQUFZLEVBQ3pELDBCQUEyQixDQUFDLGNBQWUsT0FBUSxhQUFjLFFBQVEsRUFDekUsb0JBQXFCLENBQUMsY0FBZSxPQUFRLFlBQWEsV0FBVyxFQUNyRSxnQkFBaUIsQ0FBQyxhQUFjLGdCQUFnQixFQUNoRCxvQkFBcUIsQ0FBQyxPQUFRLFlBQVksRUFDMUMsb0JBQXFCLENBQUMsT0FBUSxhQUFjLGFBQWMsUUFBUSxFQUNsRSx1QkFBd0IsQ0FBQyxPQUFRLGFBQWMsYUFBYyxRQUFRLEVBQ3JFLG1CQUFvQixDQUFDLE9BQVEsYUFBYyxPQUFPLEVBQ2xELGtCQUFtQixDQUFDLE9BQVEsYUFBYyxRQUFRLEVBQ2xELHlCQUEwQixDQUFDLE9BQVEsYUFBYyxRQUFRLENBQzNELEVBQ00sR0FBYSxJQUFJLElBQUksT0FBTyxLQUFLLEVBQWlCLENBQUMsRUFLbEQsU0FBUyxFQUFNLENBQUMsRUFBVyxDQUNoQyxJQUFNLEVBQ0osSUFBYyxNQUFRLElBQW1CLE9BQVMsT0FBSSxFQUFVLEtBQ2xFLGNBQWMsSUFBYyxVQUFZLEdBQVcsSUFBSSxDQUFTLEVBSWxFLElBQUksR0FFSixTQUFVLENBQUMsRUFBbUIsQ0FDNUIsRUFBa0IsTUFBVyxRQUM3QixFQUFrQixTQUFjLFdBQ2hDLEVBQWtCLGFBQWtCLGlCQUNuQyxLQUFzQixHQUFvQixDQUFDLEVBQUUsRUMxTWhELElBQUksR0FFSixTQUFVLENBQUMsRUFBbUIsQ0FDNUIsRUFBa0IsTUFBVyxRQUM3QixFQUFrQixTQUFjLFdBQ2hDLEVBQWtCLGFBQWtCLGVBQ3BDLEVBQWtCLE1BQVcsUUFDN0IsRUFBa0Isb0JBQXlCLHNCQUMzQyxFQUFrQixnQkFBcUIsa0JBQ3ZDLEVBQWtCLGdCQUFxQixrQkFDdkMsRUFBa0Isb0JBQXlCLHNCQUMzQyxFQUFrQixPQUFZLFNBQzlCLEVBQWtCLE9BQVksU0FDOUIsRUFBa0IsT0FBWSxTQUM5QixFQUFrQixpQkFBc0IsbUJBQ3hDLEVBQWtCLG9CQUF5QixzQkFDM0MsRUFBa0IsVUFBZSxZQUNqQyxFQUFrQixNQUFXLFFBQzdCLEVBQWtCLEtBQVUsT0FDNUIsRUFBa0IsV0FBZ0IsYUFDbEMsRUFBa0IsYUFBa0IsZUFDcEMsRUFBa0IsdUJBQTRCLDJCQUM3QyxLQUFzQixHQUFvQixDQUFDLEVBQUUsRUN0QmhELElBQUksRUFFSixTQUFVLENBQUMsRUFBTSxDQUNmLEVBQUssS0FBVSxPQUNmLEVBQUssU0FBYyxXQUNuQixFQUFLLHFCQUEwQixzQkFDL0IsRUFBSyxvQkFBeUIscUJBQzlCLEVBQUssY0FBbUIsZUFDeEIsRUFBSyxNQUFXLFFBQ2hCLEVBQUssU0FBYyxXQUNuQixFQUFLLGdCQUFxQixpQkFDMUIsRUFBSyxnQkFBcUIsaUJBQzFCLEVBQUssb0JBQXlCLHFCQUM5QixFQUFLLFNBQWMsV0FDbkIsRUFBSyxJQUFTLFdBQ2QsRUFBSyxNQUFXLGFBQ2hCLEVBQUssT0FBWSxjQUNqQixFQUFLLFFBQWEsZUFDbEIsRUFBSyxLQUFVLFlBQ2YsRUFBSyxLQUFVLFlBQ2YsRUFBSyxLQUFVLFlBQ2YsRUFBSyxPQUFZLGNBQ2pCLEVBQUssYUFBa0IsY0FDdkIsRUFBSyxVQUFlLFlBQ3BCLEVBQUssV0FBZ0IsWUFDckIsRUFBSyxVQUFlLFdBQ3BCLEVBQUssY0FBbUIsY0FDeEIsRUFBSyxrQkFBdUIsbUJBQzVCLEVBQUssMEJBQStCLDBCQUNwQyxFQUFLLHVCQUE0Qix1QkFDakMsRUFBSyx1QkFBNEIsdUJBQ2pDLEVBQUssaUJBQXNCLGtCQUMzQixFQUFLLHVCQUE0Qix1QkFDakMsRUFBSywwQkFBK0IsMEJBQ3BDLEVBQUssc0JBQTJCLHNCQUNoQyxFQUFLLHFCQUEwQixxQkFDL0IsRUFBSyxzQkFBMkIsc0JBQ2hDLEVBQUssNkJBQWtDLDRCQUN2QyxFQUFLLHFCQUEwQixzQkFDL0IsRUFBSyxpQkFBc0Isa0JBQzNCLEVBQUssc0JBQTJCLHNCQUNoQyxFQUFLLHNCQUEyQixzQkFDaEMsRUFBSyx5QkFBOEIseUJBQ25DLEVBQUsscUJBQTBCLHFCQUMvQixFQUFLLG9CQUF5QixvQkFDOUIsRUFBSyw0QkFBaUMsNkJBQ3JDLElBQVMsRUFBTyxDQUFDLEVBQUUsRUN6Q2YsU0FBUyxFQUFZLENBQUMsRUFBTSxDQUNqQyxPQUFPLElBQVMsR0FBVSxJQUFTLEdBVTlCLFNBQVMsRUFBTyxDQUFDLEVBQU0sQ0FDNUIsT0FBTyxHQUFRLElBQVUsR0FBUSxHQWE1QixTQUFTLEVBQVEsQ0FBQyxFQUFNLENBQzdCLE9BQ0csR0FBUSxJQUFVLEdBQVEsS0FDMUIsR0FBUSxJQUFVLEdBQVEsR0FZeEIsU0FBUyxFQUFXLENBQUMsRUFBTSxDQUNoQyxPQUFPLEdBQVMsQ0FBSSxHQUFLLElBQVMsR0FZN0IsU0FBUyxFQUFjLENBQUMsRUFBTSxDQUNuQyxPQUFPLEdBQVMsQ0FBSSxHQUFLLEdBQVEsQ0FBSSxHQUFLLElBQVMsR0NwRDlDLFNBQVMsRUFBc0IsQ0FBQyxFQUFPLENBQzVDLElBQUksRUFFSixJQUFJLEVBQWUsT0FBTyxpQkFDdEIsRUFBb0IsS0FDcEIsRUFBbUIsR0FFdkIsUUFBUyxFQUFJLEVBQUcsRUFBSSxFQUFNLFNBQVUsRUFBRyxDQUNyQyxJQUFJLEVBRUosSUFBTSxFQUFPLEVBQU0sR0FDYixFQUFTLEdBQWtCLENBQUksRUFFckMsR0FBSSxJQUFXLEVBQUssT0FDbEIsU0FVRixHQVBBLEdBQ0csRUFBcUIsS0FBdUIsTUFDN0MsSUFBNEIsT0FDeEIsRUFDQSxFQUNOLEVBQW1CLEVBRWYsSUFBTSxHQUFLLEVBQVMsRUFDdEIsRUFBZSxFQUluQixPQUFPLEVBQ0osSUFBSSxDQUFDLEVBQU0sSUFBTyxJQUFNLEVBQUksRUFBTyxFQUFLLE1BQU0sQ0FBWSxDQUFFLEVBQzVELE9BQ0UsRUFBc0IsS0FBdUIsTUFDNUMsSUFBNkIsT0FDM0IsRUFDQSxFQUNKLEVBQW1CLENBQ3JCLEVBR0osU0FBUyxFQUFpQixDQUFDLEVBQUssQ0FDOUIsSUFBSSxFQUFJLEVBRVIsTUFBTyxFQUFJLEVBQUksUUFBVSxHQUFhLEVBQUksV0FBVyxDQUFDLENBQUMsRUFDckQsRUFBRSxFQUdKLE9BQU8sRUFpRkYsU0FBUyxFQUFnQixDQUFDLEVBQU8sRUFBUyxDQUMvQyxJQUFNLEVBQWUsRUFBTSxRQUFRLE9BQVEsT0FBTyxFQUU1QyxFQUFRLEVBQWEsTUFBTSxjQUFjLEVBQ3pDLEVBQWUsRUFBTSxTQUFXLEVBRWhDLEVBQ0osRUFBTSxPQUFTLEdBQ2YsRUFDRyxNQUFNLENBQUMsRUFDUCxNQUFNLENBQUMsSUFBUyxFQUFLLFNBQVcsR0FBSyxHQUFhLEVBQUssV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUVwRSxFQUEwQixFQUFhLFNBQVMsT0FBTyxFQUV2RCxFQUFtQixFQUFNLFNBQVMsR0FBRyxJQUFNLEVBQzNDLEVBQW1CLEVBQU0sU0FBUyxJQUFJLEVBQ3RDLEVBQXVCLEdBQW9CLEVBQzNDLElBQ0YsSUFBWSxNQUFRLElBQWlCLFFBQUssRUFBUSxhQUNsRCxHQUNBLEVBQU0sT0FBUyxJQUNmLEdBQ0EsR0FDQSxHQUNBLEVBQVMsR0FFUCxFQUFxQixHQUFnQixHQUFhLEVBQU0sV0FBVyxDQUFDLENBQUMsRUFFM0UsR0FBSyxJQUF5QixHQUF1QixFQUNuRCxHQUFVLEtBS1osR0FGQSxHQUFVLEVBRU4sR0FBd0IsRUFDMUIsR0FBVSxLQUdaLE1BQU8sTUFBUSxFQUFTLE1DNUsxQixJQUFJLEVBRUosU0FBVSxDQUFDLEVBQVcsQ0FDcEIsRUFBVSxJQUFTLFFBQ25CLEVBQVUsSUFBUyxRQUNuQixFQUFVLEtBQVUsSUFDcEIsRUFBVSxPQUFZLElBQ3RCLEVBQVUsSUFBUyxJQUNuQixFQUFVLFFBQWEsSUFDdkIsRUFBVSxRQUFhLElBQ3ZCLEVBQVUsT0FBWSxNQUN0QixFQUFVLE1BQVcsSUFDckIsRUFBVSxPQUFZLElBQ3RCLEVBQVUsR0FBUSxJQUNsQixFQUFVLFVBQWUsSUFDekIsRUFBVSxVQUFlLElBQ3pCLEVBQVUsUUFBYSxJQUN2QixFQUFVLEtBQVUsSUFDcEIsRUFBVSxRQUFhLElBQ3ZCLEVBQVUsS0FBVSxPQUNwQixFQUFVLElBQVMsTUFDbkIsRUFBVSxNQUFXLFFBQ3JCLEVBQVUsT0FBWSxTQUN0QixFQUFVLGFBQWtCLGNBQzVCLEVBQVUsUUFBYSxZQUN0QixJQUFjLEVBQVksQ0FBQyxFQUFFLEVDZnpCLE1BQU0sRUFBTSxDQWdCakIsV0FBVyxDQUFDLEVBQVEsQ0FDbEIsSUFBTSxFQUFtQixJQUFJLEdBQU0sRUFBVSxJQUFLLEVBQUcsRUFBRyxFQUFHLENBQUMsRUFDNUQsS0FBSyxPQUFTLEVBQ2QsS0FBSyxVQUFZLEVBQ2pCLEtBQUssTUFBUSxFQUNiLEtBQUssS0FBTyxFQUNaLEtBQUssVUFBWSxNQUdkLE9BQU8sWUFBWSxFQUFHLENBQ3pCLE1BQU8sUUFNVCxPQUFPLEVBQUcsQ0FHUixPQUZBLEtBQUssVUFBWSxLQUFLLE1BQ1AsS0FBSyxNQUFRLEtBQUssVUFBVSxFQVE3QyxTQUFTLEVBQUcsQ0FDVixJQUFJLEVBQVEsS0FBSyxNQUVqQixHQUFJLEVBQU0sT0FBUyxFQUFVLElBQzNCLEVBQ0UsSUFBSSxFQUFNLEtBQ1IsRUFBUSxFQUFNLFNBQ1QsQ0FFTCxJQUFNLEVBQVksR0FBYyxLQUFNLEVBQU0sR0FBRyxFQUUvQyxFQUFNLEtBQU8sRUFFYixFQUFVLEtBQU8sRUFDakIsRUFBUSxRQUVILEVBQU0sT0FBUyxFQUFVLFNBR3BDLE9BQU8sRUFFWCxDQUtPLFNBQVMsRUFBcUIsQ0FBQyxFQUFNLENBQzFDLE9BQ0UsSUFBUyxFQUFVLE1BQ25CLElBQVMsRUFBVSxRQUNuQixJQUFTLEVBQVUsS0FDbkIsSUFBUyxFQUFVLFNBQ25CLElBQVMsRUFBVSxTQUNuQixJQUFTLEVBQVUsUUFDbkIsSUFBUyxFQUFVLE9BQ25CLElBQVMsRUFBVSxRQUNuQixJQUFTLEVBQVUsSUFDbkIsSUFBUyxFQUFVLFdBQ25CLElBQVMsRUFBVSxXQUNuQixJQUFTLEVBQVUsU0FDbkIsSUFBUyxFQUFVLE1BQ25CLElBQVMsRUFBVSxRQVl2QixTQUFTLEVBQW9CLENBQUMsRUFBTSxDQUNsQyxPQUNHLEdBQVEsR0FBVSxHQUFRLE9BQVksR0FBUSxPQUFVLEdBQVEsUUFZckUsU0FBUyxFQUF3QixDQUFDLEVBQU0sRUFBVSxDQUNoRCxPQUNFLEdBQW1CLEVBQUssV0FBVyxDQUFRLENBQUMsR0FDNUMsR0FBb0IsRUFBSyxXQUFXLEVBQVcsQ0FBQyxDQUFDLEVBSXJELFNBQVMsRUFBa0IsQ0FBQyxFQUFNLENBQ2hDLE9BQU8sR0FBUSxPQUFVLEdBQVEsTUFHbkMsU0FBUyxFQUFtQixDQUFDLEVBQU0sQ0FDakMsT0FBTyxHQUFRLE9BQVUsR0FBUSxNQVVuQyxTQUFTLEVBQWdCLENBQUMsRUFBTyxFQUFVLENBQ3pDLElBQU0sRUFBTyxFQUFNLE9BQU8sS0FBSyxZQUFZLENBQVEsRUFFbkQsR0FBSSxJQUFTLE9BQ1gsT0FBTyxFQUFVLFlBQ1IsR0FBUSxJQUFVLEdBQVEsSUFBUSxDQUUzQyxJQUFNLEVBQU8sT0FBTyxjQUFjLENBQUksRUFDdEMsT0FBTyxJQUFTLElBQU0sT0FBUyxJQUFJLEtBR3JDLE1BQU8sS0FBTyxFQUFLLFNBQVMsRUFBRSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUcsR0FBRyxFQU0vRCxTQUFTLENBQVcsQ0FBQyxFQUFPLEVBQU0sRUFBTyxFQUFLLEVBQU8sQ0FDbkQsSUFBTSxFQUFPLEVBQU0sS0FDYixFQUFNLEVBQUksRUFBUSxFQUFNLFVBQzlCLE9BQU8sSUFBSSxHQUFNLEVBQU0sRUFBTyxFQUFLLEVBQU0sRUFBSyxDQUFLLEVBVXJELFNBQVMsRUFBYSxDQUFDLEVBQU8sRUFBTyxDQUNuQyxJQUFNLEVBQU8sRUFBTSxPQUFPLEtBQ3BCLEVBQWEsRUFBSyxPQUNwQixFQUFXLEVBRWYsTUFBTyxFQUFXLEVBQVksQ0FDNUIsSUFBTSxFQUFPLEVBQUssV0FBVyxDQUFRLEVBRXJDLE9BQVEsT0FlRCxXQUVBLE9BRUEsUUFFQSxJQUVILEVBQUUsRUFDRixhQU1HLElBRUgsRUFBRSxJQUNBLEVBQU0sS0FDUixFQUFNLFVBQVksRUFDbEIsYUFFRyxJQUVILEdBQUksRUFBSyxXQUFXLEVBQVcsQ0FBQyxJQUFNLEdBQ3BDLEdBQVksTUFFWixFQUFFLEVBR0osRUFBRSxFQUFNLEtBQ1IsRUFBTSxVQUFZLEVBQ2xCLGFBR0csSUFFSCxPQUFPLEdBQVksRUFBTyxDQUFRLE1BVS9CLElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxLQUFNLEVBQVUsRUFBVyxDQUFDLE1BRTdELElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxPQUFRLEVBQVUsRUFBVyxDQUFDLE1BRS9ELElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxJQUFLLEVBQVUsRUFBVyxDQUFDLE1BRTVELElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxRQUFTLEVBQVUsRUFBVyxDQUFDLE1BRWhFLElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxRQUFTLEVBQVUsRUFBVyxDQUFDLE1BRWhFLElBRUgsR0FDRSxFQUFLLFdBQVcsRUFBVyxDQUFDLElBQU0sSUFDbEMsRUFBSyxXQUFXLEVBQVcsQ0FBQyxJQUFNLEdBRWxDLE9BQU8sRUFBWSxFQUFPLEVBQVUsT0FBUSxFQUFVLEVBQVcsQ0FBQyxFQUdwRSxVQUVHLElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxNQUFPLEVBQVUsRUFBVyxDQUFDLE1BRTlELElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxPQUFRLEVBQVUsRUFBVyxDQUFDLE1BRS9ELElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxHQUFJLEVBQVUsRUFBVyxDQUFDLE1BRTNELElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxVQUFXLEVBQVUsRUFBVyxDQUFDLE1BRWxFLElBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxVQUFXLEVBQVUsRUFBVyxDQUFDLE1BRWxFLEtBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxRQUFTLEVBQVUsRUFBVyxDQUFDLE1BRWhFLEtBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxLQUFNLEVBQVUsRUFBVyxDQUFDLE1BRTdELEtBRUgsT0FBTyxFQUFZLEVBQU8sRUFBVSxRQUFTLEVBQVUsRUFBVyxDQUFDLE1BR2hFLElBRUgsR0FDRSxFQUFLLFdBQVcsRUFBVyxDQUFDLElBQU0sSUFDbEMsRUFBSyxXQUFXLEVBQVcsQ0FBQyxJQUFNLEdBRWxDLE9BQU8sR0FBZ0IsRUFBTyxDQUFRLEVBR3hDLE9BQU8sR0FBVyxFQUFPLENBQVEsRUFHckMsR0FBSSxHQUFRLENBQUksR0FBSyxJQUFTLEdBQzVCLE9BQU8sR0FBVyxFQUFPLEVBQVUsQ0FBSSxFQUd6QyxHQUFJLEdBQVksQ0FBSSxFQUNsQixPQUFPLEdBQVMsRUFBTyxDQUFRLEVBR2pDLE1BQU0sRUFDSixFQUFNLE9BQ04sRUFDQSxJQUFTLEdBQ0wsa0ZBQ0EsR0FBcUIsQ0FBSSxHQUFLLEdBQXlCLEVBQU0sQ0FBUSxFQUNyRSx5QkFBeUIsR0FBaUIsRUFBTyxDQUFRLEtBQ3pELHNCQUFzQixHQUFpQixFQUFPLENBQVEsSUFDNUQsRUFHRixPQUFPLEVBQVksRUFBTyxFQUFVLElBQUssRUFBWSxDQUFVLEVBWWpFLFNBQVMsRUFBVyxDQUFDLEVBQU8sRUFBTyxDQUNqQyxJQUFNLEVBQU8sRUFBTSxPQUFPLEtBQ3BCLEVBQWEsRUFBSyxPQUNwQixFQUFXLEVBQVEsRUFFdkIsTUFBTyxFQUFXLEVBQVksQ0FDNUIsSUFBTSxFQUFPLEVBQUssV0FBVyxDQUFRLEVBRXJDLEdBQUksSUFBUyxJQUFVLElBQVMsR0FDOUIsTUFHRixHQUFJLEdBQXFCLENBQUksRUFDM0IsRUFBRSxVQUNPLEdBQXlCLEVBQU0sQ0FBUSxFQUNoRCxHQUFZLE1BRVosT0FJSixPQUFPLEVBQ0wsRUFDQSxFQUFVLFFBQ1YsRUFDQSxFQUNBLEVBQUssTUFBTSxFQUFRLEVBQUcsQ0FBUSxDQUNoQyxFQWdDRixTQUFTLEVBQVUsQ0FBQyxFQUFPLEVBQU8sRUFBVyxDQUMzQyxJQUFNLEVBQU8sRUFBTSxPQUFPLEtBQ3RCLEVBQVcsRUFDWCxFQUFPLEVBQ1AsRUFBVSxHQUVkLEdBQUksSUFBUyxHQUNYLEVBQU8sRUFBSyxhQUFhLENBQVEsRUFHbkMsR0FBSSxJQUFTLElBR1gsR0FGQSxFQUFPLEVBQUssYUFBYSxDQUFRLEVBRTdCLEdBQVEsQ0FBSSxFQUNkLE1BQU0sRUFDSixFQUFNLE9BQ04sRUFDQSw2Q0FBNkMsR0FDM0MsRUFDQSxDQUNGLElBQ0YsTUFHRixHQUFXLEdBQVcsRUFBTyxFQUFVLENBQUksRUFDM0MsRUFBTyxFQUFLLFdBQVcsQ0FBUSxFQUdqQyxHQUFJLElBQVMsR0FDWCxFQUFVLEdBQ1YsRUFBTyxFQUFLLGFBQWEsQ0FBUSxFQUNqQyxFQUFXLEdBQVcsRUFBTyxFQUFVLENBQUksRUFDM0MsRUFBTyxFQUFLLFdBQVcsQ0FBUSxFQUdqQyxHQUFJLElBQVMsSUFBVSxJQUFTLElBQVEsQ0FJdEMsR0FIQSxFQUFVLEdBQ1YsRUFBTyxFQUFLLGFBQWEsQ0FBUSxFQUU3QixJQUFTLElBQVUsSUFBUyxHQUM5QixFQUFPLEVBQUssYUFBYSxDQUFRLEVBR25DLEVBQVcsR0FBVyxFQUFPLEVBQVUsQ0FBSSxFQUMzQyxFQUFPLEVBQUssV0FBVyxDQUFRLEVBR2pDLEdBQUksSUFBUyxJQUFVLEdBQVksQ0FBSSxFQUNyQyxNQUFNLEVBQ0osRUFBTSxPQUNOLEVBQ0EsMkNBQTJDLEdBQ3pDLEVBQ0EsQ0FDRixJQUNGLEVBR0YsT0FBTyxFQUNMLEVBQ0EsRUFBVSxFQUFVLE1BQVEsRUFBVSxJQUN0QyxFQUNBLEVBQ0EsRUFBSyxNQUFNLEVBQU8sQ0FBUSxDQUM1QixFQU1GLFNBQVMsRUFBVSxDQUFDLEVBQU8sRUFBTyxFQUFXLENBQzNDLElBQUssR0FBUSxDQUFTLEVBQ3BCLE1BQU0sRUFDSixFQUFNLE9BQ04sRUFDQSwyQ0FBMkMsR0FDekMsRUFDQSxDQUNGLElBQ0YsRUFHRixJQUFNLEVBQU8sRUFBTSxPQUFPLEtBQ3RCLEVBQVcsRUFBUSxFQUV2QixNQUFPLEdBQVEsRUFBSyxXQUFXLENBQVEsQ0FBQyxFQUN0QyxFQUFFLEVBR0osT0FBTyxFQXVCVCxTQUFTLEVBQVUsQ0FBQyxFQUFPLEVBQU8sQ0FDaEMsSUFBTSxFQUFPLEVBQU0sT0FBTyxLQUNwQixFQUFhLEVBQUssT0FDcEIsRUFBVyxFQUFRLEVBQ25CLEVBQWEsRUFDYixFQUFRLEdBRVosTUFBTyxFQUFXLEVBQVksQ0FDNUIsSUFBTSxFQUFPLEVBQUssV0FBVyxDQUFRLEVBRXJDLEdBQUksSUFBUyxHQUVYLE9BREEsR0FBUyxFQUFLLE1BQU0sRUFBWSxDQUFRLEVBQ2pDLEVBQVksRUFBTyxFQUFVLE9BQVEsRUFBTyxFQUFXLEVBQUcsQ0FBSyxFQUd4RSxHQUFJLElBQVMsR0FBUSxDQUNuQixHQUFTLEVBQUssTUFBTSxFQUFZLENBQVEsRUFDeEMsSUFBTSxFQUNKLEVBQUssV0FBVyxFQUFXLENBQUMsSUFBTSxJQUM5QixFQUFLLFdBQVcsRUFBVyxDQUFDLElBQU0sSUFDaEMsR0FBZ0MsRUFBTyxDQUFRLEVBQy9DLEdBQTZCLEVBQU8sQ0FBUSxFQUM5QyxHQUFxQixFQUFPLENBQVEsRUFDMUMsR0FBUyxFQUFPLE1BQ2hCLEdBQVksRUFBTyxLQUNuQixFQUFhLEVBQ2IsU0FHRixHQUFJLElBQVMsSUFBVSxJQUFTLEdBQzlCLE1BR0YsR0FBSSxHQUFxQixDQUFJLEVBQzNCLEVBQUUsVUFDTyxHQUF5QixFQUFNLENBQVEsRUFDaEQsR0FBWSxNQUVaLE9BQU0sRUFDSixFQUFNLE9BQ04sRUFDQSxvQ0FBb0MsR0FDbEMsRUFDQSxDQUNGLElBQ0YsRUFJSixNQUFNLEVBQVksRUFBTSxPQUFRLEVBQVUsc0JBQXNCLEVBR2xFLFNBQVMsRUFBK0IsQ0FBQyxFQUFPLEVBQVUsQ0FDeEQsSUFBTSxFQUFPLEVBQU0sT0FBTyxLQUN0QixFQUFRLEVBQ1IsRUFBTyxFQUVYLE1BQU8sRUFBTyxHQUFJLENBQ2hCLElBQU0sRUFBTyxFQUFLLFdBQVcsRUFBVyxHQUFNLEVBRTlDLEdBQUksSUFBUyxJQUFRLENBRW5CLEdBQUksRUFBTyxJQUFNLEdBQXFCLENBQUssRUFDekMsTUFHRixNQUFPLENBQ0wsTUFBTyxPQUFPLGNBQWMsQ0FBSyxFQUNqQyxNQUNGLEVBS0YsR0FGQSxFQUFTLEdBQVMsRUFBSyxHQUFhLENBQUksRUFFcEMsRUFBUSxFQUNWLE1BSUosTUFBTSxFQUNKLEVBQU0sT0FDTixFQUNBLHFDQUFxQyxFQUFLLE1BQ3hDLEVBQ0EsRUFBVyxDQUNiLEtBQ0YsRUFHRixTQUFTLEVBQTRCLENBQUMsRUFBTyxFQUFVLENBQ3JELElBQU0sRUFBTyxFQUFNLE9BQU8sS0FDcEIsRUFBTyxHQUFpQixFQUFNLEVBQVcsQ0FBQyxFQUVoRCxHQUFJLEdBQXFCLENBQUksRUFDM0IsTUFBTyxDQUNMLE1BQU8sT0FBTyxjQUFjLENBQUksRUFDaEMsS0FBTSxDQUNSLEVBSUYsR0FBSSxHQUFtQixDQUFJLEdBRXpCLEdBQ0UsRUFBSyxXQUFXLEVBQVcsQ0FBQyxJQUFNLElBQ2xDLEVBQUssV0FBVyxFQUFXLENBQUMsSUFBTSxJQUNsQyxDQUNBLElBQU0sRUFBZSxHQUFpQixFQUFNLEVBQVcsQ0FBQyxFQUV4RCxHQUFJLEdBQW9CLENBQVksRUFPbEMsTUFBTyxDQUNMLE1BQU8sT0FBTyxjQUFjLEVBQU0sQ0FBWSxFQUM5QyxLQUFNLEVBQ1IsR0FLTixNQUFNLEVBQ0osRUFBTSxPQUNOLEVBQ0EscUNBQXFDLEVBQUssTUFBTSxFQUFVLEVBQVcsQ0FBQyxLQUN4RSxFQVVGLFNBQVMsRUFBZ0IsQ0FBQyxFQUFNLEVBQVUsQ0FHeEMsT0FDRyxHQUFhLEVBQUssV0FBVyxDQUFRLENBQUMsR0FBSyxHQUMzQyxHQUFhLEVBQUssV0FBVyxFQUFXLENBQUMsQ0FBQyxHQUFLLEVBQy9DLEdBQWEsRUFBSyxXQUFXLEVBQVcsQ0FBQyxDQUFDLEdBQUssRUFDaEQsR0FBYSxFQUFLLFdBQVcsRUFBVyxDQUFDLENBQUMsRUFrQjlDLFNBQVMsRUFBWSxDQUFDLEVBQU0sQ0FDMUIsT0FBTyxHQUFRLElBQVUsR0FBUSxHQUM3QixFQUFPLEdBQ1AsR0FBUSxJQUFVLEdBQVEsR0FDMUIsRUFBTyxHQUNQLEdBQVEsSUFBVSxHQUFRLElBQzFCLEVBQU8sR0FDUCxHQWVOLFNBQVMsRUFBb0IsQ0FBQyxFQUFPLEVBQVUsQ0FDN0MsSUFBTSxFQUFPLEVBQU0sT0FBTyxLQUcxQixPQUZhLEVBQUssV0FBVyxFQUFXLENBQUMsT0FHbEMsSUFFSCxNQUFPLENBQ0wsTUFBTyxJQUNQLEtBQU0sQ0FDUixNQUVHLElBRUgsTUFBTyxDQUNMLE1BQU8sS0FDUCxLQUFNLENBQ1IsTUFFRyxJQUVILE1BQU8sQ0FDTCxNQUFPLElBQ1AsS0FBTSxDQUNSLE1BRUcsSUFFSCxNQUFPLENBQ0wsTUFBTyxLQUNQLEtBQU0sQ0FDUixNQUVHLEtBRUgsTUFBTyxDQUNMLE1BQU8sS0FDUCxLQUFNLENBQ1IsTUFFRyxLQUVILE1BQU8sQ0FDTCxNQUFPO0FBQUEsRUFDUCxLQUFNLENBQ1IsTUFFRyxLQUVILE1BQU8sQ0FDTCxNQUFPLEtBQ1AsS0FBTSxDQUNSLE1BRUcsS0FFSCxNQUFPLENBQ0wsTUFBTyxLQUNQLEtBQU0sQ0FDUixFQUdKLE1BQU0sRUFDSixFQUFNLE9BQ04sRUFDQSx1Q0FBdUMsRUFBSyxNQUMxQyxFQUNBLEVBQVcsQ0FDYixLQUNGLEVBZUYsU0FBUyxFQUFlLENBQUMsRUFBTyxFQUFPLENBQ3JDLElBQU0sRUFBTyxFQUFNLE9BQU8sS0FDcEIsRUFBYSxFQUFLLE9BQ3BCLEVBQVksRUFBTSxVQUNsQixFQUFXLEVBQVEsRUFDbkIsRUFBYSxFQUNiLEVBQWMsR0FDWixFQUFhLENBQUMsRUFFcEIsTUFBTyxFQUFXLEVBQVksQ0FDNUIsSUFBTSxFQUFPLEVBQUssV0FBVyxDQUFRLEVBRXJDLEdBQ0UsSUFBUyxJQUNULEVBQUssV0FBVyxFQUFXLENBQUMsSUFBTSxJQUNsQyxFQUFLLFdBQVcsRUFBVyxDQUFDLElBQU0sR0FDbEMsQ0FDQSxHQUFlLEVBQUssTUFBTSxFQUFZLENBQVEsRUFDOUMsRUFBVyxLQUFLLENBQVcsRUFDM0IsSUFBTSxFQUFRLEVBQ1osRUFDQSxFQUFVLGFBQ1YsRUFDQSxFQUFXLEVBQ1gsR0FBdUIsQ0FBVSxFQUFFLEtBQUssSUFBSSxDQUM5QyxFQUdBLE9BRkEsRUFBTSxNQUFRLEVBQVcsT0FBUyxFQUNsQyxFQUFNLFVBQVksRUFDWCxFQUdULEdBQ0UsSUFBUyxJQUNULEVBQUssV0FBVyxFQUFXLENBQUMsSUFBTSxJQUNsQyxFQUFLLFdBQVcsRUFBVyxDQUFDLElBQU0sSUFDbEMsRUFBSyxXQUFXLEVBQVcsQ0FBQyxJQUFNLEdBQ2xDLENBQ0EsR0FBZSxFQUFLLE1BQU0sRUFBWSxDQUFRLEVBQzlDLEVBQWEsRUFBVyxFQUV4QixHQUFZLEVBQ1osU0FHRixHQUFJLElBQVMsSUFBVSxJQUFTLEdBQVEsQ0FJdEMsR0FIQSxHQUFlLEVBQUssTUFBTSxFQUFZLENBQVEsRUFDOUMsRUFBVyxLQUFLLENBQVcsRUFFdkIsSUFBUyxJQUFVLEVBQUssV0FBVyxFQUFXLENBQUMsSUFBTSxHQUN2RCxHQUFZLE1BRVosRUFBRSxFQUdKLEVBQWMsR0FDZCxFQUFhLEVBQ2IsRUFBWSxFQUNaLFNBR0YsR0FBSSxHQUFxQixDQUFJLEVBQzNCLEVBQUUsVUFDTyxHQUF5QixFQUFNLENBQVEsRUFDaEQsR0FBWSxNQUVaLE9BQU0sRUFDSixFQUFNLE9BQ04sRUFDQSxvQ0FBb0MsR0FDbEMsRUFDQSxDQUNGLElBQ0YsRUFJSixNQUFNLEVBQVksRUFBTSxPQUFRLEVBQVUsc0JBQXNCLEVBV2xFLFNBQVMsRUFBUSxDQUFDLEVBQU8sRUFBTyxDQUM5QixJQUFNLEVBQU8sRUFBTSxPQUFPLEtBQ3BCLEVBQWEsRUFBSyxPQUNwQixFQUFXLEVBQVEsRUFFdkIsTUFBTyxFQUFXLEVBQVksQ0FDNUIsSUFBTSxFQUFPLEVBQUssV0FBVyxDQUFRLEVBRXJDLEdBQUksR0FBZSxDQUFJLEVBQ3JCLEVBQUUsTUFFRixPQUlKLE9BQU8sRUFDTCxFQUNBLEVBQVUsS0FDVixFQUNBLEVBQ0EsRUFBSyxNQUFNLEVBQU8sQ0FBUSxDQUM1QixFQzkzQkssU0FBUyxFQUFPLENBQUMsRUFBTyxDQUM3QixPQUFPLEdBQVksRUFBTyxDQUFDLENBQUMsRUFHOUIsU0FBUyxFQUFXLENBQUMsRUFBTyxFQUFZLENBQ3RDLGNBQWUsT0FDUixTQUNILE9BQU8sS0FBSyxVQUFVLENBQUssTUFFeEIsV0FDSCxPQUFPLEVBQU0sS0FBTyxhQUFhLEVBQU0sUUFBVSxpQkFFOUMsU0FDSCxPQUFPLEdBQWtCLEVBQU8sQ0FBVSxVQUcxQyxPQUFPLE9BQU8sQ0FBSyxHQUl6QixTQUFTLEVBQWlCLENBQUMsRUFBTyxFQUFzQixDQUN0RCxHQUFJLElBQVUsS0FDWixNQUFPLE9BR1QsR0FBSSxFQUFxQixTQUFTLENBQUssRUFDckMsTUFBTyxhQUdULElBQU0sRUFBYSxDQUFDLEdBQUcsRUFBc0IsQ0FBSyxFQUVsRCxHQUFJLEdBQVcsQ0FBSyxFQUFHLENBQ3JCLElBQU0sRUFBWSxFQUFNLE9BQU8sRUFFL0IsR0FBSSxJQUFjLEVBQ2hCLGNBQWMsSUFBYyxTQUN4QixFQUNBLEdBQVksRUFBVyxDQUFVLFVBRTlCLE1BQU0sUUFBUSxDQUFLLEVBQzVCLE9BQU8sR0FBWSxFQUFPLENBQVUsRUFHdEMsT0FBTyxHQUFhLEVBQU8sQ0FBVSxFQUd2QyxTQUFTLEVBQVUsQ0FBQyxFQUFPLENBQ3pCLGNBQWMsRUFBTSxTQUFXLFdBR2pDLFNBQVMsRUFBWSxDQUFDLEVBQVEsRUFBWSxDQUN4QyxJQUFNLEVBQVUsT0FBTyxRQUFRLENBQU0sRUFFckMsR0FBSSxFQUFRLFNBQVcsRUFDckIsTUFBTyxLQUdULEdBQUksRUFBVyxPQTlEVyxFQStEeEIsTUFBTyxJQUFNLEdBQWEsQ0FBTSxFQUFJLElBTXRDLE1BQU8sS0FIWSxFQUFRLElBQ3pCLEVBQUUsRUFBSyxLQUFXLEVBQU0sS0FBTyxHQUFZLEVBQU8sQ0FBVSxDQUM5RCxFQUN5QixLQUFLLElBQUksRUFBSSxLQUd4QyxTQUFTLEVBQVcsQ0FBQyxFQUFPLEVBQVksQ0FDdEMsR0FBSSxFQUFNLFNBQVcsRUFDbkIsTUFBTyxLQUdULEdBQUksRUFBVyxPQTdFVyxFQThFeEIsTUFBTyxVQUdULElBQU0sRUFBTSxLQUFLLElBbEZNLEdBa0ZnQixFQUFNLE1BQU0sRUFDN0MsRUFBWSxFQUFNLE9BQVMsRUFDM0IsRUFBUSxDQUFDLEVBRWYsUUFBUyxFQUFJLEVBQUcsRUFBSSxJQUFPLEVBQ3pCLEVBQU0sS0FBSyxHQUFZLEVBQU0sR0FBSSxDQUFVLENBQUMsRUFHOUMsR0FBSSxJQUFjLEVBQ2hCLEVBQU0sS0FBSyxpQkFBaUIsVUFDbkIsRUFBWSxFQUNyQixFQUFNLEtBQUssT0FBTyxjQUFzQixFQUcxQyxNQUFPLElBQU0sRUFBTSxLQUFLLElBQUksRUFBSSxJQUdsQyxTQUFTLEVBQVksQ0FBQyxFQUFRLENBQzVCLElBQU0sRUFBTSxPQUFPLFVBQVUsU0FDMUIsS0FBSyxDQUFNLEVBQ1gsUUFBUSxhQUFjLEVBQUUsRUFDeEIsUUFBUSxLQUFNLEVBQUUsRUFFbkIsR0FBSSxJQUFRLGlCQUFtQixFQUFPLGNBQWdCLFdBQVksQ0FDaEUsSUFBTSxFQUFPLEVBQU8sWUFBWSxLQUVoQyxVQUFXLElBQVMsVUFBWSxJQUFTLEdBQ3ZDLE9BQU8sRUFJWCxPQUFPLEVDOUdULElBQU0sR0FDSixXQUFXLFNBQ1gsR0FRVyxHQUdYLFlBQ2EsQ0FBVSxDQUFDLEVBQU8sRUFBYSxDQUN0QyxPQUFPLGFBQWlCLFlBRWpCLENBQVUsQ0FBQyxFQUFPLEVBQWEsQ0FDdEMsR0FBSSxhQUFpQixFQUNuQixNQUFPLEdBR1QsVUFBVyxJQUFVLFVBQVksSUFBVSxLQUFNLENBQy9DLElBQUksRUFHSixJQUFNLEVBQVksRUFBWSxVQUFVLE9BQU8sYUFDekMsRUFDSixPQUFPLGVBQWUsRUFDbEIsRUFBTSxPQUFPLGNBQ1osRUFBcUIsRUFBTSxlQUFpQixNQUM3QyxJQUE0QixPQUN2QixPQUNMLEVBQW1CLEtBRXpCLEdBQUksSUFBYyxFQUFnQixDQUNoQyxJQUFNLEVBQW1CLEdBQVEsQ0FBSyxFQUN0QyxNQUFNLElBQUksTUFBTSxjQUFjLE1BQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGtCQVd0QyxHQUlWLE1BQU8sSUM1Q1IsTUFBTSxFQUFPLENBQ2xCLFdBQVcsQ0FDVCxFQUNBLEVBQU8sa0JBQ1AsRUFBaUIsQ0FDZixLQUFNLEVBQ04sT0FBUSxDQUNWLEVBQ0EsQ0FDQSxPQUFPLElBQVMsVUFDZCxHQUFVLEdBQU8sb0NBQW9DLEdBQVEsQ0FBSSxJQUFJLEVBQ3ZFLEtBQUssS0FBTyxFQUNaLEtBQUssS0FBTyxFQUNaLEtBQUssZUFBaUIsRUFDdEIsS0FBSyxlQUFlLEtBQU8sR0FDekIsR0FDRSxHQUNBLDJEQUNGLEVBQ0YsS0FBSyxlQUFlLE9BQVMsR0FDM0IsR0FDRSxHQUNBLDZEQUNGLE1BR0MsT0FBTyxZQUFZLEVBQUcsQ0FDekIsTUFBTyxTQUVYLENBT08sU0FBUyxFQUFRLENBQUMsRUFBUSxDQUMvQixPQUFPLEdBQVcsRUFBUSxFQUFNLEVDakMzQixTQUFTLEVBQUssQ0FBQyxFQUFRLEVBQVMsQ0FDckMsSUFBTSxFQUFTLElBQUksR0FBTyxFQUFRLENBQU8sRUFDbkMsRUFBVyxFQUFPLGNBQWMsRUFLdEMsT0FKQSxPQUFPLGVBQWUsRUFBVSxhQUFjLENBQzVDLFdBQVksR0FDWixNQUFPLEVBQU8sVUFDaEIsQ0FBQyxFQUNNLEVBOERGLE1BQU0sRUFBTyxDQUNsQixXQUFXLENBQUMsRUFBUSxFQUFVLENBQUMsRUFBRyxDQUNoQyxJQUFNLEVBQVksR0FBUyxDQUFNLEVBQUksRUFBUyxJQUFJLEdBQU8sQ0FBTSxFQUMvRCxLQUFLLE9BQVMsSUFBSSxHQUFNLENBQVMsRUFDakMsS0FBSyxTQUFXLEVBQ2hCLEtBQUssY0FBZ0IsS0FHbkIsV0FBVSxFQUFHLENBQ2YsT0FBTyxLQUFLLGNBTWQsU0FBUyxFQUFHLENBQ1YsSUFBTSxFQUFRLEtBQUssWUFBWSxFQUFVLElBQUksRUFDN0MsT0FBTyxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUssS0FDWCxNQUFPLEVBQU0sS0FDZixDQUFDLEVBT0gsYUFBYSxFQUFHLENBQ2QsT0FBTyxLQUFLLEtBQUssS0FBSyxPQUFPLE1BQU8sQ0FDbEMsS0FBTSxFQUFLLFNBQ1gsWUFBYSxLQUFLLEtBQ2hCLEVBQVUsSUFDVixLQUFLLGdCQUNMLEVBQVUsR0FDWixDQUNGLENBQUMsRUEwQkgsZUFBZSxFQUFHLENBQ2hCLEdBQUksS0FBSyxLQUFLLEVBQVUsT0FBTyxFQUM3QixPQUFPLEtBQUsseUJBQXlCLEVBR3ZDLElBQU0sRUFBaUIsS0FBSyxnQkFBZ0IsRUFDdEMsRUFBZSxFQUNqQixLQUFLLE9BQU8sVUFBVSxFQUN0QixLQUFLLE9BQU8sTUFFaEIsR0FBSSxFQUFhLE9BQVMsRUFBVSxLQUFNLENBQ3hDLE9BQVEsRUFBYSxXQUNkLFNBQ0gsT0FBTyxLQUFLLHNCQUFzQixNQUUvQixTQUNILE9BQU8sS0FBSywwQkFBMEIsTUFFbkMsT0FDSCxPQUFPLEtBQUssMEJBQTBCLE1BRW5DLFlBQ0gsT0FBTyxLQUFLLDZCQUE2QixNQUV0QyxRQUNILE9BQU8sS0FBSyx5QkFBeUIsTUFFbEMsT0FDSCxPQUFPLEtBQUssd0JBQXdCLE1BRWpDLFFBQ0gsT0FBTyxLQUFLLCtCQUErQixNQUV4QyxZQUNILE9BQU8sS0FBSyx5QkFBeUIsRUFHekMsR0FBSSxFQUNGLE1BQU0sRUFDSixLQUFLLE9BQU8sT0FDWixLQUFLLE9BQU8sTUFBTSxNQUNsQiw4RUFDRixFQUdGLE9BQVEsRUFBYSxXQUNkLFlBQ0EsZUFDQSxlQUNILE9BQU8sS0FBSyx5QkFBeUIsTUFFbEMsV0FDSCxPQUFPLEtBQUssd0JBQXdCLE1BRWpDLFNBQ0gsT0FBTyxLQUFLLHlCQUF5QixHQUkzQyxNQUFNLEtBQUssV0FBVyxDQUFZLEVBU3BDLHdCQUF3QixFQUFHLENBQ3pCLElBQU0sRUFBUSxLQUFLLE9BQU8sTUFFMUIsR0FBSSxLQUFLLEtBQUssRUFBVSxPQUFPLEVBQzdCLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLHFCQUNYLFVBQVcsR0FBa0IsTUFDN0IsS0FBTSxPQUNOLG9CQUFxQixDQUFDLEVBQ3RCLFdBQVksQ0FBQyxFQUNiLGFBQWMsS0FBSyxrQkFBa0IsQ0FDdkMsQ0FBQyxFQUdILElBQU0sRUFBWSxLQUFLLG1CQUFtQixFQUN0QyxFQUVKLEdBQUksS0FBSyxLQUFLLEVBQVUsSUFBSSxFQUMxQixFQUFPLEtBQUssVUFBVSxFQUd4QixPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxxQkFDWCxZQUNBLE9BQ0Esb0JBQXFCLEtBQUsseUJBQXlCLEVBQ25ELFdBQVksS0FBSyxnQkFBZ0IsRUFBSyxFQUN0QyxhQUFjLEtBQUssa0JBQWtCLENBQ3ZDLENBQUMsRUFNSCxrQkFBa0IsRUFBRyxDQUNuQixJQUFNLEVBQWlCLEtBQUssWUFBWSxFQUFVLElBQUksRUFFdEQsT0FBUSxFQUFlLFdBQ2hCLFFBQ0gsT0FBTyxHQUFrQixVQUV0QixXQUNILE9BQU8sR0FBa0IsYUFFdEIsZUFDSCxPQUFPLEdBQWtCLGFBRzdCLE1BQU0sS0FBSyxXQUFXLENBQWMsRUFNdEMsd0JBQXdCLEVBQUcsQ0FDekIsT0FBTyxLQUFLLGFBQ1YsRUFBVSxRQUNWLEtBQUssd0JBQ0wsRUFBVSxPQUNaLEVBTUYsdUJBQXVCLEVBQUcsQ0FDeEIsT0FBTyxLQUFLLEtBQUssS0FBSyxPQUFPLE1BQU8sQ0FDbEMsS0FBTSxFQUFLLG9CQUNYLFNBQVUsS0FBSyxjQUFjLEVBQzdCLE1BQU8sS0FBSyxZQUFZLEVBQVUsS0FBSyxFQUFHLEtBQUssbUJBQW1CLEdBQ2xFLGFBQWMsS0FBSyxvQkFBb0IsRUFBVSxNQUFNLEVBQ25ELEtBQUssdUJBQXVCLEVBQzVCLE9BQ0osV0FBWSxLQUFLLHFCQUFxQixDQUN4QyxDQUFDLEVBTUgsYUFBYSxFQUFHLENBQ2QsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUUxQixPQURBLEtBQUssWUFBWSxFQUFVLE1BQU0sRUFDMUIsS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLFNBQ1gsS0FBTSxLQUFLLFVBQVUsQ0FDdkIsQ0FBQyxFQVFILGlCQUFpQixFQUFHLENBQ2xCLE9BQU8sS0FBSyxLQUFLLEtBQUssT0FBTyxNQUFPLENBQ2xDLEtBQU0sRUFBSyxjQUNYLFdBQVksS0FBSyxLQUNmLEVBQVUsUUFDVixLQUFLLGVBQ0wsRUFBVSxPQUNaLENBQ0YsQ0FBQyxFQVNILGNBQWMsRUFBRyxDQUNmLE9BQU8sS0FBSyxLQUFLLEVBQVUsTUFBTSxFQUM3QixLQUFLLGNBQWMsRUFDbkIsS0FBSyxXQUFXLEVBUXRCLFVBQVUsRUFBRyxDQUNYLElBQU0sRUFBUSxLQUFLLE9BQU8sTUFDcEIsRUFBYyxLQUFLLFVBQVUsRUFDL0IsRUFDQSxFQUVKLEdBQUksS0FBSyxvQkFBb0IsRUFBVSxLQUFLLEVBQzFDLEVBQVEsRUFDUixFQUFPLEtBQUssVUFBVSxNQUV0QixHQUFPLEVBR1QsT0FBTyxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUssTUFDWCxRQUNBLE9BQ0EsVUFBVyxLQUFLLGVBQWUsRUFBSyxFQUNwQyxXQUFZLEtBQUssZ0JBQWdCLEVBQUssRUFDdEMsYUFBYyxLQUFLLEtBQUssRUFBVSxPQUFPLEVBQ3JDLEtBQUssa0JBQWtCLEVBQ3ZCLE1BQ04sQ0FBQyxFQU1ILGNBQWMsQ0FBQyxFQUFTLENBQ3RCLElBQU0sRUFBTyxFQUFVLEtBQUssbUJBQXFCLEtBQUssY0FDdEQsT0FBTyxLQUFLLGFBQWEsRUFBVSxRQUFTLEVBQU0sRUFBVSxPQUFPLEVBTXJFLGFBQWEsQ0FBQyxFQUFVLEdBQU8sQ0FDN0IsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUNwQixFQUFPLEtBQUssVUFBVSxFQUU1QixPQURBLEtBQUssWUFBWSxFQUFVLEtBQUssRUFDekIsS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLFNBQ1gsT0FDQSxNQUFPLEtBQUssa0JBQWtCLENBQU8sQ0FDdkMsQ0FBQyxFQUdILGtCQUFrQixFQUFHLENBQ25CLE9BQU8sS0FBSyxjQUFjLEVBQUksRUFXaEMsYUFBYSxFQUFHLENBQ2QsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUMxQixLQUFLLFlBQVksRUFBVSxNQUFNLEVBQ2pDLElBQU0sRUFBbUIsS0FBSyxzQkFBc0IsSUFBSSxFQUV4RCxJQUFLLEdBQW9CLEtBQUssS0FBSyxFQUFVLElBQUksRUFDL0MsT0FBTyxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUssZ0JBQ1gsS0FBTSxLQUFLLGtCQUFrQixFQUM3QixXQUFZLEtBQUssZ0JBQWdCLEVBQUssQ0FDeEMsQ0FBQyxFQUdILE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLGdCQUNYLGNBQWUsRUFBbUIsS0FBSyxlQUFlLEVBQUksT0FDMUQsV0FBWSxLQUFLLGdCQUFnQixFQUFLLEVBQ3RDLGFBQWMsS0FBSyxrQkFBa0IsQ0FDdkMsQ0FBQyxFQVNILHVCQUF1QixFQUFHLENBQ3hCLElBQU0sRUFBUSxLQUFLLE9BQU8sTUFLMUIsR0FKQSxLQUFLLGNBQWMsVUFBVSxFQUl6QixLQUFLLFNBQVMsK0JBQWlDLEdBQ2pELE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLG9CQUNYLEtBQU0sS0FBSyxrQkFBa0IsRUFDN0Isb0JBQXFCLEtBQUsseUJBQXlCLEVBQ25ELGVBQWdCLEtBQUssY0FBYyxJQUFJLEVBQUcsS0FBSyxlQUFlLEdBQzlELFdBQVksS0FBSyxnQkFBZ0IsRUFBSyxFQUN0QyxhQUFjLEtBQUssa0JBQWtCLENBQ3ZDLENBQUMsRUFHSCxPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxvQkFDWCxLQUFNLEtBQUssa0JBQWtCLEVBQzdCLGVBQWdCLEtBQUssY0FBYyxJQUFJLEVBQUcsS0FBSyxlQUFlLEdBQzlELFdBQVksS0FBSyxnQkFBZ0IsRUFBSyxFQUN0QyxhQUFjLEtBQUssa0JBQWtCLENBQ3ZDLENBQUMsRUFNSCxpQkFBaUIsRUFBRyxDQUNsQixHQUFJLEtBQUssT0FBTyxNQUFNLFFBQVUsS0FDOUIsTUFBTSxLQUFLLFdBQVcsRUFHeEIsT0FBTyxLQUFLLFVBQVUsRUFzQnhCLGlCQUFpQixDQUFDLEVBQVMsQ0FDekIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUUxQixPQUFRLEVBQU0sV0FDUCxFQUFVLFVBQ2IsT0FBTyxLQUFLLFVBQVUsQ0FBTyxPQUUxQixFQUFVLFFBQ2IsT0FBTyxLQUFLLFlBQVksQ0FBTyxPQUU1QixFQUFVLElBRWIsT0FEQSxLQUFLLGFBQWEsRUFDWCxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUssSUFDWCxNQUFPLEVBQU0sS0FDZixDQUFDLE9BRUUsRUFBVSxNQUViLE9BREEsS0FBSyxhQUFhLEVBQ1gsS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLE1BQ1gsTUFBTyxFQUFNLEtBQ2YsQ0FBQyxPQUVFLEVBQVUsWUFDVixFQUFVLGFBQ2IsT0FBTyxLQUFLLG1CQUFtQixPQUU1QixFQUFVLEtBR2IsT0FGQSxLQUFLLGFBQWEsRUFFVixFQUFNLFdBQ1AsT0FDSCxPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxRQUNYLE1BQU8sRUFDVCxDQUFDLE1BRUUsUUFDSCxPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxRQUNYLE1BQU8sRUFDVCxDQUFDLE1BRUUsT0FDSCxPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxJQUNiLENBQUMsVUFHRCxPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxLQUNYLE1BQU8sRUFBTSxLQUNmLENBQUMsT0FHRixFQUFVLE9BQ2IsR0FBSSxFQUdGLEdBRkEsS0FBSyxZQUFZLEVBQVUsTUFBTSxFQUU3QixLQUFLLE9BQU8sTUFBTSxPQUFTLEVBQVUsS0FBTSxDQUM3QyxJQUFNLEVBQVUsS0FBSyxPQUFPLE1BQU0sTUFDbEMsTUFBTSxFQUNKLEtBQUssT0FBTyxPQUNaLEVBQU0sTUFDTiwwQkFBeUIsdUJBQzNCLE1BRUEsT0FBTSxLQUFLLFdBQVcsQ0FBSyxFQUkvQixPQUFPLEtBQUssY0FBYyxVQUcxQixNQUFNLEtBQUssV0FBVyxHQUk1QixzQkFBc0IsRUFBRyxDQUN2QixPQUFPLEtBQUssa0JBQWtCLEVBQUksRUFHcEMsa0JBQWtCLEVBQUcsQ0FDbkIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUUxQixPQURBLEtBQUssYUFBYSxFQUNYLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxPQUNYLE1BQU8sRUFBTSxNQUNiLE1BQU8sRUFBTSxPQUFTLEVBQVUsWUFDbEMsQ0FBQyxFQVFILFNBQVMsQ0FBQyxFQUFTLENBQ2pCLElBQU0sRUFBTyxJQUFNLEtBQUssa0JBQWtCLENBQU8sRUFFakQsT0FBTyxLQUFLLEtBQUssS0FBSyxPQUFPLE1BQU8sQ0FDbEMsS0FBTSxFQUFLLEtBQ1gsT0FBUSxLQUFLLElBQUksRUFBVSxVQUFXLEVBQU0sRUFBVSxTQUFTLENBQ2pFLENBQUMsRUFVSCxXQUFXLENBQUMsRUFBUyxDQUNuQixJQUFNLEVBQU8sSUFBTSxLQUFLLGlCQUFpQixDQUFPLEVBRWhELE9BQU8sS0FBSyxLQUFLLEtBQUssT0FBTyxNQUFPLENBQ2xDLEtBQU0sRUFBSyxPQUNYLE9BQVEsS0FBSyxJQUFJLEVBQVUsUUFBUyxFQUFNLEVBQVUsT0FBTyxDQUM3RCxDQUFDLEVBTUgsZ0JBQWdCLENBQUMsRUFBUyxDQUN4QixJQUFNLEVBQVEsS0FBSyxPQUFPLE1BQ3BCLEVBQU8sS0FBSyxVQUFVLEVBRTVCLE9BREEsS0FBSyxZQUFZLEVBQVUsS0FBSyxFQUN6QixLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUssYUFDWCxPQUNBLE1BQU8sS0FBSyxrQkFBa0IsQ0FBTyxDQUN2QyxDQUFDLEVBT0gsZUFBZSxDQUFDLEVBQVMsQ0FDdkIsSUFBTSxFQUFhLENBQUMsRUFFcEIsTUFBTyxLQUFLLEtBQUssRUFBVSxFQUFFLEVBQzNCLEVBQVcsS0FBSyxLQUFLLGVBQWUsQ0FBTyxDQUFDLEVBRzlDLE9BQU8sRUFHVCxvQkFBb0IsRUFBRyxDQUNyQixPQUFPLEtBQUssZ0JBQWdCLEVBQUksRUFRbEMsY0FBYyxDQUFDLEVBQVMsQ0FDdEIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUUxQixPQURBLEtBQUssWUFBWSxFQUFVLEVBQUUsRUFDdEIsS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLFVBQ1gsS0FBTSxLQUFLLFVBQVUsRUFDckIsVUFBVyxLQUFLLGVBQWUsQ0FBTyxDQUN4QyxDQUFDLEVBVUgsa0JBQWtCLEVBQUcsQ0FDbkIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUN0QixFQUVKLEdBQUksS0FBSyxvQkFBb0IsRUFBVSxTQUFTLEVBQUcsQ0FDakQsSUFBTSxFQUFZLEtBQUssbUJBQW1CLEVBQzFDLEtBQUssWUFBWSxFQUFVLFNBQVMsRUFDcEMsRUFBTyxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUssVUFDWCxLQUFNLENBQ1IsQ0FBQyxNQUVELEdBQU8sS0FBSyxlQUFlLEVBRzdCLEdBQUksS0FBSyxvQkFBb0IsRUFBVSxJQUFJLEVBQ3pDLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLGNBQ1gsTUFDRixDQUFDLEVBR0gsT0FBTyxFQU1ULGNBQWMsRUFBRyxDQUNmLE9BQU8sS0FBSyxLQUFLLEtBQUssT0FBTyxNQUFPLENBQ2xDLEtBQU0sRUFBSyxXQUNYLEtBQU0sS0FBSyxVQUFVLENBQ3ZCLENBQUMsRUFHSCxlQUFlLEVBQUcsQ0FDaEIsT0FBTyxLQUFLLEtBQUssRUFBVSxNQUFNLEdBQUssS0FBSyxLQUFLLEVBQVUsWUFBWSxFQU14RSxnQkFBZ0IsRUFBRyxDQUNqQixHQUFJLEtBQUssZ0JBQWdCLEVBQ3ZCLE9BQU8sS0FBSyxtQkFBbUIsRUFTbkMscUJBQXFCLEVBQUcsQ0FDdEIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUNwQixFQUFjLEtBQUssaUJBQWlCLEVBQzFDLEtBQUssY0FBYyxRQUFRLEVBQzNCLElBQU0sRUFBYSxLQUFLLHFCQUFxQixFQUN2QyxFQUFpQixLQUFLLEtBQzFCLEVBQVUsUUFDVixLQUFLLDZCQUNMLEVBQVUsT0FDWixFQUNBLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLGtCQUNYLGNBQ0EsYUFDQSxnQkFDRixDQUFDLEVBTUgsNEJBQTRCLEVBQUcsQ0FDN0IsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUNwQixFQUFZLEtBQUssbUJBQW1CLEVBQzFDLEtBQUssWUFBWSxFQUFVLEtBQUssRUFDaEMsSUFBTSxFQUFPLEtBQUssZUFBZSxFQUNqQyxPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSywwQkFDWCxZQUNBLE1BQ0YsQ0FBQyxFQU1ILHlCQUF5QixFQUFHLENBQzFCLElBQU0sRUFBUSxLQUFLLE9BQU8sTUFDcEIsRUFBYyxLQUFLLGlCQUFpQixFQUMxQyxLQUFLLGNBQWMsUUFBUSxFQUMzQixJQUFNLEVBQU8sS0FBSyxVQUFVLEVBQ3RCLEVBQWEsS0FBSyxxQkFBcUIsRUFDN0MsT0FBTyxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUssdUJBQ1gsY0FDQSxPQUNBLFlBQ0YsQ0FBQyxFQVFILHlCQUF5QixFQUFHLENBQzFCLElBQU0sRUFBUSxLQUFLLE9BQU8sTUFDcEIsRUFBYyxLQUFLLGlCQUFpQixFQUMxQyxLQUFLLGNBQWMsTUFBTSxFQUN6QixJQUFNLEVBQU8sS0FBSyxVQUFVLEVBQ3RCLEVBQWEsS0FBSywwQkFBMEIsRUFDNUMsRUFBYSxLQUFLLHFCQUFxQixFQUN2QyxFQUFTLEtBQUssc0JBQXNCLEVBQzFDLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLHVCQUNYLGNBQ0EsT0FDQSxhQUNBLGFBQ0EsUUFDRixDQUFDLEVBUUgseUJBQXlCLEVBQUcsQ0FDMUIsT0FBTyxLQUFLLHNCQUFzQixZQUFZLEVBQzFDLEtBQUssY0FBYyxFQUFVLElBQUssS0FBSyxjQUFjLEVBQ3JELENBQUMsRUFRUCxxQkFBcUIsRUFBRyxDQUN0QixPQUFPLEtBQUssYUFDVixFQUFVLFFBQ1YsS0FBSyxxQkFDTCxFQUFVLE9BQ1osRUFPRixvQkFBb0IsRUFBRyxDQUNyQixJQUFNLEVBQVEsS0FBSyxPQUFPLE1BQ3BCLEVBQWMsS0FBSyxpQkFBaUIsRUFDcEMsRUFBTyxLQUFLLFVBQVUsRUFDdEIsRUFBTyxLQUFLLGtCQUFrQixFQUNwQyxLQUFLLFlBQVksRUFBVSxLQUFLLEVBQ2hDLElBQU0sRUFBTyxLQUFLLG1CQUFtQixFQUMvQixFQUFhLEtBQUsscUJBQXFCLEVBQzdDLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLGlCQUNYLGNBQ0EsT0FDQSxVQUFXLEVBQ1gsT0FDQSxZQUNGLENBQUMsRUFNSCxpQkFBaUIsRUFBRyxDQUNsQixPQUFPLEtBQUssYUFDVixFQUFVLFFBQ1YsS0FBSyxtQkFDTCxFQUFVLE9BQ1osRUFPRixrQkFBa0IsRUFBRyxDQUNuQixJQUFNLEVBQVEsS0FBSyxPQUFPLE1BQ3BCLEVBQWMsS0FBSyxpQkFBaUIsRUFDcEMsRUFBTyxLQUFLLFVBQVUsRUFDNUIsS0FBSyxZQUFZLEVBQVUsS0FBSyxFQUNoQyxJQUFNLEVBQU8sS0FBSyxtQkFBbUIsRUFDakMsRUFFSixHQUFJLEtBQUssb0JBQW9CLEVBQVUsTUFBTSxFQUMzQyxFQUFlLEtBQUssdUJBQXVCLEVBRzdDLElBQU0sRUFBYSxLQUFLLHFCQUFxQixFQUM3QyxPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyx1QkFDWCxjQUNBLE9BQ0EsT0FDQSxlQUNBLFlBQ0YsQ0FBQyxFQU9ILDRCQUE0QixFQUFHLENBQzdCLElBQU0sRUFBUSxLQUFLLE9BQU8sTUFDcEIsRUFBYyxLQUFLLGlCQUFpQixFQUMxQyxLQUFLLGNBQWMsV0FBVyxFQUM5QixJQUFNLEVBQU8sS0FBSyxVQUFVLEVBQ3RCLEVBQWEsS0FBSywwQkFBMEIsRUFDNUMsRUFBYSxLQUFLLHFCQUFxQixFQUN2QyxFQUFTLEtBQUssc0JBQXNCLEVBQzFDLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLDBCQUNYLGNBQ0EsT0FDQSxhQUNBLGFBQ0EsUUFDRixDQUFDLEVBT0gsd0JBQXdCLEVBQUcsQ0FDekIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUNwQixFQUFjLEtBQUssaUJBQWlCLEVBQzFDLEtBQUssY0FBYyxPQUFPLEVBQzFCLElBQU0sRUFBTyxLQUFLLFVBQVUsRUFDdEIsRUFBYSxLQUFLLHFCQUFxQixFQUN2QyxFQUFRLEtBQUssc0JBQXNCLEVBQ3pDLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLHNCQUNYLGNBQ0EsT0FDQSxhQUNBLE9BQ0YsQ0FBQyxFQVFILHFCQUFxQixFQUFHLENBQ3RCLE9BQU8sS0FBSyxvQkFBb0IsRUFBVSxNQUFNLEVBQzVDLEtBQUssY0FBYyxFQUFVLEtBQU0sS0FBSyxjQUFjLEVBQ3RELENBQUMsRUFPUCx1QkFBdUIsRUFBRyxDQUN4QixJQUFNLEVBQVEsS0FBSyxPQUFPLE1BQ3BCLEVBQWMsS0FBSyxpQkFBaUIsRUFDMUMsS0FBSyxjQUFjLE1BQU0sRUFDekIsSUFBTSxFQUFPLEtBQUssVUFBVSxFQUN0QixFQUFhLEtBQUsscUJBQXFCLEVBQ3ZDLEVBQVMsS0FBSywwQkFBMEIsRUFDOUMsT0FBTyxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUsscUJBQ1gsY0FDQSxPQUNBLGFBQ0EsUUFDRixDQUFDLEVBUUgseUJBQXlCLEVBQUcsQ0FDMUIsT0FBTyxLQUFLLGFBQ1YsRUFBVSxRQUNWLEtBQUsseUJBQ0wsRUFBVSxPQUNaLEVBTUYsd0JBQXdCLEVBQUcsQ0FDekIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUNwQixFQUFjLEtBQUssaUJBQWlCLEVBQ3BDLEVBQU8sS0FBSyxtQkFBbUIsRUFDL0IsRUFBYSxLQUFLLHFCQUFxQixFQUM3QyxPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxzQkFDWCxjQUNBLE9BQ0EsWUFDRixDQUFDLEVBTUgsa0JBQWtCLEVBQUcsQ0FDbkIsR0FDRSxLQUFLLE9BQU8sTUFBTSxRQUFVLFFBQzVCLEtBQUssT0FBTyxNQUFNLFFBQVUsU0FDNUIsS0FBSyxPQUFPLE1BQU0sUUFBVSxPQUU1QixNQUFNLEVBQ0osS0FBSyxPQUFPLE9BQ1osS0FBSyxPQUFPLE1BQU0sTUFDbEIsR0FBRyxHQUNELEtBQUssT0FBTyxLQUNkLHFEQUNGLEVBR0YsT0FBTyxLQUFLLFVBQVUsRUFPeEIsOEJBQThCLEVBQUcsQ0FDL0IsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUNwQixFQUFjLEtBQUssaUJBQWlCLEVBQzFDLEtBQUssY0FBYyxPQUFPLEVBQzFCLElBQU0sRUFBTyxLQUFLLFVBQVUsRUFDdEIsRUFBYSxLQUFLLHFCQUFxQixFQUN2QyxFQUFTLEtBQUssMkJBQTJCLEVBQy9DLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLDZCQUNYLGNBQ0EsT0FDQSxhQUNBLFFBQ0YsQ0FBQyxFQVFILDBCQUEwQixFQUFHLENBQzNCLE9BQU8sS0FBSyxhQUNWLEVBQVUsUUFDVixLQUFLLG1CQUNMLEVBQVUsT0FDWixFQWdCRix3QkFBd0IsRUFBRyxDQUN6QixJQUFNLEVBQWUsS0FBSyxPQUFPLFVBQVUsRUFFM0MsR0FBSSxFQUFhLE9BQVMsRUFBVSxLQUNsQyxPQUFRLEVBQWEsV0FDZCxTQUNILE9BQU8sS0FBSyxxQkFBcUIsTUFFOUIsU0FDSCxPQUFPLEtBQUsseUJBQXlCLE1BRWxDLE9BQ0gsT0FBTyxLQUFLLHlCQUF5QixNQUVsQyxZQUNILE9BQU8sS0FBSyw0QkFBNEIsTUFFckMsUUFDSCxPQUFPLEtBQUssd0JBQXdCLE1BRWpDLE9BQ0gsT0FBTyxLQUFLLHVCQUF1QixNQUVoQyxRQUNILE9BQU8sS0FBSyw4QkFBOEIsRUFJaEQsTUFBTSxLQUFLLFdBQVcsQ0FBWSxFQVVwQyxvQkFBb0IsRUFBRyxDQUNyQixJQUFNLEVBQVEsS0FBSyxPQUFPLE1BQzFCLEtBQUssY0FBYyxRQUFRLEVBQzNCLEtBQUssY0FBYyxRQUFRLEVBQzNCLElBQU0sRUFBYSxLQUFLLHFCQUFxQixFQUN2QyxFQUFpQixLQUFLLGFBQzFCLEVBQVUsUUFDVixLQUFLLDZCQUNMLEVBQVUsT0FDWixFQUVBLEdBQUksRUFBVyxTQUFXLEdBQUssRUFBZSxTQUFXLEVBQ3ZELE1BQU0sS0FBSyxXQUFXLEVBR3hCLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLGlCQUNYLGFBQ0EsZ0JBQ0YsQ0FBQyxFQU9ILHdCQUF3QixFQUFHLENBQ3pCLElBQU0sRUFBUSxLQUFLLE9BQU8sTUFDMUIsS0FBSyxjQUFjLFFBQVEsRUFDM0IsS0FBSyxjQUFjLFFBQVEsRUFDM0IsSUFBTSxFQUFPLEtBQUssVUFBVSxFQUN0QixFQUFhLEtBQUsscUJBQXFCLEVBRTdDLEdBQUksRUFBVyxTQUFXLEVBQ3hCLE1BQU0sS0FBSyxXQUFXLEVBR3hCLE9BQU8sS0FBSyxLQUFLLEVBQU8sQ0FDdEIsS0FBTSxFQUFLLHNCQUNYLE9BQ0EsWUFDRixDQUFDLEVBU0gsd0JBQXdCLEVBQUcsQ0FDekIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUMxQixLQUFLLGNBQWMsUUFBUSxFQUMzQixLQUFLLGNBQWMsTUFBTSxFQUN6QixJQUFNLEVBQU8sS0FBSyxVQUFVLEVBQ3RCLEVBQWEsS0FBSywwQkFBMEIsRUFDNUMsRUFBYSxLQUFLLHFCQUFxQixFQUN2QyxFQUFTLEtBQUssc0JBQXNCLEVBRTFDLEdBQ0UsRUFBVyxTQUFXLEdBQ3RCLEVBQVcsU0FBVyxHQUN0QixFQUFPLFNBQVcsRUFFbEIsTUFBTSxLQUFLLFdBQVcsRUFHeEIsT0FBTyxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUssc0JBQ1gsT0FDQSxhQUNBLGFBQ0EsUUFDRixDQUFDLEVBU0gsMkJBQTJCLEVBQUcsQ0FDNUIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUMxQixLQUFLLGNBQWMsUUFBUSxFQUMzQixLQUFLLGNBQWMsV0FBVyxFQUM5QixJQUFNLEVBQU8sS0FBSyxVQUFVLEVBQ3RCLEVBQWEsS0FBSywwQkFBMEIsRUFDNUMsRUFBYSxLQUFLLHFCQUFxQixFQUN2QyxFQUFTLEtBQUssc0JBQXNCLEVBRTFDLEdBQ0UsRUFBVyxTQUFXLEdBQ3RCLEVBQVcsU0FBVyxHQUN0QixFQUFPLFNBQVcsRUFFbEIsTUFBTSxLQUFLLFdBQVcsRUFHeEIsT0FBTyxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUsseUJBQ1gsT0FDQSxhQUNBLGFBQ0EsUUFDRixDQUFDLEVBUUgsdUJBQXVCLEVBQUcsQ0FDeEIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUMxQixLQUFLLGNBQWMsUUFBUSxFQUMzQixLQUFLLGNBQWMsT0FBTyxFQUMxQixJQUFNLEVBQU8sS0FBSyxVQUFVLEVBQ3RCLEVBQWEsS0FBSyxxQkFBcUIsRUFDdkMsRUFBUSxLQUFLLHNCQUFzQixFQUV6QyxHQUFJLEVBQVcsU0FBVyxHQUFLLEVBQU0sU0FBVyxFQUM5QyxNQUFNLEtBQUssV0FBVyxFQUd4QixPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxxQkFDWCxPQUNBLGFBQ0EsT0FDRixDQUFDLEVBUUgsc0JBQXNCLEVBQUcsQ0FDdkIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUMxQixLQUFLLGNBQWMsUUFBUSxFQUMzQixLQUFLLGNBQWMsTUFBTSxFQUN6QixJQUFNLEVBQU8sS0FBSyxVQUFVLEVBQ3RCLEVBQWEsS0FBSyxxQkFBcUIsRUFDdkMsRUFBUyxLQUFLLDBCQUEwQixFQUU5QyxHQUFJLEVBQVcsU0FBVyxHQUFLLEVBQU8sU0FBVyxFQUMvQyxNQUFNLEtBQUssV0FBVyxFQUd4QixPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyxvQkFDWCxPQUNBLGFBQ0EsUUFDRixDQUFDLEVBUUgsNkJBQTZCLEVBQUcsQ0FDOUIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUMxQixLQUFLLGNBQWMsUUFBUSxFQUMzQixLQUFLLGNBQWMsT0FBTyxFQUMxQixJQUFNLEVBQU8sS0FBSyxVQUFVLEVBQ3RCLEVBQWEsS0FBSyxxQkFBcUIsRUFDdkMsRUFBUyxLQUFLLDJCQUEyQixFQUUvQyxHQUFJLEVBQVcsU0FBVyxHQUFLLEVBQU8sU0FBVyxFQUMvQyxNQUFNLEtBQUssV0FBVyxFQUd4QixPQUFPLEtBQUssS0FBSyxFQUFPLENBQ3RCLEtBQU0sRUFBSyw0QkFDWCxPQUNBLGFBQ0EsUUFDRixDQUFDLEVBU0gsd0JBQXdCLEVBQUcsQ0FDekIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUNwQixFQUFjLEtBQUssaUJBQWlCLEVBQzFDLEtBQUssY0FBYyxXQUFXLEVBQzlCLEtBQUssWUFBWSxFQUFVLEVBQUUsRUFDN0IsSUFBTSxFQUFPLEtBQUssVUFBVSxFQUN0QixFQUFPLEtBQUssa0JBQWtCLEVBQzlCLEVBQWEsS0FBSyxzQkFBc0IsWUFBWSxFQUMxRCxLQUFLLGNBQWMsSUFBSSxFQUN2QixJQUFNLEVBQVksS0FBSyx3QkFBd0IsRUFDL0MsT0FBTyxLQUFLLEtBQUssRUFBTyxDQUN0QixLQUFNLEVBQUsscUJBQ1gsY0FDQSxPQUNBLFVBQVcsRUFDWCxhQUNBLFdBQ0YsQ0FBQyxFQVFILHVCQUF1QixFQUFHLENBQ3hCLE9BQU8sS0FBSyxjQUFjLEVBQVUsS0FBTSxLQUFLLHNCQUFzQixFQThCdkUsc0JBQXNCLEVBQUcsQ0FDdkIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUNwQixFQUFPLEtBQUssVUFBVSxFQUU1QixHQUFJLE9BQU8sVUFBVSxlQUFlLEtBQUssR0FBbUIsRUFBSyxLQUFLLEVBQ3BFLE9BQU8sRUFHVCxNQUFNLEtBQUssV0FBVyxDQUFLLEVBUzdCLElBQUksQ0FBQyxFQUFZLEVBQU0sQ0FDckIsR0FBSSxLQUFLLFNBQVMsYUFBZSxHQUMvQixFQUFLLElBQU0sSUFBSSxHQUNiLEVBQ0EsS0FBSyxPQUFPLFVBQ1osS0FBSyxPQUFPLE1BQ2QsRUFHRixPQUFPLEVBTVQsSUFBSSxDQUFDLEVBQU0sQ0FDVCxPQUFPLEtBQUssT0FBTyxNQUFNLE9BQVMsRUFPcEMsV0FBVyxDQUFDLEVBQU0sQ0FDaEIsSUFBTSxFQUFRLEtBQUssT0FBTyxNQUUxQixHQUFJLEVBQU0sT0FBUyxFQUVqQixPQURBLEtBQUssYUFBYSxFQUNYLEVBR1QsTUFBTSxFQUNKLEtBQUssT0FBTyxPQUNaLEVBQU0sTUFDTixZQUFZLEdBQWlCLENBQUksWUFBWSxHQUFhLENBQUssSUFDakUsRUFPRixtQkFBbUIsQ0FBQyxFQUFNLENBR3hCLEdBRmMsS0FBSyxPQUFPLE1BRWhCLE9BQVMsRUFFakIsT0FEQSxLQUFLLGFBQWEsRUFDWCxHQUdULE1BQU8sR0FPVCxhQUFhLENBQUMsRUFBTyxDQUNuQixJQUFNLEVBQVEsS0FBSyxPQUFPLE1BRTFCLEdBQUksRUFBTSxPQUFTLEVBQVUsTUFBUSxFQUFNLFFBQVUsRUFDbkQsS0FBSyxhQUFhLE1BRWxCLE9BQU0sRUFDSixLQUFLLE9BQU8sT0FDWixFQUFNLE1BQ04sYUFBYSxhQUFpQixHQUFhLENBQUssSUFDbEQsRUFRSixxQkFBcUIsQ0FBQyxFQUFPLENBQzNCLElBQU0sRUFBUSxLQUFLLE9BQU8sTUFFMUIsR0FBSSxFQUFNLE9BQVMsRUFBVSxNQUFRLEVBQU0sUUFBVSxFQUVuRCxPQURBLEtBQUssYUFBYSxFQUNYLEdBR1QsTUFBTyxHQU1ULFVBQVUsQ0FBQyxFQUFTLENBQ2xCLElBQU0sRUFDSixJQUFZLE1BQVEsSUFBaUIsT0FBSSxFQUFVLEtBQUssT0FBTyxNQUNqRSxPQUFPLEVBQ0wsS0FBSyxPQUFPLE9BQ1osRUFBTSxNQUNOLGNBQWMsR0FBYSxDQUFLLElBQ2xDLEVBUUYsR0FBRyxDQUFDLEVBQVUsRUFBUyxFQUFXLENBQ2hDLEtBQUssWUFBWSxDQUFRLEVBQ3pCLElBQU0sRUFBUSxDQUFDLEVBRWYsT0FBUSxLQUFLLG9CQUFvQixDQUFTLEVBQ3hDLEVBQU0sS0FBSyxFQUFRLEtBQUssSUFBSSxDQUFDLEVBRy9CLE9BQU8sRUFTVCxZQUFZLENBQUMsRUFBVSxFQUFTLEVBQVcsQ0FDekMsR0FBSSxLQUFLLG9CQUFvQixDQUFRLEVBQUcsQ0FDdEMsSUFBTSxFQUFRLENBQUMsRUFFZixFQUNFLEdBQU0sS0FBSyxFQUFRLEtBQUssSUFBSSxDQUFDLFNBQ3JCLEtBQUssb0JBQW9CLENBQVMsR0FFNUMsT0FBTyxFQUdULE1BQU8sQ0FBQyxFQVFWLElBQUksQ0FBQyxFQUFVLEVBQVMsRUFBVyxDQUNqQyxLQUFLLFlBQVksQ0FBUSxFQUN6QixJQUFNLEVBQVEsQ0FBQyxFQUVmLEVBQ0UsR0FBTSxLQUFLLEVBQVEsS0FBSyxJQUFJLENBQUMsU0FDckIsS0FBSyxvQkFBb0IsQ0FBUyxHQUU1QyxPQUFPLEVBUVQsYUFBYSxDQUFDLEVBQWUsRUFBUyxDQUNwQyxLQUFLLG9CQUFvQixDQUFhLEVBQ3RDLElBQU0sRUFBUSxDQUFDLEVBRWYsRUFDRSxHQUFNLEtBQUssRUFBUSxLQUFLLElBQUksQ0FBQyxRQUN0QixLQUFLLG9CQUFvQixDQUFhLEdBRS9DLE9BQU8sRUFHVCxZQUFZLEVBQUcsQ0FDYixJQUFRLGFBQWMsS0FBSyxTQUVyQixFQUFRLEtBQUssT0FBTyxRQUFRLEVBRWxDLEdBQUksRUFBTSxPQUFTLEVBQVUsS0FHM0IsS0FGRSxLQUFLLGNBRUgsSUFBYyxRQUFhLEtBQUssY0FBZ0IsRUFDbEQsTUFBTSxFQUNKLEtBQUssT0FBTyxPQUNaLEVBQU0sTUFDTiwrQkFBK0IsNEJBQ2pDLEdBSVIsQ0FLQSxTQUFTLEVBQVksQ0FBQyxFQUFPLENBQzNCLElBQU0sRUFBUSxFQUFNLE1BQ3BCLE9BQU8sR0FBaUIsRUFBTSxJQUFJLEdBQUssR0FBUyxLQUFPLEtBQUssS0FBVyxJQU16RSxTQUFTLEVBQWdCLENBQUMsRUFBTSxDQUM5QixPQUFPLEdBQXNCLENBQUksRUFBSSxJQUFJLEtBQVUsRUN2L0M5QyxTQUFTLEVBQVcsQ0FBQyxFQUFLLENBQy9CLE1BQU8sSUFBSSxFQUFJLFFBQVEsR0FBZSxFQUFlLEtBR3ZELElBQU0sR0FBZ0IsZ0NBRXRCLFNBQVMsRUFBZSxDQUFDLEVBQUssQ0FDNUIsT0FBTyxHQUFnQixFQUFJLFdBQVcsQ0FBQyxHQUd6QyxJQUFNLEdBQWtCLENBQ3RCLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxNQUNBLE1BQ0EsTUFDQSxVQUNBLE1BQ0EsTUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxHQUNBLEdBQ0EsTUFDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxPQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFNBQ0YsRUN0S08sSUFBTSxHQUFRLE9BQU8sT0FBTyxDQUFDLENBQUMsRUFnRjlCLFNBQVMsQ0FBSyxDQUFDLEVBQU0sRUFBUyxFQUFjLEdBQW1CLENBQ3BFLElBQU0sRUFBZ0IsSUFBSSxJQUUxQixRQUFXLEtBQVEsT0FBTyxPQUFPLENBQUksRUFDbkMsRUFBYyxJQUFJLEVBQU0s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L0QsSUFBRyxFQUFrQixDQUN6QixRQUFRLElBQUksOERBQW1ELEVBRS9ELEtBQUssUUFBUSxFQUNiLElBQU0sRUFBUSxLQUFLLFdBQVcsRUFFOUIsR0FBSSxFQUFPLENBQ1QsSUFBTSxFQUFTLE1BQU0sS0FBSyxhQUFhLEVBQU8sRUFBSSxFQUNsRCxHQUFJLEVBQ0YsS0FBSyxVQUFVLENBQU0sRUFJekIsUUFBUSxJQUFJLGdEQUFxQyxPQU03QyxRQUFPLEVBQWtCLENBQzdCLFFBQVEsSUFBSSx5Q0FBOEIsRUFDMUMsSUFBTSxFQUFRLEtBQUssV0FBVyxFQUU5QixHQUFJLEVBQU8sQ0FDVCxJQUFNLEVBQVMsTUFBTSxLQUFLLGFBQWEsRUFBTyxFQUFLLEVBQ25ELEdBQUksRUFDRixLQUFLLFVBQVUsQ0FBTSxHQVEzQixVQUFVLEVBQVMsQ0FDakIsUUFBUSxJQUFJLDhDQUE4QixFQUMxQyxLQUFLLE9BQU8sTUFBTSxNQUFNLEVBTTFCLGFBQWEsRUFBUSxDQUNuQixJQUFNLEVBQVksS0FBSyxPQUFPLE1BQU0sUUFBUSxFQUM1QyxNQUFPLENBQ0wsVUFBVyxFQUFZLE9BQU8sS0FBSyxDQUFTLEVBQUUsT0FBUyxFQUN2RCxNQUFPLENBQ1QsRUFNRixlQUFlLEVBQUcsQ0FDaEIsT0FBTyxLQUFLLE9BRWhCLENBR0EsSUFBTSxHQUFVLElBQUksR0FHcEIsQUFBQyxPQUFlLFFBQVUsR0FFMUIsR0FBSSxTQUFTLGFBQWUsVUFDMUIsU0FBUyxpQkFBaUIsbUJBQW9CLElBQU0sQ0FDbEQsUUFBUSxJQUFJLG9EQUF5QyxFQUNyRCxHQUFRLElBQUksRUFDYixNQUVELFNBQVEsSUFBSSx5REFBOEMsRUFDMUQsR0FBUSxJQUFJIiwKICAiZGVidWdJZCI6ICJDMjcxNTk3QTUyMkZFRjNDNjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==
