// node_modules/graphql/jsutils/devAssert.mjs
function devAssert(condition, message) {
  const booleanCondition = Boolean(condition);
  if (!booleanCondition) {
    throw new Error(message);
  }
}

// node_modules/graphql/jsutils/isObjectLike.mjs
function isObjectLike(value) {
  return typeof value == "object" && value !== null;
}

// node_modules/graphql/jsutils/invariant.mjs
function invariant(condition, message) {
  const booleanCondition = Boolean(condition);
  if (!booleanCondition) {
    throw new Error(message != null ? message : "Unexpected invariant triggered.");
  }
}

// node_modules/graphql/language/location.mjs
var LineRegExp = /\r\n|[\n\r]/g;
function getLocation(source, position) {
  let lastLineStart = 0;
  let line = 1;
  for (const match of source.body.matchAll(LineRegExp)) {
    typeof match.index === "number" || invariant(false);
    if (match.index >= position) {
      break;
    }
    lastLineStart = match.index + match[0].length;
    line += 1;
  }
  return {
    line,
    column: position + 1 - lastLineStart
  };
}

// node_modules/graphql/language/printLocation.mjs
function printLocation(location) {
  return printSourceLocation(location.source, getLocation(location.source, location.start));
}
function printSourceLocation(source, sourceLocation) {
  const firstLineColumnOffset = source.locationOffset.column - 1;
  const body = "".padStart(firstLineColumnOffset) + source.body;
  const lineIndex = sourceLocation.line - 1;
  const lineOffset = source.locationOffset.line - 1;
  const lineNum = sourceLocation.line + lineOffset;
  const columnOffset = sourceLocation.line === 1 ? firstLineColumnOffset : 0;
  const columnNum = sourceLocation.column + columnOffset;
  const locationStr = `${source.name}:${lineNum}:${columnNum}\n`;
  const lines = body.split(/\r\n|[\n\r]/g);
  const locationLine = lines[lineIndex];
  if (locationLine.length > 120) {
    const subLineIndex = Math.floor(columnNum / 80);
    const subLineColumnNum = columnNum % 80;
    const subLines = [];
    for (let i = 0;i < locationLine.length; i += 80) {
      subLines.push(locationLine.slice(i, i + 80));
    }
    return locationStr + printPrefixedLines([
      [`${lineNum} |`, subLines[0]],
      ...subLines.slice(1, subLineIndex + 1).map((subLine) => ["|", subLine]),
      ["|", "^".padStart(subLineColumnNum)],
      ["|", subLines[subLineIndex + 1]]
    ]);
  }
  return locationStr + printPrefixedLines([
    [`${lineNum - 1} |`, lines[lineIndex - 1]],
    [`${lineNum} |`, locationLine],
    ["|", "^".padStart(columnNum)],
    [`${lineNum + 1} |`, lines[lineIndex + 1]]
  ]);
}
function printPrefixedLines(lines) {
  const existingLines = lines.filter(([_, line]) => line !== undefined);
  const padLen = Math.max(...existingLines.map(([prefix]) => prefix.length));
  return existingLines.map(([prefix, line]) => prefix.padStart(padLen) + (line ? " " + line : "")).join("\n");
}

// node_modules/graphql/error/GraphQLError.mjs
function toNormalizedOptions(args) {
  const firstArg = args[0];
  if (firstArg == null || "kind" in firstArg || "length" in firstArg) {
    return {
      nodes: firstArg,
      source: args[1],
      positions: args[2],
      path: args[3],
      originalError: args[4],
      extensions: args[5]
    };
  }
  return firstArg;
}

class GraphQLError extends Error {
  constructor(message, ...rawArgs) {
    var _this$nodes, _nodeLocations$, _ref;
    const { nodes, source, positions, path, originalError, extensions } = toNormalizedOptions(rawArgs);
    super(message);
    this.name = "GraphQLError";
    this.path = path !== null && path !== undefined ? path : undefined;
    this.originalError = originalError !== null && originalError !== undefined ? originalError : undefined;
    this.nodes = undefinedIfEmpty(Array.isArray(nodes) ? nodes : nodes ? [nodes] : undefined);
    const nodeLocations = undefinedIfEmpty((_this$nodes = this.nodes) === null || _this$nodes === undefined ? undefined : _this$nodes.map((node) => node.loc).filter((loc) => loc != null));
    this.source = source !== null && source !== undefined ? source : nodeLocations === null || nodeLocations === undefined ? undefined : (_nodeLocations$ = nodeLocations[0]) === null || _nodeLocations$ === undefined ? undefined : _nodeLocations$.source;
    this.positions = positions !== null && positions !== undefined ? positions : nodeLocations === null || nodeLocations === undefined ? undefined : nodeLocations.map((loc) => loc.start);
    this.locations = positions && source ? positions.map((pos) => getLocation(source, pos)) : nodeLocations === null || nodeLocations === undefined ? undefined : nodeLocations.map((loc) => getLocation(loc.source, loc.start));
    const originalExtensions = isObjectLike(originalError === null || originalError === undefined ? undefined : originalError.extensions) ? originalError === null || originalError === undefined ? undefined : originalError.extensions : undefined;
    this.extensions = (_ref = extensions !== null && extensions !== undefined ? extensions : originalExtensions) !== null && _ref !== undefined ? _ref : Object.create(null);
    Object.defineProperties(this, {
      message: {
        writable: true,
        enumerable: true
      },
      name: {
        enumerable: false
      },
      nodes: {
        enumerable: false
      },
      source: {
        enumerable: false
      },
      positions: {
        enumerable: false
      },
      originalError: {
        enumerable: false
      }
    });
    if (originalError !== null && originalError !== undefined && originalError.stack) {
      Object.defineProperty(this, "stack", {
        value: originalError.stack,
        writable: true,
        configurable: true
      });
    } else if (Error.captureStackTrace) {
      Error.captureStackTrace(this, GraphQLError);
    } else {
      Object.defineProperty(this, "stack", {
        value: Error().stack,
        writable: true,
        configurable: true
      });
    }
  }
  get [Symbol.toStringTag]() {
    return "GraphQLError";
  }
  toString() {
    let output = this.message;
    if (this.nodes) {
      for (const node of this.nodes) {
        if (node.loc) {
          output += "\n\n" + printLocation(node.loc);
        }
      }
    } else if (this.source && this.locations) {
      for (const location of this.locations) {
        output += "\n\n" + printSourceLocation(this.source, location);
      }
    }
    return output;
  }
  toJSON() {
    const formattedError = {
      message: this.message
    };
    if (this.locations != null) {
      formattedError.locations = this.locations;
    }
    if (this.path != null) {
      formattedError.path = this.path;
    }
    if (this.extensions != null && Object.keys(this.extensions).length > 0) {
      formattedError.extensions = this.extensions;
    }
    return formattedError;
  }
}
function undefinedIfEmpty(array) {
  return array === undefined || array.length === 0 ? undefined : array;
}

// node_modules/graphql/error/syntaxError.mjs
function syntaxError(source, position, description) {
  return new GraphQLError(`Syntax Error: ${description}`, {
    source,
    positions: [position]
  });
}

// node_modules/graphql/language/ast.mjs
class Location {
  constructor(startToken, endToken, source) {
    this.start = startToken.start;
    this.end = endToken.end;
    this.startToken = startToken;
    this.endToken = endToken;
    this.source = source;
  }
  get [Symbol.toStringTag]() {
    return "Location";
  }
  toJSON() {
    return {
      start: this.start,
      end: this.end
    };
  }
}

class Token {
  constructor(kind, start, end, line, column, value) {
    this.kind = kind;
    this.start = start;
    this.end = end;
    this.line = line;
    this.column = column;
    this.value = value;
    this.prev = null;
    this.next = null;
  }
  get [Symbol.toStringTag]() {
    return "Token";
  }
  toJSON() {
    return {
      kind: this.kind,
      value: this.value,
      line: this.line,
      column: this.column
    };
  }
}
var QueryDocumentKeys = {
  Name: [],
  Document: ["definitions"],
  OperationDefinition: [
    "name",
    "variableDefinitions",
    "directives",
    "selectionSet"
  ],
  VariableDefinition: ["variable", "type", "defaultValue", "directives"],
  Variable: ["name"],
  SelectionSet: ["selections"],
  Field: ["alias", "name", "arguments", "directives", "selectionSet"],
  Argument: ["name", "value"],
  FragmentSpread: ["name", "directives"],
  InlineFragment: ["typeCondition", "directives", "selectionSet"],
  FragmentDefinition: [
    "name",
    "variableDefinitions",
    "typeCondition",
    "directives",
    "selectionSet"
  ],
  IntValue: [],
  FloatValue: [],
  StringValue: [],
  BooleanValue: [],
  NullValue: [],
  EnumValue: [],
  ListValue: ["values"],
  ObjectValue: ["fields"],
  ObjectField: ["name", "value"],
  Directive: ["name", "arguments"],
  NamedType: ["name"],
  ListType: ["type"],
  NonNullType: ["type"],
  SchemaDefinition: ["description", "directives", "operationTypes"],
  OperationTypeDefinition: ["type"],
  ScalarTypeDefinition: ["description", "name", "directives"],
  ObjectTypeDefinition: [
    "description",
    "name",
    "interfaces",
    "directives",
    "fields"
  ],
  FieldDefinition: ["description", "name", "arguments", "type", "directives"],
  InputValueDefinition: [
    "description",
    "name",
    "type",
    "defaultValue",
    "directives"
  ],
  InterfaceTypeDefinition: [
    "description",
    "name",
    "interfaces",
    "directives",
    "fields"
  ],
  UnionTypeDefinition: ["description", "name", "directives", "types"],
  EnumTypeDefinition: ["description", "name", "directives", "values"],
  EnumValueDefinition: ["description", "name", "directives"],
  InputObjectTypeDefinition: ["description", "name", "directives", "fields"],
  DirectiveDefinition: ["description", "name", "arguments", "locations"],
  SchemaExtension: ["directives", "operationTypes"],
  ScalarTypeExtension: ["name", "directives"],
  ObjectTypeExtension: ["name", "interfaces", "directives", "fields"],
  InterfaceTypeExtension: ["name", "interfaces", "directives", "fields"],
  UnionTypeExtension: ["name", "directives", "types"],
  EnumTypeExtension: ["name", "directives", "values"],
  InputObjectTypeExtension: ["name", "directives", "fields"]
};
var kindValues = new Set(Object.keys(QueryDocumentKeys));
function isNode(maybeNode) {
  const maybeKind = maybeNode === null || maybeNode === undefined ? undefined : maybeNode.kind;
  return typeof maybeKind === "string" && kindValues.has(maybeKind);
}
var OperationTypeNode;
(function(OperationTypeNode2) {
  OperationTypeNode2["QUERY"] = "query";
  OperationTypeNode2["MUTATION"] = "mutation";
  OperationTypeNode2["SUBSCRIPTION"] = "subscription";
})(OperationTypeNode || (OperationTypeNode = {}));

// node_modules/graphql/language/directiveLocation.mjs
var DirectiveLocation;
(function(DirectiveLocation2) {
  DirectiveLocation2["QUERY"] = "QUERY";
  DirectiveLocation2["MUTATION"] = "MUTATION";
  DirectiveLocation2["SUBSCRIPTION"] = "SUBSCRIPTION";
  DirectiveLocation2["FIELD"] = "FIELD";
  DirectiveLocation2["FRAGMENT_DEFINITION"] = "FRAGMENT_DEFINITION";
  DirectiveLocation2["FRAGMENT_SPREAD"] = "FRAGMENT_SPREAD";
  DirectiveLocation2["INLINE_FRAGMENT"] = "INLINE_FRAGMENT";
  DirectiveLocation2["VARIABLE_DEFINITION"] = "VARIABLE_DEFINITION";
  DirectiveLocation2["SCHEMA"] = "SCHEMA";
  DirectiveLocation2["SCALAR"] = "SCALAR";
  DirectiveLocation2["OBJECT"] = "OBJECT";
  DirectiveLocation2["FIELD_DEFINITION"] = "FIELD_DEFINITION";
  DirectiveLocation2["ARGUMENT_DEFINITION"] = "ARGUMENT_DEFINITION";
  DirectiveLocation2["INTERFACE"] = "INTERFACE";
  DirectiveLocation2["UNION"] = "UNION";
  DirectiveLocation2["ENUM"] = "ENUM";
  DirectiveLocation2["ENUM_VALUE"] = "ENUM_VALUE";
  DirectiveLocation2["INPUT_OBJECT"] = "INPUT_OBJECT";
  DirectiveLocation2["INPUT_FIELD_DEFINITION"] = "INPUT_FIELD_DEFINITION";
})(DirectiveLocation || (DirectiveLocation = {}));

// node_modules/graphql/language/kinds.mjs
var Kind;
(function(Kind2) {
  Kind2["NAME"] = "Name";
  Kind2["DOCUMENT"] = "Document";
  Kind2["OPERATION_DEFINITION"] = "OperationDefinition";
  Kind2["VARIABLE_DEFINITION"] = "VariableDefinition";
  Kind2["SELECTION_SET"] = "SelectionSet";
  Kind2["FIELD"] = "Field";
  Kind2["ARGUMENT"] = "Argument";
  Kind2["FRAGMENT_SPREAD"] = "FragmentSpread";
  Kind2["INLINE_FRAGMENT"] = "InlineFragment";
  Kind2["FRAGMENT_DEFINITION"] = "FragmentDefinition";
  Kind2["VARIABLE"] = "Variable";
  Kind2["INT"] = "IntValue";
  Kind2["FLOAT"] = "FloatValue";
  Kind2["STRING"] = "StringValue";
  Kind2["BOOLEAN"] = "BooleanValue";
  Kind2["NULL"] = "NullValue";
  Kind2["ENUM"] = "EnumValue";
  Kind2["LIST"] = "ListValue";
  Kind2["OBJECT"] = "ObjectValue";
  Kind2["OBJECT_FIELD"] = "ObjectField";
  Kind2["DIRECTIVE"] = "Directive";
  Kind2["NAMED_TYPE"] = "NamedType";
  Kind2["LIST_TYPE"] = "ListType";
  Kind2["NON_NULL_TYPE"] = "NonNullType";
  Kind2["SCHEMA_DEFINITION"] = "SchemaDefinition";
  Kind2["OPERATION_TYPE_DEFINITION"] = "OperationTypeDefinition";
  Kind2["SCALAR_TYPE_DEFINITION"] = "ScalarTypeDefinition";
  Kind2["OBJECT_TYPE_DEFINITION"] = "ObjectTypeDefinition";
  Kind2["FIELD_DEFINITION"] = "FieldDefinition";
  Kind2["INPUT_VALUE_DEFINITION"] = "InputValueDefinition";
  Kind2["INTERFACE_TYPE_DEFINITION"] = "InterfaceTypeDefinition";
  Kind2["UNION_TYPE_DEFINITION"] = "UnionTypeDefinition";
  Kind2["ENUM_TYPE_DEFINITION"] = "EnumTypeDefinition";
  Kind2["ENUM_VALUE_DEFINITION"] = "EnumValueDefinition";
  Kind2["INPUT_OBJECT_TYPE_DEFINITION"] = "InputObjectTypeDefinition";
  Kind2["DIRECTIVE_DEFINITION"] = "DirectiveDefinition";
  Kind2["SCHEMA_EXTENSION"] = "SchemaExtension";
  Kind2["SCALAR_TYPE_EXTENSION"] = "ScalarTypeExtension";
  Kind2["OBJECT_TYPE_EXTENSION"] = "ObjectTypeExtension";
  Kind2["INTERFACE_TYPE_EXTENSION"] = "InterfaceTypeExtension";
  Kind2["UNION_TYPE_EXTENSION"] = "UnionTypeExtension";
  Kind2["ENUM_TYPE_EXTENSION"] = "EnumTypeExtension";
  Kind2["INPUT_OBJECT_TYPE_EXTENSION"] = "InputObjectTypeExtension";
})(Kind || (Kind = {}));

// node_modules/graphql/language/characterClasses.mjs
function isWhiteSpace(code) {
  return code === 9 || code === 32;
}
function isDigit(code) {
  return code >= 48 && code <= 57;
}
function isLetter(code) {
  return code >= 97 && code <= 122 || code >= 65 && code <= 90;
}
function isNameStart(code) {
  return isLetter(code) || code === 95;
}
function isNameContinue(code) {
  return isLetter(code) || isDigit(code) || code === 95;
}

// node_modules/graphql/language/blockString.mjs
function dedentBlockStringLines(lines) {
  var _firstNonEmptyLine2;
  let commonIndent = Number.MAX_SAFE_INTEGER;
  let firstNonEmptyLine = null;
  let lastNonEmptyLine = -1;
  for (let i = 0;i < lines.length; ++i) {
    var _firstNonEmptyLine;
    const line = lines[i];
    const indent = leadingWhitespace(line);
    if (indent === line.length) {
      continue;
    }
    firstNonEmptyLine = (_firstNonEmptyLine = firstNonEmptyLine) !== null && _firstNonEmptyLine !== undefined ? _firstNonEmptyLine : i;
    lastNonEmptyLine = i;
    if (i !== 0 && indent < commonIndent) {
      commonIndent = indent;
    }
  }
  return lines.map((line, i) => i === 0 ? line : line.slice(commonIndent)).slice((_firstNonEmptyLine2 = firstNonEmptyLine) !== null && _firstNonEmptyLine2 !== undefined ? _firstNonEmptyLine2 : 0, lastNonEmptyLine + 1);
}
function leadingWhitespace(str) {
  let i = 0;
  while (i < str.length && isWhiteSpace(str.charCodeAt(i))) {
    ++i;
  }
  return i;
}
function printBlockString(value, options) {
  const escapedValue = value.replace(/"""/g, '\\"""');
  const lines = escapedValue.split(/\r\n|[\n\r]/g);
  const isSingleLine = lines.length === 1;
  const forceLeadingNewLine = lines.length > 1 && lines.slice(1).every((line) => line.length === 0 || isWhiteSpace(line.charCodeAt(0)));
  const hasTrailingTripleQuotes = escapedValue.endsWith('\\"""');
  const hasTrailingQuote = value.endsWith('"') && !hasTrailingTripleQuotes;
  const hasTrailingSlash = value.endsWith("\\");
  const forceTrailingNewline = hasTrailingQuote || hasTrailingSlash;
  const printAsMultipleLines = !(options !== null && options !== undefined && options.minimize) && (!isSingleLine || value.length > 70 || forceTrailingNewline || forceLeadingNewLine || hasTrailingTripleQuotes);
  let result = "";
  const skipLeadingNewLine = isSingleLine && isWhiteSpace(value.charCodeAt(0));
  if (printAsMultipleLines && !skipLeadingNewLine || forceLeadingNewLine) {
    result += "\n";
  }
  result += escapedValue;
  if (printAsMultipleLines || forceTrailingNewline) {
    result += "\n";
  }
  return '"""' + result + '"""';
}

// node_modules/graphql/language/tokenKind.mjs
var TokenKind;
(function(TokenKind2) {
  TokenKind2["SOF"] = "<SOF>";
  TokenKind2["EOF"] = "<EOF>";
  TokenKind2["BANG"] = "!";
  TokenKind2["DOLLAR"] = "$";
  TokenKind2["AMP"] = "&";
  TokenKind2["PAREN_L"] = "(";
  TokenKind2["PAREN_R"] = ")";
  TokenKind2["SPREAD"] = "...";
  TokenKind2["COLON"] = ":";
  TokenKind2["EQUALS"] = "=";
  TokenKind2["AT"] = "@";
  TokenKind2["BRACKET_L"] = "[";
  TokenKind2["BRACKET_R"] = "]";
  TokenKind2["BRACE_L"] = "{";
  TokenKind2["PIPE"] = "|";
  TokenKind2["BRACE_R"] = "}";
  TokenKind2["NAME"] = "Name";
  TokenKind2["INT"] = "Int";
  TokenKind2["FLOAT"] = "Float";
  TokenKind2["STRING"] = "String";
  TokenKind2["BLOCK_STRING"] = "BlockString";
  TokenKind2["COMMENT"] = "Comment";
})(TokenKind || (TokenKind = {}));

// node_modules/graphql/language/lexer.mjs
class Lexer {
  constructor(source) {
    const startOfFileToken = new Token(TokenKind.SOF, 0, 0, 0, 0);
    this.source = source;
    this.lastToken = startOfFileToken;
    this.token = startOfFileToken;
    this.line = 1;
    this.lineStart = 0;
  }
  get [Symbol.toStringTag]() {
    return "Lexer";
  }
  advance() {
    this.lastToken = this.token;
    const token = this.token = this.lookahead();
    return token;
  }
  lookahead() {
    let token = this.token;
    if (token.kind !== TokenKind.EOF) {
      do {
        if (token.next) {
          token = token.next;
        } else {
          const nextToken = readNextToken(this, token.end);
          token.next = nextToken;
          nextToken.prev = token;
          token = nextToken;
        }
      } while (token.kind === TokenKind.COMMENT);
    }
    return token;
  }
}
function isPunctuatorTokenKind(kind) {
  return kind === TokenKind.BANG || kind === TokenKind.DOLLAR || kind === TokenKind.AMP || kind === TokenKind.PAREN_L || kind === TokenKind.PAREN_R || kind === TokenKind.SPREAD || kind === TokenKind.COLON || kind === TokenKind.EQUALS || kind === TokenKind.AT || kind === TokenKind.BRACKET_L || kind === TokenKind.BRACKET_R || kind === TokenKind.BRACE_L || kind === TokenKind.PIPE || kind === TokenKind.BRACE_R;
}
function isUnicodeScalarValue(code) {
  return code >= 0 && code <= 55295 || code >= 57344 && code <= 1114111;
}
function isSupplementaryCodePoint(body, location) {
  return isLeadingSurrogate(body.charCodeAt(location)) && isTrailingSurrogate(body.charCodeAt(location + 1));
}
function isLeadingSurrogate(code) {
  return code >= 55296 && code <= 56319;
}
function isTrailingSurrogate(code) {
  return code >= 56320 && code <= 57343;
}
function printCodePointAt(lexer, location) {
  const code = lexer.source.body.codePointAt(location);
  if (code === undefined) {
    return TokenKind.EOF;
  } else if (code >= 32 && code <= 126) {
    const char = String.fromCodePoint(code);
    return char === '"' ? "'\"'" : `"${char}"`;
  }
  return "U+" + code.toString(16).toUpperCase().padStart(4, "0");
}
function createToken(lexer, kind, start, end, value) {
  const line = lexer.line;
  const col = 1 + start - lexer.lineStart;
  return new Token(kind, start, end, line, col, value);
}
function readNextToken(lexer, start) {
  const body = lexer.source.body;
  const bodyLength = body.length;
  let position = start;
  while (position < bodyLength) {
    const code = body.charCodeAt(position);
    switch (code) {
      case 65279:
      case 9:
      case 32:
      case 44:
        ++position;
        continue;
      case 10:
        ++position;
        ++lexer.line;
        lexer.lineStart = position;
        continue;
      case 13:
        if (body.charCodeAt(position + 1) === 10) {
          position += 2;
        } else {
          ++position;
        }
        ++lexer.line;
        lexer.lineStart = position;
        continue;
      case 35:
        return readComment(lexer, position);
      case 33:
        return createToken(lexer, TokenKind.BANG, position, position + 1);
      case 36:
        return createToken(lexer, TokenKind.DOLLAR, position, position + 1);
      case 38:
        return createToken(lexer, TokenKind.AMP, position, position + 1);
      case 40:
        return createToken(lexer, TokenKind.PAREN_L, position, position + 1);
      case 41:
        return createToken(lexer, TokenKind.PAREN_R, position, position + 1);
      case 46:
        if (body.charCodeAt(position + 1) === 46 && body.charCodeAt(position + 2) === 46) {
          return createToken(lexer, TokenKind.SPREAD, position, position + 3);
        }
        break;
      case 58:
        return createToken(lexer, TokenKind.COLON, position, position + 1);
      case 61:
        return createToken(lexer, TokenKind.EQUALS, position, position + 1);
      case 64:
        return createToken(lexer, TokenKind.AT, position, position + 1);
      case 91:
        return createToken(lexer, TokenKind.BRACKET_L, position, position + 1);
      case 93:
        return createToken(lexer, TokenKind.BRACKET_R, position, position + 1);
      case 123:
        return createToken(lexer, TokenKind.BRACE_L, position, position + 1);
      case 124:
        return createToken(lexer, TokenKind.PIPE, position, position + 1);
      case 125:
        return createToken(lexer, TokenKind.BRACE_R, position, position + 1);
      case 34:
        if (body.charCodeAt(position + 1) === 34 && body.charCodeAt(position + 2) === 34) {
          return readBlockString(lexer, position);
        }
        return readString(lexer, position);
    }
    if (isDigit(code) || code === 45) {
      return readNumber(lexer, position, code);
    }
    if (isNameStart(code)) {
      return readName(lexer, position);
    }
    throw syntaxError(lexer.source, position, code === 39 ? 'Unexpected single quote character (\'), did you mean to use a double quote (")?' : isUnicodeScalarValue(code) || isSupplementaryCodePoint(body, position) ? `Unexpected character: ${printCodePointAt(lexer, position)}.` : `Invalid character: ${printCodePointAt(lexer, position)}.`);
  }
  return createToken(lexer, TokenKind.EOF, bodyLength, bodyLength);
}
function readComment(lexer, start) {
  const body = lexer.source.body;
  const bodyLength = body.length;
  let position = start + 1;
  while (position < bodyLength) {
    const code = body.charCodeAt(position);
    if (code === 10 || code === 13) {
      break;
    }
    if (isUnicodeScalarValue(code)) {
      ++position;
    } else if (isSupplementaryCodePoint(body, position)) {
      position += 2;
    } else {
      break;
    }
  }
  return createToken(lexer, TokenKind.COMMENT, start, position, body.slice(start + 1, position));
}
function readNumber(lexer, start, firstCode) {
  const body = lexer.source.body;
  let position = start;
  let code = firstCode;
  let isFloat = false;
  if (code === 45) {
    code = body.charCodeAt(++position);
  }
  if (code === 48) {
    code = body.charCodeAt(++position);
    if (isDigit(code)) {
      throw syntaxError(lexer.source, position, `Invalid number, unexpected digit after 0: ${printCodePointAt(lexer, position)}.`);
    }
  } else {
    position = readDigits(lexer, position, code);
    code = body.charCodeAt(position);
  }
  if (code === 46) {
    isFloat = true;
    code = body.charCodeAt(++position);
    position = readDigits(lexer, position, code);
    code = body.charCodeAt(position);
  }
  if (code === 69 || code === 101) {
    isFloat = true;
    code = body.charCodeAt(++position);
    if (code === 43 || code === 45) {
      code = body.charCodeAt(++position);
    }
    position = readDigits(lexer, position, code);
    code = body.charCodeAt(position);
  }
  if (code === 46 || isNameStart(code)) {
    throw syntaxError(lexer.source, position, `Invalid number, expected digit but got: ${printCodePointAt(lexer, position)}.`);
  }
  return createToken(lexer, isFloat ? TokenKind.FLOAT : TokenKind.INT, start, position, body.slice(start, position));
}
function readDigits(lexer, start, firstCode) {
  if (!isDigit(firstCode)) {
    throw syntaxError(lexer.source, start, `Invalid number, expected digit but got: ${printCodePointAt(lexer, start)}.`);
  }
  const body = lexer.source.body;
  let position = start + 1;
  while (isDigit(body.charCodeAt(position))) {
    ++position;
  }
  return position;
}
function readString(lexer, start) {
  const body = lexer.source.body;
  const bodyLength = body.length;
  let position = start + 1;
  let chunkStart = position;
  let value = "";
  while (position < bodyLength) {
    const code = body.charCodeAt(position);
    if (code === 34) {
      value += body.slice(chunkStart, position);
      return createToken(lexer, TokenKind.STRING, start, position + 1, value);
    }
    if (code === 92) {
      value += body.slice(chunkStart, position);
      const escape = body.charCodeAt(position + 1) === 117 ? body.charCodeAt(position + 2) === 123 ? readEscapedUnicodeVariableWidth(lexer, position) : readEscapedUnicodeFixedWidth(lexer, position) : readEscapedCharacter(lexer, position);
      value += escape.value;
      position += escape.size;
      chunkStart = position;
      continue;
    }
    if (code === 10 || code === 13) {
      break;
    }
    if (isUnicodeScalarValue(code)) {
      ++position;
    } else if (isSupplementaryCodePoint(body, position)) {
      position += 2;
    } else {
      throw syntaxError(lexer.source, position, `Invalid character within String: ${printCodePointAt(lexer, position)}.`);
    }
  }
  throw syntaxError(lexer.source, position, "Unterminated string.");
}
function readEscapedUnicodeVariableWidth(lexer, position) {
  const body = lexer.source.body;
  let point = 0;
  let size = 3;
  while (size < 12) {
    const code = body.charCodeAt(position + size++);
    if (code === 125) {
      if (size < 5 || !isUnicodeScalarValue(point)) {
        break;
      }
      return {
        value: String.fromCodePoint(point),
        size
      };
    }
    point = point << 4 | readHexDigit(code);
    if (point < 0) {
      break;
    }
  }
  throw syntaxError(lexer.source, position, `Invalid Unicode escape sequence: "${body.slice(position, position + size)}".`);
}
function readEscapedUnicodeFixedWidth(lexer, position) {
  const body = lexer.source.body;
  const code = read16BitHexCode(body, position + 2);
  if (isUnicodeScalarValue(code)) {
    return {
      value: String.fromCodePoint(code),
      size: 6
    };
  }
  if (isLeadingSurrogate(code)) {
    if (body.charCodeAt(position + 6) === 92 && body.charCodeAt(position + 7) === 117) {
      const trailingCode = read16BitHexCode(body, position + 8);
      if (isTrailingSurrogate(trailingCode)) {
        return {
          value: String.fromCodePoint(code, trailingCode),
          size: 12
        };
      }
    }
  }
  throw syntaxError(lexer.source, position, `Invalid Unicode escape sequence: "${body.slice(position, position + 6)}".`);
}
function read16BitHexCode(body, position) {
  return readHexDigit(body.charCodeAt(position)) << 12 | readHexDigit(body.charCodeAt(position + 1)) << 8 | readHexDigit(body.charCodeAt(position + 2)) << 4 | readHexDigit(body.charCodeAt(position + 3));
}
function readHexDigit(code) {
  return code >= 48 && code <= 57 ? code - 48 : code >= 65 && code <= 70 ? code - 55 : code >= 97 && code <= 102 ? code - 87 : -1;
}
function readEscapedCharacter(lexer, position) {
  const body = lexer.source.body;
  const code = body.charCodeAt(position + 1);
  switch (code) {
    case 34:
      return {
        value: '"',
        size: 2
      };
    case 92:
      return {
        value: "\\",
        size: 2
      };
    case 47:
      return {
        value: "/",
        size: 2
      };
    case 98:
      return {
        value: "\b",
        size: 2
      };
    case 102:
      return {
        value: "\f",
        size: 2
      };
    case 110:
      return {
        value: `
`,
        size: 2
      };
    case 114:
      return {
        value: `\r`,
        size: 2
      };
    case 116:
      return {
        value: "\t",
        size: 2
      };
  }
  throw syntaxError(lexer.source, position, `Invalid character escape sequence: "${body.slice(position, position + 2)}".`);
}
function readBlockString(lexer, start) {
  const body = lexer.source.body;
  const bodyLength = body.length;
  let lineStart = lexer.lineStart;
  let position = start + 3;
  let chunkStart = position;
  let currentLine = "";
  const blockLines = [];
  while (position < bodyLength) {
    const code = body.charCodeAt(position);
    if (code === 34 && body.charCodeAt(position + 1) === 34 && body.charCodeAt(position + 2) === 34) {
      currentLine += body.slice(chunkStart, position);
      blockLines.push(currentLine);
      const token = createToken(lexer, TokenKind.BLOCK_STRING, start, position + 3, dedentBlockStringLines(blockLines).join("\n"));
      lexer.line += blockLines.length - 1;
      lexer.lineStart = lineStart;
      return token;
    }
    if (code === 92 && body.charCodeAt(position + 1) === 34 && body.charCodeAt(position + 2) === 34 && body.charCodeAt(position + 3) === 34) {
      currentLine += body.slice(chunkStart, position);
      chunkStart = position + 1;
      position += 4;
      continue;
    }
    if (code === 10 || code === 13) {
      currentLine += body.slice(chunkStart, position);
      blockLines.push(currentLine);
      if (code === 13 && body.charCodeAt(position + 1) === 10) {
        position += 2;
      } else {
        ++position;
      }
      currentLine = "";
      chunkStart = position;
      lineStart = position;
      continue;
    }
    if (isUnicodeScalarValue(code)) {
      ++position;
    } else if (isSupplementaryCodePoint(body, position)) {
      position += 2;
    } else {
      throw syntaxError(lexer.source, position, `Invalid character within String: ${printCodePointAt(lexer, position)}.`);
    }
  }
  throw syntaxError(lexer.source, position, "Unterminated string.");
}
function readName(lexer, start) {
  const body = lexer.source.body;
  const bodyLength = body.length;
  let position = start + 1;
  while (position < bodyLength) {
    const code = body.charCodeAt(position);
    if (isNameContinue(code)) {
      ++position;
    } else {
      break;
    }
  }
  return createToken(lexer, TokenKind.NAME, start, position, body.slice(start, position));
}

// node_modules/graphql/jsutils/inspect.mjs
var MAX_ARRAY_LENGTH = 10;
var MAX_RECURSIVE_DEPTH = 2;
function inspect(value) {
  return formatValue(value, []);
}
function formatValue(value, seenValues) {
  switch (typeof value) {
    case "string":
      return JSON.stringify(value);
    case "function":
      return value.name ? `[function ${value.name}]` : "[function]";
    case "object":
      return formatObjectValue(value, seenValues);
    default:
      return String(value);
  }
}
function formatObjectValue(value, previouslySeenValues) {
  if (value === null) {
    return "null";
  }
  if (previouslySeenValues.includes(value)) {
    return "[Circular]";
  }
  const seenValues = [...previouslySeenValues, value];
  if (isJSONable(value)) {
    const jsonValue = value.toJSON();
    if (jsonValue !== value) {
      return typeof jsonValue === "string" ? jsonValue : formatValue(jsonValue, seenValues);
    }
  } else if (Array.isArray(value)) {
    return formatArray(value, seenValues);
  }
  return formatObject(value, seenValues);
}
function isJSONable(value) {
  return typeof value.toJSON === "function";
}
function formatObject(object, seenValues) {
  const entries = Object.entries(object);
  if (entries.length === 0) {
    return "{}";
  }
  if (seenValues.length > MAX_RECURSIVE_DEPTH) {
    return "[" + getObjectTag(object) + "]";
  }
  const properties = entries.map(([key, value]) => key + ": " + formatValue(value, seenValues));
  return "{ " + properties.join(", ") + " }";
}
function formatArray(array, seenValues) {
  if (array.length === 0) {
    return "[]";
  }
  if (seenValues.length > MAX_RECURSIVE_DEPTH) {
    return "[Array]";
  }
  const len = Math.min(MAX_ARRAY_LENGTH, array.length);
  const remaining = array.length - len;
  const items = [];
  for (let i = 0;i < len; ++i) {
    items.push(formatValue(array[i], seenValues));
  }
  if (remaining === 1) {
    items.push("... 1 more item");
  } else if (remaining > 1) {
    items.push(`... ${remaining} more items`);
  }
  return "[" + items.join(", ") + "]";
}
function getObjectTag(object) {
  const tag = Object.prototype.toString.call(object).replace(/^\[object /, "").replace(/]$/, "");
  if (tag === "Object" && typeof object.constructor === "function") {
    const name = object.constructor.name;
    if (typeof name === "string" && name !== "") {
      return name;
    }
  }
  return tag;
}

// node_modules/graphql/jsutils/instanceOf.mjs
var isProduction = globalThis.process && false;
var instanceOf = isProduction ? function instanceOf2(value, constructor) {
  return value instanceof constructor;
} : function instanceOf3(value, constructor) {
  if (value instanceof constructor) {
    return true;
  }
  if (typeof value === "object" && value !== null) {
    var _value$constructor;
    const className = constructor.prototype[Symbol.toStringTag];
    const valueClassName = Symbol.toStringTag in value ? value[Symbol.toStringTag] : (_value$constructor = value.constructor) === null || _value$constructor === undefined ? undefined : _value$constructor.name;
    if (className === valueClassName) {
      const stringifiedValue = inspect(value);
      throw new Error(`Cannot use ${className} "${stringifiedValue}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`);
    }
  }
  return false;
};

// node_modules/graphql/language/source.mjs
class Source {
  constructor(body, name = "GraphQL request", locationOffset = {
    line: 1,
    column: 1
  }) {
    typeof body === "string" || devAssert(false, `Body must be a string. Received: ${inspect(body)}.`);
    this.body = body;
    this.name = name;
    this.locationOffset = locationOffset;
    this.locationOffset.line > 0 || devAssert(false, "line in locationOffset is 1-indexed and must be positive.");
    this.locationOffset.column > 0 || devAssert(false, "column in locationOffset is 1-indexed and must be positive.");
  }
  get [Symbol.toStringTag]() {
    return "Source";
  }
}
function isSource(source) {
  return instanceOf(source, Source);
}

// node_modules/graphql/language/parser.mjs
function parse(source, options) {
  const parser = new Parser(source, options);
  const document2 = parser.parseDocument();
  Object.defineProperty(document2, "tokenCount", {
    enumerable: false,
    value: parser.tokenCount
  });
  return document2;
}
class Parser {
  constructor(source, options = {}) {
    const sourceObj = isSource(source) ? source : new Source(source);
    this._lexer = new Lexer(sourceObj);
    this._options = options;
    this._tokenCounter = 0;
  }
  get tokenCount() {
    return this._tokenCounter;
  }
  parseName() {
    const token = this.expectToken(TokenKind.NAME);
    return this.node(token, {
      kind: Kind.NAME,
      value: token.value
    });
  }
  parseDocument() {
    return this.node(this._lexer.token, {
      kind: Kind.DOCUMENT,
      definitions: this.many(TokenKind.SOF, this.parseDefinition, TokenKind.EOF)
    });
  }
  parseDefinition() {
    if (this.peek(TokenKind.BRACE_L)) {
      return this.parseOperationDefinition();
    }
    const hasDescription = this.peekDescription();
    const keywordToken = hasDescription ? this._lexer.lookahead() : this._lexer.token;
    if (keywordToken.kind === TokenKind.NAME) {
      switch (keywordToken.value) {
        case "schema":
          return this.parseSchemaDefinition();
        case "scalar":
          return this.parseScalarTypeDefinition();
        case "type":
          return this.parseObjectTypeDefinition();
        case "interface":
          return this.parseInterfaceTypeDefinition();
        case "union":
          return this.parseUnionTypeDefinition();
        case "enum":
          return this.parseEnumTypeDefinition();
        case "input":
          return this.parseInputObjectTypeDefinition();
        case "directive":
          return this.parseDirectiveDefinition();
      }
      if (hasDescription) {
        throw syntaxError(this._lexer.source, this._lexer.token.start, "Unexpected description, descriptions are supported only on type definitions.");
      }
      switch (keywordToken.value) {
        case "query":
        case "mutation":
        case "subscription":
          return this.parseOperationDefinition();
        case "fragment":
          return this.parseFragmentDefinition();
        case "extend":
          return this.parseTypeSystemExtension();
      }
    }
    throw this.unexpected(keywordToken);
  }
  parseOperationDefinition() {
    const start = this._lexer.token;
    if (this.peek(TokenKind.BRACE_L)) {
      return this.node(start, {
        kind: Kind.OPERATION_DEFINITION,
        operation: OperationTypeNode.QUERY,
        name: undefined,
        variableDefinitions: [],
        directives: [],
        selectionSet: this.parseSelectionSet()
      });
    }
    const operation = this.parseOperationType();
    let name;
    if (this.peek(TokenKind.NAME)) {
      name = this.parseName();
    }
    return this.node(start, {
      kind: Kind.OPERATION_DEFINITION,
      operation,
      name,
      variableDefinitions: this.parseVariableDefinitions(),
      directives: this.parseDirectives(false),
      selectionSet: this.parseSelectionSet()
    });
  }
  parseOperationType() {
    const operationToken = this.expectToken(TokenKind.NAME);
    switch (operationToken.value) {
      case "query":
        return OperationTypeNode.QUERY;
      case "mutation":
        return OperationTypeNode.MUTATION;
      case "subscription":
        return OperationTypeNode.SUBSCRIPTION;
    }
    throw this.unexpected(operationToken);
  }
  parseVariableDefinitions() {
    return this.optionalMany(TokenKind.PAREN_L, this.parseVariableDefinition, TokenKind.PAREN_R);
  }
  parseVariableDefinition() {
    return this.node(this._lexer.token, {
      kind: Kind.VARIABLE_DEFINITION,
      variable: this.parseVariable(),
      type: (this.expectToken(TokenKind.COLON), this.parseTypeReference()),
      defaultValue: this.expectOptionalToken(TokenKind.EQUALS) ? this.parseConstValueLiteral() : undefined,
      directives: this.parseConstDirectives()
    });
  }
  parseVariable() {
    const start = this._lexer.token;
    this.expectToken(TokenKind.DOLLAR);
    return this.node(start, {
      kind: Kind.VARIABLE,
      name: this.parseName()
    });
  }
  parseSelectionSet() {
    return this.node(this._lexer.token, {
      kind: Kind.SELECTION_SET,
      selections: this.many(TokenKind.BRACE_L, this.parseSelection, TokenKind.BRACE_R)
    });
  }
  parseSelection() {
    return this.peek(TokenKind.SPREAD) ? this.parseFragment() : this.parseField();
  }
  parseField() {
    const start = this._lexer.token;
    const nameOrAlias = this.parseName();
    let alias;
    let name;
    if (this.expectOptionalToken(TokenKind.COLON)) {
      alias = nameOrAlias;
      name = this.parseName();
    } else {
      name = nameOrAlias;
    }
    return this.node(start, {
      kind: Kind.FIELD,
      alias,
      name,
      arguments: this.parseArguments(false),
      directives: this.parseDirectives(false),
      selectionSet: this.peek(TokenKind.BRACE_L) ? this.parseSelectionSet() : undefined
    });
  }
  parseArguments(isConst) {
    const item = isConst ? this.parseConstArgument : this.parseArgument;
    return this.optionalMany(TokenKind.PAREN_L, item, TokenKind.PAREN_R);
  }
  parseArgument(isConst = false) {
    const start = this._lexer.token;
    const name = this.parseName();
    this.expectToken(TokenKind.COLON);
    return this.node(start, {
      kind: Kind.ARGUMENT,
      name,
      value: this.parseValueLiteral(isConst)
    });
  }
  parseConstArgument() {
    return this.parseArgument(true);
  }
  parseFragment() {
    const start = this._lexer.token;
    this.expectToken(TokenKind.SPREAD);
    const hasTypeCondition = this.expectOptionalKeyword("on");
    if (!hasTypeCondition && this.peek(TokenKind.NAME)) {
      return this.node(start, {
        kind: Kind.FRAGMENT_SPREAD,
        name: this.parseFragmentName(),
        directives: this.parseDirectives(false)
      });
    }
    return this.node(start, {
      kind: Kind.INLINE_FRAGMENT,
      typeCondition: hasTypeCondition ? this.parseNamedType() : undefined,
      directives: this.parseDirectives(false),
      selectionSet: this.parseSelectionSet()
    });
  }
  parseFragmentDefinition() {
    const start = this._lexer.token;
    this.expectKeyword("fragment");
    if (this._options.allowLegacyFragmentVariables === true) {
      return this.node(start, {
        kind: Kind.FRAGMENT_DEFINITION,
        name: this.parseFragmentName(),
        variableDefinitions: this.parseVariableDefinitions(),
        typeCondition: (this.expectKeyword("on"), this.parseNamedType()),
        directives: this.parseDirectives(false),
        selectionSet: this.parseSelectionSet()
      });
    }
    return this.node(start, {
      kind: Kind.FRAGMENT_DEFINITION,
      name: this.parseFragmentName(),
      typeCondition: (this.expectKeyword("on"), this.parseNamedType()),
      directives: this.parseDirectives(false),
      selectionSet: this.parseSelectionSet()
    });
  }
  parseFragmentName() {
    if (this._lexer.token.value === "on") {
      throw this.unexpected();
    }
    return this.parseName();
  }
  parseValueLiteral(isConst) {
    const token = this._lexer.token;
    switch (token.kind) {
      case TokenKind.BRACKET_L:
        return this.parseList(isConst);
      case TokenKind.BRACE_L:
        return this.parseObject(isConst);
      case TokenKind.INT:
        this.advanceLexer();
        return this.node(token, {
          kind: Kind.INT,
          value: token.value
        });
      case TokenKind.FLOAT:
        this.advanceLexer();
        return this.node(token, {
          kind: Kind.FLOAT,
          value: token.value
        });
      case TokenKind.STRING:
      case TokenKind.BLOCK_STRING:
        return this.parseStringLiteral();
      case TokenKind.NAME:
        this.advanceLexer();
        switch (token.value) {
          case "true":
            return this.node(token, {
              kind: Kind.BOOLEAN,
              value: true
            });
          case "false":
            return this.node(token, {
              kind: Kind.BOOLEAN,
              value: false
            });
          case "null":
            return this.node(token, {
              kind: Kind.NULL
            });
          default:
            return this.node(token, {
              kind: Kind.ENUM,
              value: token.value
            });
        }
      case TokenKind.DOLLAR:
        if (isConst) {
          this.expectToken(TokenKind.DOLLAR);
          if (this._lexer.token.kind === TokenKind.NAME) {
            const varName = this._lexer.token.value;
            throw syntaxError(this._lexer.source, token.start, `Unexpected variable "\$${varName}" in constant value.`);
          } else {
            throw this.unexpected(token);
          }
        }
        return this.parseVariable();
      default:
        throw this.unexpected();
    }
  }
  parseConstValueLiteral() {
    return this.parseValueLiteral(true);
  }
  parseStringLiteral() {
    const token = this._lexer.token;
    this.advanceLexer();
    return this.node(token, {
      kind: Kind.STRING,
      value: token.value,
      block: token.kind === TokenKind.BLOCK_STRING
    });
  }
  parseList(isConst) {
    const item = () => this.parseValueLiteral(isConst);
    return this.node(this._lexer.token, {
      kind: Kind.LIST,
      values: this.any(TokenKind.BRACKET_L, item, TokenKind.BRACKET_R)
    });
  }
  parseObject(isConst) {
    const item = () => this.parseObjectField(isConst);
    return this.node(this._lexer.token, {
      kind: Kind.OBJECT,
      fields: this.any(TokenKind.BRACE_L, item, TokenKind.BRACE_R)
    });
  }
  parseObjectField(isConst) {
    const start = this._lexer.token;
    const name = this.parseName();
    this.expectToken(TokenKind.COLON);
    return this.node(start, {
      kind: Kind.OBJECT_FIELD,
      name,
      value: this.parseValueLiteral(isConst)
    });
  }
  parseDirectives(isConst) {
    const directives = [];
    while (this.peek(TokenKind.AT)) {
      directives.push(this.parseDirective(isConst));
    }
    return directives;
  }
  parseConstDirectives() {
    return this.parseDirectives(true);
  }
  parseDirective(isConst) {
    const start = this._lexer.token;
    this.expectToken(TokenKind.AT);
    return this.node(start, {
      kind: Kind.DIRECTIVE,
      name: this.parseName(),
      arguments: this.parseArguments(isConst)
    });
  }
  parseTypeReference() {
    const start = this._lexer.token;
    let type;
    if (this.expectOptionalToken(TokenKind.BRACKET_L)) {
      const innerType = this.parseTypeReference();
      this.expectToken(TokenKind.BRACKET_R);
      type = this.node(start, {
        kind: Kind.LIST_TYPE,
        type: innerType
      });
    } else {
      type = this.parseNamedType();
    }
    if (this.expectOptionalToken(TokenKind.BANG)) {
      return this.node(start, {
        kind: Kind.NON_NULL_TYPE,
        type
      });
    }
    return type;
  }
  parseNamedType() {
    return this.node(this._lexer.token, {
      kind: Kind.NAMED_TYPE,
      name: this.parseName()
    });
  }
  peekDescription() {
    return this.peek(TokenKind.STRING) || this.peek(TokenKind.BLOCK_STRING);
  }
  parseDescription() {
    if (this.peekDescription()) {
      return this.parseStringLiteral();
    }
  }
  parseSchemaDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    this.expectKeyword("schema");
    const directives = this.parseConstDirectives();
    const operationTypes = this.many(TokenKind.BRACE_L, this.parseOperationTypeDefinition, TokenKind.BRACE_R);
    return this.node(start, {
      kind: Kind.SCHEMA_DEFINITION,
      description,
      directives,
      operationTypes
    });
  }
  parseOperationTypeDefinition() {
    const start = this._lexer.token;
    const operation = this.parseOperationType();
    this.expectToken(TokenKind.COLON);
    const type = this.parseNamedType();
    return this.node(start, {
      kind: Kind.OPERATION_TYPE_DEFINITION,
      operation,
      type
    });
  }
  parseScalarTypeDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    this.expectKeyword("scalar");
    const name = this.parseName();
    const directives = this.parseConstDirectives();
    return this.node(start, {
      kind: Kind.SCALAR_TYPE_DEFINITION,
      description,
      name,
      directives
    });
  }
  parseObjectTypeDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    this.expectKeyword("type");
    const name = this.parseName();
    const interfaces = this.parseImplementsInterfaces();
    const directives = this.parseConstDirectives();
    const fields = this.parseFieldsDefinition();
    return this.node(start, {
      kind: Kind.OBJECT_TYPE_DEFINITION,
      description,
      name,
      interfaces,
      directives,
      fields
    });
  }
  parseImplementsInterfaces() {
    return this.expectOptionalKeyword("implements") ? this.delimitedMany(TokenKind.AMP, this.parseNamedType) : [];
  }
  parseFieldsDefinition() {
    return this.optionalMany(TokenKind.BRACE_L, this.parseFieldDefinition, TokenKind.BRACE_R);
  }
  parseFieldDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    const name = this.parseName();
    const args = this.parseArgumentDefs();
    this.expectToken(TokenKind.COLON);
    const type = this.parseTypeReference();
    const directives = this.parseConstDirectives();
    return this.node(start, {
      kind: Kind.FIELD_DEFINITION,
      description,
      name,
      arguments: args,
      type,
      directives
    });
  }
  parseArgumentDefs() {
    return this.optionalMany(TokenKind.PAREN_L, this.parseInputValueDef, TokenKind.PAREN_R);
  }
  parseInputValueDef() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    const name = this.parseName();
    this.expectToken(TokenKind.COLON);
    const type = this.parseTypeReference();
    let defaultValue;
    if (this.expectOptionalToken(TokenKind.EQUALS)) {
      defaultValue = this.parseConstValueLiteral();
    }
    const directives = this.parseConstDirectives();
    return this.node(start, {
      kind: Kind.INPUT_VALUE_DEFINITION,
      description,
      name,
      type,
      defaultValue,
      directives
    });
  }
  parseInterfaceTypeDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    this.expectKeyword("interface");
    const name = this.parseName();
    const interfaces = this.parseImplementsInterfaces();
    const directives = this.parseConstDirectives();
    const fields = this.parseFieldsDefinition();
    return this.node(start, {
      kind: Kind.INTERFACE_TYPE_DEFINITION,
      description,
      name,
      interfaces,
      directives,
      fields
    });
  }
  parseUnionTypeDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    this.expectKeyword("union");
    const name = this.parseName();
    const directives = this.parseConstDirectives();
    const types = this.parseUnionMemberTypes();
    return this.node(start, {
      kind: Kind.UNION_TYPE_DEFINITION,
      description,
      name,
      directives,
      types
    });
  }
  parseUnionMemberTypes() {
    return this.expectOptionalToken(TokenKind.EQUALS) ? this.delimitedMany(TokenKind.PIPE, this.parseNamedType) : [];
  }
  parseEnumTypeDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    this.expectKeyword("enum");
    const name = this.parseName();
    const directives = this.parseConstDirectives();
    const values = this.parseEnumValuesDefinition();
    return this.node(start, {
      kind: Kind.ENUM_TYPE_DEFINITION,
      description,
      name,
      directives,
      values
    });
  }
  parseEnumValuesDefinition() {
    return this.optionalMany(TokenKind.BRACE_L, this.parseEnumValueDefinition, TokenKind.BRACE_R);
  }
  parseEnumValueDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    const name = this.parseEnumValueName();
    const directives = this.parseConstDirectives();
    return this.node(start, {
      kind: Kind.ENUM_VALUE_DEFINITION,
      description,
      name,
      directives
    });
  }
  parseEnumValueName() {
    if (this._lexer.token.value === "true" || this._lexer.token.value === "false" || this._lexer.token.value === "null") {
      throw syntaxError(this._lexer.source, this._lexer.token.start, `${getTokenDesc(this._lexer.token)} is reserved and cannot be used for an enum value.`);
    }
    return this.parseName();
  }
  parseInputObjectTypeDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    this.expectKeyword("input");
    const name = this.parseName();
    const directives = this.parseConstDirectives();
    const fields = this.parseInputFieldsDefinition();
    return this.node(start, {
      kind: Kind.INPUT_OBJECT_TYPE_DEFINITION,
      description,
      name,
      directives,
      fields
    });
  }
  parseInputFieldsDefinition() {
    return this.optionalMany(TokenKind.BRACE_L, this.parseInputValueDef, TokenKind.BRACE_R);
  }
  parseTypeSystemExtension() {
    const keywordToken = this._lexer.lookahead();
    if (keywordToken.kind === TokenKind.NAME) {
      switch (keywordToken.value) {
        case "schema":
          return this.parseSchemaExtension();
        case "scalar":
          return this.parseScalarTypeExtension();
        case "type":
          return this.parseObjectTypeExtension();
        case "interface":
          return this.parseInterfaceTypeExtension();
        case "union":
          return this.parseUnionTypeExtension();
        case "enum":
          return this.parseEnumTypeExtension();
        case "input":
          return this.parseInputObjectTypeExtension();
      }
    }
    throw this.unexpected(keywordToken);
  }
  parseSchemaExtension() {
    const start = this._lexer.token;
    this.expectKeyword("extend");
    this.expectKeyword("schema");
    const directives = this.parseConstDirectives();
    const operationTypes = this.optionalMany(TokenKind.BRACE_L, this.parseOperationTypeDefinition, TokenKind.BRACE_R);
    if (directives.length === 0 && operationTypes.length === 0) {
      throw this.unexpected();
    }
    return this.node(start, {
      kind: Kind.SCHEMA_EXTENSION,
      directives,
      operationTypes
    });
  }
  parseScalarTypeExtension() {
    const start = this._lexer.token;
    this.expectKeyword("extend");
    this.expectKeyword("scalar");
    const name = this.parseName();
    const directives = this.parseConstDirectives();
    if (directives.length === 0) {
      throw this.unexpected();
    }
    return this.node(start, {
      kind: Kind.SCALAR_TYPE_EXTENSION,
      name,
      directives
    });
  }
  parseObjectTypeExtension() {
    const start = this._lexer.token;
    this.expectKeyword("extend");
    this.expectKeyword("type");
    const name = this.parseName();
    const interfaces = this.parseImplementsInterfaces();
    const directives = this.parseConstDirectives();
    const fields = this.parseFieldsDefinition();
    if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {
      throw this.unexpected();
    }
    return this.node(start, {
      kind: Kind.OBJECT_TYPE_EXTENSION,
      name,
      interfaces,
      directives,
      fields
    });
  }
  parseInterfaceTypeExtension() {
    const start = this._lexer.token;
    this.expectKeyword("extend");
    this.expectKeyword("interface");
    const name = this.parseName();
    const interfaces = this.parseImplementsInterfaces();
    const directives = this.parseConstDirectives();
    const fields = this.parseFieldsDefinition();
    if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {
      throw this.unexpected();
    }
    return this.node(start, {
      kind: Kind.INTERFACE_TYPE_EXTENSION,
      name,
      interfaces,
      directives,
      fields
    });
  }
  parseUnionTypeExtension() {
    const start = this._lexer.token;
    this.expectKeyword("extend");
    this.expectKeyword("union");
    const name = this.parseName();
    const directives = this.parseConstDirectives();
    const types = this.parseUnionMemberTypes();
    if (directives.length === 0 && types.length === 0) {
      throw this.unexpected();
    }
    return this.node(start, {
      kind: Kind.UNION_TYPE_EXTENSION,
      name,
      directives,
      types
    });
  }
  parseEnumTypeExtension() {
    const start = this._lexer.token;
    this.expectKeyword("extend");
    this.expectKeyword("enum");
    const name = this.parseName();
    const directives = this.parseConstDirectives();
    const values = this.parseEnumValuesDefinition();
    if (directives.length === 0 && values.length === 0) {
      throw this.unexpected();
    }
    return this.node(start, {
      kind: Kind.ENUM_TYPE_EXTENSION,
      name,
      directives,
      values
    });
  }
  parseInputObjectTypeExtension() {
    const start = this._lexer.token;
    this.expectKeyword("extend");
    this.expectKeyword("input");
    const name = this.parseName();
    const directives = this.parseConstDirectives();
    const fields = this.parseInputFieldsDefinition();
    if (directives.length === 0 && fields.length === 0) {
      throw this.unexpected();
    }
    return this.node(start, {
      kind: Kind.INPUT_OBJECT_TYPE_EXTENSION,
      name,
      directives,
      fields
    });
  }
  parseDirectiveDefinition() {
    const start = this._lexer.token;
    const description = this.parseDescription();
    this.expectKeyword("directive");
    this.expectToken(TokenKind.AT);
    const name = this.parseName();
    const args = this.parseArgumentDefs();
    const repeatable = this.expectOptionalKeyword("repeatable");
    this.expectKeyword("on");
    const locations = this.parseDirectiveLocations();
    return this.node(start, {
      kind: Kind.DIRECTIVE_DEFINITION,
      description,
      name,
      arguments: args,
      repeatable,
      locations
    });
  }
  parseDirectiveLocations() {
    return this.delimitedMany(TokenKind.PIPE, this.parseDirectiveLocation);
  }
  parseDirectiveLocation() {
    const start = this._lexer.token;
    const name = this.parseName();
    if (Object.prototype.hasOwnProperty.call(DirectiveLocation, name.value)) {
      return name;
    }
    throw this.unexpected(start);
  }
  node(startToken, node) {
    if (this._options.noLocation !== true) {
      node.loc = new Location(startToken, this._lexer.lastToken, this._lexer.source);
    }
    return node;
  }
  peek(kind) {
    return this._lexer.token.kind === kind;
  }
  expectToken(kind) {
    const token = this._lexer.token;
    if (token.kind === kind) {
      this.advanceLexer();
      return token;
    }
    throw syntaxError(this._lexer.source, token.start, `Expected ${getTokenKindDesc(kind)}, found ${getTokenDesc(token)}.`);
  }
  expectOptionalToken(kind) {
    const token = this._lexer.token;
    if (token.kind === kind) {
      this.advanceLexer();
      return true;
    }
    return false;
  }
  expectKeyword(value) {
    const token = this._lexer.token;
    if (token.kind === TokenKind.NAME && token.value === value) {
      this.advanceLexer();
    } else {
      throw syntaxError(this._lexer.source, token.start, `Expected "${value}", found ${getTokenDesc(token)}.`);
    }
  }
  expectOptionalKeyword(value) {
    const token = this._lexer.token;
    if (token.kind === TokenKind.NAME && token.value === value) {
      this.advanceLexer();
      return true;
    }
    return false;
  }
  unexpected(atToken) {
    const token = atToken !== null && atToken !== undefined ? atToken : this._lexer.token;
    return syntaxError(this._lexer.source, token.start, `Unexpected ${getTokenDesc(token)}.`);
  }
  any(openKind, parseFn, closeKind) {
    this.expectToken(openKind);
    const nodes = [];
    while (!this.expectOptionalToken(closeKind)) {
      nodes.push(parseFn.call(this));
    }
    return nodes;
  }
  optionalMany(openKind, parseFn, closeKind) {
    if (this.expectOptionalToken(openKind)) {
      const nodes = [];
      do {
        nodes.push(parseFn.call(this));
      } while (!this.expectOptionalToken(closeKind));
      return nodes;
    }
    return [];
  }
  many(openKind, parseFn, closeKind) {
    this.expectToken(openKind);
    const nodes = [];
    do {
      nodes.push(parseFn.call(this));
    } while (!this.expectOptionalToken(closeKind));
    return nodes;
  }
  delimitedMany(delimiterKind, parseFn) {
    this.expectOptionalToken(delimiterKind);
    const nodes = [];
    do {
      nodes.push(parseFn.call(this));
    } while (this.expectOptionalToken(delimiterKind));
    return nodes;
  }
  advanceLexer() {
    const { maxTokens } = this._options;
    const token = this._lexer.advance();
    if (token.kind !== TokenKind.EOF) {
      ++this._tokenCounter;
      if (maxTokens !== undefined && this._tokenCounter > maxTokens) {
        throw syntaxError(this._lexer.source, token.start, `Document contains more that ${maxTokens} tokens. Parsing aborted.`);
      }
    }
  }
}
function getTokenDesc(token) {
  const value = token.value;
  return getTokenKindDesc(token.kind) + (value != null ? ` "${value}"` : "");
}
function getTokenKindDesc(kind) {
  return isPunctuatorTokenKind(kind) ? `"${kind}"` : kind;
}

// node_modules/graphql/language/printString.mjs
function printString(str) {
  return `"${str.replace(escapedRegExp, escapedReplacer)}"`;
}
var escapedRegExp = /[\x00-\x1f\x22\x5c\x7f-\x9f]/g;
function escapedReplacer(str) {
  return escapeSequences[str.charCodeAt(0)];
}
var escapeSequences = [
  "\\u0000",
  "\\u0001",
  "\\u0002",
  "\\u0003",
  "\\u0004",
  "\\u0005",
  "\\u0006",
  "\\u0007",
  "\\b",
  "\\t",
  "\\n",
  "\\u000B",
  "\\f",
  "\\r",
  "\\u000E",
  "\\u000F",
  "\\u0010",
  "\\u0011",
  "\\u0012",
  "\\u0013",
  "\\u0014",
  "\\u0015",
  "\\u0016",
  "\\u0017",
  "\\u0018",
  "\\u0019",
  "\\u001A",
  "\\u001B",
  "\\u001C",
  "\\u001D",
  "\\u001E",
  "\\u001F",
  "",
  "",
  '\\"',
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "\\\\",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "",
  "\\u007F",
  "\\u0080",
  "\\u0081",
  "\\u0082",
  "\\u0083",
  "\\u0084",
  "\\u0085",
  "\\u0086",
  "\\u0087",
  "\\u0088",
  "\\u0089",
  "\\u008A",
  "\\u008B",
  "\\u008C",
  "\\u008D",
  "\\u008E",
  "\\u008F",
  "\\u0090",
  "\\u0091",
  "\\u0092",
  "\\u0093",
  "\\u0094",
  "\\u0095",
  "\\u0096",
  "\\u0097",
  "\\u0098",
  "\\u0099",
  "\\u009A",
  "\\u009B",
  "\\u009C",
  "\\u009D",
  "\\u009E",
  "\\u009F"
];

// node_modules/graphql/language/visitor.mjs
var BREAK = Object.freeze({});
function visit(root, visitor, visitorKeys = QueryDocumentKeys) {
  const enterLeaveMap = new Map;
  for (const kind of Object.values(Kind)) {
    enterLeaveMap.set(kind, getEnterLeaveForKind(visitor, kind));
  }
  let stack = undefined;
  let inArray = Array.isArray(root);
  let keys = [root];
  let index = -1;
  let edits = [];
  let node = root;
  let key = undefined;
  let parent = undefined;
  const path = [];
  const ancestors = [];
  do {
    index++;
    const isLeaving = index === keys.length;
    const isEdited = isLeaving && edits.length !== 0;
    if (isLeaving) {
      key = ancestors.length === 0 ? undefined : path[path.length - 1];
      node = parent;
      parent = ancestors.pop();
      if (isEdited) {
        if (inArray) {
          node = node.slice();
          let editOffset = 0;
          for (const [editKey, editValue] of edits) {
            const arrayKey = editKey - editOffset;
            if (editValue === null) {
              node.splice(arrayKey, 1);
              editOffset++;
            } else {
              node[arrayKey] = editValue;
            }
          }
        } else {
          node = { ...node };
          for (const [editKey, editValue] of edits) {
            node[editKey] = editValue;
          }
        }
      }
      index = stack.index;
      keys = stack.keys;
      edits = stack.edits;
      inArray = stack.inArray;
      stack = stack.prev;
    } else if (parent) {
      key = inArray ? index : keys[index];
      node = parent[key];
      if (node === null || node === undefined) {
        continue;
      }
      path.push(key);
    }
    let result;
    if (!Array.isArray(node)) {
      var _enterLeaveMap$get, _enterLeaveMap$get2;
      isNode(node) || devAssert(false, `Invalid AST Node: ${inspect(node)}.`);
      const visitFn = isLeaving ? (_enterLeaveMap$get = enterLeaveMap.get(node.kind)) === null || _enterLeaveMap$get === undefined ? undefined : _enterLeaveMap$get.leave : (_enterLeaveMap$get2 = enterLeaveMap.get(node.kind)) === null || _enterLeaveMap$get2 === undefined ? undefined : _enterLeaveMap$get2.enter;
      result = visitFn === null || visitFn === undefined ? undefined : visitFn.call(visitor, node, key, parent, path, ancestors);
      if (result === BREAK) {
        break;
      }
      if (result === false) {
        if (!isLeaving) {
          path.pop();
          continue;
        }
      } else if (result !== undefined) {
        edits.push([key, result]);
        if (!isLeaving) {
          if (isNode(result)) {
            node = result;
          } else {
            path.pop();
            continue;
          }
        }
      }
    }
    if (result === undefined && isEdited) {
      edits.push([key, node]);
    }
    if (isLeaving) {
      path.pop();
    } else {
      var _node$kind;
      stack = {
        inArray,
        index,
        keys,
        edits,
        prev: stack
      };
      inArray = Array.isArray(node);
      keys = inArray ? node : (_node$kind = visitorKeys[node.kind]) !== null && _node$kind !== undefined ? _node$kind : [];
      index = -1;
      edits = [];
      if (parent) {
        ancestors.push(parent);
      }
      parent = node;
    }
  } while (stack !== undefined);
  if (edits.length !== 0) {
    return edits[edits.length - 1][1];
  }
  return root;
}
function getEnterLeaveForKind(visitor, kind) {
  const kindVisitor = visitor[kind];
  if (typeof kindVisitor === "object") {
    return kindVisitor;
  } else if (typeof kindVisitor === "function") {
    return {
      enter: kindVisitor,
      leave: undefined
    };
  }
  return {
    enter: visitor.enter,
    leave: visitor.leave
  };
}

// node_modules/graphql/language/printer.mjs
function print(ast) {
  return visit(ast, printDocASTReducer);
}
var MAX_LINE_LENGTH = 80;
var printDocASTReducer = {
  Name: {
    leave: (node) => node.value
  },
  Variable: {
    leave: (node) => "$" + node.name
  },
  Document: {
    leave: (node) => join(node.definitions, "\n\n")
  },
  OperationDefinition: {
    leave(node) {
      const varDefs = wrap("(", join(node.variableDefinitions, ", "), ")");
      const prefix = join([
        node.operation,
        join([node.name, varDefs]),
        join(node.directives, " ")
      ], " ");
      return (prefix === "query" ? "" : prefix + " ") + node.selectionSet;
    }
  },
  VariableDefinition: {
    leave: ({ variable, type, defaultValue, directives }) => variable + ": " + type + wrap(" = ", defaultValue) + wrap(" ", join(directives, " "))
  },
  SelectionSet: {
    leave: ({ selections }) => block(selections)
  },
  Field: {
    leave({ alias, name, arguments: args, directives, selectionSet }) {
      const prefix = wrap("", alias, ": ") + name;
      let argsLine = prefix + wrap("(", join(args, ", "), ")");
      if (argsLine.length > MAX_LINE_LENGTH) {
        argsLine = prefix + wrap("(\n", indent(join(args, "\n")), "\n)");
      }
      return join([argsLine, join(directives, " "), selectionSet], " ");
    }
  },
  Argument: {
    leave: ({ name, value }) => name + ": " + value
  },
  FragmentSpread: {
    leave: ({ name, directives }) => "..." + name + wrap(" ", join(directives, " "))
  },
  InlineFragment: {
    leave: ({ typeCondition, directives, selectionSet }) => join([
      "...",
      wrap("on ", typeCondition),
      join(directives, " "),
      selectionSet
    ], " ")
  },
  FragmentDefinition: {
    leave: ({ name, typeCondition, variableDefinitions, directives, selectionSet }) => `fragment ${name}${wrap("(", join(variableDefinitions, ", "), ")")} ` + `on ${typeCondition} ${wrap("", join(directives, " "), " ")}` + selectionSet
  },
  IntValue: {
    leave: ({ value }) => value
  },
  FloatValue: {
    leave: ({ value }) => value
  },
  StringValue: {
    leave: ({ value, block: isBlockString }) => isBlockString ? printBlockString(value) : printString(value)
  },
  BooleanValue: {
    leave: ({ value }) => value ? "true" : "false"
  },
  NullValue: {
    leave: () => "null"
  },
  EnumValue: {
    leave: ({ value }) => value
  },
  ListValue: {
    leave: ({ values }) => "[" + join(values, ", ") + "]"
  },
  ObjectValue: {
    leave: ({ fields }) => "{" + join(fields, ", ") + "}"
  },
  ObjectField: {
    leave: ({ name, value }) => name + ": " + value
  },
  Directive: {
    leave: ({ name, arguments: args }) => "@" + name + wrap("(", join(args, ", "), ")")
  },
  NamedType: {
    leave: ({ name }) => name
  },
  ListType: {
    leave: ({ type }) => "[" + type + "]"
  },
  NonNullType: {
    leave: ({ type }) => type + "!"
  },
  SchemaDefinition: {
    leave: ({ description, directives, operationTypes }) => wrap("", description, "\n") + join(["schema", join(directives, " "), block(operationTypes)], " ")
  },
  OperationTypeDefinition: {
    leave: ({ operation, type }) => operation + ": " + type
  },
  ScalarTypeDefinition: {
    leave: ({ description, name, directives }) => wrap("", description, "\n") + join(["scalar", name, join(directives, " ")], " ")
  },
  ObjectTypeDefinition: {
    leave: ({ description, name, interfaces, directives, fields }) => wrap("", description, "\n") + join([
      "type",
      name,
      wrap("implements ", join(interfaces, " & ")),
      join(directives, " "),
      block(fields)
    ], " ")
  },
  FieldDefinition: {
    leave: ({ description, name, arguments: args, type, directives }) => wrap("", description, "\n") + name + (hasMultilineItems(args) ? wrap("(\n", indent(join(args, "\n")), "\n)") : wrap("(", join(args, ", "), ")")) + ": " + type + wrap(" ", join(directives, " "))
  },
  InputValueDefinition: {
    leave: ({ description, name, type, defaultValue, directives }) => wrap("", description, "\n") + join([name + ": " + type, wrap("= ", defaultValue), join(directives, " ")], " ")
  },
  InterfaceTypeDefinition: {
    leave: ({ description, name, interfaces, directives, fields }) => wrap("", description, "\n") + join([
      "interface",
      name,
      wrap("implements ", join(interfaces, " & ")),
      join(directives, " "),
      block(fields)
    ], " ")
  },
  UnionTypeDefinition: {
    leave: ({ description, name, directives, types }) => wrap("", description, "\n") + join(["union", name, join(directives, " "), wrap("= ", join(types, " | "))], " ")
  },
  EnumTypeDefinition: {
    leave: ({ description, name, directives, values }) => wrap("", description, "\n") + join(["enum", name, join(directives, " "), block(values)], " ")
  },
  EnumValueDefinition: {
    leave: ({ description, name, directives }) => wrap("", description, "\n") + join([name, join(directives, " ")], " ")
  },
  InputObjectTypeDefinition: {
    leave: ({ description, name, directives, fields }) => wrap("", description, "\n") + join(["input", name, join(directives, " "), block(fields)], " ")
  },
  DirectiveDefinition: {
    leave: ({ description, name, arguments: args, repeatable, locations }) => wrap("", description, "\n") + "directive @" + name + (hasMultilineItems(args) ? wrap("(\n", indent(join(args, "\n")), "\n)") : wrap("(", join(args, ", "), ")")) + (repeatable ? " repeatable" : "") + " on " + join(locations, " | ")
  },
  SchemaExtension: {
    leave: ({ directives, operationTypes }) => join(["extend schema", join(directives, " "), block(operationTypes)], " ")
  },
  ScalarTypeExtension: {
    leave: ({ name, directives }) => join(["extend scalar", name, join(directives, " ")], " ")
  },
  ObjectTypeExtension: {
    leave: ({ name, interfaces, directives, fields }) => join([
      "extend type",
      name,
      wrap("implements ", join(interfaces, " & ")),
      join(directives, " "),
      block(fields)
    ], " ")
  },
  InterfaceTypeExtension: {
    leave: ({ name, interfaces, directives, fields }) => join([
      "extend interface",
      name,
      wrap("implements ", join(interfaces, " & ")),
      join(directives, " "),
      block(fields)
    ], " ")
  },
  UnionTypeExtension: {
    leave: ({ name, directives, types }) => join([
      "extend union",
      name,
      join(directives, " "),
      wrap("= ", join(types, " | "))
    ], " ")
  },
  EnumTypeExtension: {
    leave: ({ name, directives, values }) => join(["extend enum", name, join(directives, " "), block(values)], " ")
  },
  InputObjectTypeExtension: {
    leave: ({ name, directives, fields }) => join(["extend input", name, join(directives, " "), block(fields)], " ")
  }
};
function join(maybeArray, separator = "") {
  var _maybeArray$filter$jo;
  return (_maybeArray$filter$jo = maybeArray === null || maybeArray === undefined ? undefined : maybeArray.filter((x) => x).join(separator)) !== null && _maybeArray$filter$jo !== undefined ? _maybeArray$filter$jo : "";
}
function block(array) {
  return wrap("{\n", indent(join(array, "\n")), "\n}");
}
function wrap(start, maybeString, end = "") {
  return maybeString != null && maybeString !== "" ? start + maybeString + end : "";
}
function indent(str) {
  return wrap("  ", str.replace(/\n/g, "\n  "));
}
function hasMultilineItems(maybeArray) {
  var _maybeArray$some;
  return (_maybeArray$some = maybeArray === null || maybeArray === undefined ? undefined : maybeArray.some((str) => str.includes("\n"))) !== null && _maybeArray$some !== undefined ? _maybeArray$some : false;
}
// node_modules/tslib/tslib.es6.mjs
var extendStatics = function(d, b) {
  extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
    d2.__proto__ = b2;
  } || function(d2, b2) {
    for (var p in b2)
      if (Object.prototype.hasOwnProperty.call(b2, p))
        d2[p] = b2[p];
  };
  return extendStatics(d, b);
};
function __extends(d, b) {
  if (typeof b !== "function" && b !== null)
    throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
  extendStatics(d, b);
  function __() {
    this.constructor = d;
  }
  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __);
}
var __assign = function() {
  __assign = Object.assign || function __assign(t) {
    for (var s, i = 1, n = arguments.length;i < n; i++) {
      s = arguments[i];
      for (var p in s)
        if (Object.prototype.hasOwnProperty.call(s, p))
          t[p] = s[p];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
function __awaiter(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}
function __generator(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1)
      throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === "function" ? Iterator : Object).prototype);
  return g.next = verb(0), g["throw"] = verb(1), g["return"] = verb(2), typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f)
      throw new TypeError("Generator is already executing.");
    while (g && (g = 0, op[0] && (_ = 0)), _)
      try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)
          return t;
        if (y = 0, t)
          op = [op[0] & 2, t.value];
        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;
          case 4:
            _.label++;
            return { value: op[1], done: false };
          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;
          case 7:
            op = _.ops.pop();
            _.trys.pop();
            continue;
          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }
            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }
            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }
            if (t && _.label < t[2]) {
              _.label = t[2];
              _.ops.push(op);
              break;
            }
            if (t[2])
              _.ops.pop();
            _.trys.pop();
            continue;
        }
        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : undefined, done: true };
  }
}
function __values(o) {
  var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
  if (m)
    return m.call(o);
  if (o && typeof o.length === "number")
    return {
      next: function() {
        if (o && i >= o.length)
          o = undefined;
        return { value: o && o[i++], done: !o };
      }
    };
  throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function __read(o, n) {
  var m = typeof Symbol === "function" && o[Symbol.iterator];
  if (!m)
    return o;
  var i = m.call(o), r, ar = [], e;
  try {
    while ((n === undefined || n-- > 0) && !(r = i.next()).done)
      ar.push(r.value);
  } catch (error) {
    e = { error };
  } finally {
    try {
      if (r && !r.done && (m = i["return"]))
        m.call(i);
    } finally {
      if (e)
        throw e.error;
    }
  }
  return ar;
}
function __spreadArray(to, from, pack) {
  if (pack || arguments.length === 2)
    for (var i = 0, l = from.length, ar;i < l; i++) {
      if (ar || !(i in from)) {
        if (!ar)
          ar = Array.prototype.slice.call(from, 0, i);
        ar[i] = from[i];
      }
    }
  return to.concat(ar || Array.prototype.slice.call(from));
}
function __await(v) {
  return this instanceof __await ? (this.v = v, this) : new __await(v);
}
function __asyncGenerator(thisArg, _arguments, generator) {
  if (!Symbol.asyncIterator)
    throw new TypeError("Symbol.asyncIterator is not defined.");
  var g = generator.apply(thisArg, _arguments || []), i, q = [];
  return i = Object.create((typeof AsyncIterator === "function" ? AsyncIterator : Object).prototype), verb("next"), verb("throw"), verb("return", awaitReturn), i[Symbol.asyncIterator] = function() {
    return this;
  }, i;
  function awaitReturn(f) {
    return function(v) {
      return Promise.resolve(v).then(f, reject);
    };
  }
  function verb(n, f) {
    if (g[n]) {
      i[n] = function(v) {
        return new Promise(function(a, b) {
          q.push([n, v, a, b]) > 1 || resume(n, v);
        });
      };
      if (f)
        i[n] = f(i[n]);
    }
  }
  function resume(n, v) {
    try {
      step(g[n](v));
    } catch (e) {
      settle(q[0][3], e);
    }
  }
  function step(r) {
    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);
  }
  function fulfill(value) {
    resume("next", value);
  }
  function reject(value) {
    resume("throw", value);
  }
  function settle(f, v) {
    if (f(v), q.shift(), q.length)
      resume(q[0][0], q[0][1]);
  }
}
function __asyncValues(o) {
  if (!Symbol.asyncIterator)
    throw new TypeError("Symbol.asyncIterator is not defined.");
  var m = o[Symbol.asyncIterator], i;
  return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function() {
    return this;
  }, i);
  function verb(n) {
    i[n] = o[n] && function(v) {
      return new Promise(function(resolve, reject) {
        v = o[n](v), settle(resolve, reject, v.done, v.value);
      });
    };
  }
  function settle(resolve, reject, d, v) {
    Promise.resolve(v).then(function(v2) {
      resolve({ value: v2, done: d });
    }, reject);
  }
}

// node_modules/rxjs/dist/esm5/internal/util/isFunction.js
function isFunction(value) {
  return typeof value === "function";
}

// node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js
function createErrorClass(createImpl) {
  var _super = function(instance) {
    Error.call(instance);
    instance.stack = new Error().stack;
  };
  var ctorFunc = createImpl(_super);
  ctorFunc.prototype = Object.create(Error.prototype);
  ctorFunc.prototype.constructor = ctorFunc;
  return ctorFunc;
}

// node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js
var UnsubscriptionError = createErrorClass(function(_super) {
  return function UnsubscriptionErrorImpl(errors) {
    _super(this);
    this.message = errors ? errors.length + " errors occurred during unsubscription:\n" + errors.map(function(err, i) {
      return i + 1 + ") " + err.toString();
    }).join("\n  ") : "";
    this.name = "UnsubscriptionError";
    this.errors = errors;
  };
});

// node_modules/rxjs/dist/esm5/internal/util/arrRemove.js
function arrRemove(arr, item) {
  if (arr) {
    var index = arr.indexOf(item);
    0 <= index && arr.splice(index, 1);
  }
}

// node_modules/rxjs/dist/esm5/internal/Subscription.js
var Subscription = function() {
  function Subscription2(initialTeardown) {
    this.initialTeardown = initialTeardown;
    this.closed = false;
    this._parentage = null;
    this._finalizers = null;
  }
  Subscription2.prototype.unsubscribe = function() {
    var e_1, _a, e_2, _b;
    var errors;
    if (!this.closed) {
      this.closed = true;
      var _parentage = this._parentage;
      if (_parentage) {
        this._parentage = null;
        if (Array.isArray(_parentage)) {
          try {
            for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next();!_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {
              var parent_1 = _parentage_1_1.value;
              parent_1.remove(this);
            }
          } catch (e_1_1) {
            e_1 = { error: e_1_1 };
          } finally {
            try {
              if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return))
                _a.call(_parentage_1);
            } finally {
              if (e_1)
                throw e_1.error;
            }
          }
        } else {
          _parentage.remove(this);
        }
      }
      var initialFinalizer = this.initialTeardown;
      if (isFunction(initialFinalizer)) {
        try {
          initialFinalizer();
        } catch (e) {
          errors = e instanceof UnsubscriptionError ? e.errors : [e];
        }
      }
      var _finalizers = this._finalizers;
      if (_finalizers) {
        this._finalizers = null;
        try {
          for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next();!_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {
            var finalizer = _finalizers_1_1.value;
            try {
              execFinalizer(finalizer);
            } catch (err) {
              errors = errors !== null && errors !== undefined ? errors : [];
              if (err instanceof UnsubscriptionError) {
                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));
              } else {
                errors.push(err);
              }
            }
          }
        } catch (e_2_1) {
          e_2 = { error: e_2_1 };
        } finally {
          try {
            if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return))
              _b.call(_finalizers_1);
          } finally {
            if (e_2)
              throw e_2.error;
          }
        }
      }
      if (errors) {
        throw new UnsubscriptionError(errors);
      }
    }
  };
  Subscription2.prototype.add = function(teardown) {
    var _a;
    if (teardown && teardown !== this) {
      if (this.closed) {
        execFinalizer(teardown);
      } else {
        if (teardown instanceof Subscription2) {
          if (teardown.closed || teardown._hasParent(this)) {
            return;
          }
          teardown._addParent(this);
        }
        (this._finalizers = (_a = this._finalizers) !== null && _a !== undefined ? _a : []).push(teardown);
      }
    }
  };
  Subscription2.prototype._hasParent = function(parent) {
    var _parentage = this._parentage;
    return _parentage === parent || Array.isArray(_parentage) && _parentage.includes(parent);
  };
  Subscription2.prototype._addParent = function(parent) {
    var _parentage = this._parentage;
    this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;
  };
  Subscription2.prototype._removeParent = function(parent) {
    var _parentage = this._parentage;
    if (_parentage === parent) {
      this._parentage = null;
    } else if (Array.isArray(_parentage)) {
      arrRemove(_parentage, parent);
    }
  };
  Subscription2.prototype.remove = function(teardown) {
    var _finalizers = this._finalizers;
    _finalizers && arrRemove(_finalizers, teardown);
    if (teardown instanceof Subscription2) {
      teardown._removeParent(this);
    }
  };
  Subscription2.EMPTY = function() {
    var empty = new Subscription2;
    empty.closed = true;
    return empty;
  }();
  return Subscription2;
}();
var EMPTY_SUBSCRIPTION = Subscription.EMPTY;
function isSubscription(value) {
  return value instanceof Subscription || value && "closed" in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe);
}
function execFinalizer(finalizer) {
  if (isFunction(finalizer)) {
    finalizer();
  } else {
    finalizer.unsubscribe();
  }
}

// node_modules/rxjs/dist/esm5/internal/config.js
var config = {
  onUnhandledError: null,
  onStoppedNotification: null,
  Promise: undefined,
  useDeprecatedSynchronousErrorHandling: false,
  useDeprecatedNextContext: false
};

// node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js
var timeoutProvider = {
  setTimeout: function(handler, timeout) {
    var args = [];
    for (var _i = 2;_i < arguments.length; _i++) {
      args[_i - 2] = arguments[_i];
    }
    var delegate = timeoutProvider.delegate;
    if (delegate === null || delegate === undefined ? undefined : delegate.setTimeout) {
      return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));
    }
    return setTimeout.apply(undefined, __spreadArray([handler, timeout], __read(args)));
  },
  clearTimeout: function(handle) {
    var delegate = timeoutProvider.delegate;
    return ((delegate === null || delegate === undefined ? undefined : delegate.clearTimeout) || clearTimeout)(handle);
  },
  delegate: undefined
};

// node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js
function reportUnhandledError(err) {
  timeoutProvider.setTimeout(function() {
    var onUnhandledError = config.onUnhandledError;
    if (onUnhandledError) {
      onUnhandledError(err);
    } else {
      throw err;
    }
  });
}

// node_modules/rxjs/dist/esm5/internal/util/noop.js
function noop() {
}

// node_modules/rxjs/dist/esm5/internal/NotificationFactories.js
var COMPLETE_NOTIFICATION = function() {
  return createNotification("C", undefined, undefined);
}();
function errorNotification(error) {
  return createNotification("E", undefined, error);
}
function nextNotification(value) {
  return createNotification("N", value, undefined);
}
function createNotification(kind, value, error) {
  return {
    kind,
    value,
    error
  };
}

// node_modules/rxjs/dist/esm5/internal/util/errorContext.js
var context = null;
function errorContext(cb) {
  if (config.useDeprecatedSynchronousErrorHandling) {
    var isRoot = !context;
    if (isRoot) {
      context = { errorThrown: false, error: null };
    }
    cb();
    if (isRoot) {
      var _a = context, errorThrown = _a.errorThrown, error = _a.error;
      context = null;
      if (errorThrown) {
        throw error;
      }
    }
  } else {
    cb();
  }
}
function captureError(err) {
  if (config.useDeprecatedSynchronousErrorHandling && context) {
    context.errorThrown = true;
    context.error = err;
  }
}

// node_modules/rxjs/dist/esm5/internal/Subscriber.js
var Subscriber = function(_super) {
  __extends(Subscriber2, _super);
  function Subscriber2(destination) {
    var _this = _super.call(this) || this;
    _this.isStopped = false;
    if (destination) {
      _this.destination = destination;
      if (isSubscription(destination)) {
        destination.add(_this);
      }
    } else {
      _this.destination = EMPTY_OBSERVER;
    }
    return _this;
  }
  Subscriber2.create = function(next, error, complete) {
    return new SafeSubscriber(next, error, complete);
  };
  Subscriber2.prototype.next = function(value) {
    if (this.isStopped) {
      handleStoppedNotification(nextNotification(value), this);
    } else {
      this._next(value);
    }
  };
  Subscriber2.prototype.error = function(err) {
    if (this.isStopped) {
      handleStoppedNotification(errorNotification(err), this);
    } else {
      this.isStopped = true;
      this._error(err);
    }
  };
  Subscriber2.prototype.complete = function() {
    if (this.isStopped) {
      handleStoppedNotification(COMPLETE_NOTIFICATION, this);
    } else {
      this.isStopped = true;
      this._complete();
    }
  };
  Subscriber2.prototype.unsubscribe = function() {
    if (!this.closed) {
      this.isStopped = true;
      _super.prototype.unsubscribe.call(this);
      this.destination = null;
    }
  };
  Subscriber2.prototype._next = function(value) {
    this.destination.next(value);
  };
  Subscriber2.prototype._error = function(err) {
    try {
      this.destination.error(err);
    } finally {
      this.unsubscribe();
    }
  };
  Subscriber2.prototype._complete = function() {
    try {
      this.destination.complete();
    } finally {
      this.unsubscribe();
    }
  };
  return Subscriber2;
}(Subscription);
var _bind = Function.prototype.bind;
function bind(fn, thisArg) {
  return _bind.call(fn, thisArg);
}
var ConsumerObserver = function() {
  function ConsumerObserver2(partialObserver) {
    this.partialObserver = partialObserver;
  }
  ConsumerObserver2.prototype.next = function(value) {
    var partialObserver = this.partialObserver;
    if (partialObserver.next) {
      try {
        partialObserver.next(value);
      } catch (error) {
        handleUnhandledError(error);
      }
    }
  };
  ConsumerObserver2.prototype.error = function(err) {
    var partialObserver = this.partialObserver;
    if (partialObserver.error) {
      try {
        partialObserver.error(err);
      } catch (error) {
        handleUnhandledError(error);
      }
    } else {
      handleUnhandledError(err);
    }
  };
  ConsumerObserver2.prototype.complete = function() {
    var partialObserver = this.partialObserver;
    if (partialObserver.complete) {
      try {
        partialObserver.complete();
      } catch (error) {
        handleUnhandledError(error);
      }
    }
  };
  return ConsumerObserver2;
}();
var SafeSubscriber = function(_super) {
  __extends(SafeSubscriber2, _super);
  function SafeSubscriber2(observerOrNext, error, complete) {
    var _this = _super.call(this) || this;
    var partialObserver;
    if (isFunction(observerOrNext) || !observerOrNext) {
      partialObserver = {
        next: observerOrNext !== null && observerOrNext !== undefined ? observerOrNext : undefined,
        error: error !== null && error !== undefined ? error : undefined,
        complete: complete !== null && complete !== undefined ? complete : undefined
      };
    } else {
      var context_1;
      if (_this && config.useDeprecatedNextContext) {
        context_1 = Object.create(observerOrNext);
        context_1.unsubscribe = function() {
          return _this.unsubscribe();
        };
        partialObserver = {
          next: observerOrNext.next && bind(observerOrNext.next, context_1),
          error: observerOrNext.error && bind(observerOrNext.error, context_1),
          complete: observerOrNext.complete && bind(observerOrNext.complete, context_1)
        };
      } else {
        partialObserver = observerOrNext;
      }
    }
    _this.destination = new ConsumerObserver(partialObserver);
    return _this;
  }
  return SafeSubscriber2;
}(Subscriber);
function handleUnhandledError(error) {
  if (config.useDeprecatedSynchronousErrorHandling) {
    captureError(error);
  } else {
    reportUnhandledError(error);
  }
}
function defaultErrorHandler(err) {
  throw err;
}
function handleStoppedNotification(notification, subscriber) {
  var onStoppedNotification = config.onStoppedNotification;
  onStoppedNotification && timeoutProvider.setTimeout(function() {
    return onStoppedNotification(notification, subscriber);
  });
}
var EMPTY_OBSERVER = {
  closed: true,
  next: noop,
  error: defaultErrorHandler,
  complete: noop
};

// node_modules/rxjs/dist/esm5/internal/symbol/observable.js
var observable = function() {
  return typeof Symbol === "function" && Symbol.observable || "@@observable";
}();

// node_modules/rxjs/dist/esm5/internal/util/identity.js
function identity(x) {
  return x;
}

// node_modules/rxjs/dist/esm5/internal/util/pipe.js
function pipeFromArray(fns) {
  if (fns.length === 0) {
    return identity;
  }
  if (fns.length === 1) {
    return fns[0];
  }
  return function piped(input) {
    return fns.reduce(function(prev, fn) {
      return fn(prev);
    }, input);
  };
}

// node_modules/rxjs/dist/esm5/internal/Observable.js
var Observable = function() {
  function Observable2(subscribe) {
    if (subscribe) {
      this._subscribe = subscribe;
    }
  }
  Observable2.prototype.lift = function(operator) {
    var observable2 = new Observable2;
    observable2.source = this;
    observable2.operator = operator;
    return observable2;
  };
  Observable2.prototype.subscribe = function(observerOrNext, error, complete) {
    var _this = this;
    var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);
    errorContext(function() {
      var _a = _this, operator = _a.operator, source = _a.source;
      subscriber.add(operator ? operator.call(subscriber, source) : source ? _this._subscribe(subscriber) : _this._trySubscribe(subscriber));
    });
    return subscriber;
  };
  Observable2.prototype._trySubscribe = function(sink) {
    try {
      return this._subscribe(sink);
    } catch (err) {
      sink.error(err);
    }
  };
  Observable2.prototype.forEach = function(next, promiseCtor) {
    var _this = this;
    promiseCtor = getPromiseCtor(promiseCtor);
    return new promiseCtor(function(resolve, reject) {
      var subscriber = new SafeSubscriber({
        next: function(value) {
          try {
            next(value);
          } catch (err) {
            reject(err);
            subscriber.unsubscribe();
          }
        },
        error: reject,
        complete: resolve
      });
      _this.subscribe(subscriber);
    });
  };
  Observable2.prototype._subscribe = function(subscriber) {
    var _a;
    return (_a = this.source) === null || _a === undefined ? undefined : _a.subscribe(subscriber);
  };
  Observable2.prototype[observable] = function() {
    return this;
  };
  Observable2.prototype.pipe = function() {
    var operations = [];
    for (var _i = 0;_i < arguments.length; _i++) {
      operations[_i] = arguments[_i];
    }
    return pipeFromArray(operations)(this);
  };
  Observable2.prototype.toPromise = function(promiseCtor) {
    var _this = this;
    promiseCtor = getPromiseCtor(promiseCtor);
    return new promiseCtor(function(resolve, reject) {
      var value;
      _this.subscribe(function(x) {
        return value = x;
      }, function(err) {
        return reject(err);
      }, function() {
        return resolve(value);
      });
    });
  };
  Observable2.create = function(subscribe) {
    return new Observable2(subscribe);
  };
  return Observable2;
}();
function getPromiseCtor(promiseCtor) {
  var _a;
  return (_a = promiseCtor !== null && promiseCtor !== undefined ? promiseCtor : config.Promise) !== null && _a !== undefined ? _a : Promise;
}
function isObserver(value) {
  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);
}
function isSubscriber(value) {
  return value && value instanceof Subscriber || isObserver(value) && isSubscription(value);
}
// node_modules/rxjs/dist/esm5/internal/util/lift.js
function hasLift(source) {
  return isFunction(source === null || source === undefined ? undefined : source.lift);
}
function operate(init) {
  return function(source) {
    if (hasLift(source)) {
      return source.lift(function(liftedSource) {
        try {
          return init(liftedSource, this);
        } catch (err) {
          this.error(err);
        }
      });
    }
    throw new TypeError("Unable to lift unknown Observable type");
  };
}

// node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js
function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {
  return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);
}
var OperatorSubscriber = function(_super) {
  __extends(OperatorSubscriber2, _super);
  function OperatorSubscriber2(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {
    var _this = _super.call(this, destination) || this;
    _this.onFinalize = onFinalize;
    _this.shouldUnsubscribe = shouldUnsubscribe;
    _this._next = onNext ? function(value) {
      try {
        onNext(value);
      } catch (err) {
        destination.error(err);
      }
    } : _super.prototype._next;
    _this._error = onError ? function(err) {
      try {
        onError(err);
      } catch (err2) {
        destination.error(err2);
      } finally {
        this.unsubscribe();
      }
    } : _super.prototype._error;
    _this._complete = onComplete ? function() {
      try {
        onComplete();
      } catch (err) {
        destination.error(err);
      } finally {
        this.unsubscribe();
      }
    } : _super.prototype._complete;
    return _this;
  }
  OperatorSubscriber2.prototype.unsubscribe = function() {
    var _a;
    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {
      var closed_1 = this.closed;
      _super.prototype.unsubscribe.call(this);
      !closed_1 && ((_a = this.onFinalize) === null || _a === undefined || _a.call(this));
    }
  };
  return OperatorSubscriber2;
}(Subscriber);

// node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js
var ObjectUnsubscribedError = createErrorClass(function(_super) {
  return function ObjectUnsubscribedErrorImpl() {
    _super(this);
    this.name = "ObjectUnsubscribedError";
    this.message = "object unsubscribed";
  };
});

// node_modules/rxjs/dist/esm5/internal/Subject.js
var Subject = function(_super) {
  __extends(Subject2, _super);
  function Subject2() {
    var _this = _super.call(this) || this;
    _this.closed = false;
    _this.currentObservers = null;
    _this.observers = [];
    _this.isStopped = false;
    _this.hasError = false;
    _this.thrownError = null;
    return _this;
  }
  Subject2.prototype.lift = function(operator) {
    var subject = new AnonymousSubject(this, this);
    subject.operator = operator;
    return subject;
  };
  Subject2.prototype._throwIfClosed = function() {
    if (this.closed) {
      throw new ObjectUnsubscribedError;
    }
  };
  Subject2.prototype.next = function(value) {
    var _this = this;
    errorContext(function() {
      var e_1, _a;
      _this._throwIfClosed();
      if (!_this.isStopped) {
        if (!_this.currentObservers) {
          _this.currentObservers = Array.from(_this.observers);
        }
        try {
          for (var _b = __values(_this.currentObservers), _c = _b.next();!_c.done; _c = _b.next()) {
            var observer = _c.value;
            observer.next(value);
          }
        } catch (e_1_1) {
          e_1 = { error: e_1_1 };
        } finally {
          try {
            if (_c && !_c.done && (_a = _b.return))
              _a.call(_b);
          } finally {
            if (e_1)
              throw e_1.error;
          }
        }
      }
    });
  };
  Subject2.prototype.error = function(err) {
    var _this = this;
    errorContext(function() {
      _this._throwIfClosed();
      if (!_this.isStopped) {
        _this.hasError = _this.isStopped = true;
        _this.thrownError = err;
        var observers = _this.observers;
        while (observers.length) {
          observers.shift().error(err);
        }
      }
    });
  };
  Subject2.prototype.complete = function() {
    var _this = this;
    errorContext(function() {
      _this._throwIfClosed();
      if (!_this.isStopped) {
        _this.isStopped = true;
        var observers = _this.observers;
        while (observers.length) {
          observers.shift().complete();
        }
      }
    });
  };
  Subject2.prototype.unsubscribe = function() {
    this.isStopped = this.closed = true;
    this.observers = this.currentObservers = null;
  };
  Object.defineProperty(Subject2.prototype, "observed", {
    get: function() {
      var _a;
      return ((_a = this.observers) === null || _a === undefined ? undefined : _a.length) > 0;
    },
    enumerable: false,
    configurable: true
  });
  Subject2.prototype._trySubscribe = function(subscriber) {
    this._throwIfClosed();
    return _super.prototype._trySubscribe.call(this, subscriber);
  };
  Subject2.prototype._subscribe = function(subscriber) {
    this._throwIfClosed();
    this._checkFinalizedStatuses(subscriber);
    return this._innerSubscribe(subscriber);
  };
  Subject2.prototype._innerSubscribe = function(subscriber) {
    var _this = this;
    var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;
    if (hasError || isStopped) {
      return EMPTY_SUBSCRIPTION;
    }
    this.currentObservers = null;
    observers.push(subscriber);
    return new Subscription(function() {
      _this.currentObservers = null;
      arrRemove(observers, subscriber);
    });
  };
  Subject2.prototype._checkFinalizedStatuses = function(subscriber) {
    var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;
    if (hasError) {
      subscriber.error(thrownError);
    } else if (isStopped) {
      subscriber.complete();
    }
  };
  Subject2.prototype.asObservable = function() {
    var observable2 = new Observable;
    observable2.source = this;
    return observable2;
  };
  Subject2.create = function(destination, source) {
    return new AnonymousSubject(destination, source);
  };
  return Subject2;
}(Observable);
var AnonymousSubject = function(_super) {
  __extends(AnonymousSubject2, _super);
  function AnonymousSubject2(destination, source) {
    var _this = _super.call(this) || this;
    _this.destination = destination;
    _this.source = source;
    return _this;
  }
  AnonymousSubject2.prototype.next = function(value) {
    var _a, _b;
    (_b = (_a = this.destination) === null || _a === undefined ? undefined : _a.next) === null || _b === undefined || _b.call(_a, value);
  };
  AnonymousSubject2.prototype.error = function(err) {
    var _a, _b;
    (_b = (_a = this.destination) === null || _a === undefined ? undefined : _a.error) === null || _b === undefined || _b.call(_a, err);
  };
  AnonymousSubject2.prototype.complete = function() {
    var _a, _b;
    (_b = (_a = this.destination) === null || _a === undefined ? undefined : _a.complete) === null || _b === undefined || _b.call(_a);
  };
  AnonymousSubject2.prototype._subscribe = function(subscriber) {
    var _a, _b;
    return (_b = (_a = this.source) === null || _a === undefined ? undefined : _a.subscribe(subscriber)) !== null && _b !== undefined ? _b : EMPTY_SUBSCRIPTION;
  };
  return AnonymousSubject2;
}(Subject);
// node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js
var BehaviorSubject = function(_super) {
  __extends(BehaviorSubject2, _super);
  function BehaviorSubject2(_value) {
    var _this = _super.call(this) || this;
    _this._value = _value;
    return _this;
  }
  Object.defineProperty(BehaviorSubject2.prototype, "value", {
    get: function() {
      return this.getValue();
    },
    enumerable: false,
    configurable: true
  });
  BehaviorSubject2.prototype._subscribe = function(subscriber) {
    var subscription = _super.prototype._subscribe.call(this, subscriber);
    !subscription.closed && subscriber.next(this._value);
    return subscription;
  };
  BehaviorSubject2.prototype.getValue = function() {
    var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, _value = _a._value;
    if (hasError) {
      throw thrownError;
    }
    this._throwIfClosed();
    return _value;
  };
  BehaviorSubject2.prototype.next = function(value) {
    _super.prototype.next.call(this, this._value = value);
  };
  return BehaviorSubject2;
}(Subject);
// node_modules/rxjs/dist/esm5/internal/scheduler/dateTimestampProvider.js
var dateTimestampProvider = {
  now: function() {
    return (dateTimestampProvider.delegate || Date).now();
  },
  delegate: undefined
};

// node_modules/rxjs/dist/esm5/internal/ReplaySubject.js
var ReplaySubject = function(_super) {
  __extends(ReplaySubject2, _super);
  function ReplaySubject2(_bufferSize, _windowTime, _timestampProvider) {
    if (_bufferSize === undefined) {
      _bufferSize = Infinity;
    }
    if (_windowTime === undefined) {
      _windowTime = Infinity;
    }
    if (_timestampProvider === undefined) {
      _timestampProvider = dateTimestampProvider;
    }
    var _this = _super.call(this) || this;
    _this._bufferSize = _bufferSize;
    _this._windowTime = _windowTime;
    _this._timestampProvider = _timestampProvider;
    _this._buffer = [];
    _this._infiniteTimeWindow = true;
    _this._infiniteTimeWindow = _windowTime === Infinity;
    _this._bufferSize = Math.max(1, _bufferSize);
    _this._windowTime = Math.max(1, _windowTime);
    return _this;
  }
  ReplaySubject2.prototype.next = function(value) {
    var _a = this, isStopped = _a.isStopped, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow, _timestampProvider = _a._timestampProvider, _windowTime = _a._windowTime;
    if (!isStopped) {
      _buffer.push(value);
      !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);
    }
    this._trimBuffer();
    _super.prototype.next.call(this, value);
  };
  ReplaySubject2.prototype._subscribe = function(subscriber) {
    this._throwIfClosed();
    this._trimBuffer();
    var subscription = this._innerSubscribe(subscriber);
    var _a = this, _infiniteTimeWindow = _a._infiniteTimeWindow, _buffer = _a._buffer;
    var copy = _buffer.slice();
    for (var i = 0;i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {
      subscriber.next(copy[i]);
    }
    this._checkFinalizedStatuses(subscriber);
    return subscription;
  };
  ReplaySubject2.prototype._trimBuffer = function() {
    var _a = this, _bufferSize = _a._bufferSize, _timestampProvider = _a._timestampProvider, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow;
    var adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;
    _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);
    if (!_infiniteTimeWindow) {
      var now = _timestampProvider.now();
      var last = 0;
      for (var i = 1;i < _buffer.length && _buffer[i] <= now; i += 2) {
        last = i;
      }
      last && _buffer.splice(0, last + 1);
    }
  };
  return ReplaySubject2;
}(Subject);

// node_modules/rxjs/dist/esm5/internal/observable/empty.js
var EMPTY = new Observable(function(subscriber) {
  return subscriber.complete();
});

// node_modules/rxjs/dist/esm5/internal/util/isScheduler.js
function isScheduler(value) {
  return value && isFunction(value.schedule);
}

// node_modules/rxjs/dist/esm5/internal/util/args.js
function last(arr) {
  return arr[arr.length - 1];
}
function popScheduler(args) {
  return isScheduler(last(args)) ? args.pop() : undefined;
}

// node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js
var isArrayLike = function(x) {
  return x && typeof x.length === "number" && typeof x !== "function";
};

// node_modules/rxjs/dist/esm5/internal/util/isPromise.js
function isPromise(value) {
  return isFunction(value === null || value === undefined ? undefined : value.then);
}

// node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js
function isInteropObservable(input) {
  return isFunction(input[observable]);
}

// node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js
function isAsyncIterable(obj) {
  return Symbol.asyncIterator && isFunction(obj === null || obj === undefined ? undefined : obj[Symbol.asyncIterator]);
}

// node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js
function createInvalidObservableTypeError(input) {
  return new TypeError("You provided " + (input !== null && typeof input === "object" ? "an invalid object" : "'" + input + "'") + " where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.");
}

// node_modules/rxjs/dist/esm5/internal/symbol/iterator.js
function getSymbolIterator() {
  if (typeof Symbol !== "function" || !Symbol.iterator) {
    return "@@iterator";
  }
  return Symbol.iterator;
}
var iterator = getSymbolIterator();

// node_modules/rxjs/dist/esm5/internal/util/isIterable.js
function isIterable(input) {
  return isFunction(input === null || input === undefined ? undefined : input[iterator]);
}

// node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js
function readableStreamLikeToAsyncGenerator(readableStream) {
  return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {
    var reader, _a, value, done;
    return __generator(this, function(_b) {
      switch (_b.label) {
        case 0:
          reader = readableStream.getReader();
          _b.label = 1;
        case 1:
          _b.trys.push([1, , 9, 10]);
          _b.label = 2;
        case 2:
          if (false)
            ;
          return [4, __await(reader.read())];
        case 3:
          _a = _b.sent(), value = _a.value, done = _a.done;
          if (!done)
            return [3, 5];
          return [4, __await(undefined)];
        case 4:
          return [2, _b.sent()];
        case 5:
          return [4, __await(value)];
        case 6:
          return [4, _b.sent()];
        case 7:
          _b.sent();
          return [3, 2];
        case 8:
          return [3, 10];
        case 9:
          reader.releaseLock();
          return [7];
        case 10:
          return [2];
      }
    });
  });
}
function isReadableStreamLike(obj) {
  return isFunction(obj === null || obj === undefined ? undefined : obj.getReader);
}

// node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js
function innerFrom(input) {
  if (input instanceof Observable) {
    return input;
  }
  if (input != null) {
    if (isInteropObservable(input)) {
      return fromInteropObservable(input);
    }
    if (isArrayLike(input)) {
      return fromArrayLike(input);
    }
    if (isPromise(input)) {
      return fromPromise(input);
    }
    if (isAsyncIterable(input)) {
      return fromAsyncIterable(input);
    }
    if (isIterable(input)) {
      return fromIterable(input);
    }
    if (isReadableStreamLike(input)) {
      return fromReadableStreamLike(input);
    }
  }
  throw createInvalidObservableTypeError(input);
}
function fromInteropObservable(obj) {
  return new Observable(function(subscriber) {
    var obs = obj[observable]();
    if (isFunction(obs.subscribe)) {
      return obs.subscribe(subscriber);
    }
    throw new TypeError("Provided object does not correctly implement Symbol.observable");
  });
}
function fromArrayLike(array) {
  return new Observable(function(subscriber) {
    for (var i = 0;i < array.length && !subscriber.closed; i++) {
      subscriber.next(array[i]);
    }
    subscriber.complete();
  });
}
function fromPromise(promise) {
  return new Observable(function(subscriber) {
    promise.then(function(value) {
      if (!subscriber.closed) {
        subscriber.next(value);
        subscriber.complete();
      }
    }, function(err) {
      return subscriber.error(err);
    }).then(null, reportUnhandledError);
  });
}
function fromIterable(iterable) {
  return new Observable(function(subscriber) {
    var e_1, _a;
    try {
      for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next();!iterable_1_1.done; iterable_1_1 = iterable_1.next()) {
        var value = iterable_1_1.value;
        subscriber.next(value);
        if (subscriber.closed) {
          return;
        }
      }
    } catch (e_1_1) {
      e_1 = { error: e_1_1 };
    } finally {
      try {
        if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return))
          _a.call(iterable_1);
      } finally {
        if (e_1)
          throw e_1.error;
      }
    }
    subscriber.complete();
  });
}
function fromAsyncIterable(asyncIterable) {
  return new Observable(function(subscriber) {
    process(asyncIterable, subscriber).catch(function(err) {
      return subscriber.error(err);
    });
  });
}
function fromReadableStreamLike(readableStream) {
  return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));
}
function process(asyncIterable, subscriber) {
  var asyncIterable_1, asyncIterable_1_1;
  var e_2, _a;
  return __awaiter(this, undefined, undefined, function() {
    var value, e_2_1;
    return __generator(this, function(_b) {
      switch (_b.label) {
        case 0:
          _b.trys.push([0, 5, 6, 11]);
          asyncIterable_1 = __asyncValues(asyncIterable);
          _b.label = 1;
        case 1:
          return [4, asyncIterable_1.next()];
        case 2:
          if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done))
            return [3, 4];
          value = asyncIterable_1_1.value;
          subscriber.next(value);
          if (subscriber.closed) {
            return [2];
          }
          _b.label = 3;
        case 3:
          return [3, 1];
        case 4:
          return [3, 11];
        case 5:
          e_2_1 = _b.sent();
          e_2 = { error: e_2_1 };
          return [3, 11];
        case 6:
          _b.trys.push([6, , 9, 10]);
          if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return)))
            return [3, 8];
          return [4, _a.call(asyncIterable_1)];
        case 7:
          _b.sent();
          _b.label = 8;
        case 8:
          return [3, 10];
        case 9:
          if (e_2)
            throw e_2.error;
          return [7];
        case 10:
          return [7];
        case 11:
          subscriber.complete();
          return [2];
      }
    });
  });
}

// node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js
function executeSchedule(parentSubscription, scheduler, work, delay, repeat) {
  if (delay === undefined) {
    delay = 0;
  }
  if (repeat === undefined) {
    repeat = false;
  }
  var scheduleSubscription = scheduler.schedule(function() {
    work();
    if (repeat) {
      parentSubscription.add(this.schedule(null, delay));
    } else {
      this.unsubscribe();
    }
  }, delay);
  parentSubscription.add(scheduleSubscription);
  if (!repeat) {
    return scheduleSubscription;
  }
}

// node_modules/rxjs/dist/esm5/internal/operators/observeOn.js
function observeOn(scheduler, delay) {
  if (delay === undefined) {
    delay = 0;
  }
  return operate(function(source, subscriber) {
    source.subscribe(createOperatorSubscriber(subscriber, function(value) {
      return executeSchedule(subscriber, scheduler, function() {
        return subscriber.next(value);
      }, delay);
    }, function() {
      return executeSchedule(subscriber, scheduler, function() {
        return subscriber.complete();
      }, delay);
    }, function(err) {
      return executeSchedule(subscriber, scheduler, function() {
        return subscriber.error(err);
      }, delay);
    }));
  });
}

// node_modules/rxjs/dist/esm5/internal/operators/subscribeOn.js
function subscribeOn(scheduler, delay) {
  if (delay === undefined) {
    delay = 0;
  }
  return operate(function(source, subscriber) {
    subscriber.add(scheduler.schedule(function() {
      return source.subscribe(subscriber);
    }, delay));
  });
}

// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleObservable.js
function scheduleObservable(input, scheduler) {
  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));
}

// node_modules/rxjs/dist/esm5/internal/scheduled/schedulePromise.js
function schedulePromise(input, scheduler) {
  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));
}

// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleArray.js
function scheduleArray(input, scheduler) {
  return new Observable(function(subscriber) {
    var i = 0;
    return scheduler.schedule(function() {
      if (i === input.length) {
        subscriber.complete();
      } else {
        subscriber.next(input[i++]);
        if (!subscriber.closed) {
          this.schedule();
        }
      }
    });
  });
}

// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleIterable.js
function scheduleIterable(input, scheduler) {
  return new Observable(function(subscriber) {
    var iterator2;
    executeSchedule(subscriber, scheduler, function() {
      iterator2 = input[iterator]();
      executeSchedule(subscriber, scheduler, function() {
        var _a;
        var value;
        var done;
        try {
          _a = iterator2.next(), value = _a.value, done = _a.done;
        } catch (err) {
          subscriber.error(err);
          return;
        }
        if (done) {
          subscriber.complete();
        } else {
          subscriber.next(value);
        }
      }, 0, true);
    });
    return function() {
      return isFunction(iterator2 === null || iterator2 === undefined ? undefined : iterator2.return) && iterator2.return();
    };
  });
}

// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleAsyncIterable.js
function scheduleAsyncIterable(input, scheduler) {
  if (!input) {
    throw new Error("Iterable cannot be null");
  }
  return new Observable(function(subscriber) {
    executeSchedule(subscriber, scheduler, function() {
      var iterator2 = input[Symbol.asyncIterator]();
      executeSchedule(subscriber, scheduler, function() {
        iterator2.next().then(function(result) {
          if (result.done) {
            subscriber.complete();
          } else {
            subscriber.next(result.value);
          }
        });
      }, 0, true);
    });
  });
}

// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleReadableStreamLike.js
function scheduleReadableStreamLike(input, scheduler) {
  return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);
}

// node_modules/rxjs/dist/esm5/internal/scheduled/scheduled.js
function scheduled(input, scheduler) {
  if (input != null) {
    if (isInteropObservable(input)) {
      return scheduleObservable(input, scheduler);
    }
    if (isArrayLike(input)) {
      return scheduleArray(input, scheduler);
    }
    if (isPromise(input)) {
      return schedulePromise(input, scheduler);
    }
    if (isAsyncIterable(input)) {
      return scheduleAsyncIterable(input, scheduler);
    }
    if (isIterable(input)) {
      return scheduleIterable(input, scheduler);
    }
    if (isReadableStreamLike(input)) {
      return scheduleReadableStreamLike(input, scheduler);
    }
  }
  throw createInvalidObservableTypeError(input);
}

// node_modules/rxjs/dist/esm5/internal/observable/from.js
function from(input, scheduler) {
  return scheduler ? scheduled(input, scheduler) : innerFrom(input);
}

// node_modules/rxjs/dist/esm5/internal/observable/of.js
function of() {
  var args = [];
  for (var _i = 0;_i < arguments.length; _i++) {
    args[_i] = arguments[_i];
  }
  var scheduler = popScheduler(args);
  return from(args, scheduler);
}

// node_modules/rxjs/dist/esm5/internal/observable/throwError.js
function throwError(errorOrErrorFactory, scheduler) {
  var errorFactory = isFunction(errorOrErrorFactory) ? errorOrErrorFactory : function() {
    return errorOrErrorFactory;
  };
  var init = function(subscriber) {
    return subscriber.error(errorFactory());
  };
  return new Observable(scheduler ? function(subscriber) {
    return scheduler.schedule(init, 0, subscriber);
  } : init);
}

// node_modules/rxjs/dist/esm5/internal/Notification.js
var NotificationKind;
(function(NotificationKind2) {
  NotificationKind2["NEXT"] = "N";
  NotificationKind2["ERROR"] = "E";
  NotificationKind2["COMPLETE"] = "C";
})(NotificationKind || (NotificationKind = {}));
var Notification = function() {
  function Notification2(kind, value, error) {
    this.kind = kind;
    this.value = value;
    this.error = error;
    this.hasValue = kind === "N";
  }
  Notification2.prototype.observe = function(observer) {
    return observeNotification(this, observer);
  };
  Notification2.prototype.do = function(nextHandler, errorHandler, completeHandler) {
    var _a = this, kind = _a.kind, value = _a.value, error = _a.error;
    return kind === "N" ? nextHandler === null || nextHandler === undefined ? undefined : nextHandler(value) : kind === "E" ? errorHandler === null || errorHandler === undefined ? undefined : errorHandler(error) : completeHandler === null || completeHandler === undefined ? undefined : completeHandler();
  };
  Notification2.prototype.accept = function(nextOrObserver, error, complete) {
    var _a;
    return isFunction((_a = nextOrObserver) === null || _a === undefined ? undefined : _a.next) ? this.observe(nextOrObserver) : this.do(nextOrObserver, error, complete);
  };
  Notification2.prototype.toObservable = function() {
    var _a = this, kind = _a.kind, value = _a.value, error = _a.error;
    var result = kind === "N" ? of(value) : kind === "E" ? throwError(function() {
      return error;
    }) : kind === "C" ? EMPTY : 0;
    if (!result) {
      throw new TypeError("Unexpected notification kind " + kind);
    }
    return result;
  };
  Notification2.createNext = function(value) {
    return new Notification2("N", value);
  };
  Notification2.createError = function(err) {
    return new Notification2("E", undefined, err);
  };
  Notification2.createComplete = function() {
    return Notification2.completeNotification;
  };
  Notification2.completeNotification = new Notification2("C");
  return Notification2;
}();
function observeNotification(notification, observer) {
  var _a, _b, _c;
  var _d = notification, kind = _d.kind, value = _d.value, error = _d.error;
  if (typeof kind !== "string") {
    throw new TypeError('Invalid notification, missing "kind"');
  }
  kind === "N" ? (_a = observer.next) === null || _a === undefined || _a.call(observer, value) : kind === "E" ? (_b = observer.error) === null || _b === undefined || _b.call(observer, error) : (_c = observer.complete) === null || _c === undefined || _c.call(observer);
}

// node_modules/rxjs/dist/esm5/internal/util/EmptyError.js
var EmptyError = createErrorClass(function(_super) {
  return function EmptyErrorImpl() {
    _super(this);
    this.name = "EmptyError";
    this.message = "no elements in sequence";
  };
});

// node_modules/rxjs/dist/esm5/internal/lastValueFrom.js
function lastValueFrom(source, config2) {
  var hasConfig = typeof config2 === "object";
  return new Promise(function(resolve, reject) {
    var _hasValue = false;
    var _value;
    source.subscribe({
      next: function(value) {
        _value = value;
        _hasValue = true;
      },
      error: reject,
      complete: function() {
        if (_hasValue) {
          resolve(_value);
        } else if (hasConfig) {
          resolve(config2.defaultValue);
        } else {
          reject(new EmptyError);
        }
      }
    });
  });
}
// node_modules/rxjs/dist/esm5/internal/operators/map.js
function map(project, thisArg) {
  return operate(function(source, subscriber) {
    var index = 0;
    source.subscribe(createOperatorSubscriber(subscriber, function(value) {
      subscriber.next(project.call(thisArg, value, index++));
    }));
  });
}

// node_modules/rxjs/dist/esm5/internal/operators/mergeInternals.js
function mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {
  var buffer = [];
  var active = 0;
  var index = 0;
  var isComplete = false;
  var checkComplete = function() {
    if (isComplete && !buffer.length && !active) {
      subscriber.complete();
    }
  };
  var outerNext = function(value) {
    return active < concurrent ? doInnerSub(value) : buffer.push(value);
  };
  var doInnerSub = function(value) {
    expand && subscriber.next(value);
    active++;
    var innerComplete = false;
    innerFrom(project(value, index++)).subscribe(createOperatorSubscriber(subscriber, function(innerValue) {
      onBeforeNext === null || onBeforeNext === undefined || onBeforeNext(innerValue);
      if (expand) {
        outerNext(innerValue);
      } else {
        subscriber.next(innerValue);
      }
    }, function() {
      innerComplete = true;
    }, undefined, function() {
      if (innerComplete) {
        try {
          active--;
          var _loop_1 = function() {
            var bufferedValue = buffer.shift();
            if (innerSubScheduler) {
              executeSchedule(subscriber, innerSubScheduler, function() {
                return doInnerSub(bufferedValue);
              });
            } else {
              doInnerSub(bufferedValue);
            }
          };
          while (buffer.length && active < concurrent) {
            _loop_1();
          }
          checkComplete();
        } catch (err) {
          subscriber.error(err);
        }
      }
    }));
  };
  source.subscribe(createOperatorSubscriber(subscriber, outerNext, function() {
    isComplete = true;
    checkComplete();
  }));
  return function() {
    additionalFinalizer === null || additionalFinalizer === undefined || additionalFinalizer();
  };
}

// node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js
function mergeMap(project, resultSelector, concurrent) {
  if (concurrent === undefined) {
    concurrent = Infinity;
  }
  if (isFunction(resultSelector)) {
    return mergeMap(function(a, i) {
      return map(function(b, ii) {
        return resultSelector(a, b, i, ii);
      })(innerFrom(project(a, i)));
    }, concurrent);
  } else if (typeof resultSelector === "number") {
    concurrent = resultSelector;
  }
  return operate(function(source, subscriber) {
    return mergeInternals(source, subscriber, project, concurrent);
  });
}

// node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js
function mergeAll(concurrent) {
  if (concurrent === undefined) {
    concurrent = Infinity;
  }
  return mergeMap(identity, concurrent);
}

// node_modules/rxjs/dist/esm5/internal/operators/concatAll.js
function concatAll() {
  return mergeAll(1);
}

// node_modules/rxjs/dist/esm5/internal/observable/concat.js
function concat() {
  var args = [];
  for (var _i = 0;_i < arguments.length; _i++) {
    args[_i] = arguments[_i];
  }
  return concatAll()(from(args, popScheduler(args)));
}
// node_modules/rxjs/dist/esm5/internal/operators/filter.js
function filter(predicate, thisArg) {
  return operate(function(source, subscriber) {
    var index = 0;
    source.subscribe(createOperatorSubscriber(subscriber, function(value) {
      return predicate.call(thisArg, value, index++) && subscriber.next(value);
    }));
  });
}
// node_modules/rxjs/dist/esm5/internal/operators/catchError.js
function catchError(selector) {
  return operate(function(source, subscriber) {
    var innerSub = null;
    var syncUnsub = false;
    var handledResult;
    innerSub = source.subscribe(createOperatorSubscriber(subscriber, undefined, undefined, function(err) {
      handledResult = innerFrom(selector(err, catchError(selector)(source)));
      if (innerSub) {
        innerSub.unsubscribe();
        innerSub = null;
        handledResult.subscribe(subscriber);
      } else {
        syncUnsub = true;
      }
    }));
    if (syncUnsub) {
      innerSub.unsubscribe();
      innerSub = null;
      handledResult.subscribe(subscriber);
    }
  });
}
// node_modules/rxjs/dist/esm5/internal/operators/finalize.js
function finalize(callback) {
  return operate(function(source, subscriber) {
    try {
      source.subscribe(subscriber);
    } finally {
      subscriber.add(callback);
    }
  });
}
// node_modules/rxjs/dist/esm5/internal/operators/materialize.js
function materialize() {
  return operate(function(source, subscriber) {
    source.subscribe(createOperatorSubscriber(subscriber, function(value) {
      subscriber.next(Notification.createNext(value));
    }, function() {
      subscriber.next(Notification.createComplete());
      subscriber.complete();
    }, function(err) {
      subscriber.next(Notification.createError(err));
      subscriber.complete();
    }));
  });
}
// node_modules/rxjs/dist/esm5/internal/operators/share.js
function share(options) {
  if (options === undefined) {
    options = {};
  }
  var _a = options.connector, connector = _a === undefined ? function() {
    return new Subject;
  } : _a, _b = options.resetOnError, resetOnError = _b === undefined ? true : _b, _c = options.resetOnComplete, resetOnComplete = _c === undefined ? true : _c, _d = options.resetOnRefCountZero, resetOnRefCountZero = _d === undefined ? true : _d;
  return function(wrapperSource) {
    var connection;
    var resetConnection;
    var subject;
    var refCount = 0;
    var hasCompleted = false;
    var hasErrored = false;
    var cancelReset = function() {
      resetConnection === null || resetConnection === undefined || resetConnection.unsubscribe();
      resetConnection = undefined;
    };
    var reset = function() {
      cancelReset();
      connection = subject = undefined;
      hasCompleted = hasErrored = false;
    };
    var resetAndUnsubscribe = function() {
      var conn = connection;
      reset();
      conn === null || conn === undefined || conn.unsubscribe();
    };
    return operate(function(source, subscriber) {
      refCount++;
      if (!hasErrored && !hasCompleted) {
        cancelReset();
      }
      var dest = subject = subject !== null && subject !== undefined ? subject : connector();
      subscriber.add(function() {
        refCount--;
        if (refCount === 0 && !hasErrored && !hasCompleted) {
          resetConnection = handleReset(resetAndUnsubscribe, resetOnRefCountZero);
        }
      });
      dest.subscribe(subscriber);
      if (!connection && refCount > 0) {
        connection = new SafeSubscriber({
          next: function(value) {
            return dest.next(value);
          },
          error: function(err) {
            hasErrored = true;
            cancelReset();
            resetConnection = handleReset(reset, resetOnError, err);
            dest.error(err);
          },
          complete: function() {
            hasCompleted = true;
            cancelReset();
            resetConnection = handleReset(reset, resetOnComplete);
            dest.complete();
          }
        });
        innerFrom(source).subscribe(connection);
      }
    })(wrapperSource);
  };
}
function handleReset(reset, on) {
  var args = [];
  for (var _i = 2;_i < arguments.length; _i++) {
    args[_i - 2] = arguments[_i];
  }
  if (on === true) {
    reset();
    return;
  }
  if (on === false) {
    return;
  }
  var onSubscriber = new SafeSubscriber({
    next: function() {
      onSubscriber.unsubscribe();
      reset();
    }
  });
  return innerFrom(on.apply(undefined, __spreadArray([], __read(args)))).subscribe(onSubscriber);
}
// node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js
function shareReplay(configOrBufferSize, windowTime, scheduler) {
  var _a, _b, _c;
  var bufferSize;
  var refCount = false;
  if (configOrBufferSize && typeof configOrBufferSize === "object") {
    _a = configOrBufferSize.bufferSize, bufferSize = _a === undefined ? Infinity : _a, _b = configOrBufferSize.windowTime, windowTime = _b === undefined ? Infinity : _b, _c = configOrBufferSize.refCount, refCount = _c === undefined ? false : _c, scheduler = configOrBufferSize.scheduler;
  } else {
    bufferSize = configOrBufferSize !== null && configOrBufferSize !== undefined ? configOrBufferSize : Infinity;
  }
  return share({
    connector: function() {
      return new ReplaySubject(bufferSize, windowTime, scheduler);
    },
    resetOnError: true,
    resetOnComplete: false,
    resetOnRefCountZero: refCount
  });
}
// node_modules/rxjs/dist/esm5/internal/operators/tap.js
function tap(observerOrNext, error, complete) {
  var tapObserver = isFunction(observerOrNext) || error || complete ? { next: observerOrNext, error, complete } : observerOrNext;
  return tapObserver ? operate(function(source, subscriber) {
    var _a;
    (_a = tapObserver.subscribe) === null || _a === undefined || _a.call(tapObserver);
    var isUnsub = true;
    source.subscribe(createOperatorSubscriber(subscriber, function(value) {
      var _a2;
      (_a2 = tapObserver.next) === null || _a2 === undefined || _a2.call(tapObserver, value);
      subscriber.next(value);
    }, function() {
      var _a2;
      isUnsub = false;
      (_a2 = tapObserver.complete) === null || _a2 === undefined || _a2.call(tapObserver);
      subscriber.complete();
    }, function(err) {
      var _a2;
      isUnsub = false;
      (_a2 = tapObserver.error) === null || _a2 === undefined || _a2.call(tapObserver, err);
      subscriber.error(err);
    }, function() {
      var _a2, _b;
      if (isUnsub) {
        (_a2 = tapObserver.unsubscribe) === null || _a2 === undefined || _a2.call(tapObserver);
      }
      (_b = tapObserver.finalize) === null || _b === undefined || _b.call(tapObserver);
    }));
  }) : identity;
}
// node_modules/@apollo/client/utilities/environment/index.js
var __DEV__ = globalThis.__DEV__ === true;

// node_modules/@apollo/client/utilities/internal/globals/maybe.js
function maybe(thunk) {
  try {
    return thunk();
  } catch {
  }
}
// node_modules/@apollo/client/utilities/internal/globals/global.js
var global_default = maybe(() => globalThis) || maybe(() => window) || maybe(() => self) || maybe(() => global) || maybe(function() {
  return maybe.constructor("return this")();
});
// node_modules/@apollo/client/version.js
var version = "4.0.0";

// node_modules/@apollo/client/utilities/internal/makeUniqueId.js
var prefixCounts = new Map;
function makeUniqueId(prefix) {
  const count = prefixCounts.get(prefix) || 1;
  prefixCounts.set(prefix, count + 1);
  return `${prefix}:${count}:${Math.random().toString(36).slice(2)}`;
}

// node_modules/@apollo/client/utilities/internal/stringifyForDisplay.js
function stringifyForDisplay(value, space = 0) {
  const undefId = makeUniqueId("stringifyForDisplay");
  return JSON.stringify(value, (_, value2) => {
    return value2 === undefined ? undefId : value2;
  }, space).split(JSON.stringify(undefId)).join("<undefined>");
}

// node_modules/@apollo/client/utilities/invariant/index.js
var genericMessage = "Invariant Violation";

class InvariantError extends Error {
  constructor(message = genericMessage) {
    super(message);
    this.name = genericMessage;
    Object.setPrototypeOf(this, InvariantError.prototype);
  }
}
var verbosityLevels = ["debug", "log", "warn", "error", "silent"];
var verbosityLevel = verbosityLevels.indexOf(__DEV__ ? "log" : "silent");
function invariant2(condition, ...args) {
  if (!condition) {
    throw newInvariantError(...args);
  }
}
function wrapConsoleMethod(name) {
  return function(message, ...args) {
    if (verbosityLevels.indexOf(name) >= verbosityLevel) {
      const method = console[name] || console.log;
      if (typeof message === "number") {
        const arg0 = message;
        message = getHandledErrorMsg(arg0);
        if (!message) {
          message = getFallbackErrorMsg(arg0, args);
          args = [];
        }
      }
      method(message, ...args);
    }
  };
}
invariant2.debug = wrapConsoleMethod("debug");
invariant2.log = wrapConsoleMethod("log");
invariant2.warn = wrapConsoleMethod("warn");
invariant2.error = wrapConsoleMethod("error");
function newInvariantError(message, ...optionalParams) {
  return new InvariantError(getHandledErrorMsg(message, optionalParams) || getFallbackErrorMsg(message, optionalParams));
}
var ApolloErrorMessageHandler = Symbol.for("ApolloErrorMessageHandler_" + version);
function stringify(arg) {
  if (typeof arg == "string") {
    return arg;
  }
  try {
    return stringifyForDisplay(arg, 2).slice(0, 1000);
  } catch {
    return "<non-serializable>";
  }
}
function getHandledErrorMsg(message, messageArgs = []) {
  if (!message)
    return;
  return global_default[ApolloErrorMessageHandler] && global_default[ApolloErrorMessageHandler](message, messageArgs.map(stringify));
}
function getFallbackErrorMsg(message, messageArgs = []) {
  if (!message)
    return;
  return `An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#${encodeURIComponent(JSON.stringify({
    version,
    message,
    args: messageArgs.map(stringify)
  }))}`;
}

// node_modules/@apollo/client/utilities/internal/valueToObjectRepresentation.js
function valueToObjectRepresentation(argObj, name, value, variables) {
  if (value.kind === Kind.INT || value.kind === Kind.FLOAT) {
    argObj[name.value] = Number(value.value);
  } else if (value.kind === Kind.BOOLEAN || value.kind === Kind.STRING) {
    argObj[name.value] = value.value;
  } else if (value.kind === Kind.OBJECT) {
    const nestedArgObj = {};
    value.fields.map((obj) => valueToObjectRepresentation(nestedArgObj, obj.name, obj.value, variables));
    argObj[name.value] = nestedArgObj;
  } else if (value.kind === Kind.VARIABLE) {
    const variableValue = (variables || {})[value.name.value];
    argObj[name.value] = variableValue;
  } else if (value.kind === Kind.LIST) {
    argObj[name.value] = value.values.map((listValue) => {
      const nestedArgArrayObj = {};
      valueToObjectRepresentation(nestedArgArrayObj, name, listValue, variables);
      return nestedArgArrayObj[name.value];
    });
  } else if (value.kind === Kind.ENUM) {
    argObj[name.value] = value.value;
  } else if (value.kind === Kind.NULL) {
    argObj[name.value] = null;
  } else {
    throw newInvariantError(19, name.value, value.kind);
  }
}

// node_modules/@apollo/client/utilities/internal/argumentsObjectFromField.js
function argumentsObjectFromField(field, variables) {
  if (field.arguments && field.arguments.length) {
    const argObj = {};
    field.arguments.forEach(({ name, value }) => valueToObjectRepresentation(argObj, name, value, variables));
    return argObj;
  }
  return null;
}
// node_modules/@wry/caches/lib/strong.js
function defaultDispose() {
}

class StrongCache {
  constructor(max = Infinity, dispose = defaultDispose) {
    this.max = max;
    this.dispose = dispose;
    this.map = new Map;
    this.newest = null;
    this.oldest = null;
  }
  has(key) {
    return this.map.has(key);
  }
  get(key) {
    const node = this.getNode(key);
    return node && node.value;
  }
  get size() {
    return this.map.size;
  }
  getNode(key) {
    const node = this.map.get(key);
    if (node && node !== this.newest) {
      const { older, newer } = node;
      if (newer) {
        newer.older = older;
      }
      if (older) {
        older.newer = newer;
      }
      node.older = this.newest;
      node.older.newer = node;
      node.newer = null;
      this.newest = node;
      if (node === this.oldest) {
        this.oldest = newer;
      }
    }
    return node;
  }
  set(key, value) {
    let node = this.getNode(key);
    if (node) {
      return node.value = value;
    }
    node = {
      key,
      value,
      newer: null,
      older: this.newest
    };
    if (this.newest) {
      this.newest.newer = node;
    }
    this.newest = node;
    this.oldest = this.oldest || node;
    this.map.set(key, node);
    return node.value;
  }
  clean() {
    while (this.oldest && this.map.size > this.max) {
      this.delete(this.oldest.key);
    }
  }
  delete(key) {
    const node = this.map.get(key);
    if (node) {
      if (node === this.newest) {
        this.newest = node.older;
      }
      if (node === this.oldest) {
        this.oldest = node.newer;
      }
      if (node.newer) {
        node.newer.older = node.older;
      }
      if (node.older) {
        node.older.newer = node.newer;
      }
      this.map.delete(key);
      this.dispose(node.value, key);
      return true;
    }
    return false;
  }
}
// node_modules/@wry/caches/lib/weak.js
function noop2() {
}
var defaultDispose2 = noop2;
var _WeakRef = typeof WeakRef !== "undefined" ? WeakRef : function(value) {
  return { deref: () => value };
};
var _WeakMap = typeof WeakMap !== "undefined" ? WeakMap : Map;
var _FinalizationRegistry = typeof FinalizationRegistry !== "undefined" ? FinalizationRegistry : function() {
  return {
    register: noop2,
    unregister: noop2
  };
};
var finalizationBatchSize = 10024;

class WeakCache {
  constructor(max = Infinity, dispose = defaultDispose2) {
    this.max = max;
    this.dispose = dispose;
    this.map = new _WeakMap;
    this.newest = null;
    this.oldest = null;
    this.unfinalizedNodes = new Set;
    this.finalizationScheduled = false;
    this.size = 0;
    this.finalize = () => {
      const iterator2 = this.unfinalizedNodes.values();
      for (let i = 0;i < finalizationBatchSize; i++) {
        const node = iterator2.next().value;
        if (!node)
          break;
        this.unfinalizedNodes.delete(node);
        const key = node.key;
        delete node.key;
        node.keyRef = new _WeakRef(key);
        this.registry.register(key, node, node);
      }
      if (this.unfinalizedNodes.size > 0) {
        queueMicrotask(this.finalize);
      } else {
        this.finalizationScheduled = false;
      }
    };
    this.registry = new _FinalizationRegistry(this.deleteNode.bind(this));
  }
  has(key) {
    return this.map.has(key);
  }
  get(key) {
    const node = this.getNode(key);
    return node && node.value;
  }
  getNode(key) {
    const node = this.map.get(key);
    if (node && node !== this.newest) {
      const { older, newer } = node;
      if (newer) {
        newer.older = older;
      }
      if (older) {
        older.newer = newer;
      }
      node.older = this.newest;
      node.older.newer = node;
      node.newer = null;
      this.newest = node;
      if (node === this.oldest) {
        this.oldest = newer;
      }
    }
    return node;
  }
  set(key, value) {
    let node = this.getNode(key);
    if (node) {
      return node.value = value;
    }
    node = {
      key,
      value,
      newer: null,
      older: this.newest
    };
    if (this.newest) {
      this.newest.newer = node;
    }
    this.newest = node;
    this.oldest = this.oldest || node;
    this.scheduleFinalization(node);
    this.map.set(key, node);
    this.size++;
    return node.value;
  }
  clean() {
    while (this.oldest && this.size > this.max) {
      this.deleteNode(this.oldest);
    }
  }
  deleteNode(node) {
    if (node === this.newest) {
      this.newest = node.older;
    }
    if (node === this.oldest) {
      this.oldest = node.newer;
    }
    if (node.newer) {
      node.newer.older = node.older;
    }
    if (node.older) {
      node.older.newer = node.newer;
    }
    this.size--;
    const key = node.key || node.keyRef && node.keyRef.deref();
    this.dispose(node.value, key);
    if (!node.keyRef) {
      this.unfinalizedNodes.delete(node);
    } else {
      this.registry.unregister(node);
    }
    if (key)
      this.map.delete(key);
  }
  delete(key) {
    const node = this.map.get(key);
    if (node) {
      this.deleteNode(node);
      return true;
    }
    return false;
  }
  scheduleFinalization(node) {
    this.unfinalizedNodes.add(node);
    if (!this.finalizationScheduled) {
      this.finalizationScheduled = true;
      queueMicrotask(this.finalize);
    }
  }
}
// node_modules/@wry/trie/lib/index.js
var defaultMakeData = () => Object.create(null);
var { forEach, slice } = Array.prototype;
var { hasOwnProperty } = Object.prototype;

class Trie {
  constructor(weakness = true, makeData = defaultMakeData) {
    this.weakness = weakness;
    this.makeData = makeData;
  }
  lookup() {
    return this.lookupArray(arguments);
  }
  lookupArray(array) {
    let node = this;
    forEach.call(array, (key) => node = node.getChildTrie(key));
    return hasOwnProperty.call(node, "data") ? node.data : node.data = this.makeData(slice.call(array));
  }
  peek() {
    return this.peekArray(arguments);
  }
  peekArray(array) {
    let node = this;
    for (let i = 0, len = array.length;node && i < len; ++i) {
      const map2 = node.mapFor(array[i], false);
      node = map2 && map2.get(array[i]);
    }
    return node && node.data;
  }
  remove() {
    return this.removeArray(arguments);
  }
  removeArray(array) {
    let data;
    if (array.length) {
      const head = array[0];
      const map2 = this.mapFor(head, false);
      const child = map2 && map2.get(head);
      if (child) {
        data = child.removeArray(slice.call(array, 1));
        if (!child.data && !child.weak && !(child.strong && child.strong.size)) {
          map2.delete(head);
        }
      }
    } else {
      data = this.data;
      delete this.data;
    }
    return data;
  }
  getChildTrie(key) {
    const map2 = this.mapFor(key, true);
    let child = map2.get(key);
    if (!child)
      map2.set(key, child = new Trie(this.weakness, this.makeData));
    return child;
  }
  mapFor(key, create) {
    return this.weakness && isObjRef(key) ? this.weak || (create ? this.weak = new WeakMap : undefined) : this.strong || (create ? this.strong = new Map : undefined);
  }
}
function isObjRef(value) {
  switch (typeof value) {
    case "object":
      if (value === null)
        break;
    case "function":
      return true;
  }
  return false;
}

// node_modules/@wry/context/lib/slot.js
var currentContext = null;
var MISSING_VALUE = {};
var idCounter = 1;
var makeSlotClass = () => class Slot {
  constructor() {
    this.id = [
      "slot",
      idCounter++,
      Date.now(),
      Math.random().toString(36).slice(2)
    ].join(":");
  }
  hasValue() {
    for (let context2 = currentContext;context2; context2 = context2.parent) {
      if (this.id in context2.slots) {
        const value = context2.slots[this.id];
        if (value === MISSING_VALUE)
          break;
        if (context2 !== currentContext) {
          currentContext.slots[this.id] = value;
        }
        return true;
      }
    }
    if (currentContext) {
      currentContext.slots[this.id] = MISSING_VALUE;
    }
    return false;
  }
  getValue() {
    if (this.hasValue()) {
      return currentContext.slots[this.id];
    }
  }
  withValue(value, callback, args, thisArg) {
    const slots = {
      __proto__: null,
      [this.id]: value
    };
    const parent = currentContext;
    currentContext = { parent, slots };
    try {
      return callback.apply(thisArg, args);
    } finally {
      currentContext = parent;
    }
  }
  static bind(callback) {
    const context2 = currentContext;
    return function() {
      const saved = currentContext;
      try {
        currentContext = context2;
        return callback.apply(this, arguments);
      } finally {
        currentContext = saved;
      }
    };
  }
  static noContext(callback, args, thisArg) {
    if (currentContext) {
      const saved = currentContext;
      try {
        currentContext = null;
        return callback.apply(thisArg, args);
      } finally {
        currentContext = saved;
      }
    } else {
      return callback.apply(thisArg, args);
    }
  }
};
function maybe2(fn) {
  try {
    return fn();
  } catch (ignored) {
  }
}
var globalKey = "@wry/context:Slot";
var host = maybe2(() => globalThis) || maybe2(() => global) || Object.create(null);
var globalHost = host;
var Slot = globalHost[globalKey] || Array[globalKey] || function(Slot2) {
  try {
    Object.defineProperty(globalHost, globalKey, {
      value: Slot2,
      enumerable: false,
      writable: false,
      configurable: true
    });
  } finally {
    return Slot2;
  }
}(makeSlotClass());

// node_modules/optimism/lib/context.js
var parentEntrySlot = new Slot;

// node_modules/optimism/lib/helpers.js
var { hasOwnProperty: hasOwnProperty2 } = Object.prototype;
var arrayFromSet = Array.from || function(set) {
  const array = [];
  set.forEach((item) => array.push(item));
  return array;
};
function maybeUnsubscribe(entryOrDep) {
  const { unsubscribe } = entryOrDep;
  if (typeof unsubscribe === "function") {
    entryOrDep.unsubscribe = undefined;
    unsubscribe();
  }
}

// node_modules/optimism/lib/entry.js
var emptySetPool = [];
var POOL_TARGET_SIZE = 100;
function assert(condition, optionalMessage) {
  if (!condition) {
    throw new Error(optionalMessage || "assertion failure");
  }
}
function valueIs(a, b) {
  const len = a.length;
  return len > 0 && len === b.length && a[len - 1] === b[len - 1];
}
function valueGet(value) {
  switch (value.length) {
    case 0:
      throw new Error("unknown value");
    case 1:
      return value[0];
    case 2:
      throw value[1];
  }
}
function valueCopy(value) {
  return value.slice(0);
}

class Entry {
  constructor(fn) {
    this.fn = fn;
    this.parents = new Set;
    this.childValues = new Map;
    this.dirtyChildren = null;
    this.dirty = true;
    this.recomputing = false;
    this.value = [];
    this.deps = null;
    ++Entry.count;
  }
  peek() {
    if (this.value.length === 1 && !mightBeDirty(this)) {
      rememberParent(this);
      return this.value[0];
    }
  }
  recompute(args) {
    assert(!this.recomputing, "already recomputing");
    rememberParent(this);
    return mightBeDirty(this) ? reallyRecompute(this, args) : valueGet(this.value);
  }
  setDirty() {
    if (this.dirty)
      return;
    this.dirty = true;
    reportDirty(this);
    maybeUnsubscribe(this);
  }
  dispose() {
    this.setDirty();
    forgetChildren(this);
    eachParent(this, (parent, child) => {
      parent.setDirty();
      forgetChild(parent, this);
    });
  }
  forget() {
    this.dispose();
  }
  dependOn(dep) {
    dep.add(this);
    if (!this.deps) {
      this.deps = emptySetPool.pop() || new Set;
    }
    this.deps.add(dep);
  }
  forgetDeps() {
    if (this.deps) {
      arrayFromSet(this.deps).forEach((dep) => dep.delete(this));
      this.deps.clear();
      emptySetPool.push(this.deps);
      this.deps = null;
    }
  }
}
Entry.count = 0;
function rememberParent(child) {
  const parent = parentEntrySlot.getValue();
  if (parent) {
    child.parents.add(parent);
    if (!parent.childValues.has(child)) {
      parent.childValues.set(child, []);
    }
    if (mightBeDirty(child)) {
      reportDirtyChild(parent, child);
    } else {
      reportCleanChild(parent, child);
    }
    return parent;
  }
}
function reallyRecompute(entry, args) {
  forgetChildren(entry);
  parentEntrySlot.withValue(entry, recomputeNewValue, [entry, args]);
  if (maybeSubscribe(entry, args)) {
    setClean(entry);
  }
  return valueGet(entry.value);
}
function recomputeNewValue(entry, args) {
  entry.recomputing = true;
  const { normalizeResult } = entry;
  let oldValueCopy;
  if (normalizeResult && entry.value.length === 1) {
    oldValueCopy = valueCopy(entry.value);
  }
  entry.value.length = 0;
  try {
    entry.value[0] = entry.fn.apply(null, args);
    if (normalizeResult && oldValueCopy && !valueIs(oldValueCopy, entry.value)) {
      try {
        entry.value[0] = normalizeResult(entry.value[0], oldValueCopy[0]);
      } catch (_a) {
      }
    }
  } catch (e) {
    entry.value[1] = e;
  }
  entry.recomputing = false;
}
function mightBeDirty(entry) {
  return entry.dirty || !!(entry.dirtyChildren && entry.dirtyChildren.size);
}
function setClean(entry) {
  entry.dirty = false;
  if (mightBeDirty(entry)) {
    return;
  }
  reportClean(entry);
}
function reportDirty(child) {
  eachParent(child, reportDirtyChild);
}
function reportClean(child) {
  eachParent(child, reportCleanChild);
}
function eachParent(child, callback) {
  const parentCount = child.parents.size;
  if (parentCount) {
    const parents = arrayFromSet(child.parents);
    for (let i = 0;i < parentCount; ++i) {
      callback(parents[i], child);
    }
  }
}
function reportDirtyChild(parent, child) {
  assert(parent.childValues.has(child));
  assert(mightBeDirty(child));
  const parentWasClean = !mightBeDirty(parent);
  if (!parent.dirtyChildren) {
    parent.dirtyChildren = emptySetPool.pop() || new Set;
  } else if (parent.dirtyChildren.has(child)) {
    return;
  }
  parent.dirtyChildren.add(child);
  if (parentWasClean) {
    reportDirty(parent);
  }
}
function reportCleanChild(parent, child) {
  assert(parent.childValues.has(child));
  assert(!mightBeDirty(child));
  const childValue = parent.childValues.get(child);
  if (childValue.length === 0) {
    parent.childValues.set(child, valueCopy(child.value));
  } else if (!valueIs(childValue, child.value)) {
    parent.setDirty();
  }
  removeDirtyChild(parent, child);
  if (mightBeDirty(parent)) {
    return;
  }
  reportClean(parent);
}
function removeDirtyChild(parent, child) {
  const dc = parent.dirtyChildren;
  if (dc) {
    dc.delete(child);
    if (dc.size === 0) {
      if (emptySetPool.length < POOL_TARGET_SIZE) {
        emptySetPool.push(dc);
      }
      parent.dirtyChildren = null;
    }
  }
}
function forgetChildren(parent) {
  if (parent.childValues.size > 0) {
    parent.childValues.forEach((_value, child) => {
      forgetChild(parent, child);
    });
  }
  parent.forgetDeps();
  assert(parent.dirtyChildren === null);
}
function forgetChild(parent, child) {
  child.parents.delete(parent);
  parent.childValues.delete(child);
  removeDirtyChild(parent, child);
}
function maybeSubscribe(entry, args) {
  if (typeof entry.subscribe === "function") {
    try {
      maybeUnsubscribe(entry);
      entry.unsubscribe = entry.subscribe.apply(null, args);
    } catch (e) {
      entry.setDirty();
      return false;
    }
  }
  return true;
}
// node_modules/optimism/lib/dep.js
var EntryMethods = {
  setDirty: true,
  dispose: true,
  forget: true
};
function dep(options) {
  const depsByKey = new Map;
  const subscribe = options && options.subscribe;
  function depend(key) {
    const parent = parentEntrySlot.getValue();
    if (parent) {
      let dep2 = depsByKey.get(key);
      if (!dep2) {
        depsByKey.set(key, dep2 = new Set);
      }
      parent.dependOn(dep2);
      if (typeof subscribe === "function") {
        maybeUnsubscribe(dep2);
        dep2.unsubscribe = subscribe(key);
      }
    }
  }
  depend.dirty = function dirty(key, entryMethodName) {
    const dep2 = depsByKey.get(key);
    if (dep2) {
      const m = entryMethodName && hasOwnProperty2.call(EntryMethods, entryMethodName) ? entryMethodName : "setDirty";
      arrayFromSet(dep2).forEach((entry) => entry[m]());
      depsByKey.delete(key);
      maybeUnsubscribe(dep2);
    }
  };
  return depend;
}

// node_modules/optimism/lib/index.js
var defaultKeyTrie;
function defaultMakeCacheKey(...args) {
  const trie = defaultKeyTrie || (defaultKeyTrie = new Trie(typeof WeakMap === "function"));
  return trie.lookupArray(args);
}
var caches = new Set;
function wrap2(originalFunction, { max = Math.pow(2, 16), keyArgs, makeCacheKey = defaultMakeCacheKey, normalizeResult, subscribe, cache: cacheOption = StrongCache } = Object.create(null)) {
  const cache = typeof cacheOption === "function" ? new cacheOption(max, (entry) => entry.dispose()) : cacheOption;
  const optimistic = function() {
    const key = makeCacheKey.apply(null, keyArgs ? keyArgs.apply(null, arguments) : arguments);
    if (key === undefined) {
      return originalFunction.apply(null, arguments);
    }
    let entry = cache.get(key);
    if (!entry) {
      cache.set(key, entry = new Entry(originalFunction));
      entry.normalizeResult = normalizeResult;
      entry.subscribe = subscribe;
      entry.forget = () => cache.delete(key);
    }
    const value = entry.recompute(Array.prototype.slice.call(arguments));
    cache.set(key, entry);
    caches.add(cache);
    if (!parentEntrySlot.hasValue()) {
      caches.forEach((cache2) => cache2.clean());
      caches.clear();
    }
    return value;
  };
  Object.defineProperty(optimistic, "size", {
    get: () => cache.size,
    configurable: false,
    enumerable: false
  });
  Object.freeze(optimistic.options = {
    max,
    keyArgs,
    makeCacheKey,
    normalizeResult,
    subscribe,
    cache
  });
  function dirtyKey(key) {
    const entry = key && cache.get(key);
    if (entry) {
      entry.setDirty();
    }
  }
  optimistic.dirtyKey = dirtyKey;
  optimistic.dirty = function dirty() {
    dirtyKey(makeCacheKey.apply(null, arguments));
  };
  function peekKey(key) {
    const entry = key && cache.get(key);
    if (entry) {
      return entry.peek();
    }
  }
  optimistic.peekKey = peekKey;
  optimistic.peek = function peek() {
    return peekKey(makeCacheKey.apply(null, arguments));
  };
  function forgetKey(key) {
    return key ? cache.delete(key) : false;
  }
  optimistic.forgetKey = forgetKey;
  optimistic.forget = function forget() {
    return forgetKey(makeCacheKey.apply(null, arguments));
  };
  optimistic.makeCacheKey = makeCacheKey;
  optimistic.getKey = keyArgs ? function getKey() {
    return makeCacheKey.apply(null, keyArgs.apply(null, arguments));
  } : makeCacheKey;
  return Object.freeze(optimistic);
}

// node_modules/@apollo/client/utilities/caching/sizes.js
var cacheSizeSymbol = Symbol.for("apollo.cacheSize");
var cacheSizes = { ...global_default[cacheSizeSymbol] };

// node_modules/@apollo/client/utilities/internal/getOperationName.js
function getOperationName(doc, fallback) {
  return doc.definitions.find((definition) => definition.kind === "OperationDefinition" && !!definition.name)?.name.value ?? fallback;
}

// node_modules/@apollo/client/utilities/internal/checkDocument.js
var checkDocument = wrap2((doc, expectedType) => {
  invariant2(doc && doc.kind === "Document", 1);
  const operations = doc.definitions.filter((d) => d.kind === "OperationDefinition");
  if (__DEV__) {
    doc.definitions.forEach((definition) => {
      if (definition.kind !== "OperationDefinition" && definition.kind !== "FragmentDefinition") {
        throw newInvariantError(2, definition.kind);
      }
    });
    invariant2(operations.length <= 1, 3, operations.length);
  }
  if (expectedType) {
    invariant2(operations.length == 1 && operations[0].operation === expectedType, 4, expectedType, expectedType, operations[0].operation);
  }
  visit(doc, {
    Field(field, _, __, path) {
      if (field.alias && (field.alias.value === "__typename" || field.alias.value.startsWith("__ac_")) && field.alias.value !== field.name.value) {
        let current = doc, fieldPath = [];
        for (const key of path) {
          current = current[key];
          if (current.kind === Kind.FIELD) {
            fieldPath.push(current.alias?.value || current.name.value);
          }
        }
        fieldPath.splice(-1, 1, field.name.value);
        throw newInvariantError(5, field.alias.value, fieldPath.join("."), operations[0].operation, getOperationName(doc, "(anonymous)"));
      }
    }
  });
}, {
  max: cacheSizes["checkDocument"] || 2000,
  cache: WeakCache
});
// node_modules/@apollo/client/utilities/internal/cloneDeep.js
var { toString } = Object.prototype;
function cloneDeep(value) {
  return __cloneDeep(value);
}
function __cloneDeep(val, seen) {
  switch (toString.call(val)) {
    case "[object Array]": {
      seen = seen || new Map;
      if (seen.has(val))
        return seen.get(val);
      const copy = val.slice(0);
      seen.set(val, copy);
      copy.forEach(function(child, i) {
        copy[i] = __cloneDeep(child, seen);
      });
      return copy;
    }
    case "[object Object]": {
      seen = seen || new Map;
      if (seen.has(val))
        return seen.get(val);
      const copy = Object.create(Object.getPrototypeOf(val));
      seen.set(val, copy);
      Object.keys(val).forEach((key) => {
        copy[key] = __cloneDeep(val[key], seen);
      });
      return copy;
    }
    default:
      return val;
  }
}
// node_modules/@apollo/client/utilities/internal/compact.js
function compact(...objects) {
  const result = {};
  objects.forEach((obj) => {
    if (!obj)
      return;
    Object.keys(obj).forEach((key) => {
      const value = obj[key];
      if (value !== undefined) {
        result[key] = value;
      }
    });
  });
  return result;
}
// node_modules/@apollo/client/utilities/internal/createFragmentMap.js
function createFragmentMap(fragments = []) {
  const symTable = {};
  fragments.forEach((fragment) => {
    symTable[fragment.name.value] = fragment;
  });
  return symTable;
}
// node_modules/@apollo/client/utilities/internal/isNonNullObject.js
function isNonNullObject(obj) {
  return obj !== null && typeof obj === "object";
}

// node_modules/@apollo/client/utilities/internal/DeepMerger.js
var { hasOwnProperty: hasOwnProperty3 } = Object.prototype;
var defaultReconciler = function(target, source, property) {
  return this.merge(target[property], source[property]);
};

class DeepMerger {
  reconciler;
  constructor(reconciler = defaultReconciler) {
    this.reconciler = reconciler;
  }
  merge(target, source, ...context2) {
    if (isNonNullObject(source) && isNonNullObject(target)) {
      Object.keys(source).forEach((sourceKey) => {
        if (hasOwnProperty3.call(target, sourceKey)) {
          const targetValue = target[sourceKey];
          if (source[sourceKey] !== targetValue) {
            const result = this.reconciler(target, source, sourceKey, ...context2);
            if (result !== targetValue) {
              target = this.shallowCopyForMerge(target);
              target[sourceKey] = result;
            }
          }
        } else {
          target = this.shallowCopyForMerge(target);
          target[sourceKey] = source[sourceKey];
        }
      });
      return target;
    }
    return source;
  }
  isObject = isNonNullObject;
  pastCopies = new Set;
  shallowCopyForMerge(value) {
    if (isNonNullObject(value)) {
      if (!this.pastCopies.has(value)) {
        if (Array.isArray(value)) {
          value = value.slice(0);
        } else {
          value = {
            __proto__: Object.getPrototypeOf(value),
            ...value
          };
        }
        this.pastCopies.add(value);
      }
    }
    return value;
  }
}
// node_modules/@apollo/client/utilities/internal/getDefaultValues.js
function getDefaultValues(definition) {
  const defaultValues = {};
  const defs = definition && definition.variableDefinitions;
  if (defs && defs.length) {
    defs.forEach((def) => {
      if (def.defaultValue) {
        valueToObjectRepresentation(defaultValues, def.variable.name, def.defaultValue);
      }
    });
  }
  return defaultValues;
}
// node_modules/@apollo/client/utilities/internal/getFragmentFromSelection.js
function getFragmentFromSelection(selection, fragmentMap) {
  switch (selection.kind) {
    case "InlineFragment":
      return selection;
    case "FragmentSpread": {
      const fragmentName = selection.name.value;
      if (typeof fragmentMap === "function") {
        return fragmentMap(fragmentName);
      }
      const fragment = fragmentMap && fragmentMap[fragmentName];
      invariant2(fragment, 9, fragmentName);
      return fragment || null;
    }
    default:
      return null;
  }
}
// node_modules/@apollo/client/utilities/internal/getFragmentQueryDocument.js
function getFragmentQueryDocument(document2, fragmentName) {
  let actualFragmentName = fragmentName;
  const fragments = [];
  document2.definitions.forEach((definition) => {
    if (definition.kind === "OperationDefinition") {
      throw newInvariantError(10, definition.operation, definition.name ? ` named '${definition.name.value}'` : "");
    }
    if (definition.kind === "FragmentDefinition") {
      fragments.push(definition);
    }
  });
  if (typeof actualFragmentName === "undefined") {
    invariant2(fragments.length === 1, 11, fragments.length);
    actualFragmentName = fragments[0].name.value;
  }
  const query = {
    ...document2,
    definitions: [
      {
        kind: "OperationDefinition",
        operation: "query",
        selectionSet: {
          kind: "SelectionSet",
          selections: [
            {
              kind: "FragmentSpread",
              name: {
                kind: "Name",
                value: actualFragmentName
              }
            }
          ]
        }
      },
      ...document2.definitions
    ]
  };
  return query;
}
// node_modules/@apollo/client/utilities/internal/getFragmentDefinition.js
function getFragmentDefinition(doc) {
  invariant2(doc.kind === "Document", 6);
  invariant2(doc.definitions.length <= 1, 7);
  const fragmentDef = doc.definitions[0];
  invariant2(fragmentDef.kind === "FragmentDefinition", 8);
  return fragmentDef;
}
// node_modules/@apollo/client/utilities/internal/getFragmentDefinitions.js
function getFragmentDefinitions(doc) {
  return doc.definitions.filter((definition) => definition.kind === "FragmentDefinition");
}
// node_modules/@apollo/client/utilities/internal/getMainDefinition.js
function getMainDefinition(queryDoc) {
  checkDocument(queryDoc);
  let fragmentDefinition;
  for (let definition of queryDoc.definitions) {
    if (definition.kind === "OperationDefinition") {
      return definition;
    }
    if (definition.kind === "FragmentDefinition" && !fragmentDefinition) {
      fragmentDefinition = definition;
    }
  }
  if (fragmentDefinition) {
    return fragmentDefinition;
  }
  throw newInvariantError(12);
}
// node_modules/@apollo/client/utilities/internal/getOperationDefinition.js
function getOperationDefinition(doc) {
  checkDocument(doc);
  return doc.definitions.filter((definition) => definition.kind === "OperationDefinition")[0];
}
// node_modules/@apollo/client/utilities/internal/getQueryDefinition.js
function getQueryDefinition(doc) {
  const queryDef = getOperationDefinition(doc);
  invariant2(queryDef && queryDef.operation === "query", 13);
  return queryDef;
}
// node_modules/@apollo/client/utilities/internal/caches.js
var scheduledCleanup = new WeakSet;
function schedule(cache) {
  if (cache.size <= (cache.max || -1)) {
    return;
  }
  if (!scheduledCleanup.has(cache)) {
    scheduledCleanup.add(cache);
    setTimeout(() => {
      cache.clean();
      scheduledCleanup.delete(cache);
    }, 100);
  }
}
var AutoCleanedWeakCache = function(max, dispose) {
  const cache = new WeakCache(max, dispose);
  cache.set = function(key, value) {
    const ret = WeakCache.prototype.set.call(this, key, value);
    schedule(this);
    return ret;
  };
  return cache;
};
var AutoCleanedStrongCache = function(max, dispose) {
  const cache = new StrongCache(max, dispose);
  cache.set = function(key, value) {
    const ret = StrongCache.prototype.set.call(this, key, value);
    schedule(this);
    return ret;
  };
  return cache;
};

// node_modules/@apollo/client/utilities/internal/getMemoryInternals.js
var globalCaches = {};
function registerGlobalCache(name, getSize) {
  globalCaches[name] = getSize;
}
var getApolloClientMemoryInternals = __DEV__ ? _getApolloClientMemoryInternals : undefined;
var getInMemoryCacheMemoryInternals = __DEV__ ? _getInMemoryCacheMemoryInternals : undefined;
var getApolloCacheMemoryInternals = __DEV__ ? _getApolloCacheMemoryInternals : undefined;
function getCurrentCacheSizes() {
  const defaults = {
    canonicalStringify: 1000,
    checkDocument: 2000,
    print: 2000,
    "documentTransform.cache": 2000,
    "queryManager.getDocumentInfo": 2000,
    "PersistedQueryLink.persistedQueryHashes": 2000,
    "fragmentRegistry.transform": 2000,
    "fragmentRegistry.lookup": 1000,
    "fragmentRegistry.findFragmentSpreads": 4000,
    "cache.fragmentQueryDocuments": 1000,
    "removeTypenameFromVariables.getVariableDefinitions": 2000,
    "inMemoryCache.maybeBroadcastWatch": 5000,
    "inMemoryCache.executeSelectionSet": 50000,
    "inMemoryCache.executeSubSelectedArray": 1e4
  };
  return Object.fromEntries(Object.entries(defaults).map(([k, v]) => [
    k,
    cacheSizes[k] || v
  ]));
}
function _getApolloClientMemoryInternals() {
  if (!__DEV__)
    throw new Error("only supported in development mode");
  return {
    limits: getCurrentCacheSizes(),
    sizes: {
      print: globalCaches.print?.(),
      canonicalStringify: globalCaches.canonicalStringify?.(),
      links: linkInfo(this.link),
      queryManager: {
        getDocumentInfo: this["queryManager"]["transformCache"].size,
        documentTransforms: transformInfo(this["queryManager"].documentTransform)
      },
      ...this.cache.getMemoryInternals?.()
    }
  };
}
function _getApolloCacheMemoryInternals() {
  return {
    cache: {
      fragmentQueryDocuments: getWrapperInformation(this["getFragmentDoc"])
    }
  };
}
function _getInMemoryCacheMemoryInternals() {
  const fragments = this.config.fragments;
  return {
    ..._getApolloCacheMemoryInternals.apply(this),
    addTypenameDocumentTransform: transformInfo(this["addTypenameTransform"]),
    inMemoryCache: {
      executeSelectionSet: getWrapperInformation(this["storeReader"]["executeSelectionSet"]),
      executeSubSelectedArray: getWrapperInformation(this["storeReader"]["executeSubSelectedArray"]),
      maybeBroadcastWatch: getWrapperInformation(this["maybeBroadcastWatch"])
    },
    fragmentRegistry: {
      findFragmentSpreads: getWrapperInformation(fragments?.findFragmentSpreads),
      lookup: getWrapperInformation(fragments?.lookup),
      transform: getWrapperInformation(fragments?.transform)
    }
  };
}
function isWrapper(f) {
  return !!f && "dirtyKey" in f;
}
function getWrapperInformation(f) {
  return isWrapper(f) ? f.size : undefined;
}
function isDefined(value) {
  return value != null;
}
function transformInfo(transform) {
  return recurseTransformInfo(transform).map((cache) => ({ cache }));
}
function recurseTransformInfo(transform) {
  return transform ? [
    getWrapperInformation(transform?.["performWork"]),
    ...recurseTransformInfo(transform?.["left"]),
    ...recurseTransformInfo(transform?.["right"])
  ].filter(isDefined) : [];
}
function linkInfo(link) {
  return link ? [
    link?.getMemoryInternals?.(),
    ...linkInfo(link?.left),
    ...linkInfo(link?.right)
  ].filter(isDefined) : [];
}

// node_modules/@apollo/client/utilities/internal/canonicalStringify.js
var canonicalStringify = Object.assign(function canonicalStringify2(value) {
  return JSON.stringify(value, stableObjectReplacer);
}, {
  reset() {
    sortingMap = new AutoCleanedStrongCache(cacheSizes.canonicalStringify || 1000);
  }
});
if (__DEV__) {
  registerGlobalCache("canonicalStringify", () => sortingMap.size);
}
var sortingMap;
canonicalStringify.reset();
function stableObjectReplacer(key, value) {
  if (value && typeof value === "object") {
    const proto = Object.getPrototypeOf(value);
    if (proto === Object.prototype || proto === null) {
      const keys = Object.keys(value);
      if (keys.every(everyKeyInOrder))
        return value;
      const unsortedKey = JSON.stringify(keys);
      let sortedKeys = sortingMap.get(unsortedKey);
      if (!sortedKeys) {
        keys.sort();
        const sortedKey = JSON.stringify(keys);
        sortedKeys = sortingMap.get(sortedKey) || keys;
        sortingMap.set(unsortedKey, sortedKeys);
        sortingMap.set(sortedKey, sortedKeys);
      }
      const sortedObject = Object.create(proto);
      sortedKeys.forEach((key2) => {
        sortedObject[key2] = value[key2];
      });
      return sortedObject;
    }
  }
  return value;
}
function everyKeyInOrder(key, i, keys) {
  return i === 0 || keys[i - 1] <= key;
}

// node_modules/@apollo/client/utilities/internal/getStoreKeyName.js
var KNOWN_DIRECTIVES = [
  "connection",
  "include",
  "skip",
  "client",
  "rest",
  "export",
  "nonreactive"
];
var storeKeyNameStringify = canonicalStringify;
var getStoreKeyName = Object.assign(function(fieldName, args, directives) {
  if (args && directives && directives["connection"] && directives["connection"]["key"]) {
    if (directives["connection"]["filter"] && directives["connection"]["filter"].length > 0) {
      const filterKeys = directives["connection"]["filter"] ? directives["connection"]["filter"] : [];
      filterKeys.sort();
      const filteredArgs = {};
      filterKeys.forEach((key) => {
        filteredArgs[key] = args[key];
      });
      const stringifiedArgs = storeKeyNameStringify(filteredArgs);
      if (stringifiedArgs !== "{}") {
        return `${directives["connection"]["key"]}(${stringifiedArgs})`;
      }
    }
    return directives["connection"]["key"];
  }
  let completeFieldName = fieldName;
  if (args) {
    const stringifiedArgs = storeKeyNameStringify(args);
    if (stringifiedArgs !== "{}") {
      completeFieldName += `(${stringifiedArgs})`;
    }
  }
  if (directives) {
    Object.keys(directives).forEach((key) => {
      if (KNOWN_DIRECTIVES.indexOf(key) !== -1)
        return;
      if (directives[key] && Object.keys(directives[key]).length) {
        completeFieldName += `@${key}(${storeKeyNameStringify(directives[key])})`;
      } else {
        completeFieldName += `@${key}`;
      }
    });
  }
  return completeFieldName;
}, {
  setStringify(s) {
    const previous = storeKeyNameStringify;
    storeKeyNameStringify = s;
    return previous;
  }
});
// node_modules/@apollo/client/utilities/internal/graphQLResultHasError.js
function graphQLResultHasError(result) {
  return !!result.errors?.length;
}
// node_modules/@apollo/client/utilities/internal/hasDirectives.js
function hasDirectives(names, root, all) {
  const nameSet = new Set(names);
  const uniqueCount = nameSet.size;
  visit(root, {
    Directive(node) {
      if (nameSet.delete(node.name.value) && (!all || !nameSet.size)) {
        return BREAK;
      }
    }
  });
  return all ? !nameSet.size : nameSet.size < uniqueCount;
}
// node_modules/@apollo/client/utilities/internal/hasForcedResolvers.js
function hasForcedResolvers(document2) {
  let forceResolvers = false;
  visit(document2, {
    Directive: {
      enter(node) {
        if (node.name.value === "client" && node.arguments) {
          forceResolvers = node.arguments.some((arg) => arg.name.value === "always" && arg.value.kind === "BooleanValue" && arg.value.value === true);
          if (forceResolvers) {
            return BREAK;
          }
        }
      }
    }
  });
  return forceResolvers;
}
// node_modules/@apollo/client/utilities/internal/isArray.js
var isArray = Array.isArray;
// node_modules/@apollo/client/utilities/internal/isDocumentNode.js
function isDocumentNode(value) {
  return isNonNullObject(value) && value.kind === "Document" && Array.isArray(value.definitions);
}
// node_modules/@apollo/client/utilities/internal/isField.js
function isField(selection) {
  return selection.kind === "Field";
}
// node_modules/@apollo/client/utilities/internal/isNonEmptyArray.js
function isNonEmptyArray(value) {
  return Array.isArray(value) && value.length > 0;
}
// node_modules/@apollo/client/utilities/internal/makeReference.js
function makeReference(id) {
  return { __ref: String(id) };
}
// node_modules/@apollo/client/utilities/internal/deepFreeze.js
function deepFreeze(value) {
  const workSet = new Set([value]);
  workSet.forEach((obj) => {
    if (isNonNullObject(obj) && shallowFreeze(obj) === obj) {
      Object.getOwnPropertyNames(obj).forEach((name) => {
        if (isNonNullObject(obj[name]))
          workSet.add(obj[name]);
      });
    }
  });
  return value;
}
function shallowFreeze(obj) {
  if (__DEV__ && !Object.isFrozen(obj)) {
    try {
      Object.freeze(obj);
    } catch (e) {
      if (e instanceof TypeError)
        return null;
      throw e;
    }
  }
  return obj;
}

// node_modules/@apollo/client/utilities/internal/maybeDeepFreeze.js
function maybeDeepFreeze(obj) {
  if (__DEV__) {
    deepFreeze(obj);
  }
  return obj;
}
// node_modules/@apollo/client/utilities/internal/mergeDeepArray.js
function mergeDeepArray(sources) {
  let target = sources[0] || {};
  const count = sources.length;
  if (count > 1) {
    const merger = new DeepMerger;
    for (let i = 1;i < count; ++i) {
      target = merger.merge(target, sources[i]);
    }
  }
  return target;
}
// node_modules/@apollo/client/utilities/internal/mergeOptions.js
function mergeOptions(defaults, options) {
  return compact(defaults, options, options.variables && {
    variables: compact({
      ...defaults && defaults.variables,
      ...options.variables
    })
  });
}
// node_modules/@apollo/client/utilities/internal/preventUnhandledRejection.js
function preventUnhandledRejection(promise) {
  promise.catch(() => {
  });
  return promise;
}
// node_modules/@apollo/client/utilities/internal/removeDirectivesFromDocument.js
function removeDirectivesFromDocument(directives, doc) {
  checkDocument(doc);
  const getInUseByOperationName = makeInUseGetterFunction("");
  const getInUseByFragmentName = makeInUseGetterFunction("");
  const getInUse = (ancestors) => {
    for (let p = 0, ancestor;p < ancestors.length && (ancestor = ancestors[p]); ++p) {
      if (isArray(ancestor))
        continue;
      if (ancestor.kind === Kind.OPERATION_DEFINITION) {
        return getInUseByOperationName(ancestor.name && ancestor.name.value);
      }
      if (ancestor.kind === Kind.FRAGMENT_DEFINITION) {
        return getInUseByFragmentName(ancestor.name.value);
      }
    }
    invariant2.error(14);
    return null;
  };
  let operationCount = 0;
  for (let i = doc.definitions.length - 1;i >= 0; --i) {
    if (doc.definitions[i].kind === Kind.OPERATION_DEFINITION) {
      ++operationCount;
    }
  }
  const directiveMatcher = getDirectiveMatcher(directives);
  const shouldRemoveField = (nodeDirectives) => isNonEmptyArray(nodeDirectives) && nodeDirectives.map(directiveMatcher).some((config2) => config2 && config2.remove);
  const originalFragmentDefsByPath = new Map;
  let firstVisitMadeChanges = false;
  const fieldOrInlineFragmentVisitor = {
    enter(node) {
      if (shouldRemoveField(node.directives)) {
        firstVisitMadeChanges = true;
        return null;
      }
    }
  };
  const docWithoutDirectiveSubtrees = visit(doc, {
    Field: fieldOrInlineFragmentVisitor,
    InlineFragment: fieldOrInlineFragmentVisitor,
    VariableDefinition: {
      enter() {
        return false;
      }
    },
    Variable: {
      enter(node, _key, _parent, _path, ancestors) {
        const inUse = getInUse(ancestors);
        if (inUse) {
          inUse.variables.add(node.name.value);
        }
      }
    },
    FragmentSpread: {
      enter(node, _key, _parent, _path, ancestors) {
        if (shouldRemoveField(node.directives)) {
          firstVisitMadeChanges = true;
          return null;
        }
        const inUse = getInUse(ancestors);
        if (inUse) {
          inUse.fragmentSpreads.add(node.name.value);
        }
      }
    },
    FragmentDefinition: {
      enter(node, _key, _parent, path) {
        originalFragmentDefsByPath.set(JSON.stringify(path), node);
      },
      leave(node, _key, _parent, path) {
        const originalNode = originalFragmentDefsByPath.get(JSON.stringify(path));
        if (node === originalNode) {
          return node;
        }
        if (operationCount > 0 && node.selectionSet.selections.every((selection) => selection.kind === Kind.FIELD && selection.name.value === "__typename")) {
          getInUseByFragmentName(node.name.value).removed = true;
          firstVisitMadeChanges = true;
          return null;
        }
      }
    },
    Directive: {
      leave(node) {
        if (directiveMatcher(node)) {
          firstVisitMadeChanges = true;
          return null;
        }
      }
    }
  });
  if (!firstVisitMadeChanges) {
    return doc;
  }
  const populateTransitiveVars = (inUse) => {
    if (!inUse.transitiveVars) {
      inUse.transitiveVars = new Set(inUse.variables);
      if (!inUse.removed) {
        inUse.fragmentSpreads.forEach((childFragmentName) => {
          populateTransitiveVars(getInUseByFragmentName(childFragmentName)).transitiveVars.forEach((varName) => {
            inUse.transitiveVars.add(varName);
          });
        });
      }
    }
    return inUse;
  };
  const allFragmentNamesUsed = new Set;
  docWithoutDirectiveSubtrees.definitions.forEach((def) => {
    if (def.kind === Kind.OPERATION_DEFINITION) {
      populateTransitiveVars(getInUseByOperationName(def.name && def.name.value)).fragmentSpreads.forEach((childFragmentName) => {
        allFragmentNamesUsed.add(childFragmentName);
      });
    } else if (def.kind === Kind.FRAGMENT_DEFINITION && operationCount === 0 && !getInUseByFragmentName(def.name.value).removed) {
      allFragmentNamesUsed.add(def.name.value);
    }
  });
  allFragmentNamesUsed.forEach((fragmentName) => {
    populateTransitiveVars(getInUseByFragmentName(fragmentName)).fragmentSpreads.forEach((childFragmentName) => {
      allFragmentNamesUsed.add(childFragmentName);
    });
  });
  const fragmentWillBeRemoved = (fragmentName) => !!(!allFragmentNamesUsed.has(fragmentName) || getInUseByFragmentName(fragmentName).removed);
  const enterVisitor = {
    enter(node) {
      if (fragmentWillBeRemoved(node.name.value)) {
        return null;
      }
    }
  };
  return nullIfDocIsEmpty(visit(docWithoutDirectiveSubtrees, {
    FragmentSpread: enterVisitor,
    FragmentDefinition: enterVisitor,
    OperationDefinition: {
      leave(node) {
        if (node.variableDefinitions) {
          const usedVariableNames = populateTransitiveVars(getInUseByOperationName(node.name && node.name.value)).transitiveVars;
          if (usedVariableNames.size < node.variableDefinitions.length) {
            return {
              ...node,
              variableDefinitions: node.variableDefinitions.filter((varDef) => usedVariableNames.has(varDef.variable.name.value))
            };
          }
        }
      }
    }
  }));
}
function makeInUseGetterFunction(defaultKey) {
  const map2 = new Map;
  return function inUseGetterFunction(key = defaultKey) {
    let inUse = map2.get(key);
    if (!inUse) {
      map2.set(key, inUse = {
        variables: new Set,
        fragmentSpreads: new Set
      });
    }
    return inUse;
  };
}
function getDirectiveMatcher(configs) {
  const names = new Map;
  const tests = new Map;
  configs.forEach((directive) => {
    if (directive) {
      if (directive.name) {
        names.set(directive.name, directive);
      } else if (directive.test) {
        tests.set(directive.test, directive);
      }
    }
  });
  return (directive) => {
    let config2 = names.get(directive.name.value);
    if (!config2 && tests.size) {
      tests.forEach((testConfig, test) => {
        if (test(directive)) {
          config2 = testConfig;
        }
      });
    }
    return config2;
  };
}
function isEmpty(op, fragmentMap) {
  return !op || op.selectionSet.selections.every((selection) => selection.kind === Kind.FRAGMENT_SPREAD && isEmpty(fragmentMap[selection.name.value], fragmentMap));
}
function nullIfDocIsEmpty(doc) {
  return isEmpty(getOperationDefinition(doc) || getFragmentDefinition(doc), createFragmentMap(getFragmentDefinitions(doc))) ? null : doc;
}
// node_modules/@apollo/client/utilities/internal/removeFragmentSpreads.js
function removeMaskedFragmentSpreads(document2) {
  return visit(document2, {
    FragmentSpread(node) {
      if (!node.directives?.some(({ name }) => name.value === "unmask")) {
        return null;
      }
    }
  });
}
// node_modules/@apollo/client/utilities/internal/resultKeyNameFromField.js
function resultKeyNameFromField(field) {
  return field.alias ? field.alias.value : field.name.value;
}
// node_modules/@apollo/client/utilities/internal/shouldInclude.js
function shouldInclude({ directives }, variables) {
  if (!directives || !directives.length) {
    return true;
  }
  return getInclusionDirectives(directives).every(({ directive, ifArgument }) => {
    let evaledValue = false;
    if (ifArgument.value.kind === "Variable") {
      evaledValue = variables && variables[ifArgument.value.name.value];
      invariant2(evaledValue !== undefined, 15, directive.name.value);
    } else {
      evaledValue = ifArgument.value.value;
    }
    return directive.name.value === "skip" ? !evaledValue : evaledValue;
  });
}
function isInclusionDirective({ name: { value } }) {
  return value === "skip" || value === "include";
}
function getInclusionDirectives(directives) {
  const result = [];
  if (directives && directives.length) {
    directives.forEach((directive) => {
      if (!isInclusionDirective(directive))
        return;
      const directiveArguments = directive.arguments;
      const directiveName = directive.name.value;
      invariant2(directiveArguments && directiveArguments.length === 1, 16, directiveName);
      const ifArgument = directiveArguments[0];
      invariant2(ifArgument.name && ifArgument.name.value === "if", 17, directiveName);
      const ifValue = ifArgument.value;
      invariant2(ifValue && (ifValue.kind === "Variable" || ifValue.kind === "BooleanValue"), 18, directiveName);
      result.push({ directive, ifArgument });
    });
  }
  return result;
}
// node_modules/@apollo/client/utilities/internal/storeKeyNameFromField.js
function storeKeyNameFromField(field, variables) {
  let directivesObj = null;
  if (field.directives) {
    directivesObj = {};
    field.directives.forEach((directive) => {
      directivesObj[directive.name.value] = {};
      if (directive.arguments) {
        directive.arguments.forEach(({ name, value }) => valueToObjectRepresentation(directivesObj[directive.name.value], name, value, variables));
      }
    });
  }
  let argObj = null;
  if (field.arguments && field.arguments.length) {
    argObj = {};
    field.arguments.forEach(({ name, value }) => valueToObjectRepresentation(argObj, name, value, variables));
  }
  return getStoreKeyName(field.name.value, argObj, directivesObj);
}
// node_modules/@apollo/client/utilities/internal/toQueryResult.js
function toQueryResult(value) {
  const result = {
    data: value.data
  };
  if (value.error) {
    result.error = value.error;
  }
  return result;
}
// node_modules/@apollo/client/utilities/internal/filterMap.js
function filterMap(fn, makeContext = () => {
  return;
}) {
  return (source) => new Observable((subscriber) => {
    let context2 = makeContext();
    return source.subscribe({
      next(value) {
        let result;
        try {
          result = fn(value, context2);
        } catch (e) {
          subscriber.error(e);
        }
        if (result === undefined) {
          return;
        }
        subscriber.next(result);
      },
      error(err) {
        subscriber.error(err);
      },
      complete() {
        subscriber.complete();
      }
    });
  });
}
// node_modules/@wry/equality/lib/index.js
var { toString: toString2, hasOwnProperty: hasOwnProperty4 } = Object.prototype;
var fnToStr = Function.prototype.toString;
var previousComparisons = new Map;
function equal(a, b) {
  try {
    return check(a, b);
  } finally {
    previousComparisons.clear();
  }
}
var lib_default = equal;
function check(a, b) {
  if (a === b) {
    return true;
  }
  const aTag = toString2.call(a);
  const bTag = toString2.call(b);
  if (aTag !== bTag) {
    return false;
  }
  switch (aTag) {
    case "[object Array]":
      if (a.length !== b.length)
        return false;
    case "[object Object]": {
      if (previouslyCompared(a, b))
        return true;
      const aKeys = definedKeys(a);
      const bKeys = definedKeys(b);
      const keyCount = aKeys.length;
      if (keyCount !== bKeys.length)
        return false;
      for (let k = 0;k < keyCount; ++k) {
        if (!hasOwnProperty4.call(b, aKeys[k])) {
          return false;
        }
      }
      for (let k = 0;k < keyCount; ++k) {
        const key = aKeys[k];
        if (!check(a[key], b[key])) {
          return false;
        }
      }
      return true;
    }
    case "[object Error]":
      return a.name === b.name && a.message === b.message;
    case "[object Number]":
      if (a !== a)
        return b !== b;
    case "[object Boolean]":
    case "[object Date]":
      return +a === +b;
    case "[object RegExp]":
    case "[object String]":
      return a == `${b}`;
    case "[object Map]":
    case "[object Set]": {
      if (a.size !== b.size)
        return false;
      if (previouslyCompared(a, b))
        return true;
      const aIterator = a.entries();
      const isMap = aTag === "[object Map]";
      while (true) {
        const info = aIterator.next();
        if (info.done)
          break;
        const [aKey, aValue] = info.value;
        if (!b.has(aKey)) {
          return false;
        }
        if (isMap && !check(aValue, b.get(aKey))) {
          return false;
        }
      }
      return true;
    }
    case "[object Uint16Array]":
    case "[object Uint8Array]":
    case "[object Uint32Array]":
    case "[object Int32Array]":
    case "[object Int8Array]":
    case "[object Int16Array]":
    case "[object ArrayBuffer]":
      a = new Uint8Array(a);
      b = new Uint8Array(b);
    case "[object DataView]": {
      let len = a.byteLength;
      if (len === b.byteLength) {
        while (len-- && a[len] === b[len]) {
        }
      }
      return len === -1;
    }
    case "[object AsyncFunction]":
    case "[object GeneratorFunction]":
    case "[object AsyncGeneratorFunction]":
    case "[object Function]": {
      const aCode = fnToStr.call(a);
      if (aCode !== fnToStr.call(b)) {
        return false;
      }
      return !endsWith(aCode, nativeCodeSuffix);
    }
  }
  return false;
}
function definedKeys(obj) {
  return Object.keys(obj).filter(isDefinedKey, obj);
}
function isDefinedKey(key) {
  return this[key] !== undefined;
}
var nativeCodeSuffix = "{ [native code] }";
function endsWith(full, suffix) {
  const fromIndex = full.length - suffix.length;
  return fromIndex >= 0 && full.indexOf(suffix, fromIndex) === fromIndex;
}
function previouslyCompared(a, b) {
  let bSet = previousComparisons.get(a);
  if (bSet) {
    if (bSet.has(b))
      return true;
  } else {
    previousComparisons.set(a, bSet = new Set);
  }
  bSet.add(b);
  return false;
}

// node_modules/@apollo/client/utilities/internal/equalByQuery.js
function equalByQuery(query, { data: aData, ...aRest }, { data: bData, ...bRest }, variables) {
  return lib_default(aRest, bRest) && equalBySelectionSet(getMainDefinition(query).selectionSet, aData, bData, {
    fragmentMap: createFragmentMap(getFragmentDefinitions(query)),
    variables
  });
}
function equalBySelectionSet(selectionSet, aResult, bResult, context2) {
  if (aResult === bResult) {
    return true;
  }
  const seenSelections = new Set;
  return selectionSet.selections.every((selection) => {
    if (seenSelections.has(selection))
      return true;
    seenSelections.add(selection);
    if (!shouldInclude(selection, context2.variables))
      return true;
    if (selectionHasNonreactiveDirective(selection))
      return true;
    if (isField(selection)) {
      const resultKey = resultKeyNameFromField(selection);
      const aResultChild = aResult && aResult[resultKey];
      const bResultChild = bResult && bResult[resultKey];
      const childSelectionSet = selection.selectionSet;
      if (!childSelectionSet) {
        return lib_default(aResultChild, bResultChild);
      }
      const aChildIsArray = Array.isArray(aResultChild);
      const bChildIsArray = Array.isArray(bResultChild);
      if (aChildIsArray !== bChildIsArray)
        return false;
      if (aChildIsArray && bChildIsArray) {
        const length = aResultChild.length;
        if (bResultChild.length !== length) {
          return false;
        }
        for (let i = 0;i < length; ++i) {
          if (!equalBySelectionSet(childSelectionSet, aResultChild[i], bResultChild[i], context2)) {
            return false;
          }
        }
        return true;
      }
      return equalBySelectionSet(childSelectionSet, aResultChild, bResultChild, context2);
    } else {
      const fragment = getFragmentFromSelection(selection, context2.fragmentMap);
      if (fragment) {
        if (selectionHasNonreactiveDirective(fragment))
          return true;
        return equalBySelectionSet(fragment.selectionSet, aResult, bResult, context2);
      }
    }
  });
}
function selectionHasNonreactiveDirective(selection) {
  return !!selection.directives && selection.directives.some(directiveIsNonreactive);
}
function directiveIsNonreactive(dir) {
  return dir.name.value === "nonreactive";
}
// node_modules/@apollo/client/incremental/handlers/notImplemented.js
class NotImplementedHandler {
  isIncrementalResult(_) {
    return false;
  }
  prepareRequest(request) {
    invariant2(!hasDirectives(["defer"], request.query), 64);
    return request;
  }
  extractErrors() {
  }
  startRequest = undefined;
}
// node_modules/@apollo/client/link/utils/createOperation.js
function createOperation(request, { client }) {
  const operation = {
    query: request.query,
    variables: request.variables || {},
    extensions: request.extensions || {},
    operationName: getOperationName(request.query),
    operationType: getOperationDefinition(request.query).operation
  };
  let context2 = { ...request.context };
  const setContext = (next) => {
    if (typeof next === "function") {
      context2 = { ...context2, ...next(getContext()) };
    } else {
      context2 = { ...context2, ...next };
    }
  };
  const getContext = () => Object.freeze({ ...context2 });
  Object.defineProperty(operation, "setContext", {
    enumerable: false,
    value: setContext
  });
  Object.defineProperty(operation, "getContext", {
    enumerable: false,
    value: getContext
  });
  Object.defineProperty(operation, "client", {
    enumerable: false,
    value: client
  });
  return operation;
}
// node_modules/@apollo/client/link/utils/filterOperationVariables.js
function filterOperationVariables(variables, query) {
  const result = { ...variables };
  const unusedNames = new Set(Object.keys(variables));
  visit(query, {
    Variable(node, _key, parent) {
      if (parent && parent.kind !== "VariableDefinition") {
        unusedNames.delete(node.name.value);
      }
    }
  });
  unusedNames.forEach((name) => {
    delete result[name];
  });
  return result;
}
// node_modules/@apollo/client/link/core/ApolloLink.js
class ApolloLink {
  static empty() {
    return new ApolloLink(() => EMPTY);
  }
  static from(links) {
    if (links.length === 0)
      return ApolloLink.empty();
    const [first, ...rest] = links;
    return first.concat(...rest);
  }
  static split(test, left, right = new ApolloLink((op, forward) => forward(op))) {
    const link = new ApolloLink((operation, forward) => {
      const result = test(operation);
      if (__DEV__) {
        if (typeof result !== "boolean") {
          __DEV__ && invariant2.warn(61, result);
        }
      }
      return result ? left.request(operation, forward) : right.request(operation, forward);
    });
    return Object.assign(link, { left, right });
  }
  static execute(link, request, context2) {
    return link.request(createOperation(request, context2), () => {
      if (__DEV__) {
        __DEV__ && invariant2.warn(62);
      }
      return EMPTY;
    });
  }
  static concat(...links) {
    return ApolloLink.from(links);
  }
  constructor(request) {
    if (request)
      this.request = request;
  }
  split(test, left, right) {
    return this.concat(ApolloLink.split(test, left, right));
  }
  concat(...links) {
    if (links.length === 0) {
      return this;
    }
    return links.reduce(this.combine.bind(this), this);
  }
  combine(left, right) {
    const link = new ApolloLink((operation, forward) => {
      return left.request(operation, (op) => right.request(op, forward));
    });
    return Object.assign(link, { left, right });
  }
  request(operation, forward) {
    throw newInvariantError(63);
  }
  left;
  right;
  getMemoryInternals;
}

// node_modules/@apollo/client/link/core/execute.js
var execute = ApolloLink.execute;
// node_modules/@apollo/client/utilities/graphql/DocumentTransform.js
function identity2(document2) {
  return document2;
}

class DocumentTransform {
  transform;
  cached;
  resultCache = new WeakSet;
  getCacheKey(document2) {
    return [document2];
  }
  static identity() {
    return new DocumentTransform(identity2, { cache: false });
  }
  static split(predicate, left, right = DocumentTransform.identity()) {
    return Object.assign(new DocumentTransform((document2) => {
      const documentTransform = predicate(document2) ? left : right;
      return documentTransform.transformDocument(document2);
    }, { cache: false }), { left, right });
  }
  constructor(transform, options = {}) {
    this.transform = transform;
    if (options.getCacheKey) {
      this.getCacheKey = options.getCacheKey;
    }
    this.cached = options.cache !== false;
    this.resetCache();
  }
  resetCache() {
    if (this.cached) {
      const stableCacheKeys = new Trie;
      this.performWork = wrap2(DocumentTransform.prototype.performWork.bind(this), {
        makeCacheKey: (document2) => {
          const cacheKeys = this.getCacheKey(document2);
          if (cacheKeys) {
            invariant2(Array.isArray(cacheKeys), 20);
            return stableCacheKeys.lookupArray(cacheKeys);
          }
        },
        max: cacheSizes["documentTransform.cache"],
        cache: WeakCache
      });
    }
  }
  performWork(document2) {
    checkDocument(document2);
    return this.transform(document2);
  }
  transformDocument(document2) {
    if (this.resultCache.has(document2)) {
      return document2;
    }
    const transformedDocument = this.performWork(document2);
    this.resultCache.add(transformedDocument);
    return transformedDocument;
  }
  concat(otherTransform) {
    return Object.assign(new DocumentTransform((document2) => {
      return otherTransform.transformDocument(this.transformDocument(document2));
    }, { cache: false }), {
      left: this,
      right: otherTransform
    });
  }
  left;
  right;
}
// node_modules/@apollo/client/utilities/graphql/print.js
var printCache;
var print2 = Object.assign((ast) => {
  let result = printCache.get(ast);
  if (!result) {
    result = print(ast);
    printCache.set(ast, result);
  }
  return result;
}, {
  reset() {
    printCache = new AutoCleanedWeakCache(cacheSizes.print || 2000);
  }
});
print2.reset();
if (__DEV__) {
  registerGlobalCache("print", () => printCache ? printCache.size : 0);
}
// node_modules/@apollo/client/utilities/graphql/storeUtils.js
function isReference(obj) {
  return Boolean(obj && typeof obj === "object" && typeof obj.__ref === "string");
}
// node_modules/@apollo/client/utilities/graphql/transform.js
var TYPENAME_FIELD = {
  kind: Kind.FIELD,
  name: {
    kind: Kind.NAME,
    value: "__typename"
  }
};
var addTypenameToDocument = Object.assign(function(doc) {
  return visit(doc, {
    SelectionSet: {
      enter(node, _key, parent) {
        if (parent && parent.kind === Kind.OPERATION_DEFINITION) {
          return;
        }
        const { selections } = node;
        if (!selections) {
          return;
        }
        const skip = selections.some((selection) => {
          return selection.kind === Kind.FIELD && (selection.name.value === "__typename" || selection.name.value.lastIndexOf("__", 0) === 0);
        });
        if (skip) {
          return;
        }
        const field = parent;
        if (field.kind === Kind.FIELD && field.directives && field.directives.some((d) => d.name.value === "export")) {
          return;
        }
        return {
          ...node,
          selections: [...selections, TYPENAME_FIELD]
        };
      }
    }
  });
}, {
  added(field) {
    return field === TYPENAME_FIELD;
  }
});
// node_modules/@apollo/client/utilities/graphql/operations.js
function isOperation(document2, operation) {
  return getOperationDefinition(document2)?.operation === operation;
}
function isMutationOperation(document2) {
  return isOperation(document2, "mutation");
}
function isSubscriptionOperation(document2) {
  return isOperation(document2, "subscription");
}
// node_modules/@apollo/client/cache/core/cache.js
class ApolloCache {
  assumeImmutableResults = false;
  lookupFragment(fragmentName) {
    return null;
  }
  batch(options) {
    const optimisticId = typeof options.optimistic === "string" ? options.optimistic : options.optimistic === false ? null : undefined;
    let updateResult;
    this.performTransaction(() => updateResult = options.update(this), optimisticId);
    return updateResult;
  }
  recordOptimisticTransaction(transaction, optimisticId) {
    this.performTransaction(transaction, optimisticId);
  }
  transformDocument(document2) {
    return document2;
  }
  transformForLink(document2) {
    return document2;
  }
  identify(object) {
    return;
  }
  gc() {
    return [];
  }
  modify(options) {
    return false;
  }
  readQuery(options, optimistic = !!options.optimistic) {
    return this.read({
      ...options,
      rootId: options.id || "ROOT_QUERY",
      optimistic
    });
  }
  watchFragment(options) {
    const { fragment, fragmentName, from: from2, optimistic = true, ...otherOptions } = options;
    const query = this.getFragmentDoc(fragment, fragmentName);
    const id = typeof from2 === "undefined" || typeof from2 === "string" ? from2 : this.identify(from2);
    if (__DEV__) {
      const actualFragmentName = fragmentName || getFragmentDefinition(fragment).name.value;
      if (!id) {
        __DEV__ && invariant2.warn(109, actualFragmentName);
      }
    }
    const diffOptions = {
      ...otherOptions,
      returnPartialData: true,
      id,
      query,
      optimistic
    };
    let latestDiff;
    return new Observable((observer) => {
      return this.watch({
        ...diffOptions,
        immediate: true,
        callback: (diff) => {
          let data = diff.result;
          if (data === null) {
            data = {};
          }
          if (latestDiff && equalByQuery(query, { data: latestDiff.result }, { data }, options.variables)) {
            return;
          }
          const result = {
            data,
            dataState: diff.complete ? "complete" : "partial",
            complete: !!diff.complete
          };
          if (diff.missing) {
            result.missing = diff.missing.missing;
          }
          latestDiff = { ...diff, result: data };
          observer.next(result);
        }
      });
    });
  }
  getFragmentDoc = wrap2(getFragmentQueryDocument, {
    max: cacheSizes["cache.fragmentQueryDocuments"] || 1000,
    cache: WeakCache
  });
  readFragment(options, optimistic = !!options.optimistic) {
    return this.read({
      ...options,
      query: this.getFragmentDoc(options.fragment, options.fragmentName),
      rootId: options.id,
      optimistic
    });
  }
  writeQuery({ id, data, ...options }) {
    return this.write(Object.assign(options, {
      dataId: id || "ROOT_QUERY",
      result: data
    }));
  }
  writeFragment({ id, data, fragment, fragmentName, ...options }) {
    return this.write(Object.assign(options, {
      query: this.getFragmentDoc(fragment, fragmentName),
      dataId: id,
      result: data
    }));
  }
  updateQuery(options, update) {
    return this.batch({
      update(cache) {
        const value = cache.readQuery(options);
        const data = update(value);
        if (data === undefined || data === null)
          return value;
        cache.writeQuery({ ...options, data });
        return data;
      }
    });
  }
  updateFragment(options, update) {
    return this.batch({
      update(cache) {
        const value = cache.readFragment(options);
        const data = update(value);
        if (data === undefined || data === null)
          return value;
        cache.writeFragment({ ...options, data });
        return data;
      }
    });
  }
  getMemoryInternals;
}
if (__DEV__) {
  ApolloCache.prototype.getMemoryInternals = getApolloCacheMemoryInternals;
}

// node_modules/@apollo/client/cache/core/types/common.js
class MissingFieldError extends Error {
  message;
  path;
  query;
  variables;
  constructor(message, path, query, variables) {
    super(message);
    this.message = message;
    this.path = path;
    this.query = query;
    this.variables = variables;
    this.name = "MissingFieldError";
    if (Array.isArray(this.path)) {
      this.missing = this.message;
      for (let i = this.path.length - 1;i >= 0; --i) {
        this.missing = { [this.path[i]]: this.missing };
      }
    } else {
      this.missing = this.path;
    }
    this.__proto__ = MissingFieldError.prototype;
  }
  missing;
}
// node_modules/@apollo/client/cache/inmemory/helpers.js
var { hasOwnProperty: hasOwn } = Object.prototype;
function defaultDataIdFromObject({ __typename, id, _id }, context2) {
  if (typeof __typename === "string") {
    if (context2) {
      context2.keyObject = id != null ? { id } : _id != null ? { _id } : undefined;
    }
    if (id == null && _id != null) {
      id = _id;
    }
    if (id != null) {
      return `${__typename}:${typeof id === "number" || typeof id === "string" ? id : JSON.stringify(id)}`;
    }
  }
}
var defaultConfig = {
  dataIdFromObject: defaultDataIdFromObject,
  resultCaching: true
};
function normalizeConfig(config2) {
  return compact(defaultConfig, config2);
}
function getTypenameFromStoreObject(store, objectOrReference) {
  return isReference(objectOrReference) ? store.get(objectOrReference.__ref, "__typename") : objectOrReference && objectOrReference.__typename;
}
var TypeOrFieldNameRegExp = /^[_a-z][_0-9a-z]*/i;
function fieldNameFromStoreName(storeFieldName) {
  const match = storeFieldName.match(TypeOrFieldNameRegExp);
  return match ? match[0] : storeFieldName;
}
function selectionSetMatchesResult(selectionSet, result, variables) {
  if (isNonNullObject(result)) {
    return isArray(result) ? result.every((item) => selectionSetMatchesResult(selectionSet, item, variables)) : selectionSet.selections.every((field) => {
      if (isField(field) && shouldInclude(field, variables)) {
        const key = resultKeyNameFromField(field);
        return hasOwn.call(result, key) && (!field.selectionSet || selectionSetMatchesResult(field.selectionSet, result[key], variables));
      }
      return true;
    });
  }
  return false;
}
function storeValueIsStoreObject(value) {
  return isNonNullObject(value) && !isReference(value) && !isArray(value);
}
function makeProcessedFieldsMerger() {
  return new DeepMerger;
}
function extractFragmentContext(document2, fragments) {
  const fragmentMap = createFragmentMap(getFragmentDefinitions(document2));
  return {
    fragmentMap,
    lookupFragment(name) {
      let def = fragmentMap[name];
      if (!def && fragments) {
        def = fragments.lookup(name);
      }
      return def || null;
    }
  };
}

// node_modules/@apollo/client/cache/inmemory/entityStore.js
var DELETE = {};
var delModifier = () => DELETE;
var INVALIDATE = {};

class EntityStore {
  policies;
  group;
  data = {};
  constructor(policies, group) {
    this.policies = policies;
    this.group = group;
  }
  toObject() {
    return { ...this.data };
  }
  has(dataId) {
    return this.lookup(dataId, true) !== undefined;
  }
  get(dataId, fieldName) {
    this.group.depend(dataId, fieldName);
    if (hasOwn.call(this.data, dataId)) {
      const storeObject = this.data[dataId];
      if (storeObject && hasOwn.call(storeObject, fieldName)) {
        return storeObject[fieldName];
      }
    }
    if (fieldName === "__typename" && hasOwn.call(this.policies.rootTypenamesById, dataId)) {
      return this.policies.rootTypenamesById[dataId];
    }
    if (this instanceof Layer) {
      return this.parent.get(dataId, fieldName);
    }
  }
  lookup(dataId, dependOnExistence) {
    if (dependOnExistence)
      this.group.depend(dataId, "__exists");
    if (hasOwn.call(this.data, dataId)) {
      return this.data[dataId];
    }
    if (this instanceof Layer) {
      return this.parent.lookup(dataId, dependOnExistence);
    }
    if (this.policies.rootTypenamesById[dataId]) {
      return {};
    }
  }
  merge(older, newer) {
    let dataId;
    if (isReference(older))
      older = older.__ref;
    if (isReference(newer))
      newer = newer.__ref;
    const existing = typeof older === "string" ? this.lookup(dataId = older) : older;
    const incoming = typeof newer === "string" ? this.lookup(dataId = newer) : newer;
    if (!incoming)
      return;
    invariant2(typeof dataId === "string", 95);
    const merged = new DeepMerger(storeObjectReconciler).merge(existing, incoming);
    this.data[dataId] = merged;
    if (merged !== existing) {
      delete this.refs[dataId];
      if (this.group.caching) {
        const fieldsToDirty = {};
        if (!existing)
          fieldsToDirty.__exists = 1;
        Object.keys(incoming).forEach((storeFieldName) => {
          if (!existing || existing[storeFieldName] !== merged[storeFieldName]) {
            fieldsToDirty[storeFieldName] = 1;
            const fieldName = fieldNameFromStoreName(storeFieldName);
            if (fieldName !== storeFieldName && !this.policies.hasKeyArgs(merged.__typename, fieldName)) {
              fieldsToDirty[fieldName] = 1;
            }
            if (merged[storeFieldName] === undefined && !(this instanceof Layer)) {
              delete merged[storeFieldName];
            }
          }
        });
        if (fieldsToDirty.__typename && !(existing && existing.__typename) && this.policies.rootTypenamesById[dataId] === merged.__typename) {
          delete fieldsToDirty.__typename;
        }
        Object.keys(fieldsToDirty).forEach((fieldName) => this.group.dirty(dataId, fieldName));
      }
    }
  }
  modify(dataId, fields, exact) {
    const storeObject = this.lookup(dataId);
    if (storeObject) {
      const changedFields = {};
      let needToMerge = false;
      let allDeleted = true;
      const sharedDetails = {
        DELETE,
        INVALIDATE,
        isReference,
        toReference: this.toReference,
        canRead: this.canRead,
        readField: (fieldNameOrOptions, from2) => this.policies.readField(typeof fieldNameOrOptions === "string" ? {
          fieldName: fieldNameOrOptions,
          from: from2 || makeReference(dataId)
        } : fieldNameOrOptions, { store: this })
      };
      Object.keys(storeObject).forEach((storeFieldName) => {
        const fieldName = fieldNameFromStoreName(storeFieldName);
        let fieldValue = storeObject[storeFieldName];
        if (fieldValue === undefined)
          return;
        const modify = typeof fields === "function" ? fields : fields[storeFieldName] || (exact ? undefined : fields[fieldName]);
        if (modify) {
          let newValue = modify === delModifier ? DELETE : modify(maybeDeepFreeze(fieldValue), {
            ...sharedDetails,
            fieldName,
            storeFieldName,
            storage: this.getStorage(dataId, storeFieldName)
          });
          if (newValue === INVALIDATE) {
            this.group.dirty(dataId, storeFieldName);
          } else {
            if (newValue === DELETE)
              newValue = undefined;
            if (newValue !== fieldValue) {
              changedFields[storeFieldName] = newValue;
              needToMerge = true;
              fieldValue = newValue;
              if (__DEV__) {
                const checkReference = (ref) => {
                  if (this.lookup(ref.__ref) === undefined) {
                    __DEV__ && invariant2.warn(96, ref);
                    return true;
                  }
                };
                if (isReference(newValue)) {
                  checkReference(newValue);
                } else if (Array.isArray(newValue)) {
                  let seenReference = false;
                  let someNonReference;
                  for (const value of newValue) {
                    if (isReference(value)) {
                      seenReference = true;
                      if (checkReference(value))
                        break;
                    } else {
                      if (typeof value === "object" && !!value) {
                        const [id] = this.policies.identify(value);
                        if (id) {
                          someNonReference = value;
                        }
                      }
                    }
                    if (seenReference && someNonReference !== undefined) {
                      __DEV__ && invariant2.warn(97, someNonReference);
                      break;
                    }
                  }
                }
              }
            }
          }
        }
        if (fieldValue !== undefined) {
          allDeleted = false;
        }
      });
      if (needToMerge) {
        this.merge(dataId, changedFields);
        if (allDeleted) {
          if (this instanceof Layer) {
            this.data[dataId] = undefined;
          } else {
            delete this.data[dataId];
          }
          this.group.dirty(dataId, "__exists");
        }
        return true;
      }
    }
    return false;
  }
  delete(dataId, fieldName, args) {
    const storeObject = this.lookup(dataId);
    if (storeObject) {
      const typename = this.getFieldValue(storeObject, "__typename");
      const storeFieldName = fieldName && args ? this.policies.getStoreFieldName({ typename, fieldName, args }) : fieldName;
      return this.modify(dataId, storeFieldName ? {
        [storeFieldName]: delModifier
      } : delModifier, !!args);
    }
    return false;
  }
  evict(options, limit) {
    let evicted = false;
    if (options.id) {
      if (hasOwn.call(this.data, options.id)) {
        evicted = this.delete(options.id, options.fieldName, options.args);
      }
      if (this instanceof Layer && this !== limit) {
        evicted = this.parent.evict(options, limit) || evicted;
      }
      if (options.fieldName || evicted) {
        this.group.dirty(options.id, options.fieldName || "__exists");
      }
    }
    return evicted;
  }
  clear() {
    this.replace(null);
  }
  extract() {
    const obj = this.toObject();
    const extraRootIds = [];
    this.getRootIdSet().forEach((id) => {
      if (!hasOwn.call(this.policies.rootTypenamesById, id)) {
        extraRootIds.push(id);
      }
    });
    if (extraRootIds.length) {
      obj.__META = { extraRootIds: extraRootIds.sort() };
    }
    return obj;
  }
  replace(newData) {
    Object.keys(this.data).forEach((dataId) => {
      if (!(newData && hasOwn.call(newData, dataId))) {
        this.delete(dataId);
      }
    });
    if (newData) {
      const { __META, ...rest } = newData;
      Object.keys(rest).forEach((dataId) => {
        this.merge(dataId, rest[dataId]);
      });
      if (__META) {
        __META.extraRootIds.forEach(this.retain, this);
      }
    }
  }
  rootIds = {};
  retain(rootId) {
    return this.rootIds[rootId] = (this.rootIds[rootId] || 0) + 1;
  }
  release(rootId) {
    if (this.rootIds[rootId] > 0) {
      const count = --this.rootIds[rootId];
      if (!count)
        delete this.rootIds[rootId];
      return count;
    }
    return 0;
  }
  getRootIdSet(ids = new Set) {
    Object.keys(this.rootIds).forEach(ids.add, ids);
    if (this instanceof Layer) {
      this.parent.getRootIdSet(ids);
    } else {
      Object.keys(this.policies.rootTypenamesById).forEach(ids.add, ids);
    }
    return ids;
  }
  gc() {
    const ids = this.getRootIdSet();
    const snapshot = this.toObject();
    ids.forEach((id) => {
      if (hasOwn.call(snapshot, id)) {
        Object.keys(this.findChildRefIds(id)).forEach(ids.add, ids);
        delete snapshot[id];
      }
    });
    const idsToRemove = Object.keys(snapshot);
    if (idsToRemove.length) {
      let root = this;
      while (root instanceof Layer)
        root = root.parent;
      idsToRemove.forEach((id) => root.delete(id));
    }
    return idsToRemove;
  }
  refs = {};
  findChildRefIds(dataId) {
    if (!hasOwn.call(this.refs, dataId)) {
      const found = this.refs[dataId] = {};
      const root = this.data[dataId];
      if (!root)
        return found;
      const workSet = new Set([root]);
      workSet.forEach((obj) => {
        if (isReference(obj)) {
          found[obj.__ref] = true;
        }
        if (isNonNullObject(obj)) {
          Object.keys(obj).forEach((key) => {
            const child = obj[key];
            if (isNonNullObject(child)) {
              workSet.add(child);
            }
          });
        }
      });
    }
    return this.refs[dataId];
  }
  makeCacheKey() {
    return this.group.keyMaker.lookupArray(arguments);
  }
  getFieldValue = (objectOrReference, storeFieldName) => maybeDeepFreeze(isReference(objectOrReference) ? this.get(objectOrReference.__ref, storeFieldName) : objectOrReference && objectOrReference[storeFieldName]);
  canRead = (objOrRef) => {
    return isReference(objOrRef) ? this.has(objOrRef.__ref) : typeof objOrRef === "object";
  };
  toReference = (objOrIdOrRef, mergeIntoStore) => {
    if (typeof objOrIdOrRef === "string") {
      return makeReference(objOrIdOrRef);
    }
    if (isReference(objOrIdOrRef)) {
      return objOrIdOrRef;
    }
    const [id] = this.policies.identify(objOrIdOrRef);
    if (id) {
      const ref = makeReference(id);
      if (mergeIntoStore) {
        this.merge(id, objOrIdOrRef);
      }
      return ref;
    }
  };
  get supportsResultCaching() {
    return this.group.caching;
  }
}

class CacheGroup {
  caching;
  parent;
  d = null;
  keyMaker;
  constructor(caching, parent = null) {
    this.caching = caching;
    this.parent = parent;
    this.resetCaching();
  }
  resetCaching() {
    this.d = this.caching ? dep() : null;
    this.keyMaker = new Trie;
  }
  depend(dataId, storeFieldName) {
    if (this.d) {
      this.d(makeDepKey(dataId, storeFieldName));
      const fieldName = fieldNameFromStoreName(storeFieldName);
      if (fieldName !== storeFieldName) {
        this.d(makeDepKey(dataId, fieldName));
      }
      if (this.parent) {
        this.parent.depend(dataId, storeFieldName);
      }
    }
  }
  dirty(dataId, storeFieldName) {
    if (this.d) {
      this.d.dirty(makeDepKey(dataId, storeFieldName), storeFieldName === "__exists" ? "forget" : "setDirty");
    }
  }
}
function makeDepKey(dataId, storeFieldName) {
  return storeFieldName + "#" + dataId;
}
function maybeDependOnExistenceOfEntity(store, entityId) {
  if (supportsResultCaching(store)) {
    store.group.depend(entityId, "__exists");
  }
}

class Root extends EntityStore {
  constructor({ policies, resultCaching = true, seed }) {
    super(policies, new CacheGroup(resultCaching));
    if (seed)
      this.replace(seed);
  }
  stump = new Stump(this);
  addLayer(layerId, replay) {
    return this.stump.addLayer(layerId, replay);
  }
  removeLayer() {
    return this;
  }
  storageTrie = new Trie;
  getStorage() {
    return this.storageTrie.lookupArray(arguments);
  }
}
EntityStore.Root = Root;

class Layer extends EntityStore {
  id;
  parent;
  replay;
  group;
  constructor(id, parent, replay, group) {
    super(parent.policies, group);
    this.id = id;
    this.parent = parent;
    this.replay = replay;
    this.group = group;
    replay(this);
  }
  addLayer(layerId, replay) {
    return new Layer(layerId, this, replay, this.group);
  }
  removeLayer(layerId) {
    const parent = this.parent.removeLayer(layerId);
    if (layerId === this.id) {
      if (this.group.caching) {
        Object.keys(this.data).forEach((dataId) => {
          const ownStoreObject = this.data[dataId];
          const parentStoreObject = parent["lookup"](dataId);
          if (!parentStoreObject) {
            this.delete(dataId);
          } else if (!ownStoreObject) {
            this.group.dirty(dataId, "__exists");
            Object.keys(parentStoreObject).forEach((storeFieldName) => {
              this.group.dirty(dataId, storeFieldName);
            });
          } else if (ownStoreObject !== parentStoreObject) {
            Object.keys(ownStoreObject).forEach((storeFieldName) => {
              if (!equal(ownStoreObject[storeFieldName], parentStoreObject[storeFieldName])) {
                this.group.dirty(dataId, storeFieldName);
              }
            });
          }
        });
      }
      return parent;
    }
    if (parent === this.parent)
      return this;
    return parent.addLayer(this.id, this.replay);
  }
  toObject() {
    return {
      ...this.parent.toObject(),
      ...this.data
    };
  }
  findChildRefIds(dataId) {
    const fromParent = this.parent.findChildRefIds(dataId);
    return hasOwn.call(this.data, dataId) ? {
      ...fromParent,
      ...super.findChildRefIds(dataId)
    } : fromParent;
  }
  getStorage(...args) {
    let p = this.parent;
    while (p.parent)
      p = p.parent;
    return p.getStorage(...args);
  }
}

class Stump extends Layer {
  constructor(root) {
    super("EntityStore.Stump", root, () => {
    }, new CacheGroup(root.group.caching, root.group));
  }
  removeLayer() {
    return this;
  }
  merge(older, newer) {
    return this.parent.merge(older, newer);
  }
}
function storeObjectReconciler(existingObject, incomingObject, property) {
  const existingValue = existingObject[property];
  const incomingValue = incomingObject[property];
  return equal(existingValue, incomingValue) ? existingValue : incomingValue;
}
function supportsResultCaching(store) {
  return !!(store && store.supportsResultCaching);
}

// node_modules/@apollo/client/masking/utils.js
var disableWarningsSlot = new Slot;
function getFragmentMaskMode(fragment) {
  const directive = fragment.directives?.find(({ name }) => name.value === "unmask");
  if (!directive) {
    return "mask";
  }
  const modeArg = directive.arguments?.find(({ name }) => name.value === "mode");
  if (__DEV__) {
    if (modeArg) {
      if (modeArg.value.kind === Kind.VARIABLE) {
        __DEV__ && invariant2.warn(44);
      } else if (modeArg.value.kind !== Kind.STRING) {
        __DEV__ && invariant2.warn(45);
      } else if (modeArg.value.value !== "migrate") {
        __DEV__ && invariant2.warn(46, modeArg.value.value);
      }
    }
  }
  if (modeArg && "value" in modeArg.value && modeArg.value.value === "migrate") {
    return "migrate";
  }
  return "unmask";
}
// node_modules/@apollo/client/masking/maskDefinition.js
function maskDefinition(data, selectionSet, context2) {
  return disableWarningsSlot.withValue(true, () => {
    const masked = maskSelectionSet(data, selectionSet, context2, false);
    if (Object.isFrozen(data)) {
      maybeDeepFreeze(masked);
    }
    return masked;
  });
}
function getMutableTarget(data, mutableTargets) {
  if (mutableTargets.has(data)) {
    return mutableTargets.get(data);
  }
  const mutableTarget = Array.isArray(data) ? [] : {};
  mutableTargets.set(data, mutableTarget);
  return mutableTarget;
}
function maskSelectionSet(data, selectionSet, context2, migration, path) {
  const { knownChanged } = context2;
  const memo = getMutableTarget(data, context2.mutableTargets);
  if (Array.isArray(data)) {
    for (const [index, item] of Array.from(data.entries())) {
      if (item === null) {
        memo[index] = null;
        continue;
      }
      const masked = maskSelectionSet(item, selectionSet, context2, migration, __DEV__ ? `${path || ""}[${index}]` : undefined);
      if (knownChanged.has(masked)) {
        knownChanged.add(memo);
      }
      memo[index] = masked;
    }
    return knownChanged.has(memo) ? memo : data;
  }
  for (const selection of selectionSet.selections) {
    let value;
    if (migration) {
      knownChanged.add(memo);
    }
    if (selection.kind === Kind.FIELD) {
      const keyName = resultKeyNameFromField(selection);
      const childSelectionSet = selection.selectionSet;
      value = memo[keyName] || data[keyName];
      if (value === undefined) {
        continue;
      }
      if (childSelectionSet && value !== null) {
        const masked = maskSelectionSet(data[keyName], childSelectionSet, context2, migration, __DEV__ ? `${path || ""}.${keyName}` : undefined);
        if (knownChanged.has(masked)) {
          value = masked;
        }
      }
      if (!__DEV__) {
        memo[keyName] = value;
      }
      if (__DEV__) {
        if (migration && keyName !== "__typename" && !Object.getOwnPropertyDescriptor(memo, keyName)?.value) {
          Object.defineProperty(memo, keyName, getAccessorWarningDescriptor(keyName, value, path || "", context2.operationName, context2.operationType));
        } else {
          delete memo[keyName];
          memo[keyName] = value;
        }
      }
    }
    if (selection.kind === Kind.INLINE_FRAGMENT && (!selection.typeCondition || context2.cache.fragmentMatches(selection, data.__typename))) {
      value = maskSelectionSet(data, selection.selectionSet, context2, migration, path);
    }
    if (selection.kind === Kind.FRAGMENT_SPREAD) {
      const fragmentName = selection.name.value;
      const fragment = context2.fragmentMap[fragmentName] || (context2.fragmentMap[fragmentName] = context2.cache.lookupFragment(fragmentName));
      invariant2(fragment, 39, fragmentName);
      const mode = getFragmentMaskMode(selection);
      if (mode !== "mask") {
        value = maskSelectionSet(data, fragment.selectionSet, context2, mode === "migrate", path);
      }
    }
    if (knownChanged.has(value)) {
      knownChanged.add(memo);
    }
  }
  if ("__typename" in data && !("__typename" in memo)) {
    memo.__typename = data.__typename;
  }
  if (Object.keys(memo).length !== Object.keys(data).length) {
    knownChanged.add(memo);
  }
  return knownChanged.has(memo) ? memo : data;
}
function getAccessorWarningDescriptor(fieldName, value, path, operationName, operationType) {
  let getValue = () => {
    if (disableWarningsSlot.getValue()) {
      return value;
    }
    __DEV__ && invariant2.warn(40, operationName ? `${operationType} '${operationName}'` : `anonymous ${operationType}`, `${path}.${fieldName}`.replace(/^\./, ""));
    getValue = () => value;
    return value;
  };
  return {
    get() {
      return getValue();
    },
    set(newValue) {
      getValue = () => newValue;
    },
    enumerable: true,
    configurable: true
  };
}

// node_modules/@apollo/client/masking/maskFragment.js
function maskFragment(data, document2, cache, fragmentName) {
  const fragments = document2.definitions.filter((node) => node.kind === Kind.FRAGMENT_DEFINITION);
  if (typeof fragmentName === "undefined") {
    invariant2(fragments.length === 1, 41, fragments.length);
    fragmentName = fragments[0].name.value;
  }
  const fragment = fragments.find((fragment2) => fragment2.name.value === fragmentName);
  invariant2(!!fragment, 42, fragmentName);
  if (data == null) {
    return data;
  }
  if (lib_default(data, {})) {
    return data;
  }
  return maskDefinition(data, fragment.selectionSet, {
    operationType: "fragment",
    operationName: fragment.name.value,
    fragmentMap: createFragmentMap(getFragmentDefinitions(document2)),
    cache,
    mutableTargets: new WeakMap,
    knownChanged: new WeakSet
  });
}
// node_modules/@apollo/client/masking/maskOperation.js
function maskOperation(data, document2, cache) {
  const definition = getOperationDefinition(document2);
  invariant2(definition, 43);
  if (data == null) {
    return data;
  }
  return maskDefinition(data, definition.selectionSet, {
    operationType: definition.operation,
    operationName: definition.name?.value,
    fragmentMap: createFragmentMap(getFragmentDefinitions(document2)),
    cache,
    mutableTargets: new WeakMap,
    knownChanged: new WeakSet
  });
}
// node_modules/@apollo/client/cache/inmemory/key-extractor.js
var specifierInfoCache = {};
function lookupSpecifierInfo(spec) {
  const cacheKey = JSON.stringify(spec);
  return specifierInfoCache[cacheKey] || (specifierInfoCache[cacheKey] = {});
}
function keyFieldsFnFromSpecifier(specifier) {
  const info = lookupSpecifierInfo(specifier);
  return info.keyFieldsFn || (info.keyFieldsFn = (object, context2) => {
    const extract = (from2, key) => context2.readField(key, from2);
    const keyObject = context2.keyObject = collectSpecifierPaths(specifier, (schemaKeyPath) => {
      let extracted = extractKeyPath(context2.storeObject, schemaKeyPath, extract);
      if (extracted === undefined && object !== context2.storeObject && hasOwn.call(object, schemaKeyPath[0])) {
        extracted = extractKeyPath(object, schemaKeyPath, extractKey);
      }
      invariant2(extracted !== undefined, 98, schemaKeyPath.join("."), object);
      return extracted;
    });
    return `${context2.typename}:${JSON.stringify(keyObject)}`;
  });
}
function keyArgsFnFromSpecifier(specifier) {
  const info = lookupSpecifierInfo(specifier);
  return info.keyArgsFn || (info.keyArgsFn = (args, { field, variables, fieldName }) => {
    const collected = collectSpecifierPaths(specifier, (keyPath) => {
      const firstKey = keyPath[0];
      const firstChar = firstKey.charAt(0);
      if (firstChar === "@") {
        if (field && isNonEmptyArray(field.directives)) {
          const directiveName = firstKey.slice(1);
          const d = field.directives.find((d2) => d2.name.value === directiveName);
          const directiveArgs = d && argumentsObjectFromField(d, variables);
          return directiveArgs && extractKeyPath(directiveArgs, keyPath.slice(1));
        }
        return;
      }
      if (firstChar === "$") {
        const variableName = firstKey.slice(1);
        if (variables && hasOwn.call(variables, variableName)) {
          const varKeyPath = keyPath.slice(0);
          varKeyPath[0] = variableName;
          return extractKeyPath(variables, varKeyPath);
        }
        return;
      }
      if (args) {
        return extractKeyPath(args, keyPath);
      }
    });
    const suffix = JSON.stringify(collected);
    if (args || suffix !== "{}") {
      fieldName += ":" + suffix;
    }
    return fieldName;
  });
}
function collectSpecifierPaths(specifier, extractor) {
  const merger = new DeepMerger;
  return getSpecifierPaths(specifier).reduce((collected, path) => {
    let toMerge = extractor(path);
    if (toMerge !== undefined) {
      for (let i = path.length - 1;i >= 0; --i) {
        toMerge = { [path[i]]: toMerge };
      }
      collected = merger.merge(collected, toMerge);
    }
    return collected;
  }, {});
}
function getSpecifierPaths(spec) {
  const info = lookupSpecifierInfo(spec);
  if (!info.paths) {
    const paths = info.paths = [];
    const currentPath = [];
    spec.forEach((s, i) => {
      if (isArray(s)) {
        getSpecifierPaths(s).forEach((p) => paths.push(currentPath.concat(p)));
        currentPath.length = 0;
      } else {
        currentPath.push(s);
        if (!isArray(spec[i + 1])) {
          paths.push(currentPath.slice(0));
          currentPath.length = 0;
        }
      }
    });
  }
  return info.paths;
}
function extractKey(object, key) {
  return object[key];
}
function extractKeyPath(object, path, extract) {
  extract = extract || extractKey;
  return normalize(path.reduce(function reducer(obj, key) {
    return isArray(obj) ? obj.map((child) => reducer(child, key)) : obj && extract(obj, key);
  }, object));
}
function normalize(value) {
  if (isNonNullObject(value)) {
    if (isArray(value)) {
      return value.map(normalize);
    }
    return collectSpecifierPaths(Object.keys(value).sort(), (path) => extractKeyPath(value, path));
  }
  return value;
}

// node_modules/@apollo/client/cache/inmemory/reactiveVars.js
var cacheSlot = new Slot;
var cacheInfoMap = new WeakMap;
function getCacheInfo(cache) {
  let info = cacheInfoMap.get(cache);
  if (!info) {
    cacheInfoMap.set(cache, info = {
      vars: new Set,
      dep: dep()
    });
  }
  return info;
}
function forgetCache(cache) {
  getCacheInfo(cache).vars.forEach((rv) => rv.forgetCache(cache));
}
function recallCache(cache) {
  getCacheInfo(cache).vars.forEach((rv) => rv.attachCache(cache));
}
function makeVar(value) {
  const caches2 = new Set;
  const listeners = new Set;
  const rv = function(newValue) {
    if (arguments.length > 0) {
      if (value !== newValue) {
        value = newValue;
        caches2.forEach((cache) => {
          getCacheInfo(cache).dep.dirty(rv);
          broadcast(cache);
        });
        const oldListeners = Array.from(listeners);
        listeners.clear();
        oldListeners.forEach((listener) => listener(value));
      }
    } else {
      const cache = cacheSlot.getValue();
      if (cache) {
        attach(cache);
        getCacheInfo(cache).dep(rv);
      }
    }
    return value;
  };
  rv.onNextChange = (listener) => {
    listeners.add(listener);
    return () => {
      listeners.delete(listener);
    };
  };
  const attach = rv.attachCache = (cache) => {
    caches2.add(cache);
    getCacheInfo(cache).vars.add(rv);
    return rv;
  };
  rv.forgetCache = (cache) => caches2.delete(cache);
  return rv;
}
function broadcast(cache) {
  if (cache.broadcastWatches) {
    cache.broadcastWatches();
  }
}

// node_modules/@apollo/client/cache/inmemory/policies.js
function argsFromFieldSpecifier(spec) {
  return spec.args !== undefined ? spec.args : spec.field ? argumentsObjectFromField(spec.field, spec.variables) : null;
}
var nullKeyFieldsFn = () => {
  return;
};
var simpleKeyArgsFn = (_args, context2) => context2.fieldName;
var mergeTrueFn = (existing, incoming, { mergeObjects }) => mergeObjects(existing, incoming);
var mergeFalseFn = (_, incoming) => incoming;

class Policies {
  config;
  typePolicies = {};
  toBeAdded = {};
  supertypeMap = new Map;
  fuzzySubtypes = new Map;
  cache;
  rootIdsByTypename = {};
  rootTypenamesById = {};
  usingPossibleTypes = false;
  constructor(config2) {
    this.config = config2;
    this.config = {
      dataIdFromObject: defaultDataIdFromObject,
      ...config2
    };
    this.cache = this.config.cache;
    this.setRootTypename("Query");
    this.setRootTypename("Mutation");
    this.setRootTypename("Subscription");
    if (config2.possibleTypes) {
      this.addPossibleTypes(config2.possibleTypes);
    }
    if (config2.typePolicies) {
      this.addTypePolicies(config2.typePolicies);
    }
  }
  identify(object, partialContext) {
    const policies = this;
    const typename = partialContext && (partialContext.typename || partialContext.storeObject?.__typename) || object.__typename;
    if (typename === this.rootTypenamesById.ROOT_QUERY) {
      return ["ROOT_QUERY"];
    }
    const storeObject = partialContext && partialContext.storeObject || object;
    const context2 = {
      ...partialContext,
      typename,
      storeObject,
      readField: partialContext && partialContext.readField || ((...args) => {
        const options = normalizeReadFieldOptions(args, storeObject);
        return policies.readField(options, {
          store: policies.cache["data"],
          variables: options.variables
        });
      })
    };
    let id;
    const policy = typename && this.getTypePolicy(typename);
    let keyFn = policy && policy.keyFn || this.config.dataIdFromObject;
    disableWarningsSlot.withValue(true, () => {
      while (keyFn) {
        const specifierOrId = keyFn({ ...object, ...storeObject }, context2);
        if (isArray(specifierOrId)) {
          keyFn = keyFieldsFnFromSpecifier(specifierOrId);
        } else {
          id = specifierOrId;
          break;
        }
      }
    });
    id = id ? String(id) : undefined;
    return context2.keyObject ? [id, context2.keyObject] : [id];
  }
  addTypePolicies(typePolicies) {
    Object.keys(typePolicies).forEach((typename) => {
      const { queryType, mutationType, subscriptionType, ...incoming } = typePolicies[typename];
      if (queryType)
        this.setRootTypename("Query", typename);
      if (mutationType)
        this.setRootTypename("Mutation", typename);
      if (subscriptionType)
        this.setRootTypename("Subscription", typename);
      if (hasOwn.call(this.toBeAdded, typename)) {
        this.toBeAdded[typename].push(incoming);
      } else {
        this.toBeAdded[typename] = [incoming];
      }
    });
  }
  updateTypePolicy(typename, incoming, existingFieldPolicies) {
    const existing = this.getTypePolicy(typename);
    const { keyFields, fields } = incoming;
    function setMerge(existing2, merge) {
      existing2.merge = typeof merge === "function" ? merge : merge === true ? mergeTrueFn : merge === false ? mergeFalseFn : existing2.merge;
    }
    setMerge(existing, incoming.merge);
    existing.keyFn = keyFields === false ? nullKeyFieldsFn : isArray(keyFields) ? keyFieldsFnFromSpecifier(keyFields) : typeof keyFields === "function" ? keyFields : existing.keyFn;
    if (fields) {
      Object.keys(fields).forEach((fieldName) => {
        let existing2 = existingFieldPolicies[fieldName];
        if (!existing2 || existing2?.typename !== typename) {
          existing2 = existingFieldPolicies[fieldName] = { typename };
        }
        const incoming2 = fields[fieldName];
        if (typeof incoming2 === "function") {
          existing2.read = incoming2;
        } else {
          const { keyArgs, read, merge } = incoming2;
          existing2.keyFn = keyArgs === false ? simpleKeyArgsFn : isArray(keyArgs) ? keyArgsFnFromSpecifier(keyArgs) : typeof keyArgs === "function" ? keyArgs : existing2.keyFn;
          if (typeof read === "function") {
            existing2.read = read;
          }
          setMerge(existing2, merge);
        }
        if (existing2.read && existing2.merge) {
          existing2.keyFn = existing2.keyFn || simpleKeyArgsFn;
        }
      });
    }
  }
  setRootTypename(which, typename = which) {
    const rootId = "ROOT_" + which.toUpperCase();
    const old = this.rootTypenamesById[rootId];
    if (typename !== old) {
      invariant2(!old || old === which, 99, which);
      if (old)
        delete this.rootIdsByTypename[old];
      this.rootIdsByTypename[typename] = rootId;
      this.rootTypenamesById[rootId] = typename;
    }
  }
  addPossibleTypes(possibleTypes) {
    this.usingPossibleTypes = true;
    Object.keys(possibleTypes).forEach((supertype) => {
      this.getSupertypeSet(supertype, true);
      possibleTypes[supertype].forEach((subtype) => {
        this.getSupertypeSet(subtype, true).add(supertype);
        const match = subtype.match(TypeOrFieldNameRegExp);
        if (!match || match[0] !== subtype) {
          this.fuzzySubtypes.set(subtype, new RegExp(subtype));
        }
      });
    });
  }
  getTypePolicy(typename) {
    if (!hasOwn.call(this.typePolicies, typename)) {
      const policy = this.typePolicies[typename] = {};
      policy.fields = {};
      let supertypes = this.supertypeMap.get(typename);
      if (!supertypes && this.fuzzySubtypes.size) {
        supertypes = this.getSupertypeSet(typename, true);
        this.fuzzySubtypes.forEach((regExp, fuzzy) => {
          if (regExp.test(typename)) {
            const fuzzySupertypes = this.supertypeMap.get(fuzzy);
            if (fuzzySupertypes) {
              fuzzySupertypes.forEach((supertype) => supertypes.add(supertype));
            }
          }
        });
      }
      if (supertypes && supertypes.size) {
        supertypes.forEach((supertype) => {
          const { fields, ...rest } = this.getTypePolicy(supertype);
          Object.assign(policy, rest);
          Object.assign(policy.fields, fields);
        });
      }
    }
    const inbox = this.toBeAdded[typename];
    if (inbox && inbox.length) {
      inbox.splice(0).forEach((policy) => {
        this.updateTypePolicy(typename, policy, this.typePolicies[typename].fields);
      });
    }
    return this.typePolicies[typename];
  }
  getFieldPolicy(typename, fieldName) {
    if (typename) {
      return this.getTypePolicy(typename).fields[fieldName];
    }
  }
  getSupertypeSet(subtype, createIfMissing) {
    let supertypeSet = this.supertypeMap.get(subtype);
    if (!supertypeSet && createIfMissing) {
      this.supertypeMap.set(subtype, supertypeSet = new Set);
    }
    return supertypeSet;
  }
  fragmentMatches(fragment, typename, result, variables) {
    if (!fragment.typeCondition)
      return true;
    if (!typename)
      return false;
    const supertype = fragment.typeCondition.name.value;
    if (typename === supertype)
      return true;
    if (this.usingPossibleTypes && this.supertypeMap.has(supertype)) {
      const typenameSupertypeSet = this.getSupertypeSet(typename, true);
      const workQueue = [typenameSupertypeSet];
      const maybeEnqueue = (subtype) => {
        const supertypeSet = this.getSupertypeSet(subtype, false);
        if (supertypeSet && supertypeSet.size && workQueue.indexOf(supertypeSet) < 0) {
          workQueue.push(supertypeSet);
        }
      };
      let needToCheckFuzzySubtypes = !!(result && this.fuzzySubtypes.size);
      let checkingFuzzySubtypes = false;
      for (let i = 0;i < workQueue.length; ++i) {
        const supertypeSet = workQueue[i];
        if (supertypeSet.has(supertype)) {
          if (!typenameSupertypeSet.has(supertype)) {
            if (checkingFuzzySubtypes) {
              __DEV__ && invariant2.warn(100, typename, supertype);
            }
            typenameSupertypeSet.add(supertype);
          }
          return true;
        }
        supertypeSet.forEach(maybeEnqueue);
        if (needToCheckFuzzySubtypes && i === workQueue.length - 1 && selectionSetMatchesResult(fragment.selectionSet, result, variables)) {
          needToCheckFuzzySubtypes = false;
          checkingFuzzySubtypes = true;
          this.fuzzySubtypes.forEach((regExp, fuzzyString) => {
            const match = typename.match(regExp);
            if (match && match[0] === typename) {
              maybeEnqueue(fuzzyString);
            }
          });
        }
      }
    }
    return false;
  }
  hasKeyArgs(typename, fieldName) {
    const policy = this.getFieldPolicy(typename, fieldName);
    return !!(policy && policy.keyFn);
  }
  getStoreFieldName(fieldSpec) {
    const { typename, fieldName } = fieldSpec;
    const policy = this.getFieldPolicy(typename, fieldName);
    let storeFieldName;
    let keyFn = policy && policy.keyFn;
    if (keyFn && typename) {
      const context2 = {
        typename,
        fieldName,
        field: fieldSpec.field || null,
        variables: fieldSpec.variables
      };
      const args = argsFromFieldSpecifier(fieldSpec);
      while (keyFn) {
        const specifierOrString = keyFn(args, context2);
        if (isArray(specifierOrString)) {
          keyFn = keyArgsFnFromSpecifier(specifierOrString);
        } else {
          storeFieldName = specifierOrString || fieldName;
          break;
        }
      }
    }
    if (storeFieldName === undefined) {
      storeFieldName = fieldSpec.field ? storeKeyNameFromField(fieldSpec.field, fieldSpec.variables) : getStoreKeyName(fieldName, argsFromFieldSpecifier(fieldSpec));
    }
    if (storeFieldName === false) {
      return fieldName;
    }
    return fieldName === fieldNameFromStoreName(storeFieldName) ? storeFieldName : fieldName + ":" + storeFieldName;
  }
  readField(options, context2) {
    const objectOrReference = options.from;
    if (!objectOrReference)
      return;
    const nameOrField = options.field || options.fieldName;
    if (!nameOrField)
      return;
    if (options.typename === undefined) {
      const typename = context2.store.getFieldValue(objectOrReference, "__typename");
      if (typename)
        options.typename = typename;
    }
    const storeFieldName = this.getStoreFieldName(options);
    const fieldName = fieldNameFromStoreName(storeFieldName);
    const existing = context2.store.getFieldValue(objectOrReference, storeFieldName);
    const policy = this.getFieldPolicy(options.typename, fieldName);
    const read = policy && policy.read;
    if (read) {
      const readOptions = makeFieldFunctionOptions(this, objectOrReference, options, context2, context2.store.getStorage(isReference(objectOrReference) ? objectOrReference.__ref : objectOrReference, storeFieldName));
      return cacheSlot.withValue(this.cache, read, [
        existing,
        readOptions
      ]);
    }
    return existing;
  }
  getReadFunction(typename, fieldName) {
    const policy = this.getFieldPolicy(typename, fieldName);
    return policy && policy.read;
  }
  getMergeFunction(parentTypename, fieldName, childTypename) {
    let policy = this.getFieldPolicy(parentTypename, fieldName);
    let merge = policy && policy.merge;
    if (!merge && childTypename) {
      policy = this.getTypePolicy(childTypename);
      merge = policy && policy.merge;
    }
    return merge;
  }
  runMergeFunction(existing, incoming, { field, typename, merge }, context2, storage) {
    if (merge === mergeTrueFn) {
      return makeMergeObjectsFunction(context2.store)(existing, incoming);
    }
    if (merge === mergeFalseFn) {
      return incoming;
    }
    if (context2.overwrite) {
      existing = undefined;
    }
    return merge(existing, incoming, makeFieldFunctionOptions(this, undefined, {
      typename,
      fieldName: field.name.value,
      field,
      variables: context2.variables
    }, context2, storage || {}));
  }
}
function makeFieldFunctionOptions(policies, objectOrReference, fieldSpec, context2, storage) {
  const storeFieldName = policies.getStoreFieldName(fieldSpec);
  const fieldName = fieldNameFromStoreName(storeFieldName);
  const variables = fieldSpec.variables || context2.variables;
  const { toReference, canRead } = context2.store;
  return {
    args: argsFromFieldSpecifier(fieldSpec),
    field: fieldSpec.field || null,
    fieldName,
    storeFieldName,
    variables,
    isReference,
    toReference,
    storage,
    cache: policies.cache,
    canRead,
    readField(...args) {
      return policies.readField(normalizeReadFieldOptions(args, objectOrReference, variables), context2);
    },
    mergeObjects: makeMergeObjectsFunction(context2.store)
  };
}
function normalizeReadFieldOptions(readFieldArgs, objectOrReference, variables) {
  const { 0: fieldNameOrOptions, 1: from2, length: argc } = readFieldArgs;
  let options;
  if (typeof fieldNameOrOptions === "string") {
    options = {
      fieldName: fieldNameOrOptions,
      from: argc > 1 ? from2 : objectOrReference
    };
  } else {
    options = { ...fieldNameOrOptions };
    if (!hasOwn.call(options, "from")) {
      options.from = objectOrReference;
    }
  }
  if (__DEV__ && options.from === undefined) {
    __DEV__ && invariant2.warn(101, stringifyForDisplay(Array.from(readFieldArgs)));
  }
  if (options.variables === undefined) {
    options.variables = variables;
  }
  return options;
}
function makeMergeObjectsFunction(store) {
  return function mergeObjects(existing, incoming) {
    if (isArray(existing) || isArray(incoming)) {
      throw newInvariantError(102);
    }
    if (isNonNullObject(existing) && isNonNullObject(incoming)) {
      const eType = store.getFieldValue(existing, "__typename");
      const iType = store.getFieldValue(incoming, "__typename");
      const typesDiffer = eType && iType && eType !== iType;
      if (typesDiffer) {
        return incoming;
      }
      if (isReference(existing) && storeValueIsStoreObject(incoming)) {
        store.merge(existing.__ref, incoming);
        return existing;
      }
      if (storeValueIsStoreObject(existing) && isReference(incoming)) {
        store.merge(existing, incoming.__ref);
        return incoming;
      }
      if (storeValueIsStoreObject(existing) && storeValueIsStoreObject(incoming)) {
        return { ...existing, ...incoming };
      }
    }
    return incoming;
  };
}

// node_modules/@apollo/client/cache/inmemory/readFromStore.js
function execSelectionSetKeyArgs(options) {
  return [options.selectionSet, options.objectOrReference, options.context];
}

class StoreReader {
  executeSelectionSet;
  executeSubSelectedArray;
  config;
  knownResults = new WeakMap;
  constructor(config2) {
    this.config = config2;
    this.executeSelectionSet = wrap2((options) => {
      const peekArgs = execSelectionSetKeyArgs(options);
      const other = this.executeSelectionSet.peek(...peekArgs);
      if (other) {
        return other;
      }
      maybeDependOnExistenceOfEntity(options.context.store, options.enclosingRef.__ref);
      return this.execSelectionSetImpl(options);
    }, {
      max: cacheSizes["inMemoryCache.executeSelectionSet"] || 50000,
      keyArgs: execSelectionSetKeyArgs,
      makeCacheKey(selectionSet, parent, context2) {
        if (supportsResultCaching(context2.store)) {
          return context2.store.makeCacheKey(selectionSet, isReference(parent) ? parent.__ref : parent, context2.varString);
        }
      }
    });
    this.executeSubSelectedArray = wrap2((options) => {
      maybeDependOnExistenceOfEntity(options.context.store, options.enclosingRef.__ref);
      return this.execSubSelectedArrayImpl(options);
    }, {
      max: cacheSizes["inMemoryCache.executeSubSelectedArray"] || 1e4,
      makeCacheKey({ field, array, context: context2 }) {
        if (supportsResultCaching(context2.store)) {
          return context2.store.makeCacheKey(field, array, context2.varString);
        }
      }
    });
  }
  diffQueryAgainstStore({ store, query, rootId = "ROOT_QUERY", variables, returnPartialData = true }) {
    const policies = this.config.cache.policies;
    variables = {
      ...getDefaultValues(getQueryDefinition(query)),
      ...variables
    };
    const rootRef = makeReference(rootId);
    const execResult = this.executeSelectionSet({
      selectionSet: getMainDefinition(query).selectionSet,
      objectOrReference: rootRef,
      enclosingRef: rootRef,
      context: {
        store,
        query,
        policies,
        variables,
        varString: canonicalStringify(variables),
        ...extractFragmentContext(query, this.config.fragments)
      }
    });
    let missing;
    if (execResult.missing) {
      missing = new MissingFieldError(firstMissing(execResult.missing), execResult.missing, query, variables);
    }
    const complete = !missing;
    const { result } = execResult;
    return {
      result: complete || returnPartialData ? Object.keys(result).length === 0 ? null : result : null,
      complete,
      missing
    };
  }
  isFresh(result, parent, selectionSet, context2) {
    if (supportsResultCaching(context2.store) && this.knownResults.get(result) === selectionSet) {
      const latest = this.executeSelectionSet.peek(selectionSet, parent, context2);
      if (latest && result === latest.result) {
        return true;
      }
    }
    return false;
  }
  execSelectionSetImpl({ selectionSet, objectOrReference, enclosingRef, context: context2 }) {
    if (isReference(objectOrReference) && !context2.policies.rootTypenamesById[objectOrReference.__ref] && !context2.store.has(objectOrReference.__ref)) {
      return {
        result: {},
        missing: `Dangling reference to missing ${objectOrReference.__ref} object`
      };
    }
    const { variables, policies, store } = context2;
    const typename = store.getFieldValue(objectOrReference, "__typename");
    const objectsToMerge = [];
    let missing;
    const missingMerger = new DeepMerger;
    if (typeof typename === "string" && !policies.rootIdsByTypename[typename]) {
      objectsToMerge.push({ __typename: typename });
    }
    function handleMissing(result2, resultName) {
      if (result2.missing) {
        missing = missingMerger.merge(missing, {
          [resultName]: result2.missing
        });
      }
      return result2.result;
    }
    const workSet = new Set(selectionSet.selections);
    workSet.forEach((selection) => {
      if (!shouldInclude(selection, variables))
        return;
      if (isField(selection)) {
        let fieldValue = policies.readField({
          fieldName: selection.name.value,
          field: selection,
          variables: context2.variables,
          from: objectOrReference
        }, context2);
        const resultName = resultKeyNameFromField(selection);
        if (fieldValue === undefined) {
          if (!addTypenameToDocument.added(selection)) {
            missing = missingMerger.merge(missing, {
              [resultName]: `Can't find field '${selection.name.value}' on ${isReference(objectOrReference) ? objectOrReference.__ref + " object" : "object " + JSON.stringify(objectOrReference, null, 2)}`
            });
          }
        } else if (isArray(fieldValue)) {
          if (fieldValue.length > 0) {
            fieldValue = handleMissing(this.executeSubSelectedArray({
              field: selection,
              array: fieldValue,
              enclosingRef,
              context: context2
            }), resultName);
          }
        } else if (!selection.selectionSet) {
        } else if (fieldValue != null) {
          fieldValue = handleMissing(this.executeSelectionSet({
            selectionSet: selection.selectionSet,
            objectOrReference: fieldValue,
            enclosingRef: isReference(fieldValue) ? fieldValue : enclosingRef,
            context: context2
          }), resultName);
        }
        if (fieldValue !== undefined) {
          objectsToMerge.push({ [resultName]: fieldValue });
        }
      } else {
        const fragment = getFragmentFromSelection(selection, context2.lookupFragment);
        if (!fragment && selection.kind === Kind.FRAGMENT_SPREAD) {
          throw newInvariantError(103, selection.name.value);
        }
        if (fragment && policies.fragmentMatches(fragment, typename)) {
          fragment.selectionSet.selections.forEach(workSet.add, workSet);
        }
      }
    });
    const result = mergeDeepArray(objectsToMerge);
    const finalResult = { result, missing };
    const frozen = maybeDeepFreeze(finalResult);
    if (frozen.result) {
      this.knownResults.set(frozen.result, selectionSet);
    }
    return frozen;
  }
  execSubSelectedArrayImpl({ field, array, enclosingRef, context: context2 }) {
    let missing;
    let missingMerger = new DeepMerger;
    function handleMissing(childResult, i) {
      if (childResult.missing) {
        missing = missingMerger.merge(missing, { [i]: childResult.missing });
      }
      return childResult.result;
    }
    if (field.selectionSet) {
      array = array.filter(context2.store.canRead);
    }
    array = array.map((item, i) => {
      if (item === null) {
        return null;
      }
      if (isArray(item)) {
        return handleMissing(this.executeSubSelectedArray({
          field,
          array: item,
          enclosingRef,
          context: context2
        }), i);
      }
      if (field.selectionSet) {
        return handleMissing(this.executeSelectionSet({
          selectionSet: field.selectionSet,
          objectOrReference: item,
          enclosingRef: isReference(item) ? item : enclosingRef,
          context: context2
        }), i);
      }
      if (__DEV__) {
        assertSelectionSetForIdValue(context2.store, field, item);
      }
      return item;
    });
    return {
      result: array,
      missing
    };
  }
}
function firstMissing(tree) {
  try {
    JSON.stringify(tree, (_, value) => {
      if (typeof value === "string")
        throw value;
      return value;
    });
  } catch (result) {
    return result;
  }
}
function assertSelectionSetForIdValue(store, field, fieldValue) {
  if (!field.selectionSet) {
    const workSet = new Set([fieldValue]);
    workSet.forEach((value) => {
      if (isNonNullObject(value)) {
        invariant2(!isReference(value), 104, getTypenameFromStoreObject(store, value), field.name.value);
        Object.values(value).forEach(workSet.add, workSet);
      }
    });
  }
}

// node_modules/@apollo/client/cache/inmemory/writeToStore.js
function getContextFlavor(context2, clientOnly, deferred) {
  const key = `${clientOnly}${deferred}`;
  let flavored = context2.flavors.get(key);
  if (!flavored) {
    context2.flavors.set(key, flavored = context2.clientOnly === clientOnly && context2.deferred === deferred ? context2 : {
      ...context2,
      clientOnly,
      deferred
    });
  }
  return flavored;
}

class StoreWriter {
  cache;
  reader;
  fragments;
  constructor(cache, reader, fragments) {
    this.cache = cache;
    this.reader = reader;
    this.fragments = fragments;
  }
  writeToStore(store, { query, result, dataId, variables, overwrite }) {
    const operationDefinition = getOperationDefinition(query);
    const merger = makeProcessedFieldsMerger();
    variables = {
      ...getDefaultValues(operationDefinition),
      ...variables
    };
    const context2 = {
      store,
      written: {},
      merge(existing, incoming) {
        return merger.merge(existing, incoming);
      },
      variables,
      varString: canonicalStringify(variables),
      ...extractFragmentContext(query, this.fragments),
      overwrite: !!overwrite,
      incomingById: new Map,
      clientOnly: false,
      deferred: false,
      flavors: new Map
    };
    const ref = this.processSelectionSet({
      result: result || {},
      dataId,
      selectionSet: operationDefinition.selectionSet,
      mergeTree: { map: new Map },
      context: context2
    });
    if (!isReference(ref)) {
      throw newInvariantError(105, result);
    }
    context2.incomingById.forEach(({ storeObject, mergeTree, fieldNodeSet }, dataId2) => {
      const entityRef = makeReference(dataId2);
      if (mergeTree && mergeTree.map.size) {
        const applied = this.applyMerges(mergeTree, entityRef, storeObject, context2);
        if (isReference(applied)) {
          return;
        }
        storeObject = applied;
      }
      if (__DEV__ && !context2.overwrite) {
        const fieldsWithSelectionSets = {};
        fieldNodeSet.forEach((field) => {
          if (field.selectionSet) {
            fieldsWithSelectionSets[field.name.value] = true;
          }
        });
        const hasSelectionSet = (storeFieldName) => fieldsWithSelectionSets[fieldNameFromStoreName(storeFieldName)] === true;
        const hasMergeFunction = (storeFieldName) => {
          const childTree = mergeTree && mergeTree.map.get(storeFieldName);
          return Boolean(childTree && childTree.info && childTree.info.merge);
        };
        Object.keys(storeObject).forEach((storeFieldName) => {
          if (hasSelectionSet(storeFieldName) && !hasMergeFunction(storeFieldName)) {
            warnAboutDataLoss(entityRef, storeObject, storeFieldName, context2.store);
          }
        });
      }
      store.merge(dataId2, storeObject);
    });
    store.retain(ref.__ref);
    return ref;
  }
  processSelectionSet({
    dataId,
    result,
    selectionSet,
    context: context2,
    mergeTree
  }) {
    const { policies } = this.cache;
    let incoming = {};
    const typename = dataId && policies.rootTypenamesById[dataId] || getTypenameFromResult(result, selectionSet, context2.fragmentMap) || dataId && context2.store.get(dataId, "__typename");
    if (typeof typename === "string") {
      incoming.__typename = typename;
    }
    const readField = (...args) => {
      const options = normalizeReadFieldOptions(args, incoming, context2.variables);
      if (isReference(options.from)) {
        const info = context2.incomingById.get(options.from.__ref);
        if (info) {
          const result2 = policies.readField({
            ...options,
            from: info.storeObject
          }, context2);
          if (result2 !== undefined) {
            return result2;
          }
        }
      }
      return policies.readField(options, context2);
    };
    const fieldNodeSet = new Set;
    this.flattenFields(selectionSet, result, context2, typename).forEach((context3, field) => {
      const resultFieldKey = resultKeyNameFromField(field);
      const value = result[resultFieldKey];
      fieldNodeSet.add(field);
      if (value !== undefined) {
        const storeFieldName = policies.getStoreFieldName({
          typename,
          fieldName: field.name.value,
          field,
          variables: context3.variables
        });
        const childTree = getChildMergeTree(mergeTree, storeFieldName);
        let incomingValue = this.processFieldValue(value, field, field.selectionSet ? getContextFlavor(context3, false, false) : context3, childTree);
        let childTypename;
        if (field.selectionSet && (isReference(incomingValue) || storeValueIsStoreObject(incomingValue))) {
          childTypename = readField("__typename", incomingValue);
        }
        const merge = policies.getMergeFunction(typename, field.name.value, childTypename);
        if (merge) {
          childTree.info = {
            field,
            typename,
            merge
          };
        } else {
          maybeRecycleChildMergeTree(mergeTree, storeFieldName);
        }
        incoming = context3.merge(incoming, {
          [storeFieldName]: incomingValue
        });
      } else if (__DEV__ && !context3.clientOnly && !context3.deferred && !addTypenameToDocument.added(field) && !policies.getReadFunction(typename, field.name.value)) {
        invariant2.error(106, resultKeyNameFromField(field), result);
      }
    });
    try {
      const [id, keyObject] = policies.identify(result, {
        typename,
        selectionSet,
        fragmentMap: context2.fragmentMap,
        storeObject: incoming,
        readField
      });
      dataId = dataId || id;
      if (keyObject) {
        incoming = context2.merge(incoming, keyObject);
      }
    } catch (e) {
      if (!dataId)
        throw e;
    }
    if (typeof dataId === "string") {
      const dataRef = makeReference(dataId);
      const sets = context2.written[dataId] || (context2.written[dataId] = []);
      if (sets.indexOf(selectionSet) >= 0)
        return dataRef;
      sets.push(selectionSet);
      if (this.reader && this.reader.isFresh(result, dataRef, selectionSet, context2)) {
        return dataRef;
      }
      const previous = context2.incomingById.get(dataId);
      if (previous) {
        previous.storeObject = context2.merge(previous.storeObject, incoming);
        previous.mergeTree = mergeMergeTrees(previous.mergeTree, mergeTree);
        fieldNodeSet.forEach((field) => previous.fieldNodeSet.add(field));
      } else {
        context2.incomingById.set(dataId, {
          storeObject: incoming,
          mergeTree: mergeTreeIsEmpty(mergeTree) ? undefined : mergeTree,
          fieldNodeSet
        });
      }
      return dataRef;
    }
    return incoming;
  }
  processFieldValue(value, field, context2, mergeTree) {
    if (!field.selectionSet || value === null) {
      return __DEV__ ? cloneDeep(value) : value;
    }
    if (isArray(value)) {
      return value.map((item, i) => {
        const value2 = this.processFieldValue(item, field, context2, getChildMergeTree(mergeTree, i));
        maybeRecycleChildMergeTree(mergeTree, i);
        return value2;
      });
    }
    return this.processSelectionSet({
      result: value,
      selectionSet: field.selectionSet,
      context: context2,
      mergeTree
    });
  }
  flattenFields(selectionSet, result, context2, typename = getTypenameFromResult(result, selectionSet, context2.fragmentMap)) {
    const fieldMap = new Map;
    const { policies } = this.cache;
    const limitingTrie = new Trie(false);
    (function flatten(selectionSet2, inheritedContext) {
      const visitedNode = limitingTrie.lookup(selectionSet2, inheritedContext.clientOnly, inheritedContext.deferred);
      if (visitedNode.visited)
        return;
      visitedNode.visited = true;
      selectionSet2.selections.forEach((selection) => {
        if (!shouldInclude(selection, context2.variables))
          return;
        let { clientOnly, deferred } = inheritedContext;
        if (!(clientOnly && deferred) && isNonEmptyArray(selection.directives)) {
          selection.directives.forEach((dir) => {
            const name = dir.name.value;
            if (name === "client")
              clientOnly = true;
            if (name === "defer") {
              const args = argumentsObjectFromField(dir, context2.variables);
              if (!args || args.if !== false) {
                deferred = true;
              }
            }
          });
        }
        if (isField(selection)) {
          const existing = fieldMap.get(selection);
          if (existing) {
            clientOnly = clientOnly && existing.clientOnly;
            deferred = deferred && existing.deferred;
          }
          fieldMap.set(selection, getContextFlavor(context2, clientOnly, deferred));
        } else {
          const fragment = getFragmentFromSelection(selection, context2.lookupFragment);
          if (!fragment && selection.kind === Kind.FRAGMENT_SPREAD) {
            throw newInvariantError(107, selection.name.value);
          }
          if (fragment && policies.fragmentMatches(fragment, typename, result, context2.variables)) {
            flatten(fragment.selectionSet, getContextFlavor(context2, clientOnly, deferred));
          }
        }
      });
    })(selectionSet, context2);
    return fieldMap;
  }
  applyMerges(mergeTree, existing, incoming, context2, getStorageArgs) {
    if (mergeTree.map.size && !isReference(incoming)) {
      const e = !isArray(incoming) && (isReference(existing) || storeValueIsStoreObject(existing)) ? existing : undefined;
      const i = incoming;
      if (e && !getStorageArgs) {
        getStorageArgs = [isReference(e) ? e.__ref : e];
      }
      let changedFields;
      const getValue = (from2, name) => {
        return isArray(from2) ? typeof name === "number" ? from2[name] : undefined : context2.store.getFieldValue(from2, String(name));
      };
      mergeTree.map.forEach((childTree, storeFieldName) => {
        const eVal = getValue(e, storeFieldName);
        const iVal = getValue(i, storeFieldName);
        if (iVal === undefined)
          return;
        if (getStorageArgs) {
          getStorageArgs.push(storeFieldName);
        }
        const aVal = this.applyMerges(childTree, eVal, iVal, context2, getStorageArgs);
        if (aVal !== iVal) {
          changedFields = changedFields || new Map;
          changedFields.set(storeFieldName, aVal);
        }
        if (getStorageArgs) {
          invariant2(getStorageArgs.pop() === storeFieldName);
        }
      });
      if (changedFields) {
        incoming = isArray(i) ? i.slice(0) : { ...i };
        changedFields.forEach((value, name) => {
          incoming[name] = value;
        });
      }
    }
    if (mergeTree.info) {
      return this.cache.policies.runMergeFunction(existing, incoming, mergeTree.info, context2, getStorageArgs && context2.store.getStorage(...getStorageArgs));
    }
    return incoming;
  }
}
var emptyMergeTreePool = [];
function getChildMergeTree({ map: map2 }, name) {
  if (!map2.has(name)) {
    map2.set(name, emptyMergeTreePool.pop() || { map: new Map });
  }
  return map2.get(name);
}
function mergeMergeTrees(left, right) {
  if (left === right || !right || mergeTreeIsEmpty(right))
    return left;
  if (!left || mergeTreeIsEmpty(left))
    return right;
  const info = left.info && right.info ? {
    ...left.info,
    ...right.info
  } : left.info || right.info;
  const needToMergeMaps = left.map.size && right.map.size;
  const map2 = needToMergeMaps ? new Map : left.map.size ? left.map : right.map;
  const merged = { info, map: map2 };
  if (needToMergeMaps) {
    const remainingRightKeys = new Set(right.map.keys());
    left.map.forEach((leftTree, key) => {
      merged.map.set(key, mergeMergeTrees(leftTree, right.map.get(key)));
      remainingRightKeys.delete(key);
    });
    remainingRightKeys.forEach((key) => {
      merged.map.set(key, mergeMergeTrees(right.map.get(key), left.map.get(key)));
    });
  }
  return merged;
}
function mergeTreeIsEmpty(tree) {
  return !tree || !(tree.info || tree.map.size);
}
function maybeRecycleChildMergeTree({ map: map2 }, name) {
  const childTree = map2.get(name);
  if (childTree && mergeTreeIsEmpty(childTree)) {
    emptyMergeTreePool.push(childTree);
    map2.delete(name);
  }
}
var warnings = new Set;
function warnAboutDataLoss(existingRef, incomingObj, storeFieldName, store) {
  const getChild = (objOrRef) => {
    const child = store.getFieldValue(objOrRef, storeFieldName);
    return typeof child === "object" && child;
  };
  const existing = getChild(existingRef);
  if (!existing)
    return;
  const incoming = getChild(incomingObj);
  if (!incoming)
    return;
  if (isReference(existing))
    return;
  if (equal(existing, incoming))
    return;
  if (Object.keys(existing).every((key) => store.getFieldValue(incoming, key) !== undefined)) {
    return;
  }
  const parentType = store.getFieldValue(existingRef, "__typename") || store.getFieldValue(incomingObj, "__typename");
  const fieldName = fieldNameFromStoreName(storeFieldName);
  const typeDotName = `${parentType}.${fieldName}`;
  if (warnings.has(typeDotName))
    return;
  warnings.add(typeDotName);
  const childTypenames = [];
  if (!isArray(existing) && !isArray(incoming)) {
    [existing, incoming].forEach((child) => {
      const typename = store.getFieldValue(child, "__typename");
      if (typeof typename === "string" && !childTypenames.includes(typename)) {
        childTypenames.push(typename);
      }
    });
  }
  __DEV__ && invariant2.warn(108, fieldName, parentType, childTypenames.length ? "either ensure all objects of type " + childTypenames.join(" and ") + " have an ID or a custom merge function, or " : "", typeDotName, { ...existing }, { ...incoming });
}
function getTypenameFromResult(result, selectionSet, fragmentMap) {
  let fragments;
  for (const selection of selectionSet.selections) {
    if (isField(selection)) {
      if (selection.name.value === "__typename") {
        return result[resultKeyNameFromField(selection)];
      }
    } else if (fragments) {
      fragments.push(selection);
    } else {
      fragments = [selection];
    }
  }
  if (typeof result.__typename === "string") {
    return result.__typename;
  }
  if (fragments) {
    for (const selection of fragments) {
      const typename = getTypenameFromResult(result, getFragmentFromSelection(selection, fragmentMap).selectionSet, fragmentMap);
      if (typeof typename === "string") {
        return typename;
      }
    }
  }
}

// node_modules/@apollo/client/cache/inmemory/inMemoryCache.js
class InMemoryCache extends ApolloCache {
  data;
  optimisticData;
  config;
  watches = new Set;
  storeReader;
  storeWriter;
  addTypenameTransform = new DocumentTransform(addTypenameToDocument);
  maybeBroadcastWatch;
  assumeImmutableResults = true;
  policies;
  makeVar = makeVar;
  constructor(config2 = {}) {
    super();
    this.config = normalizeConfig(config2);
    this.policies = new Policies({
      cache: this,
      dataIdFromObject: this.config.dataIdFromObject,
      possibleTypes: this.config.possibleTypes,
      typePolicies: this.config.typePolicies
    });
    this.init();
  }
  init() {
    const rootStore = this.data = new EntityStore.Root({
      policies: this.policies,
      resultCaching: this.config.resultCaching
    });
    this.optimisticData = rootStore.stump;
    this.resetResultCache();
  }
  resetResultCache() {
    const { fragments } = this.config;
    this.addTypenameTransform.resetCache();
    fragments?.resetCaches();
    this.storeWriter = new StoreWriter(this, this.storeReader = new StoreReader({ cache: this, fragments }), fragments);
    this.maybeBroadcastWatch = wrap2((c, options) => {
      return this.broadcastWatch(c, options);
    }, {
      max: cacheSizes["inMemoryCache.maybeBroadcastWatch"] || 5000,
      makeCacheKey: (c) => {
        const store = c.optimistic ? this.optimisticData : this.data;
        if (supportsResultCaching(store)) {
          const { optimistic, id, variables } = c;
          return store.makeCacheKey(c.query, c.callback, canonicalStringify({ optimistic, id, variables }));
        }
      }
    });
    new Set([this.data.group, this.optimisticData.group]).forEach((group) => group.resetCaching());
  }
  restore(data) {
    this.init();
    if (data)
      this.data.replace(data);
    return this;
  }
  extract(optimistic = false) {
    return (optimistic ? this.optimisticData : this.data).extract();
  }
  read(options) {
    const {
      returnPartialData = false
    } = options;
    return this.storeReader.diffQueryAgainstStore({
      ...options,
      store: options.optimistic ? this.optimisticData : this.data,
      config: this.config,
      returnPartialData
    }).result;
  }
  write(options) {
    try {
      ++this.txCount;
      return this.storeWriter.writeToStore(this.data, options);
    } finally {
      if (!--this.txCount && options.broadcast !== false) {
        this.broadcastWatches();
      }
    }
  }
  modify(options) {
    if (hasOwn.call(options, "id") && !options.id) {
      return false;
    }
    const store = options.optimistic ? this.optimisticData : this.data;
    try {
      ++this.txCount;
      return store.modify(options.id || "ROOT_QUERY", options.fields, false);
    } finally {
      if (!--this.txCount && options.broadcast !== false) {
        this.broadcastWatches();
      }
    }
  }
  diff(options) {
    return this.storeReader.diffQueryAgainstStore({
      ...options,
      store: options.optimistic ? this.optimisticData : this.data,
      rootId: options.id || "ROOT_QUERY",
      config: this.config
    });
  }
  watch(watch) {
    if (!this.watches.size) {
      recallCache(this);
    }
    this.watches.add(watch);
    if (watch.immediate) {
      this.maybeBroadcastWatch(watch);
    }
    return () => {
      if (this.watches.delete(watch) && !this.watches.size) {
        forgetCache(this);
      }
      this.maybeBroadcastWatch.forget(watch);
    };
  }
  gc(options) {
    canonicalStringify.reset();
    print2.reset();
    const ids = this.optimisticData.gc();
    if (options && !this.txCount && options.resetResultCache) {
      this.resetResultCache();
    }
    return ids;
  }
  retain(rootId, optimistic) {
    return (optimistic ? this.optimisticData : this.data).retain(rootId);
  }
  release(rootId, optimistic) {
    return (optimistic ? this.optimisticData : this.data).release(rootId);
  }
  identify(object) {
    if (isReference(object))
      return object.__ref;
    try {
      return this.policies.identify(object)[0];
    } catch (e) {
      __DEV__ && invariant2.warn(e);
    }
  }
  evict(options) {
    if (!options.id) {
      if (hasOwn.call(options, "id")) {
        return false;
      }
      options = { ...options, id: "ROOT_QUERY" };
    }
    try {
      ++this.txCount;
      return this.optimisticData.evict(options, this.data);
    } finally {
      if (!--this.txCount && options.broadcast !== false) {
        this.broadcastWatches();
      }
    }
  }
  reset(options) {
    this.init();
    canonicalStringify.reset();
    if (options && options.discardWatches) {
      this.watches.forEach((watch) => this.maybeBroadcastWatch.forget(watch));
      this.watches.clear();
      forgetCache(this);
    } else {
      this.broadcastWatches();
    }
    return Promise.resolve();
  }
  removeOptimistic(idToRemove) {
    const newOptimisticData = this.optimisticData.removeLayer(idToRemove);
    if (newOptimisticData !== this.optimisticData) {
      this.optimisticData = newOptimisticData;
      this.broadcastWatches();
    }
  }
  txCount = 0;
  batch(options) {
    const { update, optimistic = true, removeOptimistic, onWatchUpdated } = options;
    let updateResult;
    const perform = (layer) => {
      const { data, optimisticData } = this;
      ++this.txCount;
      if (layer) {
        this.data = this.optimisticData = layer;
      }
      try {
        return updateResult = update(this);
      } finally {
        --this.txCount;
        this.data = data;
        this.optimisticData = optimisticData;
      }
    };
    const alreadyDirty = new Set;
    if (onWatchUpdated && !this.txCount) {
      this.broadcastWatches({
        ...options,
        onWatchUpdated(watch) {
          alreadyDirty.add(watch);
          return false;
        }
      });
    }
    if (typeof optimistic === "string") {
      this.optimisticData = this.optimisticData.addLayer(optimistic, perform);
    } else if (optimistic === false) {
      perform(this.data);
    } else {
      perform();
    }
    if (typeof removeOptimistic === "string") {
      this.optimisticData = this.optimisticData.removeLayer(removeOptimistic);
    }
    if (onWatchUpdated && alreadyDirty.size) {
      this.broadcastWatches({
        ...options,
        onWatchUpdated(watch, diff) {
          const result = onWatchUpdated.call(this, watch, diff);
          if (result !== false) {
            alreadyDirty.delete(watch);
          }
          return result;
        }
      });
      if (alreadyDirty.size) {
        alreadyDirty.forEach((watch) => this.maybeBroadcastWatch.dirty(watch));
      }
    } else {
      this.broadcastWatches(options);
    }
    return updateResult;
  }
  performTransaction(update, optimisticId) {
    return this.batch({
      update,
      optimistic: optimisticId || optimisticId !== null
    });
  }
  transformDocument(document2) {
    return this.addTypenameTransform.transformDocument(this.addFragmentsToDocument(document2));
  }
  fragmentMatches(fragment, typename) {
    return this.policies.fragmentMatches(fragment, typename);
  }
  lookupFragment(fragmentName) {
    return this.config.fragments?.lookup(fragmentName) || null;
  }
  broadcastWatches(options) {
    if (!this.txCount) {
      this.watches.forEach((c) => this.maybeBroadcastWatch(c, options));
    }
  }
  addFragmentsToDocument(document2) {
    const { fragments } = this.config;
    return fragments ? fragments.transform(document2) : document2;
  }
  broadcastWatch(c, options) {
    const { lastDiff } = c;
    const diff = this.diff(c);
    if (options) {
      if (c.optimistic && typeof options.optimistic === "string") {
        diff.fromOptimisticTransaction = true;
      }
      if (options.onWatchUpdated && options.onWatchUpdated.call(this, c, diff, lastDiff) === false) {
        return;
      }
    }
    if (!lastDiff || !equal(lastDiff.result, diff.result)) {
      c.callback(c.lastDiff = diff, lastDiff);
    }
  }
}
if (__DEV__) {
  InMemoryCache.prototype.getMemoryInternals = getInMemoryCacheMemoryInternals;
}
// node_modules/@apollo/client/errors/utils.js
function isBranded(error, name) {
  return typeof error === "object" && error !== null && error[Symbol.for("apollo.error")] === name;
}
function brand(error) {
  Object.defineProperty(error, Symbol.for("apollo.error"), {
    value: error.name,
    enumerable: false,
    writable: false,
    configurable: false
  });
}

// node_modules/@apollo/client/errors/CombinedProtocolErrors.js
function defaultFormatMessage(errors) {
  return errors.map((e) => e.message || "Error message not found.").join("\n");
}

class CombinedProtocolErrors extends Error {
  static is(error) {
    return isBranded(error, "CombinedProtocolErrors");
  }
  static formatMessage = defaultFormatMessage;
  errors;
  constructor(protocolErrors) {
    super(CombinedProtocolErrors.formatMessage(protocolErrors, {
      defaultFormatMessage
    }));
    this.name = "CombinedProtocolErrors";
    this.errors = protocolErrors;
    brand(this);
    Object.setPrototypeOf(this, CombinedProtocolErrors.prototype);
  }
}

// node_modules/@apollo/client/errors/isErrorLike.js
function isErrorLike(error) {
  return error !== null && typeof error === "object" && typeof error.message === "string" && typeof error.name === "string" && (typeof error.stack === "string" || typeof error.stack === "undefined");
}

// node_modules/@apollo/client/errors/UnconventionalError.js
class UnconventionalError extends Error {
  static is(error) {
    return isBranded(error, "UnconventionalError");
  }
  constructor(errorType) {
    super("An error of unexpected shape occurred.", { cause: errorType });
    this.name = "UnconventionalError";
    brand(this);
    Object.setPrototypeOf(this, UnconventionalError.prototype);
  }
}

// node_modules/@apollo/client/errors/CombinedGraphQLErrors.js
function defaultFormatMessage2(errors) {
  return errors.filter((e) => e).map((e) => e.message || "Error message not found.").join("\n");
}

class CombinedGraphQLErrors extends Error {
  static is(error) {
    return isBranded(error, "CombinedGraphQLErrors");
  }
  static formatMessage = defaultFormatMessage2;
  errors;
  data;
  extensions;
  constructor(result, errors = result.errors || []) {
    super(CombinedGraphQLErrors.formatMessage(errors, {
      result,
      defaultFormatMessage: defaultFormatMessage2
    }));
    this.errors = errors;
    this.data = result.data;
    this.extensions = result.extensions;
    this.name = "CombinedGraphQLErrors";
    brand(this);
    Object.setPrototypeOf(this, CombinedGraphQLErrors.prototype);
  }
}
// node_modules/@apollo/client/errors/LinkError.js
var registry = new WeakSet;
function registerLinkError(error) {
  registry.add(error);
}
// node_modules/@apollo/client/errors/ServerError.js
class ServerError extends Error {
  static is(error) {
    return isBranded(error, "ServerError");
  }
  response;
  statusCode;
  bodyText;
  constructor(message, options) {
    super(message);
    this.name = "ServerError";
    this.response = options.response;
    this.statusCode = options.response.status;
    this.bodyText = options.bodyText;
    brand(this);
    Object.setPrototypeOf(this, ServerError.prototype);
  }
}
// node_modules/@apollo/client/errors/ServerParseError.js
class ServerParseError extends Error {
  static is(error) {
    return isBranded(error, "ServerParseError");
  }
  response;
  statusCode;
  bodyText;
  constructor(originalParseError, options) {
    super(originalParseError instanceof Error ? originalParseError.message : "Could not parse server response", { cause: originalParseError });
    this.name = "ServerParseError";
    this.response = options.response;
    this.statusCode = options.response.status;
    this.bodyText = options.bodyText;
    brand(this);
    Object.setPrototypeOf(this, ServerParseError.prototype);
  }
}
// node_modules/@apollo/client/errors/index.js
var PROTOCOL_ERRORS_SYMBOL = Symbol();
function graphQLResultHasProtocolErrors(result) {
  if ("extensions" in result) {
    return CombinedProtocolErrors.is(result.extensions[PROTOCOL_ERRORS_SYMBOL]);
  }
  return false;
}
function toErrorLike(error) {
  if (isErrorLike(error)) {
    return error;
  }
  if (typeof error === "string") {
    return new Error(error, { cause: error });
  }
  return new UnconventionalError(error);
}

// node_modules/@apollo/client/core/networkStatus.js
var NetworkStatus;
(function(NetworkStatus2) {
  NetworkStatus2[NetworkStatus2["loading"] = 1] = "loading";
  NetworkStatus2[NetworkStatus2["setVariables"] = 2] = "setVariables";
  NetworkStatus2[NetworkStatus2["fetchMore"] = 3] = "fetchMore";
  NetworkStatus2[NetworkStatus2["refetch"] = 4] = "refetch";
  NetworkStatus2[NetworkStatus2["poll"] = 6] = "poll";
  NetworkStatus2[NetworkStatus2["ready"] = 7] = "ready";
  NetworkStatus2[NetworkStatus2["error"] = 8] = "error";
  NetworkStatus2[NetworkStatus2["streaming"] = 9] = "streaming";
})(NetworkStatus || (NetworkStatus = {}));
function isNetworkRequestInFlight(networkStatus) {
  return !isNetworkRequestSettled(networkStatus);
}
function isNetworkRequestSettled(networkStatus) {
  return networkStatus === 7 || networkStatus === 8;
}

// node_modules/@apollo/client/core/ObservableQuery.js
var { assign, hasOwnProperty: hasOwnProperty5 } = Object;
var uninitialized = {
  loading: true,
  networkStatus: NetworkStatus.loading,
  data: undefined,
  dataState: "empty",
  partial: true
};
var empty = {
  loading: false,
  networkStatus: NetworkStatus.ready,
  data: undefined,
  dataState: "empty",
  partial: true
};

class ObservableQuery {
  options;
  queryName;
  _lastWrite;
  get query() {
    return this.lastQuery;
  }
  get variables() {
    return this.options.variables;
  }
  unsubscribeFromCache;
  input;
  subject;
  isTornDown;
  queryManager;
  subscriptions = new Set;
  waitForNetworkResult;
  lastQuery;
  linkSubscription;
  pollingInfo;
  get networkStatus() {
    return this.subject.getValue().result.networkStatus;
  }
  constructor({ queryManager, options, transformedQuery = queryManager.transform(options.query) }) {
    this.queryManager = queryManager;
    this.waitForNetworkResult = options.fetchPolicy === "network-only";
    this.isTornDown = false;
    this.subscribeToMore = this.subscribeToMore.bind(this);
    this.maskResult = this.maskResult.bind(this);
    const { watchQuery: { fetchPolicy: defaultFetchPolicy = "cache-first" } = {} } = queryManager.defaultOptions;
    const {
      fetchPolicy = defaultFetchPolicy,
      initialFetchPolicy = fetchPolicy === "standby" ? defaultFetchPolicy : fetchPolicy
    } = options;
    this.lastQuery = transformedQuery;
    this.options = {
      ...options,
      initialFetchPolicy,
      fetchPolicy,
      variables: this.getVariablesWithDefaults(options.variables)
    };
    this.initializeObservablesQueue();
    this["@@observable"] = () => this;
    if (Symbol.observable) {
      this[Symbol.observable] = () => this;
    }
    const opDef = getOperationDefinition(this.query);
    this.queryName = opDef && opDef.name && opDef.name.value;
  }
  initializeObservablesQueue() {
    this.subject = new BehaviorSubject({
      query: this.query,
      variables: this.variables,
      result: uninitialized,
      meta: {}
    });
    const observable2 = this.subject.pipe(tap({
      subscribe: () => {
        if (!this.subject.observed) {
          this.reobserve();
          setTimeout(() => this.updatePolling());
        }
      },
      unsubscribe: () => {
        if (!this.subject.observed) {
          this.tearDownQuery();
        }
      }
    }), filterMap(({ query, variables, result: current, meta }, context2) => {
      const { shouldEmit } = meta;
      if (current === uninitialized) {
        context2.previous = undefined;
        context2.previousVariables = undefined;
      }
      if (this.options.fetchPolicy === "standby" || shouldEmit === 2)
        return;
      if (shouldEmit === 1)
        return emit();
      const { previous, previousVariables } = context2;
      if (previous) {
        const documentInfo = this.queryManager.getDocumentInfo(query);
        const dataMasking = this.queryManager.dataMasking;
        const maskedQuery = dataMasking ? documentInfo.nonReactiveQuery : query;
        const resultIsEqual = dataMasking || documentInfo.hasNonreactiveDirective ? equalByQuery(maskedQuery, previous, current, variables) : equal(previous, current);
        if (resultIsEqual && equal(previousVariables, variables)) {
          return;
        }
      }
      if (shouldEmit === 3 && (!this.options.notifyOnNetworkStatusChange || equal(previous, current))) {
        return;
      }
      return emit();
      function emit() {
        context2.previous = current;
        context2.previousVariables = variables;
        return current;
      }
    }, () => ({})));
    this.pipe = observable2.pipe.bind(observable2);
    this.subscribe = observable2.subscribe.bind(observable2);
    this.input = new Subject;
    this.input.complete = () => {
    };
    this.input.pipe(this.operator).subscribe(this.subject);
  }
  subscribe;
  pipe;
  [Symbol.observable];
  ["@@observable"];
  getCacheDiff({ optimistic = true } = {}) {
    return this.queryManager.cache.diff({
      query: this.query,
      variables: this.variables,
      returnPartialData: true,
      optimistic
    });
  }
  getInitialResult(initialFetchPolicy) {
    const fetchPolicy = this.queryManager.prioritizeCacheValues ? "cache-first" : initialFetchPolicy || this.options.fetchPolicy;
    const cacheResult = () => {
      const diff = this.getCacheDiff();
      const data = this.options.returnPartialData || diff.complete ? diff.result ?? undefined : undefined;
      return this.maskResult({
        data,
        dataState: diff.complete ? "complete" : data === undefined ? "empty" : "partial",
        loading: !diff.complete,
        networkStatus: diff.complete ? NetworkStatus.ready : NetworkStatus.loading,
        partial: !diff.complete
      });
    };
    switch (fetchPolicy) {
      case "cache-only": {
        return {
          ...cacheResult(),
          loading: false,
          networkStatus: NetworkStatus.ready
        };
      }
      case "cache-first":
        return cacheResult();
      case "cache-and-network":
        return {
          ...cacheResult(),
          loading: true,
          networkStatus: NetworkStatus.loading
        };
      case "standby":
        return empty;
      default:
        return uninitialized;
    }
  }
  resubscribeCache() {
    const { variables, fetchPolicy } = this.options;
    const query = this.query;
    const shouldUnsubscribe = fetchPolicy === "standby" || fetchPolicy === "no-cache" || this.waitForNetworkResult;
    const shouldResubscribe = !isEqualQuery({ query, variables }, this.unsubscribeFromCache) && !this.waitForNetworkResult;
    if (shouldUnsubscribe || shouldResubscribe) {
      this.unsubscribeFromCache?.();
    }
    if (shouldUnsubscribe || !shouldResubscribe) {
      return;
    }
    const watch = {
      query,
      variables,
      optimistic: true,
      watcher: this,
      callback: (diff) => {
        const info = this.queryManager.getDocumentInfo(query);
        if (info.hasClientExports || info.hasForcedResolvers) {
          watch.lastDiff = undefined;
        }
        if (watch.lastOwnDiff === diff) {
          return;
        }
        const { result: previousResult } = this.subject.getValue();
        if (!diff.complete && (previousResult.error || previousResult === uninitialized || previousResult === empty)) {
          return;
        }
        if (!equal(previousResult.data, diff.result)) {
          this.scheduleNotify();
        }
      }
    };
    const cancelWatch = this.queryManager.cache.watch(watch);
    this.unsubscribeFromCache = Object.assign(() => {
      this.unsubscribeFromCache = undefined;
      cancelWatch();
    }, { query, variables });
  }
  stableLastResult;
  getCurrentResult() {
    const { result: current } = this.subject.getValue();
    let value = current.networkStatus === NetworkStatus.error || this.hasObservers() || this.options.fetchPolicy === "no-cache" ? current : this.getInitialResult();
    if (value === uninitialized) {
      value = this.getInitialResult();
    }
    if (!equal(this.stableLastResult, value)) {
      this.stableLastResult = value;
    }
    return this.stableLastResult;
  }
  refetch(variables) {
    const { fetchPolicy } = this.options;
    const reobserveOptions = {
      pollInterval: 0
    };
    if (fetchPolicy === "no-cache") {
      reobserveOptions.fetchPolicy = "no-cache";
    } else {
      reobserveOptions.fetchPolicy = "network-only";
    }
    if (__DEV__ && variables && hasOwnProperty5.call(variables, "variables")) {
      const queryDef = getQueryDefinition(this.query);
      const vars = queryDef.variableDefinitions;
      if (!vars || !vars.some((v) => v.variable.name.value === "variables")) {
        __DEV__ && invariant2.warn(77, variables, queryDef.name?.value || queryDef);
      }
    }
    if (variables && !equal(this.variables, variables)) {
      reobserveOptions.variables = this.options.variables = this.getVariablesWithDefaults({ ...this.variables, ...variables });
    }
    this._lastWrite = undefined;
    return this._reobserve(reobserveOptions, {
      newNetworkStatus: NetworkStatus.refetch
    });
  }
  fetchMore({ query, variables, context: context2, errorPolicy, updateQuery }) {
    invariant2(this.options.fetchPolicy !== "cache-only", 78, getOperationName(this.query, "(anonymous)"));
    const combinedOptions = {
      ...compact(this.options, { errorPolicy: "none" }, {
        query,
        context: context2,
        errorPolicy
      }),
      variables: query ? variables : {
        ...this.variables,
        ...variables
      },
      fetchPolicy: "no-cache",
      notifyOnNetworkStatusChange: this.options.notifyOnNetworkStatusChange
    };
    combinedOptions.query = this.transformDocument(combinedOptions.query);
    this.lastQuery = query ? this.transformDocument(this.options.query) : combinedOptions.query;
    let wasUpdated = false;
    const isCached = this.options.fetchPolicy !== "no-cache";
    if (!isCached) {
      invariant2(updateQuery, 79);
    }
    const { finalize: finalize2, pushNotification } = this.pushOperation(NetworkStatus.fetchMore);
    pushNotification({
      source: "newNetworkStatus",
      kind: "N",
      value: {}
    }, { shouldEmit: 3 });
    return this.queryManager.fetchQuery(combinedOptions, NetworkStatus.fetchMore).then((fetchMoreResult) => {
      finalize2();
      if (isCached) {
        this.queryManager.cache.batch({
          update: (cache) => {
            if (updateQuery) {
              cache.updateQuery({
                query: this.query,
                variables: this.variables,
                returnPartialData: true,
                optimistic: false
              }, (previous) => updateQuery(previous, {
                fetchMoreResult: fetchMoreResult.data,
                variables: combinedOptions.variables
              }));
            } else {
              cache.writeQuery({
                query: combinedOptions.query,
                variables: combinedOptions.variables,
                data: fetchMoreResult.data
              });
            }
          },
          onWatchUpdated: (watch) => {
            if (watch.watcher === this) {
              wasUpdated = true;
            }
          }
        });
      } else {
        const lastResult = this.getCurrentResult();
        const data = updateQuery(lastResult.data, {
          fetchMoreResult: fetchMoreResult.data,
          variables: combinedOptions.variables
        });
        pushNotification({
          kind: "N",
          value: {
            ...lastResult,
            networkStatus: NetworkStatus.ready,
            loading: false,
            data,
            dataState: lastResult.dataState === "streaming" ? "streaming" : "complete"
          },
          source: "network"
        });
      }
      return this.maskResult(fetchMoreResult);
    }).finally(() => {
      finalize2();
      if (isCached && !wasUpdated) {
        pushNotification({
          kind: "N",
          source: "newNetworkStatus",
          value: {}
        }, { shouldEmit: 1 });
      }
    });
  }
  subscribeToMore(options) {
    const subscription = this.queryManager.startGraphQLSubscription({
      query: options.document,
      variables: options.variables,
      context: options.context
    }).subscribe({
      next: (subscriptionData) => {
        const { updateQuery, onError } = options;
        const { error } = subscriptionData;
        if (error) {
          if (onError) {
            onError(error);
          } else {
            invariant2.error(80, error);
          }
          return;
        }
        if (updateQuery) {
          this.updateQuery((previous, updateOptions) => updateQuery(previous, {
            subscriptionData,
            ...updateOptions
          }));
        }
      }
    });
    this.subscriptions.add(subscription);
    return () => {
      if (this.subscriptions.delete(subscription)) {
        subscription.unsubscribe();
      }
    };
  }
  applyOptions(newOptions) {
    const mergedOptions = compact(this.options, newOptions || {});
    assign(this.options, mergedOptions);
    this.updatePolling();
  }
  async setVariables(variables) {
    variables = this.getVariablesWithDefaults(variables);
    if (equal(this.variables, variables)) {
      return toQueryResult(this.getCurrentResult());
    }
    this.options.variables = variables;
    if (!this.hasObservers()) {
      return toQueryResult(this.getCurrentResult());
    }
    return this._reobserve({
      fetchPolicy: this.options.initialFetchPolicy,
      variables
    }, { newNetworkStatus: NetworkStatus.setVariables });
  }
  updateQuery(mapFn) {
    const { queryManager } = this;
    const { result, complete } = this.getCacheDiff({ optimistic: false });
    const newResult = mapFn(result, {
      variables: this.variables,
      complete: !!complete,
      previousData: result
    });
    if (newResult) {
      queryManager.cache.writeQuery({
        query: this.options.query,
        data: newResult,
        variables: this.variables
      });
      queryManager.broadcastQueries();
    }
  }
  startPolling(pollInterval) {
    this.options.pollInterval = pollInterval;
    this.updatePolling();
  }
  stopPolling() {
    this.options.pollInterval = 0;
    this.updatePolling();
  }
  applyNextFetchPolicy(reason, options) {
    if (options.nextFetchPolicy) {
      const { fetchPolicy = "cache-first", initialFetchPolicy = fetchPolicy } = options;
      if (fetchPolicy === "standby") {
      } else if (typeof options.nextFetchPolicy === "function") {
        options.fetchPolicy = options.nextFetchPolicy.call(options, fetchPolicy, { reason, options, observable: this, initialFetchPolicy });
      } else if (reason === "variables-changed") {
        options.fetchPolicy = initialFetchPolicy;
      } else {
        options.fetchPolicy = options.nextFetchPolicy;
      }
    }
    return options.fetchPolicy;
  }
  fetch(options, networkStatus, fetchQuery, operator) {
    const initialFetchPolicy = this.options.fetchPolicy;
    options.context ??= {};
    let synchronouslyEmitted = false;
    const onCacheHit = () => {
      synchronouslyEmitted = true;
    };
    const fetchQueryOperator = (source) => new Observable((subscriber) => {
      try {
        return source.subscribe({
          next(value) {
            synchronouslyEmitted = true;
            subscriber.next(value);
          },
          error: (error) => subscriber.error(error),
          complete: () => subscriber.complete()
        });
      } finally {
        if (!synchronouslyEmitted) {
          operation.override = networkStatus;
          this.input.next({
            kind: "N",
            source: "newNetworkStatus",
            value: {
              resetError: true
            },
            query,
            variables,
            meta: {
              shouldEmit: 3,
              fetchPolicy: initialFetchPolicy
            }
          });
        }
      }
    });
    let { observable: observable2, fromLink } = this.queryManager.fetchObservableWithInfo(options, {
      networkStatus,
      query: fetchQuery,
      onCacheHit,
      fetchQueryOperator,
      observableQuery: this
    });
    const { query, variables } = this;
    const operation = {
      abort: () => {
        subscription.unsubscribe();
      },
      query,
      variables
    };
    this.activeOperations.add(operation);
    let forceFirstValueEmit = networkStatus == NetworkStatus.refetch || networkStatus == NetworkStatus.setVariables;
    observable2 = observable2.pipe(operator, share());
    const subscription = observable2.pipe(tap({
      next: (notification) => {
        if (notification.source === "newNetworkStatus" || notification.kind === "N" && notification.value.loading) {
          operation.override = networkStatus;
        } else {
          delete operation.override;
        }
      },
      finalize: () => this.activeOperations.delete(operation)
    })).subscribe({
      next: (value) => {
        const meta = {};
        if (forceFirstValueEmit && value.kind === "N" && "loading" in value.value && !value.value.loading) {
          forceFirstValueEmit = false;
          meta.shouldEmit = 1;
        }
        this.input.next({ ...value, query, variables, meta });
      }
    });
    return { fromLink, subscription, observable: observable2 };
  }
  didWarnCacheOnlyPolling = false;
  updatePolling() {
    if (this.queryManager.ssrMode) {
      return;
    }
    const { pollingInfo, options: { fetchPolicy, pollInterval } } = this;
    if (!pollInterval || !this.hasObservers() || fetchPolicy === "cache-only") {
      if (__DEV__) {
        if (!this.didWarnCacheOnlyPolling && pollInterval && fetchPolicy === "cache-only") {
          __DEV__ && invariant2.warn(81, getOperationName(this.query, "(anonymous)"));
          this.didWarnCacheOnlyPolling = true;
        }
      }
      this.cancelPolling();
      return;
    }
    if (pollingInfo?.interval === pollInterval) {
      return;
    }
    const info = pollingInfo || (this.pollingInfo = {});
    info.interval = pollInterval;
    const maybeFetch = () => {
      if (this.pollingInfo) {
        if (!isNetworkRequestInFlight(this.networkStatus) && !this.options.skipPollAttempt?.()) {
          this._reobserve({
            fetchPolicy: this.options.initialFetchPolicy === "no-cache" ? "no-cache" : "network-only"
          }, {
            newNetworkStatus: NetworkStatus.poll
          }).then(poll, poll);
        } else {
          poll();
        }
      }
    };
    const poll = () => {
      const info2 = this.pollingInfo;
      if (info2) {
        clearTimeout(info2.timeout);
        info2.timeout = setTimeout(maybeFetch, info2.interval);
      }
    };
    poll();
  }
  cancelPolling() {
    if (this.pollingInfo) {
      clearTimeout(this.pollingInfo.timeout);
      delete this.pollingInfo;
    }
  }
  reobserve(newOptions) {
    return this._reobserve(newOptions);
  }
  _reobserve(newOptions, internalOptions) {
    this.isTornDown = false;
    let { newNetworkStatus } = internalOptions || {};
    this.queryManager.obsQueries.add(this);
    const useDisposableObservable = newNetworkStatus === NetworkStatus.refetch || newNetworkStatus === NetworkStatus.poll;
    const oldVariables = this.variables;
    const oldFetchPolicy = this.options.fetchPolicy;
    const mergedOptions = compact(this.options, newOptions || {});
    const options = useDisposableObservable ? mergedOptions : assign(this.options, mergedOptions);
    const query = this.transformDocument(options.query);
    this.lastQuery = query;
    if (newOptions && "variables" in newOptions) {
      options.variables = this.getVariablesWithDefaults(newOptions.variables);
    }
    if (!useDisposableObservable) {
      this.updatePolling();
      if (newOptions && newOptions.variables && !equal(newOptions.variables, oldVariables) && options.fetchPolicy !== "standby" && (options.fetchPolicy === oldFetchPolicy || typeof options.nextFetchPolicy === "function")) {
        this.applyNextFetchPolicy("variables-changed", options);
        if (newNetworkStatus === undefined) {
          newNetworkStatus = NetworkStatus.setVariables;
        }
      }
    }
    const oldNetworkStatus = this.networkStatus;
    if (!newNetworkStatus) {
      newNetworkStatus = NetworkStatus.loading;
      if (oldNetworkStatus !== NetworkStatus.loading && newOptions?.variables && !equal(newOptions.variables, oldVariables)) {
        newNetworkStatus = NetworkStatus.setVariables;
      }
      if (options.fetchPolicy === "standby") {
        newNetworkStatus = NetworkStatus.ready;
      }
    }
    if (options.fetchPolicy === "standby") {
      this.cancelPolling();
    }
    this.resubscribeCache();
    const { promise, operator: promiseOperator } = getTrackingOperatorPromise((value) => {
      switch (value.kind) {
        case "E":
          throw value.error;
        case "N":
          if (value.source !== "newNetworkStatus" && !value.value.loading)
            return value.value;
      }
    }, options.fetchPolicy === "standby" ? { data: undefined } : undefined);
    const { subscription, observable: observable2, fromLink } = this.fetch(options, newNetworkStatus, query, promiseOperator);
    if (!useDisposableObservable && (fromLink || !this.linkSubscription)) {
      if (this.linkSubscription) {
        this.linkSubscription.unsubscribe();
      }
      this.linkSubscription = subscription;
    }
    const ret = Object.assign(preventUnhandledRejection(promise.then((result) => toQueryResult(this.maskResult(result))).finally(() => {
      if (!this.hasObservers() && this.activeOperations.size === 0) {
        this.tearDownQuery();
      }
    })), {
      retain: () => {
        const subscription2 = observable2.subscribe({});
        const unsubscribe = () => subscription2.unsubscribe();
        promise.then(unsubscribe, unsubscribe);
        return ret;
      }
    });
    return ret;
  }
  hasObservers() {
    return this.subject.observed;
  }
  stop() {
    this.subject.complete();
    this.initializeObservablesQueue();
    this.tearDownQuery();
  }
  tearDownQuery() {
    if (this.isTornDown)
      return;
    this.resetNotifications();
    this.unsubscribeFromCache?.();
    if (this.linkSubscription) {
      this.linkSubscription.unsubscribe();
      delete this.linkSubscription;
    }
    this.stopPolling();
    this.subscriptions.forEach((sub) => sub.unsubscribe());
    this.subscriptions.clear();
    this.queryManager.obsQueries.delete(this);
    this.isTornDown = true;
    this.abortActiveOperations();
    this._lastWrite = undefined;
  }
  transformDocument(document2) {
    return this.queryManager.transform(document2);
  }
  maskResult(result) {
    const masked = this.queryManager.maskOperation({
      document: this.query,
      data: result.data,
      fetchPolicy: this.options.fetchPolicy,
      cause: this
    });
    return masked === result.data ? result : { ...result, data: masked };
  }
  dirty = false;
  notifyTimeout;
  resetNotifications() {
    if (this.notifyTimeout) {
      clearTimeout(this.notifyTimeout);
      this.notifyTimeout = undefined;
    }
    this.dirty = false;
  }
  scheduleNotify() {
    if (this.dirty)
      return;
    this.dirty = true;
    if (!this.notifyTimeout) {
      this.notifyTimeout = setTimeout(() => this.notify(true), 0);
    }
  }
  notify(scheduled2 = false) {
    if (!scheduled2) {
      const info = this.queryManager.getDocumentInfo(this.query);
      if (info.hasClientExports || info.hasForcedResolvers) {
        return;
      }
    }
    const { dirty } = this;
    this.resetNotifications();
    if (dirty && (this.options.fetchPolicy == "cache-only" || this.options.fetchPolicy == "cache-and-network" || !this.activeOperations.size)) {
      const diff = this.getCacheDiff();
      if (equal(diff.result, this.getCacheDiff({ optimistic: false }).result)) {
        this.reobserveCacheFirst();
      } else {
        this.input.next({
          kind: "N",
          value: {
            data: diff.result,
            dataState: diff.complete ? "complete" : diff.result ? "partial" : "empty",
            networkStatus: NetworkStatus.ready,
            loading: false,
            error: undefined,
            partial: !diff.complete
          },
          source: "cache",
          query: this.query,
          variables: this.variables,
          meta: {}
        });
      }
    }
  }
  activeOperations = new Set;
  pushOperation(networkStatus) {
    let aborted = false;
    const { query, variables } = this;
    const finalize2 = () => {
      this.activeOperations.delete(operation);
    };
    const operation = {
      override: networkStatus,
      abort: () => {
        aborted = true;
        finalize2();
      },
      query,
      variables
    };
    this.activeOperations.add(operation);
    return {
      finalize: finalize2,
      pushNotification: (notification, additionalMeta) => {
        if (!aborted) {
          this.input.next({
            ...notification,
            query,
            variables,
            meta: { ...additionalMeta }
          });
        }
      }
    };
  }
  calculateNetworkStatus(baseNetworkStatus) {
    if (baseNetworkStatus === NetworkStatus.streaming) {
      return baseNetworkStatus;
    }
    const operation = Array.from(this.activeOperations.values()).findLast((operation2) => isEqualQuery(operation2, this) && operation2.override !== undefined);
    return operation?.override ?? baseNetworkStatus;
  }
  abortActiveOperations() {
    this.activeOperations.forEach((operation) => operation.abort());
  }
  reset() {
    const resetToEmpty = this.options.fetchPolicy === "cache-only";
    this.setResult(resetToEmpty ? empty : uninitialized, {
      shouldEmit: resetToEmpty ? 1 : 2
    });
    this.abortActiveOperations();
  }
  setResult(result, additionalMeta) {
    this.input.next({
      source: "setResult",
      kind: "N",
      value: result,
      query: this.query,
      variables: this.variables,
      meta: { ...additionalMeta }
    });
  }
  operator = filterMap((notification) => {
    const { query, variables, meta } = notification;
    if (notification.source === "setResult") {
      return { query, variables, result: notification.value, meta };
    }
    if (notification.kind === "C" || !isEqualQuery(notification, this)) {
      return;
    }
    let result;
    const previous = this.subject.getValue();
    if (notification.source === "cache") {
      result = notification.value;
      if (result.networkStatus === NetworkStatus.ready && result.partial && (!this.options.returnPartialData || previous.result.networkStatus === NetworkStatus.error) && this.options.fetchPolicy !== "cache-only") {
        return;
      }
    } else if (notification.source === "network") {
      if (this.waitForNetworkResult) {
        this.waitForNetworkResult = false;
        this.resubscribeCache();
      }
      result = notification.kind === "E" ? {
        ...isEqualQuery(previous, notification) ? previous.result : { data: undefined, dataState: "empty", partial: true },
        error: notification.error,
        networkStatus: NetworkStatus.error,
        loading: false
      } : notification.value;
      if (notification.kind === "E" && result.dataState === "streaming") {
        result.dataState = "complete";
      }
      if (result.error) {
        meta.shouldEmit = 1;
      }
    } else if (notification.source === "newNetworkStatus") {
      const baseResult = isEqualQuery(previous, notification) ? previous.result : this.getInitialResult(meta.fetchPolicy);
      const { resetError } = notification.value;
      const error = resetError ? undefined : baseResult.error;
      const networkStatus = error ? NetworkStatus.error : NetworkStatus.ready;
      result = {
        ...baseResult,
        error,
        networkStatus
      };
    }
    invariant2(result);
    if (!result.error)
      delete result.error;
    result.networkStatus = this.calculateNetworkStatus(result.networkStatus);
    result.loading = isNetworkRequestInFlight(result.networkStatus);
    result = this.maskResult(result);
    return { query, variables, result, meta };
  });
  reobserveCacheFirst() {
    const { fetchPolicy, nextFetchPolicy } = this.options;
    if (fetchPolicy === "cache-and-network" || fetchPolicy === "network-only") {
      this.reobserve({
        fetchPolicy: "cache-first",
        nextFetchPolicy(currentFetchPolicy, context2) {
          this.nextFetchPolicy = nextFetchPolicy;
          if (typeof this.nextFetchPolicy === "function") {
            return this.nextFetchPolicy(currentFetchPolicy, context2);
          }
          return fetchPolicy;
        }
      });
    } else {
      this.reobserve();
    }
  }
  getVariablesWithDefaults(variables) {
    return this.queryManager.getVariables(this.query, variables);
  }
}
function logMissingFieldErrors(missing) {
  if (__DEV__ && missing) {
    __DEV__ && invariant2.debug(82, missing);
  }
}
function isEqualQuery(a, b) {
  return !!(a && b && a.query === b.query && equal(a.variables, b.variables));
}
function getTrackingOperatorPromise(filterMapCb, defaultValue) {
  let lastValue = defaultValue, resolve, reject;
  const promise = new Promise((res, rej) => {
    resolve = res;
    reject = rej;
  });
  const operator = tap({
    next(value) {
      try {
        const newValue = filterMapCb(value);
        if (newValue !== undefined) {
          lastValue = newValue;
        }
      } catch (error) {
        reject(error);
      }
    },
    finalize: () => {
      if (lastValue) {
        resolve(lastValue);
      } else {
        const message = "The operation was aborted.";
        const name = "AbortError";
        reject(typeof DOMException !== "undefined" ? new DOMException(message, name) : Object.assign(new Error(message), { name }));
      }
    }
  });
  return { promise, operator };
}

// node_modules/@apollo/client/core/QueryInfo.js
var IGNORE = {};
var destructiveMethodCounts = new WeakMap;
function wrapDestructiveCacheMethod(cache, methodName) {
  const original = cache[methodName];
  if (typeof original === "function") {
    cache[methodName] = function() {
      destructiveMethodCounts.set(cache, (destructiveMethodCounts.get(cache) + 1) % 1000000000000000);
      return original.apply(this, arguments);
    };
  }
}
var queryInfoIds = new WeakMap;

class QueryInfo {
  lastRequestId = 1;
  cache;
  queryManager;
  id;
  observableQuery;
  incremental;
  constructor(queryManager, observableQuery) {
    const cache = this.cache = queryManager.cache;
    const id = (queryInfoIds.get(queryManager) || 0) + 1;
    queryInfoIds.set(queryManager, id);
    this.id = id + "";
    this.observableQuery = observableQuery;
    this.queryManager = queryManager;
    if (!destructiveMethodCounts.has(cache)) {
      destructiveMethodCounts.set(cache, 0);
      wrapDestructiveCacheMethod(cache, "evict");
      wrapDestructiveCacheMethod(cache, "modify");
      wrapDestructiveCacheMethod(cache, "reset");
    }
  }
  _lastWrite;
  get lastWrite() {
    return (this.observableQuery || this)._lastWrite;
  }
  set lastWrite(value) {
    (this.observableQuery || this)._lastWrite = value;
  }
  resetLastWrite() {
    this.lastWrite = undefined;
  }
  shouldWrite(result, variables) {
    const { lastWrite } = this;
    return !(lastWrite && lastWrite.dmCount === destructiveMethodCounts.get(this.cache) && equal(variables, lastWrite.variables) && equal(result.data, lastWrite.result.data));
  }
  get hasNext() {
    return this.incremental ? this.incremental.hasNext : false;
  }
  maybeHandleIncrementalResult(cacheData, incoming, query) {
    const { incrementalHandler } = this.queryManager;
    if (incrementalHandler.isIncrementalResult(incoming)) {
      this.incremental ||= incrementalHandler.startRequest({
        query
      });
      return this.incremental.handle(cacheData, incoming);
    }
    return incoming;
  }
  markQueryResult(incoming, { document: query, variables, errorPolicy, cacheWriteBehavior }) {
    const diffOptions = {
      query,
      variables,
      returnPartialData: true,
      optimistic: true
    };
    this.observableQuery?.["resetNotifications"]();
    const skipCache = cacheWriteBehavior === 0;
    const lastDiff = skipCache ? undefined : this.cache.diff(diffOptions);
    let result = this.maybeHandleIncrementalResult(lastDiff?.result, incoming, query);
    if (skipCache) {
      return result;
    }
    if (shouldWriteResult(result, errorPolicy)) {
      this.cache.batch({
        onWatchUpdated: (watch, diff) => {
          if (watch.watcher === this.observableQuery) {
            watch.lastOwnDiff = diff;
          }
        },
        update: (cache) => {
          if (this.shouldWrite(result, variables)) {
            cache.writeQuery({
              query,
              data: result.data,
              variables,
              overwrite: cacheWriteBehavior === 1
            });
            this.lastWrite = {
              result,
              variables,
              dmCount: destructiveMethodCounts.get(this.cache)
            };
          } else {
            if (lastDiff && lastDiff.complete) {
              result = { ...result, data: lastDiff.result };
              return;
            }
          }
          const diff = cache.diff(diffOptions);
          if (diff.complete) {
            result = { ...result, data: diff.result };
          }
        }
      });
    } else {
      this.lastWrite = undefined;
    }
    return result;
  }
  markMutationResult(incoming, mutation, cache = this.cache) {
    const cacheWrites = [];
    const skipCache = mutation.cacheWriteBehavior === 0;
    let result = this.maybeHandleIncrementalResult(skipCache ? undefined : cache.diff({
      id: "ROOT_MUTATION",
      query: this.queryManager.getDocumentInfo(mutation.document).asQuery,
      variables: mutation.variables,
      optimistic: false,
      returnPartialData: true
    }).result, incoming, mutation.document);
    if (mutation.errorPolicy === "ignore") {
      result = { ...result, errors: [] };
    }
    if (graphQLResultHasError(result) && mutation.errorPolicy === "none") {
      return Promise.resolve(result);
    }
    const getResultWithDataState = () => ({
      ...result,
      dataState: this.hasNext ? "streaming" : "complete"
    });
    if (!skipCache && shouldWriteResult(result, mutation.errorPolicy)) {
      cacheWrites.push({
        result: result.data,
        dataId: "ROOT_MUTATION",
        query: mutation.document,
        variables: mutation.variables
      });
      const { updateQueries } = mutation;
      if (updateQueries) {
        this.queryManager.getObservableQueries("all").forEach((observableQuery) => {
          const queryName = observableQuery && observableQuery.queryName;
          if (!queryName || !Object.hasOwnProperty.call(updateQueries, queryName)) {
            return;
          }
          const updater = updateQueries[queryName];
          const { query: document2, variables } = observableQuery;
          const { result: currentQueryResult, complete } = observableQuery.getCacheDiff({ optimistic: false });
          if (complete && currentQueryResult) {
            const nextQueryResult = updater(currentQueryResult, {
              mutationResult: getResultWithDataState(),
              queryName: document2 && getOperationName(document2) || undefined,
              queryVariables: variables
            });
            if (nextQueryResult) {
              cacheWrites.push({
                result: nextQueryResult,
                dataId: "ROOT_QUERY",
                query: document2,
                variables
              });
            }
          }
        });
      }
    }
    let refetchQueries = mutation.refetchQueries;
    if (typeof refetchQueries === "function") {
      refetchQueries = refetchQueries(getResultWithDataState());
    }
    if (cacheWrites.length > 0 || (refetchQueries || "").length > 0 || mutation.update || mutation.onQueryUpdated || mutation.removeOptimistic) {
      const results = [];
      this.queryManager.refetchQueries({
        updateCache: (cache2) => {
          if (!skipCache) {
            cacheWrites.forEach((write) => cache2.write(write));
          }
          const { update } = mutation;
          if (update) {
            if (!skipCache) {
              const diff = cache2.diff({
                id: "ROOT_MUTATION",
                query: this.queryManager.getDocumentInfo(mutation.document).asQuery,
                variables: mutation.variables,
                optimistic: false,
                returnPartialData: true
              });
              if (diff.complete) {
                result = {
                  ...result,
                  data: diff.result
                };
              }
            }
            if (!this.hasNext) {
              update(cache2, result, {
                context: mutation.context,
                variables: mutation.variables
              });
            }
          }
          if (!skipCache && !mutation.keepRootFields && !this.hasNext) {
            cache2.modify({
              id: "ROOT_MUTATION",
              fields(value, { fieldName, DELETE: DELETE2 }) {
                return fieldName === "__typename" ? value : DELETE2;
              }
            });
          }
        },
        include: refetchQueries,
        optimistic: false,
        removeOptimistic: mutation.removeOptimistic,
        onQueryUpdated: mutation.onQueryUpdated || null
      }).forEach((result2) => results.push(result2));
      if (mutation.awaitRefetchQueries || mutation.onQueryUpdated) {
        return Promise.all(results).then(() => result);
      }
    }
    return Promise.resolve(result);
  }
  markMutationOptimistic(optimisticResponse, mutation) {
    const data = typeof optimisticResponse === "function" ? optimisticResponse(mutation.variables, { IGNORE }) : optimisticResponse;
    if (data === IGNORE) {
      return false;
    }
    this.cache.recordOptimisticTransaction((cache) => {
      try {
        this.markMutationResult({ data }, mutation, cache);
      } catch (error) {
        invariant2.error(error);
      }
    }, this.id);
    return true;
  }
  markSubscriptionResult(result, { document: document2, variables, errorPolicy, cacheWriteBehavior }) {
    if (cacheWriteBehavior !== 0) {
      if (shouldWriteResult(result, errorPolicy)) {
        this.cache.write({
          query: document2,
          result: result.data,
          dataId: "ROOT_SUBSCRIPTION",
          variables
        });
      }
      this.queryManager.broadcastQueries();
    }
  }
}
function shouldWriteResult(result, errorPolicy = "none") {
  const ignoreErrors = errorPolicy === "ignore" || errorPolicy === "all";
  let writeWithErrors = !graphQLResultHasError(result);
  if (!writeWithErrors && ignoreErrors && result.data) {
    writeWithErrors = true;
  }
  return writeWithErrors;
}

// node_modules/@apollo/client/core/QueryManager.js
class QueryManager {
  defaultOptions;
  client;
  clientOptions;
  assumeImmutableResults;
  documentTransform;
  ssrMode;
  defaultContext;
  dataMasking;
  incrementalHandler;
  localState;
  queryDeduplication;
  prioritizeCacheValues = false;
  onBroadcast;
  mutationStore;
  obsQueries = new Set;
  fetchCancelFns = new Map;
  constructor(options) {
    const defaultDocumentTransform = new DocumentTransform((document2) => this.cache.transformDocument(document2), { cache: false });
    this.client = options.client;
    this.defaultOptions = options.defaultOptions;
    this.queryDeduplication = options.queryDeduplication;
    this.clientOptions = options.clientOptions;
    this.ssrMode = options.ssrMode;
    this.assumeImmutableResults = options.assumeImmutableResults;
    this.dataMasking = options.dataMasking;
    this.localState = options.localState;
    this.incrementalHandler = options.incrementalHandler;
    const documentTransform = options.documentTransform;
    this.documentTransform = documentTransform ? defaultDocumentTransform.concat(documentTransform).concat(defaultDocumentTransform) : defaultDocumentTransform;
    this.defaultContext = options.defaultContext || {};
    if (this.onBroadcast = options.onBroadcast) {
      this.mutationStore = {};
    }
  }
  get link() {
    return this.client.link;
  }
  get cache() {
    return this.client.cache;
  }
  stop() {
    this.obsQueries.forEach((oq) => oq.stop());
    this.cancelPendingFetches(newInvariantError(83));
  }
  cancelPendingFetches(error) {
    this.fetchCancelFns.forEach((cancel) => cancel(error));
    this.fetchCancelFns.clear();
  }
  async mutate({ mutation, variables, optimisticResponse, updateQueries, refetchQueries = [], awaitRefetchQueries = false, update: updateWithProxyFn, onQueryUpdated, fetchPolicy, errorPolicy, keepRootFields, context: context2 }) {
    const queryInfo = new QueryInfo(this);
    mutation = this.cache.transformForLink(this.transform(mutation));
    const { hasClientExports } = this.getDocumentInfo(mutation);
    variables = this.getVariables(mutation, variables);
    if (hasClientExports) {
      if (__DEV__) {
        invariant2(this.localState, 84, getOperationName(mutation, "(anonymous)"));
      }
      variables = await this.localState.getExportedVariables({
        client: this.client,
        document: mutation,
        variables,
        context: context2
      });
    }
    const mutationStoreValue = this.mutationStore && (this.mutationStore[queryInfo.id] = {
      mutation,
      variables,
      loading: true,
      error: null
    });
    const isOptimistic = optimisticResponse && queryInfo.markMutationOptimistic(optimisticResponse, {
      document: mutation,
      variables,
      cacheWriteBehavior: fetchPolicy === "no-cache" ? 0 : 2,
      errorPolicy,
      context: context2,
      updateQueries,
      update: updateWithProxyFn,
      keepRootFields
    });
    this.broadcastQueries();
    return new Promise((resolve, reject) => {
      const cause = {};
      return this.getObservableFromLink(mutation, {
        ...context2,
        optimisticResponse: isOptimistic ? optimisticResponse : undefined
      }, variables, {}, false).observable.pipe(validateDidEmitValue(), mergeMap((result) => {
        const storeResult = { ...result };
        return from(queryInfo.markMutationResult(storeResult, {
          document: mutation,
          variables,
          cacheWriteBehavior: fetchPolicy === "no-cache" ? 0 : 2,
          errorPolicy,
          context: context2,
          update: updateWithProxyFn,
          updateQueries,
          awaitRefetchQueries,
          refetchQueries,
          removeOptimistic: isOptimistic ? queryInfo.id : undefined,
          onQueryUpdated,
          keepRootFields
        }));
      })).pipe(map((storeResult) => {
        const hasErrors = graphQLResultHasError(storeResult);
        if (hasErrors && errorPolicy === "none") {
          throw new CombinedGraphQLErrors(storeResult);
        }
        if (mutationStoreValue) {
          mutationStoreValue.loading = false;
          mutationStoreValue.error = null;
        }
        return storeResult;
      })).subscribe({
        next: (storeResult) => {
          this.broadcastQueries();
          if (!queryInfo.hasNext) {
            const result = {
              data: this.maskOperation({
                document: mutation,
                data: storeResult.data,
                fetchPolicy,
                cause
              })
            };
            if (graphQLResultHasError(storeResult)) {
              result.error = new CombinedGraphQLErrors(storeResult);
            }
            if (Object.keys(storeResult.extensions || {}).length) {
              result.extensions = storeResult.extensions;
            }
            resolve(result);
          }
        },
        error: (error) => {
          if (mutationStoreValue) {
            mutationStoreValue.loading = false;
            mutationStoreValue.error = error;
          }
          if (isOptimistic) {
            this.cache.removeOptimistic(queryInfo.id);
          }
          this.broadcastQueries();
          if (errorPolicy === "ignore") {
            return resolve({ data: undefined });
          }
          if (errorPolicy === "all") {
            return resolve({ data: undefined, error });
          }
          reject(error);
        }
      });
    });
  }
  fetchQuery(options, networkStatus) {
    checkDocument(options.query, OperationTypeNode.QUERY);
    return (async () => lastValueFrom(this.fetchObservableWithInfo(options, {
      networkStatus
    }).observable.pipe(filterMap((value) => {
      switch (value.kind) {
        case "E":
          throw value.error;
        case "N": {
          if (value.source !== "newNetworkStatus")
            return toQueryResult(value.value);
        }
      }
    })), {
      defaultValue: { data: undefined }
    }))();
  }
  transform(document2) {
    return this.documentTransform.transformDocument(document2);
  }
  transformCache = new AutoCleanedWeakCache(cacheSizes["queryManager.getDocumentInfo"] || 2000);
  getDocumentInfo(document2) {
    const { transformCache } = this;
    if (!transformCache.has(document2)) {
      const operationDefinition = getOperationDefinition(document2);
      const cacheEntry = {
        hasClientExports: hasDirectives(["client", "export"], document2, true),
        hasForcedResolvers: hasForcedResolvers(document2),
        hasNonreactiveDirective: hasDirectives(["nonreactive"], document2),
        hasIncrementalDirective: hasDirectives(["defer"], document2),
        nonReactiveQuery: addNonReactiveToNamedFragments(document2),
        clientQuery: hasDirectives(["client"], document2) ? document2 : null,
        serverQuery: removeDirectivesFromDocument([
          { name: "client", remove: true },
          { name: "connection" },
          { name: "nonreactive" },
          { name: "unmask" }
        ], document2),
        operationType: operationDefinition?.operation,
        defaultVars: getDefaultValues(operationDefinition),
        asQuery: {
          ...document2,
          definitions: document2.definitions.map((def) => {
            if (def.kind === "OperationDefinition" && def.operation !== "query") {
              return { ...def, operation: "query" };
            }
            return def;
          })
        }
      };
      transformCache.set(document2, cacheEntry);
    }
    const entry = transformCache.get(document2);
    if (entry.violation) {
      throw entry.violation;
    }
    return entry;
  }
  getVariables(document2, variables) {
    const defaultVars = this.getDocumentInfo(document2).defaultVars;
    const varsWithDefaults = Object.entries(variables ?? {}).map(([key, value]) => [key, value === undefined ? defaultVars[key] : value]);
    return {
      ...defaultVars,
      ...Object.fromEntries(varsWithDefaults)
    };
  }
  watchQuery(options) {
    checkDocument(options.query, OperationTypeNode.QUERY);
    const query = this.transform(options.query);
    options = {
      ...options,
      variables: this.getVariables(query, options.variables)
    };
    if (typeof options.notifyOnNetworkStatusChange === "undefined") {
      options.notifyOnNetworkStatusChange = true;
    }
    const observable2 = new ObservableQuery({
      queryManager: this,
      options,
      transformedQuery: query
    });
    return observable2;
  }
  query(options) {
    const query = this.transform(options.query);
    return this.fetchQuery({
      ...options,
      query
    }).then((value) => ({
      ...value,
      data: this.maskOperation({
        document: query,
        data: value?.data,
        fetchPolicy: options.fetchPolicy
      })
    }));
  }
  requestIdCounter = 1;
  generateRequestId() {
    return this.requestIdCounter++;
  }
  clearStore(options = {
    discardWatches: true
  }) {
    this.cancelPendingFetches(newInvariantError(85));
    this.obsQueries.forEach((observableQuery) => {
      observableQuery.reset();
    });
    if (this.mutationStore) {
      this.mutationStore = {};
    }
    return this.cache.reset(options);
  }
  getObservableQueries(include = "active") {
    const queries = new Set;
    const queryNames = new Map;
    const queryNamesAndQueryStrings = new Map;
    const legacyQueryOptions = new Set;
    if (Array.isArray(include)) {
      include.forEach((desc) => {
        if (typeof desc === "string") {
          queryNames.set(desc, desc);
          queryNamesAndQueryStrings.set(desc, false);
        } else if (isDocumentNode(desc)) {
          const queryString = print2(this.transform(desc));
          queryNames.set(queryString, getOperationName(desc));
          queryNamesAndQueryStrings.set(queryString, false);
        } else if (isNonNullObject(desc) && desc.query) {
          legacyQueryOptions.add(desc);
        }
      });
    }
    this.obsQueries.forEach((oq) => {
      const document2 = print2(this.transform(oq.options.query));
      if (include === "all") {
        queries.add(oq);
        return;
      }
      const { queryName, options: { fetchPolicy } } = oq;
      if (include === "active" && fetchPolicy === "standby") {
        return;
      }
      if (include === "active" || queryName && queryNamesAndQueryStrings.has(queryName) || document2 && queryNamesAndQueryStrings.has(document2)) {
        queries.add(oq);
        if (queryName)
          queryNamesAndQueryStrings.set(queryName, true);
        if (document2)
          queryNamesAndQueryStrings.set(document2, true);
      }
    });
    if (legacyQueryOptions.size) {
      legacyQueryOptions.forEach((options) => {
        const oq = new ObservableQuery({
          queryManager: this,
          options: {
            ...options,
            fetchPolicy: "network-only"
          }
        });
        queries.add(oq);
      });
    }
    if (__DEV__ && queryNamesAndQueryStrings.size) {
      queryNamesAndQueryStrings.forEach((included, nameOrQueryString) => {
        if (!included) {
          const queryName = queryNames.get(nameOrQueryString);
          if (queryName) {
            __DEV__ && invariant2.warn(86, queryName);
          } else {
            __DEV__ && invariant2.warn(87);
          }
        }
      });
    }
    return queries;
  }
  refetchObservableQueries(includeStandby = false) {
    const observableQueryPromises = [];
    this.getObservableQueries(includeStandby ? "all" : "active").forEach((observableQuery) => {
      const { fetchPolicy } = observableQuery.options;
      if ((includeStandby || fetchPolicy !== "standby") && fetchPolicy !== "cache-only") {
        observableQueryPromises.push(observableQuery.refetch());
      }
    });
    this.broadcastQueries();
    return Promise.all(observableQueryPromises);
  }
  startGraphQLSubscription(options) {
    let { query, variables } = options;
    const { fetchPolicy, errorPolicy = "none", context: context2 = {}, extensions = {} } = options;
    checkDocument(query, OperationTypeNode.SUBSCRIPTION);
    query = this.transform(query);
    variables = this.getVariables(query, variables);
    let restart;
    if (__DEV__) {
      invariant2(!this.getDocumentInfo(query).hasClientExports || this.localState, 88, getOperationName(query, "(anonymous)"));
    }
    const observable2 = (this.getDocumentInfo(query).hasClientExports ? from(this.localState.getExportedVariables({
      client: this.client,
      document: query,
      variables,
      context: context2
    })) : of(variables)).pipe(mergeMap((variables2) => {
      const { observable: observable3, restart: res } = this.getObservableFromLink(query, context2, variables2, extensions);
      const queryInfo = new QueryInfo(this);
      restart = res;
      return observable3.pipe(map((rawResult) => {
        queryInfo.markSubscriptionResult(rawResult, {
          document: query,
          variables: variables2,
          errorPolicy,
          cacheWriteBehavior: fetchPolicy === "no-cache" ? 0 : 2
        });
        const result = {
          data: rawResult.data ?? undefined
        };
        if (graphQLResultHasError(rawResult)) {
          result.error = new CombinedGraphQLErrors(rawResult);
        } else if (graphQLResultHasProtocolErrors(rawResult)) {
          result.error = rawResult.extensions[PROTOCOL_ERRORS_SYMBOL];
          delete rawResult.extensions[PROTOCOL_ERRORS_SYMBOL];
        }
        if (rawResult.extensions && Object.keys(rawResult.extensions).length) {
          result.extensions = rawResult.extensions;
        }
        if (result.error && errorPolicy === "none") {
          result.data = undefined;
        }
        if (errorPolicy === "ignore") {
          delete result.error;
        }
        return result;
      }), catchError((error) => {
        if (errorPolicy === "ignore") {
          return of({
            data: undefined
          });
        }
        return of({ data: undefined, error });
      }), filter((result) => !!(result.data || result.error)));
    }));
    return Object.assign(observable2, { restart: () => restart?.() });
  }
  broadcastQueries() {
    if (this.onBroadcast)
      this.onBroadcast();
    this.obsQueries.forEach((observableQuery) => observableQuery.notify());
  }
  inFlightLinkObservables = new Trie(false);
  getObservableFromLink(query, context2, variables, extensions, deduplication = context2?.queryDeduplication ?? this.queryDeduplication) {
    let entry = {};
    const { serverQuery, clientQuery, operationType, hasIncrementalDirective } = this.getDocumentInfo(query);
    const operationName = getOperationName(query);
    const executeContext = {
      client: this.client
    };
    if (serverQuery) {
      const { inFlightLinkObservables, link } = this;
      try {
        let withRestart = function(source) {
          return new Observable((observer) => {
            function subscribe() {
              return source.subscribe({
                next: observer.next.bind(observer),
                complete: observer.complete.bind(observer),
                error: observer.error.bind(observer)
              });
            }
            let subscription = subscribe();
            entry.restart ||= () => {
              subscription.unsubscribe();
              subscription = subscribe();
            };
            return () => {
              subscription.unsubscribe();
              entry.restart = undefined;
            };
          });
        };
        const operation = this.incrementalHandler.prepareRequest({
          query: serverQuery,
          variables,
          context: {
            ...this.defaultContext,
            ...context2,
            queryDeduplication: deduplication
          },
          extensions
        });
        context2 = operation.context;
        if (deduplication) {
          const printedServerQuery = print2(serverQuery);
          const varJson = canonicalStringify(variables);
          entry = inFlightLinkObservables.lookup(printedServerQuery, varJson);
          if (!entry.observable) {
            entry.observable = execute(link, operation, executeContext).pipe(withRestart, finalize(() => {
              if (inFlightLinkObservables.peek(printedServerQuery, varJson) === entry) {
                inFlightLinkObservables.remove(printedServerQuery, varJson);
              }
            }), operationType === OperationTypeNode.SUBSCRIPTION ? share() : shareReplay({ refCount: true }));
          }
        } else {
          entry.observable = execute(link, operation, executeContext).pipe(withRestart);
        }
      } catch (error) {
        entry.observable = throwError(() => error);
      }
    } else {
      entry.observable = of({ data: {} });
    }
    if (clientQuery) {
      const { operation } = getOperationDefinition(query);
      if (__DEV__) {
        invariant2(this.localState, 89, operation[0].toUpperCase() + operation.slice(1), operationName ?? "(anonymous)");
      }
      invariant2(!hasIncrementalDirective, 90, operation[0].toUpperCase() + operation.slice(1), operationName ?? "(anonymous)");
      entry.observable = entry.observable.pipe(mergeMap((result) => {
        return from(this.localState.execute({
          client: this.client,
          document: clientQuery,
          remoteResult: result,
          context: context2,
          variables
        }));
      }));
    }
    return {
      restart: () => entry.restart?.(),
      observable: entry.observable.pipe(catchError((error) => {
        error = toErrorLike(error);
        registerLinkError(error);
        throw error;
      }))
    };
  }
  getResultsFromLink(options, { queryInfo, cacheWriteBehavior, observableQuery }) {
    const requestId = queryInfo.lastRequestId = this.generateRequestId();
    const { errorPolicy } = options;
    const linkDocument = this.cache.transformForLink(options.query);
    return this.getObservableFromLink(linkDocument, options.context, options.variables).observable.pipe(map((incoming) => {
      const result = queryInfo.markQueryResult(incoming, {
        ...options,
        document: linkDocument,
        cacheWriteBehavior
      });
      const hasErrors = graphQLResultHasError(result);
      if (hasErrors && errorPolicy === "none") {
        queryInfo.resetLastWrite();
        observableQuery?.["resetNotifications"]();
        throw new CombinedGraphQLErrors(result);
      }
      const aqr = {
        data: result.data,
        ...queryInfo.hasNext ? {
          loading: true,
          networkStatus: NetworkStatus.streaming,
          dataState: "streaming",
          partial: true
        } : {
          dataState: result.data ? "complete" : "empty",
          loading: false,
          networkStatus: NetworkStatus.ready,
          partial: !result.data
        }
      };
      if (hasErrors) {
        if (errorPolicy === "none") {
          aqr.data = undefined;
          aqr.dataState = "empty";
        }
        if (errorPolicy !== "ignore") {
          aqr.error = new CombinedGraphQLErrors(result);
          if (aqr.dataState !== "streaming") {
            aqr.networkStatus = NetworkStatus.error;
          }
        }
      }
      return aqr;
    }), catchError((error) => {
      if (requestId >= queryInfo.lastRequestId && errorPolicy === "none") {
        queryInfo.resetLastWrite();
        observableQuery?.["resetNotifications"]();
        throw error;
      }
      const aqr = {
        data: undefined,
        dataState: "empty",
        loading: false,
        networkStatus: NetworkStatus.ready,
        partial: true
      };
      if (errorPolicy !== "ignore") {
        aqr.error = error;
        aqr.networkStatus = NetworkStatus.error;
      }
      return of(aqr);
    }));
  }
  fetchObservableWithInfo(options, {
    networkStatus = NetworkStatus.loading,
    query = options.query,
    fetchQueryOperator = (x) => x,
    onCacheHit = () => {
    },
    observableQuery
  }) {
    const variables = this.getVariables(query, options.variables);
    const defaults = this.defaultOptions.watchQuery;
    let { fetchPolicy = defaults && defaults.fetchPolicy || "cache-first", errorPolicy = defaults && defaults.errorPolicy || "none", returnPartialData = false, notifyOnNetworkStatusChange = true, context: context2 = {} } = options;
    if (this.prioritizeCacheValues && (fetchPolicy === "network-only" || fetchPolicy === "cache-and-network")) {
      fetchPolicy = "cache-first";
    }
    const normalized = Object.assign({}, options, {
      query,
      variables,
      fetchPolicy,
      errorPolicy,
      returnPartialData,
      notifyOnNetworkStatusChange,
      context: context2
    });
    const queryInfo = new QueryInfo(this, observableQuery);
    const fromVariables = (variables2) => {
      normalized.variables = variables2;
      const cacheWriteBehavior = fetchPolicy === "no-cache" ? 0 : networkStatus === NetworkStatus.refetch && normalized.refetchWritePolicy !== "merge" ? 1 : 2;
      const observableWithInfo = this.fetchQueryByPolicy(normalized, { queryInfo, cacheWriteBehavior, onCacheHit, observableQuery });
      observableWithInfo.observable = observableWithInfo.observable.pipe(fetchQueryOperator);
      if (normalized.fetchPolicy !== "standby") {
        observableQuery?.["applyNextFetchPolicy"]("after-fetch", options);
      }
      return observableWithInfo;
    };
    const cleanupCancelFn = () => {
      this.fetchCancelFns.delete(queryInfo.id);
    };
    this.fetchCancelFns.set(queryInfo.id, (error) => {
      fetchCancelSubject.next({
        kind: "E",
        error,
        source: "network"
      });
    });
    const fetchCancelSubject = new Subject;
    let observable2, containsDataFromLink;
    if (this.getDocumentInfo(normalized.query).hasClientExports) {
      if (__DEV__) {
        invariant2(this.localState, 91, getOperationName(normalized.query, "(anonymous)"));
      }
      observable2 = from(this.localState.getExportedVariables({
        client: this.client,
        document: normalized.query,
        variables: normalized.variables,
        context: normalized.context
      })).pipe(mergeMap((variables2) => fromVariables(variables2).observable));
      containsDataFromLink = true;
    } else {
      const sourcesWithInfo = fromVariables(normalized.variables);
      containsDataFromLink = sourcesWithInfo.fromLink;
      observable2 = sourcesWithInfo.observable;
    }
    return {
      observable: new Observable((observer) => {
        observer.add(cleanupCancelFn);
        observable2.subscribe(observer);
        fetchCancelSubject.subscribe(observer);
      }).pipe(share()),
      fromLink: containsDataFromLink
    };
  }
  refetchQueries({ updateCache, include, optimistic = false, removeOptimistic = optimistic ? makeUniqueId("refetchQueries") : undefined, onQueryUpdated }) {
    const includedQueriesByOq = new Map;
    if (include) {
      this.getObservableQueries(include).forEach((oq) => {
        if (oq.options.fetchPolicy === "cache-only") {
          return;
        }
        const current = oq.getCurrentResult();
        includedQueriesByOq.set(oq, {
          oq,
          lastDiff: {
            result: current?.data,
            complete: !current?.partial
          }
        });
      });
    }
    const results = new Map;
    if (updateCache) {
      const handled = new Set;
      this.cache.batch({
        update: updateCache,
        optimistic: optimistic && removeOptimistic || false,
        removeOptimistic,
        onWatchUpdated(watch, diff, lastDiff) {
          const oq = watch.watcher;
          if (oq instanceof ObservableQuery && !handled.has(oq)) {
            handled.add(oq);
            if (onQueryUpdated) {
              includedQueriesByOq.delete(oq);
              let result = onQueryUpdated(oq, diff, lastDiff);
              if (result === true) {
                result = oq.refetch().retain();
              }
              if (result !== false) {
                results.set(oq, result);
              }
              return result;
            }
            if (onQueryUpdated !== null && oq.options.fetchPolicy !== "cache-only") {
              includedQueriesByOq.set(oq, { oq, lastDiff, diff });
            }
          }
        }
      });
    }
    if (includedQueriesByOq.size) {
      includedQueriesByOq.forEach(({ oq, lastDiff, diff }) => {
        let result;
        if (onQueryUpdated) {
          if (!diff) {
            diff = oq.getCacheDiff();
          }
          result = onQueryUpdated(oq, diff, lastDiff);
        }
        if (!onQueryUpdated || result === true) {
          result = oq.refetch().retain();
        }
        if (result !== false) {
          results.set(oq, result);
        }
      });
    }
    if (removeOptimistic) {
      this.cache.removeOptimistic(removeOptimistic);
    }
    return results;
  }
  noCacheWarningsByCause = new WeakSet;
  maskOperation(options) {
    const { document: document2, data } = options;
    if (__DEV__) {
      const { fetchPolicy, cause = {} } = options;
      const operationType = getOperationDefinition(document2)?.operation;
      if (this.dataMasking && fetchPolicy === "no-cache" && !isFullyUnmaskedOperation(document2) && !this.noCacheWarningsByCause.has(cause)) {
        this.noCacheWarningsByCause.add(cause);
        __DEV__ && invariant2.warn(92, getOperationName(document2, `Unnamed ${operationType ?? "operation"}`));
      }
    }
    return this.dataMasking ? maskOperation(data, document2, this.cache) : data;
  }
  maskFragment(options) {
    const { data, fragment, fragmentName } = options;
    return this.dataMasking ? maskFragment(data, fragment, this.cache, fragmentName) : data;
  }
  fetchQueryByPolicy({ query, variables, fetchPolicy, errorPolicy, returnPartialData, context: context2 }, { cacheWriteBehavior, onCacheHit, queryInfo, observableQuery }) {
    const readCache = () => this.cache.diff({
      query,
      variables,
      returnPartialData: true,
      optimistic: true
    });
    const resultsFromCache = (diff, networkStatus) => {
      const data = diff.result;
      if (__DEV__ && !returnPartialData && data !== null) {
        logMissingFieldErrors(diff.missing);
      }
      const toResult = (data2) => {
        if (!diff.complete && !returnPartialData) {
          data2 = undefined;
        }
        return {
          data: data2,
          dataState: diff.complete ? "complete" : data2 ? "partial" : "empty",
          loading: isNetworkRequestInFlight(networkStatus),
          networkStatus,
          partial: !diff.complete
        };
      };
      const fromData = (data2) => {
        return of({
          kind: "N",
          value: toResult(data2),
          source: "cache"
        });
      };
      if ((diff.complete || returnPartialData) && this.getDocumentInfo(query).hasForcedResolvers) {
        if (__DEV__) {
          invariant2(this.localState, 93, getOperationName(query, "(anonymous)"));
        }
        onCacheHit();
        return from(this.localState.execute({
          client: this.client,
          document: query,
          remoteResult: data ? { data } : undefined,
          context: context2,
          variables,
          onlyRunForcedResolvers: true,
          returnPartialData: true
        }).then((resolved) => ({
          kind: "N",
          value: toResult(resolved.data || undefined),
          source: "cache"
        })));
      }
      if (errorPolicy === "none" && networkStatus === NetworkStatus.refetch && diff.missing) {
        return fromData(undefined);
      }
      return fromData(data || undefined);
    };
    const resultsFromLink = () => this.getResultsFromLink({
      query,
      variables,
      context: context2,
      fetchPolicy,
      errorPolicy
    }, {
      cacheWriteBehavior,
      queryInfo,
      observableQuery
    }).pipe(validateDidEmitValue(), materialize(), map((result) => ({
      ...result,
      source: "network"
    })));
    switch (fetchPolicy) {
      default:
      case "cache-first": {
        const diff = readCache();
        if (diff.complete) {
          return {
            fromLink: false,
            observable: resultsFromCache(diff, NetworkStatus.ready)
          };
        }
        if (returnPartialData) {
          return {
            fromLink: true,
            observable: concat(resultsFromCache(diff, NetworkStatus.loading), resultsFromLink())
          };
        }
        return { fromLink: true, observable: resultsFromLink() };
      }
      case "cache-and-network": {
        const diff = readCache();
        if (diff.complete || returnPartialData) {
          return {
            fromLink: true,
            observable: concat(resultsFromCache(diff, NetworkStatus.loading), resultsFromLink())
          };
        }
        return { fromLink: true, observable: resultsFromLink() };
      }
      case "cache-only":
        return {
          fromLink: false,
          observable: concat(resultsFromCache(readCache(), NetworkStatus.ready))
        };
      case "network-only":
        return { fromLink: true, observable: resultsFromLink() };
      case "no-cache":
        return { fromLink: true, observable: resultsFromLink() };
      case "standby":
        return { fromLink: false, observable: EMPTY };
    }
  }
}
function validateDidEmitValue() {
  let didEmitValue = false;
  return tap({
    next() {
      didEmitValue = true;
    },
    complete() {
      invariant2(didEmitValue, 94);
    }
  });
}
function isFullyUnmaskedOperation(document2) {
  let isUnmasked = true;
  visit(document2, {
    FragmentSpread: (node) => {
      isUnmasked = !!node.directives && node.directives.some((directive) => directive.name.value === "unmask");
      if (!isUnmasked) {
        return BREAK;
      }
    }
  });
  return isUnmasked;
}
function addNonReactiveToNamedFragments(document2) {
  return visit(document2, {
    FragmentSpread: (node) => {
      if (node.directives?.some((directive) => directive.name.value === "unmask")) {
        return;
      }
      return {
        ...node,
        directives: [
          ...node.directives || [],
          {
            kind: Kind.DIRECTIVE,
            name: { kind: Kind.NAME, value: "nonreactive" }
          }
        ]
      };
    }
  });
}

// node_modules/@apollo/client/core/ApolloClient.js
var hasSuggestedDevtools = false;

class ApolloClient {
  link;
  cache;
  disableNetworkFetches;
  set prioritizeCacheValues(value) {
    this.queryManager.prioritizeCacheValues = value;
  }
  get prioritizeCacheValues() {
    return this.queryManager.prioritizeCacheValues;
  }
  version;
  queryDeduplication;
  defaultOptions;
  devtoolsConfig;
  queryManager;
  devToolsHookCb;
  resetStoreCallbacks = [];
  clearStoreCallbacks = [];
  constructor(options) {
    if (__DEV__) {
      invariant2(options.cache, 65);
      invariant2(options.link, 66);
    }
    const { cache, documentTransform, ssrMode = false, ssrForceFetchDelay = 0, queryDeduplication = true, defaultOptions, defaultContext, assumeImmutableResults = cache.assumeImmutableResults, localState, devtools, dataMasking, link, incrementalHandler = new NotImplementedHandler } = options;
    this.link = link;
    this.cache = cache;
    this.queryDeduplication = queryDeduplication;
    this.defaultOptions = defaultOptions || {};
    this.devtoolsConfig = {
      ...devtools,
      enabled: devtools?.enabled ?? __DEV__
    };
    this.watchQuery = this.watchQuery.bind(this);
    this.query = this.query.bind(this);
    this.mutate = this.mutate.bind(this);
    this.watchFragment = this.watchFragment.bind(this);
    this.resetStore = this.resetStore.bind(this);
    this.reFetchObservableQueries = this.refetchObservableQueries = this.refetchObservableQueries.bind(this);
    this.version = version;
    this.queryManager = new QueryManager({
      client: this,
      defaultOptions: this.defaultOptions,
      defaultContext,
      documentTransform,
      queryDeduplication,
      ssrMode,
      dataMasking: !!dataMasking,
      clientOptions: options,
      incrementalHandler,
      assumeImmutableResults,
      onBroadcast: this.devtoolsConfig.enabled ? () => {
        if (this.devToolsHookCb) {
          this.devToolsHookCb();
        }
      } : undefined,
      localState
    });
    this.prioritizeCacheValues = ssrMode || ssrForceFetchDelay > 0;
    if (ssrForceFetchDelay) {
      setTimeout(() => {
        this.prioritizeCacheValues = false;
      }, ssrForceFetchDelay);
    }
    if (this.devtoolsConfig.enabled)
      this.connectToDevTools();
  }
  connectToDevTools() {
    if (typeof window === "undefined") {
      return;
    }
    const windowWithDevTools = window;
    const devtoolsSymbol = Symbol.for("apollo.devtools");
    (windowWithDevTools[devtoolsSymbol] = windowWithDevTools[devtoolsSymbol] || []).push(this);
    windowWithDevTools.__APOLLO_CLIENT__ = this;
    if (!hasSuggestedDevtools && __DEV__) {
      hasSuggestedDevtools = true;
      if (window.document && window.top === window.self && /^(https?|file):$/.test(window.location.protocol)) {
        setTimeout(() => {
          if (!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__) {
            const nav = window.navigator;
            const ua = nav && nav.userAgent;
            let url;
            if (typeof ua === "string") {
              if (ua.indexOf("Chrome/") > -1) {
                url = "https://chrome.google.com/webstore/detail/" + "apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm";
              } else if (ua.indexOf("Firefox/") > -1) {
                url = "https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/";
              }
            }
            if (url) {
              __DEV__ && invariant2.log("Download the Apollo DevTools for a better development " + "experience: %s", url);
            }
          }
        }, 1e4);
      }
    }
  }
  get documentTransform() {
    return this.queryManager.documentTransform;
  }
  get localState() {
    return this.queryManager.localState;
  }
  set localState(localState) {
    this.queryManager.localState = localState;
  }
  stop() {
    this.queryManager.stop();
  }
  watchQuery(options) {
    if (this.defaultOptions.watchQuery) {
      options = mergeOptions(this.defaultOptions.watchQuery, options);
    }
    return this.queryManager.watchQuery(options);
  }
  query(options) {
    if (this.defaultOptions.query) {
      options = mergeOptions(this.defaultOptions.query, options);
    }
    if (__DEV__) {
      invariant2(options.fetchPolicy !== "cache-and-network", 67);
      invariant2(options.fetchPolicy !== "standby", 68);
      invariant2(options.query, 69);
      invariant2(options.query.kind === "Document", 70);
      invariant2(!options.returnPartialData, 71);
      invariant2(!options.pollInterval, 72);
      invariant2(!options.notifyOnNetworkStatusChange, 73);
    }
    return this.queryManager.query(options);
  }
  mutate(options) {
    const optionsWithDefaults = mergeOptions(compact({
      fetchPolicy: "network-only",
      errorPolicy: "none"
    }, this.defaultOptions.mutate), options);
    if (__DEV__) {
      invariant2(optionsWithDefaults.mutation, 74);
      invariant2(optionsWithDefaults.fetchPolicy === "network-only" || optionsWithDefaults.fetchPolicy === "no-cache", 75);
    }
    checkDocument(optionsWithDefaults.mutation, OperationTypeNode.MUTATION);
    return this.queryManager.mutate(optionsWithDefaults);
  }
  subscribe(options) {
    const cause = {};
    const observable2 = this.queryManager.startGraphQLSubscription(options);
    const mapped = observable2.pipe(map((result) => ({
      ...result,
      data: this.queryManager.maskOperation({
        document: options.query,
        data: result.data,
        fetchPolicy: options.fetchPolicy,
        cause
      })
    })));
    return Object.assign(mapped, { restart: observable2.restart });
  }
  readQuery(options, optimistic = false) {
    return this.cache.readQuery({ ...options, query: this.transform(options.query) }, optimistic);
  }
  watchFragment(options) {
    const dataMasking = this.queryManager.dataMasking;
    return this.cache.watchFragment({
      ...options,
      fragment: this.transform(options.fragment, dataMasking)
    }).pipe(map((result) => {
      if (__DEV__) {
        if (dataMasking) {
          const data = this.queryManager.maskFragment({
            ...options,
            data: result.data
          });
          return { ...result, data };
        }
      }
      return result;
    }));
  }
  readFragment(options, optimistic = false) {
    return this.cache.readFragment({ ...options, fragment: this.transform(options.fragment) }, optimistic);
  }
  writeQuery(options) {
    const ref = this.cache.writeQuery(options);
    if (options.broadcast !== false) {
      this.queryManager.broadcastQueries();
    }
    return ref;
  }
  writeFragment(options) {
    const ref = this.cache.writeFragment(options);
    if (options.broadcast !== false) {
      this.queryManager.broadcastQueries();
    }
    return ref;
  }
  __actionHookForDevTools(cb) {
    this.devToolsHookCb = cb;
  }
  __requestRaw(request) {
    return execute(this.link, request, { client: this });
  }
  resetStore() {
    return Promise.resolve().then(() => this.queryManager.clearStore({
      discardWatches: false
    })).then(() => Promise.all(this.resetStoreCallbacks.map((fn) => fn()))).then(() => this.refetchObservableQueries());
  }
  clearStore() {
    return Promise.resolve().then(() => this.queryManager.clearStore({
      discardWatches: true
    })).then(() => Promise.all(this.clearStoreCallbacks.map((fn) => fn())));
  }
  onResetStore(cb) {
    this.resetStoreCallbacks.push(cb);
    return () => {
      this.resetStoreCallbacks = this.resetStoreCallbacks.filter((c) => c !== cb);
    };
  }
  onClearStore(cb) {
    this.clearStoreCallbacks.push(cb);
    return () => {
      this.clearStoreCallbacks = this.clearStoreCallbacks.filter((c) => c !== cb);
    };
  }
  reFetchObservableQueries;
  refetchObservableQueries(includeStandby) {
    return this.queryManager.refetchObservableQueries(includeStandby);
  }
  refetchQueries(options) {
    const map2 = this.queryManager.refetchQueries(options);
    const queries = [];
    const results = [];
    map2.forEach((result2, obsQuery) => {
      queries.push(obsQuery);
      results.push(result2);
    });
    const result = Promise.all(results);
    result.queries = queries;
    result.results = results;
    result.catch((error) => {
      __DEV__ && invariant2.debug(76, error);
    });
    return result;
  }
  getObservableQueries(include = "active") {
    return this.queryManager.getObservableQueries(include);
  }
  extract(optimistic) {
    return this.cache.extract(optimistic);
  }
  restore(serializedState) {
    return this.cache.restore(serializedState);
  }
  setLink(newLink) {
    this.link = newLink;
  }
  get defaultContext() {
    return this.queryManager.defaultContext;
  }
  maskedFragmentTransform = new DocumentTransform(removeMaskedFragmentSpreads);
  transform(document2, dataMasking = false) {
    const transformed = this.queryManager.transform(document2);
    return dataMasking ? this.maskedFragmentTransform.transformDocument(transformed) : transformed;
  }
  getMemoryInternals;
}
if (__DEV__) {
  ApolloClient.prototype.getMemoryInternals = getApolloClientMemoryInternals;
}
// node_modules/@apollo/client/link/http/parseAndCheckHttpResponse.js
var { hasOwnProperty: hasOwnProperty6 } = Object.prototype;
function isApolloPayloadResult(value) {
  return isNonNullObject(value) && "payload" in value;
}
async function* consumeMultipartBody(response) {
  const decoder = new TextDecoder("utf-8");
  const contentType = response.headers?.get("content-type");
  const match = contentType?.match(/;\s*boundary=(?:'([^']+)'|"([^"]+)"|([^"'].+?))\s*(?:;|$)/i);
  const boundary = "\r\n--" + (match?.findLast((val) => !!val) || "-");
  let buffer = "";
  invariant2(response.body && typeof response.body.getReader === "function", 60);
  const stream = response.body;
  const reader = stream.getReader();
  let done = false;
  let encounteredBoundary = false;
  let value;
  const passedFinalBoundary = () => encounteredBoundary && buffer[0] == "-" && buffer[1] == "-";
  try {
    while (!done) {
      ({ value, done } = await reader.read());
      const chunk = typeof value === "string" ? value : decoder.decode(value);
      const searchFrom = buffer.length - boundary.length + 1;
      buffer += chunk;
      let bi = buffer.indexOf(boundary, searchFrom);
      while (bi > -1 && !passedFinalBoundary()) {
        encounteredBoundary = true;
        let message;
        [message, buffer] = [
          buffer.slice(0, bi),
          buffer.slice(bi + boundary.length)
        ];
        const i = message.indexOf("\r\n\r\n");
        const headers = parseHeaders(message.slice(0, i));
        const contentType2 = headers["content-type"];
        if (contentType2 && contentType2.toLowerCase().indexOf("application/json") === -1) {
          throw new Error("Unsupported patch content type: application/json is required.");
        }
        const body = message.slice(i);
        if (body) {
          yield body;
        }
        bi = buffer.indexOf(boundary);
      }
      if (passedFinalBoundary()) {
        return;
      }
    }
    throw new Error("premature end of multipart body");
  } finally {
    reader.cancel();
  }
}
async function readMultipartBody(response, nextValue) {
  for await (const body of consumeMultipartBody(response)) {
    const result = parseJsonEncoding(response, body);
    if (Object.keys(result).length == 0)
      continue;
    if (isApolloPayloadResult(result)) {
      if (Object.keys(result).length === 1 && result.payload === null) {
        return;
      }
      let next = { ...result.payload };
      if ("errors" in result) {
        next.extensions = {
          ...next.extensions,
          [PROTOCOL_ERRORS_SYMBOL]: new CombinedProtocolErrors(result.errors ?? [])
        };
      }
      nextValue(next);
    } else {
      nextValue(result);
    }
  }
}
function parseHeaders(headerText) {
  const headersInit = {};
  headerText.split("\n").forEach((line) => {
    const i = line.indexOf(":");
    if (i > -1) {
      const name = line.slice(0, i).trim().toLowerCase();
      const value = line.slice(i + 1).trim();
      headersInit[name] = value;
    }
  });
  return headersInit;
}
function parseJsonEncoding(response, bodyText) {
  if (response.status >= 300) {
    throw new ServerError(`Response not successful: Received status code ${response.status}`, { response, bodyText });
  }
  try {
    return JSON.parse(bodyText);
  } catch (err) {
    throw new ServerParseError(err, { response, bodyText });
  }
}
function parseGraphQLResponseJsonEncoding(response, bodyText) {
  try {
    return JSON.parse(bodyText);
  } catch (err) {
    throw new ServerParseError(err, { response, bodyText });
  }
}
function parseResponse(response, bodyText) {
  const contentType = response.headers.get("content-type");
  if (contentType?.includes("application/graphql-response+json")) {
    return parseGraphQLResponseJsonEncoding(response, bodyText);
  }
  return parseJsonEncoding(response, bodyText);
}
function parseAndCheckHttpResponse(operations) {
  return (response) => response.text().then((bodyText) => {
    const result = parseResponse(response, bodyText);
    if (!Array.isArray(result) && !hasOwnProperty6.call(result, "data") && !hasOwnProperty6.call(result, "errors")) {
      throw new ServerError(`Server response was malformed for query '${Array.isArray(operations) ? operations.map((op) => op.operationName) : operations.operationName}'.`, { response, bodyText });
    }
    return result;
  });
}

// node_modules/@apollo/client/link/http/selectHttpOptionsAndBody.js
var defaultHttpOptions = {
  includeQuery: true,
  includeExtensions: true,
  preserveHeaderCase: false
};
var defaultHeaders = {
  accept: "application/graphql-response+json,application/json;q=0.9",
  "content-type": "application/json"
};
var defaultOptions = {
  method: "POST"
};
var fallbackHttpConfig = {
  http: defaultHttpOptions,
  headers: defaultHeaders,
  options: defaultOptions
};
var defaultPrinter = (ast, printer) => printer(ast);
function selectHttpOptionsAndBodyInternal(operation, printer, ...configs) {
  let options = {};
  let http = {};
  configs.forEach((config2) => {
    options = {
      ...options,
      ...config2.options,
      headers: {
        ...options.headers,
        ...config2.headers
      }
    };
    if (config2.credentials) {
      options.credentials = config2.credentials;
    }
    options.headers.accept = (config2.http?.accept || []).concat(options.headers.accept).join(",");
    http = {
      ...http,
      ...config2.http
    };
  });
  options.headers = removeDuplicateHeaders(options.headers, http.preserveHeaderCase);
  const { operationName, extensions, variables, query } = operation;
  const body = { operationName, variables };
  if (http.includeExtensions && Object.keys(extensions || {}).length)
    body.extensions = extensions;
  if (http.includeQuery)
    body.query = printer(query, print2);
  return {
    options,
    body
  };
}
function removeDuplicateHeaders(headers, preserveHeaderCase) {
  if (!preserveHeaderCase) {
    const normalizedHeaders2 = {};
    Object.keys(Object(headers)).forEach((name) => {
      normalizedHeaders2[name.toLowerCase()] = headers[name];
    });
    return normalizedHeaders2;
  }
  const headerData = {};
  Object.keys(Object(headers)).forEach((name) => {
    headerData[name.toLowerCase()] = {
      originalName: name,
      value: headers[name]
    };
  });
  const normalizedHeaders = {};
  Object.keys(headerData).forEach((name) => {
    normalizedHeaders[headerData[name].originalName] = headerData[name].value;
  });
  return normalizedHeaders;
}

// node_modules/@apollo/client/link/http/checkFetcher.js
var checkFetcher = (fetcher) => {
  invariant2(fetcher || typeof fetch !== "undefined", 59);
};

// node_modules/@apollo/client/link/http/selectURI.js
var selectURI = (operation, fallbackURI) => {
  const context2 = operation.getContext();
  const contextURI = context2.uri;
  if (contextURI) {
    return contextURI;
  } else if (typeof fallbackURI === "function") {
    return fallbackURI(operation);
  } else {
    return fallbackURI || "/graphql";
  }
};

// node_modules/@apollo/client/link/http/rewriteURIForGET.js
function rewriteURIForGET(chosenURI, body) {
  const queryParams = [];
  const addQueryParam = (key, value) => {
    queryParams.push(`${key}=${encodeURIComponent(value)}`);
  };
  if ("query" in body) {
    addQueryParam("query", body.query);
  }
  if (body.operationName) {
    addQueryParam("operationName", body.operationName);
  }
  if (body.variables) {
    let serializedVariables;
    try {
      serializedVariables = JSON.stringify(body.variables);
    } catch (parseError) {
      return { parseError };
    }
    addQueryParam("variables", serializedVariables);
  }
  if (body.extensions) {
    let serializedExtensions;
    try {
      serializedExtensions = JSON.stringify(body.extensions);
    } catch (parseError) {
      return { parseError };
    }
    addQueryParam("extensions", serializedExtensions);
  }
  let fragment = "", preFragment = chosenURI;
  const fragmentStart = chosenURI.indexOf("#");
  if (fragmentStart !== -1) {
    fragment = chosenURI.substr(fragmentStart);
    preFragment = chosenURI.substr(0, fragmentStart);
  }
  const queryParamsPrefix = preFragment.indexOf("?") === -1 ? "?" : "&";
  const newURI = preFragment + queryParamsPrefix + queryParams.join("&") + fragment;
  return { newURI };
}

// node_modules/@apollo/client/link/http/BaseHttpLink.js
var backupFetch = maybe(() => fetch);
function noop3() {
}

class BaseHttpLink extends ApolloLink {
  constructor(options = {}) {
    let {
      uri = "/graphql",
      fetch: preferredFetch,
      print: print3 = defaultPrinter,
      includeExtensions,
      preserveHeaderCase,
      useGETForQueries,
      includeUnusedVariables = false,
      ...requestOptions
    } = options;
    if (__DEV__) {
      checkFetcher(preferredFetch || backupFetch);
    }
    const linkConfig = {
      http: compact({ includeExtensions, preserveHeaderCase }),
      options: requestOptions.fetchOptions,
      credentials: requestOptions.credentials,
      headers: requestOptions.headers
    };
    super((operation) => {
      let chosenURI = selectURI(operation, uri);
      const context2 = operation.getContext();
      const http = { ...context2.http };
      if (isSubscriptionOperation(operation.query)) {
        http.accept = [
          "multipart/mixed;boundary=graphql;subscriptionSpec=1.0",
          ...http.accept || []
        ];
      }
      const contextConfig = {
        http,
        options: context2.fetchOptions,
        credentials: context2.credentials,
        headers: context2.headers
      };
      const { options: options2, body } = selectHttpOptionsAndBodyInternal(operation, print3, fallbackHttpConfig, linkConfig, contextConfig);
      if (body.variables && !includeUnusedVariables) {
        body.variables = filterOperationVariables(body.variables, operation.query);
      }
      let controller = new AbortController;
      let cleanupController = () => {
        controller = undefined;
      };
      if (options2.signal) {
        const externalSignal = options2.signal;
        const listener = () => {
          controller?.abort(externalSignal.reason);
        };
        externalSignal.addEventListener("abort", listener, { once: true });
        cleanupController = () => {
          controller?.signal.removeEventListener("abort", cleanupController);
          controller = undefined;
          externalSignal.removeEventListener("abort", listener);
          cleanupController = noop3;
        };
        controller.signal.addEventListener("abort", cleanupController, {
          once: true
        });
      }
      options2.signal = controller.signal;
      if (useGETForQueries && !isMutationOperation(operation.query)) {
        options2.method = "GET";
      }
      return new Observable((observer) => {
        if (options2.method === "GET") {
          const { newURI, parseError } = rewriteURIForGET(chosenURI, body);
          if (parseError) {
            throw parseError;
          }
          chosenURI = newURI;
        } else {
          options2.body = JSON.stringify(body);
        }
        const currentFetch = preferredFetch || maybe(() => fetch) || backupFetch;
        const observerNext = observer.next.bind(observer);
        currentFetch(chosenURI, options2).then((response) => {
          operation.setContext({ response });
          const ctype = response.headers?.get("content-type");
          if (ctype !== null && /^multipart\/mixed/i.test(ctype)) {
            return readMultipartBody(response, observerNext);
          } else {
            return parseAndCheckHttpResponse(operation)(response).then(observerNext);
          }
        }).then(() => {
          cleanupController();
          observer.complete();
        }).catch((err) => {
          cleanupController();
          observer.error(err);
        });
        return () => {
          if (controller)
            controller.abort();
        };
      });
    });
  }
}

// node_modules/@apollo/client/link/client-awareness/ClientAwarenessLink.js
class ClientAwarenessLink extends ApolloLink {
  constructor(options = {}) {
    super((operation, forward) => {
      const client = operation.client;
      const clientOptions = client["queryManager"].clientOptions;
      const context2 = operation.getContext();
      {
        const { name, version: version2, transport = "headers" } = compact({}, clientOptions.clientAwareness, options.clientAwareness, context2.clientAwareness);
        if (transport === "headers") {
          operation.setContext(({ headers, extensions }) => {
            return {
              headers: compact({
                "apollographql-client-name": name,
                "apollographql-client-version": version2
              }, headers)
            };
          });
        }
      }
      {
        const { transport = "extensions" } = compact({}, clientOptions.enhancedClientAwareness, options.enhancedClientAwareness);
        if (transport === "extensions") {
          operation.extensions = compact({
            clientLibrary: {
              name: "@apollo/client",
              version: client.version
            }
          }, operation.extensions);
        }
      }
      return forward(operation);
    });
  }
}
// node_modules/@apollo/client/link/http/HttpLink.js
class HttpLink extends ApolloLink {
  constructor(options = {}) {
    const { left, right, request } = ApolloLink.from([
      new ClientAwarenessLink(options),
      new BaseHttpLink(options)
    ]);
    super(request);
    Object.assign(this, { left, right });
  }
}
// node_modules/graphql-tag/lib/index.js
var docCache = new Map;
var fragmentSourceMap = new Map;
var printFragmentWarnings = true;
var experimentalFragmentVariables = false;
function normalize2(string) {
  return string.replace(/[\s,]+/g, " ").trim();
}
function cacheKeyFromLoc(loc) {
  return normalize2(loc.source.body.substring(loc.start, loc.end));
}
function processFragments(ast) {
  var seenKeys = new Set;
  var definitions = [];
  ast.definitions.forEach(function(fragmentDefinition) {
    if (fragmentDefinition.kind === "FragmentDefinition") {
      var fragmentName = fragmentDefinition.name.value;
      var sourceKey = cacheKeyFromLoc(fragmentDefinition.loc);
      var sourceKeySet = fragmentSourceMap.get(fragmentName);
      if (sourceKeySet && !sourceKeySet.has(sourceKey)) {
        if (printFragmentWarnings) {
          console.warn("Warning: fragment with name " + fragmentName + " already exists.\n" + "graphql-tag enforces all fragment names across your application to be unique; read more about\n" + "this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names");
        }
      } else if (!sourceKeySet) {
        fragmentSourceMap.set(fragmentName, sourceKeySet = new Set);
      }
      sourceKeySet.add(sourceKey);
      if (!seenKeys.has(sourceKey)) {
        seenKeys.add(sourceKey);
        definitions.push(fragmentDefinition);
      }
    } else {
      definitions.push(fragmentDefinition);
    }
  });
  return __assign(__assign({}, ast), { definitions });
}
function stripLoc(doc) {
  var workSet = new Set(doc.definitions);
  workSet.forEach(function(node) {
    if (node.loc)
      delete node.loc;
    Object.keys(node).forEach(function(key) {
      var value = node[key];
      if (value && typeof value === "object") {
        workSet.add(value);
      }
    });
  });
  var loc = doc.loc;
  if (loc) {
    delete loc.startToken;
    delete loc.endToken;
  }
  return doc;
}
function parseDocument(source) {
  var cacheKey = normalize2(source);
  if (!docCache.has(cacheKey)) {
    var parsed = parse(source, {
      experimentalFragmentVariables,
      allowLegacyFragmentVariables: experimentalFragmentVariables
    });
    if (!parsed || parsed.kind !== "Document") {
      throw new Error("Not a valid GraphQL document.");
    }
    docCache.set(cacheKey, stripLoc(processFragments(parsed)));
  }
  return docCache.get(cacheKey);
}
function gql(literals) {
  var args = [];
  for (var _i = 1;_i < arguments.length; _i++) {
    args[_i - 1] = arguments[_i];
  }
  if (typeof literals === "string") {
    literals = [literals];
  }
  var result = literals[0];
  args.forEach(function(arg, i) {
    if (arg && arg.kind === "Document") {
      result += arg.loc.source.body;
    } else {
      result += arg;
    }
    result += literals[i + 1];
  });
  return parseDocument(result);
}
function resetCaches() {
  docCache.clear();
  fragmentSourceMap.clear();
}
function disableFragmentWarnings() {
  printFragmentWarnings = false;
}
function enableExperimentalFragmentVariables() {
  experimentalFragmentVariables = true;
}
function disableExperimentalFragmentVariables() {
  experimentalFragmentVariables = false;
}
var extras = {
  gql,
  resetCaches,
  disableFragmentWarnings,
  enableExperimentalFragmentVariables,
  disableExperimentalFragmentVariables
};
(function(gql_1) {
  gql_1.gql = extras.gql, gql_1.resetCaches = extras.resetCaches, gql_1.disableFragmentWarnings = extras.disableFragmentWarnings, gql_1.enableExperimentalFragmentVariables = extras.enableExperimentalFragmentVariables, gql_1.disableExperimentalFragmentVariables = extras.disableExperimentalFragmentVariables;
})(gql || (gql = {}));
gql["default"] = gql;
// node_modules/@apollo/client/link/context/index.js
class SetContextLink extends ApolloLink {
  constructor(setter) {
    super((operation, forward) => {
      const { ...request } = operation;
      Object.defineProperty(request, "client", {
        enumerable: false,
        value: operation.client
      });
      return new Observable((observer) => {
        let closed = false;
        Promise.resolve(request).then((req) => setter(operation.getContext(), req)).then(operation.setContext).then(() => {
          if (!closed) {
            forward(operation).subscribe(observer);
          }
        }).catch(observer.error.bind(observer));
        return () => {
          closed = true;
        };
      });
    });
  }
}

// src/index.ts
globalThis.__DEV__ = true;
var GRAPHQL_ENDPOINT = "http://localhost:8081/v1/graphql";
var ADMIN_SECRET = "myadminsecretkey";
var httpLink = new HttpLink({
  uri: GRAPHQL_ENDPOINT
});
var authLink = new SetContextLink(() => {
  return {
    headers: {
      "X-Hasura-Admin-Secret": ADMIN_SECRET
    }
  };
});
var globalApolloClient = new ApolloClient({
  link: authLink.concat(httpLink),
  cache: new InMemoryCache,
  connectToDevTools: true,
  defaultOptions: {
    watchQuery: {
      errorPolicy: "all"
    },
    query: {
      errorPolicy: "all"
    }
  }
});
if (typeof window !== "undefined") {
  window.__APOLLO_CLIENT__ = globalApolloClient;
}

class StencilGraphQL {
  fields = [];
  client;
  constructor() {
    console.log("\uD83C\uDFAF Stencil GraphQL DOM Bindings with Apollo Client + DevTools initialized!");
    this.client = globalApolloClient;
    console.log("\uD83D\uDD17 Using global Apollo Client for GraphQL queries");
  }
  scanDOM() {
    console.log("\uD83D\uDD0D Scanning DOM for GraphQL field bindings...");
    const elements = document.querySelectorAll("[data-gql-field]");
    this.fields = [];
    elements.forEach((element) => {
      const path = element.getAttribute("data-gql-field");
      if (path) {
        this.fields.push({ element, path });
        console.log(`\uD83D\uDCCD Found field binding: ${path}`);
      }
    });
    console.log(`\u2705 Found ${this.fields.length} field bindings`);
  }
  buildQueryStructure() {
    console.log("\uD83C\uDFD7\uFE0F  Building query structure from field paths...");
    const structure = {};
    this.fields.forEach(({ path }) => {
      const parts = path.split(".");
      let current = structure;
      parts.forEach((part, index) => {
        if (index === parts.length - 1) {
          current[part] = true;
        } else {
          if (!current[part]) {
            current[part] = {};
          }
          current = current[part];
        }
      });
    });
    console.log("\uD83D\uDCCA Query structure built:", structure);
    return structure;
  }
  structureToGraphQL(structure, depth = 0) {
    const indent2 = "  ".repeat(depth);
    let result = "";
    Object.entries(structure).forEach(([key, value]) => {
      if (value === true) {
        result += `${indent2}${key}\n`;
      } else {
        result += `${indent2}${key} {\n`;
        result += this.structureToGraphQL(value, depth + 1);
        result += `${indent2}}\n`;
      }
    });
    return result;
  }
  buildQuery() {
    console.log("\uD83C\uDFD7\uFE0F  Building GraphQL query from field paths...");
    if (this.fields.length === 0) {
      console.log("\u26A0\uFE0F  No fields found to query");
      return null;
    }
    const structure = this.buildQueryStructure();
    const queryFields = this.structureToGraphQL(structure, 1);
    const queryString = `
      query StencilGeneratedQuery {
${queryFields}      }
    `;
    console.log("\uD83D\uDCDD Generated GraphQL query:", queryString);
    try {
      return gql(queryString);
    } catch (error) {
      console.error("\u274C Invalid GraphQL query generated:", error);
      return null;
    }
  }
  async executeQuery(query, useCache = true) {
    console.log("\uD83D\uDE80 Executing GraphQL query with Apollo Client...");
    try {
      const result = await this.client.query({
        query,
        fetchPolicy: useCache ? "cache-first" : "network-only",
        errorPolicy: "all",
        context: {
          queryName: "StencilGeneratedQuery",
          source: "stencil-dom-bindings"
        }
      });
      console.log("\uD83D\uDCCA Query result:", result.data);
      return result.data;
    } catch (error) {
      console.error("\u274C Query execution failed:", error);
      return null;
    }
  }
  updateDOM(data) {
    console.log("\uD83C\uDFA8 Updating DOM with query results...");
    this.fields.forEach(({ element, path }) => {
      const value = this.getNestedValue(data, path);
      if (value !== undefined) {
        const displayValue = typeof value === "number" ? Number(value).toFixed(2) : value.toString();
        element.textContent = displayValue;
        console.log(`\u2728 Updated ${path}: ${displayValue}`);
      } else {
        console.warn(`\u26A0\uFE0F  No value found for path: ${path}`);
        element.textContent = "N/A";
      }
    });
  }
  getNestedValue(obj, path) {
    return path.split(".").reduce((current, key) => current?.[key], obj);
  }
  async run() {
    console.log("\uD83C\uDFAC Starting Stencil GraphQL DOM binding process...");
    this.scanDOM();
    const query = this.buildQuery();
    if (query) {
      const result = await this.executeQuery(query, true);
      if (result) {
        this.updateDOM(result);
      }
    }
    console.log("\uD83C\uDF89 Stencil GraphQL process complete!");
  }
  async refresh() {
    console.log("\uD83D\uDD04 Refreshing GraphQL data...");
    const query = this.buildQuery();
    if (query) {
      const result = await this.executeQuery(query, false);
      if (result) {
        this.updateDOM(result);
      }
    }
  }
  clearCache() {
    console.log("\uD83D\uDDD1\uFE0F  Clearing Apollo cache...");
    this.client.cache.reset();
  }
  getCacheStats() {
    const cacheData = this.client.cache.extract();
    return {
      cacheSize: cacheData ? Object.keys(cacheData).length : 0,
      cache: cacheData
    };
  }
  getApolloClient() {
    return this.client;
  }
}
var stencil = new StencilGraphQL;
window.stencil = stencil;
if (document.readyState === "loading") {
  document.addEventListener("DOMContentLoaded", () => {
    console.log("\uD83D\uDE80 DOM is ready, initializing Stencil...");
    stencil.run();
  });
} else {
  console.log("\uD83D\uDE80 DOM already ready, initializing Stencil...");
  stencil.run();
}

//# debugId=62F9A9E6396FA1EB64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9kZXZBc3NlcnQubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2pzdXRpbHMvaXNPYmplY3RMaWtlLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL2ludmFyaWFudC5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvbG9jYXRpb24ubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL3ByaW50TG9jYXRpb24ubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2Vycm9yL0dyYXBoUUxFcnJvci5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvZXJyb3Ivc3ludGF4RXJyb3IubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL2FzdC5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvZGlyZWN0aXZlTG9jYXRpb24ubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL2tpbmRzLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9jaGFyYWN0ZXJDbGFzc2VzLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9ibG9ja1N0cmluZy5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvdG9rZW5LaW5kLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9sZXhlci5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9pbnNwZWN0Lm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL2luc3RhbmNlT2YubWpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL3NvdXJjZS5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvcGFyc2VyLm1qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9wcmludFN0cmluZy5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvdmlzaXRvci5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvcHJpbnRlci5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5tanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvaXNGdW5jdGlvbi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9jcmVhdGVFcnJvckNsYXNzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvYXJyUmVtb3ZlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9TdWJzY3JpcHRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL2NvbmZpZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVyL3RpbWVvdXRQcm92aWRlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9yZXBvcnRVbmhhbmRsZWRFcnJvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9ub29wLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9Ob3RpZmljYXRpb25GYWN0b3JpZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvZXJyb3JDb250ZXh0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9TdWJzY3JpYmVyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9zeW1ib2wvb2JzZXJ2YWJsZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9pZGVudGl0eS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9waXBlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9PYnNlcnZhYmxlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2xpZnQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29wZXJhdG9ycy9PcGVyYXRvclN1YnNjcmliZXIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL1N1YmplY3QuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL0JlaGF2aW9yU3ViamVjdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVyL2RhdGVUaW1lc3RhbXBQcm92aWRlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvUmVwbGF5U3ViamVjdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvb2JzZXJ2YWJsZS9lbXB0eS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9pc1NjaGVkdWxlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9hcmdzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2lzQXJyYXlMaWtlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2lzUHJvbWlzZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9pc0ludGVyb3BPYnNlcnZhYmxlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2lzQXN5bmNJdGVyYWJsZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC90aHJvd1Vub2JzZXJ2YWJsZUVycm9yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9zeW1ib2wvaXRlcmF0b3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvaXNJdGVyYWJsZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9pc1JlYWRhYmxlU3RyZWFtTGlrZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvb2JzZXJ2YWJsZS9pbm5lckZyb20uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvZXhlY3V0ZVNjaGVkdWxlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvb2JzZXJ2ZU9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvc3Vic2NyaWJlT24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3NjaGVkdWxlZC9zY2hlZHVsZU9ic2VydmFibGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3NjaGVkdWxlZC9zY2hlZHVsZVByb21pc2UuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3NjaGVkdWxlZC9zY2hlZHVsZUFycmF5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9zY2hlZHVsZWQvc2NoZWR1bGVJdGVyYWJsZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVkL3NjaGVkdWxlQXN5bmNJdGVyYWJsZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVkL3NjaGVkdWxlUmVhZGFibGVTdHJlYW1MaWtlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9zY2hlZHVsZWQvc2NoZWR1bGVkLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vYnNlcnZhYmxlL2Zyb20uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29ic2VydmFibGUvb2YuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29ic2VydmFibGUvdGhyb3dFcnJvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvTm90aWZpY2F0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL0VtcHR5RXJyb3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL2xhc3RWYWx1ZUZyb20uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29wZXJhdG9ycy9tYXAuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29wZXJhdG9ycy9tZXJnZUludGVybmFscy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL21lcmdlTWFwLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvbWVyZ2VBbGwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29wZXJhdG9ycy9jb25jYXRBbGwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29ic2VydmFibGUvY29uY2F0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvZmlsdGVyLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvY2F0Y2hFcnJvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL2ZpbmFsaXplLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvbWF0ZXJpYWxpemUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29wZXJhdG9ycy9zaGFyZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL3NoYXJlUmVwbGF5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvdGFwLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZW52aXJvbm1lbnQvaW5kZXguanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9nbG9iYWxzL21heWJlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZ2xvYmFscy9nbG9iYWwuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3ZlcnNpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9tYWtlVW5pcXVlSWQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9zdHJpbmdpZnlGb3JEaXNwbGF5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW52YXJpYW50L2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad3J5L2NhY2hlcy9saWIvc3Ryb25nLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9Ad3J5L2NhY2hlcy9saWIvd2Vhay5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdyeS90cmllL2xpYi9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQHdyeS9jb250ZXh0L2xpYi9zbG90LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9vcHRpbWlzbS9saWIvY29udGV4dC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvb3B0aW1pc20vbGliL2hlbHBlcnMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL29wdGltaXNtL2xpYi9lbnRyeS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvb3B0aW1pc20vbGliL2RlcC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvb3B0aW1pc20vbGliL2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvY2FjaGluZy9zaXplcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL2dldE9wZXJhdGlvbk5hbWUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9jaGVja0RvY3VtZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvY2xvbmVEZWVwLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvY29tcGFjdC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL2NyZWF0ZUZyYWdtZW50TWFwLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvaXNOb25OdWxsT2JqZWN0LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvRGVlcE1lcmdlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL2dldERlZmF1bHRWYWx1ZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9nZXRGcmFnbWVudEZyb21TZWxlY3Rpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9nZXRGcmFnbWVudFF1ZXJ5RG9jdW1lbnQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9nZXRGcmFnbWVudERlZmluaXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9nZXRGcmFnbWVudERlZmluaXRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZ2V0TWFpbkRlZmluaXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9nZXRPcGVyYXRpb25EZWZpbml0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZ2V0UXVlcnlEZWZpbml0aW9uLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvY2FjaGVzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZ2V0TWVtb3J5SW50ZXJuYWxzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvY2Fub25pY2FsU3RyaW5naWZ5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZ2V0U3RvcmVLZXlOYW1lLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZ3JhcGhRTFJlc3VsdEhhc0Vycm9yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvaGFzRGlyZWN0aXZlcy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL2hhc0ZvcmNlZFJlc29sdmVycy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL2lzQXJyYXkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9pc0RvY3VtZW50Tm9kZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL2lzRmllbGQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9pc05vbkVtcHR5QXJyYXkuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9tYWtlUmVmZXJlbmNlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZGVlcEZyZWV6ZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL21heWJlRGVlcEZyZWV6ZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL21lcmdlRGVlcEFycmF5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvbWVyZ2VPcHRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvcHJldmVudFVuaGFuZGxlZFJlamVjdGlvbi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL3JlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9yZW1vdmVGcmFnbWVudFNwcmVhZHMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9yZXN1bHRLZXlOYW1lRnJvbUZpZWxkLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvc2hvdWxkSW5jbHVkZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL3N0b3JlS2V5TmFtZUZyb21GaWVsZC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL3RvUXVlcnlSZXN1bHQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbC9maWx0ZXJNYXAuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0B3cnkvZXF1YWxpdHkvbGliL2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZXF1YWxCeVF1ZXJ5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9pbmNyZW1lbnRhbC9oYW5kbGVycy9ub3RJbXBsZW1lbnRlZC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay91dGlscy9jcmVhdGVPcGVyYXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvdXRpbHMvZmlsdGVyT3BlcmF0aW9uVmFyaWFibGVzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2NvcmUvQXBvbGxvTGluay5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9jb3JlL2V4ZWN1dGUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9ncmFwaHFsL0RvY3VtZW50VHJhbnNmb3JtLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZ3JhcGhxbC9wcmludC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dyYXBocWwvc3RvcmVVdGlscy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2dyYXBocWwvdHJhbnNmb3JtLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZ3JhcGhxbC9vcGVyYXRpb25zLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jYWNoZS9jb3JlL2NhY2hlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jYWNoZS9jb3JlL3R5cGVzL2NvbW1vbi5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvaGVscGVycy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvZW50aXR5U3RvcmUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L21hc2tpbmcvdXRpbHMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L21hc2tpbmcvbWFza0RlZmluaXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L21hc2tpbmcvbWFza0ZyYWdtZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9tYXNraW5nL21hc2tPcGVyYXRpb24uanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L2tleS1leHRyYWN0b3IuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L3JlYWN0aXZlVmFycy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvcG9saWNpZXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L3JlYWRGcm9tU3RvcmUuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NhY2hlL2lubWVtb3J5L3dyaXRlVG9TdG9yZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY2FjaGUvaW5tZW1vcnkvaW5NZW1vcnlDYWNoZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvZXJyb3JzL3V0aWxzLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9lcnJvcnMvQ29tYmluZWRQcm90b2NvbEVycm9ycy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvZXJyb3JzL2lzRXJyb3JMaWtlLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9lcnJvcnMvVW5jb252ZW50aW9uYWxFcnJvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvZXJyb3JzL0NvbWJpbmVkR3JhcGhRTEVycm9ycy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvZXJyb3JzL0xpbmtFcnJvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvZXJyb3JzL1NlcnZlckVycm9yLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9lcnJvcnMvU2VydmVyUGFyc2VFcnJvci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvZXJyb3JzL2luZGV4LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jb3JlL25ldHdvcmtTdGF0dXMuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NvcmUvT2JzZXJ2YWJsZVF1ZXJ5LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9jb3JlL1F1ZXJ5SW5mby5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvY29yZS9RdWVyeU1hbmFnZXIuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2NvcmUvQXBvbGxvQ2xpZW50LmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2h0dHAvcGFyc2VBbmRDaGVja0h0dHBSZXNwb25zZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3NlbGVjdEh0dHBPcHRpb25zQW5kQm9keS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL2NoZWNrRmV0Y2hlci5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3NlbGVjdFVSSS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9odHRwL3Jld3JpdGVVUklGb3JHRVQuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvaHR0cC9CYXNlSHR0cExpbmsuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L2xpbmsvY2xpZW50LWF3YXJlbmVzcy9DbGllbnRBd2FyZW5lc3NMaW5rLmpzIiwgIi4uLy4uL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9saW5rL2h0dHAvSHR0cExpbmsuanMiLCAiLi4vLi4vbm9kZV9tb2R1bGVzL2dyYXBocWwtdGFnL2xpYi9pbmRleC5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvQGFwb2xsby9jbGllbnQvbGluay9jb250ZXh0L2luZGV4LmpzIiwgIi4uLy4uL3NyYy9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsKICAgICJleHBvcnQgZnVuY3Rpb24gZGV2QXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICBjb25zdCBib29sZWFuQ29uZGl0aW9uID0gQm9vbGVhbihjb25kaXRpb24pO1xuXG4gIGlmICghYm9vbGVhbkNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfVxufVxuIiwKICAgICIvKipcbiAqIFJldHVybiB0cnVlIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3RcbiAqIGBudWxsYCBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbDtcbn1cbiIsCiAgICAiZXhwb3J0IGZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgY29uc3QgYm9vbGVhbkNvbmRpdGlvbiA9IEJvb2xlYW4oY29uZGl0aW9uKTtcblxuICBpZiAoIWJvb2xlYW5Db25kaXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBtZXNzYWdlICE9IG51bGwgPyBtZXNzYWdlIDogJ1VuZXhwZWN0ZWQgaW52YXJpYW50IHRyaWdnZXJlZC4nLFxuICAgICk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnLi4vanN1dGlscy9pbnZhcmlhbnQubWpzJztcbmNvbnN0IExpbmVSZWdFeHAgPSAvXFxyXFxufFtcXG5cXHJdL2c7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhdGlvbiBpbiBhIFNvdXJjZS5cbiAqL1xuXG4vKipcbiAqIFRha2VzIGEgU291cmNlIGFuZCBhIFVURi04IGNoYXJhY3RlciBvZmZzZXQsIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBsaW5lIGFuZCBjb2x1bW4gYXMgYSBTb3VyY2VMb2NhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExvY2F0aW9uKHNvdXJjZSwgcG9zaXRpb24pIHtcbiAgbGV0IGxhc3RMaW5lU3RhcnQgPSAwO1xuICBsZXQgbGluZSA9IDE7XG5cbiAgZm9yIChjb25zdCBtYXRjaCBvZiBzb3VyY2UuYm9keS5tYXRjaEFsbChMaW5lUmVnRXhwKSkge1xuICAgIHR5cGVvZiBtYXRjaC5pbmRleCA9PT0gJ251bWJlcicgfHwgaW52YXJpYW50KGZhbHNlKTtcblxuICAgIGlmIChtYXRjaC5pbmRleCA+PSBwb3NpdGlvbikge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgbGFzdExpbmVTdGFydCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgIGxpbmUgKz0gMTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbGluZSxcbiAgICBjb2x1bW46IHBvc2l0aW9uICsgMSAtIGxhc3RMaW5lU3RhcnQsXG4gIH07XG59XG4iLAogICAgImltcG9ydCB7IGdldExvY2F0aW9uIH0gZnJvbSAnLi9sb2NhdGlvbi5tanMnO1xuXG4vKipcbiAqIFJlbmRlciBhIGhlbHBmdWwgZGVzY3JpcHRpb24gb2YgdGhlIGxvY2F0aW9uIGluIHRoZSBHcmFwaFFMIFNvdXJjZSBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByaW50TG9jYXRpb24obG9jYXRpb24pIHtcbiAgcmV0dXJuIHByaW50U291cmNlTG9jYXRpb24oXG4gICAgbG9jYXRpb24uc291cmNlLFxuICAgIGdldExvY2F0aW9uKGxvY2F0aW9uLnNvdXJjZSwgbG9jYXRpb24uc3RhcnQpLFxuICApO1xufVxuLyoqXG4gKiBSZW5kZXIgYSBoZWxwZnVsIGRlc2NyaXB0aW9uIG9mIHRoZSBsb2NhdGlvbiBpbiB0aGUgR3JhcGhRTCBTb3VyY2UgZG9jdW1lbnQuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50U291cmNlTG9jYXRpb24oc291cmNlLCBzb3VyY2VMb2NhdGlvbikge1xuICBjb25zdCBmaXJzdExpbmVDb2x1bW5PZmZzZXQgPSBzb3VyY2UubG9jYXRpb25PZmZzZXQuY29sdW1uIC0gMTtcbiAgY29uc3QgYm9keSA9ICcnLnBhZFN0YXJ0KGZpcnN0TGluZUNvbHVtbk9mZnNldCkgKyBzb3VyY2UuYm9keTtcbiAgY29uc3QgbGluZUluZGV4ID0gc291cmNlTG9jYXRpb24ubGluZSAtIDE7XG4gIGNvbnN0IGxpbmVPZmZzZXQgPSBzb3VyY2UubG9jYXRpb25PZmZzZXQubGluZSAtIDE7XG4gIGNvbnN0IGxpbmVOdW0gPSBzb3VyY2VMb2NhdGlvbi5saW5lICsgbGluZU9mZnNldDtcbiAgY29uc3QgY29sdW1uT2Zmc2V0ID0gc291cmNlTG9jYXRpb24ubGluZSA9PT0gMSA/IGZpcnN0TGluZUNvbHVtbk9mZnNldCA6IDA7XG4gIGNvbnN0IGNvbHVtbk51bSA9IHNvdXJjZUxvY2F0aW9uLmNvbHVtbiArIGNvbHVtbk9mZnNldDtcbiAgY29uc3QgbG9jYXRpb25TdHIgPSBgJHtzb3VyY2UubmFtZX06JHtsaW5lTnVtfToke2NvbHVtbk51bX1cXG5gO1xuICBjb25zdCBsaW5lcyA9IGJvZHkuc3BsaXQoL1xcclxcbnxbXFxuXFxyXS9nKTtcbiAgY29uc3QgbG9jYXRpb25MaW5lID0gbGluZXNbbGluZUluZGV4XTsgLy8gU3BlY2lhbCBjYXNlIGZvciBtaW5pZmllZCBkb2N1bWVudHNcblxuICBpZiAobG9jYXRpb25MaW5lLmxlbmd0aCA+IDEyMCkge1xuICAgIGNvbnN0IHN1YkxpbmVJbmRleCA9IE1hdGguZmxvb3IoY29sdW1uTnVtIC8gODApO1xuICAgIGNvbnN0IHN1YkxpbmVDb2x1bW5OdW0gPSBjb2x1bW5OdW0gJSA4MDtcbiAgICBjb25zdCBzdWJMaW5lcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhdGlvbkxpbmUubGVuZ3RoOyBpICs9IDgwKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGxvY2F0aW9uTGluZS5zbGljZShpLCBpICsgODApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgbG9jYXRpb25TdHIgK1xuICAgICAgcHJpbnRQcmVmaXhlZExpbmVzKFtcbiAgICAgICAgW2Ake2xpbmVOdW19IHxgLCBzdWJMaW5lc1swXV0sXG4gICAgICAgIC4uLnN1YkxpbmVzLnNsaWNlKDEsIHN1YkxpbmVJbmRleCArIDEpLm1hcCgoc3ViTGluZSkgPT4gWyd8Jywgc3ViTGluZV0pLFxuICAgICAgICBbJ3wnLCAnXicucGFkU3RhcnQoc3ViTGluZUNvbHVtbk51bSldLFxuICAgICAgICBbJ3wnLCBzdWJMaW5lc1tzdWJMaW5lSW5kZXggKyAxXV0sXG4gICAgICBdKVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIGxvY2F0aW9uU3RyICtcbiAgICBwcmludFByZWZpeGVkTGluZXMoW1xuICAgICAgLy8gTGluZXMgc3BlY2lmaWVkIGxpa2UgdGhpczogW1wicHJlZml4XCIsIFwic3RyaW5nXCJdLFxuICAgICAgW2Ake2xpbmVOdW0gLSAxfSB8YCwgbGluZXNbbGluZUluZGV4IC0gMV1dLFxuICAgICAgW2Ake2xpbmVOdW19IHxgLCBsb2NhdGlvbkxpbmVdLFxuICAgICAgWyd8JywgJ14nLnBhZFN0YXJ0KGNvbHVtbk51bSldLFxuICAgICAgW2Ake2xpbmVOdW0gKyAxfSB8YCwgbGluZXNbbGluZUluZGV4ICsgMV1dLFxuICAgIF0pXG4gICk7XG59XG5cbmZ1bmN0aW9uIHByaW50UHJlZml4ZWRMaW5lcyhsaW5lcykge1xuICBjb25zdCBleGlzdGluZ0xpbmVzID0gbGluZXMuZmlsdGVyKChbXywgbGluZV0pID0+IGxpbmUgIT09IHVuZGVmaW5lZCk7XG4gIGNvbnN0IHBhZExlbiA9IE1hdGgubWF4KC4uLmV4aXN0aW5nTGluZXMubWFwKChbcHJlZml4XSkgPT4gcHJlZml4Lmxlbmd0aCkpO1xuICByZXR1cm4gZXhpc3RpbmdMaW5lc1xuICAgIC5tYXAoKFtwcmVmaXgsIGxpbmVdKSA9PiBwcmVmaXgucGFkU3RhcnQocGFkTGVuKSArIChsaW5lID8gJyAnICsgbGluZSA6ICcnKSlcbiAgICAuam9pbignXFxuJyk7XG59XG4iLAogICAgImltcG9ydCB7IGlzT2JqZWN0TGlrZSB9IGZyb20gJy4uL2pzdXRpbHMvaXNPYmplY3RMaWtlLm1qcyc7XG5pbXBvcnQgeyBnZXRMb2NhdGlvbiB9IGZyb20gJy4uL2xhbmd1YWdlL2xvY2F0aW9uLm1qcyc7XG5pbXBvcnQge1xuICBwcmludExvY2F0aW9uLFxuICBwcmludFNvdXJjZUxvY2F0aW9uLFxufSBmcm9tICcuLi9sYW5ndWFnZS9wcmludExvY2F0aW9uLm1qcyc7XG5cbmZ1bmN0aW9uIHRvTm9ybWFsaXplZE9wdGlvbnMoYXJncykge1xuICBjb25zdCBmaXJzdEFyZyA9IGFyZ3NbMF07XG5cbiAgaWYgKGZpcnN0QXJnID09IG51bGwgfHwgJ2tpbmQnIGluIGZpcnN0QXJnIHx8ICdsZW5ndGgnIGluIGZpcnN0QXJnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5vZGVzOiBmaXJzdEFyZyxcbiAgICAgIHNvdXJjZTogYXJnc1sxXSxcbiAgICAgIHBvc2l0aW9uczogYXJnc1syXSxcbiAgICAgIHBhdGg6IGFyZ3NbM10sXG4gICAgICBvcmlnaW5hbEVycm9yOiBhcmdzWzRdLFxuICAgICAgZXh0ZW5zaW9uczogYXJnc1s1XSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZpcnN0QXJnO1xufVxuLyoqXG4gKiBBIEdyYXBoUUxFcnJvciBkZXNjcmliZXMgYW4gRXJyb3IgZm91bmQgZHVyaW5nIHRoZSBwYXJzZSwgdmFsaWRhdGUsIG9yXG4gKiBleGVjdXRlIHBoYXNlcyBvZiBwZXJmb3JtaW5nIGEgR3JhcGhRTCBvcGVyYXRpb24uIEluIGFkZGl0aW9uIHRvIGEgbWVzc2FnZVxuICogYW5kIHN0YWNrIHRyYWNlLCBpdCBhbHNvIGluY2x1ZGVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBsb2NhdGlvbnMgaW4gYVxuICogR3JhcGhRTCBkb2N1bWVudCBhbmQvb3IgZXhlY3V0aW9uIHJlc3VsdCB0aGF0IGNvcnJlc3BvbmQgdG8gdGhlIEVycm9yLlxuICovXG5cbmV4cG9ydCBjbGFzcyBHcmFwaFFMRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBgeyBsaW5lLCBjb2x1bW4gfWAgbG9jYXRpb25zIHdpdGhpbiB0aGUgc291cmNlIEdyYXBoUUwgZG9jdW1lbnRcbiAgICogd2hpY2ggY29ycmVzcG9uZCB0byB0aGlzIGVycm9yLlxuICAgKlxuICAgKiBFcnJvcnMgZHVyaW5nIHZhbGlkYXRpb24gb2Z0ZW4gY29udGFpbiBtdWx0aXBsZSBsb2NhdGlvbnMsIGZvciBleGFtcGxlIHRvXG4gICAqIHBvaW50IG91dCB0d28gdGhpbmdzIHdpdGggdGhlIHNhbWUgbmFtZS4gRXJyb3JzIGR1cmluZyBleGVjdXRpb24gaW5jbHVkZSBhXG4gICAqIHNpbmdsZSBsb2NhdGlvbiwgdGhlIGZpZWxkIHdoaWNoIHByb2R1Y2VkIHRoZSBlcnJvci5cbiAgICpcbiAgICogRW51bWVyYWJsZSwgYW5kIGFwcGVhcnMgaW4gdGhlIHJlc3VsdCBvZiBKU09OLnN0cmluZ2lmeSgpLlxuICAgKi9cblxuICAvKipcbiAgICogQW4gYXJyYXkgZGVzY3JpYmluZyB0aGUgSlNPTi1wYXRoIGludG8gdGhlIGV4ZWN1dGlvbiByZXNwb25zZSB3aGljaFxuICAgKiBjb3JyZXNwb25kcyB0byB0aGlzIGVycm9yLiBPbmx5IGluY2x1ZGVkIGZvciBlcnJvcnMgZHVyaW5nIGV4ZWN1dGlvbi5cbiAgICpcbiAgICogRW51bWVyYWJsZSwgYW5kIGFwcGVhcnMgaW4gdGhlIHJlc3VsdCBvZiBKU09OLnN0cmluZ2lmeSgpLlxuICAgKi9cblxuICAvKipcbiAgICogQW4gYXJyYXkgb2YgR3JhcGhRTCBBU1QgTm9kZXMgY29ycmVzcG9uZGluZyB0byB0aGlzIGVycm9yLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHNvdXJjZSBHcmFwaFFMIGRvY3VtZW50IGZvciB0aGUgZmlyc3QgbG9jYXRpb24gb2YgdGhpcyBlcnJvci5cbiAgICpcbiAgICogTm90ZSB0aGF0IGlmIHRoaXMgRXJyb3IgcmVwcmVzZW50cyBtb3JlIHRoYW4gb25lIG5vZGUsIHRoZSBzb3VyY2UgbWF5IG5vdFxuICAgKiByZXByZXNlbnQgbm9kZXMgYWZ0ZXIgdGhlIGZpcnN0IG5vZGUuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBjaGFyYWN0ZXIgb2Zmc2V0cyB3aXRoaW4gdGhlIHNvdXJjZSBHcmFwaFFMIGRvY3VtZW50XG4gICAqIHdoaWNoIGNvcnJlc3BvbmQgdG8gdGhpcyBlcnJvci5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBvcmlnaW5hbCBlcnJvciB0aHJvd24gZnJvbSBhIGZpZWxkIHJlc29sdmVyIGR1cmluZyBleGVjdXRpb24uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBFeHRlbnNpb24gZmllbGRzIHRvIGFkZCB0byB0aGUgZm9ybWF0dGVkIGVycm9yLlxuICAgKi9cblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSB0aGUgYEdyYXBoUUxFcnJvck9wdGlvbnNgIGNvbnN0cnVjdG9yIG92ZXJsb2FkIGluc3RlYWQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCAuLi5yYXdBcmdzKSB7XG4gICAgdmFyIF90aGlzJG5vZGVzLCBfbm9kZUxvY2F0aW9ucyQsIF9yZWY7XG5cbiAgICBjb25zdCB7IG5vZGVzLCBzb3VyY2UsIHBvc2l0aW9ucywgcGF0aCwgb3JpZ2luYWxFcnJvciwgZXh0ZW5zaW9ucyB9ID1cbiAgICAgIHRvTm9ybWFsaXplZE9wdGlvbnMocmF3QXJncyk7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ0dyYXBoUUxFcnJvcic7XG4gICAgdGhpcy5wYXRoID0gcGF0aCAhPT0gbnVsbCAmJiBwYXRoICE9PSB2b2lkIDAgPyBwYXRoIDogdW5kZWZpbmVkO1xuICAgIHRoaXMub3JpZ2luYWxFcnJvciA9XG4gICAgICBvcmlnaW5hbEVycm9yICE9PSBudWxsICYmIG9yaWdpbmFsRXJyb3IgIT09IHZvaWQgMFxuICAgICAgICA/IG9yaWdpbmFsRXJyb3JcbiAgICAgICAgOiB1bmRlZmluZWQ7IC8vIENvbXB1dGUgbGlzdCBvZiBibGFtZSBub2Rlcy5cblxuICAgIHRoaXMubm9kZXMgPSB1bmRlZmluZWRJZkVtcHR5KFxuICAgICAgQXJyYXkuaXNBcnJheShub2RlcykgPyBub2RlcyA6IG5vZGVzID8gW25vZGVzXSA6IHVuZGVmaW5lZCxcbiAgICApO1xuICAgIGNvbnN0IG5vZGVMb2NhdGlvbnMgPSB1bmRlZmluZWRJZkVtcHR5KFxuICAgICAgKF90aGlzJG5vZGVzID0gdGhpcy5ub2RlcykgPT09IG51bGwgfHwgX3RoaXMkbm9kZXMgPT09IHZvaWQgMFxuICAgICAgICA/IHZvaWQgMFxuICAgICAgICA6IF90aGlzJG5vZGVzLm1hcCgobm9kZSkgPT4gbm9kZS5sb2MpLmZpbHRlcigobG9jKSA9PiBsb2MgIT0gbnVsbCksXG4gICAgKTsgLy8gQ29tcHV0ZSBsb2NhdGlvbnMgaW4gdGhlIHNvdXJjZSBmb3IgdGhlIGdpdmVuIG5vZGVzL3Bvc2l0aW9ucy5cblxuICAgIHRoaXMuc291cmNlID1cbiAgICAgIHNvdXJjZSAhPT0gbnVsbCAmJiBzb3VyY2UgIT09IHZvaWQgMFxuICAgICAgICA/IHNvdXJjZVxuICAgICAgICA6IG5vZGVMb2NhdGlvbnMgPT09IG51bGwgfHwgbm9kZUxvY2F0aW9ucyA9PT0gdm9pZCAwXG4gICAgICAgID8gdm9pZCAwXG4gICAgICAgIDogKF9ub2RlTG9jYXRpb25zJCA9IG5vZGVMb2NhdGlvbnNbMF0pID09PSBudWxsIHx8XG4gICAgICAgICAgX25vZGVMb2NhdGlvbnMkID09PSB2b2lkIDBcbiAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgOiBfbm9kZUxvY2F0aW9ucyQuc291cmNlO1xuICAgIHRoaXMucG9zaXRpb25zID1cbiAgICAgIHBvc2l0aW9ucyAhPT0gbnVsbCAmJiBwb3NpdGlvbnMgIT09IHZvaWQgMFxuICAgICAgICA/IHBvc2l0aW9uc1xuICAgICAgICA6IG5vZGVMb2NhdGlvbnMgPT09IG51bGwgfHwgbm9kZUxvY2F0aW9ucyA9PT0gdm9pZCAwXG4gICAgICAgID8gdm9pZCAwXG4gICAgICAgIDogbm9kZUxvY2F0aW9ucy5tYXAoKGxvYykgPT4gbG9jLnN0YXJ0KTtcbiAgICB0aGlzLmxvY2F0aW9ucyA9XG4gICAgICBwb3NpdGlvbnMgJiYgc291cmNlXG4gICAgICAgID8gcG9zaXRpb25zLm1hcCgocG9zKSA9PiBnZXRMb2NhdGlvbihzb3VyY2UsIHBvcykpXG4gICAgICAgIDogbm9kZUxvY2F0aW9ucyA9PT0gbnVsbCB8fCBub2RlTG9jYXRpb25zID09PSB2b2lkIDBcbiAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgOiBub2RlTG9jYXRpb25zLm1hcCgobG9jKSA9PiBnZXRMb2NhdGlvbihsb2Muc291cmNlLCBsb2Muc3RhcnQpKTtcbiAgICBjb25zdCBvcmlnaW5hbEV4dGVuc2lvbnMgPSBpc09iamVjdExpa2UoXG4gICAgICBvcmlnaW5hbEVycm9yID09PSBudWxsIHx8IG9yaWdpbmFsRXJyb3IgPT09IHZvaWQgMFxuICAgICAgICA/IHZvaWQgMFxuICAgICAgICA6IG9yaWdpbmFsRXJyb3IuZXh0ZW5zaW9ucyxcbiAgICApXG4gICAgICA/IG9yaWdpbmFsRXJyb3IgPT09IG51bGwgfHwgb3JpZ2luYWxFcnJvciA9PT0gdm9pZCAwXG4gICAgICAgID8gdm9pZCAwXG4gICAgICAgIDogb3JpZ2luYWxFcnJvci5leHRlbnNpb25zXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgICB0aGlzLmV4dGVuc2lvbnMgPVxuICAgICAgKF9yZWYgPVxuICAgICAgICBleHRlbnNpb25zICE9PSBudWxsICYmIGV4dGVuc2lvbnMgIT09IHZvaWQgMFxuICAgICAgICAgID8gZXh0ZW5zaW9uc1xuICAgICAgICAgIDogb3JpZ2luYWxFeHRlbnNpb25zKSAhPT0gbnVsbCAmJiBfcmVmICE9PSB2b2lkIDBcbiAgICAgICAgPyBfcmVmXG4gICAgICAgIDogT2JqZWN0LmNyZWF0ZShudWxsKTsgLy8gT25seSBwcm9wZXJ0aWVzIHByZXNjcmliZWQgYnkgdGhlIHNwZWMgc2hvdWxkIGJlIGVudW1lcmFibGUuXG4gICAgLy8gS2VlcCB0aGUgcmVzdCBhcyBub24tZW51bWVyYWJsZS5cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICB9LFxuICAgICAgbmFtZToge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBub2Rlczoge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB9LFxuICAgICAgcG9zaXRpb25zOiB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIG9yaWdpbmFsRXJyb3I6IHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB9LFxuICAgIH0pOyAvLyBJbmNsdWRlIChub24tZW51bWVyYWJsZSkgc3RhY2sgdHJhY2UuXG5cbiAgICAvKiBjOCBpZ25vcmUgc3RhcnQgKi9cbiAgICAvLyBGSVhNRTogaHR0cHM6Ly9naXRodWIuY29tL2dyYXBocWwvZ3JhcGhxbC1qcy9pc3N1ZXMvMjMxN1xuXG4gICAgaWYgKFxuICAgICAgb3JpZ2luYWxFcnJvciAhPT0gbnVsbCAmJlxuICAgICAgb3JpZ2luYWxFcnJvciAhPT0gdm9pZCAwICYmXG4gICAgICBvcmlnaW5hbEVycm9yLnN0YWNrXG4gICAgKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3N0YWNrJywge1xuICAgICAgICB2YWx1ZTogb3JpZ2luYWxFcnJvci5zdGFjayxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEdyYXBoUUxFcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnc3RhY2snLCB7XG4gICAgICAgIHZhbHVlOiBFcnJvcigpLnN0YWNrLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuICAgIC8qIGM4IGlnbm9yZSBzdG9wICovXG4gIH1cblxuICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG4gICAgcmV0dXJuICdHcmFwaFFMRXJyb3InO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgbGV0IG91dHB1dCA9IHRoaXMubWVzc2FnZTtcblxuICAgIGlmICh0aGlzLm5vZGVzKSB7XG4gICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgdGhpcy5ub2Rlcykge1xuICAgICAgICBpZiAobm9kZS5sb2MpIHtcbiAgICAgICAgICBvdXRwdXQgKz0gJ1xcblxcbicgKyBwcmludExvY2F0aW9uKG5vZGUubG9jKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5zb3VyY2UgJiYgdGhpcy5sb2NhdGlvbnMpIHtcbiAgICAgIGZvciAoY29uc3QgbG9jYXRpb24gb2YgdGhpcy5sb2NhdGlvbnMpIHtcbiAgICAgICAgb3V0cHV0ICs9ICdcXG5cXG4nICsgcHJpbnRTb3VyY2VMb2NhdGlvbih0aGlzLnNvdXJjZSwgbG9jYXRpb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgY29uc3QgZm9ybWF0dGVkRXJyb3IgPSB7XG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmxvY2F0aW9ucyAhPSBudWxsKSB7XG4gICAgICBmb3JtYXR0ZWRFcnJvci5sb2NhdGlvbnMgPSB0aGlzLmxvY2F0aW9ucztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXRoICE9IG51bGwpIHtcbiAgICAgIGZvcm1hdHRlZEVycm9yLnBhdGggPSB0aGlzLnBhdGg7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZXh0ZW5zaW9ucyAhPSBudWxsICYmIE9iamVjdC5rZXlzKHRoaXMuZXh0ZW5zaW9ucykubGVuZ3RoID4gMCkge1xuICAgICAgZm9ybWF0dGVkRXJyb3IuZXh0ZW5zaW9ucyA9IHRoaXMuZXh0ZW5zaW9ucztcbiAgICB9XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkRXJyb3I7XG4gIH1cbn1cblxuZnVuY3Rpb24gdW5kZWZpbmVkSWZFbXB0eShhcnJheSkge1xuICByZXR1cm4gYXJyYXkgPT09IHVuZGVmaW5lZCB8fCBhcnJheS5sZW5ndGggPT09IDAgPyB1bmRlZmluZWQgOiBhcnJheTtcbn1cbi8qKlxuICogU2VlOiBodHRwczovL3NwZWMuZ3JhcGhxbC5vcmcvZHJhZnQvI3NlYy1FcnJvcnNcbiAqL1xuXG4vKipcbiAqIFByaW50cyBhIEdyYXBoUUxFcnJvciB0byBhIHN0cmluZywgcmVwcmVzZW50aW5nIHVzZWZ1bCBsb2NhdGlvbiBpbmZvcm1hdGlvblxuICogYWJvdXQgdGhlIGVycm9yJ3MgcG9zaXRpb24gaW4gdGhlIHNvdXJjZS5cbiAqXG4gKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBlcnJvci50b1N0cmluZ2AgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIHYxN1xuICovXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRFcnJvcihlcnJvcikge1xuICByZXR1cm4gZXJyb3IudG9TdHJpbmcoKTtcbn1cbi8qKlxuICogR2l2ZW4gYSBHcmFwaFFMRXJyb3IsIGZvcm1hdCBpdCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIGRlc2NyaWJlZCBieSB0aGVcbiAqIFJlc3BvbnNlIEZvcm1hdCwgRXJyb3JzIHNlY3Rpb24gb2YgdGhlIEdyYXBoUUwgU3BlY2lmaWNhdGlvbi5cbiAqXG4gKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBlcnJvci50b0pTT05gIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiB2MTdcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3IpIHtcbiAgcmV0dXJuIGVycm9yLnRvSlNPTigpO1xufVxuIiwKICAgICJpbXBvcnQgeyBHcmFwaFFMRXJyb3IgfSBmcm9tICcuL0dyYXBoUUxFcnJvci5tanMnO1xuLyoqXG4gKiBQcm9kdWNlcyBhIEdyYXBoUUxFcnJvciByZXByZXNlbnRpbmcgYSBzeW50YXggZXJyb3IsIGNvbnRhaW5pbmcgdXNlZnVsXG4gKiBkZXNjcmlwdGl2ZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc3ludGF4IGVycm9yJ3MgcG9zaXRpb24gaW4gdGhlIHNvdXJjZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3ludGF4RXJyb3Ioc291cmNlLCBwb3NpdGlvbiwgZGVzY3JpcHRpb24pIHtcbiAgcmV0dXJuIG5ldyBHcmFwaFFMRXJyb3IoYFN5bnRheCBFcnJvcjogJHtkZXNjcmlwdGlvbn1gLCB7XG4gICAgc291cmNlLFxuICAgIHBvc2l0aW9uczogW3Bvc2l0aW9uXSxcbiAgfSk7XG59XG4iLAogICAgIi8qKlxuICogQ29udGFpbnMgYSByYW5nZSBvZiBVVEYtOCBjaGFyYWN0ZXIgb2Zmc2V0cyBhbmQgdG9rZW4gcmVmZXJlbmNlcyB0aGF0XG4gKiBpZGVudGlmeSB0aGUgcmVnaW9uIG9mIHRoZSBzb3VyY2UgZnJvbSB3aGljaCB0aGUgQVNUIGRlcml2ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2NhdGlvbiB7XG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGlzIE5vZGUgYmVnaW5zLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGNoYXJhY3RlciBvZmZzZXQgYXQgd2hpY2ggdGhpcyBOb2RlIGVuZHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgVG9rZW4gYXQgd2hpY2ggdGhpcyBOb2RlIGJlZ2lucy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBUb2tlbiBhdCB3aGljaCB0aGlzIE5vZGUgZW5kcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBTb3VyY2UgZG9jdW1lbnQgdGhlIEFTVCByZXByZXNlbnRzLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioc3RhcnRUb2tlbiwgZW5kVG9rZW4sIHNvdXJjZSkge1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydFRva2VuLnN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kVG9rZW4uZW5kO1xuICAgIHRoaXMuc3RhcnRUb2tlbiA9IHN0YXJ0VG9rZW47XG4gICAgdGhpcy5lbmRUb2tlbiA9IGVuZFRva2VuO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICB9XG5cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgIHJldHVybiAnTG9jYXRpb24nO1xuICB9XG5cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogdGhpcy5zdGFydCxcbiAgICAgIGVuZDogdGhpcy5lbmQsXG4gICAgfTtcbiAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcmFuZ2Ugb2YgY2hhcmFjdGVycyByZXByZXNlbnRlZCBieSBhIGxleGljYWwgdG9rZW5cbiAqIHdpdGhpbiBhIFNvdXJjZS5cbiAqL1xuXG5leHBvcnQgY2xhc3MgVG9rZW4ge1xuICAvKipcbiAgICogVGhlIGtpbmQgb2YgVG9rZW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGlzIE5vZGUgYmVnaW5zLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGNoYXJhY3RlciBvZmZzZXQgYXQgd2hpY2ggdGhpcyBOb2RlIGVuZHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgMS1pbmRleGVkIGxpbmUgbnVtYmVyIG9uIHdoaWNoIHRoaXMgVG9rZW4gYXBwZWFycy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSAxLWluZGV4ZWQgY29sdW1uIG51bWJlciBhdCB3aGljaCB0aGlzIFRva2VuIGJlZ2lucy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEZvciBub24tcHVuY3R1YXRpb24gdG9rZW5zLCByZXByZXNlbnRzIHRoZSBpbnRlcnByZXRlZCB2YWx1ZSBvZiB0aGUgdG9rZW4uXG4gICAqXG4gICAqIE5vdGU6IGlzIHVuZGVmaW5lZCBmb3IgcHVuY3R1YXRpb24gdG9rZW5zLCBidXQgdHlwZWQgYXMgc3RyaW5nIGZvclxuICAgKiBjb252ZW5pZW5jZSBpbiB0aGUgcGFyc2VyLlxuICAgKi9cblxuICAvKipcbiAgICogVG9rZW5zIGV4aXN0IGFzIG5vZGVzIGluIGEgZG91YmxlLWxpbmtlZC1saXN0IGFtb25nc3QgYWxsIHRva2Vuc1xuICAgKiBpbmNsdWRpbmcgaWdub3JlZCB0b2tlbnMuIDxTT0Y+IGlzIGFsd2F5cyB0aGUgZmlyc3Qgbm9kZSBhbmQgPEVPRj5cbiAgICogdGhlIGxhc3QuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihraW5kLCBzdGFydCwgZW5kLCBsaW5lLCBjb2x1bW4sIHZhbHVlKSB7XG4gICAgdGhpcy5raW5kID0ga2luZDtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5lbmQgPSBlbmQ7XG4gICAgdGhpcy5saW5lID0gbGluZTtcbiAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cblxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLnByZXYgPSBudWxsO1xuICAgIHRoaXMubmV4dCA9IG51bGw7XG4gIH1cblxuICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG4gICAgcmV0dXJuICdUb2tlbic7XG4gIH1cblxuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IHRoaXMua2luZCxcbiAgICAgIHZhbHVlOiB0aGlzLnZhbHVlLFxuICAgICAgbGluZTogdGhpcy5saW5lLFxuICAgICAgY29sdW1uOiB0aGlzLmNvbHVtbixcbiAgICB9O1xuICB9XG59XG4vKipcbiAqIFRoZSBsaXN0IG9mIGFsbCBwb3NzaWJsZSBBU1Qgbm9kZSB0eXBlcy5cbiAqL1xuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgY29uc3QgUXVlcnlEb2N1bWVudEtleXMgPSB7XG4gIE5hbWU6IFtdLFxuICBEb2N1bWVudDogWydkZWZpbml0aW9ucyddLFxuICBPcGVyYXRpb25EZWZpbml0aW9uOiBbXG4gICAgJ25hbWUnLFxuICAgICd2YXJpYWJsZURlZmluaXRpb25zJyxcbiAgICAnZGlyZWN0aXZlcycsXG4gICAgJ3NlbGVjdGlvblNldCcsXG4gIF0sXG4gIFZhcmlhYmxlRGVmaW5pdGlvbjogWyd2YXJpYWJsZScsICd0eXBlJywgJ2RlZmF1bHRWYWx1ZScsICdkaXJlY3RpdmVzJ10sXG4gIFZhcmlhYmxlOiBbJ25hbWUnXSxcbiAgU2VsZWN0aW9uU2V0OiBbJ3NlbGVjdGlvbnMnXSxcbiAgRmllbGQ6IFsnYWxpYXMnLCAnbmFtZScsICdhcmd1bWVudHMnLCAnZGlyZWN0aXZlcycsICdzZWxlY3Rpb25TZXQnXSxcbiAgQXJndW1lbnQ6IFsnbmFtZScsICd2YWx1ZSddLFxuICBGcmFnbWVudFNwcmVhZDogWyduYW1lJywgJ2RpcmVjdGl2ZXMnXSxcbiAgSW5saW5lRnJhZ21lbnQ6IFsndHlwZUNvbmRpdGlvbicsICdkaXJlY3RpdmVzJywgJ3NlbGVjdGlvblNldCddLFxuICBGcmFnbWVudERlZmluaXRpb246IFtcbiAgICAnbmFtZScsIC8vIE5vdGU6IGZyYWdtZW50IHZhcmlhYmxlIGRlZmluaXRpb25zIGFyZSBkZXByZWNhdGVkIGFuZCB3aWxsIHJlbW92ZWQgaW4gdjE3LjAuMFxuICAgICd2YXJpYWJsZURlZmluaXRpb25zJyxcbiAgICAndHlwZUNvbmRpdGlvbicsXG4gICAgJ2RpcmVjdGl2ZXMnLFxuICAgICdzZWxlY3Rpb25TZXQnLFxuICBdLFxuICBJbnRWYWx1ZTogW10sXG4gIEZsb2F0VmFsdWU6IFtdLFxuICBTdHJpbmdWYWx1ZTogW10sXG4gIEJvb2xlYW5WYWx1ZTogW10sXG4gIE51bGxWYWx1ZTogW10sXG4gIEVudW1WYWx1ZTogW10sXG4gIExpc3RWYWx1ZTogWyd2YWx1ZXMnXSxcbiAgT2JqZWN0VmFsdWU6IFsnZmllbGRzJ10sXG4gIE9iamVjdEZpZWxkOiBbJ25hbWUnLCAndmFsdWUnXSxcbiAgRGlyZWN0aXZlOiBbJ25hbWUnLCAnYXJndW1lbnRzJ10sXG4gIE5hbWVkVHlwZTogWyduYW1lJ10sXG4gIExpc3RUeXBlOiBbJ3R5cGUnXSxcbiAgTm9uTnVsbFR5cGU6IFsndHlwZSddLFxuICBTY2hlbWFEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ2RpcmVjdGl2ZXMnLCAnb3BlcmF0aW9uVHlwZXMnXSxcbiAgT3BlcmF0aW9uVHlwZURlZmluaXRpb246IFsndHlwZSddLFxuICBTY2FsYXJUeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnXSxcbiAgT2JqZWN0VHlwZURlZmluaXRpb246IFtcbiAgICAnZGVzY3JpcHRpb24nLFxuICAgICduYW1lJyxcbiAgICAnaW50ZXJmYWNlcycsXG4gICAgJ2RpcmVjdGl2ZXMnLFxuICAgICdmaWVsZHMnLFxuICBdLFxuICBGaWVsZERlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdhcmd1bWVudHMnLCAndHlwZScsICdkaXJlY3RpdmVzJ10sXG4gIElucHV0VmFsdWVEZWZpbml0aW9uOiBbXG4gICAgJ2Rlc2NyaXB0aW9uJyxcbiAgICAnbmFtZScsXG4gICAgJ3R5cGUnLFxuICAgICdkZWZhdWx0VmFsdWUnLFxuICAgICdkaXJlY3RpdmVzJyxcbiAgXSxcbiAgSW50ZXJmYWNlVHlwZURlZmluaXRpb246IFtcbiAgICAnZGVzY3JpcHRpb24nLFxuICAgICduYW1lJyxcbiAgICAnaW50ZXJmYWNlcycsXG4gICAgJ2RpcmVjdGl2ZXMnLFxuICAgICdmaWVsZHMnLFxuICBdLFxuICBVbmlvblR5cGVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnZGlyZWN0aXZlcycsICd0eXBlcyddLFxuICBFbnVtVHlwZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdkaXJlY3RpdmVzJywgJ3ZhbHVlcyddLFxuICBFbnVtVmFsdWVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnZGlyZWN0aXZlcyddLFxuICBJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnZGlyZWN0aXZlcycsICdmaWVsZHMnXSxcbiAgRGlyZWN0aXZlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2FyZ3VtZW50cycsICdsb2NhdGlvbnMnXSxcbiAgU2NoZW1hRXh0ZW5zaW9uOiBbJ2RpcmVjdGl2ZXMnLCAnb3BlcmF0aW9uVHlwZXMnXSxcbiAgU2NhbGFyVHlwZUV4dGVuc2lvbjogWyduYW1lJywgJ2RpcmVjdGl2ZXMnXSxcbiAgT2JqZWN0VHlwZUV4dGVuc2lvbjogWyduYW1lJywgJ2ludGVyZmFjZXMnLCAnZGlyZWN0aXZlcycsICdmaWVsZHMnXSxcbiAgSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjogWyduYW1lJywgJ2ludGVyZmFjZXMnLCAnZGlyZWN0aXZlcycsICdmaWVsZHMnXSxcbiAgVW5pb25UeXBlRXh0ZW5zaW9uOiBbJ25hbWUnLCAnZGlyZWN0aXZlcycsICd0eXBlcyddLFxuICBFbnVtVHlwZUV4dGVuc2lvbjogWyduYW1lJywgJ2RpcmVjdGl2ZXMnLCAndmFsdWVzJ10sXG4gIElucHV0T2JqZWN0VHlwZUV4dGVuc2lvbjogWyduYW1lJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG59O1xuY29uc3Qga2luZFZhbHVlcyA9IG5ldyBTZXQoT2JqZWN0LmtleXMoUXVlcnlEb2N1bWVudEtleXMpKTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTm9kZShtYXliZU5vZGUpIHtcbiAgY29uc3QgbWF5YmVLaW5kID1cbiAgICBtYXliZU5vZGUgPT09IG51bGwgfHwgbWF5YmVOb2RlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXliZU5vZGUua2luZDtcbiAgcmV0dXJuIHR5cGVvZiBtYXliZUtpbmQgPT09ICdzdHJpbmcnICYmIGtpbmRWYWx1ZXMuaGFzKG1heWJlS2luZCk7XG59XG4vKiogTmFtZSAqL1xuXG52YXIgT3BlcmF0aW9uVHlwZU5vZGU7XG5cbihmdW5jdGlvbiAoT3BlcmF0aW9uVHlwZU5vZGUpIHtcbiAgT3BlcmF0aW9uVHlwZU5vZGVbJ1FVRVJZJ10gPSAncXVlcnknO1xuICBPcGVyYXRpb25UeXBlTm9kZVsnTVVUQVRJT04nXSA9ICdtdXRhdGlvbic7XG4gIE9wZXJhdGlvblR5cGVOb2RlWydTVUJTQ1JJUFRJT04nXSA9ICdzdWJzY3JpcHRpb24nO1xufSkoT3BlcmF0aW9uVHlwZU5vZGUgfHwgKE9wZXJhdGlvblR5cGVOb2RlID0ge30pKTtcblxuZXhwb3J0IHsgT3BlcmF0aW9uVHlwZU5vZGUgfTtcbiIsCiAgICAiLyoqXG4gKiBUaGUgc2V0IG9mIGFsbG93ZWQgZGlyZWN0aXZlIGxvY2F0aW9uIHZhbHVlcy5cbiAqL1xudmFyIERpcmVjdGl2ZUxvY2F0aW9uO1xuXG4oZnVuY3Rpb24gKERpcmVjdGl2ZUxvY2F0aW9uKSB7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydRVUVSWSddID0gJ1FVRVJZJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ01VVEFUSU9OJ10gPSAnTVVUQVRJT04nO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnU1VCU0NSSVBUSU9OJ10gPSAnU1VCU0NSSVBUSU9OJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ0ZJRUxEJ10gPSAnRklFTEQnO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnRlJBR01FTlRfREVGSU5JVElPTiddID0gJ0ZSQUdNRU5UX0RFRklOSVRJT04nO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnRlJBR01FTlRfU1BSRUFEJ10gPSAnRlJBR01FTlRfU1BSRUFEJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ0lOTElORV9GUkFHTUVOVCddID0gJ0lOTElORV9GUkFHTUVOVCc7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydWQVJJQUJMRV9ERUZJTklUSU9OJ10gPSAnVkFSSUFCTEVfREVGSU5JVElPTic7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydTQ0hFTUEnXSA9ICdTQ0hFTUEnO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnU0NBTEFSJ10gPSAnU0NBTEFSJztcbiAgRGlyZWN0aXZlTG9jYXRpb25bJ09CSkVDVCddID0gJ09CSkVDVCc7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydGSUVMRF9ERUZJTklUSU9OJ10gPSAnRklFTERfREVGSU5JVElPTic7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydBUkdVTUVOVF9ERUZJTklUSU9OJ10gPSAnQVJHVU1FTlRfREVGSU5JVElPTic7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydJTlRFUkZBQ0UnXSA9ICdJTlRFUkZBQ0UnO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnVU5JT04nXSA9ICdVTklPTic7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydFTlVNJ10gPSAnRU5VTSc7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydFTlVNX1ZBTFVFJ10gPSAnRU5VTV9WQUxVRSc7XG4gIERpcmVjdGl2ZUxvY2F0aW9uWydJTlBVVF9PQkpFQ1QnXSA9ICdJTlBVVF9PQkpFQ1QnO1xuICBEaXJlY3RpdmVMb2NhdGlvblsnSU5QVVRfRklFTERfREVGSU5JVElPTiddID0gJ0lOUFVUX0ZJRUxEX0RFRklOSVRJT04nO1xufSkoRGlyZWN0aXZlTG9jYXRpb24gfHwgKERpcmVjdGl2ZUxvY2F0aW9uID0ge30pKTtcblxuZXhwb3J0IHsgRGlyZWN0aXZlTG9jYXRpb24gfTtcbi8qKlxuICogVGhlIGVudW0gdHlwZSByZXByZXNlbnRpbmcgdGhlIGRpcmVjdGl2ZSBsb2NhdGlvbiB2YWx1ZXMuXG4gKlxuICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBgRGlyZWN0aXZlTG9jYXRpb25gLiBXaWxsIGJlIHJlbW92ZSBpbiB2MTcuXG4gKi9cbiIsCiAgICAiLyoqXG4gKiBUaGUgc2V0IG9mIGFsbG93ZWQga2luZCB2YWx1ZXMgZm9yIEFTVCBub2Rlcy5cbiAqL1xudmFyIEtpbmQ7XG5cbihmdW5jdGlvbiAoS2luZCkge1xuICBLaW5kWydOQU1FJ10gPSAnTmFtZSc7XG4gIEtpbmRbJ0RPQ1VNRU5UJ10gPSAnRG9jdW1lbnQnO1xuICBLaW5kWydPUEVSQVRJT05fREVGSU5JVElPTiddID0gJ09wZXJhdGlvbkRlZmluaXRpb24nO1xuICBLaW5kWydWQVJJQUJMRV9ERUZJTklUSU9OJ10gPSAnVmFyaWFibGVEZWZpbml0aW9uJztcbiAgS2luZFsnU0VMRUNUSU9OX1NFVCddID0gJ1NlbGVjdGlvblNldCc7XG4gIEtpbmRbJ0ZJRUxEJ10gPSAnRmllbGQnO1xuICBLaW5kWydBUkdVTUVOVCddID0gJ0FyZ3VtZW50JztcbiAgS2luZFsnRlJBR01FTlRfU1BSRUFEJ10gPSAnRnJhZ21lbnRTcHJlYWQnO1xuICBLaW5kWydJTkxJTkVfRlJBR01FTlQnXSA9ICdJbmxpbmVGcmFnbWVudCc7XG4gIEtpbmRbJ0ZSQUdNRU5UX0RFRklOSVRJT04nXSA9ICdGcmFnbWVudERlZmluaXRpb24nO1xuICBLaW5kWydWQVJJQUJMRSddID0gJ1ZhcmlhYmxlJztcbiAgS2luZFsnSU5UJ10gPSAnSW50VmFsdWUnO1xuICBLaW5kWydGTE9BVCddID0gJ0Zsb2F0VmFsdWUnO1xuICBLaW5kWydTVFJJTkcnXSA9ICdTdHJpbmdWYWx1ZSc7XG4gIEtpbmRbJ0JPT0xFQU4nXSA9ICdCb29sZWFuVmFsdWUnO1xuICBLaW5kWydOVUxMJ10gPSAnTnVsbFZhbHVlJztcbiAgS2luZFsnRU5VTSddID0gJ0VudW1WYWx1ZSc7XG4gIEtpbmRbJ0xJU1QnXSA9ICdMaXN0VmFsdWUnO1xuICBLaW5kWydPQkpFQ1QnXSA9ICdPYmplY3RWYWx1ZSc7XG4gIEtpbmRbJ09CSkVDVF9GSUVMRCddID0gJ09iamVjdEZpZWxkJztcbiAgS2luZFsnRElSRUNUSVZFJ10gPSAnRGlyZWN0aXZlJztcbiAgS2luZFsnTkFNRURfVFlQRSddID0gJ05hbWVkVHlwZSc7XG4gIEtpbmRbJ0xJU1RfVFlQRSddID0gJ0xpc3RUeXBlJztcbiAgS2luZFsnTk9OX05VTExfVFlQRSddID0gJ05vbk51bGxUeXBlJztcbiAgS2luZFsnU0NIRU1BX0RFRklOSVRJT04nXSA9ICdTY2hlbWFEZWZpbml0aW9uJztcbiAgS2luZFsnT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTiddID0gJ09wZXJhdGlvblR5cGVEZWZpbml0aW9uJztcbiAgS2luZFsnU0NBTEFSX1RZUEVfREVGSU5JVElPTiddID0gJ1NjYWxhclR5cGVEZWZpbml0aW9uJztcbiAgS2luZFsnT0JKRUNUX1RZUEVfREVGSU5JVElPTiddID0gJ09iamVjdFR5cGVEZWZpbml0aW9uJztcbiAgS2luZFsnRklFTERfREVGSU5JVElPTiddID0gJ0ZpZWxkRGVmaW5pdGlvbic7XG4gIEtpbmRbJ0lOUFVUX1ZBTFVFX0RFRklOSVRJT04nXSA9ICdJbnB1dFZhbHVlRGVmaW5pdGlvbic7XG4gIEtpbmRbJ0lOVEVSRkFDRV9UWVBFX0RFRklOSVRJT04nXSA9ICdJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbic7XG4gIEtpbmRbJ1VOSU9OX1RZUEVfREVGSU5JVElPTiddID0gJ1VuaW9uVHlwZURlZmluaXRpb24nO1xuICBLaW5kWydFTlVNX1RZUEVfREVGSU5JVElPTiddID0gJ0VudW1UeXBlRGVmaW5pdGlvbic7XG4gIEtpbmRbJ0VOVU1fVkFMVUVfREVGSU5JVElPTiddID0gJ0VudW1WYWx1ZURlZmluaXRpb24nO1xuICBLaW5kWydJTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OJ10gPSAnSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbic7XG4gIEtpbmRbJ0RJUkVDVElWRV9ERUZJTklUSU9OJ10gPSAnRGlyZWN0aXZlRGVmaW5pdGlvbic7XG4gIEtpbmRbJ1NDSEVNQV9FWFRFTlNJT04nXSA9ICdTY2hlbWFFeHRlbnNpb24nO1xuICBLaW5kWydTQ0FMQVJfVFlQRV9FWFRFTlNJT04nXSA9ICdTY2FsYXJUeXBlRXh0ZW5zaW9uJztcbiAgS2luZFsnT0JKRUNUX1RZUEVfRVhURU5TSU9OJ10gPSAnT2JqZWN0VHlwZUV4dGVuc2lvbic7XG4gIEtpbmRbJ0lOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTiddID0gJ0ludGVyZmFjZVR5cGVFeHRlbnNpb24nO1xuICBLaW5kWydVTklPTl9UWVBFX0VYVEVOU0lPTiddID0gJ1VuaW9uVHlwZUV4dGVuc2lvbic7XG4gIEtpbmRbJ0VOVU1fVFlQRV9FWFRFTlNJT04nXSA9ICdFbnVtVHlwZUV4dGVuc2lvbic7XG4gIEtpbmRbJ0lOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTiddID0gJ0lucHV0T2JqZWN0VHlwZUV4dGVuc2lvbic7XG59KShLaW5kIHx8IChLaW5kID0ge30pKTtcblxuZXhwb3J0IHsgS2luZCB9O1xuLyoqXG4gKiBUaGUgZW51bSB0eXBlIHJlcHJlc2VudGluZyB0aGUgcG9zc2libGUga2luZCB2YWx1ZXMgb2YgQVNUIG5vZGVzLlxuICpcbiAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgYEtpbmRgLiBXaWxsIGJlIHJlbW92ZSBpbiB2MTcuXG4gKi9cbiIsCiAgICAiLyoqXG4gKiBgYGBcbiAqIFdoaXRlU3BhY2UgOjpcbiAqICAgLSBcIkhvcml6b250YWwgVGFiIChVKzAwMDkpXCJcbiAqICAgLSBcIlNwYWNlIChVKzAwMjApXCJcbiAqIGBgYFxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1doaXRlU3BhY2UoY29kZSkge1xuICByZXR1cm4gY29kZSA9PT0gMHgwMDA5IHx8IGNvZGUgPT09IDB4MDAyMDtcbn1cbi8qKlxuICogYGBgXG4gKiBEaWdpdCA6OiBvbmUgb2ZcbiAqICAgLSBgMGAgYDFgIGAyYCBgM2AgYDRgIGA1YCBgNmAgYDdgIGA4YCBgOWBcbiAqIGBgYFxuICogQGludGVybmFsXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGlnaXQoY29kZSkge1xuICByZXR1cm4gY29kZSA+PSAweDAwMzAgJiYgY29kZSA8PSAweDAwMzk7XG59XG4vKipcbiAqIGBgYFxuICogTGV0dGVyIDo6IG9uZSBvZlxuICogICAtIGBBYCBgQmAgYENgIGBEYCBgRWAgYEZgIGBHYCBgSGAgYElgIGBKYCBgS2AgYExgIGBNYFxuICogICAtIGBOYCBgT2AgYFBgIGBRYCBgUmAgYFNgIGBUYCBgVWAgYFZgIGBXYCBgWGAgYFlgIGBaYFxuICogICAtIGBhYCBgYmAgYGNgIGBkYCBgZWAgYGZgIGBnYCBgaGAgYGlgIGBqYCBga2AgYGxgIGBtYFxuICogICAtIGBuYCBgb2AgYHBgIGBxYCBgcmAgYHNgIGB0YCBgdWAgYHZgIGB3YCBgeGAgYHlgIGB6YFxuICogYGBgXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNMZXR0ZXIoY29kZSkge1xuICByZXR1cm4gKFxuICAgIChjb2RlID49IDB4MDA2MSAmJiBjb2RlIDw9IDB4MDA3YSkgfHwgLy8gQS1aXG4gICAgKGNvZGUgPj0gMHgwMDQxICYmIGNvZGUgPD0gMHgwMDVhKSAvLyBhLXpcbiAgKTtcbn1cbi8qKlxuICogYGBgXG4gKiBOYW1lU3RhcnQgOjpcbiAqICAgLSBMZXR0ZXJcbiAqICAgLSBgX2BcbiAqIGBgYFxuICogQGludGVybmFsXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTmFtZVN0YXJ0KGNvZGUpIHtcbiAgcmV0dXJuIGlzTGV0dGVyKGNvZGUpIHx8IGNvZGUgPT09IDB4MDA1Zjtcbn1cbi8qKlxuICogYGBgXG4gKiBOYW1lQ29udGludWUgOjpcbiAqICAgLSBMZXR0ZXJcbiAqICAgLSBEaWdpdFxuICogICAtIGBfYFxuICogYGBgXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNOYW1lQ29udGludWUoY29kZSkge1xuICByZXR1cm4gaXNMZXR0ZXIoY29kZSkgfHwgaXNEaWdpdChjb2RlKSB8fCBjb2RlID09PSAweDAwNWY7XG59XG4iLAogICAgImltcG9ydCB7IGlzV2hpdGVTcGFjZSB9IGZyb20gJy4vY2hhcmFjdGVyQ2xhc3Nlcy5tanMnO1xuLyoqXG4gKiBQcm9kdWNlcyB0aGUgdmFsdWUgb2YgYSBibG9jayBzdHJpbmcgZnJvbSBpdHMgcGFyc2VkIHJhdyB2YWx1ZSwgc2ltaWxhciB0b1xuICogQ29mZmVlU2NyaXB0J3MgYmxvY2sgc3RyaW5nLCBQeXRob24ncyBkb2NzdHJpbmcgdHJpbSBvciBSdWJ5J3Mgc3RyaXBfaGVyZWRvYy5cbiAqXG4gKiBUaGlzIGltcGxlbWVudHMgdGhlIEdyYXBoUUwgc3BlYydzIEJsb2NrU3RyaW5nVmFsdWUoKSBzdGF0aWMgYWxnb3JpdGhtLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWRlbnRCbG9ja1N0cmluZ0xpbmVzKGxpbmVzKSB7XG4gIHZhciBfZmlyc3ROb25FbXB0eUxpbmUyO1xuXG4gIGxldCBjb21tb25JbmRlbnQgPSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcbiAgbGV0IGZpcnN0Tm9uRW1wdHlMaW5lID0gbnVsbDtcbiAgbGV0IGxhc3ROb25FbXB0eUxpbmUgPSAtMTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgdmFyIF9maXJzdE5vbkVtcHR5TGluZTtcblxuICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICBjb25zdCBpbmRlbnQgPSBsZWFkaW5nV2hpdGVzcGFjZShsaW5lKTtcblxuICAgIGlmIChpbmRlbnQgPT09IGxpbmUubGVuZ3RoKSB7XG4gICAgICBjb250aW51ZTsgLy8gc2tpcCBlbXB0eSBsaW5lc1xuICAgIH1cblxuICAgIGZpcnN0Tm9uRW1wdHlMaW5lID1cbiAgICAgIChfZmlyc3ROb25FbXB0eUxpbmUgPSBmaXJzdE5vbkVtcHR5TGluZSkgIT09IG51bGwgJiZcbiAgICAgIF9maXJzdE5vbkVtcHR5TGluZSAhPT0gdm9pZCAwXG4gICAgICAgID8gX2ZpcnN0Tm9uRW1wdHlMaW5lXG4gICAgICAgIDogaTtcbiAgICBsYXN0Tm9uRW1wdHlMaW5lID0gaTtcblxuICAgIGlmIChpICE9PSAwICYmIGluZGVudCA8IGNvbW1vbkluZGVudCkge1xuICAgICAgY29tbW9uSW5kZW50ID0gaW5kZW50O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBsaW5lcyAvLyBSZW1vdmUgY29tbW9uIGluZGVudGF0aW9uIGZyb20gYWxsIGxpbmVzIGJ1dCBmaXJzdC5cbiAgICAubWFwKChsaW5lLCBpKSA9PiAoaSA9PT0gMCA/IGxpbmUgOiBsaW5lLnNsaWNlKGNvbW1vbkluZGVudCkpKSAvLyBSZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgYmxhbmsgbGluZXMuXG4gICAgLnNsaWNlKFxuICAgICAgKF9maXJzdE5vbkVtcHR5TGluZTIgPSBmaXJzdE5vbkVtcHR5TGluZSkgIT09IG51bGwgJiZcbiAgICAgICAgX2ZpcnN0Tm9uRW1wdHlMaW5lMiAhPT0gdm9pZCAwXG4gICAgICAgID8gX2ZpcnN0Tm9uRW1wdHlMaW5lMlxuICAgICAgICA6IDAsXG4gICAgICBsYXN0Tm9uRW1wdHlMaW5lICsgMSxcbiAgICApO1xufVxuXG5mdW5jdGlvbiBsZWFkaW5nV2hpdGVzcGFjZShzdHIpIHtcbiAgbGV0IGkgPSAwO1xuXG4gIHdoaWxlIChpIDwgc3RyLmxlbmd0aCAmJiBpc1doaXRlU3BhY2Uoc3RyLmNoYXJDb2RlQXQoaSkpKSB7XG4gICAgKytpO1xuICB9XG5cbiAgcmV0dXJuIGk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ByaW50YWJsZUFzQmxvY2tTdHJpbmcodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09PSAnJykge1xuICAgIHJldHVybiB0cnVlOyAvLyBlbXB0eSBzdHJpbmcgaXMgcHJpbnRhYmxlXG4gIH1cblxuICBsZXQgaXNFbXB0eUxpbmUgPSB0cnVlO1xuICBsZXQgaGFzSW5kZW50ID0gZmFsc2U7XG4gIGxldCBoYXNDb21tb25JbmRlbnQgPSB0cnVlO1xuICBsZXQgc2Vlbk5vbkVtcHR5TGluZSA9IGZhbHNlO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyArK2kpIHtcbiAgICBzd2l0Y2ggKHZhbHVlLmNvZGVQb2ludEF0KGkpKSB7XG4gICAgICBjYXNlIDB4MDAwMDpcbiAgICAgIGNhc2UgMHgwMDAxOlxuICAgICAgY2FzZSAweDAwMDI6XG4gICAgICBjYXNlIDB4MDAwMzpcbiAgICAgIGNhc2UgMHgwMDA0OlxuICAgICAgY2FzZSAweDAwMDU6XG4gICAgICBjYXNlIDB4MDAwNjpcbiAgICAgIGNhc2UgMHgwMDA3OlxuICAgICAgY2FzZSAweDAwMDg6XG4gICAgICBjYXNlIDB4MDAwYjpcbiAgICAgIGNhc2UgMHgwMDBjOlxuICAgICAgY2FzZSAweDAwMGU6XG4gICAgICBjYXNlIDB4MDAwZjpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gSGFzIG5vbi1wcmludGFibGUgY2hhcmFjdGVyc1xuXG4gICAgICBjYXNlIDB4MDAwZDpcbiAgICAgICAgLy8gIFxcclxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAvLyBIYXMgXFxyIG9yIFxcclxcbiB3aGljaCB3aWxsIGJlIHJlcGxhY2VkIGFzIFxcblxuXG4gICAgICBjYXNlIDEwOlxuICAgICAgICAvLyAgXFxuXG4gICAgICAgIGlmIChpc0VtcHR5TGluZSAmJiAhc2Vlbk5vbkVtcHR5TGluZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gSGFzIGxlYWRpbmcgbmV3IGxpbmVcbiAgICAgICAgfVxuXG4gICAgICAgIHNlZW5Ob25FbXB0eUxpbmUgPSB0cnVlO1xuICAgICAgICBpc0VtcHR5TGluZSA9IHRydWU7XG4gICAgICAgIGhhc0luZGVudCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSA5OiAvLyAgIFxcdFxuXG4gICAgICBjYXNlIDMyOlxuICAgICAgICAvLyAgPHNwYWNlPlxuICAgICAgICBoYXNJbmRlbnQgfHwgKGhhc0luZGVudCA9IGlzRW1wdHlMaW5lKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGhhc0NvbW1vbkluZGVudCAmJiAoaGFzQ29tbW9uSW5kZW50ID0gaGFzSW5kZW50KTtcbiAgICAgICAgaXNFbXB0eUxpbmUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNFbXB0eUxpbmUpIHtcbiAgICByZXR1cm4gZmFsc2U7IC8vIEhhcyB0cmFpbGluZyBlbXB0eSBsaW5lc1xuICB9XG5cbiAgaWYgKGhhc0NvbW1vbkluZGVudCAmJiBzZWVuTm9uRW1wdHlMaW5lKSB7XG4gICAgcmV0dXJuIGZhbHNlOyAvLyBIYXMgaW50ZXJuYWwgaW5kZW50XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogUHJpbnQgYSBibG9jayBzdHJpbmcgaW4gdGhlIGluZGVudGVkIGJsb2NrIGZvcm0gYnkgYWRkaW5nIGEgbGVhZGluZyBhbmRcbiAqIHRyYWlsaW5nIGJsYW5rIGxpbmUuIEhvd2V2ZXIsIGlmIGEgYmxvY2sgc3RyaW5nIHN0YXJ0cyB3aXRoIHdoaXRlc3BhY2UgYW5kIGlzXG4gKiBhIHNpbmdsZS1saW5lLCBhZGRpbmcgYSBsZWFkaW5nIGJsYW5rIGxpbmUgd291bGQgc3RyaXAgdGhhdCB3aGl0ZXNwYWNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludEJsb2NrU3RyaW5nKHZhbHVlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGVzY2FwZWRWYWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1wiXCJcIi9nLCAnXFxcXFwiXCJcIicpOyAvLyBFeHBhbmQgYSBibG9jayBzdHJpbmcncyByYXcgdmFsdWUgaW50byBpbmRlcGVuZGVudCBsaW5lcy5cblxuICBjb25zdCBsaW5lcyA9IGVzY2FwZWRWYWx1ZS5zcGxpdCgvXFxyXFxufFtcXG5cXHJdL2cpO1xuICBjb25zdCBpc1NpbmdsZUxpbmUgPSBsaW5lcy5sZW5ndGggPT09IDE7IC8vIElmIGNvbW1vbiBpbmRlbnRhdGlvbiBpcyBmb3VuZCB3ZSBjYW4gZml4IHNvbWUgb2YgdGhvc2UgY2FzZXMgYnkgYWRkaW5nIGxlYWRpbmcgbmV3IGxpbmVcblxuICBjb25zdCBmb3JjZUxlYWRpbmdOZXdMaW5lID1cbiAgICBsaW5lcy5sZW5ndGggPiAxICYmXG4gICAgbGluZXNcbiAgICAgIC5zbGljZSgxKVxuICAgICAgLmV2ZXJ5KChsaW5lKSA9PiBsaW5lLmxlbmd0aCA9PT0gMCB8fCBpc1doaXRlU3BhY2UobGluZS5jaGFyQ29kZUF0KDApKSk7IC8vIFRyYWlsaW5nIHRyaXBsZSBxdW90ZXMganVzdCBsb29rcyBjb25mdXNpbmcgYnV0IGRvZXNuJ3QgZm9yY2UgdHJhaWxpbmcgbmV3IGxpbmVcblxuICBjb25zdCBoYXNUcmFpbGluZ1RyaXBsZVF1b3RlcyA9IGVzY2FwZWRWYWx1ZS5lbmRzV2l0aCgnXFxcXFwiXCJcIicpOyAvLyBUcmFpbGluZyBxdW90ZSAoc2luZ2xlIG9yIGRvdWJsZSkgb3Igc2xhc2ggZm9yY2VzIHRyYWlsaW5nIG5ldyBsaW5lXG5cbiAgY29uc3QgaGFzVHJhaWxpbmdRdW90ZSA9IHZhbHVlLmVuZHNXaXRoKCdcIicpICYmICFoYXNUcmFpbGluZ1RyaXBsZVF1b3RlcztcbiAgY29uc3QgaGFzVHJhaWxpbmdTbGFzaCA9IHZhbHVlLmVuZHNXaXRoKCdcXFxcJyk7XG4gIGNvbnN0IGZvcmNlVHJhaWxpbmdOZXdsaW5lID0gaGFzVHJhaWxpbmdRdW90ZSB8fCBoYXNUcmFpbGluZ1NsYXNoO1xuICBjb25zdCBwcmludEFzTXVsdGlwbGVMaW5lcyA9XG4gICAgIShvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCAmJiBvcHRpb25zLm1pbmltaXplKSAmJiAvLyBhZGQgbGVhZGluZyBhbmQgdHJhaWxpbmcgbmV3IGxpbmVzIG9ubHkgaWYgaXQgaW1wcm92ZXMgcmVhZGFiaWxpdHlcbiAgICAoIWlzU2luZ2xlTGluZSB8fFxuICAgICAgdmFsdWUubGVuZ3RoID4gNzAgfHxcbiAgICAgIGZvcmNlVHJhaWxpbmdOZXdsaW5lIHx8XG4gICAgICBmb3JjZUxlYWRpbmdOZXdMaW5lIHx8XG4gICAgICBoYXNUcmFpbGluZ1RyaXBsZVF1b3Rlcyk7XG4gIGxldCByZXN1bHQgPSAnJzsgLy8gRm9ybWF0IGEgbXVsdGktbGluZSBibG9jayBxdW90ZSB0byBhY2NvdW50IGZvciBsZWFkaW5nIHNwYWNlLlxuXG4gIGNvbnN0IHNraXBMZWFkaW5nTmV3TGluZSA9IGlzU2luZ2xlTGluZSAmJiBpc1doaXRlU3BhY2UodmFsdWUuY2hhckNvZGVBdCgwKSk7XG5cbiAgaWYgKChwcmludEFzTXVsdGlwbGVMaW5lcyAmJiAhc2tpcExlYWRpbmdOZXdMaW5lKSB8fCBmb3JjZUxlYWRpbmdOZXdMaW5lKSB7XG4gICAgcmVzdWx0ICs9ICdcXG4nO1xuICB9XG5cbiAgcmVzdWx0ICs9IGVzY2FwZWRWYWx1ZTtcblxuICBpZiAocHJpbnRBc011bHRpcGxlTGluZXMgfHwgZm9yY2VUcmFpbGluZ05ld2xpbmUpIHtcbiAgICByZXN1bHQgKz0gJ1xcbic7XG4gIH1cblxuICByZXR1cm4gJ1wiXCJcIicgKyByZXN1bHQgKyAnXCJcIlwiJztcbn1cbiIsCiAgICAiLyoqXG4gKiBBbiBleHBvcnRlZCBlbnVtIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCBraW5kcyBvZiB0b2tlbnMgdGhhdCB0aGVcbiAqIGxleGVyIGVtaXRzLlxuICovXG52YXIgVG9rZW5LaW5kO1xuXG4oZnVuY3Rpb24gKFRva2VuS2luZCkge1xuICBUb2tlbktpbmRbJ1NPRiddID0gJzxTT0Y+JztcbiAgVG9rZW5LaW5kWydFT0YnXSA9ICc8RU9GPic7XG4gIFRva2VuS2luZFsnQkFORyddID0gJyEnO1xuICBUb2tlbktpbmRbJ0RPTExBUiddID0gJyQnO1xuICBUb2tlbktpbmRbJ0FNUCddID0gJyYnO1xuICBUb2tlbktpbmRbJ1BBUkVOX0wnXSA9ICcoJztcbiAgVG9rZW5LaW5kWydQQVJFTl9SJ10gPSAnKSc7XG4gIFRva2VuS2luZFsnU1BSRUFEJ10gPSAnLi4uJztcbiAgVG9rZW5LaW5kWydDT0xPTiddID0gJzonO1xuICBUb2tlbktpbmRbJ0VRVUFMUyddID0gJz0nO1xuICBUb2tlbktpbmRbJ0FUJ10gPSAnQCc7XG4gIFRva2VuS2luZFsnQlJBQ0tFVF9MJ10gPSAnWyc7XG4gIFRva2VuS2luZFsnQlJBQ0tFVF9SJ10gPSAnXSc7XG4gIFRva2VuS2luZFsnQlJBQ0VfTCddID0gJ3snO1xuICBUb2tlbktpbmRbJ1BJUEUnXSA9ICd8JztcbiAgVG9rZW5LaW5kWydCUkFDRV9SJ10gPSAnfSc7XG4gIFRva2VuS2luZFsnTkFNRSddID0gJ05hbWUnO1xuICBUb2tlbktpbmRbJ0lOVCddID0gJ0ludCc7XG4gIFRva2VuS2luZFsnRkxPQVQnXSA9ICdGbG9hdCc7XG4gIFRva2VuS2luZFsnU1RSSU5HJ10gPSAnU3RyaW5nJztcbiAgVG9rZW5LaW5kWydCTE9DS19TVFJJTkcnXSA9ICdCbG9ja1N0cmluZyc7XG4gIFRva2VuS2luZFsnQ09NTUVOVCddID0gJ0NvbW1lbnQnO1xufSkoVG9rZW5LaW5kIHx8IChUb2tlbktpbmQgPSB7fSkpO1xuXG5leHBvcnQgeyBUb2tlbktpbmQgfTtcbi8qKlxuICogVGhlIGVudW0gdHlwZSByZXByZXNlbnRpbmcgdGhlIHRva2VuIGtpbmRzIHZhbHVlcy5cbiAqXG4gKiBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBUb2tlbktpbmRgLiBXaWxsIGJlIHJlbW92ZSBpbiB2MTcuXG4gKi9cbiIsCiAgICAiaW1wb3J0IHsgc3ludGF4RXJyb3IgfSBmcm9tICcuLi9lcnJvci9zeW50YXhFcnJvci5tanMnO1xuaW1wb3J0IHsgVG9rZW4gfSBmcm9tICcuL2FzdC5tanMnO1xuaW1wb3J0IHsgZGVkZW50QmxvY2tTdHJpbmdMaW5lcyB9IGZyb20gJy4vYmxvY2tTdHJpbmcubWpzJztcbmltcG9ydCB7IGlzRGlnaXQsIGlzTmFtZUNvbnRpbnVlLCBpc05hbWVTdGFydCB9IGZyb20gJy4vY2hhcmFjdGVyQ2xhc3Nlcy5tanMnO1xuaW1wb3J0IHsgVG9rZW5LaW5kIH0gZnJvbSAnLi90b2tlbktpbmQubWpzJztcbi8qKlxuICogR2l2ZW4gYSBTb3VyY2Ugb2JqZWN0LCBjcmVhdGVzIGEgTGV4ZXIgZm9yIHRoYXQgc291cmNlLlxuICogQSBMZXhlciBpcyBhIHN0YXRlZnVsIHN0cmVhbSBnZW5lcmF0b3IgaW4gdGhhdCBldmVyeSB0aW1lXG4gKiBpdCBpcyBhZHZhbmNlZCwgaXQgcmV0dXJucyB0aGUgbmV4dCB0b2tlbiBpbiB0aGUgU291cmNlLiBBc3N1bWluZyB0aGVcbiAqIHNvdXJjZSBsZXhlcywgdGhlIGZpbmFsIFRva2VuIGVtaXR0ZWQgYnkgdGhlIGxleGVyIHdpbGwgYmUgb2Yga2luZFxuICogRU9GLCBhZnRlciB3aGljaCB0aGUgbGV4ZXIgd2lsbCByZXBlYXRlZGx5IHJldHVybiB0aGUgc2FtZSBFT0YgdG9rZW5cbiAqIHdoZW5ldmVyIGNhbGxlZC5cbiAqL1xuXG5leHBvcnQgY2xhc3MgTGV4ZXIge1xuICAvKipcbiAgICogVGhlIHByZXZpb3VzbHkgZm9jdXNlZCBub24taWdub3JlZCB0b2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50bHkgZm9jdXNlZCBub24taWdub3JlZCB0b2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSAoMS1pbmRleGVkKSBsaW5lIGNvbnRhaW5pbmcgdGhlIGN1cnJlbnQgdG9rZW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGUgY3VycmVudCBsaW5lIGJlZ2lucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgIGNvbnN0IHN0YXJ0T2ZGaWxlVG9rZW4gPSBuZXcgVG9rZW4oVG9rZW5LaW5kLlNPRiwgMCwgMCwgMCwgMCk7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5sYXN0VG9rZW4gPSBzdGFydE9mRmlsZVRva2VuO1xuICAgIHRoaXMudG9rZW4gPSBzdGFydE9mRmlsZVRva2VuO1xuICAgIHRoaXMubGluZSA9IDE7XG4gICAgdGhpcy5saW5lU3RhcnQgPSAwO1xuICB9XG5cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgIHJldHVybiAnTGV4ZXInO1xuICB9XG4gIC8qKlxuICAgKiBBZHZhbmNlcyB0aGUgdG9rZW4gc3RyZWFtIHRvIHRoZSBuZXh0IG5vbi1pZ25vcmVkIHRva2VuLlxuICAgKi9cblxuICBhZHZhbmNlKCkge1xuICAgIHRoaXMubGFzdFRva2VuID0gdGhpcy50b2tlbjtcbiAgICBjb25zdCB0b2tlbiA9ICh0aGlzLnRva2VuID0gdGhpcy5sb29rYWhlYWQoKSk7XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG4gIC8qKlxuICAgKiBMb29rcyBhaGVhZCBhbmQgcmV0dXJucyB0aGUgbmV4dCBub24taWdub3JlZCB0b2tlbiwgYnV0IGRvZXMgbm90IGNoYW5nZVxuICAgKiB0aGUgc3RhdGUgb2YgTGV4ZXIuXG4gICAqL1xuXG4gIGxvb2thaGVhZCgpIHtcbiAgICBsZXQgdG9rZW4gPSB0aGlzLnRva2VuO1xuXG4gICAgaWYgKHRva2VuLmtpbmQgIT09IFRva2VuS2luZC5FT0YpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHRva2VuLm5leHQpIHtcbiAgICAgICAgICB0b2tlbiA9IHRva2VuLm5leHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVhZCB0aGUgbmV4dCB0b2tlbiBhbmQgZm9ybSBhIGxpbmsgaW4gdGhlIHRva2VuIGxpbmtlZC1saXN0LlxuICAgICAgICAgIGNvbnN0IG5leHRUb2tlbiA9IHJlYWROZXh0VG9rZW4odGhpcywgdG9rZW4uZW5kKTsgLy8gQHRzLWV4cGVjdC1lcnJvciBuZXh0IGlzIG9ubHkgbXV0YWJsZSBkdXJpbmcgcGFyc2luZy5cblxuICAgICAgICAgIHRva2VuLm5leHQgPSBuZXh0VG9rZW47IC8vIEB0cy1leHBlY3QtZXJyb3IgcHJldiBpcyBvbmx5IG11dGFibGUgZHVyaW5nIHBhcnNpbmcuXG5cbiAgICAgICAgICBuZXh0VG9rZW4ucHJldiA9IHRva2VuO1xuICAgICAgICAgIHRva2VuID0gbmV4dFRva2VuO1xuICAgICAgICB9XG4gICAgICB9IHdoaWxlICh0b2tlbi5raW5kID09PSBUb2tlbktpbmQuQ09NTUVOVCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1B1bmN0dWF0b3JUb2tlbktpbmQoa2luZCkge1xuICByZXR1cm4gKFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5CQU5HIHx8XG4gICAga2luZCA9PT0gVG9rZW5LaW5kLkRPTExBUiB8fFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5BTVAgfHxcbiAgICBraW5kID09PSBUb2tlbktpbmQuUEFSRU5fTCB8fFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5QQVJFTl9SIHx8XG4gICAga2luZCA9PT0gVG9rZW5LaW5kLlNQUkVBRCB8fFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5DT0xPTiB8fFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5FUVVBTFMgfHxcbiAgICBraW5kID09PSBUb2tlbktpbmQuQVQgfHxcbiAgICBraW5kID09PSBUb2tlbktpbmQuQlJBQ0tFVF9MIHx8XG4gICAga2luZCA9PT0gVG9rZW5LaW5kLkJSQUNLRVRfUiB8fFxuICAgIGtpbmQgPT09IFRva2VuS2luZC5CUkFDRV9MIHx8XG4gICAga2luZCA9PT0gVG9rZW5LaW5kLlBJUEUgfHxcbiAgICBraW5kID09PSBUb2tlbktpbmQuQlJBQ0VfUlxuICApO1xufVxuLyoqXG4gKiBBIFVuaWNvZGUgc2NhbGFyIHZhbHVlIGlzIGFueSBVbmljb2RlIGNvZGUgcG9pbnQgZXhjZXB0IHN1cnJvZ2F0ZSBjb2RlXG4gKiBwb2ludHMuIEluIG90aGVyIHdvcmRzLCB0aGUgaW5jbHVzaXZlIHJhbmdlcyBvZiB2YWx1ZXMgMHgwMDAwIHRvIDB4RDdGRiBhbmRcbiAqIDB4RTAwMCB0byAweDEwRkZGRi5cbiAqXG4gKiBTb3VyY2VDaGFyYWN0ZXIgOjpcbiAqICAgLSBcIkFueSBVbmljb2RlIHNjYWxhciB2YWx1ZVwiXG4gKi9cblxuZnVuY3Rpb24gaXNVbmljb2RlU2NhbGFyVmFsdWUoY29kZSkge1xuICByZXR1cm4gKFxuICAgIChjb2RlID49IDB4MDAwMCAmJiBjb2RlIDw9IDB4ZDdmZikgfHwgKGNvZGUgPj0gMHhlMDAwICYmIGNvZGUgPD0gMHgxMGZmZmYpXG4gICk7XG59XG4vKipcbiAqIFRoZSBHcmFwaFFMIHNwZWNpZmljYXRpb24gZGVmaW5lcyBzb3VyY2UgdGV4dCBhcyBhIHNlcXVlbmNlIG9mIHVuaWNvZGUgc2NhbGFyXG4gKiB2YWx1ZXMgKHdoaWNoIFVuaWNvZGUgZGVmaW5lcyB0byBleGNsdWRlIHN1cnJvZ2F0ZSBjb2RlIHBvaW50cykuIEhvd2V2ZXJcbiAqIEphdmFTY3JpcHQgZGVmaW5lcyBzdHJpbmdzIGFzIGEgc2VxdWVuY2Ugb2YgVVRGLTE2IGNvZGUgdW5pdHMgd2hpY2ggbWF5XG4gKiBpbmNsdWRlIHN1cnJvZ2F0ZXMuIEEgc3Vycm9nYXRlIHBhaXIgaXMgYSB2YWxpZCBzb3VyY2UgY2hhcmFjdGVyIGFzIGl0XG4gKiBlbmNvZGVzIGEgc3VwcGxlbWVudGFyeSBjb2RlIHBvaW50IChhYm92ZSBVK0ZGRkYpLCBidXQgdW5wYWlyZWQgc3Vycm9nYXRlXG4gKiBjb2RlIHBvaW50cyBhcmUgbm90IHZhbGlkIHNvdXJjZSBjaGFyYWN0ZXJzLlxuICovXG5cbmZ1bmN0aW9uIGlzU3VwcGxlbWVudGFyeUNvZGVQb2ludChib2R5LCBsb2NhdGlvbikge1xuICByZXR1cm4gKFxuICAgIGlzTGVhZGluZ1N1cnJvZ2F0ZShib2R5LmNoYXJDb2RlQXQobG9jYXRpb24pKSAmJlxuICAgIGlzVHJhaWxpbmdTdXJyb2dhdGUoYm9keS5jaGFyQ29kZUF0KGxvY2F0aW9uICsgMSkpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGlzTGVhZGluZ1N1cnJvZ2F0ZShjb2RlKSB7XG4gIHJldHVybiBjb2RlID49IDB4ZDgwMCAmJiBjb2RlIDw9IDB4ZGJmZjtcbn1cblxuZnVuY3Rpb24gaXNUcmFpbGluZ1N1cnJvZ2F0ZShjb2RlKSB7XG4gIHJldHVybiBjb2RlID49IDB4ZGMwMCAmJiBjb2RlIDw9IDB4ZGZmZjtcbn1cbi8qKlxuICogUHJpbnRzIHRoZSBjb2RlIHBvaW50IChvciBlbmQgb2YgZmlsZSByZWZlcmVuY2UpIGF0IGEgZ2l2ZW4gbG9jYXRpb24gaW4gYVxuICogc291cmNlIGZvciB1c2UgaW4gZXJyb3IgbWVzc2FnZXMuXG4gKlxuICogUHJpbnRhYmxlIEFTQ0lJIGlzIHByaW50ZWQgcXVvdGVkLCB3aGlsZSBvdGhlciBwb2ludHMgYXJlIHByaW50ZWQgaW4gVW5pY29kZVxuICogY29kZSBwb2ludCBmb3JtIChpZS4gVSsxMjM0KS5cbiAqL1xuXG5mdW5jdGlvbiBwcmludENvZGVQb2ludEF0KGxleGVyLCBsb2NhdGlvbikge1xuICBjb25zdCBjb2RlID0gbGV4ZXIuc291cmNlLmJvZHkuY29kZVBvaW50QXQobG9jYXRpb24pO1xuXG4gIGlmIChjb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gVG9rZW5LaW5kLkVPRjtcbiAgfSBlbHNlIGlmIChjb2RlID49IDB4MDAyMCAmJiBjb2RlIDw9IDB4MDA3ZSkge1xuICAgIC8vIFByaW50YWJsZSBBU0NJSVxuICAgIGNvbnN0IGNoYXIgPSBTdHJpbmcuZnJvbUNvZGVQb2ludChjb2RlKTtcbiAgICByZXR1cm4gY2hhciA9PT0gJ1wiJyA/IFwiJ1xcXCInXCIgOiBgXCIke2NoYXJ9XCJgO1xuICB9IC8vIFVuaWNvZGUgY29kZSBwb2ludFxuXG4gIHJldHVybiAnVSsnICsgY29kZS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5wYWRTdGFydCg0LCAnMCcpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSB0b2tlbiB3aXRoIGxpbmUgYW5kIGNvbHVtbiBsb2NhdGlvbiBpbmZvcm1hdGlvbi5cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVUb2tlbihsZXhlciwga2luZCwgc3RhcnQsIGVuZCwgdmFsdWUpIHtcbiAgY29uc3QgbGluZSA9IGxleGVyLmxpbmU7XG4gIGNvbnN0IGNvbCA9IDEgKyBzdGFydCAtIGxleGVyLmxpbmVTdGFydDtcbiAgcmV0dXJuIG5ldyBUb2tlbihraW5kLCBzdGFydCwgZW5kLCBsaW5lLCBjb2wsIHZhbHVlKTtcbn1cbi8qKlxuICogR2V0cyB0aGUgbmV4dCB0b2tlbiBmcm9tIHRoZSBzb3VyY2Ugc3RhcnRpbmcgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICpcbiAqIFRoaXMgc2tpcHMgb3ZlciB3aGl0ZXNwYWNlIHVudGlsIGl0IGZpbmRzIHRoZSBuZXh0IGxleGFibGUgdG9rZW4sIHRoZW4gbGV4ZXNcbiAqIHB1bmN0dWF0b3JzIGltbWVkaWF0ZWx5IG9yIGNhbGxzIHRoZSBhcHByb3ByaWF0ZSBoZWxwZXIgZnVuY3Rpb24gZm9yIG1vcmVcbiAqIGNvbXBsaWNhdGVkIHRva2Vucy5cbiAqL1xuXG5mdW5jdGlvbiByZWFkTmV4dFRva2VuKGxleGVyLCBzdGFydCkge1xuICBjb25zdCBib2R5ID0gbGV4ZXIuc291cmNlLmJvZHk7XG4gIGNvbnN0IGJvZHlMZW5ndGggPSBib2R5Lmxlbmd0aDtcbiAgbGV0IHBvc2l0aW9uID0gc3RhcnQ7XG5cbiAgd2hpbGUgKHBvc2l0aW9uIDwgYm9keUxlbmd0aCkge1xuICAgIGNvbnN0IGNvZGUgPSBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24pOyAvLyBTb3VyY2VDaGFyYWN0ZXJcblxuICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgLy8gSWdub3JlZCA6OlxuICAgICAgLy8gICAtIFVuaWNvZGVCT01cbiAgICAgIC8vICAgLSBXaGl0ZVNwYWNlXG4gICAgICAvLyAgIC0gTGluZVRlcm1pbmF0b3JcbiAgICAgIC8vICAgLSBDb21tZW50XG4gICAgICAvLyAgIC0gQ29tbWFcbiAgICAgIC8vXG4gICAgICAvLyBVbmljb2RlQk9NIDo6IFwiQnl0ZSBPcmRlciBNYXJrIChVK0ZFRkYpXCJcbiAgICAgIC8vXG4gICAgICAvLyBXaGl0ZVNwYWNlIDo6XG4gICAgICAvLyAgIC0gXCJIb3Jpem9udGFsIFRhYiAoVSswMDA5KVwiXG4gICAgICAvLyAgIC0gXCJTcGFjZSAoVSswMDIwKVwiXG4gICAgICAvL1xuICAgICAgLy8gQ29tbWEgOjogLFxuICAgICAgY2FzZSAweGZlZmY6IC8vIDxCT00+XG5cbiAgICAgIGNhc2UgMHgwMDA5OiAvLyBcXHRcblxuICAgICAgY2FzZSAweDAwMjA6IC8vIDxzcGFjZT5cblxuICAgICAgY2FzZSAweDAwMmM6XG4gICAgICAgIC8vICxcbiAgICAgICAgKytwb3NpdGlvbjtcbiAgICAgICAgY29udGludWU7XG4gICAgICAvLyBMaW5lVGVybWluYXRvciA6OlxuICAgICAgLy8gICAtIFwiTmV3IExpbmUgKFUrMDAwQSlcIlxuICAgICAgLy8gICAtIFwiQ2FycmlhZ2UgUmV0dXJuIChVKzAwMEQpXCIgW2xvb2thaGVhZCAhPSBcIk5ldyBMaW5lIChVKzAwMEEpXCJdXG4gICAgICAvLyAgIC0gXCJDYXJyaWFnZSBSZXR1cm4gKFUrMDAwRClcIiBcIk5ldyBMaW5lIChVKzAwMEEpXCJcblxuICAgICAgY2FzZSAweDAwMGE6XG4gICAgICAgIC8vIFxcblxuICAgICAgICArK3Bvc2l0aW9uO1xuICAgICAgICArK2xleGVyLmxpbmU7XG4gICAgICAgIGxleGVyLmxpbmVTdGFydCA9IHBvc2l0aW9uO1xuICAgICAgICBjb250aW51ZTtcblxuICAgICAgY2FzZSAweDAwMGQ6XG4gICAgICAgIC8vIFxcclxuICAgICAgICBpZiAoYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkgPT09IDB4MDAwYSkge1xuICAgICAgICAgIHBvc2l0aW9uICs9IDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKytwb3NpdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgICsrbGV4ZXIubGluZTtcbiAgICAgICAgbGV4ZXIubGluZVN0YXJ0ID0gcG9zaXRpb247XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgLy8gQ29tbWVudFxuXG4gICAgICBjYXNlIDB4MDAyMzpcbiAgICAgICAgLy8gI1xuICAgICAgICByZXR1cm4gcmVhZENvbW1lbnQobGV4ZXIsIHBvc2l0aW9uKTtcbiAgICAgIC8vIFRva2VuIDo6XG4gICAgICAvLyAgIC0gUHVuY3R1YXRvclxuICAgICAgLy8gICAtIE5hbWVcbiAgICAgIC8vICAgLSBJbnRWYWx1ZVxuICAgICAgLy8gICAtIEZsb2F0VmFsdWVcbiAgICAgIC8vICAgLSBTdHJpbmdWYWx1ZVxuICAgICAgLy9cbiAgICAgIC8vIFB1bmN0dWF0b3IgOjogb25lIG9mICEgJCAmICggKSAuLi4gOiA9IEAgWyBdIHsgfCB9XG5cbiAgICAgIGNhc2UgMHgwMDIxOlxuICAgICAgICAvLyAhXG4gICAgICAgIHJldHVybiBjcmVhdGVUb2tlbihsZXhlciwgVG9rZW5LaW5kLkJBTkcsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDEpO1xuXG4gICAgICBjYXNlIDB4MDAyNDpcbiAgICAgICAgLy8gJFxuICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5ET0xMQVIsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDEpO1xuXG4gICAgICBjYXNlIDB4MDAyNjpcbiAgICAgICAgLy8gJlxuICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5BTVAsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDEpO1xuXG4gICAgICBjYXNlIDB4MDAyODpcbiAgICAgICAgLy8gKFxuICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5QQVJFTl9MLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwMjk6XG4gICAgICAgIC8vIClcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuUEFSRU5fUiwgcG9zaXRpb24sIHBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGNhc2UgMHgwMDJlOlxuICAgICAgICAvLyAuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKSA9PT0gMHgwMDJlICYmXG4gICAgICAgICAgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMikgPT09IDB4MDAyZVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5TUFJFQUQsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDMpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgMHgwMDNhOlxuICAgICAgICAvLyA6XG4gICAgICAgIHJldHVybiBjcmVhdGVUb2tlbihsZXhlciwgVG9rZW5LaW5kLkNPTE9OLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwM2Q6XG4gICAgICAgIC8vID1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuRVFVQUxTLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwNDA6XG4gICAgICAgIC8vIEBcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuQVQsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDEpO1xuXG4gICAgICBjYXNlIDB4MDA1YjpcbiAgICAgICAgLy8gW1xuICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5CUkFDS0VUX0wsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDEpO1xuXG4gICAgICBjYXNlIDB4MDA1ZDpcbiAgICAgICAgLy8gXVxuICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5CUkFDS0VUX1IsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDEpO1xuXG4gICAgICBjYXNlIDB4MDA3YjpcbiAgICAgICAgLy8ge1xuICAgICAgICByZXR1cm4gY3JlYXRlVG9rZW4obGV4ZXIsIFRva2VuS2luZC5CUkFDRV9MLCBwb3NpdGlvbiwgcG9zaXRpb24gKyAxKTtcblxuICAgICAgY2FzZSAweDAwN2M6XG4gICAgICAgIC8vIHxcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuUElQRSwgcG9zaXRpb24sIHBvc2l0aW9uICsgMSk7XG5cbiAgICAgIGNhc2UgMHgwMDdkOlxuICAgICAgICAvLyB9XG4gICAgICAgIHJldHVybiBjcmVhdGVUb2tlbihsZXhlciwgVG9rZW5LaW5kLkJSQUNFX1IsIHBvc2l0aW9uLCBwb3NpdGlvbiArIDEpO1xuICAgICAgLy8gU3RyaW5nVmFsdWVcblxuICAgICAgY2FzZSAweDAwMjI6XG4gICAgICAgIC8vIFwiXG4gICAgICAgIGlmIChcbiAgICAgICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKSA9PT0gMHgwMDIyICYmXG4gICAgICAgICAgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMikgPT09IDB4MDAyMlxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gcmVhZEJsb2NrU3RyaW5nKGxleGVyLCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVhZFN0cmluZyhsZXhlciwgcG9zaXRpb24pO1xuICAgIH0gLy8gSW50VmFsdWUgfCBGbG9hdFZhbHVlIChEaWdpdCB8IC0pXG5cbiAgICBpZiAoaXNEaWdpdChjb2RlKSB8fCBjb2RlID09PSAweDAwMmQpIHtcbiAgICAgIHJldHVybiByZWFkTnVtYmVyKGxleGVyLCBwb3NpdGlvbiwgY29kZSk7XG4gICAgfSAvLyBOYW1lXG5cbiAgICBpZiAoaXNOYW1lU3RhcnQoY29kZSkpIHtcbiAgICAgIHJldHVybiByZWFkTmFtZShsZXhlciwgcG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRocm93IHN5bnRheEVycm9yKFxuICAgICAgbGV4ZXIuc291cmNlLFxuICAgICAgcG9zaXRpb24sXG4gICAgICBjb2RlID09PSAweDAwMjdcbiAgICAgICAgPyAnVW5leHBlY3RlZCBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyIChcXCcpLCBkaWQgeW91IG1lYW4gdG8gdXNlIGEgZG91YmxlIHF1b3RlIChcIik/J1xuICAgICAgICA6IGlzVW5pY29kZVNjYWxhclZhbHVlKGNvZGUpIHx8IGlzU3VwcGxlbWVudGFyeUNvZGVQb2ludChib2R5LCBwb3NpdGlvbilcbiAgICAgICAgPyBgVW5leHBlY3RlZCBjaGFyYWN0ZXI6ICR7cHJpbnRDb2RlUG9pbnRBdChsZXhlciwgcG9zaXRpb24pfS5gXG4gICAgICAgIDogYEludmFsaWQgY2hhcmFjdGVyOiAke3ByaW50Q29kZVBvaW50QXQobGV4ZXIsIHBvc2l0aW9uKX0uYCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuRU9GLCBib2R5TGVuZ3RoLCBib2R5TGVuZ3RoKTtcbn1cbi8qKlxuICogUmVhZHMgYSBjb21tZW50IHRva2VuIGZyb20gdGhlIHNvdXJjZSBmaWxlLlxuICpcbiAqIGBgYFxuICogQ29tbWVudCA6OiAjIENvbW1lbnRDaGFyKiBbbG9va2FoZWFkICE9IENvbW1lbnRDaGFyXVxuICpcbiAqIENvbW1lbnRDaGFyIDo6IFNvdXJjZUNoYXJhY3RlciBidXQgbm90IExpbmVUZXJtaW5hdG9yXG4gKiBgYGBcbiAqL1xuXG5mdW5jdGlvbiByZWFkQ29tbWVudChsZXhlciwgc3RhcnQpIHtcbiAgY29uc3QgYm9keSA9IGxleGVyLnNvdXJjZS5ib2R5O1xuICBjb25zdCBib2R5TGVuZ3RoID0gYm9keS5sZW5ndGg7XG4gIGxldCBwb3NpdGlvbiA9IHN0YXJ0ICsgMTtcblxuICB3aGlsZSAocG9zaXRpb24gPCBib2R5TGVuZ3RoKSB7XG4gICAgY29uc3QgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbik7IC8vIExpbmVUZXJtaW5hdG9yIChcXG4gfCBcXHIpXG5cbiAgICBpZiAoY29kZSA9PT0gMHgwMDBhIHx8IGNvZGUgPT09IDB4MDAwZCkge1xuICAgICAgYnJlYWs7XG4gICAgfSAvLyBTb3VyY2VDaGFyYWN0ZXJcblxuICAgIGlmIChpc1VuaWNvZGVTY2FsYXJWYWx1ZShjb2RlKSkge1xuICAgICAgKytwb3NpdGlvbjtcbiAgICB9IGVsc2UgaWYgKGlzU3VwcGxlbWVudGFyeUNvZGVQb2ludChib2R5LCBwb3NpdGlvbikpIHtcbiAgICAgIHBvc2l0aW9uICs9IDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjcmVhdGVUb2tlbihcbiAgICBsZXhlcixcbiAgICBUb2tlbktpbmQuQ09NTUVOVCxcbiAgICBzdGFydCxcbiAgICBwb3NpdGlvbixcbiAgICBib2R5LnNsaWNlKHN0YXJ0ICsgMSwgcG9zaXRpb24pLFxuICApO1xufVxuLyoqXG4gKiBSZWFkcyBhIG51bWJlciB0b2tlbiBmcm9tIHRoZSBzb3VyY2UgZmlsZSwgZWl0aGVyIGEgRmxvYXRWYWx1ZSBvciBhbiBJbnRWYWx1ZVxuICogZGVwZW5kaW5nIG9uIHdoZXRoZXIgYSBGcmFjdGlvbmFsUGFydCBvciBFeHBvbmVudFBhcnQgaXMgZW5jb3VudGVyZWQuXG4gKlxuICogYGBgXG4gKiBJbnRWYWx1ZSA6OiBJbnRlZ2VyUGFydCBbbG9va2FoZWFkICE9IHtEaWdpdCwgYC5gLCBOYW1lU3RhcnR9XVxuICpcbiAqIEludGVnZXJQYXJ0IDo6XG4gKiAgIC0gTmVnYXRpdmVTaWduPyAwXG4gKiAgIC0gTmVnYXRpdmVTaWduPyBOb25aZXJvRGlnaXQgRGlnaXQqXG4gKlxuICogTmVnYXRpdmVTaWduIDo6IC1cbiAqXG4gKiBOb25aZXJvRGlnaXQgOjogRGlnaXQgYnV0IG5vdCBgMGBcbiAqXG4gKiBGbG9hdFZhbHVlIDo6XG4gKiAgIC0gSW50ZWdlclBhcnQgRnJhY3Rpb25hbFBhcnQgRXhwb25lbnRQYXJ0IFtsb29rYWhlYWQgIT0ge0RpZ2l0LCBgLmAsIE5hbWVTdGFydH1dXG4gKiAgIC0gSW50ZWdlclBhcnQgRnJhY3Rpb25hbFBhcnQgW2xvb2thaGVhZCAhPSB7RGlnaXQsIGAuYCwgTmFtZVN0YXJ0fV1cbiAqICAgLSBJbnRlZ2VyUGFydCBFeHBvbmVudFBhcnQgW2xvb2thaGVhZCAhPSB7RGlnaXQsIGAuYCwgTmFtZVN0YXJ0fV1cbiAqXG4gKiBGcmFjdGlvbmFsUGFydCA6OiAuIERpZ2l0K1xuICpcbiAqIEV4cG9uZW50UGFydCA6OiBFeHBvbmVudEluZGljYXRvciBTaWduPyBEaWdpdCtcbiAqXG4gKiBFeHBvbmVudEluZGljYXRvciA6OiBvbmUgb2YgYGVgIGBFYFxuICpcbiAqIFNpZ24gOjogb25lIG9mICsgLVxuICogYGBgXG4gKi9cblxuZnVuY3Rpb24gcmVhZE51bWJlcihsZXhlciwgc3RhcnQsIGZpcnN0Q29kZSkge1xuICBjb25zdCBib2R5ID0gbGV4ZXIuc291cmNlLmJvZHk7XG4gIGxldCBwb3NpdGlvbiA9IHN0YXJ0O1xuICBsZXQgY29kZSA9IGZpcnN0Q29kZTtcbiAgbGV0IGlzRmxvYXQgPSBmYWxzZTsgLy8gTmVnYXRpdmVTaWduICgtKVxuXG4gIGlmIChjb2RlID09PSAweDAwMmQpIHtcbiAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KCsrcG9zaXRpb24pO1xuICB9IC8vIFplcm8gKDApXG5cbiAgaWYgKGNvZGUgPT09IDB4MDAzMCkge1xuICAgIGNvZGUgPSBib2R5LmNoYXJDb2RlQXQoKytwb3NpdGlvbik7XG5cbiAgICBpZiAoaXNEaWdpdChjb2RlKSkge1xuICAgICAgdGhyb3cgc3ludGF4RXJyb3IoXG4gICAgICAgIGxleGVyLnNvdXJjZSxcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIGBJbnZhbGlkIG51bWJlciwgdW5leHBlY3RlZCBkaWdpdCBhZnRlciAwOiAke3ByaW50Q29kZVBvaW50QXQoXG4gICAgICAgICAgbGV4ZXIsXG4gICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICl9LmAsXG4gICAgICApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwb3NpdGlvbiA9IHJlYWREaWdpdHMobGV4ZXIsIHBvc2l0aW9uLCBjb2RlKTtcbiAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uKTtcbiAgfSAvLyBGdWxsIHN0b3AgKC4pXG5cbiAgaWYgKGNvZGUgPT09IDB4MDAyZSkge1xuICAgIGlzRmxvYXQgPSB0cnVlO1xuICAgIGNvZGUgPSBib2R5LmNoYXJDb2RlQXQoKytwb3NpdGlvbik7XG4gICAgcG9zaXRpb24gPSByZWFkRGlnaXRzKGxleGVyLCBwb3NpdGlvbiwgY29kZSk7XG4gICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbik7XG4gIH0gLy8gRSBlXG5cbiAgaWYgKGNvZGUgPT09IDB4MDA0NSB8fCBjb2RlID09PSAweDAwNjUpIHtcbiAgICBpc0Zsb2F0ID0gdHJ1ZTtcbiAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KCsrcG9zaXRpb24pOyAvLyArIC1cblxuICAgIGlmIChjb2RlID09PSAweDAwMmIgfHwgY29kZSA9PT0gMHgwMDJkKSB7XG4gICAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KCsrcG9zaXRpb24pO1xuICAgIH1cblxuICAgIHBvc2l0aW9uID0gcmVhZERpZ2l0cyhsZXhlciwgcG9zaXRpb24sIGNvZGUpO1xuICAgIGNvZGUgPSBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24pO1xuICB9IC8vIE51bWJlcnMgY2Fubm90IGJlIGZvbGxvd2VkIGJ5IC4gb3IgTmFtZVN0YXJ0XG5cbiAgaWYgKGNvZGUgPT09IDB4MDAyZSB8fCBpc05hbWVTdGFydChjb2RlKSkge1xuICAgIHRocm93IHN5bnRheEVycm9yKFxuICAgICAgbGV4ZXIuc291cmNlLFxuICAgICAgcG9zaXRpb24sXG4gICAgICBgSW52YWxpZCBudW1iZXIsIGV4cGVjdGVkIGRpZ2l0IGJ1dCBnb3Q6ICR7cHJpbnRDb2RlUG9pbnRBdChcbiAgICAgICAgbGV4ZXIsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgKX0uYCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGNyZWF0ZVRva2VuKFxuICAgIGxleGVyLFxuICAgIGlzRmxvYXQgPyBUb2tlbktpbmQuRkxPQVQgOiBUb2tlbktpbmQuSU5ULFxuICAgIHN0YXJ0LFxuICAgIHBvc2l0aW9uLFxuICAgIGJvZHkuc2xpY2Uoc3RhcnQsIHBvc2l0aW9uKSxcbiAgKTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbmV3IHBvc2l0aW9uIGluIHRoZSBzb3VyY2UgYWZ0ZXIgcmVhZGluZyBvbmUgb3IgbW9yZSBkaWdpdHMuXG4gKi9cblxuZnVuY3Rpb24gcmVhZERpZ2l0cyhsZXhlciwgc3RhcnQsIGZpcnN0Q29kZSkge1xuICBpZiAoIWlzRGlnaXQoZmlyc3RDb2RlKSkge1xuICAgIHRocm93IHN5bnRheEVycm9yKFxuICAgICAgbGV4ZXIuc291cmNlLFxuICAgICAgc3RhcnQsXG4gICAgICBgSW52YWxpZCBudW1iZXIsIGV4cGVjdGVkIGRpZ2l0IGJ1dCBnb3Q6ICR7cHJpbnRDb2RlUG9pbnRBdChcbiAgICAgICAgbGV4ZXIsXG4gICAgICAgIHN0YXJ0LFxuICAgICAgKX0uYCxcbiAgICApO1xuICB9XG5cbiAgY29uc3QgYm9keSA9IGxleGVyLnNvdXJjZS5ib2R5O1xuICBsZXQgcG9zaXRpb24gPSBzdGFydCArIDE7IC8vICsxIHRvIHNraXAgZmlyc3QgZmlyc3RDb2RlXG5cbiAgd2hpbGUgKGlzRGlnaXQoYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uKSkpIHtcbiAgICArK3Bvc2l0aW9uO1xuICB9XG5cbiAgcmV0dXJuIHBvc2l0aW9uO1xufVxuLyoqXG4gKiBSZWFkcyBhIHNpbmdsZS1xdW90ZSBzdHJpbmcgdG9rZW4gZnJvbSB0aGUgc291cmNlIGZpbGUuXG4gKlxuICogYGBgXG4gKiBTdHJpbmdWYWx1ZSA6OlxuICogICAtIGBcIlwiYCBbbG9va2FoZWFkICE9IGBcImBdXG4gKiAgIC0gYFwiYCBTdHJpbmdDaGFyYWN0ZXIrIGBcImBcbiAqXG4gKiBTdHJpbmdDaGFyYWN0ZXIgOjpcbiAqICAgLSBTb3VyY2VDaGFyYWN0ZXIgYnV0IG5vdCBgXCJgIG9yIGBcXGAgb3IgTGluZVRlcm1pbmF0b3JcbiAqICAgLSBgXFx1YCBFc2NhcGVkVW5pY29kZVxuICogICAtIGBcXGAgRXNjYXBlZENoYXJhY3RlclxuICpcbiAqIEVzY2FwZWRVbmljb2RlIDo6XG4gKiAgIC0gYHtgIEhleERpZ2l0KyBgfWBcbiAqICAgLSBIZXhEaWdpdCBIZXhEaWdpdCBIZXhEaWdpdCBIZXhEaWdpdFxuICpcbiAqIEVzY2FwZWRDaGFyYWN0ZXIgOjogb25lIG9mIGBcImAgYFxcYCBgL2AgYGJgIGBmYCBgbmAgYHJgIGB0YFxuICogYGBgXG4gKi9cblxuZnVuY3Rpb24gcmVhZFN0cmluZyhsZXhlciwgc3RhcnQpIHtcbiAgY29uc3QgYm9keSA9IGxleGVyLnNvdXJjZS5ib2R5O1xuICBjb25zdCBib2R5TGVuZ3RoID0gYm9keS5sZW5ndGg7XG4gIGxldCBwb3NpdGlvbiA9IHN0YXJ0ICsgMTtcbiAgbGV0IGNodW5rU3RhcnQgPSBwb3NpdGlvbjtcbiAgbGV0IHZhbHVlID0gJyc7XG5cbiAgd2hpbGUgKHBvc2l0aW9uIDwgYm9keUxlbmd0aCkge1xuICAgIGNvbnN0IGNvZGUgPSBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24pOyAvLyBDbG9zaW5nIFF1b3RlIChcIilcblxuICAgIGlmIChjb2RlID09PSAweDAwMjIpIHtcbiAgICAgIHZhbHVlICs9IGJvZHkuc2xpY2UoY2h1bmtTdGFydCwgcG9zaXRpb24pO1xuICAgICAgcmV0dXJuIGNyZWF0ZVRva2VuKGxleGVyLCBUb2tlbktpbmQuU1RSSU5HLCBzdGFydCwgcG9zaXRpb24gKyAxLCB2YWx1ZSk7XG4gICAgfSAvLyBFc2NhcGUgU2VxdWVuY2UgKFxcKVxuXG4gICAgaWYgKGNvZGUgPT09IDB4MDA1Yykge1xuICAgICAgdmFsdWUgKz0gYm9keS5zbGljZShjaHVua1N0YXJ0LCBwb3NpdGlvbik7XG4gICAgICBjb25zdCBlc2NhcGUgPVxuICAgICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKSA9PT0gMHgwMDc1IC8vIHVcbiAgICAgICAgICA/IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDIpID09PSAweDAwN2IgLy8ge1xuICAgICAgICAgICAgPyByZWFkRXNjYXBlZFVuaWNvZGVWYXJpYWJsZVdpZHRoKGxleGVyLCBwb3NpdGlvbilcbiAgICAgICAgICAgIDogcmVhZEVzY2FwZWRVbmljb2RlRml4ZWRXaWR0aChsZXhlciwgcG9zaXRpb24pXG4gICAgICAgICAgOiByZWFkRXNjYXBlZENoYXJhY3RlcihsZXhlciwgcG9zaXRpb24pO1xuICAgICAgdmFsdWUgKz0gZXNjYXBlLnZhbHVlO1xuICAgICAgcG9zaXRpb24gKz0gZXNjYXBlLnNpemU7XG4gICAgICBjaHVua1N0YXJ0ID0gcG9zaXRpb247XG4gICAgICBjb250aW51ZTtcbiAgICB9IC8vIExpbmVUZXJtaW5hdG9yIChcXG4gfCBcXHIpXG5cbiAgICBpZiAoY29kZSA9PT0gMHgwMDBhIHx8IGNvZGUgPT09IDB4MDAwZCkge1xuICAgICAgYnJlYWs7XG4gICAgfSAvLyBTb3VyY2VDaGFyYWN0ZXJcblxuICAgIGlmIChpc1VuaWNvZGVTY2FsYXJWYWx1ZShjb2RlKSkge1xuICAgICAgKytwb3NpdGlvbjtcbiAgICB9IGVsc2UgaWYgKGlzU3VwcGxlbWVudGFyeUNvZGVQb2ludChib2R5LCBwb3NpdGlvbikpIHtcbiAgICAgIHBvc2l0aW9uICs9IDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IHN5bnRheEVycm9yKFxuICAgICAgICBsZXhlci5zb3VyY2UsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICBgSW52YWxpZCBjaGFyYWN0ZXIgd2l0aGluIFN0cmluZzogJHtwcmludENvZGVQb2ludEF0KFxuICAgICAgICAgIGxleGVyLFxuICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICApfS5gLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICB0aHJvdyBzeW50YXhFcnJvcihsZXhlci5zb3VyY2UsIHBvc2l0aW9uLCAnVW50ZXJtaW5hdGVkIHN0cmluZy4nKTtcbn0gLy8gVGhlIHN0cmluZyB2YWx1ZSBhbmQgbGV4ZWQgc2l6ZSBvZiBhbiBlc2NhcGUgc2VxdWVuY2UuXG5cbmZ1bmN0aW9uIHJlYWRFc2NhcGVkVW5pY29kZVZhcmlhYmxlV2lkdGgobGV4ZXIsIHBvc2l0aW9uKSB7XG4gIGNvbnN0IGJvZHkgPSBsZXhlci5zb3VyY2UuYm9keTtcbiAgbGV0IHBvaW50ID0gMDtcbiAgbGV0IHNpemUgPSAzOyAvLyBDYW5ub3QgYmUgbGFyZ2VyIHRoYW4gMTIgY2hhcnMgKFxcdXswMDAwMDAwMH0pLlxuXG4gIHdoaWxlIChzaXplIDwgMTIpIHtcbiAgICBjb25zdCBjb2RlID0gYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgc2l6ZSsrKTsgLy8gQ2xvc2luZyBCcmFjZSAofSlcblxuICAgIGlmIChjb2RlID09PSAweDAwN2QpIHtcbiAgICAgIC8vIE11c3QgYmUgYXQgbGVhc3QgNSBjaGFycyAoXFx1ezB9KSBhbmQgZW5jb2RlIGEgVW5pY29kZSBzY2FsYXIgdmFsdWUuXG4gICAgICBpZiAoc2l6ZSA8IDUgfHwgIWlzVW5pY29kZVNjYWxhclZhbHVlKHBvaW50KSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IFN0cmluZy5mcm9tQ29kZVBvaW50KHBvaW50KSxcbiAgICAgICAgc2l6ZSxcbiAgICAgIH07XG4gICAgfSAvLyBBcHBlbmQgdGhpcyBoZXggZGlnaXQgdG8gdGhlIGNvZGUgcG9pbnQuXG5cbiAgICBwb2ludCA9IChwb2ludCA8PCA0KSB8IHJlYWRIZXhEaWdpdChjb2RlKTtcblxuICAgIGlmIChwb2ludCA8IDApIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHRocm93IHN5bnRheEVycm9yKFxuICAgIGxleGVyLnNvdXJjZSxcbiAgICBwb3NpdGlvbixcbiAgICBgSW52YWxpZCBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZTogXCIke2JvZHkuc2xpY2UoXG4gICAgICBwb3NpdGlvbixcbiAgICAgIHBvc2l0aW9uICsgc2l6ZSxcbiAgICApfVwiLmAsXG4gICk7XG59XG5cbmZ1bmN0aW9uIHJlYWRFc2NhcGVkVW5pY29kZUZpeGVkV2lkdGgobGV4ZXIsIHBvc2l0aW9uKSB7XG4gIGNvbnN0IGJvZHkgPSBsZXhlci5zb3VyY2UuYm9keTtcbiAgY29uc3QgY29kZSA9IHJlYWQxNkJpdEhleENvZGUoYm9keSwgcG9zaXRpb24gKyAyKTtcblxuICBpZiAoaXNVbmljb2RlU2NhbGFyVmFsdWUoY29kZSkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IFN0cmluZy5mcm9tQ29kZVBvaW50KGNvZGUpLFxuICAgICAgc2l6ZTogNixcbiAgICB9O1xuICB9IC8vIEdyYXBoUUwgYWxsb3dzIEpTT04tc3R5bGUgc3Vycm9nYXRlIHBhaXIgZXNjYXBlIHNlcXVlbmNlcywgYnV0IG9ubHkgd2hlblxuICAvLyBhIHZhbGlkIHBhaXIgaXMgZm9ybWVkLlxuXG4gIGlmIChpc0xlYWRpbmdTdXJyb2dhdGUoY29kZSkpIHtcbiAgICAvLyBcXHVcbiAgICBpZiAoXG4gICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyA2KSA9PT0gMHgwMDVjICYmXG4gICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyA3KSA9PT0gMHgwMDc1XG4gICAgKSB7XG4gICAgICBjb25zdCB0cmFpbGluZ0NvZGUgPSByZWFkMTZCaXRIZXhDb2RlKGJvZHksIHBvc2l0aW9uICsgOCk7XG5cbiAgICAgIGlmIChpc1RyYWlsaW5nU3Vycm9nYXRlKHRyYWlsaW5nQ29kZSkpIHtcbiAgICAgICAgLy8gSmF2YVNjcmlwdCBkZWZpbmVzIHN0cmluZ3MgYXMgYSBzZXF1ZW5jZSBvZiBVVEYtMTYgY29kZSB1bml0cyBhbmRcbiAgICAgICAgLy8gZW5jb2RlcyBVbmljb2RlIGNvZGUgcG9pbnRzIGFib3ZlIFUrRkZGRiB1c2luZyBhIHN1cnJvZ2F0ZSBwYWlyIG9mXG4gICAgICAgIC8vIGNvZGUgdW5pdHMuIFNpbmNlIHRoaXMgaXMgYSBzdXJyb2dhdGUgcGFpciBlc2NhcGUgc2VxdWVuY2UsIGp1c3RcbiAgICAgICAgLy8gaW5jbHVkZSBib3RoIGNvZGVzIGludG8gdGhlIEphdmFTY3JpcHQgc3RyaW5nIHZhbHVlLiBIYWQgSmF2YVNjcmlwdFxuICAgICAgICAvLyBub3QgYmVlbiBpbnRlcm5hbGx5IGJhc2VkIG9uIFVURi0xNiwgdGhlbiB0aGlzIHN1cnJvZ2F0ZSBwYWlyIHdvdWxkXG4gICAgICAgIC8vIGJlIGRlY29kZWQgdG8gcmV0cmlldmUgdGhlIHN1cHBsZW1lbnRhcnkgY29kZSBwb2ludC5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogU3RyaW5nLmZyb21Db2RlUG9pbnQoY29kZSwgdHJhaWxpbmdDb2RlKSxcbiAgICAgICAgICBzaXplOiAxMixcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICBsZXhlci5zb3VyY2UsXG4gICAgcG9zaXRpb24sXG4gICAgYEludmFsaWQgVW5pY29kZSBlc2NhcGUgc2VxdWVuY2U6IFwiJHtib2R5LnNsaWNlKHBvc2l0aW9uLCBwb3NpdGlvbiArIDYpfVwiLmAsXG4gICk7XG59XG4vKipcbiAqIFJlYWRzIGZvdXIgaGV4YWRlY2ltYWwgY2hhcmFjdGVycyBhbmQgcmV0dXJucyB0aGUgcG9zaXRpdmUgaW50ZWdlciB0aGF0IDE2Yml0XG4gKiBoZXhhZGVjaW1hbCBzdHJpbmcgcmVwcmVzZW50cy4gRm9yIGV4YW1wbGUsIFwiMDAwZlwiIHdpbGwgcmV0dXJuIDE1LCBhbmQgXCJkZWFkXCJcbiAqIHdpbGwgcmV0dXJuIDU3MDA1LlxuICpcbiAqIFJldHVybnMgYSBuZWdhdGl2ZSBudW1iZXIgaWYgYW55IGNoYXIgd2FzIG5vdCBhIHZhbGlkIGhleGFkZWNpbWFsIGRpZ2l0LlxuICovXG5cbmZ1bmN0aW9uIHJlYWQxNkJpdEhleENvZGUoYm9keSwgcG9zaXRpb24pIHtcbiAgLy8gcmVhZEhleERpZ2l0KCkgcmV0dXJucyAtMSBvbiBlcnJvci4gT1JpbmcgYSBuZWdhdGl2ZSB2YWx1ZSB3aXRoIGFueSBvdGhlclxuICAvLyB2YWx1ZSBhbHdheXMgcHJvZHVjZXMgYSBuZWdhdGl2ZSB2YWx1ZS5cbiAgcmV0dXJuIChcbiAgICAocmVhZEhleERpZ2l0KGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbikpIDw8IDEyKSB8XG4gICAgKHJlYWRIZXhEaWdpdChib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKSkgPDwgOCkgfFxuICAgIChyZWFkSGV4RGlnaXQoYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMikpIDw8IDQpIHxcbiAgICByZWFkSGV4RGlnaXQoYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMykpXG4gICk7XG59XG4vKipcbiAqIFJlYWRzIGEgaGV4YWRlY2ltYWwgY2hhcmFjdGVyIGFuZCByZXR1cm5zIGl0cyBwb3NpdGl2ZSBpbnRlZ2VyIHZhbHVlICgwLTE1KS5cbiAqXG4gKiAnMCcgYmVjb21lcyAwLCAnOScgYmVjb21lcyA5XG4gKiAnQScgYmVjb21lcyAxMCwgJ0YnIGJlY29tZXMgMTVcbiAqICdhJyBiZWNvbWVzIDEwLCAnZicgYmVjb21lcyAxNVxuICpcbiAqIFJldHVybnMgLTEgaWYgdGhlIHByb3ZpZGVkIGNoYXJhY3RlciBjb2RlIHdhcyBub3QgYSB2YWxpZCBoZXhhZGVjaW1hbCBkaWdpdC5cbiAqXG4gKiBIZXhEaWdpdCA6OiBvbmUgb2ZcbiAqICAgLSBgMGAgYDFgIGAyYCBgM2AgYDRgIGA1YCBgNmAgYDdgIGA4YCBgOWBcbiAqICAgLSBgQWAgYEJgIGBDYCBgRGAgYEVgIGBGYFxuICogICAtIGBhYCBgYmAgYGNgIGBkYCBgZWAgYGZgXG4gKi9cblxuZnVuY3Rpb24gcmVhZEhleERpZ2l0KGNvZGUpIHtcbiAgcmV0dXJuIGNvZGUgPj0gMHgwMDMwICYmIGNvZGUgPD0gMHgwMDM5IC8vIDAtOVxuICAgID8gY29kZSAtIDB4MDAzMFxuICAgIDogY29kZSA+PSAweDAwNDEgJiYgY29kZSA8PSAweDAwNDYgLy8gQS1GXG4gICAgPyBjb2RlIC0gMHgwMDM3XG4gICAgOiBjb2RlID49IDB4MDA2MSAmJiBjb2RlIDw9IDB4MDA2NiAvLyBhLWZcbiAgICA/IGNvZGUgLSAweDAwNTdcbiAgICA6IC0xO1xufVxuLyoqXG4gKiB8IEVzY2FwZWQgQ2hhcmFjdGVyIHwgQ29kZSBQb2ludCB8IENoYXJhY3RlciBOYW1lICAgICAgICAgICAgICAgfFxuICogfCAtLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAqIHwgYFwiYCAgICAgICAgICAgICAgIHwgVSswMDIyICAgICB8IGRvdWJsZSBxdW90ZSAgICAgICAgICAgICAgICAgfFxuICogfCBgXFxgICAgICAgICAgICAgICAgfCBVKzAwNUMgICAgIHwgcmV2ZXJzZSBzb2xpZHVzIChiYWNrIHNsYXNoKSB8XG4gKiB8IGAvYCAgICAgICAgICAgICAgIHwgVSswMDJGICAgICB8IHNvbGlkdXMgKGZvcndhcmQgc2xhc2gpICAgICAgfFxuICogfCBgYmAgICAgICAgICAgICAgICB8IFUrMDAwOCAgICAgfCBiYWNrc3BhY2UgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYGZgICAgICAgICAgICAgICAgfCBVKzAwMEMgICAgIHwgZm9ybSBmZWVkICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGBuYCAgICAgICAgICAgICAgIHwgVSswMDBBICAgICB8IGxpbmUgZmVlZCAobmV3IGxpbmUpICAgICAgICAgfFxuICogfCBgcmAgICAgICAgICAgICAgICB8IFUrMDAwRCAgICAgfCBjYXJyaWFnZSByZXR1cm4gICAgICAgICAgICAgIHxcbiAqIHwgYHRgICAgICAgICAgICAgICAgfCBVKzAwMDkgICAgIHwgaG9yaXpvbnRhbCB0YWIgICAgICAgICAgICAgICB8XG4gKi9cblxuZnVuY3Rpb24gcmVhZEVzY2FwZWRDaGFyYWN0ZXIobGV4ZXIsIHBvc2l0aW9uKSB7XG4gIGNvbnN0IGJvZHkgPSBsZXhlci5zb3VyY2UuYm9keTtcbiAgY29uc3QgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDEpO1xuXG4gIHN3aXRjaCAoY29kZSkge1xuICAgIGNhc2UgMHgwMDIyOlxuICAgICAgLy8gXCJcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiAnXFx1MDAyMicsXG4gICAgICAgIHNpemU6IDIsXG4gICAgICB9O1xuXG4gICAgY2FzZSAweDAwNWM6XG4gICAgICAvLyBcXFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6ICdcXHUwMDVjJyxcbiAgICAgICAgc2l6ZTogMixcbiAgICAgIH07XG5cbiAgICBjYXNlIDB4MDAyZjpcbiAgICAgIC8vIC9cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiAnXFx1MDAyZicsXG4gICAgICAgIHNpemU6IDIsXG4gICAgICB9O1xuXG4gICAgY2FzZSAweDAwNjI6XG4gICAgICAvLyBiXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogJ1xcdTAwMDgnLFxuICAgICAgICBzaXplOiAyLFxuICAgICAgfTtcblxuICAgIGNhc2UgMHgwMDY2OlxuICAgICAgLy8gZlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6ICdcXHUwMDBjJyxcbiAgICAgICAgc2l6ZTogMixcbiAgICAgIH07XG5cbiAgICBjYXNlIDB4MDA2ZTpcbiAgICAgIC8vIG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiAnXFx1MDAwYScsXG4gICAgICAgIHNpemU6IDIsXG4gICAgICB9O1xuXG4gICAgY2FzZSAweDAwNzI6XG4gICAgICAvLyByXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogJ1xcdTAwMGQnLFxuICAgICAgICBzaXplOiAyLFxuICAgICAgfTtcblxuICAgIGNhc2UgMHgwMDc0OlxuICAgICAgLy8gdFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6ICdcXHUwMDA5JyxcbiAgICAgICAgc2l6ZTogMixcbiAgICAgIH07XG4gIH1cblxuICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICBsZXhlci5zb3VyY2UsXG4gICAgcG9zaXRpb24sXG4gICAgYEludmFsaWQgY2hhcmFjdGVyIGVzY2FwZSBzZXF1ZW5jZTogXCIke2JvZHkuc2xpY2UoXG4gICAgICBwb3NpdGlvbixcbiAgICAgIHBvc2l0aW9uICsgMixcbiAgICApfVwiLmAsXG4gICk7XG59XG4vKipcbiAqIFJlYWRzIGEgYmxvY2sgc3RyaW5nIHRva2VuIGZyb20gdGhlIHNvdXJjZSBmaWxlLlxuICpcbiAqIGBgYFxuICogU3RyaW5nVmFsdWUgOjpcbiAqICAgLSBgXCJcIlwiYCBCbG9ja1N0cmluZ0NoYXJhY3RlciogYFwiXCJcImBcbiAqXG4gKiBCbG9ja1N0cmluZ0NoYXJhY3RlciA6OlxuICogICAtIFNvdXJjZUNoYXJhY3RlciBidXQgbm90IGBcIlwiXCJgIG9yIGBcXFwiXCJcImBcbiAqICAgLSBgXFxcIlwiXCJgXG4gKiBgYGBcbiAqL1xuXG5mdW5jdGlvbiByZWFkQmxvY2tTdHJpbmcobGV4ZXIsIHN0YXJ0KSB7XG4gIGNvbnN0IGJvZHkgPSBsZXhlci5zb3VyY2UuYm9keTtcbiAgY29uc3QgYm9keUxlbmd0aCA9IGJvZHkubGVuZ3RoO1xuICBsZXQgbGluZVN0YXJ0ID0gbGV4ZXIubGluZVN0YXJ0O1xuICBsZXQgcG9zaXRpb24gPSBzdGFydCArIDM7XG4gIGxldCBjaHVua1N0YXJ0ID0gcG9zaXRpb247XG4gIGxldCBjdXJyZW50TGluZSA9ICcnO1xuICBjb25zdCBibG9ja0xpbmVzID0gW107XG5cbiAgd2hpbGUgKHBvc2l0aW9uIDwgYm9keUxlbmd0aCkge1xuICAgIGNvbnN0IGNvZGUgPSBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24pOyAvLyBDbG9zaW5nIFRyaXBsZS1RdW90ZSAoXCJcIlwiKVxuXG4gICAgaWYgKFxuICAgICAgY29kZSA9PT0gMHgwMDIyICYmXG4gICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKSA9PT0gMHgwMDIyICYmXG4gICAgICBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAyKSA9PT0gMHgwMDIyXG4gICAgKSB7XG4gICAgICBjdXJyZW50TGluZSArPSBib2R5LnNsaWNlKGNodW5rU3RhcnQsIHBvc2l0aW9uKTtcbiAgICAgIGJsb2NrTGluZXMucHVzaChjdXJyZW50TGluZSk7XG4gICAgICBjb25zdCB0b2tlbiA9IGNyZWF0ZVRva2VuKFxuICAgICAgICBsZXhlcixcbiAgICAgICAgVG9rZW5LaW5kLkJMT0NLX1NUUklORyxcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIHBvc2l0aW9uICsgMywgLy8gUmV0dXJuIGEgc3RyaW5nIG9mIHRoZSBsaW5lcyBqb2luZWQgd2l0aCBVKzAwMEEuXG4gICAgICAgIGRlZGVudEJsb2NrU3RyaW5nTGluZXMoYmxvY2tMaW5lcykuam9pbignXFxuJyksXG4gICAgICApO1xuICAgICAgbGV4ZXIubGluZSArPSBibG9ja0xpbmVzLmxlbmd0aCAtIDE7XG4gICAgICBsZXhlci5saW5lU3RhcnQgPSBsaW5lU3RhcnQ7XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfSAvLyBFc2NhcGVkIFRyaXBsZS1RdW90ZSAoXFxcIlwiXCIpXG5cbiAgICBpZiAoXG4gICAgICBjb2RlID09PSAweDAwNWMgJiZcbiAgICAgIGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDEpID09PSAweDAwMjIgJiZcbiAgICAgIGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDIpID09PSAweDAwMjIgJiZcbiAgICAgIGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDMpID09PSAweDAwMjJcbiAgICApIHtcbiAgICAgIGN1cnJlbnRMaW5lICs9IGJvZHkuc2xpY2UoY2h1bmtTdGFydCwgcG9zaXRpb24pO1xuICAgICAgY2h1bmtTdGFydCA9IHBvc2l0aW9uICsgMTsgLy8gc2tpcCBvbmx5IHNsYXNoXG5cbiAgICAgIHBvc2l0aW9uICs9IDQ7XG4gICAgICBjb250aW51ZTtcbiAgICB9IC8vIExpbmVUZXJtaW5hdG9yXG5cbiAgICBpZiAoY29kZSA9PT0gMHgwMDBhIHx8IGNvZGUgPT09IDB4MDAwZCkge1xuICAgICAgY3VycmVudExpbmUgKz0gYm9keS5zbGljZShjaHVua1N0YXJ0LCBwb3NpdGlvbik7XG4gICAgICBibG9ja0xpbmVzLnB1c2goY3VycmVudExpbmUpO1xuXG4gICAgICBpZiAoY29kZSA9PT0gMHgwMDBkICYmIGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDEpID09PSAweDAwMGEpIHtcbiAgICAgICAgcG9zaXRpb24gKz0gMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICsrcG9zaXRpb247XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRMaW5lID0gJyc7XG4gICAgICBjaHVua1N0YXJ0ID0gcG9zaXRpb247XG4gICAgICBsaW5lU3RhcnQgPSBwb3NpdGlvbjtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH0gLy8gU291cmNlQ2hhcmFjdGVyXG5cbiAgICBpZiAoaXNVbmljb2RlU2NhbGFyVmFsdWUoY29kZSkpIHtcbiAgICAgICsrcG9zaXRpb247XG4gICAgfSBlbHNlIGlmIChpc1N1cHBsZW1lbnRhcnlDb2RlUG9pbnQoYm9keSwgcG9zaXRpb24pKSB7XG4gICAgICBwb3NpdGlvbiArPSAyO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgICAgbGV4ZXIuc291cmNlLFxuICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgYEludmFsaWQgY2hhcmFjdGVyIHdpdGhpbiBTdHJpbmc6ICR7cHJpbnRDb2RlUG9pbnRBdChcbiAgICAgICAgICBsZXhlcixcbiAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgKX0uYCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgdGhyb3cgc3ludGF4RXJyb3IobGV4ZXIuc291cmNlLCBwb3NpdGlvbiwgJ1VudGVybWluYXRlZCBzdHJpbmcuJyk7XG59XG4vKipcbiAqIFJlYWRzIGFuIGFscGhhbnVtZXJpYyArIHVuZGVyc2NvcmUgbmFtZSBmcm9tIHRoZSBzb3VyY2UuXG4gKlxuICogYGBgXG4gKiBOYW1lIDo6XG4gKiAgIC0gTmFtZVN0YXJ0IE5hbWVDb250aW51ZSogW2xvb2thaGVhZCAhPSBOYW1lQ29udGludWVdXG4gKiBgYGBcbiAqL1xuXG5mdW5jdGlvbiByZWFkTmFtZShsZXhlciwgc3RhcnQpIHtcbiAgY29uc3QgYm9keSA9IGxleGVyLnNvdXJjZS5ib2R5O1xuICBjb25zdCBib2R5TGVuZ3RoID0gYm9keS5sZW5ndGg7XG4gIGxldCBwb3NpdGlvbiA9IHN0YXJ0ICsgMTtcblxuICB3aGlsZSAocG9zaXRpb24gPCBib2R5TGVuZ3RoKSB7XG4gICAgY29uc3QgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbik7XG5cbiAgICBpZiAoaXNOYW1lQ29udGludWUoY29kZSkpIHtcbiAgICAgICsrcG9zaXRpb247XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjcmVhdGVUb2tlbihcbiAgICBsZXhlcixcbiAgICBUb2tlbktpbmQuTkFNRSxcbiAgICBzdGFydCxcbiAgICBwb3NpdGlvbixcbiAgICBib2R5LnNsaWNlKHN0YXJ0LCBwb3NpdGlvbiksXG4gICk7XG59XG4iLAogICAgImNvbnN0IE1BWF9BUlJBWV9MRU5HVEggPSAxMDtcbmNvbnN0IE1BWF9SRUNVUlNJVkVfREVQVEggPSAyO1xuLyoqXG4gKiBVc2VkIHRvIHByaW50IHZhbHVlcyBpbiBlcnJvciBtZXNzYWdlcy5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW5zcGVjdCh2YWx1ZSkge1xuICByZXR1cm4gZm9ybWF0VmFsdWUodmFsdWUsIFtdKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsdWUsIHNlZW5WYWx1ZXMpIHtcbiAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcblxuICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgIHJldHVybiB2YWx1ZS5uYW1lID8gYFtmdW5jdGlvbiAke3ZhbHVlLm5hbWV9XWAgOiAnW2Z1bmN0aW9uXSc7XG5cbiAgICBjYXNlICdvYmplY3QnOlxuICAgICAgcmV0dXJuIGZvcm1hdE9iamVjdFZhbHVlKHZhbHVlLCBzZWVuVmFsdWVzKTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXRPYmplY3RWYWx1ZSh2YWx1ZSwgcHJldmlvdXNseVNlZW5WYWx1ZXMpIHtcbiAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuICdudWxsJztcbiAgfVxuXG4gIGlmIChwcmV2aW91c2x5U2VlblZhbHVlcy5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICByZXR1cm4gJ1tDaXJjdWxhcl0nO1xuICB9XG5cbiAgY29uc3Qgc2VlblZhbHVlcyA9IFsuLi5wcmV2aW91c2x5U2VlblZhbHVlcywgdmFsdWVdO1xuXG4gIGlmIChpc0pTT05hYmxlKHZhbHVlKSkge1xuICAgIGNvbnN0IGpzb25WYWx1ZSA9IHZhbHVlLnRvSlNPTigpOyAvLyBjaGVjayBmb3IgaW5maW5pdGUgcmVjdXJzaW9uXG5cbiAgICBpZiAoanNvblZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBqc29uVmFsdWUgPT09ICdzdHJpbmcnXG4gICAgICAgID8ganNvblZhbHVlXG4gICAgICAgIDogZm9ybWF0VmFsdWUoanNvblZhbHVlLCBzZWVuVmFsdWVzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZm9ybWF0QXJyYXkodmFsdWUsIHNlZW5WYWx1ZXMpO1xuICB9XG5cbiAgcmV0dXJuIGZvcm1hdE9iamVjdCh2YWx1ZSwgc2VlblZhbHVlcyk7XG59XG5cbmZ1bmN0aW9uIGlzSlNPTmFibGUodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZS50b0pTT04gPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE9iamVjdChvYmplY3QsIHNlZW5WYWx1ZXMpIHtcbiAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKG9iamVjdCk7XG5cbiAgaWYgKGVudHJpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICd7fSc7XG4gIH1cblxuICBpZiAoc2VlblZhbHVlcy5sZW5ndGggPiBNQVhfUkVDVVJTSVZFX0RFUFRIKSB7XG4gICAgcmV0dXJuICdbJyArIGdldE9iamVjdFRhZyhvYmplY3QpICsgJ10nO1xuICB9XG5cbiAgY29uc3QgcHJvcGVydGllcyA9IGVudHJpZXMubWFwKFxuICAgIChba2V5LCB2YWx1ZV0pID0+IGtleSArICc6ICcgKyBmb3JtYXRWYWx1ZSh2YWx1ZSwgc2VlblZhbHVlcyksXG4gICk7XG4gIHJldHVybiAneyAnICsgcHJvcGVydGllcy5qb2luKCcsICcpICsgJyB9Jztcbn1cblxuZnVuY3Rpb24gZm9ybWF0QXJyYXkoYXJyYXksIHNlZW5WYWx1ZXMpIHtcbiAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAnW10nO1xuICB9XG5cbiAgaWYgKHNlZW5WYWx1ZXMubGVuZ3RoID4gTUFYX1JFQ1VSU0lWRV9ERVBUSCkge1xuICAgIHJldHVybiAnW0FycmF5XSc7XG4gIH1cblxuICBjb25zdCBsZW4gPSBNYXRoLm1pbihNQVhfQVJSQVlfTEVOR1RILCBhcnJheS5sZW5ndGgpO1xuICBjb25zdCByZW1haW5pbmcgPSBhcnJheS5sZW5ndGggLSBsZW47XG4gIGNvbnN0IGl0ZW1zID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGl0ZW1zLnB1c2goZm9ybWF0VmFsdWUoYXJyYXlbaV0sIHNlZW5WYWx1ZXMpKTtcbiAgfVxuXG4gIGlmIChyZW1haW5pbmcgPT09IDEpIHtcbiAgICBpdGVtcy5wdXNoKCcuLi4gMSBtb3JlIGl0ZW0nKTtcbiAgfSBlbHNlIGlmIChyZW1haW5pbmcgPiAxKSB7XG4gICAgaXRlbXMucHVzaChgLi4uICR7cmVtYWluaW5nfSBtb3JlIGl0ZW1zYCk7XG4gIH1cblxuICByZXR1cm4gJ1snICsgaXRlbXMuam9pbignLCAnKSArICddJztcbn1cblxuZnVuY3Rpb24gZ2V0T2JqZWN0VGFnKG9iamVjdCkge1xuICBjb25zdCB0YWcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nXG4gICAgLmNhbGwob2JqZWN0KVxuICAgIC5yZXBsYWNlKC9eXFxbb2JqZWN0IC8sICcnKVxuICAgIC5yZXBsYWNlKC9dJC8sICcnKTtcblxuICBpZiAodGFnID09PSAnT2JqZWN0JyAmJiB0eXBlb2Ygb2JqZWN0LmNvbnN0cnVjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgbmFtZSA9IG9iamVjdC5jb25zdHJ1Y3Rvci5uYW1lO1xuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyAmJiBuYW1lICE9PSAnJykge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhZztcbn1cbiIsCiAgICAiaW1wb3J0IHsgaW5zcGVjdCB9IGZyb20gJy4vaW5zcGVjdC5tanMnO1xuLyogYzggaWdub3JlIG5leHQgMyAqL1xuXG5jb25zdCBpc1Byb2R1Y3Rpb24gPVxuICBnbG9iYWxUaGlzLnByb2Nlc3MgJiYgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbic7XG4vKipcbiAqIEEgcmVwbGFjZW1lbnQgZm9yIGluc3RhbmNlb2Ygd2hpY2ggaW5jbHVkZXMgYW4gZXJyb3Igd2FybmluZyB3aGVuIG11bHRpLXJlYWxtXG4gKiBjb25zdHJ1Y3RvcnMgYXJlIGRldGVjdGVkLlxuICogU2VlOiBodHRwczovL2V4cHJlc3Nqcy5jb20vZW4vYWR2YW5jZWQvYmVzdC1wcmFjdGljZS1wZXJmb3JtYW5jZS5odG1sI3NldC1ub2RlX2Vudi10by1wcm9kdWN0aW9uXG4gKiBTZWU6IGh0dHBzOi8vd2VicGFjay5qcy5vcmcvZ3VpZGVzL3Byb2R1Y3Rpb24vXG4gKi9cblxuZXhwb3J0IGNvbnN0IGluc3RhbmNlT2YgPVxuICAvKiBjOCBpZ25vcmUgbmV4dCA2ICovXG4gIC8vIEZJWE1FOiBodHRwczovL2dpdGh1Yi5jb20vZ3JhcGhxbC9ncmFwaHFsLWpzL2lzc3Vlcy8yMzE3XG4gIGlzUHJvZHVjdGlvblxuICAgID8gZnVuY3Rpb24gaW5zdGFuY2VPZih2YWx1ZSwgY29uc3RydWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgY29uc3RydWN0b3I7XG4gICAgICB9XG4gICAgOiBmdW5jdGlvbiBpbnN0YW5jZU9mKHZhbHVlLCBjb25zdHJ1Y3Rvcikge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBjb25zdHJ1Y3Rvcikge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICB2YXIgX3ZhbHVlJGNvbnN0cnVjdG9yO1xuXG4gICAgICAgICAgLy8gUHJlZmVyIFN5bWJvbC50b1N0cmluZ1RhZyBzaW5jZSBpdCBpcyBpbW11bmUgdG8gbWluaWZpY2F0aW9uLlxuICAgICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZVtTeW1ib2wudG9TdHJpbmdUYWddO1xuICAgICAgICAgIGNvbnN0IHZhbHVlQ2xhc3NOYW1lID0gLy8gV2Ugc3RpbGwgbmVlZCB0byBzdXBwb3J0IGNvbnN0cnVjdG9yJ3MgbmFtZSB0byBkZXRlY3QgY29uZmxpY3RzIHdpdGggb2xkZXIgdmVyc2lvbnMgb2YgdGhpcyBsaWJyYXJ5LlxuICAgICAgICAgICAgU3ltYm9sLnRvU3RyaW5nVGFnIGluIHZhbHVlIC8vIEB0cy1leHBlY3QtZXJyb3IgVFMgYnVnIHNlZSwgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8zODAwOVxuICAgICAgICAgICAgICA/IHZhbHVlW1N5bWJvbC50b1N0cmluZ1RhZ11cbiAgICAgICAgICAgICAgOiAoX3ZhbHVlJGNvbnN0cnVjdG9yID0gdmFsdWUuY29uc3RydWN0b3IpID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgX3ZhbHVlJGNvbnN0cnVjdG9yID09PSB2b2lkIDBcbiAgICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgICAgOiBfdmFsdWUkY29uc3RydWN0b3IubmFtZTtcblxuICAgICAgICAgIGlmIChjbGFzc05hbWUgPT09IHZhbHVlQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdpZmllZFZhbHVlID0gaW5zcGVjdCh2YWx1ZSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCB1c2UgJHtjbGFzc05hbWV9IFwiJHtzdHJpbmdpZmllZFZhbHVlfVwiIGZyb20gYW5vdGhlciBtb2R1bGUgb3IgcmVhbG0uXG5cbkVuc3VyZSB0aGF0IHRoZXJlIGlzIG9ubHkgb25lIGluc3RhbmNlIG9mIFwiZ3JhcGhxbFwiIGluIHRoZSBub2RlX21vZHVsZXNcbmRpcmVjdG9yeS4gSWYgZGlmZmVyZW50IHZlcnNpb25zIG9mIFwiZ3JhcGhxbFwiIGFyZSB0aGUgZGVwZW5kZW5jaWVzIG9mIG90aGVyXG5yZWxpZWQgb24gbW9kdWxlcywgdXNlIFwicmVzb2x1dGlvbnNcIiB0byBlbnN1cmUgb25seSBvbmUgdmVyc2lvbiBpcyBpbnN0YWxsZWQuXG5cbmh0dHBzOi8veWFybnBrZy5jb20vZW4vZG9jcy9zZWxlY3RpdmUtdmVyc2lvbi1yZXNvbHV0aW9uc1xuXG5EdXBsaWNhdGUgXCJncmFwaHFsXCIgbW9kdWxlcyBjYW5ub3QgYmUgdXNlZCBhdCB0aGUgc2FtZSB0aW1lIHNpbmNlIGRpZmZlcmVudFxudmVyc2lvbnMgbWF5IGhhdmUgZGlmZmVyZW50IGNhcGFiaWxpdGllcyBhbmQgYmVoYXZpb3IuIFRoZSBkYXRhIGZyb20gb25lXG52ZXJzaW9uIHVzZWQgaW4gdGhlIGZ1bmN0aW9uIGZyb20gYW5vdGhlciBjb3VsZCBwcm9kdWNlIGNvbmZ1c2luZyBhbmRcbnNwdXJpb3VzIHJlc3VsdHMuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfTtcbiIsCiAgICAiaW1wb3J0IHsgZGV2QXNzZXJ0IH0gZnJvbSAnLi4vanN1dGlscy9kZXZBc3NlcnQubWpzJztcbmltcG9ydCB7IGluc3BlY3QgfSBmcm9tICcuLi9qc3V0aWxzL2luc3BlY3QubWpzJztcbmltcG9ydCB7IGluc3RhbmNlT2YgfSBmcm9tICcuLi9qc3V0aWxzL2luc3RhbmNlT2YubWpzJztcblxuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIHNvdXJjZSBpbnB1dCB0byBHcmFwaFFMLiBUaGUgYG5hbWVgIGFuZCBgbG9jYXRpb25PZmZzZXRgIHBhcmFtZXRlcnMgYXJlXG4gKiBvcHRpb25hbCwgYnV0IHRoZXkgYXJlIHVzZWZ1bCBmb3IgY2xpZW50cyB3aG8gc3RvcmUgR3JhcGhRTCBkb2N1bWVudHMgaW4gc291cmNlIGZpbGVzLlxuICogRm9yIGV4YW1wbGUsIGlmIHRoZSBHcmFwaFFMIGlucHV0IHN0YXJ0cyBhdCBsaW5lIDQwIGluIGEgZmlsZSBuYW1lZCBgRm9vLmdyYXBocWxgLCBpdCBtaWdodFxuICogYmUgdXNlZnVsIGZvciBgbmFtZWAgdG8gYmUgYFwiRm9vLmdyYXBocWxcImAgYW5kIGxvY2F0aW9uIHRvIGJlIGB7IGxpbmU6IDQwLCBjb2x1bW46IDEgfWAuXG4gKiBUaGUgYGxpbmVgIGFuZCBgY29sdW1uYCBwcm9wZXJ0aWVzIGluIGBsb2NhdGlvbk9mZnNldGAgYXJlIDEtaW5kZXhlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGJvZHksXG4gICAgbmFtZSA9ICdHcmFwaFFMIHJlcXVlc3QnLFxuICAgIGxvY2F0aW9uT2Zmc2V0ID0ge1xuICAgICAgbGluZTogMSxcbiAgICAgIGNvbHVtbjogMSxcbiAgICB9LFxuICApIHtcbiAgICB0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycgfHxcbiAgICAgIGRldkFzc2VydChmYWxzZSwgYEJvZHkgbXVzdCBiZSBhIHN0cmluZy4gUmVjZWl2ZWQ6ICR7aW5zcGVjdChib2R5KX0uYCk7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMubG9jYXRpb25PZmZzZXQgPSBsb2NhdGlvbk9mZnNldDtcbiAgICB0aGlzLmxvY2F0aW9uT2Zmc2V0LmxpbmUgPiAwIHx8XG4gICAgICBkZXZBc3NlcnQoXG4gICAgICAgIGZhbHNlLFxuICAgICAgICAnbGluZSBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuJyxcbiAgICAgICk7XG4gICAgdGhpcy5sb2NhdGlvbk9mZnNldC5jb2x1bW4gPiAwIHx8XG4gICAgICBkZXZBc3NlcnQoXG4gICAgICAgIGZhbHNlLFxuICAgICAgICAnY29sdW1uIGluIGxvY2F0aW9uT2Zmc2V0IGlzIDEtaW5kZXhlZCBhbmQgbXVzdCBiZSBwb3NpdGl2ZS4nLFxuICAgICAgKTtcbiAgfVxuXG4gIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICByZXR1cm4gJ1NvdXJjZSc7XG4gIH1cbn1cbi8qKlxuICogVGVzdCBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBTb3VyY2Ugb2JqZWN0LlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1NvdXJjZShzb3VyY2UpIHtcbiAgcmV0dXJuIGluc3RhbmNlT2Yoc291cmNlLCBTb3VyY2UpO1xufVxuIiwKICAgICJpbXBvcnQgeyBzeW50YXhFcnJvciB9IGZyb20gJy4uL2Vycm9yL3N5bnRheEVycm9yLm1qcyc7XG5pbXBvcnQgeyBMb2NhdGlvbiwgT3BlcmF0aW9uVHlwZU5vZGUgfSBmcm9tICcuL2FzdC5tanMnO1xuaW1wb3J0IHsgRGlyZWN0aXZlTG9jYXRpb24gfSBmcm9tICcuL2RpcmVjdGl2ZUxvY2F0aW9uLm1qcyc7XG5pbXBvcnQgeyBLaW5kIH0gZnJvbSAnLi9raW5kcy5tanMnO1xuaW1wb3J0IHsgaXNQdW5jdHVhdG9yVG9rZW5LaW5kLCBMZXhlciB9IGZyb20gJy4vbGV4ZXIubWpzJztcbmltcG9ydCB7IGlzU291cmNlLCBTb3VyY2UgfSBmcm9tICcuL3NvdXJjZS5tanMnO1xuaW1wb3J0IHsgVG9rZW5LaW5kIH0gZnJvbSAnLi90b2tlbktpbmQubWpzJztcbi8qKlxuICogQ29uZmlndXJhdGlvbiBvcHRpb25zIHRvIGNvbnRyb2wgcGFyc2VyIGJlaGF2aW9yXG4gKi9cblxuLyoqXG4gKiBHaXZlbiBhIEdyYXBoUUwgc291cmNlLCBwYXJzZXMgaXQgaW50byBhIERvY3VtZW50LlxuICogVGhyb3dzIEdyYXBoUUxFcnJvciBpZiBhIHN5bnRheCBlcnJvciBpcyBlbmNvdW50ZXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKHNvdXJjZSwgb3B0aW9ucykge1xuICBjb25zdCBwYXJzZXIgPSBuZXcgUGFyc2VyKHNvdXJjZSwgb3B0aW9ucyk7XG4gIGNvbnN0IGRvY3VtZW50ID0gcGFyc2VyLnBhcnNlRG9jdW1lbnQoKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCAndG9rZW5Db3VudCcsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZTogcGFyc2VyLnRva2VuQ291bnQsXG4gIH0pO1xuICByZXR1cm4gZG9jdW1lbnQ7XG59XG4vKipcbiAqIEdpdmVuIGEgc3RyaW5nIGNvbnRhaW5pbmcgYSBHcmFwaFFMIHZhbHVlIChleC4gYFs0Ml1gKSwgcGFyc2UgdGhlIEFTVCBmb3JcbiAqIHRoYXQgdmFsdWUuXG4gKiBUaHJvd3MgR3JhcGhRTEVycm9yIGlmIGEgc3ludGF4IGVycm9yIGlzIGVuY291bnRlcmVkLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIHdpdGhpbiB0b29scyB0aGF0IG9wZXJhdGUgdXBvbiBHcmFwaFFMIFZhbHVlcyBkaXJlY3RseSBhbmRcbiAqIGluIGlzb2xhdGlvbiBvZiBjb21wbGV0ZSBHcmFwaFFMIGRvY3VtZW50cy5cbiAqXG4gKiBDb25zaWRlciBwcm92aWRpbmcgdGhlIHJlc3VsdHMgdG8gdGhlIHV0aWxpdHkgZnVuY3Rpb246IHZhbHVlRnJvbUFTVCgpLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVZhbHVlKHNvdXJjZSwgb3B0aW9ucykge1xuICBjb25zdCBwYXJzZXIgPSBuZXcgUGFyc2VyKHNvdXJjZSwgb3B0aW9ucyk7XG4gIHBhcnNlci5leHBlY3RUb2tlbihUb2tlbktpbmQuU09GKTtcbiAgY29uc3QgdmFsdWUgPSBwYXJzZXIucGFyc2VWYWx1ZUxpdGVyYWwoZmFsc2UpO1xuICBwYXJzZXIuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkVPRik7XG4gIHJldHVybiB2YWx1ZTtcbn1cbi8qKlxuICogU2ltaWxhciB0byBwYXJzZVZhbHVlKCksIGJ1dCByYWlzZXMgYSBwYXJzZSBlcnJvciBpZiBpdCBlbmNvdW50ZXJzIGFcbiAqIHZhcmlhYmxlLiBUaGUgcmV0dXJuIHR5cGUgd2lsbCBiZSBhIGNvbnN0YW50IHZhbHVlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbnN0VmFsdWUoc291cmNlLCBvcHRpb25zKSB7XG4gIGNvbnN0IHBhcnNlciA9IG5ldyBQYXJzZXIoc291cmNlLCBvcHRpb25zKTtcbiAgcGFyc2VyLmV4cGVjdFRva2VuKFRva2VuS2luZC5TT0YpO1xuICBjb25zdCB2YWx1ZSA9IHBhcnNlci5wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCk7XG4gIHBhcnNlci5leHBlY3RUb2tlbihUb2tlbktpbmQuRU9GKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuLyoqXG4gKiBHaXZlbiBhIHN0cmluZyBjb250YWluaW5nIGEgR3JhcGhRTCBUeXBlIChleC4gYFtJbnQhXWApLCBwYXJzZSB0aGUgQVNUIGZvclxuICogdGhhdCB0eXBlLlxuICogVGhyb3dzIEdyYXBoUUxFcnJvciBpZiBhIHN5bnRheCBlcnJvciBpcyBlbmNvdW50ZXJlZC5cbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCB3aXRoaW4gdG9vbHMgdGhhdCBvcGVyYXRlIHVwb24gR3JhcGhRTCBUeXBlcyBkaXJlY3RseSBhbmRcbiAqIGluIGlzb2xhdGlvbiBvZiBjb21wbGV0ZSBHcmFwaFFMIGRvY3VtZW50cy5cbiAqXG4gKiBDb25zaWRlciBwcm92aWRpbmcgdGhlIHJlc3VsdHMgdG8gdGhlIHV0aWxpdHkgZnVuY3Rpb246IHR5cGVGcm9tQVNUKCkuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVHlwZShzb3VyY2UsIG9wdGlvbnMpIHtcbiAgY29uc3QgcGFyc2VyID0gbmV3IFBhcnNlcihzb3VyY2UsIG9wdGlvbnMpO1xuICBwYXJzZXIuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLlNPRik7XG4gIGNvbnN0IHR5cGUgPSBwYXJzZXIucGFyc2VUeXBlUmVmZXJlbmNlKCk7XG4gIHBhcnNlci5leHBlY3RUb2tlbihUb2tlbktpbmQuRU9GKTtcbiAgcmV0dXJuIHR5cGU7XG59XG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgZXhwb3J0ZWQgb25seSB0byBhc3Npc3QgcGVvcGxlIGluIGltcGxlbWVudGluZyB0aGVpciBvd24gcGFyc2Vyc1xuICogd2l0aG91dCBkdXBsaWNhdGluZyB0b28gbXVjaCBjb2RlIGFuZCBzaG91bGQgYmUgdXNlZCBvbmx5IGFzIGxhc3QgcmVzb3J0IGZvciBjYXNlc1xuICogc3VjaCBhcyBleHBlcmltZW50YWwgc3ludGF4IG9yIGlmIGNlcnRhaW4gZmVhdHVyZXMgY291bGQgbm90IGJlIGNvbnRyaWJ1dGVkIHVwc3RyZWFtLlxuICpcbiAqIEl0IGlzIHN0aWxsIHBhcnQgb2YgdGhlIGludGVybmFsIEFQSSBhbmQgaXMgdmVyc2lvbmVkLCBzbyBhbnkgY2hhbmdlcyB0byBpdCBhcmUgbmV2ZXJcbiAqIGNvbnNpZGVyZWQgYnJlYWtpbmcgY2hhbmdlcy4gSWYgeW91IHN0aWxsIG5lZWQgdG8gc3VwcG9ydCBtdWx0aXBsZSB2ZXJzaW9ucyBvZiB0aGVcbiAqIGxpYnJhcnksIHBsZWFzZSB1c2UgdGhlIGB2ZXJzaW9uSW5mb2AgdmFyaWFibGUgZm9yIHZlcnNpb24gZGV0ZWN0aW9uLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBjbGFzcyBQYXJzZXIge1xuICBjb25zdHJ1Y3Rvcihzb3VyY2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHNvdXJjZU9iaiA9IGlzU291cmNlKHNvdXJjZSkgPyBzb3VyY2UgOiBuZXcgU291cmNlKHNvdXJjZSk7XG4gICAgdGhpcy5fbGV4ZXIgPSBuZXcgTGV4ZXIoc291cmNlT2JqKTtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLl90b2tlbkNvdW50ZXIgPSAwO1xuICB9XG5cbiAgZ2V0IHRva2VuQ291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Rva2VuQ291bnRlcjtcbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgYSBuYW1lIGxleCB0b2tlbiBpbnRvIGEgbmFtZSBwYXJzZSBub2RlLlxuICAgKi9cblxuICBwYXJzZU5hbWUoKSB7XG4gICAgY29uc3QgdG9rZW4gPSB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5OQU1FKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHRva2VuLCB7XG4gICAgICBraW5kOiBLaW5kLk5BTUUsXG4gICAgICB2YWx1ZTogdG9rZW4udmFsdWUsXG4gICAgfSk7XG4gIH0gLy8gSW1wbGVtZW50cyB0aGUgcGFyc2luZyBydWxlcyBpbiB0aGUgRG9jdW1lbnQgc2VjdGlvbi5cblxuICAvKipcbiAgICogRG9jdW1lbnQgOiBEZWZpbml0aW9uK1xuICAgKi9cblxuICBwYXJzZURvY3VtZW50KCkge1xuICAgIHJldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4sIHtcbiAgICAgIGtpbmQ6IEtpbmQuRE9DVU1FTlQsXG4gICAgICBkZWZpbml0aW9uczogdGhpcy5tYW55KFxuICAgICAgICBUb2tlbktpbmQuU09GLFxuICAgICAgICB0aGlzLnBhcnNlRGVmaW5pdGlvbixcbiAgICAgICAgVG9rZW5LaW5kLkVPRixcbiAgICAgICksXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIERlZmluaXRpb24gOlxuICAgKiAgIC0gRXhlY3V0YWJsZURlZmluaXRpb25cbiAgICogICAtIFR5cGVTeXN0ZW1EZWZpbml0aW9uXG4gICAqICAgLSBUeXBlU3lzdGVtRXh0ZW5zaW9uXG4gICAqXG4gICAqIEV4ZWN1dGFibGVEZWZpbml0aW9uIDpcbiAgICogICAtIE9wZXJhdGlvbkRlZmluaXRpb25cbiAgICogICAtIEZyYWdtZW50RGVmaW5pdGlvblxuICAgKlxuICAgKiBUeXBlU3lzdGVtRGVmaW5pdGlvbiA6XG4gICAqICAgLSBTY2hlbWFEZWZpbml0aW9uXG4gICAqICAgLSBUeXBlRGVmaW5pdGlvblxuICAgKiAgIC0gRGlyZWN0aXZlRGVmaW5pdGlvblxuICAgKlxuICAgKiBUeXBlRGVmaW5pdGlvbiA6XG4gICAqICAgLSBTY2FsYXJUeXBlRGVmaW5pdGlvblxuICAgKiAgIC0gT2JqZWN0VHlwZURlZmluaXRpb25cbiAgICogICAtIEludGVyZmFjZVR5cGVEZWZpbml0aW9uXG4gICAqICAgLSBVbmlvblR5cGVEZWZpbml0aW9uXG4gICAqICAgLSBFbnVtVHlwZURlZmluaXRpb25cbiAgICogICAtIElucHV0T2JqZWN0VHlwZURlZmluaXRpb25cbiAgICovXG5cbiAgcGFyc2VEZWZpbml0aW9uKCkge1xuICAgIGlmICh0aGlzLnBlZWsoVG9rZW5LaW5kLkJSQUNFX0wpKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJzZU9wZXJhdGlvbkRlZmluaXRpb24oKTtcbiAgICB9IC8vIE1hbnkgZGVmaW5pdGlvbnMgYmVnaW4gd2l0aCBhIGRlc2NyaXB0aW9uIGFuZCByZXF1aXJlIGEgbG9va2FoZWFkLlxuXG4gICAgY29uc3QgaGFzRGVzY3JpcHRpb24gPSB0aGlzLnBlZWtEZXNjcmlwdGlvbigpO1xuICAgIGNvbnN0IGtleXdvcmRUb2tlbiA9IGhhc0Rlc2NyaXB0aW9uXG4gICAgICA/IHRoaXMuX2xleGVyLmxvb2thaGVhZCgpXG4gICAgICA6IHRoaXMuX2xleGVyLnRva2VuO1xuXG4gICAgaWYgKGtleXdvcmRUb2tlbi5raW5kID09PSBUb2tlbktpbmQuTkFNRSkge1xuICAgICAgc3dpdGNoIChrZXl3b3JkVG9rZW4udmFsdWUpIHtcbiAgICAgICAgY2FzZSAnc2NoZW1hJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVNjaGVtYURlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdzY2FsYXInOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlU2NhbGFyVHlwZURlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICd0eXBlJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU9iamVjdFR5cGVEZWZpbml0aW9uKCk7XG5cbiAgICAgICAgY2FzZSAnaW50ZXJmYWNlJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUludGVyZmFjZVR5cGVEZWZpbml0aW9uKCk7XG5cbiAgICAgICAgY2FzZSAndW5pb24nOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlVW5pb25UeXBlRGVmaW5pdGlvbigpO1xuXG4gICAgICAgIGNhc2UgJ2VudW0nOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlRW51bVR5cGVEZWZpbml0aW9uKCk7XG5cbiAgICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbigpO1xuXG4gICAgICAgIGNhc2UgJ2RpcmVjdGl2ZSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNEZXNjcmlwdGlvbikge1xuICAgICAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgICAgICB0aGlzLl9sZXhlci5zb3VyY2UsXG4gICAgICAgICAgdGhpcy5fbGV4ZXIudG9rZW4uc3RhcnQsXG4gICAgICAgICAgJ1VuZXhwZWN0ZWQgZGVzY3JpcHRpb24sIGRlc2NyaXB0aW9ucyBhcmUgc3VwcG9ydGVkIG9ubHkgb24gdHlwZSBkZWZpbml0aW9ucy4nLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKGtleXdvcmRUb2tlbi52YWx1ZSkge1xuICAgICAgICBjYXNlICdxdWVyeSc6XG4gICAgICAgIGNhc2UgJ211dGF0aW9uJzpcbiAgICAgICAgY2FzZSAnc3Vic2NyaXB0aW9uJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU9wZXJhdGlvbkRlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdmcmFnbWVudCc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VGcmFnbWVudERlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdleHRlbmQnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IHRoaXMudW5leHBlY3RlZChrZXl3b3JkVG9rZW4pO1xuICB9IC8vIEltcGxlbWVudHMgdGhlIHBhcnNpbmcgcnVsZXMgaW4gdGhlIE9wZXJhdGlvbnMgc2VjdGlvbi5cblxuICAvKipcbiAgICogT3BlcmF0aW9uRGVmaW5pdGlvbiA6XG4gICAqICAtIFNlbGVjdGlvblNldFxuICAgKiAgLSBPcGVyYXRpb25UeXBlIE5hbWU/IFZhcmlhYmxlRGVmaW5pdGlvbnM/IERpcmVjdGl2ZXM/IFNlbGVjdGlvblNldFxuICAgKi9cblxuICBwYXJzZU9wZXJhdGlvbkRlZmluaXRpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcblxuICAgIGlmICh0aGlzLnBlZWsoVG9rZW5LaW5kLkJSQUNFX0wpKSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICAgIGtpbmQ6IEtpbmQuT1BFUkFUSU9OX0RFRklOSVRJT04sXG4gICAgICAgIG9wZXJhdGlvbjogT3BlcmF0aW9uVHlwZU5vZGUuUVVFUlksXG4gICAgICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgdmFyaWFibGVEZWZpbml0aW9uczogW10sXG4gICAgICAgIGRpcmVjdGl2ZXM6IFtdLFxuICAgICAgICBzZWxlY3Rpb25TZXQ6IHRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHRoaXMucGFyc2VPcGVyYXRpb25UeXBlKCk7XG4gICAgbGV0IG5hbWU7XG5cbiAgICBpZiAodGhpcy5wZWVrKFRva2VuS2luZC5OQU1FKSkge1xuICAgICAgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5PUEVSQVRJT05fREVGSU5JVElPTixcbiAgICAgIG9wZXJhdGlvbixcbiAgICAgIG5hbWUsXG4gICAgICB2YXJpYWJsZURlZmluaXRpb25zOiB0aGlzLnBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpLFxuICAgICAgZGlyZWN0aXZlczogdGhpcy5wYXJzZURpcmVjdGl2ZXMoZmFsc2UpLFxuICAgICAgc2VsZWN0aW9uU2V0OiB0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCksXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIE9wZXJhdGlvblR5cGUgOiBvbmUgb2YgcXVlcnkgbXV0YXRpb24gc3Vic2NyaXB0aW9uXG4gICAqL1xuXG4gIHBhcnNlT3BlcmF0aW9uVHlwZSgpIHtcbiAgICBjb25zdCBvcGVyYXRpb25Ub2tlbiA9IHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLk5BTUUpO1xuXG4gICAgc3dpdGNoIChvcGVyYXRpb25Ub2tlbi52YWx1ZSkge1xuICAgICAgY2FzZSAncXVlcnknOlxuICAgICAgICByZXR1cm4gT3BlcmF0aW9uVHlwZU5vZGUuUVVFUlk7XG5cbiAgICAgIGNhc2UgJ211dGF0aW9uJzpcbiAgICAgICAgcmV0dXJuIE9wZXJhdGlvblR5cGVOb2RlLk1VVEFUSU9OO1xuXG4gICAgICBjYXNlICdzdWJzY3JpcHRpb24nOlxuICAgICAgICByZXR1cm4gT3BlcmF0aW9uVHlwZU5vZGUuU1VCU0NSSVBUSU9OO1xuICAgIH1cblxuICAgIHRocm93IHRoaXMudW5leHBlY3RlZChvcGVyYXRpb25Ub2tlbik7XG4gIH1cbiAgLyoqXG4gICAqIFZhcmlhYmxlRGVmaW5pdGlvbnMgOiAoIFZhcmlhYmxlRGVmaW5pdGlvbisgKVxuICAgKi9cblxuICBwYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KFxuICAgICAgVG9rZW5LaW5kLlBBUkVOX0wsXG4gICAgICB0aGlzLnBhcnNlVmFyaWFibGVEZWZpbml0aW9uLFxuICAgICAgVG9rZW5LaW5kLlBBUkVOX1IsXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogVmFyaWFibGVEZWZpbml0aW9uIDogVmFyaWFibGUgOiBUeXBlIERlZmF1bHRWYWx1ZT8gRGlyZWN0aXZlc1tDb25zdF0/XG4gICAqL1xuXG4gIHBhcnNlVmFyaWFibGVEZWZpbml0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4sIHtcbiAgICAgIGtpbmQ6IEtpbmQuVkFSSUFCTEVfREVGSU5JVElPTixcbiAgICAgIHZhcmlhYmxlOiB0aGlzLnBhcnNlVmFyaWFibGUoKSxcbiAgICAgIHR5cGU6ICh0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5DT0xPTiksIHRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCkpLFxuICAgICAgZGVmYXVsdFZhbHVlOiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkVRVUFMUylcbiAgICAgICAgPyB0aGlzLnBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIGRpcmVjdGl2ZXM6IHRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogVmFyaWFibGUgOiAkIE5hbWVcbiAgICovXG5cbiAgcGFyc2VWYXJpYWJsZSgpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkRPTExBUik7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5WQVJJQUJMRSxcbiAgICAgIG5hbWU6IHRoaXMucGFyc2VOYW1lKCksXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIGBgYFxuICAgKiBTZWxlY3Rpb25TZXQgOiB7IFNlbGVjdGlvbisgfVxuICAgKiBgYGBcbiAgICovXG5cbiAgcGFyc2VTZWxlY3Rpb25TZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbiwge1xuICAgICAga2luZDogS2luZC5TRUxFQ1RJT05fU0VULFxuICAgICAgc2VsZWN0aW9uczogdGhpcy5tYW55KFxuICAgICAgICBUb2tlbktpbmQuQlJBQ0VfTCxcbiAgICAgICAgdGhpcy5wYXJzZVNlbGVjdGlvbixcbiAgICAgICAgVG9rZW5LaW5kLkJSQUNFX1IsXG4gICAgICApLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBTZWxlY3Rpb24gOlxuICAgKiAgIC0gRmllbGRcbiAgICogICAtIEZyYWdtZW50U3ByZWFkXG4gICAqICAgLSBJbmxpbmVGcmFnbWVudFxuICAgKi9cblxuICBwYXJzZVNlbGVjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wZWVrKFRva2VuS2luZC5TUFJFQUQpXG4gICAgICA/IHRoaXMucGFyc2VGcmFnbWVudCgpXG4gICAgICA6IHRoaXMucGFyc2VGaWVsZCgpO1xuICB9XG4gIC8qKlxuICAgKiBGaWVsZCA6IEFsaWFzPyBOYW1lIEFyZ3VtZW50cz8gRGlyZWN0aXZlcz8gU2VsZWN0aW9uU2V0P1xuICAgKlxuICAgKiBBbGlhcyA6IE5hbWUgOlxuICAgKi9cblxuICBwYXJzZUZpZWxkKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgbmFtZU9yQWxpYXMgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGxldCBhbGlhcztcbiAgICBsZXQgbmFtZTtcblxuICAgIGlmICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkNPTE9OKSkge1xuICAgICAgYWxpYXMgPSBuYW1lT3JBbGlhcztcbiAgICAgIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuYW1lID0gbmFtZU9yQWxpYXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5GSUVMRCxcbiAgICAgIGFsaWFzLFxuICAgICAgbmFtZSxcbiAgICAgIGFyZ3VtZW50czogdGhpcy5wYXJzZUFyZ3VtZW50cyhmYWxzZSksXG4gICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlRGlyZWN0aXZlcyhmYWxzZSksXG4gICAgICBzZWxlY3Rpb25TZXQ6IHRoaXMucGVlayhUb2tlbktpbmQuQlJBQ0VfTClcbiAgICAgICAgPyB0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KClcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEFyZ3VtZW50c1tDb25zdF0gOiAoIEFyZ3VtZW50Wz9Db25zdF0rIClcbiAgICovXG5cbiAgcGFyc2VBcmd1bWVudHMoaXNDb25zdCkge1xuICAgIGNvbnN0IGl0ZW0gPSBpc0NvbnN0ID8gdGhpcy5wYXJzZUNvbnN0QXJndW1lbnQgOiB0aGlzLnBhcnNlQXJndW1lbnQ7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KFRva2VuS2luZC5QQVJFTl9MLCBpdGVtLCBUb2tlbktpbmQuUEFSRU5fUik7XG4gIH1cbiAgLyoqXG4gICAqIEFyZ3VtZW50W0NvbnN0XSA6IE5hbWUgOiBWYWx1ZVs/Q29uc3RdXG4gICAqL1xuXG4gIHBhcnNlQXJndW1lbnQoaXNDb25zdCA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5DT0xPTik7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5BUkdVTUVOVCxcbiAgICAgIG5hbWUsXG4gICAgICB2YWx1ZTogdGhpcy5wYXJzZVZhbHVlTGl0ZXJhbChpc0NvbnN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIHBhcnNlQ29uc3RBcmd1bWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZUFyZ3VtZW50KHRydWUpO1xuICB9IC8vIEltcGxlbWVudHMgdGhlIHBhcnNpbmcgcnVsZXMgaW4gdGhlIEZyYWdtZW50cyBzZWN0aW9uLlxuXG4gIC8qKlxuICAgKiBDb3JyZXNwb25kcyB0byBib3RoIEZyYWdtZW50U3ByZWFkIGFuZCBJbmxpbmVGcmFnbWVudCBpbiB0aGUgc3BlYy5cbiAgICpcbiAgICogRnJhZ21lbnRTcHJlYWQgOiAuLi4gRnJhZ21lbnROYW1lIERpcmVjdGl2ZXM/XG4gICAqXG4gICAqIElubGluZUZyYWdtZW50IDogLi4uIFR5cGVDb25kaXRpb24/IERpcmVjdGl2ZXM/IFNlbGVjdGlvblNldFxuICAgKi9cblxuICBwYXJzZUZyYWdtZW50KCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuU1BSRUFEKTtcbiAgICBjb25zdCBoYXNUeXBlQ29uZGl0aW9uID0gdGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoJ29uJyk7XG5cbiAgICBpZiAoIWhhc1R5cGVDb25kaXRpb24gJiYgdGhpcy5wZWVrKFRva2VuS2luZC5OQU1FKSkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAgICBraW5kOiBLaW5kLkZSQUdNRU5UX1NQUkVBRCxcbiAgICAgICAgbmFtZTogdGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLFxuICAgICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlRGlyZWN0aXZlcyhmYWxzZSksXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLklOTElORV9GUkFHTUVOVCxcbiAgICAgIHR5cGVDb25kaXRpb246IGhhc1R5cGVDb25kaXRpb24gPyB0aGlzLnBhcnNlTmFtZWRUeXBlKCkgOiB1bmRlZmluZWQsXG4gICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlRGlyZWN0aXZlcyhmYWxzZSksXG4gICAgICBzZWxlY3Rpb25TZXQ6IHRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKSxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRnJhZ21lbnREZWZpbml0aW9uIDpcbiAgICogICAtIGZyYWdtZW50IEZyYWdtZW50TmFtZSBvbiBUeXBlQ29uZGl0aW9uIERpcmVjdGl2ZXM/IFNlbGVjdGlvblNldFxuICAgKlxuICAgKiBUeXBlQ29uZGl0aW9uIDogTmFtZWRUeXBlXG4gICAqL1xuXG4gIHBhcnNlRnJhZ21lbnREZWZpbml0aW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdmcmFnbWVudCcpOyAvLyBMZWdhY3kgc3VwcG9ydCBmb3IgZGVmaW5pbmcgdmFyaWFibGVzIHdpdGhpbiBmcmFnbWVudHMgY2hhbmdlc1xuICAgIC8vIHRoZSBncmFtbWFyIG9mIEZyYWdtZW50RGVmaW5pdGlvbjpcbiAgICAvLyAgIC0gZnJhZ21lbnQgRnJhZ21lbnROYW1lIFZhcmlhYmxlRGVmaW5pdGlvbnM/IG9uIFR5cGVDb25kaXRpb24gRGlyZWN0aXZlcz8gU2VsZWN0aW9uU2V0XG5cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5hbGxvd0xlZ2FjeUZyYWdtZW50VmFyaWFibGVzID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICAgIGtpbmQ6IEtpbmQuRlJBR01FTlRfREVGSU5JVElPTixcbiAgICAgICAgbmFtZTogdGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLFxuICAgICAgICB2YXJpYWJsZURlZmluaXRpb25zOiB0aGlzLnBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpLFxuICAgICAgICB0eXBlQ29uZGl0aW9uOiAodGhpcy5leHBlY3RLZXl3b3JkKCdvbicpLCB0aGlzLnBhcnNlTmFtZWRUeXBlKCkpLFxuICAgICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlRGlyZWN0aXZlcyhmYWxzZSksXG4gICAgICAgIHNlbGVjdGlvblNldDogdGhpcy5wYXJzZVNlbGVjdGlvblNldCgpLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5GUkFHTUVOVF9ERUZJTklUSU9OLFxuICAgICAgbmFtZTogdGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLFxuICAgICAgdHlwZUNvbmRpdGlvbjogKHRoaXMuZXhwZWN0S2V5d29yZCgnb24nKSwgdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxcbiAgICAgIGRpcmVjdGl2ZXM6IHRoaXMucGFyc2VEaXJlY3RpdmVzKGZhbHNlKSxcbiAgICAgIHNlbGVjdGlvblNldDogdGhpcy5wYXJzZVNlbGVjdGlvblNldCgpLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBGcmFnbWVudE5hbWUgOiBOYW1lIGJ1dCBub3QgYG9uYFxuICAgKi9cblxuICBwYXJzZUZyYWdtZW50TmFtZSgpIHtcbiAgICBpZiAodGhpcy5fbGV4ZXIudG9rZW4udmFsdWUgPT09ICdvbicpIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnBhcnNlTmFtZSgpO1xuICB9IC8vIEltcGxlbWVudHMgdGhlIHBhcnNpbmcgcnVsZXMgaW4gdGhlIFZhbHVlcyBzZWN0aW9uLlxuXG4gIC8qKlxuICAgKiBWYWx1ZVtDb25zdF0gOlxuICAgKiAgIC0gW35Db25zdF0gVmFyaWFibGVcbiAgICogICAtIEludFZhbHVlXG4gICAqICAgLSBGbG9hdFZhbHVlXG4gICAqICAgLSBTdHJpbmdWYWx1ZVxuICAgKiAgIC0gQm9vbGVhblZhbHVlXG4gICAqICAgLSBOdWxsVmFsdWVcbiAgICogICAtIEVudW1WYWx1ZVxuICAgKiAgIC0gTGlzdFZhbHVlWz9Db25zdF1cbiAgICogICAtIE9iamVjdFZhbHVlWz9Db25zdF1cbiAgICpcbiAgICogQm9vbGVhblZhbHVlIDogb25lIG9mIGB0cnVlYCBgZmFsc2VgXG4gICAqXG4gICAqIE51bGxWYWx1ZSA6IGBudWxsYFxuICAgKlxuICAgKiBFbnVtVmFsdWUgOiBOYW1lIGJ1dCBub3QgYHRydWVgLCBgZmFsc2VgIG9yIGBudWxsYFxuICAgKi9cblxuICBwYXJzZVZhbHVlTGl0ZXJhbChpc0NvbnN0KSB7XG4gICAgY29uc3QgdG9rZW4gPSB0aGlzLl9sZXhlci50b2tlbjtcblxuICAgIHN3aXRjaCAodG9rZW4ua2luZCkge1xuICAgICAgY2FzZSBUb2tlbktpbmQuQlJBQ0tFVF9MOlxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUxpc3QoaXNDb25zdCk7XG5cbiAgICAgIGNhc2UgVG9rZW5LaW5kLkJSQUNFX0w6XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlT2JqZWN0KGlzQ29uc3QpO1xuXG4gICAgICBjYXNlIFRva2VuS2luZC5JTlQ6XG4gICAgICAgIHRoaXMuYWR2YW5jZUxleGVyKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGUodG9rZW4sIHtcbiAgICAgICAgICBraW5kOiBLaW5kLklOVCxcbiAgICAgICAgICB2YWx1ZTogdG9rZW4udmFsdWUsXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFRva2VuS2luZC5GTE9BVDpcbiAgICAgICAgdGhpcy5hZHZhbmNlTGV4ZXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZSh0b2tlbiwge1xuICAgICAgICAgIGtpbmQ6IEtpbmQuRkxPQVQsXG4gICAgICAgICAgdmFsdWU6IHRva2VuLnZhbHVlLFxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBUb2tlbktpbmQuU1RSSU5HOlxuICAgICAgY2FzZSBUb2tlbktpbmQuQkxPQ0tfU1RSSU5HOlxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVN0cmluZ0xpdGVyYWwoKTtcblxuICAgICAgY2FzZSBUb2tlbktpbmQuTkFNRTpcbiAgICAgICAgdGhpcy5hZHZhbmNlTGV4ZXIoKTtcblxuICAgICAgICBzd2l0Y2ggKHRva2VuLnZhbHVlKSB7XG4gICAgICAgICAgY2FzZSAndHJ1ZSc6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlKHRva2VuLCB7XG4gICAgICAgICAgICAgIGtpbmQ6IEtpbmQuQk9PTEVBTixcbiAgICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgJ2ZhbHNlJzpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGUodG9rZW4sIHtcbiAgICAgICAgICAgICAga2luZDogS2luZC5CT09MRUFOLFxuICAgICAgICAgICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgJ251bGwnOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZSh0b2tlbiwge1xuICAgICAgICAgICAgICBraW5kOiBLaW5kLk5VTEwsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlKHRva2VuLCB7XG4gICAgICAgICAgICAgIGtpbmQ6IEtpbmQuRU5VTSxcbiAgICAgICAgICAgICAgdmFsdWU6IHRva2VuLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBUb2tlbktpbmQuRE9MTEFSOlxuICAgICAgICBpZiAoaXNDb25zdCkge1xuICAgICAgICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkRPTExBUik7XG5cbiAgICAgICAgICBpZiAodGhpcy5fbGV4ZXIudG9rZW4ua2luZCA9PT0gVG9rZW5LaW5kLk5BTUUpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhck5hbWUgPSB0aGlzLl9sZXhlci50b2tlbi52YWx1ZTtcbiAgICAgICAgICAgIHRocm93IHN5bnRheEVycm9yKFxuICAgICAgICAgICAgICB0aGlzLl9sZXhlci5zb3VyY2UsXG4gICAgICAgICAgICAgIHRva2VuLnN0YXJ0LFxuICAgICAgICAgICAgICBgVW5leHBlY3RlZCB2YXJpYWJsZSBcIiQke3Zhck5hbWV9XCIgaW4gY29uc3RhbnQgdmFsdWUuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCh0b2tlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VWYXJpYWJsZSgpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtcbiAgICB9XG4gIH1cblxuICBwYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnNlVmFsdWVMaXRlcmFsKHRydWUpO1xuICB9XG5cbiAgcGFyc2VTdHJpbmdMaXRlcmFsKCkge1xuICAgIGNvbnN0IHRva2VuID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5hZHZhbmNlTGV4ZXIoKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHRva2VuLCB7XG4gICAgICBraW5kOiBLaW5kLlNUUklORyxcbiAgICAgIHZhbHVlOiB0b2tlbi52YWx1ZSxcbiAgICAgIGJsb2NrOiB0b2tlbi5raW5kID09PSBUb2tlbktpbmQuQkxPQ0tfU1RSSU5HLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBMaXN0VmFsdWVbQ29uc3RdIDpcbiAgICogICAtIFsgXVxuICAgKiAgIC0gWyBWYWx1ZVs/Q29uc3RdKyBdXG4gICAqL1xuXG4gIHBhcnNlTGlzdChpc0NvbnN0KSB7XG4gICAgY29uc3QgaXRlbSA9ICgpID0+IHRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoaXNDb25zdCk7XG5cbiAgICByZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLCB7XG4gICAgICBraW5kOiBLaW5kLkxJU1QsXG4gICAgICB2YWx1ZXM6IHRoaXMuYW55KFRva2VuS2luZC5CUkFDS0VUX0wsIGl0ZW0sIFRva2VuS2luZC5CUkFDS0VUX1IpLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBgYGBcbiAgICogT2JqZWN0VmFsdWVbQ29uc3RdIDpcbiAgICogICAtIHsgfVxuICAgKiAgIC0geyBPYmplY3RGaWVsZFs/Q29uc3RdKyB9XG4gICAqIGBgYFxuICAgKi9cblxuICBwYXJzZU9iamVjdChpc0NvbnN0KSB7XG4gICAgY29uc3QgaXRlbSA9ICgpID0+IHRoaXMucGFyc2VPYmplY3RGaWVsZChpc0NvbnN0KTtcblxuICAgIHJldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4sIHtcbiAgICAgIGtpbmQ6IEtpbmQuT0JKRUNULFxuICAgICAgZmllbGRzOiB0aGlzLmFueShUb2tlbktpbmQuQlJBQ0VfTCwgaXRlbSwgVG9rZW5LaW5kLkJSQUNFX1IpLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBPYmplY3RGaWVsZFtDb25zdF0gOiBOYW1lIDogVmFsdWVbP0NvbnN0XVxuICAgKi9cblxuICBwYXJzZU9iamVjdEZpZWxkKGlzQ29uc3QpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkNPTE9OKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLk9CSkVDVF9GSUVMRCxcbiAgICAgIG5hbWUsXG4gICAgICB2YWx1ZTogdGhpcy5wYXJzZVZhbHVlTGl0ZXJhbChpc0NvbnN0KSxcbiAgICB9KTtcbiAgfSAvLyBJbXBsZW1lbnRzIHRoZSBwYXJzaW5nIHJ1bGVzIGluIHRoZSBEaXJlY3RpdmVzIHNlY3Rpb24uXG5cbiAgLyoqXG4gICAqIERpcmVjdGl2ZXNbQ29uc3RdIDogRGlyZWN0aXZlWz9Db25zdF0rXG4gICAqL1xuXG4gIHBhcnNlRGlyZWN0aXZlcyhpc0NvbnN0KSB7XG4gICAgY29uc3QgZGlyZWN0aXZlcyA9IFtdO1xuXG4gICAgd2hpbGUgKHRoaXMucGVlayhUb2tlbktpbmQuQVQpKSB7XG4gICAgICBkaXJlY3RpdmVzLnB1c2godGhpcy5wYXJzZURpcmVjdGl2ZShpc0NvbnN0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZXM7XG4gIH1cblxuICBwYXJzZUNvbnN0RGlyZWN0aXZlcygpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZURpcmVjdGl2ZXModHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIGBgYFxuICAgKiBEaXJlY3RpdmVbQ29uc3RdIDogQCBOYW1lIEFyZ3VtZW50c1s/Q29uc3RdP1xuICAgKiBgYGBcbiAgICovXG5cbiAgcGFyc2VEaXJlY3RpdmUoaXNDb25zdCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuQVQpO1xuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuRElSRUNUSVZFLFxuICAgICAgbmFtZTogdGhpcy5wYXJzZU5hbWUoKSxcbiAgICAgIGFyZ3VtZW50czogdGhpcy5wYXJzZUFyZ3VtZW50cyhpc0NvbnN0KSxcbiAgICB9KTtcbiAgfSAvLyBJbXBsZW1lbnRzIHRoZSBwYXJzaW5nIHJ1bGVzIGluIHRoZSBUeXBlcyBzZWN0aW9uLlxuXG4gIC8qKlxuICAgKiBUeXBlIDpcbiAgICogICAtIE5hbWVkVHlwZVxuICAgKiAgIC0gTGlzdFR5cGVcbiAgICogICAtIE5vbk51bGxUeXBlXG4gICAqL1xuXG4gIHBhcnNlVHlwZVJlZmVyZW5jZSgpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGxldCB0eXBlO1xuXG4gICAgaWYgKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihUb2tlbktpbmQuQlJBQ0tFVF9MKSkge1xuICAgICAgY29uc3QgaW5uZXJUeXBlID0gdGhpcy5wYXJzZVR5cGVSZWZlcmVuY2UoKTtcbiAgICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkJSQUNLRVRfUik7XG4gICAgICB0eXBlID0gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICAgIGtpbmQ6IEtpbmQuTElTVF9UWVBFLFxuICAgICAgICB0eXBlOiBpbm5lclR5cGUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHlwZSA9IHRoaXMucGFyc2VOYW1lZFR5cGUoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5leHBlY3RPcHRpb25hbFRva2VuKFRva2VuS2luZC5CQU5HKSkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAgICBraW5kOiBLaW5kLk5PTl9OVUxMX1RZUEUsXG4gICAgICAgIHR5cGUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuICAvKipcbiAgICogTmFtZWRUeXBlIDogTmFtZVxuICAgKi9cblxuICBwYXJzZU5hbWVkVHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLCB7XG4gICAgICBraW5kOiBLaW5kLk5BTUVEX1RZUEUsXG4gICAgICBuYW1lOiB0aGlzLnBhcnNlTmFtZSgpLFxuICAgIH0pO1xuICB9IC8vIEltcGxlbWVudHMgdGhlIHBhcnNpbmcgcnVsZXMgaW4gdGhlIFR5cGUgRGVmaW5pdGlvbiBzZWN0aW9uLlxuXG4gIHBlZWtEZXNjcmlwdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wZWVrKFRva2VuS2luZC5TVFJJTkcpIHx8IHRoaXMucGVlayhUb2tlbktpbmQuQkxPQ0tfU1RSSU5HKTtcbiAgfVxuICAvKipcbiAgICogRGVzY3JpcHRpb24gOiBTdHJpbmdWYWx1ZVxuICAgKi9cblxuICBwYXJzZURlc2NyaXB0aW9uKCkge1xuICAgIGlmICh0aGlzLnBlZWtEZXNjcmlwdGlvbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJzZVN0cmluZ0xpdGVyYWwoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIGBgYFxuICAgKiBTY2hlbWFEZWZpbml0aW9uIDogRGVzY3JpcHRpb24/IHNjaGVtYSBEaXJlY3RpdmVzW0NvbnN0XT8geyBPcGVyYXRpb25UeXBlRGVmaW5pdGlvbisgfVxuICAgKiBgYGBcbiAgICovXG5cbiAgcGFyc2VTY2hlbWFEZWZpbml0aW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ3NjaGVtYScpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3Qgb3BlcmF0aW9uVHlwZXMgPSB0aGlzLm1hbnkoXG4gICAgICBUb2tlbktpbmQuQlJBQ0VfTCxcbiAgICAgIHRoaXMucGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbixcbiAgICAgIFRva2VuS2luZC5CUkFDRV9SLFxuICAgICk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5TQ0hFTUFfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICAgIG9wZXJhdGlvblR5cGVzLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBPcGVyYXRpb25UeXBlRGVmaW5pdGlvbiA6IE9wZXJhdGlvblR5cGUgOiBOYW1lZFR5cGVcbiAgICovXG5cbiAgcGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHRoaXMucGFyc2VPcGVyYXRpb25UeXBlKCk7XG4gICAgdGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuQ09MT04pO1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLnBhcnNlTmFtZWRUeXBlKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5PUEVSQVRJT05fVFlQRV9ERUZJTklUSU9OLFxuICAgICAgb3BlcmF0aW9uLFxuICAgICAgdHlwZSxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogU2NhbGFyVHlwZURlZmluaXRpb24gOiBEZXNjcmlwdGlvbj8gc2NhbGFyIE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/XG4gICAqL1xuXG4gIHBhcnNlU2NhbGFyVHlwZURlZmluaXRpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnc2NhbGFyJyk7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgY29uc3QgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLlNDQUxBUl9UWVBFX0RFRklOSVRJT04sXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIG5hbWUsXG4gICAgICBkaXJlY3RpdmVzLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBPYmplY3RUeXBlRGVmaW5pdGlvbiA6XG4gICAqICAgRGVzY3JpcHRpb24/XG4gICAqICAgdHlwZSBOYW1lIEltcGxlbWVudHNJbnRlcmZhY2VzPyBEaXJlY3RpdmVzW0NvbnN0XT8gRmllbGRzRGVmaW5pdGlvbj9cbiAgICovXG5cbiAgcGFyc2VPYmplY3RUeXBlRGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCd0eXBlJyk7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgY29uc3QgaW50ZXJmYWNlcyA9IHRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3QgZmllbGRzID0gdGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLk9CSkVDVF9UWVBFX0RFRklOSVRJT04sXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIG5hbWUsXG4gICAgICBpbnRlcmZhY2VzLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICAgIGZpZWxkcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogSW1wbGVtZW50c0ludGVyZmFjZXMgOlxuICAgKiAgIC0gaW1wbGVtZW50cyBgJmA/IE5hbWVkVHlwZVxuICAgKiAgIC0gSW1wbGVtZW50c0ludGVyZmFjZXMgJiBOYW1lZFR5cGVcbiAgICovXG5cbiAgcGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoJ2ltcGxlbWVudHMnKVxuICAgICAgPyB0aGlzLmRlbGltaXRlZE1hbnkoVG9rZW5LaW5kLkFNUCwgdGhpcy5wYXJzZU5hbWVkVHlwZSlcbiAgICAgIDogW107XG4gIH1cbiAgLyoqXG4gICAqIGBgYFxuICAgKiBGaWVsZHNEZWZpbml0aW9uIDogeyBGaWVsZERlZmluaXRpb24rIH1cbiAgICogYGBgXG4gICAqL1xuXG4gIHBhcnNlRmllbGRzRGVmaW5pdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoXG4gICAgICBUb2tlbktpbmQuQlJBQ0VfTCxcbiAgICAgIHRoaXMucGFyc2VGaWVsZERlZmluaXRpb24sXG4gICAgICBUb2tlbktpbmQuQlJBQ0VfUixcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBGaWVsZERlZmluaXRpb24gOlxuICAgKiAgIC0gRGVzY3JpcHRpb24/IE5hbWUgQXJndW1lbnRzRGVmaW5pdGlvbj8gOiBUeXBlIERpcmVjdGl2ZXNbQ29uc3RdP1xuICAgKi9cblxuICBwYXJzZUZpZWxkRGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgY29uc3QgYXJncyA9IHRoaXMucGFyc2VBcmd1bWVudERlZnMoKTtcbiAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5DT0xPTik7XG4gICAgY29uc3QgdHlwZSA9IHRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7XG4gICAgY29uc3QgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLkZJRUxEX0RFRklOSVRJT04sXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIG5hbWUsXG4gICAgICBhcmd1bWVudHM6IGFyZ3MsXG4gICAgICB0eXBlLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQXJndW1lbnRzRGVmaW5pdGlvbiA6ICggSW5wdXRWYWx1ZURlZmluaXRpb24rIClcbiAgICovXG5cbiAgcGFyc2VBcmd1bWVudERlZnMoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KFxuICAgICAgVG9rZW5LaW5kLlBBUkVOX0wsXG4gICAgICB0aGlzLnBhcnNlSW5wdXRWYWx1ZURlZixcbiAgICAgIFRva2VuS2luZC5QQVJFTl9SLFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIElucHV0VmFsdWVEZWZpbml0aW9uIDpcbiAgICogICAtIERlc2NyaXB0aW9uPyBOYW1lIDogVHlwZSBEZWZhdWx0VmFsdWU/IERpcmVjdGl2ZXNbQ29uc3RdP1xuICAgKi9cblxuICBwYXJzZUlucHV0VmFsdWVEZWYoKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkNPTE9OKTtcbiAgICBjb25zdCB0eXBlID0gdGhpcy5wYXJzZVR5cGVSZWZlcmVuY2UoKTtcbiAgICBsZXQgZGVmYXVsdFZhbHVlO1xuXG4gICAgaWYgKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihUb2tlbktpbmQuRVFVQUxTKSkge1xuICAgICAgZGVmYXVsdFZhbHVlID0gdGhpcy5wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCk7XG4gICAgfVxuXG4gICAgY29uc3QgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLklOUFVUX1ZBTFVFX0RFRklOSVRJT04sXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIG5hbWUsXG4gICAgICB0eXBlLFxuICAgICAgZGVmYXVsdFZhbHVlLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogSW50ZXJmYWNlVHlwZURlZmluaXRpb24gOlxuICAgKiAgIC0gRGVzY3JpcHRpb24/IGludGVyZmFjZSBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdPyBGaWVsZHNEZWZpbml0aW9uP1xuICAgKi9cblxuICBwYXJzZUludGVyZmFjZVR5cGVEZWZpbml0aW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2ludGVyZmFjZScpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGludGVyZmFjZXMgPSB0aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5JTlRFUkZBQ0VfVFlQRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgaW50ZXJmYWNlcyxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICBmaWVsZHMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFVuaW9uVHlwZURlZmluaXRpb24gOlxuICAgKiAgIC0gRGVzY3JpcHRpb24/IHVuaW9uIE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/IFVuaW9uTWVtYmVyVHlwZXM/XG4gICAqL1xuXG4gIHBhcnNlVW5pb25UeXBlRGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCd1bmlvbicpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3QgdHlwZXMgPSB0aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO1xuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuVU5JT05fVFlQRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICAgIHR5cGVzLFxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBVbmlvbk1lbWJlclR5cGVzIDpcbiAgICogICAtID0gYHxgPyBOYW1lZFR5cGVcbiAgICogICAtIFVuaW9uTWVtYmVyVHlwZXMgfCBOYW1lZFR5cGVcbiAgICovXG5cbiAgcGFyc2VVbmlvbk1lbWJlclR5cGVzKCkge1xuICAgIHJldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkVRVUFMUylcbiAgICAgID8gdGhpcy5kZWxpbWl0ZWRNYW55KFRva2VuS2luZC5QSVBFLCB0aGlzLnBhcnNlTmFtZWRUeXBlKVxuICAgICAgOiBbXTtcbiAgfVxuICAvKipcbiAgICogRW51bVR5cGVEZWZpbml0aW9uIDpcbiAgICogICAtIERlc2NyaXB0aW9uPyBlbnVtIE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/IEVudW1WYWx1ZXNEZWZpbml0aW9uP1xuICAgKi9cblxuICBwYXJzZUVudW1UeXBlRGVmaW5pdGlvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdlbnVtJyk7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgY29uc3QgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLnBhcnNlRW51bVZhbHVlc0RlZmluaXRpb24oKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLkVOVU1fVFlQRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICAgIHZhbHVlcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogYGBgXG4gICAqIEVudW1WYWx1ZXNEZWZpbml0aW9uIDogeyBFbnVtVmFsdWVEZWZpbml0aW9uKyB9XG4gICAqIGBgYFxuICAgKi9cblxuICBwYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsTWFueShcbiAgICAgIFRva2VuS2luZC5CUkFDRV9MLFxuICAgICAgdGhpcy5wYXJzZUVudW1WYWx1ZURlZmluaXRpb24sXG4gICAgICBUb2tlbktpbmQuQlJBQ0VfUixcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBFbnVtVmFsdWVEZWZpbml0aW9uIDogRGVzY3JpcHRpb24/IEVudW1WYWx1ZSBEaXJlY3RpdmVzW0NvbnN0XT9cbiAgICovXG5cbiAgcGFyc2VFbnVtVmFsdWVEZWZpbml0aW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZUVudW1WYWx1ZU5hbWUoKTtcbiAgICBjb25zdCBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO1xuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuRU5VTV9WQUxVRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRW51bVZhbHVlIDogTmFtZSBidXQgbm90IGB0cnVlYCwgYGZhbHNlYCBvciBgbnVsbGBcbiAgICovXG5cbiAgcGFyc2VFbnVtVmFsdWVOYW1lKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuX2xleGVyLnRva2VuLnZhbHVlID09PSAndHJ1ZScgfHxcbiAgICAgIHRoaXMuX2xleGVyLnRva2VuLnZhbHVlID09PSAnZmFsc2UnIHx8XG4gICAgICB0aGlzLl9sZXhlci50b2tlbi52YWx1ZSA9PT0gJ251bGwnXG4gICAgKSB7XG4gICAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgICAgdGhpcy5fbGV4ZXIuc291cmNlLFxuICAgICAgICB0aGlzLl9sZXhlci50b2tlbi5zdGFydCxcbiAgICAgICAgYCR7Z2V0VG9rZW5EZXNjKFxuICAgICAgICAgIHRoaXMuX2xleGVyLnRva2VuLFxuICAgICAgICApfSBpcyByZXNlcnZlZCBhbmQgY2Fubm90IGJlIHVzZWQgZm9yIGFuIGVudW0gdmFsdWUuYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VOYW1lKCk7XG4gIH1cbiAgLyoqXG4gICAqIElucHV0T2JqZWN0VHlwZURlZmluaXRpb24gOlxuICAgKiAgIC0gRGVzY3JpcHRpb24/IGlucHV0IE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/IElucHV0RmllbGRzRGVmaW5pdGlvbj9cbiAgICovXG5cbiAgcGFyc2VJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2lucHV0Jyk7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgY29uc3QgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtcbiAgICBjb25zdCBmaWVsZHMgPSB0aGlzLnBhcnNlSW5wdXRGaWVsZHNEZWZpbml0aW9uKCk7XG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICAgIGZpZWxkcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogYGBgXG4gICAqIElucHV0RmllbGRzRGVmaW5pdGlvbiA6IHsgSW5wdXRWYWx1ZURlZmluaXRpb24rIH1cbiAgICogYGBgXG4gICAqL1xuXG4gIHBhcnNlSW5wdXRGaWVsZHNEZWZpbml0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsTWFueShcbiAgICAgIFRva2VuS2luZC5CUkFDRV9MLFxuICAgICAgdGhpcy5wYXJzZUlucHV0VmFsdWVEZWYsXG4gICAgICBUb2tlbktpbmQuQlJBQ0VfUixcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBUeXBlU3lzdGVtRXh0ZW5zaW9uIDpcbiAgICogICAtIFNjaGVtYUV4dGVuc2lvblxuICAgKiAgIC0gVHlwZUV4dGVuc2lvblxuICAgKlxuICAgKiBUeXBlRXh0ZW5zaW9uIDpcbiAgICogICAtIFNjYWxhclR5cGVFeHRlbnNpb25cbiAgICogICAtIE9iamVjdFR5cGVFeHRlbnNpb25cbiAgICogICAtIEludGVyZmFjZVR5cGVFeHRlbnNpb25cbiAgICogICAtIFVuaW9uVHlwZUV4dGVuc2lvblxuICAgKiAgIC0gRW51bVR5cGVFeHRlbnNpb25cbiAgICogICAtIElucHV0T2JqZWN0VHlwZURlZmluaXRpb25cbiAgICovXG5cbiAgcGFyc2VUeXBlU3lzdGVtRXh0ZW5zaW9uKCkge1xuICAgIGNvbnN0IGtleXdvcmRUb2tlbiA9IHRoaXMuX2xleGVyLmxvb2thaGVhZCgpO1xuXG4gICAgaWYgKGtleXdvcmRUb2tlbi5raW5kID09PSBUb2tlbktpbmQuTkFNRSkge1xuICAgICAgc3dpdGNoIChrZXl3b3JkVG9rZW4udmFsdWUpIHtcbiAgICAgICAgY2FzZSAnc2NoZW1hJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVNjaGVtYUV4dGVuc2lvbigpO1xuXG4gICAgICAgIGNhc2UgJ3NjYWxhcic6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTY2FsYXJUeXBlRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VPYmplY3RUeXBlRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgY2FzZSAnaW50ZXJmYWNlJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUludGVyZmFjZVR5cGVFeHRlbnNpb24oKTtcblxuICAgICAgICBjYXNlICd1bmlvbic6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKTtcblxuICAgICAgICBjYXNlICdlbnVtJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUVudW1UeXBlRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKGtleXdvcmRUb2tlbik7XG4gIH1cbiAgLyoqXG4gICAqIGBgYFxuICAgKiBTY2hlbWFFeHRlbnNpb24gOlxuICAgKiAgLSBleHRlbmQgc2NoZW1hIERpcmVjdGl2ZXNbQ29uc3RdPyB7IE9wZXJhdGlvblR5cGVEZWZpbml0aW9uKyB9XG4gICAqICAtIGV4dGVuZCBzY2hlbWEgRGlyZWN0aXZlc1tDb25zdF1cbiAgICogYGBgXG4gICAqL1xuXG4gIHBhcnNlU2NoZW1hRXh0ZW5zaW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdleHRlbmQnKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ3NjaGVtYScpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3Qgb3BlcmF0aW9uVHlwZXMgPSB0aGlzLm9wdGlvbmFsTWFueShcbiAgICAgIFRva2VuS2luZC5CUkFDRV9MLFxuICAgICAgdGhpcy5wYXJzZU9wZXJhdGlvblR5cGVEZWZpbml0aW9uLFxuICAgICAgVG9rZW5LaW5kLkJSQUNFX1IsXG4gICAgKTtcblxuICAgIGlmIChkaXJlY3RpdmVzLmxlbmd0aCA9PT0gMCAmJiBvcGVyYXRpb25UeXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuU0NIRU1BX0VYVEVOU0lPTixcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICBvcGVyYXRpb25UeXBlcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogU2NhbGFyVHlwZUV4dGVuc2lvbiA6XG4gICAqICAgLSBleHRlbmQgc2NhbGFyIE5hbWUgRGlyZWN0aXZlc1tDb25zdF1cbiAgICovXG5cbiAgcGFyc2VTY2FsYXJUeXBlRXh0ZW5zaW9uKCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdleHRlbmQnKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ3NjYWxhcicpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG5cbiAgICBpZiAoZGlyZWN0aXZlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuU0NBTEFSX1RZUEVfRVhURU5TSU9OLFxuICAgICAgbmFtZSxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIE9iamVjdFR5cGVFeHRlbnNpb24gOlxuICAgKiAgLSBleHRlbmQgdHlwZSBOYW1lIEltcGxlbWVudHNJbnRlcmZhY2VzPyBEaXJlY3RpdmVzW0NvbnN0XT8gRmllbGRzRGVmaW5pdGlvblxuICAgKiAgLSBleHRlbmQgdHlwZSBOYW1lIEltcGxlbWVudHNJbnRlcmZhY2VzPyBEaXJlY3RpdmVzW0NvbnN0XVxuICAgKiAgLSBleHRlbmQgdHlwZSBOYW1lIEltcGxlbWVudHNJbnRlcmZhY2VzXG4gICAqL1xuXG4gIHBhcnNlT2JqZWN0VHlwZUV4dGVuc2lvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCd0eXBlJyk7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgY29uc3QgaW50ZXJmYWNlcyA9IHRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3QgZmllbGRzID0gdGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtcblxuICAgIGlmIChcbiAgICAgIGludGVyZmFjZXMubGVuZ3RoID09PSAwICYmXG4gICAgICBkaXJlY3RpdmVzLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgZmllbGRzLmxlbmd0aCA9PT0gMFxuICAgICkge1xuICAgICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5PQkpFQ1RfVFlQRV9FWFRFTlNJT04sXG4gICAgICBuYW1lLFxuICAgICAgaW50ZXJmYWNlcyxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICBmaWVsZHMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEludGVyZmFjZVR5cGVFeHRlbnNpb24gOlxuICAgKiAgLSBleHRlbmQgaW50ZXJmYWNlIE5hbWUgSW1wbGVtZW50c0ludGVyZmFjZXM/IERpcmVjdGl2ZXNbQ29uc3RdPyBGaWVsZHNEZWZpbml0aW9uXG4gICAqICAtIGV4dGVuZCBpbnRlcmZhY2UgTmFtZSBJbXBsZW1lbnRzSW50ZXJmYWNlcz8gRGlyZWN0aXZlc1tDb25zdF1cbiAgICogIC0gZXh0ZW5kIGludGVyZmFjZSBOYW1lIEltcGxlbWVudHNJbnRlcmZhY2VzXG4gICAqL1xuXG4gIHBhcnNlSW50ZXJmYWNlVHlwZUV4dGVuc2lvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdpbnRlcmZhY2UnKTtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICBjb25zdCBpbnRlcmZhY2VzID0gdGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCk7XG4gICAgY29uc3QgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtcbiAgICBjb25zdCBmaWVsZHMgPSB0aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO1xuXG4gICAgaWYgKFxuICAgICAgaW50ZXJmYWNlcy5sZW5ndGggPT09IDAgJiZcbiAgICAgIGRpcmVjdGl2ZXMubGVuZ3RoID09PSAwICYmXG4gICAgICBmaWVsZHMubGVuZ3RoID09PSAwXG4gICAgKSB7XG4gICAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTixcbiAgICAgIG5hbWUsXG4gICAgICBpbnRlcmZhY2VzLFxuICAgICAgZGlyZWN0aXZlcyxcbiAgICAgIGZpZWxkcyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogVW5pb25UeXBlRXh0ZW5zaW9uIDpcbiAgICogICAtIGV4dGVuZCB1bmlvbiBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdPyBVbmlvbk1lbWJlclR5cGVzXG4gICAqICAgLSBleHRlbmQgdW5pb24gTmFtZSBEaXJlY3RpdmVzW0NvbnN0XVxuICAgKi9cblxuICBwYXJzZVVuaW9uVHlwZUV4dGVuc2lvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCd1bmlvbicpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3QgdHlwZXMgPSB0aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO1xuXG4gICAgaWYgKGRpcmVjdGl2ZXMubGVuZ3RoID09PSAwICYmIHR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5VTklPTl9UWVBFX0VYVEVOU0lPTixcbiAgICAgIG5hbWUsXG4gICAgICBkaXJlY3RpdmVzLFxuICAgICAgdHlwZXMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEVudW1UeXBlRXh0ZW5zaW9uIDpcbiAgICogICAtIGV4dGVuZCBlbnVtIE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/IEVudW1WYWx1ZXNEZWZpbml0aW9uXG4gICAqICAgLSBleHRlbmQgZW51bSBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdXG4gICAqL1xuXG4gIHBhcnNlRW51bVR5cGVFeHRlbnNpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2V4dGVuZCcpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZW51bScpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7XG5cbiAgICBpZiAoZGlyZWN0aXZlcy5sZW5ndGggPT09IDAgJiYgdmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubm9kZShzdGFydCwge1xuICAgICAga2luZDogS2luZC5FTlVNX1RZUEVfRVhURU5TSU9OLFxuICAgICAgbmFtZSxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICB2YWx1ZXMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIElucHV0T2JqZWN0VHlwZUV4dGVuc2lvbiA6XG4gICAqICAgLSBleHRlbmQgaW5wdXQgTmFtZSBEaXJlY3RpdmVzW0NvbnN0XT8gSW5wdXRGaWVsZHNEZWZpbml0aW9uXG4gICAqICAgLSBleHRlbmQgaW5wdXQgTmFtZSBEaXJlY3RpdmVzW0NvbnN0XVxuICAgKi9cblxuICBwYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdpbnB1dCcpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7XG4gICAgY29uc3QgZmllbGRzID0gdGhpcy5wYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpO1xuXG4gICAgaWYgKGRpcmVjdGl2ZXMubGVuZ3RoID09PSAwICYmIGZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vZGUoc3RhcnQsIHtcbiAgICAgIGtpbmQ6IEtpbmQuSU5QVVRfT0JKRUNUX1RZUEVfRVhURU5TSU9OLFxuICAgICAgbmFtZSxcbiAgICAgIGRpcmVjdGl2ZXMsXG4gICAgICBmaWVsZHMsXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIGBgYFxuICAgKiBEaXJlY3RpdmVEZWZpbml0aW9uIDpcbiAgICogICAtIERlc2NyaXB0aW9uPyBkaXJlY3RpdmUgQCBOYW1lIEFyZ3VtZW50c0RlZmluaXRpb24/IGByZXBlYXRhYmxlYD8gb24gRGlyZWN0aXZlTG9jYXRpb25zXG4gICAqIGBgYFxuICAgKi9cblxuICBwYXJzZURpcmVjdGl2ZURlZmluaXRpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZGlyZWN0aXZlJyk7XG4gICAgdGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuQVQpO1xuICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnBhcnNlQXJndW1lbnREZWZzKCk7XG4gICAgY29uc3QgcmVwZWF0YWJsZSA9IHRoaXMuZXhwZWN0T3B0aW9uYWxLZXl3b3JkKCdyZXBlYXRhYmxlJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdvbicpO1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMucGFyc2VEaXJlY3RpdmVMb2NhdGlvbnMoKTtcbiAgICByZXR1cm4gdGhpcy5ub2RlKHN0YXJ0LCB7XG4gICAgICBraW5kOiBLaW5kLkRJUkVDVElWRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBuYW1lLFxuICAgICAgYXJndW1lbnRzOiBhcmdzLFxuICAgICAgcmVwZWF0YWJsZSxcbiAgICAgIGxvY2F0aW9ucyxcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogRGlyZWN0aXZlTG9jYXRpb25zIDpcbiAgICogICAtIGB8YD8gRGlyZWN0aXZlTG9jYXRpb25cbiAgICogICAtIERpcmVjdGl2ZUxvY2F0aW9ucyB8IERpcmVjdGl2ZUxvY2F0aW9uXG4gICAqL1xuXG4gIHBhcnNlRGlyZWN0aXZlTG9jYXRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLmRlbGltaXRlZE1hbnkoVG9rZW5LaW5kLlBJUEUsIHRoaXMucGFyc2VEaXJlY3RpdmVMb2NhdGlvbik7XG4gIH1cbiAgLypcbiAgICogRGlyZWN0aXZlTG9jYXRpb24gOlxuICAgKiAgIC0gRXhlY3V0YWJsZURpcmVjdGl2ZUxvY2F0aW9uXG4gICAqICAgLSBUeXBlU3lzdGVtRGlyZWN0aXZlTG9jYXRpb25cbiAgICpcbiAgICogRXhlY3V0YWJsZURpcmVjdGl2ZUxvY2F0aW9uIDogb25lIG9mXG4gICAqICAgYFFVRVJZYFxuICAgKiAgIGBNVVRBVElPTmBcbiAgICogICBgU1VCU0NSSVBUSU9OYFxuICAgKiAgIGBGSUVMRGBcbiAgICogICBgRlJBR01FTlRfREVGSU5JVElPTmBcbiAgICogICBgRlJBR01FTlRfU1BSRUFEYFxuICAgKiAgIGBJTkxJTkVfRlJBR01FTlRgXG4gICAqXG4gICAqIFR5cGVTeXN0ZW1EaXJlY3RpdmVMb2NhdGlvbiA6IG9uZSBvZlxuICAgKiAgIGBTQ0hFTUFgXG4gICAqICAgYFNDQUxBUmBcbiAgICogICBgT0JKRUNUYFxuICAgKiAgIGBGSUVMRF9ERUZJTklUSU9OYFxuICAgKiAgIGBBUkdVTUVOVF9ERUZJTklUSU9OYFxuICAgKiAgIGBJTlRFUkZBQ0VgXG4gICAqICAgYFVOSU9OYFxuICAgKiAgIGBFTlVNYFxuICAgKiAgIGBFTlVNX1ZBTFVFYFxuICAgKiAgIGBJTlBVVF9PQkpFQ1RgXG4gICAqICAgYElOUFVUX0ZJRUxEX0RFRklOSVRJT05gXG4gICAqL1xuXG4gIHBhcnNlRGlyZWN0aXZlTG9jYXRpb24oKSB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoRGlyZWN0aXZlTG9jYXRpb24sIG5hbWUudmFsdWUpKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG5cbiAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoc3RhcnQpO1xuICB9IC8vIENvcmUgcGFyc2luZyB1dGlsaXR5IGZ1bmN0aW9uc1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbm9kZSB0aGF0LCBpZiBjb25maWd1cmVkIHRvIGRvIHNvLCBzZXRzIGEgXCJsb2NcIiBmaWVsZCBhcyBhXG4gICAqIGxvY2F0aW9uIG9iamVjdCwgdXNlZCB0byBpZGVudGlmeSB0aGUgcGxhY2UgaW4gdGhlIHNvdXJjZSB0aGF0IGNyZWF0ZWQgYVxuICAgKiBnaXZlbiBwYXJzZWQgb2JqZWN0LlxuICAgKi9cblxuICBub2RlKHN0YXJ0VG9rZW4sIG5vZGUpIHtcbiAgICBpZiAodGhpcy5fb3B0aW9ucy5ub0xvY2F0aW9uICE9PSB0cnVlKSB7XG4gICAgICBub2RlLmxvYyA9IG5ldyBMb2NhdGlvbihcbiAgICAgICAgc3RhcnRUb2tlbixcbiAgICAgICAgdGhpcy5fbGV4ZXIubGFzdFRva2VuLFxuICAgICAgICB0aGlzLl9sZXhlci5zb3VyY2UsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlO1xuICB9XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBuZXh0IHRva2VuIGlzIG9mIGEgZ2l2ZW4ga2luZFxuICAgKi9cblxuICBwZWVrKGtpbmQpIHtcbiAgICByZXR1cm4gdGhpcy5fbGV4ZXIudG9rZW4ua2luZCA9PT0ga2luZDtcbiAgfVxuICAvKipcbiAgICogSWYgdGhlIG5leHQgdG9rZW4gaXMgb2YgdGhlIGdpdmVuIGtpbmQsIHJldHVybiB0aGF0IHRva2VuIGFmdGVyIGFkdmFuY2luZyB0aGUgbGV4ZXIuXG4gICAqIE90aGVyd2lzZSwgZG8gbm90IGNoYW5nZSB0aGUgcGFyc2VyIHN0YXRlIGFuZCB0aHJvdyBhbiBlcnJvci5cbiAgICovXG5cbiAgZXhwZWN0VG9rZW4oa2luZCkge1xuICAgIGNvbnN0IHRva2VuID0gdGhpcy5fbGV4ZXIudG9rZW47XG5cbiAgICBpZiAodG9rZW4ua2luZCA9PT0ga2luZCkge1xuICAgICAgdGhpcy5hZHZhbmNlTGV4ZXIoKTtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG5cbiAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgIHRoaXMuX2xleGVyLnNvdXJjZSxcbiAgICAgIHRva2VuLnN0YXJ0LFxuICAgICAgYEV4cGVjdGVkICR7Z2V0VG9rZW5LaW5kRGVzYyhraW5kKX0sIGZvdW5kICR7Z2V0VG9rZW5EZXNjKHRva2VuKX0uYCxcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBJZiB0aGUgbmV4dCB0b2tlbiBpcyBvZiB0aGUgZ2l2ZW4ga2luZCwgcmV0dXJuIFwidHJ1ZVwiIGFmdGVyIGFkdmFuY2luZyB0aGUgbGV4ZXIuXG4gICAqIE90aGVyd2lzZSwgZG8gbm90IGNoYW5nZSB0aGUgcGFyc2VyIHN0YXRlIGFuZCByZXR1cm4gXCJmYWxzZVwiLlxuICAgKi9cblxuICBleHBlY3RPcHRpb25hbFRva2VuKGtpbmQpIHtcbiAgICBjb25zdCB0b2tlbiA9IHRoaXMuX2xleGVyLnRva2VuO1xuXG4gICAgaWYgKHRva2VuLmtpbmQgPT09IGtpbmQpIHtcbiAgICAgIHRoaXMuYWR2YW5jZUxleGVyKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIElmIHRoZSBuZXh0IHRva2VuIGlzIGEgZ2l2ZW4ga2V5d29yZCwgYWR2YW5jZSB0aGUgbGV4ZXIuXG4gICAqIE90aGVyd2lzZSwgZG8gbm90IGNoYW5nZSB0aGUgcGFyc2VyIHN0YXRlIGFuZCB0aHJvdyBhbiBlcnJvci5cbiAgICovXG5cbiAgZXhwZWN0S2V5d29yZCh2YWx1ZSkge1xuICAgIGNvbnN0IHRva2VuID0gdGhpcy5fbGV4ZXIudG9rZW47XG5cbiAgICBpZiAodG9rZW4ua2luZCA9PT0gVG9rZW5LaW5kLk5BTUUgJiYgdG9rZW4udmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICB0aGlzLmFkdmFuY2VMZXhlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgICAgdGhpcy5fbGV4ZXIuc291cmNlLFxuICAgICAgICB0b2tlbi5zdGFydCxcbiAgICAgICAgYEV4cGVjdGVkIFwiJHt2YWx1ZX1cIiwgZm91bmQgJHtnZXRUb2tlbkRlc2ModG9rZW4pfS5gLFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIElmIHRoZSBuZXh0IHRva2VuIGlzIGEgZ2l2ZW4ga2V5d29yZCwgcmV0dXJuIFwidHJ1ZVwiIGFmdGVyIGFkdmFuY2luZyB0aGUgbGV4ZXIuXG4gICAqIE90aGVyd2lzZSwgZG8gbm90IGNoYW5nZSB0aGUgcGFyc2VyIHN0YXRlIGFuZCByZXR1cm4gXCJmYWxzZVwiLlxuICAgKi9cblxuICBleHBlY3RPcHRpb25hbEtleXdvcmQodmFsdWUpIHtcbiAgICBjb25zdCB0b2tlbiA9IHRoaXMuX2xleGVyLnRva2VuO1xuXG4gICAgaWYgKHRva2VuLmtpbmQgPT09IFRva2VuS2luZC5OQU1FICYmIHRva2VuLnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgdGhpcy5hZHZhbmNlTGV4ZXIoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhbiBlcnJvciB3aGVuIGFuIHVuZXhwZWN0ZWQgbGV4ZWQgdG9rZW4gaXMgZW5jb3VudGVyZWQuXG4gICAqL1xuXG4gIHVuZXhwZWN0ZWQoYXRUb2tlbikge1xuICAgIGNvbnN0IHRva2VuID1cbiAgICAgIGF0VG9rZW4gIT09IG51bGwgJiYgYXRUb2tlbiAhPT0gdm9pZCAwID8gYXRUb2tlbiA6IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHJldHVybiBzeW50YXhFcnJvcihcbiAgICAgIHRoaXMuX2xleGVyLnNvdXJjZSxcbiAgICAgIHRva2VuLnN0YXJ0LFxuICAgICAgYFVuZXhwZWN0ZWQgJHtnZXRUb2tlbkRlc2ModG9rZW4pfS5gLFxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwb3NzaWJseSBlbXB0eSBsaXN0IG9mIHBhcnNlIG5vZGVzLCBkZXRlcm1pbmVkIGJ5IHRoZSBwYXJzZUZuLlxuICAgKiBUaGlzIGxpc3QgYmVnaW5zIHdpdGggYSBsZXggdG9rZW4gb2Ygb3BlbktpbmQgYW5kIGVuZHMgd2l0aCBhIGxleCB0b2tlbiBvZiBjbG9zZUtpbmQuXG4gICAqIEFkdmFuY2VzIHRoZSBwYXJzZXIgdG8gdGhlIG5leHQgbGV4IHRva2VuIGFmdGVyIHRoZSBjbG9zaW5nIHRva2VuLlxuICAgKi9cblxuICBhbnkob3BlbktpbmQsIHBhcnNlRm4sIGNsb3NlS2luZCkge1xuICAgIHRoaXMuZXhwZWN0VG9rZW4ob3BlbktpbmQpO1xuICAgIGNvbnN0IG5vZGVzID0gW107XG5cbiAgICB3aGlsZSAoIXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihjbG9zZUtpbmQpKSB7XG4gICAgICBub2Rlcy5wdXNoKHBhcnNlRm4uY2FsbCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBwYXJzZSBub2RlcywgZGV0ZXJtaW5lZCBieSB0aGUgcGFyc2VGbi5cbiAgICogSXQgY2FuIGJlIGVtcHR5IG9ubHkgaWYgb3BlbiB0b2tlbiBpcyBtaXNzaW5nIG90aGVyd2lzZSBpdCB3aWxsIGFsd2F5cyByZXR1cm4gbm9uLWVtcHR5IGxpc3RcbiAgICogdGhhdCBiZWdpbnMgd2l0aCBhIGxleCB0b2tlbiBvZiBvcGVuS2luZCBhbmQgZW5kcyB3aXRoIGEgbGV4IHRva2VuIG9mIGNsb3NlS2luZC5cbiAgICogQWR2YW5jZXMgdGhlIHBhcnNlciB0byB0aGUgbmV4dCBsZXggdG9rZW4gYWZ0ZXIgdGhlIGNsb3NpbmcgdG9rZW4uXG4gICAqL1xuXG4gIG9wdGlvbmFsTWFueShvcGVuS2luZCwgcGFyc2VGbiwgY2xvc2VLaW5kKSB7XG4gICAgaWYgKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihvcGVuS2luZCkpIHtcbiAgICAgIGNvbnN0IG5vZGVzID0gW107XG5cbiAgICAgIGRvIHtcbiAgICAgICAgbm9kZXMucHVzaChwYXJzZUZuLmNhbGwodGhpcykpO1xuICAgICAgfSB3aGlsZSAoIXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihjbG9zZUtpbmQpKTtcblxuICAgICAgcmV0dXJuIG5vZGVzO1xuICAgIH1cblxuICAgIHJldHVybiBbXTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIG5vbi1lbXB0eSBsaXN0IG9mIHBhcnNlIG5vZGVzLCBkZXRlcm1pbmVkIGJ5IHRoZSBwYXJzZUZuLlxuICAgKiBUaGlzIGxpc3QgYmVnaW5zIHdpdGggYSBsZXggdG9rZW4gb2Ygb3BlbktpbmQgYW5kIGVuZHMgd2l0aCBhIGxleCB0b2tlbiBvZiBjbG9zZUtpbmQuXG4gICAqIEFkdmFuY2VzIHRoZSBwYXJzZXIgdG8gdGhlIG5leHQgbGV4IHRva2VuIGFmdGVyIHRoZSBjbG9zaW5nIHRva2VuLlxuICAgKi9cblxuICBtYW55KG9wZW5LaW5kLCBwYXJzZUZuLCBjbG9zZUtpbmQpIHtcbiAgICB0aGlzLmV4cGVjdFRva2VuKG9wZW5LaW5kKTtcbiAgICBjb25zdCBub2RlcyA9IFtdO1xuXG4gICAgZG8ge1xuICAgICAgbm9kZXMucHVzaChwYXJzZUZuLmNhbGwodGhpcykpO1xuICAgIH0gd2hpbGUgKCF0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oY2xvc2VLaW5kKSk7XG5cbiAgICByZXR1cm4gbm9kZXM7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBub24tZW1wdHkgbGlzdCBvZiBwYXJzZSBub2RlcywgZGV0ZXJtaW5lZCBieSB0aGUgcGFyc2VGbi5cbiAgICogVGhpcyBsaXN0IG1heSBiZWdpbiB3aXRoIGEgbGV4IHRva2VuIG9mIGRlbGltaXRlcktpbmQgZm9sbG93ZWQgYnkgaXRlbXMgc2VwYXJhdGVkIGJ5IGxleCB0b2tlbnMgb2YgdG9rZW5LaW5kLlxuICAgKiBBZHZhbmNlcyB0aGUgcGFyc2VyIHRvIHRoZSBuZXh0IGxleCB0b2tlbiBhZnRlciBsYXN0IGl0ZW0gaW4gdGhlIGxpc3QuXG4gICAqL1xuXG4gIGRlbGltaXRlZE1hbnkoZGVsaW1pdGVyS2luZCwgcGFyc2VGbikge1xuICAgIHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihkZWxpbWl0ZXJLaW5kKTtcbiAgICBjb25zdCBub2RlcyA9IFtdO1xuXG4gICAgZG8ge1xuICAgICAgbm9kZXMucHVzaChwYXJzZUZuLmNhbGwodGhpcykpO1xuICAgIH0gd2hpbGUgKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihkZWxpbWl0ZXJLaW5kKSk7XG5cbiAgICByZXR1cm4gbm9kZXM7XG4gIH1cblxuICBhZHZhbmNlTGV4ZXIoKSB7XG4gICAgY29uc3QgeyBtYXhUb2tlbnMgfSA9IHRoaXMuX29wdGlvbnM7XG5cbiAgICBjb25zdCB0b2tlbiA9IHRoaXMuX2xleGVyLmFkdmFuY2UoKTtcblxuICAgIGlmICh0b2tlbi5raW5kICE9PSBUb2tlbktpbmQuRU9GKSB7XG4gICAgICArK3RoaXMuX3Rva2VuQ291bnRlcjtcblxuICAgICAgaWYgKG1heFRva2VucyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3Rva2VuQ291bnRlciA+IG1heFRva2Vucykge1xuICAgICAgICB0aHJvdyBzeW50YXhFcnJvcihcbiAgICAgICAgICB0aGlzLl9sZXhlci5zb3VyY2UsXG4gICAgICAgICAgdG9rZW4uc3RhcnQsXG4gICAgICAgICAgYERvY3VtZW50IGNvbnRhaW5zIG1vcmUgdGhhdCAke21heFRva2Vuc30gdG9rZW5zLiBQYXJzaW5nIGFib3J0ZWQuYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gZGVzY3JpYmUgYSB0b2tlbiBhcyBhIHN0cmluZyBmb3IgZGVidWdnaW5nLlxuICovXG5cbmZ1bmN0aW9uIGdldFRva2VuRGVzYyh0b2tlbikge1xuICBjb25zdCB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuICByZXR1cm4gZ2V0VG9rZW5LaW5kRGVzYyh0b2tlbi5raW5kKSArICh2YWx1ZSAhPSBudWxsID8gYCBcIiR7dmFsdWV9XCJgIDogJycpO1xufVxuLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiB0byBkZXNjcmliZSBhIHRva2VuIGtpbmQgYXMgYSBzdHJpbmcgZm9yIGRlYnVnZ2luZy5cbiAqL1xuXG5mdW5jdGlvbiBnZXRUb2tlbktpbmREZXNjKGtpbmQpIHtcbiAgcmV0dXJuIGlzUHVuY3R1YXRvclRva2VuS2luZChraW5kKSA/IGBcIiR7a2luZH1cImAgOiBraW5kO1xufVxuIiwKICAgICIvKipcbiAqIFByaW50cyBhIHN0cmluZyBhcyBhIEdyYXBoUUwgU3RyaW5nVmFsdWUgbGl0ZXJhbC4gUmVwbGFjZXMgY29udHJvbCBjaGFyYWN0ZXJzXG4gKiBhbmQgZXhjbHVkZWQgY2hhcmFjdGVycyAoXCIgVSswMDIyIGFuZCBcXFxcIFUrMDA1Qykgd2l0aCBlc2NhcGUgc2VxdWVuY2VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRTdHJpbmcoc3RyKSB7XG4gIHJldHVybiBgXCIke3N0ci5yZXBsYWNlKGVzY2FwZWRSZWdFeHAsIGVzY2FwZWRSZXBsYWNlcil9XCJgO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuXG5jb25zdCBlc2NhcGVkUmVnRXhwID0gL1tcXHgwMC1cXHgxZlxceDIyXFx4NWNcXHg3Zi1cXHg5Zl0vZztcblxuZnVuY3Rpb24gZXNjYXBlZFJlcGxhY2VyKHN0cikge1xuICByZXR1cm4gZXNjYXBlU2VxdWVuY2VzW3N0ci5jaGFyQ29kZUF0KDApXTtcbn0gLy8gcHJldHRpZXItaWdub3JlXG5cbmNvbnN0IGVzY2FwZVNlcXVlbmNlcyA9IFtcbiAgJ1xcXFx1MDAwMCcsXG4gICdcXFxcdTAwMDEnLFxuICAnXFxcXHUwMDAyJyxcbiAgJ1xcXFx1MDAwMycsXG4gICdcXFxcdTAwMDQnLFxuICAnXFxcXHUwMDA1JyxcbiAgJ1xcXFx1MDAwNicsXG4gICdcXFxcdTAwMDcnLFxuICAnXFxcXGInLFxuICAnXFxcXHQnLFxuICAnXFxcXG4nLFxuICAnXFxcXHUwMDBCJyxcbiAgJ1xcXFxmJyxcbiAgJ1xcXFxyJyxcbiAgJ1xcXFx1MDAwRScsXG4gICdcXFxcdTAwMEYnLFxuICAnXFxcXHUwMDEwJyxcbiAgJ1xcXFx1MDAxMScsXG4gICdcXFxcdTAwMTInLFxuICAnXFxcXHUwMDEzJyxcbiAgJ1xcXFx1MDAxNCcsXG4gICdcXFxcdTAwMTUnLFxuICAnXFxcXHUwMDE2JyxcbiAgJ1xcXFx1MDAxNycsXG4gICdcXFxcdTAwMTgnLFxuICAnXFxcXHUwMDE5JyxcbiAgJ1xcXFx1MDAxQScsXG4gICdcXFxcdTAwMUInLFxuICAnXFxcXHUwMDFDJyxcbiAgJ1xcXFx1MDAxRCcsXG4gICdcXFxcdTAwMUUnLFxuICAnXFxcXHUwMDFGJyxcbiAgJycsXG4gICcnLFxuICAnXFxcXFwiJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsIC8vIDJGXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLCAvLyAzRlxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJywgLy8gNEZcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJ1xcXFxcXFxcJyxcbiAgJycsXG4gICcnLFxuICAnJywgLy8gNUZcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsIC8vIDZGXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICcnLFxuICAnJyxcbiAgJycsXG4gICdcXFxcdTAwN0YnLFxuICAnXFxcXHUwMDgwJyxcbiAgJ1xcXFx1MDA4MScsXG4gICdcXFxcdTAwODInLFxuICAnXFxcXHUwMDgzJyxcbiAgJ1xcXFx1MDA4NCcsXG4gICdcXFxcdTAwODUnLFxuICAnXFxcXHUwMDg2JyxcbiAgJ1xcXFx1MDA4NycsXG4gICdcXFxcdTAwODgnLFxuICAnXFxcXHUwMDg5JyxcbiAgJ1xcXFx1MDA4QScsXG4gICdcXFxcdTAwOEInLFxuICAnXFxcXHUwMDhDJyxcbiAgJ1xcXFx1MDA4RCcsXG4gICdcXFxcdTAwOEUnLFxuICAnXFxcXHUwMDhGJyxcbiAgJ1xcXFx1MDA5MCcsXG4gICdcXFxcdTAwOTEnLFxuICAnXFxcXHUwMDkyJyxcbiAgJ1xcXFx1MDA5MycsXG4gICdcXFxcdTAwOTQnLFxuICAnXFxcXHUwMDk1JyxcbiAgJ1xcXFx1MDA5NicsXG4gICdcXFxcdTAwOTcnLFxuICAnXFxcXHUwMDk4JyxcbiAgJ1xcXFx1MDA5OScsXG4gICdcXFxcdTAwOUEnLFxuICAnXFxcXHUwMDlCJyxcbiAgJ1xcXFx1MDA5QycsXG4gICdcXFxcdTAwOUQnLFxuICAnXFxcXHUwMDlFJyxcbiAgJ1xcXFx1MDA5RicsXG5dO1xuIiwKICAgICJpbXBvcnQgeyBkZXZBc3NlcnQgfSBmcm9tICcuLi9qc3V0aWxzL2RldkFzc2VydC5tanMnO1xuaW1wb3J0IHsgaW5zcGVjdCB9IGZyb20gJy4uL2pzdXRpbHMvaW5zcGVjdC5tanMnO1xuaW1wb3J0IHsgaXNOb2RlLCBRdWVyeURvY3VtZW50S2V5cyB9IGZyb20gJy4vYXN0Lm1qcyc7XG5pbXBvcnQgeyBLaW5kIH0gZnJvbSAnLi9raW5kcy5tanMnO1xuLyoqXG4gKiBBIHZpc2l0b3IgaXMgcHJvdmlkZWQgdG8gdmlzaXQsIGl0IGNvbnRhaW5zIHRoZSBjb2xsZWN0aW9uIG9mXG4gKiByZWxldmFudCBmdW5jdGlvbnMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGUgdmlzaXRvcidzIHRyYXZlcnNhbC5cbiAqL1xuXG5leHBvcnQgY29uc3QgQlJFQUsgPSBPYmplY3QuZnJlZXplKHt9KTtcbi8qKlxuICogdmlzaXQoKSB3aWxsIHdhbGsgdGhyb3VnaCBhbiBBU1QgdXNpbmcgYSBkZXB0aC1maXJzdCB0cmF2ZXJzYWwsIGNhbGxpbmdcbiAqIHRoZSB2aXNpdG9yJ3MgZW50ZXIgZnVuY3Rpb24gYXQgZWFjaCBub2RlIGluIHRoZSB0cmF2ZXJzYWwsIGFuZCBjYWxsaW5nIHRoZVxuICogbGVhdmUgZnVuY3Rpb24gYWZ0ZXIgdmlzaXRpbmcgdGhhdCBub2RlIGFuZCBhbGwgb2YgaXRzIGNoaWxkIG5vZGVzLlxuICpcbiAqIEJ5IHJldHVybmluZyBkaWZmZXJlbnQgdmFsdWVzIGZyb20gdGhlIGVudGVyIGFuZCBsZWF2ZSBmdW5jdGlvbnMsIHRoZVxuICogYmVoYXZpb3Igb2YgdGhlIHZpc2l0b3IgY2FuIGJlIGFsdGVyZWQsIGluY2x1ZGluZyBza2lwcGluZyBvdmVyIGEgc3ViLXRyZWUgb2ZcbiAqIHRoZSBBU1QgKGJ5IHJldHVybmluZyBmYWxzZSksIGVkaXRpbmcgdGhlIEFTVCBieSByZXR1cm5pbmcgYSB2YWx1ZSBvciBudWxsXG4gKiB0byByZW1vdmUgdGhlIHZhbHVlLCBvciB0byBzdG9wIHRoZSB3aG9sZSB0cmF2ZXJzYWwgYnkgcmV0dXJuaW5nIEJSRUFLLlxuICpcbiAqIFdoZW4gdXNpbmcgdmlzaXQoKSB0byBlZGl0IGFuIEFTVCwgdGhlIG9yaWdpbmFsIEFTVCB3aWxsIG5vdCBiZSBtb2RpZmllZCwgYW5kXG4gKiBhIG5ldyB2ZXJzaW9uIG9mIHRoZSBBU1Qgd2l0aCB0aGUgY2hhbmdlcyBhcHBsaWVkIHdpbGwgYmUgcmV0dXJuZWQgZnJvbSB0aGVcbiAqIHZpc2l0IGZ1bmN0aW9uLlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBlZGl0ZWRBU1QgPSB2aXNpdChhc3QsIHtcbiAqICAgZW50ZXIobm9kZSwga2V5LCBwYXJlbnQsIHBhdGgsIGFuY2VzdG9ycykge1xuICogICAgIC8vIEByZXR1cm5cbiAqICAgICAvLyAgIHVuZGVmaW5lZDogbm8gYWN0aW9uXG4gKiAgICAgLy8gICBmYWxzZTogc2tpcCB2aXNpdGluZyB0aGlzIG5vZGVcbiAqICAgICAvLyAgIHZpc2l0b3IuQlJFQUs6IHN0b3AgdmlzaXRpbmcgYWx0b2dldGhlclxuICogICAgIC8vICAgbnVsbDogZGVsZXRlIHRoaXMgbm9kZVxuICogICAgIC8vICAgYW55IHZhbHVlOiByZXBsYWNlIHRoaXMgbm9kZSB3aXRoIHRoZSByZXR1cm5lZCB2YWx1ZVxuICogICB9LFxuICogICBsZWF2ZShub2RlLCBrZXksIHBhcmVudCwgcGF0aCwgYW5jZXN0b3JzKSB7XG4gKiAgICAgLy8gQHJldHVyblxuICogICAgIC8vICAgdW5kZWZpbmVkOiBubyBhY3Rpb25cbiAqICAgICAvLyAgIGZhbHNlOiBubyBhY3Rpb25cbiAqICAgICAvLyAgIHZpc2l0b3IuQlJFQUs6IHN0b3AgdmlzaXRpbmcgYWx0b2dldGhlclxuICogICAgIC8vICAgbnVsbDogZGVsZXRlIHRoaXMgbm9kZVxuICogICAgIC8vICAgYW55IHZhbHVlOiByZXBsYWNlIHRoaXMgbm9kZSB3aXRoIHRoZSByZXR1cm5lZCB2YWx1ZVxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEFsdGVybmF0aXZlbHkgdG8gcHJvdmlkaW5nIGVudGVyKCkgYW5kIGxlYXZlKCkgZnVuY3Rpb25zLCBhIHZpc2l0b3IgY2FuXG4gKiBpbnN0ZWFkIHByb3ZpZGUgZnVuY3Rpb25zIG5hbWVkIHRoZSBzYW1lIGFzIHRoZSBraW5kcyBvZiBBU1Qgbm9kZXMsIG9yXG4gKiBlbnRlci9sZWF2ZSB2aXNpdG9ycyBhdCBhIG5hbWVkIGtleSwgbGVhZGluZyB0byB0aHJlZSBwZXJtdXRhdGlvbnMgb2YgdGhlXG4gKiB2aXNpdG9yIEFQSTpcbiAqXG4gKiAxKSBOYW1lZCB2aXNpdG9ycyB0cmlnZ2VyZWQgd2hlbiBlbnRlcmluZyBhIG5vZGUgb2YgYSBzcGVjaWZpYyBraW5kLlxuICpcbiAqIGBgYHRzXG4gKiB2aXNpdChhc3QsIHtcbiAqICAgS2luZChub2RlKSB7XG4gKiAgICAgLy8gZW50ZXIgdGhlIFwiS2luZFwiIG5vZGVcbiAqICAgfVxuICogfSlcbiAqIGBgYFxuICpcbiAqIDIpIE5hbWVkIHZpc2l0b3JzIHRoYXQgdHJpZ2dlciB1cG9uIGVudGVyaW5nIGFuZCBsZWF2aW5nIGEgbm9kZSBvZiBhIHNwZWNpZmljIGtpbmQuXG4gKlxuICogYGBgdHNcbiAqIHZpc2l0KGFzdCwge1xuICogICBLaW5kOiB7XG4gKiAgICAgZW50ZXIobm9kZSkge1xuICogICAgICAgLy8gZW50ZXIgdGhlIFwiS2luZFwiIG5vZGVcbiAqICAgICB9XG4gKiAgICAgbGVhdmUobm9kZSkge1xuICogICAgICAgLy8gbGVhdmUgdGhlIFwiS2luZFwiIG5vZGVcbiAqICAgICB9XG4gKiAgIH1cbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiAzKSBHZW5lcmljIHZpc2l0b3JzIHRoYXQgdHJpZ2dlciB1cG9uIGVudGVyaW5nIGFuZCBsZWF2aW5nIGFueSBub2RlLlxuICpcbiAqIGBgYHRzXG4gKiB2aXNpdChhc3QsIHtcbiAqICAgZW50ZXIobm9kZSkge1xuICogICAgIC8vIGVudGVyIGFueSBub2RlXG4gKiAgIH0sXG4gKiAgIGxlYXZlKG5vZGUpIHtcbiAqICAgICAvLyBsZWF2ZSBhbnkgbm9kZVxuICogICB9XG4gKiB9KVxuICogYGBgXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHZpc2l0KHJvb3QsIHZpc2l0b3IsIHZpc2l0b3JLZXlzID0gUXVlcnlEb2N1bWVudEtleXMpIHtcbiAgY29uc3QgZW50ZXJMZWF2ZU1hcCA9IG5ldyBNYXAoKTtcblxuICBmb3IgKGNvbnN0IGtpbmQgb2YgT2JqZWN0LnZhbHVlcyhLaW5kKSkge1xuICAgIGVudGVyTGVhdmVNYXAuc2V0KGtpbmQsIGdldEVudGVyTGVhdmVGb3JLaW5kKHZpc2l0b3IsIGtpbmQpKTtcbiAgfVxuICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZi1pbml0ICovXG5cbiAgbGV0IHN0YWNrID0gdW5kZWZpbmVkO1xuICBsZXQgaW5BcnJheSA9IEFycmF5LmlzQXJyYXkocm9vdCk7XG4gIGxldCBrZXlzID0gW3Jvb3RdO1xuICBsZXQgaW5kZXggPSAtMTtcbiAgbGV0IGVkaXRzID0gW107XG4gIGxldCBub2RlID0gcm9vdDtcbiAgbGV0IGtleSA9IHVuZGVmaW5lZDtcbiAgbGV0IHBhcmVudCA9IHVuZGVmaW5lZDtcbiAgY29uc3QgcGF0aCA9IFtdO1xuICBjb25zdCBhbmNlc3RvcnMgPSBbXTtcbiAgLyogZXNsaW50LWVuYWJsZSBuby11bmRlZi1pbml0ICovXG5cbiAgZG8ge1xuICAgIGluZGV4Kys7XG4gICAgY29uc3QgaXNMZWF2aW5nID0gaW5kZXggPT09IGtleXMubGVuZ3RoO1xuICAgIGNvbnN0IGlzRWRpdGVkID0gaXNMZWF2aW5nICYmIGVkaXRzLmxlbmd0aCAhPT0gMDtcblxuICAgIGlmIChpc0xlYXZpbmcpIHtcbiAgICAgIGtleSA9IGFuY2VzdG9ycy5sZW5ndGggPT09IDAgPyB1bmRlZmluZWQgOiBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gICAgICBub2RlID0gcGFyZW50O1xuICAgICAgcGFyZW50ID0gYW5jZXN0b3JzLnBvcCgpO1xuXG4gICAgICBpZiAoaXNFZGl0ZWQpIHtcbiAgICAgICAgaWYgKGluQXJyYXkpIHtcbiAgICAgICAgICBub2RlID0gbm9kZS5zbGljZSgpO1xuICAgICAgICAgIGxldCBlZGl0T2Zmc2V0ID0gMDtcblxuICAgICAgICAgIGZvciAoY29uc3QgW2VkaXRLZXksIGVkaXRWYWx1ZV0gb2YgZWRpdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFycmF5S2V5ID0gZWRpdEtleSAtIGVkaXRPZmZzZXQ7XG5cbiAgICAgICAgICAgIGlmIChlZGl0VmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbm9kZS5zcGxpY2UoYXJyYXlLZXksIDEpO1xuICAgICAgICAgICAgICBlZGl0T2Zmc2V0Kys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBub2RlW2FycmF5S2V5XSA9IGVkaXRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kZSA9IHsgLi4ubm9kZSB9O1xuXG4gICAgICAgICAgZm9yIChjb25zdCBbZWRpdEtleSwgZWRpdFZhbHVlXSBvZiBlZGl0cykge1xuICAgICAgICAgICAgbm9kZVtlZGl0S2V5XSA9IGVkaXRWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaW5kZXggPSBzdGFjay5pbmRleDtcbiAgICAgIGtleXMgPSBzdGFjay5rZXlzO1xuICAgICAgZWRpdHMgPSBzdGFjay5lZGl0cztcbiAgICAgIGluQXJyYXkgPSBzdGFjay5pbkFycmF5O1xuICAgICAgc3RhY2sgPSBzdGFjay5wcmV2O1xuICAgIH0gZWxzZSBpZiAocGFyZW50KSB7XG4gICAgICBrZXkgPSBpbkFycmF5ID8gaW5kZXggOiBrZXlzW2luZGV4XTtcbiAgICAgIG5vZGUgPSBwYXJlbnRba2V5XTtcblxuICAgICAgaWYgKG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBwYXRoLnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0O1xuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KG5vZGUpKSB7XG4gICAgICB2YXIgX2VudGVyTGVhdmVNYXAkZ2V0LCBfZW50ZXJMZWF2ZU1hcCRnZXQyO1xuXG4gICAgICBpc05vZGUobm9kZSkgfHwgZGV2QXNzZXJ0KGZhbHNlLCBgSW52YWxpZCBBU1QgTm9kZTogJHtpbnNwZWN0KG5vZGUpfS5gKTtcbiAgICAgIGNvbnN0IHZpc2l0Rm4gPSBpc0xlYXZpbmdcbiAgICAgICAgPyAoX2VudGVyTGVhdmVNYXAkZ2V0ID0gZW50ZXJMZWF2ZU1hcC5nZXQobm9kZS5raW5kKSkgPT09IG51bGwgfHxcbiAgICAgICAgICBfZW50ZXJMZWF2ZU1hcCRnZXQgPT09IHZvaWQgMFxuICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgOiBfZW50ZXJMZWF2ZU1hcCRnZXQubGVhdmVcbiAgICAgICAgOiAoX2VudGVyTGVhdmVNYXAkZ2V0MiA9IGVudGVyTGVhdmVNYXAuZ2V0KG5vZGUua2luZCkpID09PSBudWxsIHx8XG4gICAgICAgICAgX2VudGVyTGVhdmVNYXAkZ2V0MiA9PT0gdm9pZCAwXG4gICAgICAgID8gdm9pZCAwXG4gICAgICAgIDogX2VudGVyTGVhdmVNYXAkZ2V0Mi5lbnRlcjtcbiAgICAgIHJlc3VsdCA9XG4gICAgICAgIHZpc2l0Rm4gPT09IG51bGwgfHwgdmlzaXRGbiA9PT0gdm9pZCAwXG4gICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICA6IHZpc2l0Rm4uY2FsbCh2aXNpdG9yLCBub2RlLCBrZXksIHBhcmVudCwgcGF0aCwgYW5jZXN0b3JzKTtcblxuICAgICAgaWYgKHJlc3VsdCA9PT0gQlJFQUspIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgIGlmICghaXNMZWF2aW5nKSB7XG4gICAgICAgICAgcGF0aC5wb3AoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlZGl0cy5wdXNoKFtrZXksIHJlc3VsdF0pO1xuXG4gICAgICAgIGlmICghaXNMZWF2aW5nKSB7XG4gICAgICAgICAgaWYgKGlzTm9kZShyZXN1bHQpKSB7XG4gICAgICAgICAgICBub2RlID0gcmVzdWx0O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXRoLnBvcCgpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkICYmIGlzRWRpdGVkKSB7XG4gICAgICBlZGl0cy5wdXNoKFtrZXksIG5vZGVdKTtcbiAgICB9XG5cbiAgICBpZiAoaXNMZWF2aW5nKSB7XG4gICAgICBwYXRoLnBvcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgX25vZGUka2luZDtcblxuICAgICAgc3RhY2sgPSB7XG4gICAgICAgIGluQXJyYXksXG4gICAgICAgIGluZGV4LFxuICAgICAgICBrZXlzLFxuICAgICAgICBlZGl0cyxcbiAgICAgICAgcHJldjogc3RhY2ssXG4gICAgICB9O1xuICAgICAgaW5BcnJheSA9IEFycmF5LmlzQXJyYXkobm9kZSk7XG4gICAgICBrZXlzID0gaW5BcnJheVxuICAgICAgICA/IG5vZGVcbiAgICAgICAgOiAoX25vZGUka2luZCA9IHZpc2l0b3JLZXlzW25vZGUua2luZF0pICE9PSBudWxsICYmXG4gICAgICAgICAgX25vZGUka2luZCAhPT0gdm9pZCAwXG4gICAgICAgID8gX25vZGUka2luZFxuICAgICAgICA6IFtdO1xuICAgICAgaW5kZXggPSAtMTtcbiAgICAgIGVkaXRzID0gW107XG5cbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgYW5jZXN0b3JzLnB1c2gocGFyZW50KTtcbiAgICAgIH1cblxuICAgICAgcGFyZW50ID0gbm9kZTtcbiAgICB9XG4gIH0gd2hpbGUgKHN0YWNrICE9PSB1bmRlZmluZWQpO1xuXG4gIGlmIChlZGl0cy5sZW5ndGggIT09IDApIHtcbiAgICAvLyBOZXcgcm9vdFxuICAgIHJldHVybiBlZGl0c1tlZGl0cy5sZW5ndGggLSAxXVsxXTtcbiAgfVxuXG4gIHJldHVybiByb290O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZpc2l0b3IgaW5zdGFuY2Ugd2hpY2ggZGVsZWdhdGVzIHRvIG1hbnkgdmlzaXRvcnMgdG8gcnVuIGluXG4gKiBwYXJhbGxlbC4gRWFjaCB2aXNpdG9yIHdpbGwgYmUgdmlzaXRlZCBmb3IgZWFjaCBub2RlIGJlZm9yZSBtb3Zpbmcgb24uXG4gKlxuICogSWYgYSBwcmlvciB2aXNpdG9yIGVkaXRzIGEgbm9kZSwgbm8gZm9sbG93aW5nIHZpc2l0b3JzIHdpbGwgc2VlIHRoYXQgbm9kZS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdmlzaXRJblBhcmFsbGVsKHZpc2l0b3JzKSB7XG4gIGNvbnN0IHNraXBwaW5nID0gbmV3IEFycmF5KHZpc2l0b3JzLmxlbmd0aCkuZmlsbChudWxsKTtcbiAgY29uc3QgbWVyZ2VkVmlzaXRvciA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgZm9yIChjb25zdCBraW5kIG9mIE9iamVjdC52YWx1ZXMoS2luZCkpIHtcbiAgICBsZXQgaGFzVmlzaXRvciA9IGZhbHNlO1xuICAgIGNvbnN0IGVudGVyTGlzdCA9IG5ldyBBcnJheSh2aXNpdG9ycy5sZW5ndGgpLmZpbGwodW5kZWZpbmVkKTtcbiAgICBjb25zdCBsZWF2ZUxpc3QgPSBuZXcgQXJyYXkodmlzaXRvcnMubGVuZ3RoKS5maWxsKHVuZGVmaW5lZCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZpc2l0b3JzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCB7IGVudGVyLCBsZWF2ZSB9ID0gZ2V0RW50ZXJMZWF2ZUZvcktpbmQodmlzaXRvcnNbaV0sIGtpbmQpO1xuICAgICAgaGFzVmlzaXRvciB8fCAoaGFzVmlzaXRvciA9IGVudGVyICE9IG51bGwgfHwgbGVhdmUgIT0gbnVsbCk7XG4gICAgICBlbnRlckxpc3RbaV0gPSBlbnRlcjtcbiAgICAgIGxlYXZlTGlzdFtpXSA9IGxlYXZlO1xuICAgIH1cblxuICAgIGlmICghaGFzVmlzaXRvcikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3QgbWVyZ2VkRW50ZXJMZWF2ZSA9IHtcbiAgICAgIGVudGVyKC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGFyZ3NbMF07XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aXNpdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChza2lwcGluZ1tpXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIF9lbnRlckxpc3QkaTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID1cbiAgICAgICAgICAgICAgKF9lbnRlckxpc3QkaSA9IGVudGVyTGlzdFtpXSkgPT09IG51bGwgfHwgX2VudGVyTGlzdCRpID09PSB2b2lkIDBcbiAgICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICAgIDogX2VudGVyTGlzdCRpLmFwcGx5KHZpc2l0b3JzW2ldLCBhcmdzKTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgc2tpcHBpbmdbaV0gPSBub2RlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IEJSRUFLKSB7XG4gICAgICAgICAgICAgIHNraXBwaW5nW2ldID0gQlJFQUs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBsZWF2ZSguLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBhcmdzWzBdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmlzaXRvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoc2tpcHBpbmdbaV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBfbGVhdmVMaXN0JGk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9XG4gICAgICAgICAgICAgIChfbGVhdmVMaXN0JGkgPSBsZWF2ZUxpc3RbaV0pID09PSBudWxsIHx8IF9sZWF2ZUxpc3QkaSA9PT0gdm9pZCAwXG4gICAgICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgICAgICA6IF9sZWF2ZUxpc3QkaS5hcHBseSh2aXNpdG9yc1tpXSwgYXJncyk7XG5cbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IEJSRUFLKSB7XG4gICAgICAgICAgICAgIHNraXBwaW5nW2ldID0gQlJFQUs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHNraXBwaW5nW2ldID09PSBub2RlKSB7XG4gICAgICAgICAgICBza2lwcGluZ1tpXSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gICAgbWVyZ2VkVmlzaXRvcltraW5kXSA9IG1lcmdlZEVudGVyTGVhdmU7XG4gIH1cblxuICByZXR1cm4gbWVyZ2VkVmlzaXRvcjtcbn1cbi8qKlxuICogR2l2ZW4gYSB2aXNpdG9yIGluc3RhbmNlIGFuZCBhIG5vZGUga2luZCwgcmV0dXJuIEVudGVyTGVhdmVWaXNpdG9yIGZvciB0aGF0IGtpbmQuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudGVyTGVhdmVGb3JLaW5kKHZpc2l0b3IsIGtpbmQpIHtcbiAgY29uc3Qga2luZFZpc2l0b3IgPSB2aXNpdG9yW2tpbmRdO1xuXG4gIGlmICh0eXBlb2Yga2luZFZpc2l0b3IgPT09ICdvYmplY3QnKSB7XG4gICAgLy8geyBLaW5kOiB7IGVudGVyKCkge30sIGxlYXZlKCkge30gfSB9XG4gICAgcmV0dXJuIGtpbmRWaXNpdG9yO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBraW5kVmlzaXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIHsgS2luZCgpIHt9IH1cbiAgICByZXR1cm4ge1xuICAgICAgZW50ZXI6IGtpbmRWaXNpdG9yLFxuICAgICAgbGVhdmU6IHVuZGVmaW5lZCxcbiAgICB9O1xuICB9IC8vIHsgZW50ZXIoKSB7fSwgbGVhdmUoKSB7fSB9XG5cbiAgcmV0dXJuIHtcbiAgICBlbnRlcjogdmlzaXRvci5lbnRlcixcbiAgICBsZWF2ZTogdmlzaXRvci5sZWF2ZSxcbiAgfTtcbn1cbi8qKlxuICogR2l2ZW4gYSB2aXNpdG9yIGluc3RhbmNlLCBpZiBpdCBpcyBsZWF2aW5nIG9yIG5vdCwgYW5kIGEgbm9kZSBraW5kLCByZXR1cm5cbiAqIHRoZSBmdW5jdGlvbiB0aGUgdmlzaXRvciBydW50aW1lIHNob3VsZCBjYWxsLlxuICpcbiAqIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgYGdldEVudGVyTGVhdmVGb3JLaW5kYCBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gdjE3XG4gKi9cblxuLyogYzggaWdub3JlIG5leHQgOCAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmlzaXRGbih2aXNpdG9yLCBraW5kLCBpc0xlYXZpbmcpIHtcbiAgY29uc3QgeyBlbnRlciwgbGVhdmUgfSA9IGdldEVudGVyTGVhdmVGb3JLaW5kKHZpc2l0b3IsIGtpbmQpO1xuICByZXR1cm4gaXNMZWF2aW5nID8gbGVhdmUgOiBlbnRlcjtcbn1cbiIsCiAgICAiaW1wb3J0IHsgcHJpbnRCbG9ja1N0cmluZyB9IGZyb20gJy4vYmxvY2tTdHJpbmcubWpzJztcbmltcG9ydCB7IHByaW50U3RyaW5nIH0gZnJvbSAnLi9wcmludFN0cmluZy5tanMnO1xuaW1wb3J0IHsgdmlzaXQgfSBmcm9tICcuL3Zpc2l0b3IubWpzJztcbi8qKlxuICogQ29udmVydHMgYW4gQVNUIGludG8gYSBzdHJpbmcsIHVzaW5nIG9uZSBzZXQgb2YgcmVhc29uYWJsZVxuICogZm9ybWF0dGluZyBydWxlcy5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnQoYXN0KSB7XG4gIHJldHVybiB2aXNpdChhc3QsIHByaW50RG9jQVNUUmVkdWNlcik7XG59XG5jb25zdCBNQVhfTElORV9MRU5HVEggPSA4MDtcbmNvbnN0IHByaW50RG9jQVNUUmVkdWNlciA9IHtcbiAgTmFtZToge1xuICAgIGxlYXZlOiAobm9kZSkgPT4gbm9kZS52YWx1ZSxcbiAgfSxcbiAgVmFyaWFibGU6IHtcbiAgICBsZWF2ZTogKG5vZGUpID0+ICckJyArIG5vZGUubmFtZSxcbiAgfSxcbiAgLy8gRG9jdW1lbnRcbiAgRG9jdW1lbnQ6IHtcbiAgICBsZWF2ZTogKG5vZGUpID0+IGpvaW4obm9kZS5kZWZpbml0aW9ucywgJ1xcblxcbicpLFxuICB9LFxuICBPcGVyYXRpb25EZWZpbml0aW9uOiB7XG4gICAgbGVhdmUobm9kZSkge1xuICAgICAgY29uc3QgdmFyRGVmcyA9IHdyYXAoJygnLCBqb2luKG5vZGUudmFyaWFibGVEZWZpbml0aW9ucywgJywgJyksICcpJyk7XG4gICAgICBjb25zdCBwcmVmaXggPSBqb2luKFxuICAgICAgICBbXG4gICAgICAgICAgbm9kZS5vcGVyYXRpb24sXG4gICAgICAgICAgam9pbihbbm9kZS5uYW1lLCB2YXJEZWZzXSksXG4gICAgICAgICAgam9pbihub2RlLmRpcmVjdGl2ZXMsICcgJyksXG4gICAgICAgIF0sXG4gICAgICAgICcgJyxcbiAgICAgICk7IC8vIEFub255bW91cyBxdWVyaWVzIHdpdGggbm8gZGlyZWN0aXZlcyBvciB2YXJpYWJsZSBkZWZpbml0aW9ucyBjYW4gdXNlXG4gICAgICAvLyB0aGUgcXVlcnkgc2hvcnQgZm9ybS5cblxuICAgICAgcmV0dXJuIChwcmVmaXggPT09ICdxdWVyeScgPyAnJyA6IHByZWZpeCArICcgJykgKyBub2RlLnNlbGVjdGlvblNldDtcbiAgICB9LFxuICB9LFxuICBWYXJpYWJsZURlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKHsgdmFyaWFibGUsIHR5cGUsIGRlZmF1bHRWYWx1ZSwgZGlyZWN0aXZlcyB9KSA9PlxuICAgICAgdmFyaWFibGUgK1xuICAgICAgJzogJyArXG4gICAgICB0eXBlICtcbiAgICAgIHdyYXAoJyA9ICcsIGRlZmF1bHRWYWx1ZSkgK1xuICAgICAgd3JhcCgnICcsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSksXG4gIH0sXG4gIFNlbGVjdGlvblNldDoge1xuICAgIGxlYXZlOiAoeyBzZWxlY3Rpb25zIH0pID0+IGJsb2NrKHNlbGVjdGlvbnMpLFxuICB9LFxuICBGaWVsZDoge1xuICAgIGxlYXZlKHsgYWxpYXMsIG5hbWUsIGFyZ3VtZW50czogYXJncywgZGlyZWN0aXZlcywgc2VsZWN0aW9uU2V0IH0pIHtcbiAgICAgIGNvbnN0IHByZWZpeCA9IHdyYXAoJycsIGFsaWFzLCAnOiAnKSArIG5hbWU7XG4gICAgICBsZXQgYXJnc0xpbmUgPSBwcmVmaXggKyB3cmFwKCcoJywgam9pbihhcmdzLCAnLCAnKSwgJyknKTtcblxuICAgICAgaWYgKGFyZ3NMaW5lLmxlbmd0aCA+IE1BWF9MSU5FX0xFTkdUSCkge1xuICAgICAgICBhcmdzTGluZSA9IHByZWZpeCArIHdyYXAoJyhcXG4nLCBpbmRlbnQoam9pbihhcmdzLCAnXFxuJykpLCAnXFxuKScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gam9pbihbYXJnc0xpbmUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgc2VsZWN0aW9uU2V0XSwgJyAnKTtcbiAgICB9LFxuICB9LFxuICBBcmd1bWVudDoge1xuICAgIGxlYXZlOiAoeyBuYW1lLCB2YWx1ZSB9KSA9PiBuYW1lICsgJzogJyArIHZhbHVlLFxuICB9LFxuICAvLyBGcmFnbWVudHNcbiAgRnJhZ21lbnRTcHJlYWQ6IHtcbiAgICBsZWF2ZTogKHsgbmFtZSwgZGlyZWN0aXZlcyB9KSA9PlxuICAgICAgJy4uLicgKyBuYW1lICsgd3JhcCgnICcsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSksXG4gIH0sXG4gIElubGluZUZyYWdtZW50OiB7XG4gICAgbGVhdmU6ICh7IHR5cGVDb25kaXRpb24sIGRpcmVjdGl2ZXMsIHNlbGVjdGlvblNldCB9KSA9PlxuICAgICAgam9pbihcbiAgICAgICAgW1xuICAgICAgICAgICcuLi4nLFxuICAgICAgICAgIHdyYXAoJ29uICcsIHR5cGVDb25kaXRpb24pLFxuICAgICAgICAgIGpvaW4oZGlyZWN0aXZlcywgJyAnKSxcbiAgICAgICAgICBzZWxlY3Rpb25TZXQsXG4gICAgICAgIF0sXG4gICAgICAgICcgJyxcbiAgICAgICksXG4gIH0sXG4gIEZyYWdtZW50RGVmaW5pdGlvbjoge1xuICAgIGxlYXZlOiAoXG4gICAgICB7IG5hbWUsIHR5cGVDb25kaXRpb24sIHZhcmlhYmxlRGVmaW5pdGlvbnMsIGRpcmVjdGl2ZXMsIHNlbGVjdGlvblNldCB9LCAvLyBOb3RlOiBmcmFnbWVudCB2YXJpYWJsZSBkZWZpbml0aW9ucyBhcmUgZXhwZXJpbWVudGFsIGFuZCBtYXkgYmUgY2hhbmdlZFxuICAgICkgPT5cbiAgICAgIC8vIG9yIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS5cbiAgICAgIGBmcmFnbWVudCAke25hbWV9JHt3cmFwKCcoJywgam9pbih2YXJpYWJsZURlZmluaXRpb25zLCAnLCAnKSwgJyknKX0gYCArXG4gICAgICBgb24gJHt0eXBlQ29uZGl0aW9ufSAke3dyYXAoJycsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgJyAnKX1gICtcbiAgICAgIHNlbGVjdGlvblNldCxcbiAgfSxcbiAgLy8gVmFsdWVcbiAgSW50VmFsdWU6IHtcbiAgICBsZWF2ZTogKHsgdmFsdWUgfSkgPT4gdmFsdWUsXG4gIH0sXG4gIEZsb2F0VmFsdWU6IHtcbiAgICBsZWF2ZTogKHsgdmFsdWUgfSkgPT4gdmFsdWUsXG4gIH0sXG4gIFN0cmluZ1ZhbHVlOiB7XG4gICAgbGVhdmU6ICh7IHZhbHVlLCBibG9jazogaXNCbG9ja1N0cmluZyB9KSA9PlxuICAgICAgaXNCbG9ja1N0cmluZyA/IHByaW50QmxvY2tTdHJpbmcodmFsdWUpIDogcHJpbnRTdHJpbmcodmFsdWUpLFxuICB9LFxuICBCb29sZWFuVmFsdWU6IHtcbiAgICBsZWF2ZTogKHsgdmFsdWUgfSkgPT4gKHZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJyksXG4gIH0sXG4gIE51bGxWYWx1ZToge1xuICAgIGxlYXZlOiAoKSA9PiAnbnVsbCcsXG4gIH0sXG4gIEVudW1WYWx1ZToge1xuICAgIGxlYXZlOiAoeyB2YWx1ZSB9KSA9PiB2YWx1ZSxcbiAgfSxcbiAgTGlzdFZhbHVlOiB7XG4gICAgbGVhdmU6ICh7IHZhbHVlcyB9KSA9PiAnWycgKyBqb2luKHZhbHVlcywgJywgJykgKyAnXScsXG4gIH0sXG4gIE9iamVjdFZhbHVlOiB7XG4gICAgbGVhdmU6ICh7IGZpZWxkcyB9KSA9PiAneycgKyBqb2luKGZpZWxkcywgJywgJykgKyAnfScsXG4gIH0sXG4gIE9iamVjdEZpZWxkOiB7XG4gICAgbGVhdmU6ICh7IG5hbWUsIHZhbHVlIH0pID0+IG5hbWUgKyAnOiAnICsgdmFsdWUsXG4gIH0sXG4gIC8vIERpcmVjdGl2ZVxuICBEaXJlY3RpdmU6IHtcbiAgICBsZWF2ZTogKHsgbmFtZSwgYXJndW1lbnRzOiBhcmdzIH0pID0+XG4gICAgICAnQCcgKyBuYW1lICsgd3JhcCgnKCcsIGpvaW4oYXJncywgJywgJyksICcpJyksXG4gIH0sXG4gIC8vIFR5cGVcbiAgTmFtZWRUeXBlOiB7XG4gICAgbGVhdmU6ICh7IG5hbWUgfSkgPT4gbmFtZSxcbiAgfSxcbiAgTGlzdFR5cGU6IHtcbiAgICBsZWF2ZTogKHsgdHlwZSB9KSA9PiAnWycgKyB0eXBlICsgJ10nLFxuICB9LFxuICBOb25OdWxsVHlwZToge1xuICAgIGxlYXZlOiAoeyB0eXBlIH0pID0+IHR5cGUgKyAnIScsXG4gIH0sXG4gIC8vIFR5cGUgU3lzdGVtIERlZmluaXRpb25zXG4gIFNjaGVtYURlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKHsgZGVzY3JpcHRpb24sIGRpcmVjdGl2ZXMsIG9wZXJhdGlvblR5cGVzIH0pID0+XG4gICAgICB3cmFwKCcnLCBkZXNjcmlwdGlvbiwgJ1xcbicpICtcbiAgICAgIGpvaW4oWydzY2hlbWEnLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIGJsb2NrKG9wZXJhdGlvblR5cGVzKV0sICcgJyksXG4gIH0sXG4gIE9wZXJhdGlvblR5cGVEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IG9wZXJhdGlvbiwgdHlwZSB9KSA9PiBvcGVyYXRpb24gKyAnOiAnICsgdHlwZSxcbiAgfSxcbiAgU2NhbGFyVHlwZURlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKHsgZGVzY3JpcHRpb24sIG5hbWUsIGRpcmVjdGl2ZXMgfSkgPT5cbiAgICAgIHdyYXAoJycsIGRlc2NyaXB0aW9uLCAnXFxuJykgK1xuICAgICAgam9pbihbJ3NjYWxhcicsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKV0sICcgJyksXG4gIH0sXG4gIE9iamVjdFR5cGVEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IGRlc2NyaXB0aW9uLCBuYW1lLCBpbnRlcmZhY2VzLCBkaXJlY3RpdmVzLCBmaWVsZHMgfSkgPT5cbiAgICAgIHdyYXAoJycsIGRlc2NyaXB0aW9uLCAnXFxuJykgK1xuICAgICAgam9pbihcbiAgICAgICAgW1xuICAgICAgICAgICd0eXBlJyxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHdyYXAoJ2ltcGxlbWVudHMgJywgam9pbihpbnRlcmZhY2VzLCAnICYgJykpLFxuICAgICAgICAgIGpvaW4oZGlyZWN0aXZlcywgJyAnKSxcbiAgICAgICAgICBibG9jayhmaWVsZHMpLFxuICAgICAgICBdLFxuICAgICAgICAnICcsXG4gICAgICApLFxuICB9LFxuICBGaWVsZERlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKHsgZGVzY3JpcHRpb24sIG5hbWUsIGFyZ3VtZW50czogYXJncywgdHlwZSwgZGlyZWN0aXZlcyB9KSA9PlxuICAgICAgd3JhcCgnJywgZGVzY3JpcHRpb24sICdcXG4nKSArXG4gICAgICBuYW1lICtcbiAgICAgIChoYXNNdWx0aWxpbmVJdGVtcyhhcmdzKVxuICAgICAgICA/IHdyYXAoJyhcXG4nLCBpbmRlbnQoam9pbihhcmdzLCAnXFxuJykpLCAnXFxuKScpXG4gICAgICAgIDogd3JhcCgnKCcsIGpvaW4oYXJncywgJywgJyksICcpJykpICtcbiAgICAgICc6ICcgK1xuICAgICAgdHlwZSArXG4gICAgICB3cmFwKCcgJywgam9pbihkaXJlY3RpdmVzLCAnICcpKSxcbiAgfSxcbiAgSW5wdXRWYWx1ZURlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKHsgZGVzY3JpcHRpb24sIG5hbWUsIHR5cGUsIGRlZmF1bHRWYWx1ZSwgZGlyZWN0aXZlcyB9KSA9PlxuICAgICAgd3JhcCgnJywgZGVzY3JpcHRpb24sICdcXG4nKSArXG4gICAgICBqb2luKFxuICAgICAgICBbbmFtZSArICc6ICcgKyB0eXBlLCB3cmFwKCc9ICcsIGRlZmF1bHRWYWx1ZSksIGpvaW4oZGlyZWN0aXZlcywgJyAnKV0sXG4gICAgICAgICcgJyxcbiAgICAgICksXG4gIH0sXG4gIEludGVyZmFjZVR5cGVEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IGRlc2NyaXB0aW9uLCBuYW1lLCBpbnRlcmZhY2VzLCBkaXJlY3RpdmVzLCBmaWVsZHMgfSkgPT5cbiAgICAgIHdyYXAoJycsIGRlc2NyaXB0aW9uLCAnXFxuJykgK1xuICAgICAgam9pbihcbiAgICAgICAgW1xuICAgICAgICAgICdpbnRlcmZhY2UnLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgd3JhcCgnaW1wbGVtZW50cyAnLCBqb2luKGludGVyZmFjZXMsICcgJiAnKSksXG4gICAgICAgICAgam9pbihkaXJlY3RpdmVzLCAnICcpLFxuICAgICAgICAgIGJsb2NrKGZpZWxkcyksXG4gICAgICAgIF0sXG4gICAgICAgICcgJyxcbiAgICAgICksXG4gIH0sXG4gIFVuaW9uVHlwZURlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKHsgZGVzY3JpcHRpb24sIG5hbWUsIGRpcmVjdGl2ZXMsIHR5cGVzIH0pID0+XG4gICAgICB3cmFwKCcnLCBkZXNjcmlwdGlvbiwgJ1xcbicpICtcbiAgICAgIGpvaW4oXG4gICAgICAgIFsndW5pb24nLCBuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIHdyYXAoJz0gJywgam9pbih0eXBlcywgJyB8ICcpKV0sXG4gICAgICAgICcgJyxcbiAgICAgICksXG4gIH0sXG4gIEVudW1UeXBlRGVmaW5pdGlvbjoge1xuICAgIGxlYXZlOiAoeyBkZXNjcmlwdGlvbiwgbmFtZSwgZGlyZWN0aXZlcywgdmFsdWVzIH0pID0+XG4gICAgICB3cmFwKCcnLCBkZXNjcmlwdGlvbiwgJ1xcbicpICtcbiAgICAgIGpvaW4oWydlbnVtJywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayh2YWx1ZXMpXSwgJyAnKSxcbiAgfSxcbiAgRW51bVZhbHVlRGVmaW5pdGlvbjoge1xuICAgIGxlYXZlOiAoeyBkZXNjcmlwdGlvbiwgbmFtZSwgZGlyZWN0aXZlcyB9KSA9PlxuICAgICAgd3JhcCgnJywgZGVzY3JpcHRpb24sICdcXG4nKSArIGpvaW4oW25hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKV0sICcgJyksXG4gIH0sXG4gIElucHV0T2JqZWN0VHlwZURlZmluaXRpb246IHtcbiAgICBsZWF2ZTogKHsgZGVzY3JpcHRpb24sIG5hbWUsIGRpcmVjdGl2ZXMsIGZpZWxkcyB9KSA9PlxuICAgICAgd3JhcCgnJywgZGVzY3JpcHRpb24sICdcXG4nKSArXG4gICAgICBqb2luKFsnaW5wdXQnLCBuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIGJsb2NrKGZpZWxkcyldLCAnICcpLFxuICB9LFxuICBEaXJlY3RpdmVEZWZpbml0aW9uOiB7XG4gICAgbGVhdmU6ICh7IGRlc2NyaXB0aW9uLCBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIHJlcGVhdGFibGUsIGxvY2F0aW9ucyB9KSA9PlxuICAgICAgd3JhcCgnJywgZGVzY3JpcHRpb24sICdcXG4nKSArXG4gICAgICAnZGlyZWN0aXZlIEAnICtcbiAgICAgIG5hbWUgK1xuICAgICAgKGhhc011bHRpbGluZUl0ZW1zKGFyZ3MpXG4gICAgICAgID8gd3JhcCgnKFxcbicsIGluZGVudChqb2luKGFyZ3MsICdcXG4nKSksICdcXG4pJylcbiAgICAgICAgOiB3cmFwKCcoJywgam9pbihhcmdzLCAnLCAnKSwgJyknKSkgK1xuICAgICAgKHJlcGVhdGFibGUgPyAnIHJlcGVhdGFibGUnIDogJycpICtcbiAgICAgICcgb24gJyArXG4gICAgICBqb2luKGxvY2F0aW9ucywgJyB8ICcpLFxuICB9LFxuICBTY2hlbWFFeHRlbnNpb246IHtcbiAgICBsZWF2ZTogKHsgZGlyZWN0aXZlcywgb3BlcmF0aW9uVHlwZXMgfSkgPT5cbiAgICAgIGpvaW4oXG4gICAgICAgIFsnZXh0ZW5kIHNjaGVtYScsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2sob3BlcmF0aW9uVHlwZXMpXSxcbiAgICAgICAgJyAnLFxuICAgICAgKSxcbiAgfSxcbiAgU2NhbGFyVHlwZUV4dGVuc2lvbjoge1xuICAgIGxlYXZlOiAoeyBuYW1lLCBkaXJlY3RpdmVzIH0pID0+XG4gICAgICBqb2luKFsnZXh0ZW5kIHNjYWxhcicsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKV0sICcgJyksXG4gIH0sXG4gIE9iamVjdFR5cGVFeHRlbnNpb246IHtcbiAgICBsZWF2ZTogKHsgbmFtZSwgaW50ZXJmYWNlcywgZGlyZWN0aXZlcywgZmllbGRzIH0pID0+XG4gICAgICBqb2luKFxuICAgICAgICBbXG4gICAgICAgICAgJ2V4dGVuZCB0eXBlJyxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHdyYXAoJ2ltcGxlbWVudHMgJywgam9pbihpbnRlcmZhY2VzLCAnICYgJykpLFxuICAgICAgICAgIGpvaW4oZGlyZWN0aXZlcywgJyAnKSxcbiAgICAgICAgICBibG9jayhmaWVsZHMpLFxuICAgICAgICBdLFxuICAgICAgICAnICcsXG4gICAgICApLFxuICB9LFxuICBJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uOiB7XG4gICAgbGVhdmU6ICh7IG5hbWUsIGludGVyZmFjZXMsIGRpcmVjdGl2ZXMsIGZpZWxkcyB9KSA9PlxuICAgICAgam9pbihcbiAgICAgICAgW1xuICAgICAgICAgICdleHRlbmQgaW50ZXJmYWNlJyxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHdyYXAoJ2ltcGxlbWVudHMgJywgam9pbihpbnRlcmZhY2VzLCAnICYgJykpLFxuICAgICAgICAgIGpvaW4oZGlyZWN0aXZlcywgJyAnKSxcbiAgICAgICAgICBibG9jayhmaWVsZHMpLFxuICAgICAgICBdLFxuICAgICAgICAnICcsXG4gICAgICApLFxuICB9LFxuICBVbmlvblR5cGVFeHRlbnNpb246IHtcbiAgICBsZWF2ZTogKHsgbmFtZSwgZGlyZWN0aXZlcywgdHlwZXMgfSkgPT5cbiAgICAgIGpvaW4oXG4gICAgICAgIFtcbiAgICAgICAgICAnZXh0ZW5kIHVuaW9uJyxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGpvaW4oZGlyZWN0aXZlcywgJyAnKSxcbiAgICAgICAgICB3cmFwKCc9ICcsIGpvaW4odHlwZXMsICcgfCAnKSksXG4gICAgICAgIF0sXG4gICAgICAgICcgJyxcbiAgICAgICksXG4gIH0sXG4gIEVudW1UeXBlRXh0ZW5zaW9uOiB7XG4gICAgbGVhdmU6ICh7IG5hbWUsIGRpcmVjdGl2ZXMsIHZhbHVlcyB9KSA9PlxuICAgICAgam9pbihbJ2V4dGVuZCBlbnVtJywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayh2YWx1ZXMpXSwgJyAnKSxcbiAgfSxcbiAgSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOiB7XG4gICAgbGVhdmU6ICh7IG5hbWUsIGRpcmVjdGl2ZXMsIGZpZWxkcyB9KSA9PlxuICAgICAgam9pbihbJ2V4dGVuZCBpbnB1dCcsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2soZmllbGRzKV0sICcgJyksXG4gIH0sXG59O1xuLyoqXG4gKiBHaXZlbiBtYXliZUFycmF5LCBwcmludCBhbiBlbXB0eSBzdHJpbmcgaWYgaXQgaXMgbnVsbCBvciBlbXB0eSwgb3RoZXJ3aXNlXG4gKiBwcmludCBhbGwgaXRlbXMgdG9nZXRoZXIgc2VwYXJhdGVkIGJ5IHNlcGFyYXRvciBpZiBwcm92aWRlZFxuICovXG5cbmZ1bmN0aW9uIGpvaW4obWF5YmVBcnJheSwgc2VwYXJhdG9yID0gJycpIHtcbiAgdmFyIF9tYXliZUFycmF5JGZpbHRlciRqbztcblxuICByZXR1cm4gKF9tYXliZUFycmF5JGZpbHRlciRqbyA9XG4gICAgbWF5YmVBcnJheSA9PT0gbnVsbCB8fCBtYXliZUFycmF5ID09PSB2b2lkIDBcbiAgICAgID8gdm9pZCAwXG4gICAgICA6IG1heWJlQXJyYXkuZmlsdGVyKCh4KSA9PiB4KS5qb2luKHNlcGFyYXRvcikpICE9PSBudWxsICYmXG4gICAgX21heWJlQXJyYXkkZmlsdGVyJGpvICE9PSB2b2lkIDBcbiAgICA/IF9tYXliZUFycmF5JGZpbHRlciRqb1xuICAgIDogJyc7XG59XG4vKipcbiAqIEdpdmVuIGFycmF5LCBwcmludCBlYWNoIGl0ZW0gb24gaXRzIG93biBsaW5lLCB3cmFwcGVkIGluIGFuIGluZGVudGVkIGB7IH1gIGJsb2NrLlxuICovXG5cbmZ1bmN0aW9uIGJsb2NrKGFycmF5KSB7XG4gIHJldHVybiB3cmFwKCd7XFxuJywgaW5kZW50KGpvaW4oYXJyYXksICdcXG4nKSksICdcXG59Jyk7XG59XG4vKipcbiAqIElmIG1heWJlU3RyaW5nIGlzIG5vdCBudWxsIG9yIGVtcHR5LCB0aGVuIHdyYXAgd2l0aCBzdGFydCBhbmQgZW5kLCBvdGhlcndpc2UgcHJpbnQgYW4gZW1wdHkgc3RyaW5nLlxuICovXG5cbmZ1bmN0aW9uIHdyYXAoc3RhcnQsIG1heWJlU3RyaW5nLCBlbmQgPSAnJykge1xuICByZXR1cm4gbWF5YmVTdHJpbmcgIT0gbnVsbCAmJiBtYXliZVN0cmluZyAhPT0gJydcbiAgICA/IHN0YXJ0ICsgbWF5YmVTdHJpbmcgKyBlbmRcbiAgICA6ICcnO1xufVxuXG5mdW5jdGlvbiBpbmRlbnQoc3RyKSB7XG4gIHJldHVybiB3cmFwKCcgICcsIHN0ci5yZXBsYWNlKC9cXG4vZywgJ1xcbiAgJykpO1xufVxuXG5mdW5jdGlvbiBoYXNNdWx0aWxpbmVJdGVtcyhtYXliZUFycmF5KSB7XG4gIHZhciBfbWF5YmVBcnJheSRzb21lO1xuXG4gIC8vIEZJWE1FOiBodHRwczovL2dpdGh1Yi5jb20vZ3JhcGhxbC9ncmFwaHFsLWpzL2lzc3Vlcy8yMjAzXG5cbiAgLyogYzggaWdub3JlIG5leHQgKi9cbiAgcmV0dXJuIChfbWF5YmVBcnJheSRzb21lID1cbiAgICBtYXliZUFycmF5ID09PSBudWxsIHx8IG1heWJlQXJyYXkgPT09IHZvaWQgMFxuICAgICAgPyB2b2lkIDBcbiAgICAgIDogbWF5YmVBcnJheS5zb21lKChzdHIpID0+IHN0ci5pbmNsdWRlcygnXFxuJykpKSAhPT0gbnVsbCAmJlxuICAgIF9tYXliZUFycmF5JHNvbWUgIT09IHZvaWQgMFxuICAgID8gX21heWJlQXJyYXkkc29tZVxuICAgIDogZmFsc2U7XG59XG4iLAogICAgIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cblxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XG4gIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XG4gIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59XG5cbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcbiAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcbiAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0O1xuICB9XG4gIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcbiAgdmFyIHQgPSB7fTtcbiAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICB0W3BdID0gc1twXTtcbiAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICB9XG4gIHJldHVybiB0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcbiAgZnVuY3Rpb24gYWNjZXB0KGYpIHsgaWYgKGYgIT09IHZvaWQgMCAmJiB0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24gZXhwZWN0ZWRcIik7IHJldHVybiBmOyB9XG4gIHZhciBraW5kID0gY29udGV4dEluLmtpbmQsIGtleSA9IGtpbmQgPT09IFwiZ2V0dGVyXCIgPyBcImdldFwiIDoga2luZCA9PT0gXCJzZXR0ZXJcIiA/IFwic2V0XCIgOiBcInZhbHVlXCI7XG4gIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xuICB2YXIgZGVzY3JpcHRvciA9IGRlc2NyaXB0b3JJbiB8fCAodGFyZ2V0ID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGNvbnRleHRJbi5uYW1lKSA6IHt9KTtcbiAgdmFyIF8sIGRvbmUgPSBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBjb250ZXh0ID0ge307XG4gICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbikgY29udGV4dFtwXSA9IHAgPT09IFwiYWNjZXNzXCIgPyB7fSA6IGNvbnRleHRJbltwXTtcbiAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xuICAgICAgY29udGV4dC5hZGRJbml0aWFsaXplciA9IGZ1bmN0aW9uIChmKSB7IGlmIChkb25lKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGFkZCBpbml0aWFsaXplcnMgYWZ0ZXIgZGVjb3JhdGlvbiBoYXMgY29tcGxldGVkXCIpOyBleHRyYUluaXRpYWxpemVycy5wdXNoKGFjY2VwdChmIHx8IG51bGwpKTsgfTtcbiAgICAgIHZhciByZXN1bHQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoa2luZCA9PT0gXCJhY2Nlc3NvclwiID8geyBnZXQ6IGRlc2NyaXB0b3IuZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0gOiBkZXNjcmlwdG9yW2tleV0sIGNvbnRleHQpO1xuICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgY29udGludWU7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xuICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XG4gICAgICAgICAgaWYgKF8gPSBhY2NlcHQocmVzdWx0LnNldCkpIGRlc2NyaXB0b3Iuc2V0ID0gXztcbiAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuaW5pdCkpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoXyA9IGFjY2VwdChyZXN1bHQpKSB7XG4gICAgICAgICAgaWYgKGtpbmQgPT09IFwiZmllbGRcIikgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XG4gICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xuICAgICAgfVxuICB9XG4gIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcbiAgZG9uZSA9IHRydWU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19ydW5Jbml0aWFsaXplcnModGhpc0FyZywgaW5pdGlhbGl6ZXJzLCB2YWx1ZSkge1xuICB2YXIgdXNlVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlID0gdXNlVmFsdWUgPyBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnLCB2YWx1ZSkgOiBpbml0aWFsaXplcnNbaV0uY2FsbCh0aGlzQXJnKTtcbiAgfVxuICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09IFwic3ltYm9sXCIgPyB4IDogXCJcIi5jb25jYXQoeCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19zZXRGdW5jdGlvbk5hbWUoZiwgbmFtZSwgcHJlZml4KSB7XG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikgbmFtZSA9IG5hbWUuZGVzY3JpcHRpb24gPyBcIltcIi5jb25jYXQobmFtZS5kZXNjcmlwdGlvbiwgXCJdXCIpIDogXCJcIjtcbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xuICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcbiAgcmV0dXJuIGcubmV4dCA9IHZlcmIoMCksIGdbXCJ0aHJvd1wiXSA9IHZlcmIoMSksIGdbXCJyZXR1cm5cIl0gPSB2ZXJiKDIpLCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gIH1cbn1cblxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIG9bazJdID0gbVtrXTtcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcbiAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xuICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xuICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xuICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xuICAgICAgfVxuICB9O1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xuICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XG4gIGlmICghbSkgcmV0dXJuIG87XG4gIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xuICB0cnkge1xuICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XG4gIGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcbiAgICAgIH1cbiAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxuICB9XG4gIHJldHVybiBhcjtcbn1cblxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XG4gIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxuICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xuICByZXR1cm4gYXI7XG59XG5cbi8qKiBAZGVwcmVjYXRlZCAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xuICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcbiAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXG4gICAgICAgICAgcltrXSA9IGFbal07XG4gIHJldHVybiByO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xuICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgfVxuICB9XG4gIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XG4gIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcbiAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcbiAgZnVuY3Rpb24gYXdhaXRSZXR1cm4oZikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGYsIHJlamVjdCk7IH07IH1cbiAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlmIChnW25dKSB7IGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IGlmIChmKSBpW25dID0gZihpW25dKTsgfSB9XG4gIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cbiAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XG4gIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cbiAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxuICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcbiAgdmFyIGksIHA7XG4gIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XG4gIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IGZhbHNlIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcbiAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcbiAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xuICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XG4gIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XG4gIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XG4gIHJldHVybiBjb29rZWQ7XG59O1xuXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59O1xuXG52YXIgb3duS2V5cyA9IGZ1bmN0aW9uKG8pIHtcbiAgb3duS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIChvKSB7XG4gICAgdmFyIGFyID0gW107XG4gICAgZm9yICh2YXIgayBpbiBvKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSBhclthci5sZW5ndGhdID0gaztcbiAgICByZXR1cm4gYXI7XG4gIH07XG4gIHJldHVybiBvd25LZXlzKG8pO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcbiAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgPSBvd25LZXlzKG1vZCksIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykgaWYgKGtbaV0gIT09IFwiZGVmYXVsdFwiKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGtbaV0pO1xuICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xuICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xuICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XG4gIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XG4gIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xuICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcbiAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkLlwiKTtcbiAgICB2YXIgZGlzcG9zZSwgaW5uZXI7XG4gICAgaWYgKGFzeW5jKSB7XG4gICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcbiAgICB9XG4gICAgaWYgKGRpc3Bvc2UgPT09IHZvaWQgMCkge1xuICAgICAgaWYgKCFTeW1ib2wuZGlzcG9zZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5kaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcbiAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XG4gICAgICBpZiAoYXN5bmMpIGlubmVyID0gZGlzcG9zZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkaXNwb3NlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qgbm90IGRpc3Bvc2FibGUuXCIpO1xuICAgIGlmIChpbm5lcikgZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0cnkgeyBpbm5lci5jYWxsKHRoaXMpOyB9IGNhdGNoIChlKSB7IHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgfSB9O1xuICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XG4gIH1cbiAgZWxzZSBpZiAoYXN5bmMpIHtcbiAgICBlbnYuc3RhY2sucHVzaCh7IGFzeW5jOiB0cnVlIH0pO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxudmFyIF9TdXBwcmVzc2VkRXJyb3IgPSB0eXBlb2YgU3VwcHJlc3NlZEVycm9yID09PSBcImZ1bmN0aW9uXCIgPyBTdXBwcmVzc2VkRXJyb3IgOiBmdW5jdGlvbiAoZXJyb3IsIHN1cHByZXNzZWQsIG1lc3NhZ2UpIHtcbiAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xuICBmdW5jdGlvbiBmYWlsKGUpIHtcbiAgICBlbnYuZXJyb3IgPSBlbnYuaGFzRXJyb3IgPyBuZXcgX1N1cHByZXNzZWRFcnJvcihlLCBlbnYuZXJyb3IsIFwiQW4gZXJyb3Igd2FzIHN1cHByZXNzZWQgZHVyaW5nIGRpc3Bvc2FsLlwiKSA6IGU7XG4gICAgZW52Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgfVxuICB2YXIgciwgcyA9IDA7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgd2hpbGUgKHIgPSBlbnYuc3RhY2sucG9wKCkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghci5hc3luYyAmJiBzID09PSAxKSByZXR1cm4gcyA9IDAsIGVudi5zdGFjay5wdXNoKHIpLCBQcm9taXNlLnJlc29sdmUoKS50aGVuKG5leHQpO1xuICAgICAgICBpZiAoci5kaXNwb3NlKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHIuZGlzcG9zZS5jYWxsKHIudmFsdWUpO1xuICAgICAgICAgIGlmIChyLmFzeW5jKSByZXR1cm4gcyB8PSAyLCBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKG5leHQsIGZ1bmN0aW9uKGUpIHsgZmFpbChlKTsgcmV0dXJuIG5leHQoKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBzIHw9IDE7XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBmYWlsKGUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocyA9PT0gMSkgcmV0dXJuIGVudi5oYXNFcnJvciA/IFByb21pc2UucmVqZWN0KGVudi5lcnJvcikgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBpZiAoZW52Lmhhc0Vycm9yKSB0aHJvdyBlbnYuZXJyb3I7XG4gIH1cbiAgcmV0dXJuIG5leHQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uKHBhdGgsIHByZXNlcnZlSnN4KSB7XG4gIGlmICh0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIiAmJiAvXlxcLlxcLj9cXC8vLnRlc3QocGF0aCkpIHtcbiAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLih0c3gpJHwoKD86XFwuZCk/KSgoPzpcXC5bXi4vXSs/KT8pXFwuKFtjbV0/KXRzJC9pLCBmdW5jdGlvbiAobSwgdHN4LCBkLCBleHQsIGNtKSB7XG4gICAgICAgICAgcmV0dXJuIHRzeCA/IHByZXNlcnZlSnN4ID8gXCIuanN4XCIgOiBcIi5qc1wiIDogZCAmJiAoIWV4dCB8fCAhY20pID8gbSA6IChkICsgZXh0ICsgXCIuXCIgKyBjbS50b0xvd2VyQ2FzZSgpICsgXCJqc1wiKTtcbiAgICAgIH0pO1xuICB9XG4gIHJldHVybiBwYXRoO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIF9fZXh0ZW5kcyxcbiAgX19hc3NpZ24sXG4gIF9fcmVzdCxcbiAgX19kZWNvcmF0ZSxcbiAgX19wYXJhbSxcbiAgX19lc0RlY29yYXRlLFxuICBfX3J1bkluaXRpYWxpemVycyxcbiAgX19wcm9wS2V5LFxuICBfX3NldEZ1bmN0aW9uTmFtZSxcbiAgX19tZXRhZGF0YSxcbiAgX19hd2FpdGVyLFxuICBfX2dlbmVyYXRvcixcbiAgX19jcmVhdGVCaW5kaW5nLFxuICBfX2V4cG9ydFN0YXIsXG4gIF9fdmFsdWVzLFxuICBfX3JlYWQsXG4gIF9fc3ByZWFkLFxuICBfX3NwcmVhZEFycmF5cyxcbiAgX19zcHJlYWRBcnJheSxcbiAgX19hd2FpdCxcbiAgX19hc3luY0dlbmVyYXRvcixcbiAgX19hc3luY0RlbGVnYXRvcixcbiAgX19hc3luY1ZhbHVlcyxcbiAgX19tYWtlVGVtcGxhdGVPYmplY3QsXG4gIF9faW1wb3J0U3RhcixcbiAgX19pbXBvcnREZWZhdWx0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxuICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXG4gIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlLFxuICBfX2Rpc3Bvc2VSZXNvdXJjZXMsXG4gIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uLFxufTtcbiIsCiAgICAiZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNGdW5jdGlvbi5qcy5tYXAiLAogICAgImV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFcnJvckNsYXNzKGNyZWF0ZUltcGwpIHtcbiAgICB2YXIgX3N1cGVyID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgIEVycm9yLmNhbGwoaW5zdGFuY2UpO1xuICAgICAgICBpbnN0YW5jZS5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICAgIH07XG4gICAgdmFyIGN0b3JGdW5jID0gY3JlYXRlSW1wbChfc3VwZXIpO1xuICAgIGN0b3JGdW5jLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgICBjdG9yRnVuYy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yRnVuYztcbiAgICByZXR1cm4gY3RvckZ1bmM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVFcnJvckNsYXNzLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgY3JlYXRlRXJyb3JDbGFzcyB9IGZyb20gJy4vY3JlYXRlRXJyb3JDbGFzcyc7XG5leHBvcnQgdmFyIFVuc3Vic2NyaXB0aW9uRXJyb3IgPSBjcmVhdGVFcnJvckNsYXNzKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gVW5zdWJzY3JpcHRpb25FcnJvckltcGwoZXJyb3JzKSB7XG4gICAgICAgIF9zdXBlcih0aGlzKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3JzXG4gICAgICAgICAgICA/IGVycm9ycy5sZW5ndGggKyBcIiBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxcblwiICsgZXJyb3JzLm1hcChmdW5jdGlvbiAoZXJyLCBpKSB7IHJldHVybiBpICsgMSArIFwiKSBcIiArIGVyci50b1N0cmluZygpOyB9KS5qb2luKCdcXG4gICcpXG4gICAgICAgICAgICA6ICcnO1xuICAgICAgICB0aGlzLm5hbWUgPSAnVW5zdWJzY3JpcHRpb25FcnJvcic7XG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICAgIH07XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuc3Vic2NyaXB0aW9uRXJyb3IuanMubWFwIiwKICAgICJleHBvcnQgZnVuY3Rpb24gYXJyUmVtb3ZlKGFyciwgaXRlbSkge1xuICAgIGlmIChhcnIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG4gICAgICAgIDAgPD0gaW5kZXggJiYgYXJyLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyUmVtb3ZlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19yZWFkLCBfX3NwcmVhZEFycmF5LCBfX3ZhbHVlcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IFVuc3Vic2NyaXB0aW9uRXJyb3IgfSBmcm9tICcuL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvcic7XG5pbXBvcnQgeyBhcnJSZW1vdmUgfSBmcm9tICcuL3V0aWwvYXJyUmVtb3ZlJztcbnZhciBTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbihpbml0aWFsVGVhcmRvd24pIHtcbiAgICAgICAgdGhpcy5pbml0aWFsVGVhcmRvd24gPSBpbml0aWFsVGVhcmRvd247XG4gICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BhcmVudGFnZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2ZpbmFsaXplcnMgPSBudWxsO1xuICAgIH1cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjtcbiAgICAgICAgdmFyIGVycm9ycztcbiAgICAgICAgaWYgKCF0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRhZ2UgPSB0aGlzLl9wYXJlbnRhZ2U7XG4gICAgICAgICAgICBpZiAoX3BhcmVudGFnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudGFnZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoX3BhcmVudGFnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9wYXJlbnRhZ2VfMSA9IF9fdmFsdWVzKF9wYXJlbnRhZ2UpLCBfcGFyZW50YWdlXzFfMSA9IF9wYXJlbnRhZ2VfMS5uZXh0KCk7ICFfcGFyZW50YWdlXzFfMS5kb25lOyBfcGFyZW50YWdlXzFfMSA9IF9wYXJlbnRhZ2VfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBfcGFyZW50YWdlXzFfMS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRfMS5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfcGFyZW50YWdlXzFfMSAmJiAhX3BhcmVudGFnZV8xXzEuZG9uZSAmJiAoX2EgPSBfcGFyZW50YWdlXzEucmV0dXJuKSkgX2EuY2FsbChfcGFyZW50YWdlXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfcGFyZW50YWdlLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW5pdGlhbEZpbmFsaXplciA9IHRoaXMuaW5pdGlhbFRlYXJkb3duO1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaW5pdGlhbEZpbmFsaXplcikpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpbml0aWFsRmluYWxpemVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yID8gZS5lcnJvcnMgOiBbZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIF9maW5hbGl6ZXJzID0gdGhpcy5fZmluYWxpemVycztcbiAgICAgICAgICAgIGlmIChfZmluYWxpemVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbmFsaXplcnMgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9maW5hbGl6ZXJzXzEgPSBfX3ZhbHVlcyhfZmluYWxpemVycyksIF9maW5hbGl6ZXJzXzFfMSA9IF9maW5hbGl6ZXJzXzEubmV4dCgpOyAhX2ZpbmFsaXplcnNfMV8xLmRvbmU7IF9maW5hbGl6ZXJzXzFfMSA9IF9maW5hbGl6ZXJzXzEubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmluYWxpemVyID0gX2ZpbmFsaXplcnNfMV8xLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjRmluYWxpemVyKGZpbmFsaXplcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICE9PSBudWxsICYmIGVycm9ycyAhPT0gdm9pZCAwID8gZXJyb3JzIDogW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFtdLCBfX3JlYWQoZXJyb3JzKSksIF9fcmVhZChlcnIuZXJyb3JzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9maW5hbGl6ZXJzXzFfMSAmJiAhX2ZpbmFsaXplcnNfMV8xLmRvbmUgJiYgKF9iID0gX2ZpbmFsaXplcnNfMS5yZXR1cm4pKSBfYi5jYWxsKF9maW5hbGl6ZXJzXzEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vic2NyaXB0aW9uRXJyb3IoZXJyb3JzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVhcmRvd24pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGVhcmRvd24gJiYgdGVhcmRvd24gIT09IHRoaXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIGV4ZWNGaW5hbGl6ZXIodGVhcmRvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRlYXJkb3duIGluc3RhbmNlb2YgU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZWFyZG93bi5jbG9zZWQgfHwgdGVhcmRvd24uX2hhc1BhcmVudCh0aGlzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRlYXJkb3duLl9hZGRQYXJlbnQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICh0aGlzLl9maW5hbGl6ZXJzID0gKF9hID0gdGhpcy5fZmluYWxpemVycykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW10pLnB1c2godGVhcmRvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9oYXNQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHZhciBfcGFyZW50YWdlID0gdGhpcy5fcGFyZW50YWdlO1xuICAgICAgICByZXR1cm4gX3BhcmVudGFnZSA9PT0gcGFyZW50IHx8IChBcnJheS5pc0FycmF5KF9wYXJlbnRhZ2UpICYmIF9wYXJlbnRhZ2UuaW5jbHVkZXMocGFyZW50KSk7XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9hZGRQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHZhciBfcGFyZW50YWdlID0gdGhpcy5fcGFyZW50YWdlO1xuICAgICAgICB0aGlzLl9wYXJlbnRhZ2UgPSBBcnJheS5pc0FycmF5KF9wYXJlbnRhZ2UpID8gKF9wYXJlbnRhZ2UucHVzaChwYXJlbnQpLCBfcGFyZW50YWdlKSA6IF9wYXJlbnRhZ2UgPyBbX3BhcmVudGFnZSwgcGFyZW50XSA6IHBhcmVudDtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3JlbW92ZVBhcmVudCA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgdmFyIF9wYXJlbnRhZ2UgPSB0aGlzLl9wYXJlbnRhZ2U7XG4gICAgICAgIGlmIChfcGFyZW50YWdlID09PSBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudGFnZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShfcGFyZW50YWdlKSkge1xuICAgICAgICAgICAgYXJyUmVtb3ZlKF9wYXJlbnRhZ2UsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHRlYXJkb3duKSB7XG4gICAgICAgIHZhciBfZmluYWxpemVycyA9IHRoaXMuX2ZpbmFsaXplcnM7XG4gICAgICAgIF9maW5hbGl6ZXJzICYmIGFyclJlbW92ZShfZmluYWxpemVycywgdGVhcmRvd24pO1xuICAgICAgICBpZiAodGVhcmRvd24gaW5zdGFuY2VvZiBTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRlYXJkb3duLl9yZW1vdmVQYXJlbnQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5FTVBUWSA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbXB0eSA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgZW1wdHkuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgIH0pKCk7XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBTdWJzY3JpcHRpb24gfTtcbmV4cG9ydCB2YXIgRU1QVFlfU1VCU0NSSVBUSU9OID0gU3Vic2NyaXB0aW9uLkVNUFRZO1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3Vic2NyaXB0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSBpbnN0YW5jZW9mIFN1YnNjcmlwdGlvbiB8fFxuICAgICAgICAodmFsdWUgJiYgJ2Nsb3NlZCcgaW4gdmFsdWUgJiYgaXNGdW5jdGlvbih2YWx1ZS5yZW1vdmUpICYmIGlzRnVuY3Rpb24odmFsdWUuYWRkKSAmJiBpc0Z1bmN0aW9uKHZhbHVlLnVuc3Vic2NyaWJlKSkpO1xufVxuZnVuY3Rpb24gZXhlY0ZpbmFsaXplcihmaW5hbGl6ZXIpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihmaW5hbGl6ZXIpKSB7XG4gICAgICAgIGZpbmFsaXplcigpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZmluYWxpemVyLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaXB0aW9uLmpzLm1hcCIsCiAgICAiZXhwb3J0IHZhciBjb25maWcgPSB7XG4gICAgb25VbmhhbmRsZWRFcnJvcjogbnVsbCxcbiAgICBvblN0b3BwZWROb3RpZmljYXRpb246IG51bGwsXG4gICAgUHJvbWlzZTogdW5kZWZpbmVkLFxuICAgIHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmc6IGZhbHNlLFxuICAgIHVzZURlcHJlY2F0ZWROZXh0Q29udGV4dDogZmFsc2UsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlnLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19yZWFkLCBfX3NwcmVhZEFycmF5IH0gZnJvbSBcInRzbGliXCI7XG5leHBvcnQgdmFyIHRpbWVvdXRQcm92aWRlciA9IHtcbiAgICBzZXRUaW1lb3V0OiBmdW5jdGlvbiAoaGFuZGxlciwgdGltZW91dCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsZWdhdGUgPSB0aW1lb3V0UHJvdmlkZXIuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSA9PT0gbnVsbCB8fCBkZWxlZ2F0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVsZWdhdGUuc2V0VGltZW91dCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlLnNldFRpbWVvdXQuYXBwbHkoZGVsZWdhdGUsIF9fc3ByZWFkQXJyYXkoW2hhbmRsZXIsIHRpbWVvdXRdLCBfX3JlYWQoYXJncykpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2V0VGltZW91dC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW2hhbmRsZXIsIHRpbWVvdXRdLCBfX3JlYWQoYXJncykpKTtcbiAgICB9LFxuICAgIGNsZWFyVGltZW91dDogZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSB0aW1lb3V0UHJvdmlkZXIuZGVsZWdhdGU7XG4gICAgICAgIHJldHVybiAoKGRlbGVnYXRlID09PSBudWxsIHx8IGRlbGVnYXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWxlZ2F0ZS5jbGVhclRpbWVvdXQpIHx8IGNsZWFyVGltZW91dCkoaGFuZGxlKTtcbiAgICB9LFxuICAgIGRlbGVnYXRlOiB1bmRlZmluZWQsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZW91dFByb3ZpZGVyLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IHRpbWVvdXRQcm92aWRlciB9IGZyb20gJy4uL3NjaGVkdWxlci90aW1lb3V0UHJvdmlkZXInO1xuZXhwb3J0IGZ1bmN0aW9uIHJlcG9ydFVuaGFuZGxlZEVycm9yKGVycikge1xuICAgIHRpbWVvdXRQcm92aWRlci5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9uVW5oYW5kbGVkRXJyb3IgPSBjb25maWcub25VbmhhbmRsZWRFcnJvcjtcbiAgICAgICAgaWYgKG9uVW5oYW5kbGVkRXJyb3IpIHtcbiAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwb3J0VW5oYW5kbGVkRXJyb3IuanMubWFwIiwKICAgICJleHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgfVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9vcC5qcy5tYXAiLAogICAgImV4cG9ydCB2YXIgQ09NUExFVEVfTk9USUZJQ0FUSU9OID0gKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZU5vdGlmaWNhdGlvbignQycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsgfSkoKTtcbmV4cG9ydCBmdW5jdGlvbiBlcnJvck5vdGlmaWNhdGlvbihlcnJvcikge1xuICAgIHJldHVybiBjcmVhdGVOb3RpZmljYXRpb24oJ0UnLCB1bmRlZmluZWQsIGVycm9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBuZXh0Tm90aWZpY2F0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGNyZWF0ZU5vdGlmaWNhdGlvbignTicsIHZhbHVlLCB1bmRlZmluZWQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5vdGlmaWNhdGlvbihraW5kLCB2YWx1ZSwgZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiBraW5kLFxuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGVycm9yOiBlcnJvcixcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm90aWZpY2F0aW9uRmFjdG9yaWVzLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi4vY29uZmlnJztcbnZhciBjb250ZXh0ID0gbnVsbDtcbmV4cG9ydCBmdW5jdGlvbiBlcnJvckNvbnRleHQoY2IpIHtcbiAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgdmFyIGlzUm9vdCA9ICFjb250ZXh0O1xuICAgICAgICBpZiAoaXNSb290KSB7XG4gICAgICAgICAgICBjb250ZXh0ID0geyBlcnJvclRocm93bjogZmFsc2UsIGVycm9yOiBudWxsIH07XG4gICAgICAgIH1cbiAgICAgICAgY2IoKTtcbiAgICAgICAgaWYgKGlzUm9vdCkge1xuICAgICAgICAgICAgdmFyIF9hID0gY29udGV4dCwgZXJyb3JUaHJvd24gPSBfYS5lcnJvclRocm93biwgZXJyb3IgPSBfYS5lcnJvcjtcbiAgICAgICAgICAgIGNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNiKCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNhcHR1cmVFcnJvcihlcnIpIHtcbiAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgJiYgY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LmVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgY29udGV4dC5lcnJvciA9IGVycjtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvckNvbnRleHQuanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBpc1N1YnNjcmlwdGlvbiwgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgcmVwb3J0VW5oYW5kbGVkRXJyb3IgfSBmcm9tICcuL3V0aWwvcmVwb3J0VW5oYW5kbGVkRXJyb3InO1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vdXRpbC9ub29wJztcbmltcG9ydCB7IG5leHROb3RpZmljYXRpb24sIGVycm9yTm90aWZpY2F0aW9uLCBDT01QTEVURV9OT1RJRklDQVRJT04gfSBmcm9tICcuL05vdGlmaWNhdGlvbkZhY3Rvcmllcyc7XG5pbXBvcnQgeyB0aW1lb3V0UHJvdmlkZXIgfSBmcm9tICcuL3NjaGVkdWxlci90aW1lb3V0UHJvdmlkZXInO1xuaW1wb3J0IHsgY2FwdHVyZUVycm9yIH0gZnJvbSAnLi91dGlsL2Vycm9yQ29udGV4dCc7XG52YXIgU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICAgICAgaWYgKGlzU3Vic2NyaXB0aW9uKGRlc3RpbmF0aW9uKSkge1xuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLmFkZChfdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IEVNUFRZX09CU0VSVkVSO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3Vic2NyaWJlci5jcmVhdGUgPSBmdW5jdGlvbiAobmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2FmZVN1YnNjcmliZXIobmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBoYW5kbGVTdG9wcGVkTm90aWZpY2F0aW9uKG5leHROb3RpZmljYXRpb24odmFsdWUpLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBoYW5kbGVTdG9wcGVkTm90aWZpY2F0aW9uKGVycm9yTm90aWZpY2F0aW9uKGVyciksIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgaGFuZGxlU3RvcHBlZE5vdGlmaWNhdGlvbihDT01QTEVURV9OT1RJRklDQVRJT04sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTdWJzY3JpYmVyO1xufShTdWJzY3JpcHRpb24pKTtcbmV4cG9ydCB7IFN1YnNjcmliZXIgfTtcbnZhciBfYmluZCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kO1xuZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBfYmluZC5jYWxsKGZuLCB0aGlzQXJnKTtcbn1cbnZhciBDb25zdW1lck9ic2VydmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb25zdW1lck9ic2VydmVyKHBhcnRpYWxPYnNlcnZlcikge1xuICAgICAgICB0aGlzLnBhcnRpYWxPYnNlcnZlciA9IHBhcnRpYWxPYnNlcnZlcjtcbiAgICB9XG4gICAgQ29uc3VtZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgcGFydGlhbE9ic2VydmVyID0gdGhpcy5wYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgICAgIGlmIChwYXJ0aWFsT2JzZXJ2ZXIubmV4dCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwYXJ0aWFsT2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVVbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbnN1bWVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgcGFydGlhbE9ic2VydmVyID0gdGhpcy5wYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgICAgIGlmIChwYXJ0aWFsT2JzZXJ2ZXIuZXJyb3IpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGFydGlhbE9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVVbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGVVbmhhbmRsZWRFcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb25zdW1lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhcnRpYWxPYnNlcnZlciA9IHRoaXMucGFydGlhbE9ic2VydmVyO1xuICAgICAgICBpZiAocGFydGlhbE9ic2VydmVyLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHBhcnRpYWxPYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlVW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQ29uc3VtZXJPYnNlcnZlcjtcbn0oKSk7XG52YXIgU2FmZVN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTYWZlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTYWZlU3Vic2NyaWJlcihvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBwYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9ic2VydmVyT3JOZXh0KSB8fCAhb2JzZXJ2ZXJPck5leHQpIHtcbiAgICAgICAgICAgIHBhcnRpYWxPYnNlcnZlciA9IHtcbiAgICAgICAgICAgICAgICBuZXh0OiAob2JzZXJ2ZXJPck5leHQgIT09IG51bGwgJiYgb2JzZXJ2ZXJPck5leHQgIT09IHZvaWQgMCA/IG9ic2VydmVyT3JOZXh0IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IgIT09IG51bGwgJiYgZXJyb3IgIT09IHZvaWQgMCA/IGVycm9yIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBjb21wbGV0ZSAhPT0gbnVsbCAmJiBjb21wbGV0ZSAhPT0gdm9pZCAwID8gY29tcGxldGUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGNvbnRleHRfMTtcbiAgICAgICAgICAgIGlmIChfdGhpcyAmJiBjb25maWcudXNlRGVwcmVjYXRlZE5leHRDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dF8xID0gT2JqZWN0LmNyZWF0ZShvYnNlcnZlck9yTmV4dCk7XG4gICAgICAgICAgICAgICAgY29udGV4dF8xLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMudW5zdWJzY3JpYmUoKTsgfTtcbiAgICAgICAgICAgICAgICBwYXJ0aWFsT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IG9ic2VydmVyT3JOZXh0Lm5leHQgJiYgYmluZChvYnNlcnZlck9yTmV4dC5uZXh0LCBjb250ZXh0XzEpLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogb2JzZXJ2ZXJPck5leHQuZXJyb3IgJiYgYmluZChvYnNlcnZlck9yTmV4dC5lcnJvciwgY29udGV4dF8xKSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IG9ic2VydmVyT3JOZXh0LmNvbXBsZXRlICYmIGJpbmQob2JzZXJ2ZXJPck5leHQuY29tcGxldGUsIGNvbnRleHRfMSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnRpYWxPYnNlcnZlciA9IG9ic2VydmVyT3JOZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gbmV3IENvbnN1bWVyT2JzZXJ2ZXIocGFydGlhbE9ic2VydmVyKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gU2FmZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IFNhZmVTdWJzY3JpYmVyIH07XG5mdW5jdGlvbiBoYW5kbGVVbmhhbmRsZWRFcnJvcihlcnJvcikge1xuICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICBjYXB0dXJlRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVwb3J0VW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRlZmF1bHRFcnJvckhhbmRsZXIoZXJyKSB7XG4gICAgdGhyb3cgZXJyO1xufVxuZnVuY3Rpb24gaGFuZGxlU3RvcHBlZE5vdGlmaWNhdGlvbihub3RpZmljYXRpb24sIHN1YnNjcmliZXIpIHtcbiAgICB2YXIgb25TdG9wcGVkTm90aWZpY2F0aW9uID0gY29uZmlnLm9uU3RvcHBlZE5vdGlmaWNhdGlvbjtcbiAgICBvblN0b3BwZWROb3RpZmljYXRpb24gJiYgdGltZW91dFByb3ZpZGVyLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gb25TdG9wcGVkTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbiwgc3Vic2NyaWJlcik7IH0pO1xufVxuZXhwb3J0IHZhciBFTVBUWV9PQlNFUlZFUiA9IHtcbiAgICBjbG9zZWQ6IHRydWUsXG4gICAgbmV4dDogbm9vcCxcbiAgICBlcnJvcjogZGVmYXVsdEVycm9ySGFuZGxlcixcbiAgICBjb21wbGV0ZTogbm9vcCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVyLmpzLm1hcCIsCiAgICAiZXhwb3J0IHZhciBvYnNlcnZhYmxlID0gKGZ1bmN0aW9uICgpIHsgcmV0dXJuICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5vYnNlcnZhYmxlKSB8fCAnQEBvYnNlcnZhYmxlJzsgfSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmFibGUuanMubWFwIiwKICAgICJleHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xuICAgIHJldHVybiB4O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aWRlbnRpdHkuanMubWFwIiwKICAgICJpbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4vaWRlbnRpdHknO1xuZXhwb3J0IGZ1bmN0aW9uIHBpcGUoKSB7XG4gICAgdmFyIGZucyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGZuc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gcGlwZUZyb21BcnJheShmbnMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBpcGVGcm9tQXJyYXkoZm5zKSB7XG4gICAgaWYgKGZucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGlkZW50aXR5O1xuICAgIH1cbiAgICBpZiAoZm5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZm5zWzBdO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gcGlwZWQoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGZucy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGZuKSB7IHJldHVybiBmbihwcmV2KTsgfSwgaW5wdXQpO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waXBlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgU2FmZVN1YnNjcmliZXIsIFN1YnNjcmliZXIgfSBmcm9tICcuL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgaXNTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi9zeW1ib2wvb2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBwaXBlRnJvbUFycmF5IH0gZnJvbSAnLi91dGlsL3BpcGUnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IGVycm9yQ29udGV4dCB9IGZyb20gJy4vdXRpbC9lcnJvckNvbnRleHQnO1xudmFyIE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgIGlmIChzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICBvYnNlcnZhYmxlLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBpc1N1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQpID8gb2JzZXJ2ZXJPck5leHQgOiBuZXcgU2FmZVN1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIGVycm9yQ29udGV4dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBfdGhpcywgb3BlcmF0b3IgPSBfYS5vcGVyYXRvciwgc291cmNlID0gX2Euc291cmNlO1xuICAgICAgICAgICAgc3Vic2NyaWJlci5hZGQob3BlcmF0b3JcbiAgICAgICAgICAgICAgICA/XG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yLmNhbGwoc3Vic2NyaWJlciwgc291cmNlKVxuICAgICAgICAgICAgICAgIDogc291cmNlXG4gICAgICAgICAgICAgICAgICAgID9cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9zdWJzY3JpYmUoc3Vic2NyaWJlcilcbiAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3RyeVN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc2luaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShzaW5rKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzaW5rLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAobmV4dCwgcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG4gICAgICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBuZXcgU2FmZVN1YnNjcmliZXIoe1xuICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiByZWplY3QsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IHJlc29sdmUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5zb3VyY2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZVtTeW1ib2xfb2JzZXJ2YWJsZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9wZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZUZyb21BcnJheShvcGVyYXRpb25zKSh0aGlzKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICh2YWx1ZSA9IHgpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiByZWplY3QoZXJyKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZSh2YWx1ZSk7IH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlKTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZhYmxlO1xufSgpKTtcbmV4cG9ydCB7IE9ic2VydmFibGUgfTtcbmZ1bmN0aW9uIGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSBwcm9taXNlQ3RvciAhPT0gbnVsbCAmJiBwcm9taXNlQ3RvciAhPT0gdm9pZCAwID8gcHJvbWlzZUN0b3IgOiBjb25maWcuUHJvbWlzZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogUHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGlzT2JzZXJ2ZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgaXNGdW5jdGlvbih2YWx1ZS5uZXh0KSAmJiBpc0Z1bmN0aW9uKHZhbHVlLmVycm9yKSAmJiBpc0Z1bmN0aW9uKHZhbHVlLmNvbXBsZXRlKTtcbn1cbmZ1bmN0aW9uIGlzU3Vic2NyaWJlcih2YWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUgJiYgdmFsdWUgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB8fCAoaXNPYnNlcnZlcih2YWx1ZSkgJiYgaXNTdWJzY3JpcHRpb24odmFsdWUpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwIiwKICAgICJpbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi9pc0Z1bmN0aW9uJztcbmV4cG9ydCBmdW5jdGlvbiBoYXNMaWZ0KHNvdXJjZSkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKHNvdXJjZSA9PT0gbnVsbCB8fCBzb3VyY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNvdXJjZS5saWZ0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBvcGVyYXRlKGluaXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBpZiAoaGFzTGlmdChzb3VyY2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlLmxpZnQoZnVuY3Rpb24gKGxpZnRlZFNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbml0KGxpZnRlZFNvdXJjZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBsaWZ0IHVua25vd24gT2JzZXJ2YWJsZSB0eXBlJyk7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpZnQuanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIoZGVzdGluYXRpb24sIG9uTmV4dCwgb25Db21wbGV0ZSwgb25FcnJvciwgb25GaW5hbGl6ZSkge1xuICAgIHJldHVybiBuZXcgT3BlcmF0b3JTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvbk5leHQsIG9uQ29tcGxldGUsIG9uRXJyb3IsIG9uRmluYWxpemUpO1xufVxudmFyIE9wZXJhdG9yU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9wZXJhdG9yU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPcGVyYXRvclN1YnNjcmliZXIoZGVzdGluYXRpb24sIG9uTmV4dCwgb25Db21wbGV0ZSwgb25FcnJvciwgb25GaW5hbGl6ZSwgc2hvdWxkVW5zdWJzY3JpYmUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9uRmluYWxpemUgPSBvbkZpbmFsaXplO1xuICAgICAgICBfdGhpcy5zaG91bGRVbnN1YnNjcmliZSA9IHNob3VsZFVuc3Vic2NyaWJlO1xuICAgICAgICBfdGhpcy5fbmV4dCA9IG9uTmV4dFxuICAgICAgICAgICAgPyBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvbk5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBfc3VwZXIucHJvdG90eXBlLl9uZXh0O1xuICAgICAgICBfdGhpcy5fZXJyb3IgPSBvbkVycm9yXG4gICAgICAgICAgICA/IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IF9zdXBlci5wcm90b3R5cGUuX2Vycm9yO1xuICAgICAgICBfdGhpcy5fY29tcGxldGUgPSBvbkNvbXBsZXRlXG4gICAgICAgICAgICA/IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9wZXJhdG9yU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZFVuc3Vic2NyaWJlIHx8IHRoaXMuc2hvdWxkVW5zdWJzY3JpYmUoKSkge1xuICAgICAgICAgICAgdmFyIGNsb3NlZF8xID0gdGhpcy5jbG9zZWQ7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAhY2xvc2VkXzEgJiYgKChfYSA9IHRoaXMub25GaW5hbGl6ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gT3BlcmF0b3JTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG5leHBvcnQgeyBPcGVyYXRvclN1YnNjcmliZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9wZXJhdG9yU3Vic2NyaWJlci5qcy5tYXAiLAogICAgImltcG9ydCB7IGNyZWF0ZUVycm9yQ2xhc3MgfSBmcm9tICcuL2NyZWF0ZUVycm9yQ2xhc3MnO1xuZXhwb3J0IHZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvciA9IGNyZWF0ZUVycm9yQ2xhc3MoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiBPYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGwoKSB7XG4gICAgICAgIF9zdXBlcih0aGlzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gJ29iamVjdCB1bnN1YnNjcmliZWQnO1xuICAgIH07XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdFVuc3Vic2NyaWJlZEVycm9yLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19leHRlbmRzLCBfX3ZhbHVlcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIEVNUFRZX1NVQlNDUklQVElPTiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yIH0gZnJvbSAnLi91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbmltcG9ydCB7IGFyclJlbW92ZSB9IGZyb20gJy4vdXRpbC9hcnJSZW1vdmUnO1xuaW1wb3J0IHsgZXJyb3JDb250ZXh0IH0gZnJvbSAnLi91dGlsL2Vycm9yQ29udGV4dCc7XG52YXIgU3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsO1xuICAgICAgICBfdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICAgIF90aGlzLnRocm93bkVycm9yID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdWJqZWN0LnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gbmV3IEFub255bW91c1N1YmplY3QodGhpcywgdGhpcyk7XG4gICAgICAgIHN1YmplY3Qub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fdGhyb3dJZkNsb3NlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBlcnJvckNvbnRleHQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVfMSwgX2E7XG4gICAgICAgICAgICBfdGhpcy5fdGhyb3dJZkNsb3NlZCgpO1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmN1cnJlbnRPYnNlcnZlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3VycmVudE9ic2VydmVycyA9IEFycmF5LmZyb20oX3RoaXMub2JzZXJ2ZXJzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyhfdGhpcy5jdXJyZW50T2JzZXJ2ZXJzKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gX2MudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGVycm9yQ29udGV4dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5fdGhyb3dJZkNsb3NlZCgpO1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5oYXNFcnJvciA9IF90aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMudGhyb3duRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgdmFyIG9ic2VydmVycyA9IF90aGlzLm9ic2VydmVycztcbiAgICAgICAgICAgICAgICB3aGlsZSAob2JzZXJ2ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcnMuc2hpZnQoKS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgZXJyb3JDb250ZXh0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLl90aHJvd0lmQ2xvc2VkKCk7XG4gICAgICAgICAgICBpZiAoIV90aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIG9ic2VydmVycyA9IF90aGlzLm9ic2VydmVycztcbiAgICAgICAgICAgICAgICB3aGlsZSAob2JzZXJ2ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcnMuc2hpZnQoKS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdGhpcy5jdXJyZW50T2JzZXJ2ZXJzID0gbnVsbDtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdWJqZWN0LnByb3RvdHlwZSwgXCJvYnNlcnZlZFwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLm9ic2VydmVycykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgPiAwO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHRoaXMuX3Rocm93SWZDbG9zZWQoKTtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3RyeVN1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHRoaXMuX3Rocm93SWZDbG9zZWQoKTtcbiAgICAgICAgdGhpcy5fY2hlY2tGaW5hbGl6ZWRTdGF0dXNlcyhzdWJzY3JpYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lubmVyU3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX2lubmVyU3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gdGhpcywgaGFzRXJyb3IgPSBfYS5oYXNFcnJvciwgaXNTdG9wcGVkID0gX2EuaXNTdG9wcGVkLCBvYnNlcnZlcnMgPSBfYS5vYnNlcnZlcnM7XG4gICAgICAgIGlmIChoYXNFcnJvciB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBFTVBUWV9TVUJTQ1JJUFRJT047XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50T2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgICAgb2JzZXJ2ZXJzLnB1c2goc3Vic2NyaWJlcik7XG4gICAgICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsO1xuICAgICAgICAgICAgYXJyUmVtb3ZlKG9ic2VydmVycywgc3Vic2NyaWJlcik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX2NoZWNrRmluYWxpemVkU3RhdHVzZXMgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBoYXNFcnJvciA9IF9hLmhhc0Vycm9yLCB0aHJvd25FcnJvciA9IF9hLnRocm93bkVycm9yLCBpc1N0b3BwZWQgPSBfYS5pc1N0b3BwZWQ7XG4gICAgICAgIGlmIChoYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcih0aHJvd25FcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmFzT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgU3ViamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gbmV3IEFub255bW91c1N1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3ViamVjdDtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IHsgU3ViamVjdCB9O1xudmFyIEFub255bW91c1N1YmplY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBbm9ueW1vdXNTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFub255bW91c1N1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAoX2IgPSAoX2EgPSB0aGlzLmRlc3RpbmF0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubmV4dCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHZhbHVlKTtcbiAgICB9O1xuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAoX2IgPSAoX2EgPSB0aGlzLmRlc3RpbmF0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXJyb3IpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKF9hLCBlcnIpO1xuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIChfYiA9IChfYSA9IHRoaXMuZGVzdGluYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb21wbGV0ZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpO1xuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLnNvdXJjZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN1YnNjcmliZShzdWJzY3JpYmVyKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogRU1QVFlfU1VCU0NSSVBUSU9OO1xuICAgIH07XG4gICAgcmV0dXJuIEFub255bW91c1N1YmplY3Q7XG59KFN1YmplY3QpKTtcbmV4cG9ydCB7IEFub255bW91c1N1YmplY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YmplY3QuanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICcuL1N1YmplY3QnO1xudmFyIEJlaGF2aW9yU3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJlaGF2aW9yU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCZWhhdmlvclN1YmplY3QoX3ZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl92YWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBfc3VwZXIucHJvdG90eXBlLl9zdWJzY3JpYmUuY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICAgICAgIXN1YnNjcmlwdGlvbi5jbG9zZWQgJiYgc3Vic2NyaWJlci5uZXh0KHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGhhc0Vycm9yID0gX2EuaGFzRXJyb3IsIHRocm93bkVycm9yID0gX2EudGhyb3duRXJyb3IsIF92YWx1ZSA9IF9hLl92YWx1ZTtcbiAgICAgICAgaWYgKGhhc0Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyB0aHJvd25FcnJvcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90aHJvd0lmQ2xvc2VkKCk7XG4gICAgICAgIHJldHVybiBfdmFsdWU7XG4gICAgfTtcbiAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5uZXh0LmNhbGwodGhpcywgKHRoaXMuX3ZhbHVlID0gdmFsdWUpKTtcbiAgICB9O1xuICAgIHJldHVybiBCZWhhdmlvclN1YmplY3Q7XG59KFN1YmplY3QpKTtcbmV4cG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmVoYXZpb3JTdWJqZWN0LmpzLm1hcCIsCiAgICAiZXhwb3J0IHZhciBkYXRlVGltZXN0YW1wUHJvdmlkZXIgPSB7XG4gICAgbm93OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAoZGF0ZVRpbWVzdGFtcFByb3ZpZGVyLmRlbGVnYXRlIHx8IERhdGUpLm5vdygpO1xuICAgIH0sXG4gICAgZGVsZWdhdGU6IHVuZGVmaW5lZCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRlVGltZXN0YW1wUHJvdmlkZXIuanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICcuL1N1YmplY3QnO1xuaW1wb3J0IHsgZGF0ZVRpbWVzdGFtcFByb3ZpZGVyIH0gZnJvbSAnLi9zY2hlZHVsZXIvZGF0ZVRpbWVzdGFtcFByb3ZpZGVyJztcbnZhciBSZXBsYXlTdWJqZWN0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVwbGF5U3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZXBsYXlTdWJqZWN0KF9idWZmZXJTaXplLCBfd2luZG93VGltZSwgX3RpbWVzdGFtcFByb3ZpZGVyKSB7XG4gICAgICAgIGlmIChfYnVmZmVyU2l6ZSA9PT0gdm9pZCAwKSB7IF9idWZmZXJTaXplID0gSW5maW5pdHk7IH1cbiAgICAgICAgaWYgKF93aW5kb3dUaW1lID09PSB2b2lkIDApIHsgX3dpbmRvd1RpbWUgPSBJbmZpbml0eTsgfVxuICAgICAgICBpZiAoX3RpbWVzdGFtcFByb3ZpZGVyID09PSB2b2lkIDApIHsgX3RpbWVzdGFtcFByb3ZpZGVyID0gZGF0ZVRpbWVzdGFtcFByb3ZpZGVyOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9idWZmZXJTaXplID0gX2J1ZmZlclNpemU7XG4gICAgICAgIF90aGlzLl93aW5kb3dUaW1lID0gX3dpbmRvd1RpbWU7XG4gICAgICAgIF90aGlzLl90aW1lc3RhbXBQcm92aWRlciA9IF90aW1lc3RhbXBQcm92aWRlcjtcbiAgICAgICAgX3RoaXMuX2J1ZmZlciA9IFtdO1xuICAgICAgICBfdGhpcy5faW5maW5pdGVUaW1lV2luZG93ID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMuX2luZmluaXRlVGltZVdpbmRvdyA9IF93aW5kb3dUaW1lID09PSBJbmZpbml0eTtcbiAgICAgICAgX3RoaXMuX2J1ZmZlclNpemUgPSBNYXRoLm1heCgxLCBfYnVmZmVyU2l6ZSk7XG4gICAgICAgIF90aGlzLl93aW5kb3dUaW1lID0gTWF0aC5tYXgoMSwgX3dpbmRvd1RpbWUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgaXNTdG9wcGVkID0gX2EuaXNTdG9wcGVkLCBfYnVmZmVyID0gX2EuX2J1ZmZlciwgX2luZmluaXRlVGltZVdpbmRvdyA9IF9hLl9pbmZpbml0ZVRpbWVXaW5kb3csIF90aW1lc3RhbXBQcm92aWRlciA9IF9hLl90aW1lc3RhbXBQcm92aWRlciwgX3dpbmRvd1RpbWUgPSBfYS5fd2luZG93VGltZTtcbiAgICAgICAgaWYgKCFpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIF9idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAhX2luZmluaXRlVGltZVdpbmRvdyAmJiBfYnVmZmVyLnB1c2goX3RpbWVzdGFtcFByb3ZpZGVyLm5vdygpICsgX3dpbmRvd1RpbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RyaW1CdWZmZXIoKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5uZXh0LmNhbGwodGhpcywgdmFsdWUpO1xuICAgIH07XG4gICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHRoaXMuX3Rocm93SWZDbG9zZWQoKTtcbiAgICAgICAgdGhpcy5fdHJpbUJ1ZmZlcigpO1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5faW5uZXJTdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9pbmZpbml0ZVRpbWVXaW5kb3cgPSBfYS5faW5maW5pdGVUaW1lV2luZG93LCBfYnVmZmVyID0gX2EuX2J1ZmZlcjtcbiAgICAgICAgdmFyIGNvcHkgPSBfYnVmZmVyLnNsaWNlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29weS5sZW5ndGggJiYgIXN1YnNjcmliZXIuY2xvc2VkOyBpICs9IF9pbmZpbml0ZVRpbWVXaW5kb3cgPyAxIDogMikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGNvcHlbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NoZWNrRmluYWxpemVkU3RhdHVzZXMoc3Vic2NyaWJlcik7XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fdHJpbUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgX2J1ZmZlclNpemUgPSBfYS5fYnVmZmVyU2l6ZSwgX3RpbWVzdGFtcFByb3ZpZGVyID0gX2EuX3RpbWVzdGFtcFByb3ZpZGVyLCBfYnVmZmVyID0gX2EuX2J1ZmZlciwgX2luZmluaXRlVGltZVdpbmRvdyA9IF9hLl9pbmZpbml0ZVRpbWVXaW5kb3c7XG4gICAgICAgIHZhciBhZGp1c3RlZEJ1ZmZlclNpemUgPSAoX2luZmluaXRlVGltZVdpbmRvdyA/IDEgOiAyKSAqIF9idWZmZXJTaXplO1xuICAgICAgICBfYnVmZmVyU2l6ZSA8IEluZmluaXR5ICYmIGFkanVzdGVkQnVmZmVyU2l6ZSA8IF9idWZmZXIubGVuZ3RoICYmIF9idWZmZXIuc3BsaWNlKDAsIF9idWZmZXIubGVuZ3RoIC0gYWRqdXN0ZWRCdWZmZXJTaXplKTtcbiAgICAgICAgaWYgKCFfaW5maW5pdGVUaW1lV2luZG93KSB7XG4gICAgICAgICAgICB2YXIgbm93ID0gX3RpbWVzdGFtcFByb3ZpZGVyLm5vdygpO1xuICAgICAgICAgICAgdmFyIGxhc3QgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBfYnVmZmVyLmxlbmd0aCAmJiBfYnVmZmVyW2ldIDw9IG5vdzsgaSArPSAyKSB7XG4gICAgICAgICAgICAgICAgbGFzdCA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0ICYmIF9idWZmZXIuc3BsaWNlKDAsIGxhc3QgKyAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFJlcGxheVN1YmplY3Q7XG59KFN1YmplY3QpKTtcbmV4cG9ydCB7IFJlcGxheVN1YmplY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlcGxheVN1YmplY3QuanMubWFwIiwKICAgICJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5leHBvcnQgdmFyIEVNUFRZID0gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTsgfSk7XG5leHBvcnQgZnVuY3Rpb24gZW1wdHkoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIHNjaGVkdWxlciA/IGVtcHR5U2NoZWR1bGVkKHNjaGVkdWxlcikgOiBFTVBUWTtcbn1cbmZ1bmN0aW9uIGVtcHR5U2NoZWR1bGVkKHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikgeyByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTsgfSk7IH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1wdHkuanMubWFwIiwKICAgICJpbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi9pc0Z1bmN0aW9uJztcbmV4cG9ydCBmdW5jdGlvbiBpc1NjaGVkdWxlcih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiBpc0Z1bmN0aW9uKHZhbHVlLnNjaGVkdWxlKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzU2NoZWR1bGVyLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBpc1NjaGVkdWxlciB9IGZyb20gJy4vaXNTY2hlZHVsZXInO1xuZnVuY3Rpb24gbGFzdChhcnIpIHtcbiAgICByZXR1cm4gYXJyW2Fyci5sZW5ndGggLSAxXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwb3BSZXN1bHRTZWxlY3RvcihhcmdzKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24obGFzdChhcmdzKSkgPyBhcmdzLnBvcCgpIDogdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBvcFNjaGVkdWxlcihhcmdzKSB7XG4gICAgcmV0dXJuIGlzU2NoZWR1bGVyKGxhc3QoYXJncykpID8gYXJncy5wb3AoKSA6IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwb3BOdW1iZXIoYXJncywgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBsYXN0KGFyZ3MpID09PSAnbnVtYmVyJyA/IGFyZ3MucG9wKCkgOiBkZWZhdWx0VmFsdWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmdzLmpzLm1hcCIsCiAgICAiZXhwb3J0IHZhciBpc0FycmF5TGlrZSA9IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInICYmIHR5cGVvZiB4ICE9PSAnZnVuY3Rpb24nOyB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXlMaWtlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gXCIuL2lzRnVuY3Rpb25cIjtcbmV4cG9ydCBmdW5jdGlvbiBpc1Byb21pc2UodmFsdWUpIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbih2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsdWUudGhlbik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc1Byb21pc2UuanMubWFwIiwKICAgICJpbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi4vc3ltYm9sL29ic2VydmFibGUnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vaXNGdW5jdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gaXNJbnRlcm9wT2JzZXJ2YWJsZShpbnB1dCkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKGlucHV0W1N5bWJvbF9vYnNlcnZhYmxlXSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0ludGVyb3BPYnNlcnZhYmxlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vaXNGdW5jdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gaXNBc3luY0l0ZXJhYmxlKG9iaikge1xuICAgIHJldHVybiBTeW1ib2wuYXN5bmNJdGVyYXRvciAmJiBpc0Z1bmN0aW9uKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9ialtTeW1ib2wuYXN5bmNJdGVyYXRvcl0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNBc3luY0l0ZXJhYmxlLmpzLm1hcCIsCiAgICAiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUludmFsaWRPYnNlcnZhYmxlVHlwZUVycm9yKGlucHV0KSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgcHJvdmlkZWQgXCIgKyAoaW5wdXQgIT09IG51bGwgJiYgdHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyA/ICdhbiBpbnZhbGlkIG9iamVjdCcgOiBcIidcIiArIGlucHV0ICsgXCInXCIpICsgXCIgd2hlcmUgYSBzdHJlYW0gd2FzIGV4cGVjdGVkLiBZb3UgY2FuIHByb3ZpZGUgYW4gT2JzZXJ2YWJsZSwgUHJvbWlzZSwgUmVhZGFibGVTdHJlYW0sIEFycmF5LCBBc3luY0l0ZXJhYmxlLCBvciBJdGVyYWJsZS5cIik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJvd1Vub2JzZXJ2YWJsZUVycm9yLmpzLm1hcCIsCiAgICAiZXhwb3J0IGZ1bmN0aW9uIGdldFN5bWJvbEl0ZXJhdG9yKCkge1xuICAgIGlmICh0eXBlb2YgU3ltYm9sICE9PSAnZnVuY3Rpb24nIHx8ICFTeW1ib2wuaXRlcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuICdAQGl0ZXJhdG9yJztcbiAgICB9XG4gICAgcmV0dXJuIFN5bWJvbC5pdGVyYXRvcjtcbn1cbmV4cG9ydCB2YXIgaXRlcmF0b3IgPSBnZXRTeW1ib2xJdGVyYXRvcigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlcmF0b3IuanMubWFwIiwKICAgICJpbXBvcnQgeyBpdGVyYXRvciBhcyBTeW1ib2xfaXRlcmF0b3IgfSBmcm9tICcuLi9zeW1ib2wvaXRlcmF0b3InO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vaXNGdW5jdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gaXNJdGVyYWJsZShpbnB1dCkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKGlucHV0ID09PSBudWxsIHx8IGlucHV0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbnB1dFtTeW1ib2xfaXRlcmF0b3JdKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzSXRlcmFibGUuanMubWFwIiwKICAgICJpbXBvcnQgeyBfX2FzeW5jR2VuZXJhdG9yLCBfX2F3YWl0LCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vaXNGdW5jdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gcmVhZGFibGVTdHJlYW1MaWtlVG9Bc3luY0dlbmVyYXRvcihyZWFkYWJsZVN0cmVhbSkge1xuICAgIHJldHVybiBfX2FzeW5jR2VuZXJhdG9yKHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24gcmVhZGFibGVTdHJlYW1MaWtlVG9Bc3luY0dlbmVyYXRvcl8xKCkge1xuICAgICAgICB2YXIgcmVhZGVyLCBfYSwgdmFsdWUsIGRvbmU7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IHJlYWRhYmxlU3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzEsICwgOSwgMTBdKTtcbiAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cnVlKSByZXR1cm4gWzMsIDhdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIF9fYXdhaXQocmVhZGVyLnJlYWQoKSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCksIHZhbHVlID0gX2EudmFsdWUsIGRvbmUgPSBfYS5kb25lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRvbmUpIHJldHVybiBbMywgNV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgX19hd2FpdCh2b2lkIDApXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiwgX2Iuc2VudCgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbNCwgX19hd2FpdCh2YWx1ZSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFs0LCBfYi5zZW50KCldO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMsIDJdO1xuICAgICAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIFszLCAxMF07XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3XTtcbiAgICAgICAgICAgICAgICBjYXNlIDEwOiByZXR1cm4gWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1JlYWRhYmxlU3RyZWFtTGlrZShvYmopIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmouZ2V0UmVhZGVyKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUmVhZGFibGVTdHJlYW1MaWtlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgX19hc3luY1ZhbHVlcywgX19hd2FpdGVyLCBfX2dlbmVyYXRvciwgX192YWx1ZXMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzQXJyYXlMaWtlIH0gZnJvbSAnLi4vdXRpbC9pc0FycmF5TGlrZSc7XG5pbXBvcnQgeyBpc1Byb21pc2UgfSBmcm9tICcuLi91dGlsL2lzUHJvbWlzZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBpc0ludGVyb3BPYnNlcnZhYmxlIH0gZnJvbSAnLi4vdXRpbC9pc0ludGVyb3BPYnNlcnZhYmxlJztcbmltcG9ydCB7IGlzQXN5bmNJdGVyYWJsZSB9IGZyb20gJy4uL3V0aWwvaXNBc3luY0l0ZXJhYmxlJztcbmltcG9ydCB7IGNyZWF0ZUludmFsaWRPYnNlcnZhYmxlVHlwZUVycm9yIH0gZnJvbSAnLi4vdXRpbC90aHJvd1Vub2JzZXJ2YWJsZUVycm9yJztcbmltcG9ydCB7IGlzSXRlcmFibGUgfSBmcm9tICcuLi91dGlsL2lzSXRlcmFibGUnO1xuaW1wb3J0IHsgaXNSZWFkYWJsZVN0cmVhbUxpa2UsIHJlYWRhYmxlU3RyZWFtTGlrZVRvQXN5bmNHZW5lcmF0b3IgfSBmcm9tICcuLi91dGlsL2lzUmVhZGFibGVTdHJlYW1MaWtlJztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgcmVwb3J0VW5oYW5kbGVkRXJyb3IgfSBmcm9tICcuLi91dGlsL3JlcG9ydFVuaGFuZGxlZEVycm9yJztcbmltcG9ydCB7IG9ic2VydmFibGUgYXMgU3ltYm9sX29ic2VydmFibGUgfSBmcm9tICcuLi9zeW1ib2wvb2JzZXJ2YWJsZSc7XG5leHBvcnQgZnVuY3Rpb24gaW5uZXJGcm9tKGlucHV0KSB7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSkge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuICAgIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChpc0ludGVyb3BPYnNlcnZhYmxlKGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZyb21JbnRlcm9wT2JzZXJ2YWJsZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQXJyYXlMaWtlKGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Byb21pc2UoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZnJvbVByb21pc2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FzeW5jSXRlcmFibGUoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZnJvbUFzeW5jSXRlcmFibGUoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0l0ZXJhYmxlKGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZyb21JdGVyYWJsZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVhZGFibGVTdHJlYW1MaWtlKGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZyb21SZWFkYWJsZVN0cmVhbUxpa2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IGNyZWF0ZUludmFsaWRPYnNlcnZhYmxlVHlwZUVycm9yKGlucHV0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tSW50ZXJvcE9ic2VydmFibGUob2JqKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBvYnMgPSBvYmpbU3ltYm9sX29ic2VydmFibGVdKCk7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9icy5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JzLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm92aWRlZCBvYmplY3QgZG9lcyBub3QgY29ycmVjdGx5IGltcGxlbWVudCBTeW1ib2wub2JzZXJ2YWJsZScpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21BcnJheUxpa2UoYXJyYXkpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGggJiYgIXN1YnNjcmliZXIuY2xvc2VkOyBpKyspIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChhcnJheVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Qcm9taXNlKHByb21pc2UpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgcHJvbWlzZVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHN1YnNjcmliZXIuZXJyb3IoZXJyKTsgfSlcbiAgICAgICAgICAgIC50aGVuKG51bGwsIHJlcG9ydFVuaGFuZGxlZEVycm9yKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tSXRlcmFibGUoaXRlcmFibGUpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGVfMSwgX2E7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVyYWJsZV8xID0gX192YWx1ZXMoaXRlcmFibGUpLCBpdGVyYWJsZV8xXzEgPSBpdGVyYWJsZV8xLm5leHQoKTsgIWl0ZXJhYmxlXzFfMS5kb25lOyBpdGVyYWJsZV8xXzEgPSBpdGVyYWJsZV8xLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGl0ZXJhYmxlXzFfMS52YWx1ZTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlcmFibGVfMV8xICYmICFpdGVyYWJsZV8xXzEuZG9uZSAmJiAoX2EgPSBpdGVyYWJsZV8xLnJldHVybikpIF9hLmNhbGwoaXRlcmFibGVfMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21Bc3luY0l0ZXJhYmxlKGFzeW5jSXRlcmFibGUpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgcHJvY2Vzcyhhc3luY0l0ZXJhYmxlLCBzdWJzY3JpYmVyKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBzdWJzY3JpYmVyLmVycm9yKGVycik7IH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZyb21SZWFkYWJsZVN0cmVhbUxpa2UocmVhZGFibGVTdHJlYW0pIHtcbiAgICByZXR1cm4gZnJvbUFzeW5jSXRlcmFibGUocmVhZGFibGVTdHJlYW1MaWtlVG9Bc3luY0dlbmVyYXRvcihyZWFkYWJsZVN0cmVhbSkpO1xufVxuZnVuY3Rpb24gcHJvY2Vzcyhhc3luY0l0ZXJhYmxlLCBzdWJzY3JpYmVyKSB7XG4gICAgdmFyIGFzeW5jSXRlcmFibGVfMSwgYXN5bmNJdGVyYWJsZV8xXzE7XG4gICAgdmFyIGVfMiwgX2E7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWUsIGVfMl8xO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzAsIDUsIDYsIDExXSk7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jSXRlcmFibGVfMSA9IF9fYXN5bmNWYWx1ZXMoYXN5bmNJdGVyYWJsZSk7XG4gICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCwgYXN5bmNJdGVyYWJsZV8xLm5leHQoKV07XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIShhc3luY0l0ZXJhYmxlXzFfMSA9IF9iLnNlbnQoKSwgIWFzeW5jSXRlcmFibGVfMV8xLmRvbmUpKSByZXR1cm4gWzMsIDRdO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGFzeW5jSXRlcmFibGVfMV8xLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFszLCAxXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMywgMTFdO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgZV8yXzEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGVfMiA9IHsgZXJyb3I6IGVfMl8xIH07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgMTFdO1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFs2LCAsIDksIDEwXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGFzeW5jSXRlcmFibGVfMV8xICYmICFhc3luY0l0ZXJhYmxlXzFfMS5kb25lICYmIChfYSA9IGFzeW5jSXRlcmFibGVfMS5yZXR1cm4pKSkgcmV0dXJuIFszLCA4XTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0LCBfYS5jYWxsKGFzeW5jSXRlcmFibGVfMSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDg7XG4gICAgICAgICAgICAgICAgY2FzZSA4OiByZXR1cm4gWzMsIDEwXTtcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIGlmIChlXzIpIHRocm93IGVfMi5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3XTtcbiAgICAgICAgICAgICAgICBjYXNlIDEwOiByZXR1cm4gWzddO1xuICAgICAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbm5lckZyb20uanMubWFwIiwKICAgICJleHBvcnQgZnVuY3Rpb24gZXhlY3V0ZVNjaGVkdWxlKHBhcmVudFN1YnNjcmlwdGlvbiwgc2NoZWR1bGVyLCB3b3JrLCBkZWxheSwgcmVwZWF0KSB7XG4gICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHsgZGVsYXkgPSAwOyB9XG4gICAgaWYgKHJlcGVhdCA9PT0gdm9pZCAwKSB7IHJlcGVhdCA9IGZhbHNlOyB9XG4gICAgdmFyIHNjaGVkdWxlU3Vic2NyaXB0aW9uID0gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd29yaygpO1xuICAgICAgICBpZiAocmVwZWF0KSB7XG4gICAgICAgICAgICBwYXJlbnRTdWJzY3JpcHRpb24uYWRkKHRoaXMuc2NoZWR1bGUobnVsbCwgZGVsYXkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH0sIGRlbGF5KTtcbiAgICBwYXJlbnRTdWJzY3JpcHRpb24uYWRkKHNjaGVkdWxlU3Vic2NyaXB0aW9uKTtcbiAgICBpZiAoIXJlcGVhdCkge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVTdWJzY3JpcHRpb247XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXhlY3V0ZVNjaGVkdWxlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgZXhlY3V0ZVNjaGVkdWxlIH0gZnJvbSAnLi4vdXRpbC9leGVjdXRlU2NoZWR1bGUnO1xuaW1wb3J0IHsgb3BlcmF0ZSB9IGZyb20gJy4uL3V0aWwvbGlmdCc7XG5pbXBvcnQgeyBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIgfSBmcm9tICcuL09wZXJhdG9yU3Vic2NyaWJlcic7XG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZU9uKHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICByZXR1cm4gb3BlcmF0ZShmdW5jdGlvbiAoc291cmNlLCBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHNvdXJjZS5zdWJzY3JpYmUoY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyKHN1YnNjcmliZXIsIGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gZXhlY3V0ZVNjaGVkdWxlKHN1YnNjcmliZXIsIHNjaGVkdWxlciwgZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5uZXh0KHZhbHVlKTsgfSwgZGVsYXkpOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiBleGVjdXRlU2NoZWR1bGUoc3Vic2NyaWJlciwgc2NoZWR1bGVyLCBmdW5jdGlvbiAoKSB7IHJldHVybiBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7IH0sIGRlbGF5KTsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gZXhlY3V0ZVNjaGVkdWxlKHN1YnNjcmliZXIsIHNjaGVkdWxlciwgZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5lcnJvcihlcnIpOyB9LCBkZWxheSk7IH0pKTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmVPbi5qcy5tYXAiLAogICAgImltcG9ydCB7IG9wZXJhdGUgfSBmcm9tICcuLi91dGlsL2xpZnQnO1xuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmliZU9uKHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkgeyBkZWxheSA9IDA7IH1cbiAgICByZXR1cm4gb3BlcmF0ZShmdW5jdGlvbiAoc291cmNlLCBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHN1YnNjcmliZXIuYWRkKHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiAoKSB7IHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpOyB9LCBkZWxheSkpO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlT24uanMubWFwIiwKICAgICJpbXBvcnQgeyBpbm5lckZyb20gfSBmcm9tICcuLi9vYnNlcnZhYmxlL2lubmVyRnJvbSc7XG5pbXBvcnQgeyBvYnNlcnZlT24gfSBmcm9tICcuLi9vcGVyYXRvcnMvb2JzZXJ2ZU9uJztcbmltcG9ydCB7IHN1YnNjcmliZU9uIH0gZnJvbSAnLi4vb3BlcmF0b3JzL3N1YnNjcmliZU9uJztcbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZU9ic2VydmFibGUoaW5wdXQsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBpbm5lckZyb20oaW5wdXQpLnBpcGUoc3Vic2NyaWJlT24oc2NoZWR1bGVyKSwgb2JzZXJ2ZU9uKHNjaGVkdWxlcikpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGVPYnNlcnZhYmxlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgaW5uZXJGcm9tIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9pbm5lckZyb20nO1xuaW1wb3J0IHsgb2JzZXJ2ZU9uIH0gZnJvbSAnLi4vb3BlcmF0b3JzL29ic2VydmVPbic7XG5pbXBvcnQgeyBzdWJzY3JpYmVPbiB9IGZyb20gJy4uL29wZXJhdG9ycy9zdWJzY3JpYmVPbic7XG5leHBvcnQgZnVuY3Rpb24gc2NoZWR1bGVQcm9taXNlKGlucHV0LCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gaW5uZXJGcm9tKGlucHV0KS5waXBlKHN1YnNjcmliZU9uKHNjaGVkdWxlciksIG9ic2VydmVPbihzY2hlZHVsZXIpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVkdWxlUHJvbWlzZS5qcy5tYXAiLAogICAgImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi9PYnNlcnZhYmxlJztcbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZUFycmF5KGlucHV0LCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChpID09PSBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoaW5wdXRbaSsrXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVkdWxlQXJyYXkuanMubWFwIiwKICAgICJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBpdGVyYXRvciBhcyBTeW1ib2xfaXRlcmF0b3IgfSBmcm9tICcuLi9zeW1ib2wvaXRlcmF0b3InO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4uL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBleGVjdXRlU2NoZWR1bGUgfSBmcm9tICcuLi91dGlsL2V4ZWN1dGVTY2hlZHVsZSc7XG5leHBvcnQgZnVuY3Rpb24gc2NoZWR1bGVJdGVyYWJsZShpbnB1dCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpdGVyYXRvcjtcbiAgICAgICAgZXhlY3V0ZVNjaGVkdWxlKHN1YnNjcmliZXIsIHNjaGVkdWxlciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXRlcmF0b3IgPSBpbnB1dFtTeW1ib2xfaXRlcmF0b3JdKCk7XG4gICAgICAgICAgICBleGVjdXRlU2NoZWR1bGUoc3Vic2NyaWJlciwgc2NoZWR1bGVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgZG9uZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAoX2EgPSBpdGVyYXRvci5uZXh0KCksIHZhbHVlID0gX2EudmFsdWUsIGRvbmUgPSBfYS5kb25lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAwLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBpc0Z1bmN0aW9uKGl0ZXJhdG9yID09PSBudWxsIHx8IGl0ZXJhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVyYXRvci5yZXR1cm4pICYmIGl0ZXJhdG9yLnJldHVybigpOyB9O1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZWR1bGVJdGVyYWJsZS5qcy5tYXAiLAogICAgImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IGV4ZWN1dGVTY2hlZHVsZSB9IGZyb20gJy4uL3V0aWwvZXhlY3V0ZVNjaGVkdWxlJztcbmV4cG9ydCBmdW5jdGlvbiBzY2hlZHVsZUFzeW5jSXRlcmFibGUoaW5wdXQsIHNjaGVkdWxlcikge1xuICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJdGVyYWJsZSBjYW5ub3QgYmUgbnVsbCcpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgZXhlY3V0ZVNjaGVkdWxlKHN1YnNjcmliZXIsIHNjaGVkdWxlciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gaW5wdXRbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgICAgICAgICBleGVjdXRlU2NoZWR1bGUoc3Vic2NyaWJlciwgc2NoZWR1bGVyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IubmV4dCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAwLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlZHVsZUFzeW5jSXRlcmFibGUuanMubWFwIiwKICAgICJpbXBvcnQgeyBzY2hlZHVsZUFzeW5jSXRlcmFibGUgfSBmcm9tICcuL3NjaGVkdWxlQXN5bmNJdGVyYWJsZSc7XG5pbXBvcnQgeyByZWFkYWJsZVN0cmVhbUxpa2VUb0FzeW5jR2VuZXJhdG9yIH0gZnJvbSAnLi4vdXRpbC9pc1JlYWRhYmxlU3RyZWFtTGlrZSc7XG5leHBvcnQgZnVuY3Rpb24gc2NoZWR1bGVSZWFkYWJsZVN0cmVhbUxpa2UoaW5wdXQsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBzY2hlZHVsZUFzeW5jSXRlcmFibGUocmVhZGFibGVTdHJlYW1MaWtlVG9Bc3luY0dlbmVyYXRvcihpbnB1dCksIHNjaGVkdWxlcik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlZHVsZVJlYWRhYmxlU3RyZWFtTGlrZS5qcy5tYXAiLAogICAgImltcG9ydCB7IHNjaGVkdWxlT2JzZXJ2YWJsZSB9IGZyb20gJy4vc2NoZWR1bGVPYnNlcnZhYmxlJztcbmltcG9ydCB7IHNjaGVkdWxlUHJvbWlzZSB9IGZyb20gJy4vc2NoZWR1bGVQcm9taXNlJztcbmltcG9ydCB7IHNjaGVkdWxlQXJyYXkgfSBmcm9tICcuL3NjaGVkdWxlQXJyYXknO1xuaW1wb3J0IHsgc2NoZWR1bGVJdGVyYWJsZSB9IGZyb20gJy4vc2NoZWR1bGVJdGVyYWJsZSc7XG5pbXBvcnQgeyBzY2hlZHVsZUFzeW5jSXRlcmFibGUgfSBmcm9tICcuL3NjaGVkdWxlQXN5bmNJdGVyYWJsZSc7XG5pbXBvcnQgeyBpc0ludGVyb3BPYnNlcnZhYmxlIH0gZnJvbSAnLi4vdXRpbC9pc0ludGVyb3BPYnNlcnZhYmxlJztcbmltcG9ydCB7IGlzUHJvbWlzZSB9IGZyb20gJy4uL3V0aWwvaXNQcm9taXNlJztcbmltcG9ydCB7IGlzQXJyYXlMaWtlIH0gZnJvbSAnLi4vdXRpbC9pc0FycmF5TGlrZSc7XG5pbXBvcnQgeyBpc0l0ZXJhYmxlIH0gZnJvbSAnLi4vdXRpbC9pc0l0ZXJhYmxlJztcbmltcG9ydCB7IGlzQXN5bmNJdGVyYWJsZSB9IGZyb20gJy4uL3V0aWwvaXNBc3luY0l0ZXJhYmxlJztcbmltcG9ydCB7IGNyZWF0ZUludmFsaWRPYnNlcnZhYmxlVHlwZUVycm9yIH0gZnJvbSAnLi4vdXRpbC90aHJvd1Vub2JzZXJ2YWJsZUVycm9yJztcbmltcG9ydCB7IGlzUmVhZGFibGVTdHJlYW1MaWtlIH0gZnJvbSAnLi4vdXRpbC9pc1JlYWRhYmxlU3RyZWFtTGlrZSc7XG5pbXBvcnQgeyBzY2hlZHVsZVJlYWRhYmxlU3RyZWFtTGlrZSB9IGZyb20gJy4vc2NoZWR1bGVSZWFkYWJsZVN0cmVhbUxpa2UnO1xuZXhwb3J0IGZ1bmN0aW9uIHNjaGVkdWxlZChpbnB1dCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGlzSW50ZXJvcE9ic2VydmFibGUoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVPYnNlcnZhYmxlKGlucHV0LCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5TGlrZShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZUFycmF5KGlucHV0LCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Byb21pc2UoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVQcm9taXNlKGlucHV0LCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FzeW5jSXRlcmFibGUoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVBc3luY0l0ZXJhYmxlKGlucHV0LCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0l0ZXJhYmxlKGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlSXRlcmFibGUoaW5wdXQsIHNjaGVkdWxlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVhZGFibGVTdHJlYW1MaWtlKGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVkdWxlUmVhZGFibGVTdHJlYW1MaWtlKGlucHV0LCBzY2hlZHVsZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IGNyZWF0ZUludmFsaWRPYnNlcnZhYmxlVHlwZUVycm9yKGlucHV0KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVkdWxlZC5qcy5tYXAiLAogICAgImltcG9ydCB7IHNjaGVkdWxlZCB9IGZyb20gJy4uL3NjaGVkdWxlZC9zY2hlZHVsZWQnO1xuaW1wb3J0IHsgaW5uZXJGcm9tIH0gZnJvbSAnLi9pbm5lckZyb20nO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb20oaW5wdXQsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBzY2hlZHVsZXIgPyBzY2hlZHVsZWQoaW5wdXQsIHNjaGVkdWxlcikgOiBpbm5lckZyb20oaW5wdXQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbS5qcy5tYXAiLAogICAgImltcG9ydCB7IHBvcFNjaGVkdWxlciB9IGZyb20gJy4uL3V0aWwvYXJncyc7XG5pbXBvcnQgeyBmcm9tIH0gZnJvbSAnLi9mcm9tJztcbmV4cG9ydCBmdW5jdGlvbiBvZigpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHNjaGVkdWxlciA9IHBvcFNjaGVkdWxlcihhcmdzKTtcbiAgICByZXR1cm4gZnJvbShhcmdzLCBzY2hlZHVsZXIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2YuanMubWFwIiwKICAgICJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vdXRpbC9pc0Z1bmN0aW9uJztcbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0Vycm9yKGVycm9yT3JFcnJvckZhY3RvcnksIHNjaGVkdWxlcikge1xuICAgIHZhciBlcnJvckZhY3RvcnkgPSBpc0Z1bmN0aW9uKGVycm9yT3JFcnJvckZhY3RvcnkpID8gZXJyb3JPckVycm9yRmFjdG9yeSA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVycm9yT3JFcnJvckZhY3Rvcnk7IH07XG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikgeyByZXR1cm4gc3Vic2NyaWJlci5lcnJvcihlcnJvckZhY3RvcnkoKSk7IH07XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKHNjaGVkdWxlciA/IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7IHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoaW5pdCwgMCwgc3Vic2NyaWJlcik7IH0gOiBpbml0KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRocm93RXJyb3IuanMubWFwIiwKICAgICJpbXBvcnQgeyBFTVBUWSB9IGZyb20gJy4vb2JzZXJ2YWJsZS9lbXB0eSc7XG5pbXBvcnQgeyBvZiB9IGZyb20gJy4vb2JzZXJ2YWJsZS9vZic7XG5pbXBvcnQgeyB0aHJvd0Vycm9yIH0gZnJvbSAnLi9vYnNlcnZhYmxlL3Rocm93RXJyb3InO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmV4cG9ydCB2YXIgTm90aWZpY2F0aW9uS2luZDtcbihmdW5jdGlvbiAoTm90aWZpY2F0aW9uS2luZCkge1xuICAgIE5vdGlmaWNhdGlvbktpbmRbXCJORVhUXCJdID0gXCJOXCI7XG4gICAgTm90aWZpY2F0aW9uS2luZFtcIkVSUk9SXCJdID0gXCJFXCI7XG4gICAgTm90aWZpY2F0aW9uS2luZFtcIkNPTVBMRVRFXCJdID0gXCJDXCI7XG59KShOb3RpZmljYXRpb25LaW5kIHx8IChOb3RpZmljYXRpb25LaW5kID0ge30pKTtcbnZhciBOb3RpZmljYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5vdGlmaWNhdGlvbihraW5kLCB2YWx1ZSwgZXJyb3IpIHtcbiAgICAgICAgdGhpcy5raW5kID0ga2luZDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMuaGFzVmFsdWUgPSBraW5kID09PSAnTic7XG4gICAgfVxuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUub2JzZXJ2ZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZU5vdGlmaWNhdGlvbih0aGlzLCBvYnNlcnZlcik7XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLmRvID0gZnVuY3Rpb24gKG5leHRIYW5kbGVyLCBlcnJvckhhbmRsZXIsIGNvbXBsZXRlSGFuZGxlcikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBraW5kID0gX2Eua2luZCwgdmFsdWUgPSBfYS52YWx1ZSwgZXJyb3IgPSBfYS5lcnJvcjtcbiAgICAgICAgcmV0dXJuIGtpbmQgPT09ICdOJyA/IG5leHRIYW5kbGVyID09PSBudWxsIHx8IG5leHRIYW5kbGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuZXh0SGFuZGxlcih2YWx1ZSkgOiBraW5kID09PSAnRScgPyBlcnJvckhhbmRsZXIgPT09IG51bGwgfHwgZXJyb3JIYW5kbGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvckhhbmRsZXIoZXJyb3IpIDogY29tcGxldGVIYW5kbGVyID09PSBudWxsIHx8IGNvbXBsZXRlSGFuZGxlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcGxldGVIYW5kbGVyKCk7XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uIChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIGlzRnVuY3Rpb24oKF9hID0gbmV4dE9yT2JzZXJ2ZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uZXh0KVxuICAgICAgICAgICAgPyB0aGlzLm9ic2VydmUobmV4dE9yT2JzZXJ2ZXIpXG4gICAgICAgICAgICA6IHRoaXMuZG8obmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLnRvT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywga2luZCA9IF9hLmtpbmQsIHZhbHVlID0gX2EudmFsdWUsIGVycm9yID0gX2EuZXJyb3I7XG4gICAgICAgIHZhciByZXN1bHQgPSBraW5kID09PSAnTidcbiAgICAgICAgICAgID9cbiAgICAgICAgICAgICAgICBvZih2YWx1ZSlcbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICBraW5kID09PSAnRSdcbiAgICAgICAgICAgICAgICAgICAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dFcnJvcihmdW5jdGlvbiAoKSB7IHJldHVybiBlcnJvcjsgfSlcbiAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAga2luZCA9PT0gJ0MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFTVBUWVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmV4cGVjdGVkIG5vdGlmaWNhdGlvbiBraW5kIFwiICsga2luZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdOJywgdmFsdWUpO1xuICAgIH07XG4gICAgTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICByZXR1cm4gbmV3IE5vdGlmaWNhdGlvbignRScsIHVuZGVmaW5lZCwgZXJyKTtcbiAgICB9O1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIE5vdGlmaWNhdGlvbi5jb21wbGV0ZU5vdGlmaWNhdGlvbjtcbiAgICB9O1xuICAgIE5vdGlmaWNhdGlvbi5jb21wbGV0ZU5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oJ0MnKTtcbiAgICByZXR1cm4gTm90aWZpY2F0aW9uO1xufSgpKTtcbmV4cG9ydCB7IE5vdGlmaWNhdGlvbiB9O1xuZXhwb3J0IGZ1bmN0aW9uIG9ic2VydmVOb3RpZmljYXRpb24obm90aWZpY2F0aW9uLCBvYnNlcnZlcikge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIHZhciBfZCA9IG5vdGlmaWNhdGlvbiwga2luZCA9IF9kLmtpbmQsIHZhbHVlID0gX2QudmFsdWUsIGVycm9yID0gX2QuZXJyb3I7XG4gICAgaWYgKHR5cGVvZiBraW5kICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG5vdGlmaWNhdGlvbiwgbWlzc2luZyBcImtpbmRcIicpO1xuICAgIH1cbiAgICBraW5kID09PSAnTicgPyAoX2EgPSBvYnNlcnZlci5uZXh0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChvYnNlcnZlciwgdmFsdWUpIDoga2luZCA9PT0gJ0UnID8gKF9iID0gb2JzZXJ2ZXIuZXJyb3IpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKG9ic2VydmVyLCBlcnJvcikgOiAoX2MgPSBvYnNlcnZlci5jb21wbGV0ZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmNhbGwob2JzZXJ2ZXIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm90aWZpY2F0aW9uLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgY3JlYXRlRXJyb3JDbGFzcyB9IGZyb20gJy4vY3JlYXRlRXJyb3JDbGFzcyc7XG5leHBvcnQgdmFyIEVtcHR5RXJyb3IgPSBjcmVhdGVFcnJvckNsYXNzKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gRW1wdHlFcnJvckltcGwoKSB7XG4gICAgICAgIF9zdXBlcih0aGlzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0VtcHR5RXJyb3InO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnbm8gZWxlbWVudHMgaW4gc2VxdWVuY2UnO1xuICAgIH07XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUVtcHR5RXJyb3IuanMubWFwIiwKICAgICJpbXBvcnQgeyBFbXB0eUVycm9yIH0gZnJvbSAnLi91dGlsL0VtcHR5RXJyb3InO1xuZXhwb3J0IGZ1bmN0aW9uIGxhc3RWYWx1ZUZyb20oc291cmNlLCBjb25maWcpIHtcbiAgICB2YXIgaGFzQ29uZmlnID0gdHlwZW9mIGNvbmZpZyA9PT0gJ29iamVjdCc7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIF9oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgX3ZhbHVlO1xuICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIF92YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIF9oYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IHJlamVjdCxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9oYXNWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF92YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhc0NvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNvbmZpZy5kZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFbXB0eUVycm9yKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGFzdFZhbHVlRnJvbS5qcy5tYXAiLAogICAgImltcG9ydCB7IG9wZXJhdGUgfSBmcm9tICcuLi91dGlsL2xpZnQnO1xuaW1wb3J0IHsgY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyIH0gZnJvbSAnLi9PcGVyYXRvclN1YnNjcmliZXInO1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChwcm9qZWN0LmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4KyspKTtcbiAgICAgICAgfSkpO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgaW5uZXJGcm9tIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9pbm5lckZyb20nO1xuaW1wb3J0IHsgZXhlY3V0ZVNjaGVkdWxlIH0gZnJvbSAnLi4vdXRpbC9leGVjdXRlU2NoZWR1bGUnO1xuaW1wb3J0IHsgY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyIH0gZnJvbSAnLi9PcGVyYXRvclN1YnNjcmliZXInO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlSW50ZXJuYWxzKHNvdXJjZSwgc3Vic2NyaWJlciwgcHJvamVjdCwgY29uY3VycmVudCwgb25CZWZvcmVOZXh0LCBleHBhbmQsIGlubmVyU3ViU2NoZWR1bGVyLCBhZGRpdGlvbmFsRmluYWxpemVyKSB7XG4gICAgdmFyIGJ1ZmZlciA9IFtdO1xuICAgIHZhciBhY3RpdmUgPSAwO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGlzQ29tcGxldGUgPSBmYWxzZTtcbiAgICB2YXIgY2hlY2tDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGlzQ29tcGxldGUgJiYgIWJ1ZmZlci5sZW5ndGggJiYgIWFjdGl2ZSkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgb3V0ZXJOZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiAoYWN0aXZlIDwgY29uY3VycmVudCA/IGRvSW5uZXJTdWIodmFsdWUpIDogYnVmZmVyLnB1c2godmFsdWUpKTsgfTtcbiAgICB2YXIgZG9Jbm5lclN1YiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBleHBhbmQgJiYgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgYWN0aXZlKys7XG4gICAgICAgIHZhciBpbm5lckNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIGlubmVyRnJvbShwcm9qZWN0KHZhbHVlLCBpbmRleCsrKSkuc3Vic2NyaWJlKGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBmdW5jdGlvbiAoaW5uZXJWYWx1ZSkge1xuICAgICAgICAgICAgb25CZWZvcmVOZXh0ID09PSBudWxsIHx8IG9uQmVmb3JlTmV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25CZWZvcmVOZXh0KGlubmVyVmFsdWUpO1xuICAgICAgICAgICAgaWYgKGV4cGFuZCkge1xuICAgICAgICAgICAgICAgIG91dGVyTmV4dChpbm5lclZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChpbm5lclZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaW5uZXJDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIH0sIHVuZGVmaW5lZCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGlubmVyQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmUtLTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyZWRWYWx1ZSA9IGJ1ZmZlci5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyU3ViU2NoZWR1bGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZVNjaGVkdWxlKHN1YnNjcmliZXIsIGlubmVyU3ViU2NoZWR1bGVyLCBmdW5jdGlvbiAoKSB7IHJldHVybiBkb0lubmVyU3ViKGJ1ZmZlcmVkVmFsdWUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvSW5uZXJTdWIoYnVmZmVyZWRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChidWZmZXIubGVuZ3RoICYmIGFjdGl2ZSA8IGNvbmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb29wXzEoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjaGVja0NvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH07XG4gICAgc291cmNlLnN1YnNjcmliZShjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIoc3Vic2NyaWJlciwgb3V0ZXJOZXh0LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICBjaGVja0NvbXBsZXRlKCk7XG4gICAgfSkpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFkZGl0aW9uYWxGaW5hbGl6ZXIgPT09IG51bGwgfHwgYWRkaXRpb25hbEZpbmFsaXplciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWRkaXRpb25hbEZpbmFsaXplcigpO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZUludGVybmFscy5qcy5tYXAiLAogICAgImltcG9ydCB7IG1hcCB9IGZyb20gJy4vbWFwJztcbmltcG9ydCB7IGlubmVyRnJvbSB9IGZyb20gJy4uL29ic2VydmFibGUvaW5uZXJGcm9tJztcbmltcG9ydCB7IG9wZXJhdGUgfSBmcm9tICcuLi91dGlsL2xpZnQnO1xuaW1wb3J0IHsgbWVyZ2VJbnRlcm5hbHMgfSBmcm9tICcuL21lcmdlSW50ZXJuYWxzJztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuLi91dGlsL2lzRnVuY3Rpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlTWFwKHByb2plY3QsIHJlc3VsdFNlbGVjdG9yLCBjb25jdXJyZW50KSB7XG4gICAgaWYgKGNvbmN1cnJlbnQgPT09IHZvaWQgMCkgeyBjb25jdXJyZW50ID0gSW5maW5pdHk7IH1cbiAgICBpZiAoaXNGdW5jdGlvbihyZXN1bHRTZWxlY3RvcikpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlTWFwKGZ1bmN0aW9uIChhLCBpKSB7IHJldHVybiBtYXAoZnVuY3Rpb24gKGIsIGlpKSB7IHJldHVybiByZXN1bHRTZWxlY3RvcihhLCBiLCBpLCBpaSk7IH0pKGlubmVyRnJvbShwcm9qZWN0KGEsIGkpKSk7IH0sIGNvbmN1cnJlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgcmVzdWx0U2VsZWN0b3IgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbmN1cnJlbnQgPSByZXN1bHRTZWxlY3RvcjtcbiAgICB9XG4gICAgcmV0dXJuIG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikgeyByZXR1cm4gbWVyZ2VJbnRlcm5hbHMoc291cmNlLCBzdWJzY3JpYmVyLCBwcm9qZWN0LCBjb25jdXJyZW50KTsgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXAiLAogICAgImltcG9ydCB7IG1lcmdlTWFwIH0gZnJvbSAnLi9tZXJnZU1hcCc7XG5pbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4uL3V0aWwvaWRlbnRpdHknO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlQWxsKGNvbmN1cnJlbnQpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7IGNvbmN1cnJlbnQgPSBJbmZpbml0eTsgfVxuICAgIHJldHVybiBtZXJnZU1hcChpZGVudGl0eSwgY29uY3VycmVudCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZUFsbC5qcy5tYXAiLAogICAgImltcG9ydCB7IG1lcmdlQWxsIH0gZnJvbSAnLi9tZXJnZUFsbCc7XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0QWxsKCkge1xuICAgIHJldHVybiBtZXJnZUFsbCgxKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmNhdEFsbC5qcy5tYXAiLAogICAgImltcG9ydCB7IGNvbmNhdEFsbCB9IGZyb20gJy4uL29wZXJhdG9ycy9jb25jYXRBbGwnO1xuaW1wb3J0IHsgcG9wU2NoZWR1bGVyIH0gZnJvbSAnLi4vdXRpbC9hcmdzJztcbmltcG9ydCB7IGZyb20gfSBmcm9tICcuL2Zyb20nO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdCgpIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbmNhdEFsbCgpKGZyb20oYXJncywgcG9wU2NoZWR1bGVyKGFyZ3MpKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25jYXQuanMubWFwIiwKICAgICJpbXBvcnQgeyBvcGVyYXRlIH0gZnJvbSAnLi4vdXRpbC9saWZ0JztcbmltcG9ydCB7IGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlciB9IGZyb20gJy4vT3BlcmF0b3JTdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXIocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHByZWRpY2F0ZS5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCsrKSAmJiBzdWJzY3JpYmVyLm5leHQodmFsdWUpOyB9KSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWx0ZXIuanMubWFwIiwKICAgICJpbXBvcnQgeyBpbm5lckZyb20gfSBmcm9tICcuLi9vYnNlcnZhYmxlL2lubmVyRnJvbSc7XG5pbXBvcnQgeyBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIgfSBmcm9tICcuL09wZXJhdG9yU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBvcGVyYXRlIH0gZnJvbSAnLi4vdXRpbC9saWZ0JztcbmV4cG9ydCBmdW5jdGlvbiBjYXRjaEVycm9yKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgaW5uZXJTdWIgPSBudWxsO1xuICAgICAgICB2YXIgc3luY1Vuc3ViID0gZmFsc2U7XG4gICAgICAgIHZhciBoYW5kbGVkUmVzdWx0O1xuICAgICAgICBpbm5lclN1YiA9IHNvdXJjZS5zdWJzY3JpYmUoY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBoYW5kbGVkUmVzdWx0ID0gaW5uZXJGcm9tKHNlbGVjdG9yKGVyciwgY2F0Y2hFcnJvcihzZWxlY3Rvcikoc291cmNlKSkpO1xuICAgICAgICAgICAgaWYgKGlubmVyU3ViKSB7XG4gICAgICAgICAgICAgICAgaW5uZXJTdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICBpbm5lclN1YiA9IG51bGw7XG4gICAgICAgICAgICAgICAgaGFuZGxlZFJlc3VsdC5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzeW5jVW5zdWIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGlmIChzeW5jVW5zdWIpIHtcbiAgICAgICAgICAgIGlubmVyU3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBpbm5lclN1YiA9IG51bGw7XG4gICAgICAgICAgICBoYW5kbGVkUmVzdWx0LnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2hFcnJvci5qcy5tYXAiLAogICAgImltcG9ydCB7IG9wZXJhdGUgfSBmcm9tICcuLi91dGlsL2xpZnQnO1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmFsaXplKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuYWRkKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluYWxpemUuanMubWFwIiwKICAgICJpbXBvcnQgeyBOb3RpZmljYXRpb24gfSBmcm9tICcuLi9Ob3RpZmljYXRpb24nO1xuaW1wb3J0IHsgb3BlcmF0ZSB9IGZyb20gJy4uL3V0aWwvbGlmdCc7XG5pbXBvcnQgeyBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIgfSBmcm9tICcuL09wZXJhdG9yU3Vic2NyaWJlcic7XG5leHBvcnQgZnVuY3Rpb24gbWF0ZXJpYWxpemUoKSB7XG4gICAgcmV0dXJuIG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikge1xuICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKGNyZWF0ZU9wZXJhdG9yU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChOb3RpZmljYXRpb24uY3JlYXRlTmV4dCh2YWx1ZSkpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yKGVycikpO1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9KSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXRlcmlhbGl6ZS5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fcmVhZCwgX19zcHJlYWRBcnJheSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaW5uZXJGcm9tIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9pbm5lckZyb20nO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJy4uL1N1YmplY3QnO1xuaW1wb3J0IHsgU2FmZVN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IG9wZXJhdGUgfSBmcm9tICcuLi91dGlsL2xpZnQnO1xuZXhwb3J0IGZ1bmN0aW9uIHNoYXJlKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgIHZhciBfYSA9IG9wdGlvbnMuY29ubmVjdG9yLCBjb25uZWN0b3IgPSBfYSA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFN1YmplY3QoKTsgfSA6IF9hLCBfYiA9IG9wdGlvbnMucmVzZXRPbkVycm9yLCByZXNldE9uRXJyb3IgPSBfYiA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9iLCBfYyA9IG9wdGlvbnMucmVzZXRPbkNvbXBsZXRlLCByZXNldE9uQ29tcGxldGUgPSBfYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9jLCBfZCA9IG9wdGlvbnMucmVzZXRPblJlZkNvdW50WmVybywgcmVzZXRPblJlZkNvdW50WmVybyA9IF9kID09PSB2b2lkIDAgPyB0cnVlIDogX2Q7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh3cmFwcGVyU291cmNlKSB7XG4gICAgICAgIHZhciBjb25uZWN0aW9uO1xuICAgICAgICB2YXIgcmVzZXRDb25uZWN0aW9uO1xuICAgICAgICB2YXIgc3ViamVjdDtcbiAgICAgICAgdmFyIHJlZkNvdW50ID0gMDtcbiAgICAgICAgdmFyIGhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgaGFzRXJyb3JlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgY2FuY2VsUmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNldENvbm5lY3Rpb24gPT09IG51bGwgfHwgcmVzZXRDb25uZWN0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNldENvbm5lY3Rpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHJlc2V0Q29ubmVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FuY2VsUmVzZXQoKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24gPSBzdWJqZWN0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaGFzQ29tcGxldGVkID0gaGFzRXJyb3JlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcmVzZXRBbmRVbnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb25uID0gY29ubmVjdGlvbjtcbiAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgICAgICBjb25uID09PSBudWxsIHx8IGNvbm4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbm4udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgcmVmQ291bnQrKztcbiAgICAgICAgICAgIGlmICghaGFzRXJyb3JlZCAmJiAhaGFzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsUmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZXN0ID0gKHN1YmplY3QgPSBzdWJqZWN0ICE9PSBudWxsICYmIHN1YmplY3QgIT09IHZvaWQgMCA/IHN1YmplY3QgOiBjb25uZWN0b3IoKSk7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVmQ291bnQtLTtcbiAgICAgICAgICAgICAgICBpZiAocmVmQ291bnQgPT09IDAgJiYgIWhhc0Vycm9yZWQgJiYgIWhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXNldENvbm5lY3Rpb24gPSBoYW5kbGVSZXNldChyZXNldEFuZFVuc3Vic2NyaWJlLCByZXNldE9uUmVmQ291bnRaZXJvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlc3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uICYmXG4gICAgICAgICAgICAgICAgcmVmQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IG5ldyBTYWZlU3Vic2NyaWJlcih7XG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gZGVzdC5uZXh0KHZhbHVlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0Vycm9yZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsUmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q29ubmVjdGlvbiA9IGhhbmRsZVJlc2V0KHJlc2V0LCByZXNldE9uRXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0LmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsUmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q29ubmVjdGlvbiA9IGhhbmRsZVJlc2V0KHJlc2V0LCByZXNldE9uQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdC5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlubmVyRnJvbShzb3VyY2UpLnN1YnNjcmliZShjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkod3JhcHBlclNvdXJjZSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGhhbmRsZVJlc2V0KHJlc2V0LCBvbikge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgaWYgKG9uID09PSB0cnVlKSB7XG4gICAgICAgIHJlc2V0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG9uID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBvblN1YnNjcmliZXIgPSBuZXcgU2FmZVN1YnNjcmliZXIoe1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvblN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIGlubmVyRnJvbShvbi5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmdzKSkpKS5zdWJzY3JpYmUob25TdWJzY3JpYmVyKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYXJlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgUmVwbGF5U3ViamVjdCB9IGZyb20gJy4uL1JlcGxheVN1YmplY3QnO1xuaW1wb3J0IHsgc2hhcmUgfSBmcm9tICcuL3NoYXJlJztcbmV4cG9ydCBmdW5jdGlvbiBzaGFyZVJlcGxheShjb25maWdPckJ1ZmZlclNpemUsIHdpbmRvd1RpbWUsIHNjaGVkdWxlcikge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIHZhciBidWZmZXJTaXplO1xuICAgIHZhciByZWZDb3VudCA9IGZhbHNlO1xuICAgIGlmIChjb25maWdPckJ1ZmZlclNpemUgJiYgdHlwZW9mIGNvbmZpZ09yQnVmZmVyU2l6ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgKF9hID0gY29uZmlnT3JCdWZmZXJTaXplLmJ1ZmZlclNpemUsIGJ1ZmZlclNpemUgPSBfYSA9PT0gdm9pZCAwID8gSW5maW5pdHkgOiBfYSwgX2IgPSBjb25maWdPckJ1ZmZlclNpemUud2luZG93VGltZSwgd2luZG93VGltZSA9IF9iID09PSB2b2lkIDAgPyBJbmZpbml0eSA6IF9iLCBfYyA9IGNvbmZpZ09yQnVmZmVyU2l6ZS5yZWZDb3VudCwgcmVmQ291bnQgPSBfYyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYywgc2NoZWR1bGVyID0gY29uZmlnT3JCdWZmZXJTaXplLnNjaGVkdWxlcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBidWZmZXJTaXplID0gKGNvbmZpZ09yQnVmZmVyU2l6ZSAhPT0gbnVsbCAmJiBjb25maWdPckJ1ZmZlclNpemUgIT09IHZvaWQgMCA/IGNvbmZpZ09yQnVmZmVyU2l6ZSA6IEluZmluaXR5KTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYXJlKHtcbiAgICAgICAgY29ubmVjdG9yOiBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpOyB9LFxuICAgICAgICByZXNldE9uRXJyb3I6IHRydWUsXG4gICAgICAgIHJlc2V0T25Db21wbGV0ZTogZmFsc2UsXG4gICAgICAgIHJlc2V0T25SZWZDb3VudFplcm86IHJlZkNvdW50LFxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcmVSZXBsYXkuanMubWFwIiwKICAgICJpbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IG9wZXJhdGUgfSBmcm9tICcuLi91dGlsL2xpZnQnO1xuaW1wb3J0IHsgY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyIH0gZnJvbSAnLi9PcGVyYXRvclN1YnNjcmliZXInO1xuaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tICcuLi91dGlsL2lkZW50aXR5JztcbmV4cG9ydCBmdW5jdGlvbiB0YXAob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgIHZhciB0YXBPYnNlcnZlciA9IGlzRnVuY3Rpb24ob2JzZXJ2ZXJPck5leHQpIHx8IGVycm9yIHx8IGNvbXBsZXRlXG4gICAgICAgID9cbiAgICAgICAgICAgIHsgbmV4dDogb2JzZXJ2ZXJPck5leHQsIGVycm9yOiBlcnJvciwgY29tcGxldGU6IGNvbXBsZXRlIH1cbiAgICAgICAgOiBvYnNlcnZlck9yTmV4dDtcbiAgICByZXR1cm4gdGFwT2JzZXJ2ZXJcbiAgICAgICAgPyBvcGVyYXRlKGZ1bmN0aW9uIChzb3VyY2UsIHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIChfYSA9IHRhcE9ic2VydmVyLnN1YnNjcmliZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwodGFwT2JzZXJ2ZXIpO1xuICAgICAgICAgICAgdmFyIGlzVW5zdWIgPSB0cnVlO1xuICAgICAgICAgICAgc291cmNlLnN1YnNjcmliZShjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIoc3Vic2NyaWJlciwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIChfYSA9IHRhcE9ic2VydmVyLm5leHQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHRhcE9ic2VydmVyLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgaXNVbnN1YiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIChfYSA9IHRhcE9ic2VydmVyLmNvbXBsZXRlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbCh0YXBPYnNlcnZlcik7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICBpc1Vuc3ViID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgKF9hID0gdGFwT2JzZXJ2ZXIuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKHRhcE9ic2VydmVyLCBlcnIpO1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIGlmIChpc1Vuc3ViKSB7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRhcE9ic2VydmVyLnVuc3Vic2NyaWJlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbCh0YXBPYnNlcnZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIChfYiA9IHRhcE9ic2VydmVyLmZpbmFsaXplKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbCh0YXBPYnNlcnZlcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pXG4gICAgICAgIDpcbiAgICAgICAgICAgIGlkZW50aXR5O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFwLmpzLm1hcCIsCiAgICAiZXhwb3J0IGNvbnN0IF9fREVWX18gPSBnbG9iYWxUaGlzLl9fREVWX18gPT09IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLAogICAgImV4cG9ydCBmdW5jdGlvbiBtYXliZSh0aHVuaykge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0aHVuaygpO1xuICAgIH1cbiAgICBjYXRjaCB7IH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1heWJlLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgbWF5YmUgfSBmcm9tIFwiLi9tYXliZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgKC8vIFdlIGRvbid0IGV4cGVjdCB0aGUgRnVuY3Rpb24gY29uc3RydWN0b3IgZXZlciB0byBiZSBpbnZva2VkIGF0IHJ1bnRpbWUsIGFzXG4vLyBsb25nIGFzIGF0IGxlYXN0IG9uZSBvZiBnbG9iYWxUaGlzLCB3aW5kb3csIHNlbGYsIG9yIGdsb2JhbCBpcyBkZWZpbmVkLCBzb1xuLy8gd2UgYXJlIHVuZGVyIG5vIG9ibGlnYXRpb24gdG8gbWFrZSBpdCBlYXN5IGZvciBzdGF0aWMgYW5hbHlzaXMgdG9vbHMgdG9cbm1heWJlKCgpID0+IGdsb2JhbFRoaXMpIHx8XG4gICAgbWF5YmUoKCkgPT4gd2luZG93KSB8fFxuICAgIG1heWJlKCgpID0+IHNlbGYpIHx8XG4gICAgbWF5YmUoKCkgPT4gZ2xvYmFsKSB8fCAvLyBkZXRlY3Qgc3ludGFjdGljIHVzYWdlIG9mIHRoZSBGdW5jdGlvbiBjb25zdHJ1Y3Rvci4gSWYgeW91IHRoaW5rIHlvdSBjYW5cbi8vIGltcHJvdmUgeW91ciBzdGF0aWMgYW5hbHlzaXMgdG8gZGV0ZWN0IHRoaXMgb2JmdXNjYXRpb24sIHRoaW5rIGFnYWluLiBUaGlzXG4vLyBpcyBhbiBhcm1zIHJhY2UgeW91IGNhbm5vdCB3aW4sIGF0IGxlYXN0IG5vdCBpbiBKYXZhU2NyaXB0LlxubWF5YmUoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBtYXliZS5jb25zdHJ1Y3RvcihcInJldHVybiB0aGlzXCIpKCk7XG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nbG9iYWwuanMubWFwXG4iLAogICAgImV4cG9ydCBjb25zdCB2ZXJzaW9uID0gXCI0LjAuMFwiO1xuZXhwb3J0IGNvbnN0IGJ1aWxkID0gXCJlc21cIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZlcnNpb24uanMubWFwXG4iLAogICAgImNvbnN0IHByZWZpeENvdW50cyA9IG5ldyBNYXAoKTtcbi8qKlxuKiBUaGVzZSBJRHMgd29uJ3QgYmUgZ2xvYmFsbHkgdW5pcXVlLCBidXQgdGhleSB3aWxsIGJlIHVuaXF1ZSB3aXRoaW4gdGhpc1xuKiBwcm9jZXNzLCB0aGFua3MgdG8gdGhlIGNvdW50ZXIsIGFuZCB1bmd1ZXNzYWJsZSB0aGFua3MgdG8gdGhlIHJhbmRvbSBzdWZmaXguXG4qXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlVW5pcXVlSWQocHJlZml4KSB7XG4gICAgY29uc3QgY291bnQgPSBwcmVmaXhDb3VudHMuZ2V0KHByZWZpeCkgfHwgMTtcbiAgICBwcmVmaXhDb3VudHMuc2V0KHByZWZpeCwgY291bnQgKyAxKTtcbiAgICByZXR1cm4gYCR7cHJlZml4fToke2NvdW50fToke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpfWA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYWtlVW5pcXVlSWQuanMubWFwXG4iLAogICAgImltcG9ydCB7IG1ha2VVbmlxdWVJZCB9IGZyb20gXCIuL21ha2VVbmlxdWVJZC5qc1wiO1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlGb3JEaXNwbGF5KHZhbHVlLCBzcGFjZSA9IDApIHtcbiAgICBjb25zdCB1bmRlZklkID0gbWFrZVVuaXF1ZUlkKFwic3RyaW5naWZ5Rm9yRGlzcGxheVwiKTtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUsIChfLCB2YWx1ZSkgPT4ge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHZvaWQgMCA/IHVuZGVmSWQgOiB2YWx1ZTtcbiAgICB9LCBzcGFjZSlcbiAgICAgICAgLnNwbGl0KEpTT04uc3RyaW5naWZ5KHVuZGVmSWQpKVxuICAgICAgICAuam9pbihcIjx1bmRlZmluZWQ+XCIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5naWZ5Rm9yRGlzcGxheS5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgX19ERVZfXyB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZW52aXJvbm1lbnRcIjtcbmltcG9ydCB7IGdsb2JhbCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZ2xvYmFsc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi8uLi92ZXJzaW9uLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbG9jYWwtcnVsZXMvaW1wb3J0LWZyb20taW5zaWRlLW90aGVyLWV4cG9ydFxuaW1wb3J0IHsgc3RyaW5naWZ5Rm9yRGlzcGxheSB9IGZyb20gXCIuLi9pbnRlcm5hbC9zdHJpbmdpZnlGb3JEaXNwbGF5LmpzXCI7XG5jb25zdCBnZW5lcmljTWVzc2FnZSA9IFwiSW52YXJpYW50IFZpb2xhdGlvblwiO1xuZXhwb3J0IGNsYXNzIEludmFyaWFudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSBnZW5lcmljTWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gZ2VuZXJpY01lc3NhZ2U7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBJbnZhcmlhbnRFcnJvci5wcm90b3R5cGUpO1xuICAgIH1cbn1cbmNvbnN0IHZlcmJvc2l0eUxldmVscyA9IFtcImRlYnVnXCIsIFwibG9nXCIsIFwid2FyblwiLCBcImVycm9yXCIsIFwic2lsZW50XCJdO1xubGV0IHZlcmJvc2l0eUxldmVsID0gdmVyYm9zaXR5TGV2ZWxzLmluZGV4T2YoX19ERVZfXyA/IFwibG9nXCIgOiBcInNpbGVudFwiKTtcbmV4cG9ydCBmdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCAuLi5hcmdzKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3SW52YXJpYW50RXJyb3IoLi4uYXJncyk7XG4gICAgfVxufVxuZnVuY3Rpb24gd3JhcENvbnNvbGVNZXRob2QobmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAobWVzc2FnZSwgLi4uYXJncykge1xuICAgICAgICBpZiAodmVyYm9zaXR5TGV2ZWxzLmluZGV4T2YobmFtZSkgPj0gdmVyYm9zaXR5TGV2ZWwpIHtcbiAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gY29uc29sZS5sb2cgaWYgdGhpcyBob3N0IGVudmlyb25tZW50IGhhcHBlbnMgbm90IHRvIHByb3ZpZGVcbiAgICAgICAgICAgIC8vIGFsbCB0aGUgY29uc29sZS4qIG1ldGhvZHMgd2UgbmVlZC5cbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9IGNvbnNvbGVbbmFtZV0gfHwgY29uc29sZS5sb2c7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcmcwID0gbWVzc2FnZTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gZ2V0SGFuZGxlZEVycm9yTXNnKGFyZzApO1xuICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gZ2V0RmFsbGJhY2tFcnJvck1zZyhhcmcwLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1ldGhvZChtZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5pbnZhcmlhbnQuZGVidWcgPSB3cmFwQ29uc29sZU1ldGhvZChcImRlYnVnXCIpO1xuaW52YXJpYW50LmxvZyA9IHdyYXBDb25zb2xlTWV0aG9kKFwibG9nXCIpO1xuaW52YXJpYW50Lndhcm4gPSB3cmFwQ29uc29sZU1ldGhvZChcIndhcm5cIik7XG5pbnZhcmlhbnQuZXJyb3IgPSB3cmFwQ29uc29sZU1ldGhvZChcImVycm9yXCIpO1xuZXhwb3J0IGZ1bmN0aW9uIHNldFZlcmJvc2l0eShsZXZlbCkge1xuICAgIGNvbnN0IG9sZCA9IHZlcmJvc2l0eUxldmVsc1t2ZXJib3NpdHlMZXZlbF07XG4gICAgdmVyYm9zaXR5TGV2ZWwgPSBNYXRoLm1heCgwLCB2ZXJib3NpdHlMZXZlbHMuaW5kZXhPZihsZXZlbCkpO1xuICAgIHJldHVybiBvbGQ7XG59XG4vKipcbiAqIFJldHVybnMgYW4gSW52YXJpYW50RXJyb3IuXG4gKlxuICogYG1lc3NhZ2VgIGNhbiBvbmx5IGJlIGEgc3RyaW5nLCBhIGNvbmNhdGVuYXRpb24gb2Ygc3RyaW5ncywgb3IgYSB0ZXJuYXJ5IHN0YXRlbWVudFxuICogdGhhdCByZXN1bHRzIGluIGEgc3RyaW5nLiBUaGlzIHdpbGwgYmUgZW5mb3JjZWQgb24gYnVpbGQsIHdoZXJlIHRoZSBtZXNzYWdlIHdpbGxcbiAqIGJlIHJlcGxhY2VkIHdpdGggYSBtZXNzYWdlIG51bWJlci5cbiAqIFN0cmluZyBzdWJzdGl0dXRpb25zIHdpdGggJXMgYXJlIHN1cHBvcnRlZCBhbmQgd2lsbCBhbHNvIHJldHVyblxuICogcHJldHR5LXN0cmluZ2lmaWVkIG9iamVjdHMuXG4gKiBFeGNlc3MgYG9wdGlvbmFsUGFyYW1zYCB3aWxsIGJlIHN3YWxsb3dlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5ld0ludmFyaWFudEVycm9yKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBJbnZhcmlhbnRFcnJvcihnZXRIYW5kbGVkRXJyb3JNc2cobWVzc2FnZSwgb3B0aW9uYWxQYXJhbXMpIHx8XG4gICAgICAgIGdldEZhbGxiYWNrRXJyb3JNc2cobWVzc2FnZSwgb3B0aW9uYWxQYXJhbXMpKTtcbn1cbi8vIFRoaXMgaXMgZHVwbGljYXRlZCBiZXR3ZWVuIGBAYXBvbGxvL2NsaWVudC9kZXZgIGFuZCBgQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudGAgdG8gcHJldmVudCBjaXJjdWxhciByZWZlcmVuY2VzLlxuZXhwb3J0IGNvbnN0IEFwb2xsb0Vycm9yTWVzc2FnZUhhbmRsZXIgPSBTeW1ib2wuZm9yKFwiQXBvbGxvRXJyb3JNZXNzYWdlSGFuZGxlcl9cIiArIHZlcnNpb24pO1xuZnVuY3Rpb24gc3RyaW5naWZ5KGFyZykge1xuICAgIGlmICh0eXBlb2YgYXJnID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIGFyZztcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ2lmeUZvckRpc3BsYXkoYXJnLCAyKS5zbGljZSgwLCAxMDAwKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gXCI8bm9uLXNlcmlhbGl6YWJsZT5cIjtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRIYW5kbGVkRXJyb3JNc2cobWVzc2FnZSwgbWVzc2FnZUFyZ3MgPSBbXSkge1xuICAgIGlmICghbWVzc2FnZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHJldHVybiAoZ2xvYmFsW0Fwb2xsb0Vycm9yTWVzc2FnZUhhbmRsZXJdICYmXG4gICAgICAgIGdsb2JhbFtBcG9sbG9FcnJvck1lc3NhZ2VIYW5kbGVyXShtZXNzYWdlLCBtZXNzYWdlQXJncy5tYXAoc3RyaW5naWZ5KSkpO1xufVxuZnVuY3Rpb24gZ2V0RmFsbGJhY2tFcnJvck1zZyhtZXNzYWdlLCBtZXNzYWdlQXJncyA9IFtdKSB7XG4gICAgaWYgKCFtZXNzYWdlKVxuICAgICAgICByZXR1cm47XG4gICAgcmV0dXJuIGBBbiBlcnJvciBvY2N1cnJlZCEgRm9yIG1vcmUgZGV0YWlscywgc2VlIHRoZSBmdWxsIGVycm9yIHRleHQgYXQgaHR0cHM6Ly9nby5hcG9sbG8uZGV2L2MvZXJyIyR7ZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdmVyc2lvbixcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgYXJnczogbWVzc2FnZUFyZ3MubWFwKHN0cmluZ2lmeSksXG4gICAgfSkpfWA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLAogICAgImltcG9ydCB7IEtpbmQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgbmV3SW52YXJpYW50RXJyb3IgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24oYXJnT2JqLCBuYW1lLCB2YWx1ZSwgdmFyaWFibGVzKSB7XG4gICAgaWYgKHZhbHVlLmtpbmQgPT09IEtpbmQuSU5UIHx8IHZhbHVlLmtpbmQgPT09IEtpbmQuRkxPQVQpIHtcbiAgICAgICAgYXJnT2JqW25hbWUudmFsdWVdID0gTnVtYmVyKHZhbHVlLnZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUua2luZCA9PT0gS2luZC5CT09MRUFOIHx8IHZhbHVlLmtpbmQgPT09IEtpbmQuU1RSSU5HKSB7XG4gICAgICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZS5raW5kID09PSBLaW5kLk9CSkVDVCkge1xuICAgICAgICBjb25zdCBuZXN0ZWRBcmdPYmogPSB7fTtcbiAgICAgICAgdmFsdWUuZmllbGRzLm1hcCgob2JqKSA9PiB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24obmVzdGVkQXJnT2JqLCBvYmoubmFtZSwgb2JqLnZhbHVlLCB2YXJpYWJsZXMpKTtcbiAgICAgICAgYXJnT2JqW25hbWUudmFsdWVdID0gbmVzdGVkQXJnT2JqO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZS5raW5kID09PSBLaW5kLlZBUklBQkxFKSB7XG4gICAgICAgIGNvbnN0IHZhcmlhYmxlVmFsdWUgPSAodmFyaWFibGVzIHx8IHt9KVt2YWx1ZS5uYW1lLnZhbHVlXTtcbiAgICAgICAgYXJnT2JqW25hbWUudmFsdWVdID0gdmFyaWFibGVWYWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUua2luZCA9PT0gS2luZC5MSVNUKSB7XG4gICAgICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IHZhbHVlLnZhbHVlcy5tYXAoKGxpc3RWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmVzdGVkQXJnQXJyYXlPYmogPSB7fTtcbiAgICAgICAgICAgIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihuZXN0ZWRBcmdBcnJheU9iaiwgbmFtZSwgbGlzdFZhbHVlLCB2YXJpYWJsZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5lc3RlZEFyZ0FycmF5T2JqW25hbWUudmFsdWVdO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUua2luZCA9PT0gS2luZC5FTlVNKSB7XG4gICAgICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZS5raW5kID09PSBLaW5kLk5VTEwpIHtcbiAgICAgICAgYXJnT2JqW25hbWUudmFsdWVdID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ld0ludmFyaWFudEVycm9yKDE5LCBuYW1lLnZhbHVlLCB2YWx1ZS5raW5kKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24uanMubWFwXG4iLAogICAgImltcG9ydCB7IHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbiB9IGZyb20gXCIuL3ZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbi5qc1wiO1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQoZmllbGQsIHZhcmlhYmxlcykge1xuICAgIGlmIChmaWVsZC5hcmd1bWVudHMgJiYgZmllbGQuYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBhcmdPYmogPSB7fTtcbiAgICAgICAgZmllbGQuYXJndW1lbnRzLmZvckVhY2goKHsgbmFtZSwgdmFsdWUgfSkgPT4gdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKGFyZ09iaiwgbmFtZSwgdmFsdWUsIHZhcmlhYmxlcykpO1xuICAgICAgICByZXR1cm4gYXJnT2JqO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFyZ3VtZW50c09iamVjdEZyb21GaWVsZC5qcy5tYXBcbiIsCiAgICAiZnVuY3Rpb24gZGVmYXVsdERpc3Bvc2UoKSB7IH1cbmV4cG9ydCBjbGFzcyBTdHJvbmdDYWNoZSB7XG4gICAgY29uc3RydWN0b3IobWF4ID0gSW5maW5pdHksIGRpc3Bvc2UgPSBkZWZhdWx0RGlzcG9zZSkge1xuICAgICAgICB0aGlzLm1heCA9IG1heDtcbiAgICAgICAgdGhpcy5kaXNwb3NlID0gZGlzcG9zZTtcbiAgICAgICAgdGhpcy5tYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMubmV3ZXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5vbGRlc3QgPSBudWxsO1xuICAgIH1cbiAgICBoYXMoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5oYXMoa2V5KTtcbiAgICB9XG4gICAgZ2V0KGtleSkge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5nZXROb2RlKGtleSk7XG4gICAgICAgIHJldHVybiBub2RlICYmIG5vZGUudmFsdWU7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuc2l6ZTtcbiAgICB9XG4gICAgZ2V0Tm9kZShrZXkpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubWFwLmdldChrZXkpO1xuICAgICAgICBpZiAobm9kZSAmJiBub2RlICE9PSB0aGlzLm5ld2VzdCkge1xuICAgICAgICAgICAgY29uc3QgeyBvbGRlciwgbmV3ZXIgfSA9IG5vZGU7XG4gICAgICAgICAgICBpZiAobmV3ZXIpIHtcbiAgICAgICAgICAgICAgICBuZXdlci5vbGRlciA9IG9sZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgb2xkZXIubmV3ZXIgPSBuZXdlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUub2xkZXIgPSB0aGlzLm5ld2VzdDtcbiAgICAgICAgICAgIG5vZGUub2xkZXIubmV3ZXIgPSBub2RlO1xuICAgICAgICAgICAgbm9kZS5uZXdlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdCA9IG5vZGU7XG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gdGhpcy5vbGRlc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9sZGVzdCA9IG5ld2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBsZXQgbm9kZSA9IHRoaXMuZ2V0Tm9kZShrZXkpO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0ge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBuZXdlcjogbnVsbCxcbiAgICAgICAgICAgIG9sZGVyOiB0aGlzLm5ld2VzdFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5uZXdlc3QpIHtcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0Lm5ld2VyID0gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5ld2VzdCA9IG5vZGU7XG4gICAgICAgIHRoaXMub2xkZXN0ID0gdGhpcy5vbGRlc3QgfHwgbm9kZTtcbiAgICAgICAgdGhpcy5tYXAuc2V0KGtleSwgbm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlLnZhbHVlO1xuICAgIH1cbiAgICBjbGVhbigpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMub2xkZXN0ICYmIHRoaXMubWFwLnNpemUgPiB0aGlzLm1heCkge1xuICAgICAgICAgICAgdGhpcy5kZWxldGUodGhpcy5vbGRlc3Qua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWxldGUoa2V5KSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm1hcC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIGlmIChub2RlID09PSB0aGlzLm5ld2VzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmV3ZXN0ID0gbm9kZS5vbGRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlID09PSB0aGlzLm9sZGVzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMub2xkZXN0ID0gbm9kZS5uZXdlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlLm5ld2VyKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5uZXdlci5vbGRlciA9IG5vZGUub2xkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS5vbGRlcikge1xuICAgICAgICAgICAgICAgIG5vZGUub2xkZXIubmV3ZXIgPSBub2RlLm5ld2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXAuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2Uobm9kZS52YWx1ZSwga2V5KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHJvbmcuanMubWFwIiwKICAgICJmdW5jdGlvbiBub29wKCkgeyB9XG5jb25zdCBkZWZhdWx0RGlzcG9zZSA9IG5vb3A7XG5jb25zdCBfV2Vha1JlZiA9IHR5cGVvZiBXZWFrUmVmICE9PSBcInVuZGVmaW5lZFwiXG4gICAgPyBXZWFrUmVmXG4gICAgOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHsgZGVyZWY6ICgpID0+IHZhbHVlIH07XG4gICAgfTtcbmNvbnN0IF9XZWFrTWFwID0gdHlwZW9mIFdlYWtNYXAgIT09IFwidW5kZWZpbmVkXCIgPyBXZWFrTWFwIDogTWFwO1xuY29uc3QgX0ZpbmFsaXphdGlvblJlZ2lzdHJ5ID0gdHlwZW9mIEZpbmFsaXphdGlvblJlZ2lzdHJ5ICE9PSBcInVuZGVmaW5lZFwiXG4gICAgPyBGaW5hbGl6YXRpb25SZWdpc3RyeVxuICAgIDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVnaXN0ZXI6IG5vb3AsXG4gICAgICAgICAgICB1bnJlZ2lzdGVyOiBub29wLFxuICAgICAgICB9O1xuICAgIH07XG5jb25zdCBmaW5hbGl6YXRpb25CYXRjaFNpemUgPSAxMDAyNDtcbmV4cG9ydCBjbGFzcyBXZWFrQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKG1heCA9IEluZmluaXR5LCBkaXNwb3NlID0gZGVmYXVsdERpc3Bvc2UpIHtcbiAgICAgICAgdGhpcy5tYXggPSBtYXg7XG4gICAgICAgIHRoaXMuZGlzcG9zZSA9IGRpc3Bvc2U7XG4gICAgICAgIHRoaXMubWFwID0gbmV3IF9XZWFrTWFwKCk7XG4gICAgICAgIHRoaXMubmV3ZXN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5vbGRlc3QgPSBudWxsO1xuICAgICAgICB0aGlzLnVuZmluYWxpemVkTm9kZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuZmluYWxpemF0aW9uU2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuZmluYWxpemUgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMudW5maW5hbGl6ZWROb2Rlcy52YWx1ZXMoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmluYWxpemF0aW9uQmF0Y2hTaXplOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gaXRlcmF0b3IubmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgdGhpcy51bmZpbmFsaXplZE5vZGVzLmRlbGV0ZShub2RlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBub2RlLmtleTtcbiAgICAgICAgICAgICAgICBkZWxldGUgbm9kZS5rZXk7XG4gICAgICAgICAgICAgICAgbm9kZS5rZXlSZWYgPSBuZXcgX1dlYWtSZWYoa2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdHJ5LnJlZ2lzdGVyKGtleSwgbm9kZSwgbm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy51bmZpbmFsaXplZE5vZGVzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgcXVldWVNaWNyb3Rhc2sodGhpcy5maW5hbGl6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmFsaXphdGlvblNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlZ2lzdHJ5ID0gbmV3IF9GaW5hbGl6YXRpb25SZWdpc3RyeSh0aGlzLmRlbGV0ZU5vZGUuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIGhhcyhrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLmhhcyhrZXkpO1xuICAgIH1cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmdldE5vZGUoa2V5KTtcbiAgICAgICAgcmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZTtcbiAgICB9XG4gICAgZ2V0Tm9kZShrZXkpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubWFwLmdldChrZXkpO1xuICAgICAgICBpZiAobm9kZSAmJiBub2RlICE9PSB0aGlzLm5ld2VzdCkge1xuICAgICAgICAgICAgY29uc3QgeyBvbGRlciwgbmV3ZXIgfSA9IG5vZGU7XG4gICAgICAgICAgICBpZiAobmV3ZXIpIHtcbiAgICAgICAgICAgICAgICBuZXdlci5vbGRlciA9IG9sZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgb2xkZXIubmV3ZXIgPSBuZXdlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUub2xkZXIgPSB0aGlzLm5ld2VzdDtcbiAgICAgICAgICAgIG5vZGUub2xkZXIubmV3ZXIgPSBub2RlO1xuICAgICAgICAgICAgbm9kZS5uZXdlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdCA9IG5vZGU7XG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gdGhpcy5vbGRlc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9sZGVzdCA9IG5ld2VyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgICBsZXQgbm9kZSA9IHRoaXMuZ2V0Tm9kZShrZXkpO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIChub2RlLnZhbHVlID0gdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIG5ld2VyOiBudWxsLFxuICAgICAgICAgICAgb2xkZXI6IHRoaXMubmV3ZXN0LFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5uZXdlc3QpIHtcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0Lm5ld2VyID0gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5ld2VzdCA9IG5vZGU7XG4gICAgICAgIHRoaXMub2xkZXN0ID0gdGhpcy5vbGRlc3QgfHwgbm9kZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZUZpbmFsaXphdGlvbihub2RlKTtcbiAgICAgICAgdGhpcy5tYXAuc2V0KGtleSwgbm9kZSk7XG4gICAgICAgIHRoaXMuc2l6ZSsrO1xuICAgICAgICByZXR1cm4gbm9kZS52YWx1ZTtcbiAgICB9XG4gICAgY2xlYW4oKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLm9sZGVzdCAmJiB0aGlzLnNpemUgPiB0aGlzLm1heCkge1xuICAgICAgICAgICAgdGhpcy5kZWxldGVOb2RlKHRoaXMub2xkZXN0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWxldGVOb2RlKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMubmV3ZXN0KSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdCA9IG5vZGUub2xkZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUgPT09IHRoaXMub2xkZXN0KSB7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdCA9IG5vZGUubmV3ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUubmV3ZXIpIHtcbiAgICAgICAgICAgIG5vZGUubmV3ZXIub2xkZXIgPSBub2RlLm9sZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLm9sZGVyKSB7XG4gICAgICAgICAgICBub2RlLm9sZGVyLm5ld2VyID0gbm9kZS5uZXdlcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNpemUtLTtcbiAgICAgICAgY29uc3Qga2V5ID0gbm9kZS5rZXkgfHwgKG5vZGUua2V5UmVmICYmIG5vZGUua2V5UmVmLmRlcmVmKCkpO1xuICAgICAgICB0aGlzLmRpc3Bvc2Uobm9kZS52YWx1ZSwga2V5KTtcbiAgICAgICAgaWYgKCFub2RlLmtleVJlZikge1xuICAgICAgICAgICAgdGhpcy51bmZpbmFsaXplZE5vZGVzLmRlbGV0ZShub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0cnkudW5yZWdpc3Rlcihub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5KVxuICAgICAgICAgICAgdGhpcy5tYXAuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGRlbGV0ZShrZXkpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubWFwLmdldChrZXkpO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgdGhpcy5kZWxldGVOb2RlKG5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBzY2hlZHVsZUZpbmFsaXphdGlvbihub2RlKSB7XG4gICAgICAgIHRoaXMudW5maW5hbGl6ZWROb2Rlcy5hZGQobm9kZSk7XG4gICAgICAgIGlmICghdGhpcy5maW5hbGl6YXRpb25TY2hlZHVsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmluYWxpemF0aW9uU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHF1ZXVlTWljcm90YXNrKHRoaXMuZmluYWxpemUpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2Vhay5qcy5tYXAiLAogICAgIi8vIEEgW3RyaWVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RyaWUpIGRhdGEgc3RydWN0dXJlIHRoYXQgaG9sZHNcbi8vIG9iamVjdCBrZXlzIHdlYWtseSwgeWV0IGNhbiBhbHNvIGhvbGQgbm9uLW9iamVjdCBrZXlzLCB1bmxpa2UgdGhlXG4vLyBuYXRpdmUgYFdlYWtNYXBgLlxuLy8gSWYgbm8gbWFrZURhdGEgZnVuY3Rpb24gaXMgc3VwcGxpZWQsIHRoZSBsb29rZWQtdXAgZGF0YSB3aWxsIGJlIGFuIGVtcHR5LFxuLy8gbnVsbC1wcm90b3R5cGUgT2JqZWN0LlxuY29uc3QgZGVmYXVsdE1ha2VEYXRhID0gKCkgPT4gT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8vIFVzZWZ1bCBmb3IgcHJvY2Vzc2luZyBhcmd1bWVudHMgb2JqZWN0cyBhcyB3ZWxsIGFzIGFycmF5cy5cbmNvbnN0IHsgZm9yRWFjaCwgc2xpY2UgfSA9IEFycmF5LnByb3RvdHlwZTtcbmNvbnN0IHsgaGFzT3duUHJvcGVydHkgfSA9IE9iamVjdC5wcm90b3R5cGU7XG5leHBvcnQgY2xhc3MgVHJpZSB7XG4gICAgY29uc3RydWN0b3Iod2Vha25lc3MgPSB0cnVlLCBtYWtlRGF0YSA9IGRlZmF1bHRNYWtlRGF0YSkge1xuICAgICAgICB0aGlzLndlYWtuZXNzID0gd2Vha25lc3M7XG4gICAgICAgIHRoaXMubWFrZURhdGEgPSBtYWtlRGF0YTtcbiAgICB9XG4gICAgbG9va3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb29rdXBBcnJheShhcmd1bWVudHMpO1xuICAgIH1cbiAgICBsb29rdXBBcnJheShhcnJheSkge1xuICAgICAgICBsZXQgbm9kZSA9IHRoaXM7XG4gICAgICAgIGZvckVhY2guY2FsbChhcnJheSwga2V5ID0+IG5vZGUgPSBub2RlLmdldENoaWxkVHJpZShrZXkpKTtcbiAgICAgICAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwobm9kZSwgXCJkYXRhXCIpXG4gICAgICAgICAgICA/IG5vZGUuZGF0YVxuICAgICAgICAgICAgOiBub2RlLmRhdGEgPSB0aGlzLm1ha2VEYXRhKHNsaWNlLmNhbGwoYXJyYXkpKTtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVla0FycmF5KGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHBlZWtBcnJheShhcnJheSkge1xuICAgICAgICBsZXQgbm9kZSA9IHRoaXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IG5vZGUgJiYgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBtYXAgPSBub2RlLm1hcEZvcihhcnJheVtpXSwgZmFsc2UpO1xuICAgICAgICAgICAgbm9kZSA9IG1hcCAmJiBtYXAuZ2V0KGFycmF5W2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm9kZSAmJiBub2RlLmRhdGE7XG4gICAgfVxuICAgIHJlbW92ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXJyYXkoYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmVtb3ZlQXJyYXkoYXJyYXkpIHtcbiAgICAgICAgbGV0IGRhdGE7XG4gICAgICAgIGlmIChhcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGhlYWQgPSBhcnJheVswXTtcbiAgICAgICAgICAgIGNvbnN0IG1hcCA9IHRoaXMubWFwRm9yKGhlYWQsIGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gbWFwICYmIG1hcC5nZXQoaGVhZCk7XG4gICAgICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gY2hpbGQucmVtb3ZlQXJyYXkoc2xpY2UuY2FsbChhcnJheSwgMSkpO1xuICAgICAgICAgICAgICAgIGlmICghY2hpbGQuZGF0YSAmJiAhY2hpbGQud2VhayAmJiAhKGNoaWxkLnN0cm9uZyAmJiBjaGlsZC5zdHJvbmcuc2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwLmRlbGV0ZShoZWFkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5kYXRhO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgZ2V0Q2hpbGRUcmllKGtleSkge1xuICAgICAgICBjb25zdCBtYXAgPSB0aGlzLm1hcEZvcihrZXksIHRydWUpO1xuICAgICAgICBsZXQgY2hpbGQgPSBtYXAuZ2V0KGtleSk7XG4gICAgICAgIGlmICghY2hpbGQpXG4gICAgICAgICAgICBtYXAuc2V0KGtleSwgY2hpbGQgPSBuZXcgVHJpZSh0aGlzLndlYWtuZXNzLCB0aGlzLm1ha2VEYXRhKSk7XG4gICAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9XG4gICAgbWFwRm9yKGtleSwgY3JlYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndlYWtuZXNzICYmIGlzT2JqUmVmKGtleSlcbiAgICAgICAgICAgID8gdGhpcy53ZWFrIHx8IChjcmVhdGUgPyB0aGlzLndlYWsgPSBuZXcgV2Vha01hcCA6IHZvaWQgMClcbiAgICAgICAgICAgIDogdGhpcy5zdHJvbmcgfHwgKGNyZWF0ZSA/IHRoaXMuc3Ryb25nID0gbmV3IE1hcCA6IHZvaWQgMCk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNPYmpSZWYodmFsdWUpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIEZhbGwgdGhyb3VnaCB0byByZXR1cm4gdHJ1ZS4uLlxuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLAogICAgIi8vIFRoaXMgY3VycmVudENvbnRleHQgdmFyaWFibGUgd2lsbCBvbmx5IGJlIHVzZWQgaWYgdGhlIG1ha2VTbG90Q2xhc3Ncbi8vIGZ1bmN0aW9uIGlzIGNhbGxlZCwgd2hpY2ggaGFwcGVucyBvbmx5IGlmIHRoaXMgaXMgdGhlIGZpcnN0IGNvcHkgb2YgdGhlXG4vLyBAd3J5L2NvbnRleHQgcGFja2FnZSB0byBiZSBpbXBvcnRlZC5cbmxldCBjdXJyZW50Q29udGV4dCA9IG51bGw7XG4vLyBUaGlzIHVuaXF1ZSBpbnRlcm5hbCBvYmplY3QgaXMgdXNlZCB0byBkZW5vdGUgdGhlIGFic2VuY2Ugb2YgYSB2YWx1ZVxuLy8gZm9yIGEgZ2l2ZW4gU2xvdCwgYW5kIGlzIG5ldmVyIGV4cG9zZWQgdG8gb3V0c2lkZSBjb2RlLlxuY29uc3QgTUlTU0lOR19WQUxVRSA9IHt9O1xubGV0IGlkQ291bnRlciA9IDE7XG4vLyBBbHRob3VnaCB3ZSBjYW4ndCBkbyBhbnl0aGluZyBhYm91dCB0aGUgY29zdCBvZiBkdXBsaWNhdGVkIGNvZGUgZnJvbVxuLy8gYWNjaWRlbnRhbGx5IGJ1bmRsaW5nIG11bHRpcGxlIGNvcGllcyBvZiB0aGUgQHdyeS9jb250ZXh0IHBhY2thZ2UsIHdlIGNhblxuLy8gYXZvaWQgY3JlYXRpbmcgdGhlIFNsb3QgY2xhc3MgbW9yZSB0aGFuIG9uY2UgdXNpbmcgbWFrZVNsb3RDbGFzcy5cbmNvbnN0IG1ha2VTbG90Q2xhc3MgPSAoKSA9PiBjbGFzcyBTbG90IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gSWYgeW91IGhhdmUgYSBTbG90IG9iamVjdCwgeW91IGNhbiBmaW5kIG91dCBpdHMgc2xvdC5pZCwgYnV0IHlvdSBjYW5ub3RcbiAgICAgICAgLy8gZ3Vlc3MgdGhlIHNsb3QuaWQgb2YgYSBTbG90IHlvdSBkb24ndCBoYXZlIGFjY2VzcyB0bywgdGhhbmtzIHRvIHRoZVxuICAgICAgICAvLyByYW5kb21pemVkIHN1ZmZpeC5cbiAgICAgICAgdGhpcy5pZCA9IFtcbiAgICAgICAgICAgIFwic2xvdFwiLFxuICAgICAgICAgICAgaWRDb3VudGVyKyssXG4gICAgICAgICAgICBEYXRlLm5vdygpLFxuICAgICAgICAgICAgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiksXG4gICAgICAgIF0uam9pbihcIjpcIik7XG4gICAgfVxuICAgIGhhc1ZhbHVlKCkge1xuICAgICAgICBmb3IgKGxldCBjb250ZXh0ID0gY3VycmVudENvbnRleHQ7IGNvbnRleHQ7IGNvbnRleHQgPSBjb250ZXh0LnBhcmVudCkge1xuICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSBTbG90IG9iamVjdCBpc2VsZiBhcyBhIGtleSB0byBpdHMgdmFsdWUsIHdoaWNoIG1lYW5zIHRoZVxuICAgICAgICAgICAgLy8gdmFsdWUgY2Fubm90IGJlIG9idGFpbmVkIHdpdGhvdXQgYSByZWZlcmVuY2UgdG8gdGhlIFNsb3Qgb2JqZWN0LlxuICAgICAgICAgICAgaWYgKHRoaXMuaWQgaW4gY29udGV4dC5zbG90cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29udGV4dC5zbG90c1t0aGlzLmlkXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IE1JU1NJTkdfVkFMVUUpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChjb250ZXh0ICE9PSBjdXJyZW50Q29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDYWNoZSB0aGUgdmFsdWUgaW4gY3VycmVudENvbnRleHQuc2xvdHMgc28gdGhlIG5leHQgbG9va3VwIHdpbGxcbiAgICAgICAgICAgICAgICAgICAgLy8gYmUgZmFzdGVyLiBUaGlzIGNhY2hpbmcgaXMgc2FmZSBiZWNhdXNlIHRoZSB0cmVlIG9mIGNvbnRleHRzIGFuZFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgdmFsdWVzIG9mIHRoZSBzbG90cyBhcmUgbG9naWNhbGx5IGltbXV0YWJsZS5cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENvbnRleHQuc2xvdHNbdGhpcy5pZF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRDb250ZXh0KSB7XG4gICAgICAgICAgICAvLyBJZiBhIHZhbHVlIHdhcyBub3QgZm91bmQgZm9yIHRoaXMgU2xvdCwgaXQncyBuZXZlciBnb2luZyB0byBiZSBmb3VuZFxuICAgICAgICAgICAgLy8gbm8gbWF0dGVyIGhvdyBtYW55IHRpbWVzIHdlIGxvb2sgaXQgdXAsIHNvIHdlIG1pZ2h0IGFzIHdlbGwgY2FjaGVcbiAgICAgICAgICAgIC8vIHRoZSBhYnNlbmNlIG9mIHRoZSB2YWx1ZSwgdG9vLlxuICAgICAgICAgICAgY3VycmVudENvbnRleHQuc2xvdHNbdGhpcy5pZF0gPSBNSVNTSU5HX1ZBTFVFO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50Q29udGV4dC5zbG90c1t0aGlzLmlkXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aXRoVmFsdWUodmFsdWUsIGNhbGxiYWNrLCBcbiAgICAvLyBHaXZlbiB0aGUgcHJldmFsZW5jZSBvZiBhcnJvdyBmdW5jdGlvbnMsIHNwZWNpZnlpbmcgYXJndW1lbnRzIGlzIGxpa2VseVxuICAgIC8vIHRvIGJlIG11Y2ggbW9yZSBjb21tb24gdGhhbiBzcGVjaWZ5aW5nIGB0aGlzYCwgaGVuY2UgdGhpcyBvcmRlcmluZzpcbiAgICBhcmdzLCB0aGlzQXJnKSB7XG4gICAgICAgIGNvbnN0IHNsb3RzID0ge1xuICAgICAgICAgICAgX19wcm90b19fOiBudWxsLFxuICAgICAgICAgICAgW3RoaXMuaWRdOiB2YWx1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gY3VycmVudENvbnRleHQ7XG4gICAgICAgIGN1cnJlbnRDb250ZXh0ID0geyBwYXJlbnQsIHNsb3RzIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkgYWxsb3dzIHRoZSBhcmd1bWVudHMgYXJyYXkgYXJndW1lbnQgdG8gYmVcbiAgICAgICAgICAgIC8vIG9taXR0ZWQgb3IgdW5kZWZpbmVkLCBzbyBhcmdzISBpcyBmaW5lIGhlcmUuXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBjdXJyZW50Q29udGV4dCA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDYXB0dXJlIHRoZSBjdXJyZW50IGNvbnRleHQgYW5kIHdyYXAgYSBjYWxsYmFjayBmdW5jdGlvbiBzbyB0aGF0IGl0XG4gICAgLy8gcmVlc3RhYmxpc2hlcyB0aGUgY2FwdHVyZWQgY29udGV4dCB3aGVuIGNhbGxlZC5cbiAgICBzdGF0aWMgYmluZChjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gY3VycmVudENvbnRleHQ7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCBzYXZlZCA9IGN1cnJlbnRDb250ZXh0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29udGV4dCA9IHNhdmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBJbW1lZGlhdGVseSBydW4gYSBjYWxsYmFjayBmdW5jdGlvbiB3aXRob3V0IGFueSBjYXB0dXJlZCBjb250ZXh0LlxuICAgIHN0YXRpYyBub0NvbnRleHQoY2FsbGJhY2ssIFxuICAgIC8vIEdpdmVuIHRoZSBwcmV2YWxlbmNlIG9mIGFycm93IGZ1bmN0aW9ucywgc3BlY2lmeWluZyBhcmd1bWVudHMgaXMgbGlrZWx5XG4gICAgLy8gdG8gYmUgbXVjaCBtb3JlIGNvbW1vbiB0aGFuIHNwZWNpZnlpbmcgYHRoaXNgLCBoZW5jZSB0aGlzIG9yZGVyaW5nOlxuICAgIGFyZ3MsIHRoaXNBcmcpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRDb250ZXh0KSB7XG4gICAgICAgICAgICBjb25zdCBzYXZlZCA9IGN1cnJlbnRDb250ZXh0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgLy8gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5IGFsbG93cyB0aGUgYXJndW1lbnRzIGFycmF5IGFyZ3VtZW50IHRvIGJlXG4gICAgICAgICAgICAgICAgLy8gb21pdHRlZCBvciB1bmRlZmluZWQsIHNvIGFyZ3MhIGlzIGZpbmUgaGVyZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29udGV4dCA9IHNhdmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxufTtcbmZ1bmN0aW9uIG1heWJlKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgfVxuICAgIGNhdGNoIChpZ25vcmVkKSB7IH1cbn1cbi8vIFdlIHN0b3JlIGEgc2luZ2xlIGdsb2JhbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgU2xvdCBjbGFzcyBhcyBhIHBlcm1hbmVudFxuLy8gbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb2YgdGhlIGdsb2JhbFRoaXMgb2JqZWN0LiBUaGlzIG9iZnVzY2F0aW9uIGRvZXNcbi8vIG5vdGhpbmcgdG8gcHJldmVudCBhY2Nlc3MgdG8gdGhlIFNsb3QgY2xhc3MsIGJ1dCBhdCBsZWFzdCBpdCBlbnN1cmVzIHRoZVxuLy8gaW1wbGVtZW50YXRpb24gKGkuZS4gY3VycmVudENvbnRleHQpIGNhbm5vdCBiZSB0YW1wZXJlZCB3aXRoLCBhbmQgYWxsIGNvcGllc1xuLy8gb2YgdGhlIEB3cnkvY29udGV4dCBwYWNrYWdlIChob3BlZnVsbHkganVzdCBvbmUpIHdpbGwgc2hhcmUgdGhlIHNhbWUgU2xvdFxuLy8gaW1wbGVtZW50YXRpb24uIFNpbmNlIHRoZSBmaXJzdCBjb3B5IG9mIHRoZSBAd3J5L2NvbnRleHQgcGFja2FnZSB0byBiZVxuLy8gaW1wb3J0ZWQgd2lucywgdGhpcyB0ZWNobmlxdWUgaW1wb3NlcyBhIHN0ZWVwIGNvc3QgZm9yIGFueSBmdXR1cmUgYnJlYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIFNsb3QgY2xhc3MuXG5jb25zdCBnbG9iYWxLZXkgPSBcIkB3cnkvY29udGV4dDpTbG90XCI7XG5jb25zdCBob3N0ID0gXG4vLyBQcmVmZXIgZ2xvYmFsVGhpcyB3aGVuIGF2YWlsYWJsZS5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZW5qYW1uL3dyeXdhcmUvaXNzdWVzLzM0N1xubWF5YmUoKCkgPT4gZ2xvYmFsVGhpcykgfHxcbiAgICAvLyBGYWxsIGJhY2sgdG8gZ2xvYmFsLCB3aGljaCB3b3JrcyBpbiBOb2RlLmpzIGFuZCBtYXkgYmUgY29udmVydGVkIGJ5IHNvbWVcbiAgICAvLyBidW5kbGVycyB0byB0aGUgYXBwcm9wcmlhdGUgaWRlbnRpZmllciAod2luZG93LCBzZWxmLCAuLi4pIGRlcGVuZGluZyBvbiB0aGVcbiAgICAvLyBidW5kbGluZyB0YXJnZXQuIGh0dHBzOi8vZ2l0aHViLmNvbS9lbmRvanMvZW5kby9pc3N1ZXMvNTc2I2lzc3VlY29tbWVudC0xMTc4NTE1MjI0XG4gICAgbWF5YmUoKCkgPT4gZ2xvYmFsKSB8fFxuICAgIC8vIE90aGVyd2lzZSwgdXNlIGEgZHVtbXkgaG9zdCB0aGF0J3MgbG9jYWwgdG8gdGhpcyBtb2R1bGUuIFdlIHVzZWQgdG8gZmFsbFxuICAgIC8vIGJhY2sgdG8gdXNpbmcgdGhlIEFycmF5IGNvbnN0cnVjdG9yIGFzIGEgbmFtZXNwYWNlLCBidXQgdGhhdCB3YXMgZmxhZ2dlZCBpblxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZW5qYW1uL3dyeXdhcmUvaXNzdWVzLzM0NywgYW5kIGNhbiBiZSBhdm9pZGVkLlxuICAgIE9iamVjdC5jcmVhdGUobnVsbCk7XG4vLyBXaGljaGV2ZXIgZ2xvYmFsSG9zdCB3ZSdyZSB1c2luZywgbWFrZSBUeXBlU2NyaXB0IGhhcHB5IGFib3V0IHRoZSBhZGRpdGlvbmFsXG4vLyBnbG9iYWxLZXkgcHJvcGVydHkuXG5jb25zdCBnbG9iYWxIb3N0ID0gaG9zdDtcbmV4cG9ydCBjb25zdCBTbG90ID0gZ2xvYmFsSG9zdFtnbG9iYWxLZXldIHx8XG4gICAgLy8gRWFybGllciB2ZXJzaW9ucyBvZiB0aGlzIHBhY2thZ2Ugc3RvcmVkIHRoZSBnbG9iYWxLZXkgcHJvcGVydHkgb24gdGhlIEFycmF5XG4gICAgLy8gY29uc3RydWN0b3IsIHNvIHdlIGNoZWNrIHRoZXJlIGFzIHdlbGwsIHRvIHByZXZlbnQgU2xvdCBjbGFzcyBkdXBsaWNhdGlvbi5cbiAgICBBcnJheVtnbG9iYWxLZXldIHx8XG4gICAgKGZ1bmN0aW9uIChTbG90KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsSG9zdCwgZ2xvYmFsS2V5LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IFNsb3QsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIC8vIFdoZW4gaXQgd2FzIHBvc3NpYmxlIGZvciBnbG9iYWxIb3N0IHRvIGJlIHRoZSBBcnJheSBjb25zdHJ1Y3RvciAoYVxuICAgICAgICAgICAgICAgIC8vIGxlZ2FjeSBTbG90IGRlZHVwIHN0cmF0ZWd5KSwgaXQgd2FzIGltcG9ydGFudCBmb3IgdGhlIHByb3BlcnR5IHRvIGJlXG4gICAgICAgICAgICAgICAgLy8gY29uZmlndXJhYmxlOnRydWUgc28gaXQgY291bGQgYmUgZGVsZXRlZC4gVGhhdCBkb2VzIG5vdCBzZWVtIHRvIGJlIGFzXG4gICAgICAgICAgICAgICAgLy8gaW1wb3J0YW50IHdoZW4gZ2xvYmFsSG9zdCBpcyB0aGUgZ2xvYmFsIG9iamVjdCwgYnV0IEkgZG9uJ3Qgd2FudCB0b1xuICAgICAgICAgICAgICAgIC8vIGNhdXNlIHNpbWlsYXIgcHJvYmxlbXMgYWdhaW4sIGFuZCBjb25maWd1cmFibGU6dHJ1ZSBzZWVtcyBzYWZlc3QuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2VuZG9qcy9lbmRvL2lzc3Vlcy81NzYjaXNzdWVjb21tZW50LTExNzgyNzQwMDhcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgcmV0dXJuIFNsb3Q7XG4gICAgICAgIH1cbiAgICB9KShtYWtlU2xvdENsYXNzKCkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2xvdC5qcy5tYXAiLAogICAgImltcG9ydCB7IFNsb3QgfSBmcm9tIFwiQHdyeS9jb250ZXh0XCI7XG5leHBvcnQgY29uc3QgcGFyZW50RW50cnlTbG90ID0gbmV3IFNsb3QoKTtcbmV4cG9ydCBmdW5jdGlvbiBub25SZWFjdGl2ZShmbikge1xuICAgIHJldHVybiBwYXJlbnRFbnRyeVNsb3Qud2l0aFZhbHVlKHZvaWQgMCwgZm4pO1xufVxuZXhwb3J0IHsgU2xvdCB9O1xuZXhwb3J0IHsgYmluZCBhcyBiaW5kQ29udGV4dCwgbm9Db250ZXh0LCBzZXRUaW1lb3V0LCBhc3luY0Zyb21HZW4sIH0gZnJvbSBcIkB3cnkvY29udGV4dFwiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGV4dC5qcy5tYXAiLAogICAgImV4cG9ydCBjb25zdCB7IGhhc093blByb3BlcnR5LCB9ID0gT2JqZWN0LnByb3RvdHlwZTtcbmV4cG9ydCBjb25zdCBhcnJheUZyb21TZXQgPSBBcnJheS5mcm9tIHx8XG4gICAgZnVuY3Rpb24gKHNldCkge1xuICAgICAgICBjb25zdCBhcnJheSA9IFtdO1xuICAgICAgICBzZXQuZm9yRWFjaChpdGVtID0+IGFycmF5LnB1c2goaXRlbSkpO1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbmV4cG9ydCBmdW5jdGlvbiBtYXliZVVuc3Vic2NyaWJlKGVudHJ5T3JEZXApIHtcbiAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSBlbnRyeU9yRGVwO1xuICAgIGlmICh0eXBlb2YgdW5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBlbnRyeU9yRGVwLnVuc3Vic2NyaWJlID0gdm9pZCAwO1xuICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlcnMuanMubWFwIiwKICAgICJpbXBvcnQgeyBwYXJlbnRFbnRyeVNsb3QgfSBmcm9tIFwiLi9jb250ZXh0LmpzXCI7XG5pbXBvcnQgeyBtYXliZVVuc3Vic2NyaWJlLCBhcnJheUZyb21TZXQgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5jb25zdCBlbXB0eVNldFBvb2wgPSBbXTtcbmNvbnN0IFBPT0xfVEFSR0VUX1NJWkUgPSAxMDA7XG4vLyBTaW5jZSB0aGlzIHBhY2thZ2UgbWlnaHQgYmUgdXNlZCBicm93c2Vycywgd2Ugc2hvdWxkIGF2b2lkIHVzaW5nIHRoZVxuLy8gTm9kZSBidWlsdC1pbiBhc3NlcnQgbW9kdWxlLlxuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgb3B0aW9uYWxNZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG9wdGlvbmFsTWVzc2FnZSB8fCBcImFzc2VydGlvbiBmYWlsdXJlXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbHVlSXMoYSwgYikge1xuICAgIGNvbnN0IGxlbiA9IGEubGVuZ3RoO1xuICAgIHJldHVybiAoXG4gICAgLy8gVW5rbm93biB2YWx1ZXMgYXJlIG5vdCBlcXVhbCB0byBlYWNoIG90aGVyLlxuICAgIGxlbiA+IDAgJiZcbiAgICAgICAgLy8gQm90aCB2YWx1ZXMgbXVzdCBiZSBvcmRpbmFyeSAob3IgYm90aCBleGNlcHRpb25hbCkgdG8gYmUgZXF1YWwuXG4gICAgICAgIGxlbiA9PT0gYi5sZW5ndGggJiZcbiAgICAgICAgLy8gVGhlIHVuZGVybHlpbmcgdmFsdWUgb3IgZXhjZXB0aW9uIG11c3QgYmUgdGhlIHNhbWUuXG4gICAgICAgIGFbbGVuIC0gMV0gPT09IGJbbGVuIC0gMV0pO1xufVxuZnVuY3Rpb24gdmFsdWVHZXQodmFsdWUpIHtcbiAgICBzd2l0Y2ggKHZhbHVlLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6IHRocm93IG5ldyBFcnJvcihcInVua25vd24gdmFsdWVcIik7XG4gICAgICAgIGNhc2UgMTogcmV0dXJuIHZhbHVlWzBdO1xuICAgICAgICBjYXNlIDI6IHRocm93IHZhbHVlWzFdO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbHVlQ29weSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5zbGljZSgwKTtcbn1cbmV4cG9ydCBjbGFzcyBFbnRyeSB7XG4gICAgY29uc3RydWN0b3IoZm4pIHtcbiAgICAgICAgdGhpcy5mbiA9IGZuO1xuICAgICAgICB0aGlzLnBhcmVudHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuY2hpbGRWYWx1ZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIFdoZW4gdGhpcyBFbnRyeSBoYXMgY2hpbGRyZW4gdGhhdCBhcmUgZGlydHksIHRoaXMgcHJvcGVydHkgYmVjb21lc1xuICAgICAgICAvLyBhIFNldCBjb250YWluaW5nIG90aGVyIEVudHJ5IG9iamVjdHMsIGJvcnJvd2VkIGZyb20gZW1wdHlTZXRQb29sLlxuICAgICAgICAvLyBXaGVuIHRoZSBzZXQgYmVjb21lcyBlbXB0eSwgaXQgZ2V0cyByZWN5Y2xlZCBiYWNrIHRvIGVtcHR5U2V0UG9vbC5cbiAgICAgICAgdGhpcy5kaXJ0eUNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMucmVjb21wdXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFtdO1xuICAgICAgICB0aGlzLmRlcHMgPSBudWxsO1xuICAgICAgICArK0VudHJ5LmNvdW50O1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPT09IDEgJiYgIW1pZ2h0QmVEaXJ0eSh0aGlzKSkge1xuICAgICAgICAgICAgcmVtZW1iZXJQYXJlbnQodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZVswXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBUaGlzIGlzIHRoZSBtb3N0IGltcG9ydGFudCBtZXRob2Qgb2YgdGhlIEVudHJ5IEFQSSwgYmVjYXVzZSBpdFxuICAgIC8vIGRldGVybWluZXMgd2hldGhlciB0aGUgY2FjaGVkIHRoaXMudmFsdWUgY2FuIGJlIHJldHVybmVkIGltbWVkaWF0ZWx5LFxuICAgIC8vIG9yIG11c3QgYmUgcmVjb21wdXRlZC4gVGhlIG92ZXJhbGwgcGVyZm9ybWFuY2Ugb2YgdGhlIGNhY2hpbmcgc3lzdGVtXG4gICAgLy8gZGVwZW5kcyBvbiB0aGUgdHJ1dGggb2YgdGhlIGZvbGxvd2luZyBvYnNlcnZhdGlvbnM6ICgxKSB0aGlzLmRpcnR5IGlzXG4gICAgLy8gdXN1YWxseSBmYWxzZSwgKDIpIHRoaXMuZGlydHlDaGlsZHJlbiBpcyB1c3VhbGx5IG51bGwvZW1wdHksIGFuZCB0aHVzXG4gICAgLy8gKDMpIHZhbHVlR2V0KHRoaXMudmFsdWUpIGlzIHVzdWFsbHkgcmV0dXJuZWQgd2l0aG91dCByZWNvbXB1dGF0aW9uLlxuICAgIHJlY29tcHV0ZShhcmdzKSB7XG4gICAgICAgIGFzc2VydCghdGhpcy5yZWNvbXB1dGluZywgXCJhbHJlYWR5IHJlY29tcHV0aW5nXCIpO1xuICAgICAgICByZW1lbWJlclBhcmVudCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIG1pZ2h0QmVEaXJ0eSh0aGlzKVxuICAgICAgICAgICAgPyByZWFsbHlSZWNvbXB1dGUodGhpcywgYXJncylcbiAgICAgICAgICAgIDogdmFsdWVHZXQodGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIHNldERpcnR5KCkge1xuICAgICAgICBpZiAodGhpcy5kaXJ0eSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJlcG9ydERpcnR5KHRoaXMpO1xuICAgICAgICAvLyBXZSBjYW4gZ28gYWhlYWQgYW5kIHVuc3Vic2NyaWJlIGhlcmUsIHNpbmNlIGFueSBmdXJ0aGVyIGRpcnR5XG4gICAgICAgIC8vIG5vdGlmaWNhdGlvbnMgd2UgcmVjZWl2ZSB3aWxsIGJlIHJlZHVuZGFudCwgYW5kIHVuc3Vic2NyaWJpbmcgbWF5XG4gICAgICAgIC8vIGZyZWUgdXAgc29tZSByZXNvdXJjZXMsIGUuZy4gZmlsZSB3YXRjaGVycy5cbiAgICAgICAgbWF5YmVVbnN1YnNjcmliZSh0aGlzKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5zZXREaXJ0eSgpO1xuICAgICAgICAvLyBTZXZlciBhbnkgZGVwZW5kZW5jeSByZWxhdGlvbnNoaXBzIHdpdGggb3VyIG93biBjaGlsZHJlbiwgc28gdGhvc2VcbiAgICAgICAgLy8gY2hpbGRyZW4gZG9uJ3QgcmV0YWluIHRoaXMgcGFyZW50IEVudHJ5IGluIHRoZWlyIGNoaWxkLnBhcmVudHMgc2V0cyxcbiAgICAgICAgLy8gdGhlcmVieSBwcmV2ZW50aW5nIGl0IGZyb20gYmVpbmcgZnVsbHkgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gICAgICAgIGZvcmdldENoaWxkcmVuKHRoaXMpO1xuICAgICAgICAvLyBCZWNhdXNlIHRoaXMgZW50cnkgaGFzIGJlZW4ga2lja2VkIG91dCBvZiB0aGUgY2FjaGUgKGluIGluZGV4LmpzKSxcbiAgICAgICAgLy8gd2UndmUgbG9zdCB0aGUgYWJpbGl0eSB0byBmaW5kIG91dCBpZi93aGVuIHRoaXMgZW50cnkgYmVjb21lcyBkaXJ0eSxcbiAgICAgICAgLy8gd2hldGhlciB0aGF0IGhhcHBlbnMgdGhyb3VnaCBhIHN1YnNjcmlwdGlvbiwgYmVjYXVzZSBvZiBhIGRpcmVjdCBjYWxsXG4gICAgICAgIC8vIHRvIGVudHJ5LnNldERpcnR5KCksIG9yIGJlY2F1c2Ugb25lIG9mIGl0cyBjaGlsZHJlbiBiZWNvbWVzIGRpcnR5LlxuICAgICAgICAvLyBCZWNhdXNlIG9mIHRoaXMgbG9zcyBvZiBmdXR1cmUgaW5mb3JtYXRpb24sIHdlIGhhdmUgdG8gYXNzdW1lIHRoZVxuICAgICAgICAvLyB3b3JzdCAodGhhdCB0aGlzIGVudHJ5IG1pZ2h0IGhhdmUgYmVjb21lIGRpcnR5IHZlcnkgc29vbiksIHNvIHdlIG11c3RcbiAgICAgICAgLy8gaW1tZWRpYXRlbHkgbWFyayB0aGlzIGVudHJ5J3MgcGFyZW50cyBhcyBkaXJ0eS4gTm9ybWFsbHkgd2UgY291bGRcbiAgICAgICAgLy8ganVzdCBjYWxsIGVudHJ5LnNldERpcnR5KCkgcmF0aGVyIHRoYW4gY2FsbGluZyBwYXJlbnQuc2V0RGlydHkoKSBmb3JcbiAgICAgICAgLy8gZWFjaCBwYXJlbnQsIGJ1dCB0aGF0IHdvdWxkIGxlYXZlIHRoaXMgZW50cnkgaW4gcGFyZW50LmNoaWxkVmFsdWVzXG4gICAgICAgIC8vIGFuZCBwYXJlbnQuZGlydHlDaGlsZHJlbiwgd2hpY2ggd291bGQgcHJldmVudCB0aGUgY2hpbGQgZnJvbSBiZWluZ1xuICAgICAgICAvLyB0cnVseSBmb3Jnb3R0ZW4uXG4gICAgICAgIGVhY2hQYXJlbnQodGhpcywgKHBhcmVudCwgY2hpbGQpID0+IHtcbiAgICAgICAgICAgIHBhcmVudC5zZXREaXJ0eSgpO1xuICAgICAgICAgICAgZm9yZ2V0Q2hpbGQocGFyZW50LCB0aGlzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZvcmdldCgpIHtcbiAgICAgICAgLy8gVGhlIGNvZGUgdGhhdCBjcmVhdGVzIEVudHJ5IG9iamVjdHMgaW4gaW5kZXgudHMgd2lsbCByZXBsYWNlIHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIHdpdGggb25lIHRoYXQgYWN0dWFsbHkgcmVtb3ZlcyB0aGUgRW50cnkgZnJvbSB0aGUgY2FjaGUsIHdoaWNoIHdpbGwgYWxzb1xuICAgICAgICAvLyB0cmlnZ2VyIHRoZSBlbnRyeS5kaXNwb3NlIG1ldGhvZC5cbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgfVxuICAgIGRlcGVuZE9uKGRlcCkge1xuICAgICAgICBkZXAuYWRkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuZGVwcykge1xuICAgICAgICAgICAgdGhpcy5kZXBzID0gZW1wdHlTZXRQb29sLnBvcCgpIHx8IG5ldyBTZXQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlcHMuYWRkKGRlcCk7XG4gICAgfVxuICAgIGZvcmdldERlcHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmRlcHMpIHtcbiAgICAgICAgICAgIGFycmF5RnJvbVNldCh0aGlzLmRlcHMpLmZvckVhY2goZGVwID0+IGRlcC5kZWxldGUodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5kZXBzLmNsZWFyKCk7XG4gICAgICAgICAgICBlbXB0eVNldFBvb2wucHVzaCh0aGlzLmRlcHMpO1xuICAgICAgICAgICAgdGhpcy5kZXBzID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbkVudHJ5LmNvdW50ID0gMDtcbmZ1bmN0aW9uIHJlbWVtYmVyUGFyZW50KGNoaWxkKSB7XG4gICAgY29uc3QgcGFyZW50ID0gcGFyZW50RW50cnlTbG90LmdldFZhbHVlKCk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgICBjaGlsZC5wYXJlbnRzLmFkZChwYXJlbnQpO1xuICAgICAgICBpZiAoIXBhcmVudC5jaGlsZFZhbHVlcy5oYXMoY2hpbGQpKSB7XG4gICAgICAgICAgICBwYXJlbnQuY2hpbGRWYWx1ZXMuc2V0KGNoaWxkLCBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1pZ2h0QmVEaXJ0eShjaGlsZCkpIHtcbiAgICAgICAgICAgIHJlcG9ydERpcnR5Q2hpbGQocGFyZW50LCBjaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXBvcnRDbGVhbkNoaWxkKHBhcmVudCwgY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVhbGx5UmVjb21wdXRlKGVudHJ5LCBhcmdzKSB7XG4gICAgZm9yZ2V0Q2hpbGRyZW4oZW50cnkpO1xuICAgIC8vIFNldCBlbnRyeSBhcyB0aGUgcGFyZW50IGVudHJ5IHdoaWxlIGNhbGxpbmcgcmVjb21wdXRlTmV3VmFsdWUoZW50cnkpLlxuICAgIHBhcmVudEVudHJ5U2xvdC53aXRoVmFsdWUoZW50cnksIHJlY29tcHV0ZU5ld1ZhbHVlLCBbZW50cnksIGFyZ3NdKTtcbiAgICBpZiAobWF5YmVTdWJzY3JpYmUoZW50cnksIGFyZ3MpKSB7XG4gICAgICAgIC8vIElmIHdlIHN1Y2Nlc3NmdWxseSByZWNvbXB1dGVkIGVudHJ5LnZhbHVlIGFuZCBkaWQgbm90IGZhaWwgdG9cbiAgICAgICAgLy8gKHJlKXN1YnNjcmliZSwgdGhlbiB0aGlzIEVudHJ5IGlzIG5vIGxvbmdlciBleHBsaWNpdGx5IGRpcnR5LlxuICAgICAgICBzZXRDbGVhbihlbnRyeSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZUdldChlbnRyeS52YWx1ZSk7XG59XG5mdW5jdGlvbiByZWNvbXB1dGVOZXdWYWx1ZShlbnRyeSwgYXJncykge1xuICAgIGVudHJ5LnJlY29tcHV0aW5nID0gdHJ1ZTtcbiAgICBjb25zdCB7IG5vcm1hbGl6ZVJlc3VsdCB9ID0gZW50cnk7XG4gICAgbGV0IG9sZFZhbHVlQ29weTtcbiAgICBpZiAobm9ybWFsaXplUmVzdWx0ICYmIGVudHJ5LnZhbHVlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBvbGRWYWx1ZUNvcHkgPSB2YWx1ZUNvcHkoZW50cnkudmFsdWUpO1xuICAgIH1cbiAgICAvLyBNYWtlIGVudHJ5LnZhbHVlIGFuIGVtcHR5IGFycmF5LCByZXByZXNlbnRpbmcgYW4gdW5rbm93biB2YWx1ZS5cbiAgICBlbnRyeS52YWx1ZS5sZW5ndGggPSAwO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIElmIGVudHJ5LmZuIHN1Y2NlZWRzLCBlbnRyeS52YWx1ZSB3aWxsIGJlY29tZSBhIG5vcm1hbCBWYWx1ZS5cbiAgICAgICAgZW50cnkudmFsdWVbMF0gPSBlbnRyeS5mbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIHZpYWJsZSBvbGRWYWx1ZUNvcHkgdG8gY29tcGFyZSB3aXRoIHRoZSAoc3VjY2Vzc2Z1bGx5XG4gICAgICAgIC8vIHJlY29tcHV0ZWQpIG5ldyBlbnRyeS52YWx1ZSwgYW5kIHRoZXkgYXJlIG5vdCBhbHJlYWR5ID09PSBpZGVudGljYWwsIGdpdmVcbiAgICAgICAgLy8gbm9ybWFsaXplUmVzdWx0IGEgY2hhbmNlIHRvIHBpY2svY2hvb3NlL3JldXNlIHBhcnRzIG9mIG9sZFZhbHVlQ29weVswXVxuICAgICAgICAvLyBhbmQvb3IgZW50cnkudmFsdWVbMF0gdG8gZGV0ZXJtaW5lIHRoZSBmaW5hbCBjYWNoZWQgZW50cnkudmFsdWUuXG4gICAgICAgIGlmIChub3JtYWxpemVSZXN1bHQgJiYgb2xkVmFsdWVDb3B5ICYmICF2YWx1ZUlzKG9sZFZhbHVlQ29weSwgZW50cnkudmFsdWUpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGVudHJ5LnZhbHVlWzBdID0gbm9ybWFsaXplUmVzdWx0KGVudHJ5LnZhbHVlWzBdLCBvbGRWYWx1ZUNvcHlbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgbm9ybWFsaXplUmVzdWx0IHRocm93cywganVzdCB1c2UgdGhlIG5ld2VyIHZhbHVlLCByYXRoZXIgdGhhblxuICAgICAgICAgICAgICAgIC8vIHNhdmluZyB0aGUgZXhjZXB0aW9uIGFzIGVudHJ5LnZhbHVlWzFdLlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElmIGVudHJ5LmZuIHRocm93cywgZW50cnkudmFsdWUgd2lsbCBob2xkIHRoYXQgZXhjZXB0aW9uLlxuICAgICAgICBlbnRyeS52YWx1ZVsxXSA9IGU7XG4gICAgfVxuICAgIC8vIEVpdGhlciB3YXksIHRoaXMgbGluZSBpcyBhbHdheXMgcmVhY2hlZC5cbiAgICBlbnRyeS5yZWNvbXB1dGluZyA9IGZhbHNlO1xufVxuZnVuY3Rpb24gbWlnaHRCZURpcnR5KGVudHJ5KSB7XG4gICAgcmV0dXJuIGVudHJ5LmRpcnR5IHx8ICEhKGVudHJ5LmRpcnR5Q2hpbGRyZW4gJiYgZW50cnkuZGlydHlDaGlsZHJlbi5zaXplKTtcbn1cbmZ1bmN0aW9uIHNldENsZWFuKGVudHJ5KSB7XG4gICAgZW50cnkuZGlydHkgPSBmYWxzZTtcbiAgICBpZiAobWlnaHRCZURpcnR5KGVudHJ5KSkge1xuICAgICAgICAvLyBUaGlzIEVudHJ5IG1heSBzdGlsbCBoYXZlIGRpcnR5IGNoaWxkcmVuLCBpbiB3aGljaCBjYXNlIHdlIGNhbid0XG4gICAgICAgIC8vIGxldCBvdXIgcGFyZW50cyBrbm93IHdlJ3JlIGNsZWFuIGp1c3QgeWV0LlxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlcG9ydENsZWFuKGVudHJ5KTtcbn1cbmZ1bmN0aW9uIHJlcG9ydERpcnR5KGNoaWxkKSB7XG4gICAgZWFjaFBhcmVudChjaGlsZCwgcmVwb3J0RGlydHlDaGlsZCk7XG59XG5mdW5jdGlvbiByZXBvcnRDbGVhbihjaGlsZCkge1xuICAgIGVhY2hQYXJlbnQoY2hpbGQsIHJlcG9ydENsZWFuQ2hpbGQpO1xufVxuZnVuY3Rpb24gZWFjaFBhcmVudChjaGlsZCwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBwYXJlbnRDb3VudCA9IGNoaWxkLnBhcmVudHMuc2l6ZTtcbiAgICBpZiAocGFyZW50Q291bnQpIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IGFycmF5RnJvbVNldChjaGlsZC5wYXJlbnRzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJlbnRDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhwYXJlbnRzW2ldLCBjaGlsZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBMZXQgYSBwYXJlbnQgRW50cnkga25vdyB0aGF0IG9uZSBvZiBpdHMgY2hpbGRyZW4gbWF5IGJlIGRpcnR5LlxuZnVuY3Rpb24gcmVwb3J0RGlydHlDaGlsZChwYXJlbnQsIGNoaWxkKSB7XG4gICAgLy8gTXVzdCBoYXZlIGNhbGxlZCByZW1lbWJlclBhcmVudChjaGlsZCkgYmVmb3JlIGNhbGxpbmdcbiAgICAvLyByZXBvcnREaXJ0eUNoaWxkKHBhcmVudCwgY2hpbGQpLlxuICAgIGFzc2VydChwYXJlbnQuY2hpbGRWYWx1ZXMuaGFzKGNoaWxkKSk7XG4gICAgYXNzZXJ0KG1pZ2h0QmVEaXJ0eShjaGlsZCkpO1xuICAgIGNvbnN0IHBhcmVudFdhc0NsZWFuID0gIW1pZ2h0QmVEaXJ0eShwYXJlbnQpO1xuICAgIGlmICghcGFyZW50LmRpcnR5Q2hpbGRyZW4pIHtcbiAgICAgICAgcGFyZW50LmRpcnR5Q2hpbGRyZW4gPSBlbXB0eVNldFBvb2wucG9wKCkgfHwgbmV3IFNldDtcbiAgICB9XG4gICAgZWxzZSBpZiAocGFyZW50LmRpcnR5Q2hpbGRyZW4uaGFzKGNoaWxkKSkge1xuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGtub3cgdGhpcyBjaGlsZCBpcyBkaXJ0eSwgdGhlbiB3ZSBtdXN0IGhhdmUgYWxyZWFkeVxuICAgICAgICAvLyBpbmZvcm1lZCBvdXIgb3duIHBhcmVudHMgdGhhdCB3ZSBhcmUgZGlydHksIHNvIHdlIGNhbiB0ZXJtaW5hdGVcbiAgICAgICAgLy8gdGhlIHJlY3Vyc2lvbiBlYXJseS5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwYXJlbnQuZGlydHlDaGlsZHJlbi5hZGQoY2hpbGQpO1xuICAgIC8vIElmIHBhcmVudCB3YXMgY2xlYW4gYmVmb3JlLCBpdCBqdXN0IGJlY2FtZSAocG9zc2libHkpIGRpcnR5IChhY2NvcmRpbmcgdG9cbiAgICAvLyBtaWdodEJlRGlydHkpLCBzaW5jZSB3ZSBqdXN0IGFkZGVkIGNoaWxkIHRvIHBhcmVudC5kaXJ0eUNoaWxkcmVuLlxuICAgIGlmIChwYXJlbnRXYXNDbGVhbikge1xuICAgICAgICByZXBvcnREaXJ0eShwYXJlbnQpO1xuICAgIH1cbn1cbi8vIExldCBhIHBhcmVudCBFbnRyeSBrbm93IHRoYXQgb25lIG9mIGl0cyBjaGlsZHJlbiBpcyBubyBsb25nZXIgZGlydHkuXG5mdW5jdGlvbiByZXBvcnRDbGVhbkNoaWxkKHBhcmVudCwgY2hpbGQpIHtcbiAgICAvLyBNdXN0IGhhdmUgY2FsbGVkIHJlbWVtYmVyQ2hpbGQoY2hpbGQpIGJlZm9yZSBjYWxsaW5nXG4gICAgLy8gcmVwb3J0Q2xlYW5DaGlsZChwYXJlbnQsIGNoaWxkKS5cbiAgICBhc3NlcnQocGFyZW50LmNoaWxkVmFsdWVzLmhhcyhjaGlsZCkpO1xuICAgIGFzc2VydCghbWlnaHRCZURpcnR5KGNoaWxkKSk7XG4gICAgY29uc3QgY2hpbGRWYWx1ZSA9IHBhcmVudC5jaGlsZFZhbHVlcy5nZXQoY2hpbGQpO1xuICAgIGlmIChjaGlsZFZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwYXJlbnQuY2hpbGRWYWx1ZXMuc2V0KGNoaWxkLCB2YWx1ZUNvcHkoY2hpbGQudmFsdWUpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIXZhbHVlSXMoY2hpbGRWYWx1ZSwgY2hpbGQudmFsdWUpKSB7XG4gICAgICAgIHBhcmVudC5zZXREaXJ0eSgpO1xuICAgIH1cbiAgICByZW1vdmVEaXJ0eUNoaWxkKHBhcmVudCwgY2hpbGQpO1xuICAgIGlmIChtaWdodEJlRGlydHkocGFyZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlcG9ydENsZWFuKHBhcmVudCk7XG59XG5mdW5jdGlvbiByZW1vdmVEaXJ0eUNoaWxkKHBhcmVudCwgY2hpbGQpIHtcbiAgICBjb25zdCBkYyA9IHBhcmVudC5kaXJ0eUNoaWxkcmVuO1xuICAgIGlmIChkYykge1xuICAgICAgICBkYy5kZWxldGUoY2hpbGQpO1xuICAgICAgICBpZiAoZGMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKGVtcHR5U2V0UG9vbC5sZW5ndGggPCBQT09MX1RBUkdFVF9TSVpFKSB7XG4gICAgICAgICAgICAgICAgZW1wdHlTZXRQb29sLnB1c2goZGMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50LmRpcnR5Q2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gUmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSB0aGlzIGVudHJ5IGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHRoZVxuLy8gcmVtb3ZlZCBjaGlsZHJlbi5cbmZ1bmN0aW9uIGZvcmdldENoaWxkcmVuKHBhcmVudCkge1xuICAgIGlmIChwYXJlbnQuY2hpbGRWYWx1ZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgcGFyZW50LmNoaWxkVmFsdWVzLmZvckVhY2goKF92YWx1ZSwgY2hpbGQpID0+IHtcbiAgICAgICAgICAgIGZvcmdldENoaWxkKHBhcmVudCwgY2hpbGQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoaXMgcGFyZW50IEVudHJ5IGZyb20gYW55IHNldHMgdG8gd2hpY2ggaXQgd2FzIGFkZGVkIGJ5IHRoZVxuICAgIC8vIGFkZFRvU2V0IG1ldGhvZC5cbiAgICBwYXJlbnQuZm9yZ2V0RGVwcygpO1xuICAgIC8vIEFmdGVyIHdlIGZvcmdldCBhbGwgb3VyIGNoaWxkcmVuLCB0aGlzLmRpcnR5Q2hpbGRyZW4gbXVzdCBiZSBlbXB0eVxuICAgIC8vIGFuZCB0aGVyZWZvcmUgbXVzdCBoYXZlIGJlZW4gcmVzZXQgdG8gbnVsbC5cbiAgICBhc3NlcnQocGFyZW50LmRpcnR5Q2hpbGRyZW4gPT09IG51bGwpO1xufVxuZnVuY3Rpb24gZm9yZ2V0Q2hpbGQocGFyZW50LCBjaGlsZCkge1xuICAgIGNoaWxkLnBhcmVudHMuZGVsZXRlKHBhcmVudCk7XG4gICAgcGFyZW50LmNoaWxkVmFsdWVzLmRlbGV0ZShjaGlsZCk7XG4gICAgcmVtb3ZlRGlydHlDaGlsZChwYXJlbnQsIGNoaWxkKTtcbn1cbmZ1bmN0aW9uIG1heWJlU3Vic2NyaWJlKGVudHJ5LCBhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiBlbnRyeS5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbWF5YmVVbnN1YnNjcmliZShlbnRyeSk7IC8vIFByZXZlbnQgZG91YmxlIHN1YnNjcmlwdGlvbnMuXG4gICAgICAgICAgICBlbnRyeS51bnN1YnNjcmliZSA9IGVudHJ5LnN1YnNjcmliZS5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBFbnRyeSBoYXMgYSBzdWJzY3JpYmUgZnVuY3Rpb24gYW5kIGl0IHRocmV3IGFuIGV4Y2VwdGlvblxuICAgICAgICAgICAgLy8gKG9yIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIGl0IHByZXZpb3VzbHkgcmV0dXJuZWQgbm93IHRocm93cyksXG4gICAgICAgICAgICAvLyByZXR1cm4gZmFsc2UgdG8gaW5kaWNhdGUgdGhhdCB3ZSB3ZXJlIG5vdCBhYmxlIHRvIHN1YnNjcmliZSAob3JcbiAgICAgICAgICAgIC8vIHVuc3Vic2NyaWJlKSwgYW5kIHRoaXMgRW50cnkgc2hvdWxkIHJlbWFpbiBkaXJ0eS5cbiAgICAgICAgICAgIGVudHJ5LnNldERpcnR5KCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUmV0dXJuaW5nIHRydWUgaW5kaWNhdGVzIGVpdGhlciB0aGF0IHRoZXJlIHdhcyBubyBlbnRyeS5zdWJzY3JpYmVcbiAgICAvLyBmdW5jdGlvbiBvciB0aGF0IGl0IHN1Y2NlZWRlZC5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVudHJ5LmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgcGFyZW50RW50cnlTbG90IH0gZnJvbSBcIi4vY29udGV4dC5qc1wiO1xuaW1wb3J0IHsgaGFzT3duUHJvcGVydHksIG1heWJlVW5zdWJzY3JpYmUsIGFycmF5RnJvbVNldCwgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5jb25zdCBFbnRyeU1ldGhvZHMgPSB7XG4gICAgc2V0RGlydHk6IHRydWUsXG4gICAgZGlzcG9zZTogdHJ1ZSxcbiAgICBmb3JnZXQ6IHRydWUsIC8vIEZ1bGx5IHJlbW92ZSBwYXJlbnQgRW50cnkgZnJvbSBMUlUgY2FjaGUgYW5kIGNvbXB1dGF0aW9uIGdyYXBoXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGRlcChvcHRpb25zKSB7XG4gICAgY29uc3QgZGVwc0J5S2V5ID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHN1YnNjcmliZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5zdWJzY3JpYmU7XG4gICAgZnVuY3Rpb24gZGVwZW5kKGtleSkge1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBwYXJlbnRFbnRyeVNsb3QuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgbGV0IGRlcCA9IGRlcHNCeUtleS5nZXQoa2V5KTtcbiAgICAgICAgICAgIGlmICghZGVwKSB7XG4gICAgICAgICAgICAgICAgZGVwc0J5S2V5LnNldChrZXksIGRlcCA9IG5ldyBTZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50LmRlcGVuZE9uKGRlcCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN1YnNjcmliZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgbWF5YmVVbnN1YnNjcmliZShkZXApO1xuICAgICAgICAgICAgICAgIGRlcC51bnN1YnNjcmliZSA9IHN1YnNjcmliZShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRlcGVuZC5kaXJ0eSA9IGZ1bmN0aW9uIGRpcnR5KGtleSwgZW50cnlNZXRob2ROYW1lKSB7XG4gICAgICAgIGNvbnN0IGRlcCA9IGRlcHNCeUtleS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGRlcCkge1xuICAgICAgICAgICAgY29uc3QgbSA9IChlbnRyeU1ldGhvZE5hbWUgJiZcbiAgICAgICAgICAgICAgICBoYXNPd25Qcm9wZXJ0eS5jYWxsKEVudHJ5TWV0aG9kcywgZW50cnlNZXRob2ROYW1lKSkgPyBlbnRyeU1ldGhvZE5hbWUgOiBcInNldERpcnR5XCI7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIHRvIHVzZSBhcnJheUZyb21TZXQoZGVwKS5mb3JFYWNoIGluc3RlYWQgb2YgZGVwLmZvckVhY2gsXG4gICAgICAgICAgICAvLyBiZWNhdXNlIG1vZGlmeWluZyBhIFNldCB3aGlsZSBpdGVyYXRpbmcgb3ZlciBpdCBjYW4gY2F1c2UgZWxlbWVudHMgaW5cbiAgICAgICAgICAgIC8vIHRoZSBTZXQgdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSBTZXQgYmVmb3JlIHRoZXkndmUgYmVlbiBpdGVyYXRlZCBvdmVyLlxuICAgICAgICAgICAgYXJyYXlGcm9tU2V0KGRlcCkuZm9yRWFjaChlbnRyeSA9PiBlbnRyeVttXSgpKTtcbiAgICAgICAgICAgIGRlcHNCeUtleS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIG1heWJlVW5zdWJzY3JpYmUoZGVwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGRlcGVuZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlcC5qcy5tYXAiLAogICAgImltcG9ydCB7IFRyaWUgfSBmcm9tIFwiQHdyeS90cmllXCI7XG5pbXBvcnQgeyBTdHJvbmdDYWNoZSB9IGZyb20gXCJAd3J5L2NhY2hlc1wiO1xuaW1wb3J0IHsgRW50cnkgfSBmcm9tIFwiLi9lbnRyeS5qc1wiO1xuaW1wb3J0IHsgcGFyZW50RW50cnlTbG90IH0gZnJvbSBcIi4vY29udGV4dC5qc1wiO1xuLy8gVGhlc2UgaGVscGVyIGZ1bmN0aW9ucyBhcmUgaW1wb3J0YW50IGZvciBtYWtpbmcgb3B0aW1pc20gd29yayB3aXRoXG4vLyBhc3luY2hyb25vdXMgY29kZS4gSW4gb3JkZXIgdG8gcmVnaXN0ZXIgcGFyZW50LWNoaWxkIGRlcGVuZGVuY2llcyxcbi8vIG9wdGltaXNtIG5lZWRzIHRvIGtub3cgYWJvdXQgYW55IGN1cnJlbnRseSBhY3RpdmUgcGFyZW50IGNvbXB1dGF0aW9ucy5cbi8vIEluIG9yZGluYXJ5IHN5bmNocm9ub3VzIGNvZGUsIHRoZSBwYXJlbnQgY29udGV4dCBpcyBpbXBsaWNpdCBpbiB0aGVcbi8vIGV4ZWN1dGlvbiBzdGFjaywgYnV0IGFzeW5jaHJvbm91cyBjb2RlIHJlcXVpcmVzIHNvbWUgZXh0cmEgZ3VpZGFuY2UgaW5cbi8vIG9yZGVyIHRvIHByb3BhZ2F0ZSBjb250ZXh0IGZyb20gb25lIGFzeW5jIHRhc2sgc2VnbWVudCB0byB0aGUgbmV4dC5cbmV4cG9ydCB7IGJpbmRDb250ZXh0LCBub0NvbnRleHQsIG5vblJlYWN0aXZlLCBzZXRUaW1lb3V0LCBhc3luY0Zyb21HZW4sIFNsb3QsIH0gZnJvbSBcIi4vY29udGV4dC5qc1wiO1xuLy8gQSBsaWdodGVyLXdlaWdodCBkZXBlbmRlbmN5LCBzaW1pbGFyIHRvIE9wdGltaXN0aWNXcmFwcGVyRnVuY3Rpb24sIGV4Y2VwdFxuLy8gd2l0aCBvbmx5IG9uZSBhcmd1bWVudCwgbm8gbWFrZUNhY2hlS2V5LCBubyB3cmFwcGVkIGZ1bmN0aW9uIHRvIHJlY29tcHV0ZSxcbi8vIGFuZCBubyByZXN1bHQgdmFsdWUuIFVzZWZ1bCBmb3IgcmVwcmVzZW50aW5nIGRlcGVuZGVuY3kgbGVhdmVzIGluIHRoZSBncmFwaFxuLy8gb2YgY29tcHV0YXRpb24uIFN1YnNjcmlwdGlvbnMgYXJlIHN1cHBvcnRlZC5cbmV4cG9ydCB7IGRlcCB9IGZyb20gXCIuL2RlcC5qc1wiO1xuLy8gVGhlIGRlZmF1bHRNYWtlQ2FjaGVLZXkgZnVuY3Rpb24gaXMgcmVtYXJrYWJseSBwb3dlcmZ1bCwgYmVjYXVzZSBpdCBnaXZlc1xuLy8gYSB1bmlxdWUgb2JqZWN0IGZvciBhbnkgc2hhbGxvdy1pZGVudGljYWwgbGlzdCBvZiBhcmd1bWVudHMuIElmIHlvdSBuZWVkXG4vLyB0byBpbXBsZW1lbnQgYSBjdXN0b20gbWFrZUNhY2hlS2V5IGZ1bmN0aW9uLCB5b3UgbWF5IGZpbmQgaXQgaGVscGZ1bCB0b1xuLy8gZGVsZWdhdGUgdGhlIGZpbmFsIHdvcmsgdG8gZGVmYXVsdE1ha2VDYWNoZUtleSwgd2hpY2ggaXMgd2h5IHdlIGV4cG9ydCBpdFxuLy8gaGVyZS4gSG93ZXZlciwgeW91IG1heSB3YW50IHRvIGF2b2lkIGRlZmF1bHRNYWtlQ2FjaGVLZXkgaWYgeW91ciBydW50aW1lXG4vLyBkb2VzIG5vdCBzdXBwb3J0IFdlYWtNYXAsIG9yIHlvdSBoYXZlIHRoZSBhYmlsaXR5IHRvIHJldHVybiBhIHN0cmluZyBrZXkuXG4vLyBJbiB0aG9zZSBjYXNlcywganVzdCB3cml0ZSB5b3VyIG93biBjdXN0b20gbWFrZUNhY2hlS2V5IGZ1bmN0aW9ucy5cbmxldCBkZWZhdWx0S2V5VHJpZTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0TWFrZUNhY2hlS2V5KC4uLmFyZ3MpIHtcbiAgICBjb25zdCB0cmllID0gZGVmYXVsdEtleVRyaWUgfHwgKGRlZmF1bHRLZXlUcmllID0gbmV3IFRyaWUodHlwZW9mIFdlYWtNYXAgPT09IFwiZnVuY3Rpb25cIikpO1xuICAgIHJldHVybiB0cmllLmxvb2t1cEFycmF5KGFyZ3MpO1xufVxuLy8gSWYgeW91J3JlIHBhcmFub2lkIGFib3V0IG1lbW9yeSBsZWFrcywgb3IgeW91IHdhbnQgdG8gYXZvaWQgdXNpbmcgV2Vha01hcFxuLy8gdW5kZXIgdGhlIGhvb2QsIGJ1dCB5b3Ugc3RpbGwgbmVlZCB0aGUgYmVoYXZpb3Igb2YgZGVmYXVsdE1ha2VDYWNoZUtleSxcbi8vIGltcG9ydCB0aGlzIGNvbnN0cnVjdG9yIHRvIGNyZWF0ZSB5b3VyIG93biB0cmllcy5cbmV4cG9ydCB7IFRyaWUgYXMgS2V5VHJpZSB9O1xuO1xuY29uc3QgY2FjaGVzID0gbmV3IFNldCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXAob3JpZ2luYWxGdW5jdGlvbiwgeyBtYXggPSBNYXRoLnBvdygyLCAxNiksIGtleUFyZ3MsIG1ha2VDYWNoZUtleSA9IGRlZmF1bHRNYWtlQ2FjaGVLZXksIG5vcm1hbGl6ZVJlc3VsdCwgc3Vic2NyaWJlLCBjYWNoZTogY2FjaGVPcHRpb24gPSBTdHJvbmdDYWNoZSwgfSA9IE9iamVjdC5jcmVhdGUobnVsbCkpIHtcbiAgICBjb25zdCBjYWNoZSA9IHR5cGVvZiBjYWNoZU9wdGlvbiA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gbmV3IGNhY2hlT3B0aW9uKG1heCwgZW50cnkgPT4gZW50cnkuZGlzcG9zZSgpKVxuICAgICAgICA6IGNhY2hlT3B0aW9uO1xuICAgIGNvbnN0IG9wdGltaXN0aWMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG1ha2VDYWNoZUtleS5hcHBseShudWxsLCBrZXlBcmdzID8ga2V5QXJncy5hcHBseShudWxsLCBhcmd1bWVudHMpIDogYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKGtleSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxGdW5jdGlvbi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlbnRyeSA9IGNhY2hlLmdldChrZXkpO1xuICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgICBjYWNoZS5zZXQoa2V5LCBlbnRyeSA9IG5ldyBFbnRyeShvcmlnaW5hbEZ1bmN0aW9uKSk7XG4gICAgICAgICAgICBlbnRyeS5ub3JtYWxpemVSZXN1bHQgPSBub3JtYWxpemVSZXN1bHQ7XG4gICAgICAgICAgICBlbnRyeS5zdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgICAgICAgICAvLyBHaXZlIHRoZSBFbnRyeSB0aGUgYWJpbGl0eSB0byB0cmlnZ2VyIGNhY2hlLmRlbGV0ZShrZXkpLCBldmVuIHRob3VnaFxuICAgICAgICAgICAgLy8gdGhlIEVudHJ5IGl0c2VsZiBkb2VzIG5vdCBrbm93IGFib3V0IGtleSBvciBjYWNoZS5cbiAgICAgICAgICAgIGVudHJ5LmZvcmdldCA9ICgpID0+IGNhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZW50cnkucmVjb21wdXRlKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgICAgICAvLyBNb3ZlIHRoaXMgZW50cnkgdG8gdGhlIGZyb250IG9mIHRoZSBsZWFzdC1yZWNlbnRseSB1c2VkIHF1ZXVlLFxuICAgICAgICAvLyBzaW5jZSB3ZSBqdXN0IGZpbmlzaGVkIGNvbXB1dGluZyBpdHMgdmFsdWUuXG4gICAgICAgIGNhY2hlLnNldChrZXksIGVudHJ5KTtcbiAgICAgICAgY2FjaGVzLmFkZChjYWNoZSk7XG4gICAgICAgIC8vIENsZWFuIHVwIGFueSBleGNlc3MgZW50cmllcyBpbiB0aGUgY2FjaGUsIGJ1dCBvbmx5IGlmIHRoZXJlIGlzIG5vXG4gICAgICAgIC8vIGFjdGl2ZSBwYXJlbnQgZW50cnksIG1lYW5pbmcgd2UncmUgbm90IGluIHRoZSBtaWRkbGUgb2YgYSBsYXJnZXJcbiAgICAgICAgLy8gY29tcHV0YXRpb24gdGhhdCBtaWdodCBiZSBmbHVtbW94ZWQgYnkgdGhlIGNsZWFuaW5nLlxuICAgICAgICBpZiAoIXBhcmVudEVudHJ5U2xvdC5oYXNWYWx1ZSgpKSB7XG4gICAgICAgICAgICBjYWNoZXMuZm9yRWFjaChjYWNoZSA9PiBjYWNoZS5jbGVhbigpKTtcbiAgICAgICAgICAgIGNhY2hlcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvcHRpbWlzdGljLCBcInNpemVcIiwge1xuICAgICAgICBnZXQ6ICgpID0+IGNhY2hlLnNpemUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIH0pO1xuICAgIE9iamVjdC5mcmVlemUob3B0aW1pc3RpYy5vcHRpb25zID0ge1xuICAgICAgICBtYXgsXG4gICAgICAgIGtleUFyZ3MsXG4gICAgICAgIG1ha2VDYWNoZUtleSxcbiAgICAgICAgbm9ybWFsaXplUmVzdWx0LFxuICAgICAgICBzdWJzY3JpYmUsXG4gICAgICAgIGNhY2hlLFxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGRpcnR5S2V5KGtleSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IGtleSAmJiBjYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICBlbnRyeS5zZXREaXJ0eSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wdGltaXN0aWMuZGlydHlLZXkgPSBkaXJ0eUtleTtcbiAgICBvcHRpbWlzdGljLmRpcnR5ID0gZnVuY3Rpb24gZGlydHkoKSB7XG4gICAgICAgIGRpcnR5S2V5KG1ha2VDYWNoZUtleS5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHBlZWtLZXkoa2V5KSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0ga2V5ICYmIGNhY2hlLmdldChrZXkpO1xuICAgICAgICBpZiAoZW50cnkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeS5wZWVrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3B0aW1pc3RpYy5wZWVrS2V5ID0gcGVla0tleTtcbiAgICBvcHRpbWlzdGljLnBlZWsgPSBmdW5jdGlvbiBwZWVrKCkge1xuICAgICAgICByZXR1cm4gcGVla0tleShtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBmb3JnZXRLZXkoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgPyBjYWNoZS5kZWxldGUoa2V5KSA6IGZhbHNlO1xuICAgIH1cbiAgICBvcHRpbWlzdGljLmZvcmdldEtleSA9IGZvcmdldEtleTtcbiAgICBvcHRpbWlzdGljLmZvcmdldCA9IGZ1bmN0aW9uIGZvcmdldCgpIHtcbiAgICAgICAgcmV0dXJuIGZvcmdldEtleShtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgICBvcHRpbWlzdGljLm1ha2VDYWNoZUtleSA9IG1ha2VDYWNoZUtleTtcbiAgICBvcHRpbWlzdGljLmdldEtleSA9IGtleUFyZ3MgPyBmdW5jdGlvbiBnZXRLZXkoKSB7XG4gICAgICAgIHJldHVybiBtYWtlQ2FjaGVLZXkuYXBwbHkobnVsbCwga2V5QXJncy5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcbiAgICB9IDogbWFrZUNhY2hlS2V5O1xuICAgIHJldHVybiBPYmplY3QuZnJlZXplKG9wdGltaXN0aWMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwKICAgICJpbXBvcnQgeyBnbG9iYWwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsL2dsb2JhbHNcIjtcbmNvbnN0IGNhY2hlU2l6ZVN5bWJvbCA9IFN5bWJvbC5mb3IoXCJhcG9sbG8uY2FjaGVTaXplXCIpO1xuLyoqXG4gKiBUaGUgZ2xvYmFsIGNhY2hlIHNpemUgY29uZmlndXJhdGlvbiBmb3IgQXBvbGxvIENsaWVudC5cbiAqXG4gKiBAcmVtYXJrc1xuICpcbiAqIFlvdSBjYW4gZGlyZWN0bHkgbW9kaWZ5IHRoaXMgb2JqZWN0LCBidXQgYW55IG1vZGlmaWNhdGlvbiB3aWxsXG4gKiBvbmx5IGhhdmUgYW4gZWZmZWN0IG9uIGNhY2hlcyB0aGF0IGFyZSBjcmVhdGVkIGFmdGVyIHRoZSBtb2RpZmljYXRpb24uXG4gKlxuICogU28gZm9yIGdsb2JhbCBjYWNoZXMsIHN1Y2ggYXMgYGNhbm9uaWNhbFN0cmluZ2lmeWAgYW5kIGBwcmludGAsXG4gKiB5b3UgbWlnaHQgbmVlZCB0byBjYWxsIGAucmVzZXRgIG9uIHRoZW0sIHdoaWNoIHdpbGwgZXNzZW50aWFsbHkgcmUtY3JlYXRlIHRoZW0uXG4gKlxuICogQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBzZXQgYGdsb2JhbFRoaXNbU3ltYm9sLmZvcihcImFwb2xsby5jYWNoZVNpemVcIildYCBiZWZvcmVcbiAqIHlvdSBsb2FkIHRoZSBBcG9sbG8gQ2xpZW50IHBhY2thZ2U6XG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogZ2xvYmFsVGhpc1tTeW1ib2wuZm9yKFwiYXBvbGxvLmNhY2hlU2l6ZVwiKV0gPSB7XG4gKiAgIHByaW50OiAxMDAsXG4gKiB9IHNhdGlzZmllcyBQYXJ0aWFsPENhY2hlU2l6ZXM+OyAvLyB0aGUgYHNhdGlzZmllc2AgaXMgb3B0aW9uYWwgaWYgdXNpbmcgVHlwZVNjcmlwdFxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBjYWNoZVNpemVzID0geyAuLi5nbG9iYWxbY2FjaGVTaXplU3ltYm9sXSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2l6ZXMuanMubWFwIiwKICAgICIvKipcbiogQGludGVybmFsXG4qIFxuKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE9wZXJhdGlvbk5hbWUoZG9jLCBmYWxsYmFjaykge1xuICAgIHJldHVybiAoZG9jLmRlZmluaXRpb25zLmZpbmQoKGRlZmluaXRpb24pID0+IGRlZmluaXRpb24ua2luZCA9PT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIgJiYgISFkZWZpbml0aW9uLm5hbWUpPy5uYW1lLnZhbHVlID8/IGZhbGxiYWNrKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldE9wZXJhdGlvbk5hbWUuanMubWFwXG4iLAogICAgIi8vIENoZWNrcyB0aGUgZG9jdW1lbnQgZm9yIGVycm9ycyBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGVyZSBpcyBhbiBlcnJvci5cbmltcG9ydCB7IFdlYWtDYWNoZSB9IGZyb20gXCJAd3J5L2NhY2hlc1wiO1xuaW1wb3J0IHsgS2luZCwgdmlzaXQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gXCJvcHRpbWlzbVwiO1xuaW1wb3J0IHsgX19ERVZfXyB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZW52aXJvbm1lbnRcIjtcbmltcG9ydCB7IGludmFyaWFudCwgbmV3SW52YXJpYW50RXJyb3IsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnZhcmlhbnRcIjtcbmltcG9ydCB7IGNhY2hlU2l6ZXMgfSBmcm9tIFwiLi4vY2FjaGluZy9zaXplcy5qc1wiO1xuaW1wb3J0IHsgZ2V0T3BlcmF0aW9uTmFtZSB9IGZyb20gXCIuL2dldE9wZXJhdGlvbk5hbWUuanNcIjtcbi8qKlxuKiBDaGVja3MgdGhlIGRvY3VtZW50IGZvciBlcnJvcnMgYW5kIHRocm93cyBhbiBleGNlcHRpb24gaWYgdGhlcmUgaXMgYW4gZXJyb3IuXG4qXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBjb25zdCBjaGVja0RvY3VtZW50ID0gd3JhcCgoZG9jLCBleHBlY3RlZFR5cGUpID0+IHtcbiAgICBpbnZhcmlhbnQoZG9jICYmIGRvYy5raW5kID09PSBcIkRvY3VtZW50XCIsIDEpO1xuICAgIGNvbnN0IG9wZXJhdGlvbnMgPSBkb2MuZGVmaW5pdGlvbnMuZmlsdGVyKChkKSA9PiBkLmtpbmQgPT09IFwiT3BlcmF0aW9uRGVmaW5pdGlvblwiKTtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgICBkb2MuZGVmaW5pdGlvbnMuZm9yRWFjaCgoZGVmaW5pdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKGRlZmluaXRpb24ua2luZCAhPT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uLmtpbmQgIT09IFwiRnJhZ21lbnREZWZpbml0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXdJbnZhcmlhbnRFcnJvcigyLCBkZWZpbml0aW9uLmtpbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaW52YXJpYW50KG9wZXJhdGlvbnMubGVuZ3RoIDw9IDEsIDMsIG9wZXJhdGlvbnMubGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGV4cGVjdGVkVHlwZSkge1xuICAgICAgICBpbnZhcmlhbnQoXG4gICAgICAgICAgICBvcGVyYXRpb25zLmxlbmd0aCA9PSAxICYmIG9wZXJhdGlvbnNbMF0ub3BlcmF0aW9uID09PSBleHBlY3RlZFR5cGUsXG4gICAgICAgICAgICA0LFxuICAgICAgICAgICAgZXhwZWN0ZWRUeXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWRUeXBlLFxuICAgICAgICAgICAgb3BlcmF0aW9uc1swXS5vcGVyYXRpb25cbiAgICAgICAgKTtcbiAgICB9XG4gICAgdmlzaXQoZG9jLCB7XG4gICAgICAgIEZpZWxkKGZpZWxkLCBfLCBfXywgcGF0aCkge1xuICAgICAgICAgICAgaWYgKGZpZWxkLmFsaWFzICYmXG4gICAgICAgICAgICAgICAgKGZpZWxkLmFsaWFzLnZhbHVlID09PSBcIl9fdHlwZW5hbWVcIiB8fFxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5hbGlhcy52YWx1ZS5zdGFydHNXaXRoKFwiX19hY19cIikpICYmXG4gICAgICAgICAgICAgICAgZmllbGQuYWxpYXMudmFsdWUgIT09IGZpZWxkLm5hbWUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAvLyBub3QgdXNpbmcgYGludmFyaWFudGAgc28gcGF0aCBjYWxjdWxhdGlvbiBvbmx5IGhhcHBlbnMgaW4gZXJyb3IgY2FzZVxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50ID0gZG9jLCBmaWVsZFBhdGggPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmtpbmQgPT09IEtpbmQuRklFTEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aC5wdXNoKGN1cnJlbnQuYWxpYXM/LnZhbHVlIHx8IGN1cnJlbnQubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmllbGRQYXRoLnNwbGljZSgtMSwgMSwgZmllbGQubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3SW52YXJpYW50RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIDUsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmFsaWFzLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZFBhdGguam9pbihcIi5cIiksXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbnNbMF0ub3BlcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBnZXRPcGVyYXRpb25OYW1lKGRvYywgXCIoYW5vbnltb3VzKVwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfSk7XG59LCB7XG4gICAgbWF4OiBjYWNoZVNpemVzW1wiY2hlY2tEb2N1bWVudFwiXSB8fCAyMDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wiY2hlY2tEb2N1bWVudFwiXSAqLyxcbiAgICBjYWNoZTogV2Vha0NhY2hlLFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGVja0RvY3VtZW50LmpzLm1hcFxuIiwKICAgICJjb25zdCB7IHRvU3RyaW5nIH0gPSBPYmplY3QucHJvdG90eXBlO1xuLyoqXG4qIERlZXBseSBjbG9uZXMgYSB2YWx1ZSB0byBjcmVhdGUgYSBuZXcgaW5zdGFuY2UuXG4qXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZXAodmFsdWUpIHtcbiAgICByZXR1cm4gX19jbG9uZURlZXAodmFsdWUpO1xufVxuZnVuY3Rpb24gX19jbG9uZURlZXAodmFsLCBzZWVuKSB7XG4gICAgc3dpdGNoICh0b1N0cmluZy5jYWxsKHZhbCkpIHtcbiAgICAgICAgY2FzZSBcIltvYmplY3QgQXJyYXldXCI6IHtcbiAgICAgICAgICAgIHNlZW4gPSBzZWVuIHx8IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGlmIChzZWVuLmhhcyh2YWwpKVxuICAgICAgICAgICAgICAgIHJldHVybiBzZWVuLmdldCh2YWwpO1xuICAgICAgICAgICAgY29uc3QgY29weSA9IHZhbC5zbGljZSgwKTtcbiAgICAgICAgICAgIHNlZW4uc2V0KHZhbCwgY29weSk7XG4gICAgICAgICAgICBjb3B5LmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBpKSB7XG4gICAgICAgICAgICAgICAgY29weVtpXSA9IF9fY2xvbmVEZWVwKGNoaWxkLCBzZWVuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIltvYmplY3QgT2JqZWN0XVwiOiB7XG4gICAgICAgICAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwKCk7XG4gICAgICAgICAgICBpZiAoc2Vlbi5oYXModmFsKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vlbi5nZXQodmFsKTtcbiAgICAgICAgICAgIC8vIEhpZ2ggZmlkZWxpdHkgcG9seWZpbGxzIG9mIE9iamVjdC5jcmVhdGUgYW5kIE9iamVjdC5nZXRQcm90b3R5cGVPZiBhcmVcbiAgICAgICAgICAgIC8vIHBvc3NpYmxlIGluIGFsbCBKUyBlbnZpcm9ubWVudHMsIHNvIHdlIHdpbGwgYXNzdW1lIHRoZXkgZXhpc3Qvd29yay5cbiAgICAgICAgICAgIGNvbnN0IGNvcHkgPSBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWwpKTtcbiAgICAgICAgICAgIHNlZW4uc2V0KHZhbCwgY29weSk7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh2YWwpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IF9fY2xvbmVEZWVwKHZhbFtrZXldLCBzZWVuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvbmVEZWVwLmpzLm1hcFxuIiwKICAgICIvKipcbiogTWVyZ2VzIHRoZSBwcm92aWRlZCBvYmplY3RzIHNoYWxsb3dseSBhbmQgcmVtb3Zlc1xuKiBhbGwgcHJvcGVydGllcyB3aXRoIGFuIGB1bmRlZmluZWRgIHZhbHVlXG4qXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wYWN0KC4uLm9iamVjdHMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBvYmplY3RzLmZvckVhY2goKG9iaikgPT4ge1xuICAgICAgICBpZiAoIW9iailcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gb2JqW2tleV07XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wYWN0LmpzLm1hcFxuIiwKICAgICIvKipcbiogVXRpbGl0eSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgbGlzdCBvZiBmcmFnbWVudCBkZWZpbml0aW9ucyBhbmQgbWFrZXMgYSBoYXNoIG91dCBvZiB0aGVtXG4qIHRoYXQgbWFwcyB0aGUgbmFtZSBvZiB0aGUgZnJhZ21lbnQgdG8gdGhlIGZyYWdtZW50IGRlZmluaXRpb24uXG4qXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcmFnbWVudE1hcChmcmFnbWVudHMgPSBbXSkge1xuICAgIGNvbnN0IHN5bVRhYmxlID0ge307XG4gICAgZnJhZ21lbnRzLmZvckVhY2goKGZyYWdtZW50KSA9PiB7XG4gICAgICAgIHN5bVRhYmxlW2ZyYWdtZW50Lm5hbWUudmFsdWVdID0gZnJhZ21lbnQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN5bVRhYmxlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlRnJhZ21lbnRNYXAuanMubWFwXG4iLAogICAgIi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gaXNOb25OdWxsT2JqZWN0KG9iaikge1xuICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzTm9uTnVsbE9iamVjdC5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgaXNOb25OdWxsT2JqZWN0IH0gZnJvbSBcIi4vaXNOb25OdWxsT2JqZWN0LmpzXCI7XG5jb25zdCB7IGhhc093blByb3BlcnR5IH0gPSBPYmplY3QucHJvdG90eXBlO1xuY29uc3QgZGVmYXVsdFJlY29uY2lsZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UsIHByb3BlcnR5KSB7XG4gICAgcmV0dXJuIHRoaXMubWVyZ2UodGFyZ2V0W3Byb3BlcnR5XSwgc291cmNlW3Byb3BlcnR5XSk7XG59O1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBjbGFzcyBEZWVwTWVyZ2VyIHtcbiAgICByZWNvbmNpbGVyO1xuICAgIGNvbnN0cnVjdG9yKHJlY29uY2lsZXIgPSBkZWZhdWx0UmVjb25jaWxlcikge1xuICAgICAgICB0aGlzLnJlY29uY2lsZXIgPSByZWNvbmNpbGVyO1xuICAgIH1cbiAgICBtZXJnZSh0YXJnZXQsIHNvdXJjZSwgLi4uY29udGV4dCkge1xuICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHNvdXJjZSkgJiYgaXNOb25OdWxsT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaCgoc291cmNlS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBzb3VyY2VLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gdGFyZ2V0W3NvdXJjZUtleV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2Vbc291cmNlS2V5XSAhPT0gdGFyZ2V0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVjb25jaWxlcih0YXJnZXQsIHNvdXJjZSwgc291cmNlS2V5LCAuLi5jb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgd2VsbC1pbXBsZW1lbnRlZCByZWNvbmNpbGVyIG1heSByZXR1cm4gdGFyZ2V0VmFsdWUgdG8gaW5kaWNhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBtZXJnZSBjaGFuZ2VkIG5vdGhpbmcgYWJvdXQgdGhlIHN0cnVjdHVyZSBvZiB0aGUgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdGFyZ2V0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLnNoYWxsb3dDb3B5Rm9yTWVyZ2UodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRbc291cmNlS2V5XSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gY29sbGlzaW9uLCB0aGUgdGFyZ2V0IGNhbiBzYWZlbHkgc2hhcmUgbWVtb3J5IHdpdGhcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNvdXJjZSwgYW5kIHRoZSByZWN1cnNpb24gY2FuIHRlcm1pbmF0ZSBoZXJlLlxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLnNoYWxsb3dDb3B5Rm9yTWVyZ2UodGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3NvdXJjZUtleV0gPSBzb3VyY2Vbc291cmNlS2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgc291cmNlIChvciB0YXJnZXQpIGlzIG5vdCBhbiBvYmplY3QsIGxldCBzb3VyY2UgcmVwbGFjZSB0YXJnZXQuXG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuICAgIGlzT2JqZWN0ID0gaXNOb25OdWxsT2JqZWN0O1xuICAgIHBhc3RDb3BpZXMgPSBuZXcgU2V0KCk7XG4gICAgc2hhbGxvd0NvcHlGb3JNZXJnZSh2YWx1ZSkge1xuICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhc3RDb3BpZXMuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfX3Byb3RvX186IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXN0Q29waWVzLmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURlZXBNZXJnZXIuanMubWFwXG4iLAogICAgImltcG9ydCB7IHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbiB9IGZyb20gXCIuL3ZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbi5qc1wiO1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0VmFsdWVzKGRlZmluaXRpb24pIHtcbiAgICBjb25zdCBkZWZhdWx0VmFsdWVzID0ge307XG4gICAgY29uc3QgZGVmcyA9IGRlZmluaXRpb24gJiYgZGVmaW5pdGlvbi52YXJpYWJsZURlZmluaXRpb25zO1xuICAgIGlmIChkZWZzICYmIGRlZnMubGVuZ3RoKSB7XG4gICAgICAgIGRlZnMuZm9yRWFjaCgoZGVmKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGVmLmRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihkZWZhdWx0VmFsdWVzLCBkZWYudmFyaWFibGUubmFtZSwgZGVmLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldERlZmF1bHRWYWx1ZXMuanMubWFwXG4iLAogICAgImltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW52YXJpYW50XCI7XG4vKipcbiogQGludGVybmFsXG4qIFxuKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbihzZWxlY3Rpb24sIGZyYWdtZW50TWFwKSB7XG4gICAgc3dpdGNoIChzZWxlY3Rpb24ua2luZCkge1xuICAgICAgICBjYXNlIFwiSW5saW5lRnJhZ21lbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb247XG4gICAgICAgIGNhc2UgXCJGcmFnbWVudFNwcmVhZFwiOiB7XG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudE5hbWUgPSBzZWxlY3Rpb24ubmFtZS52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnJhZ21lbnRNYXAgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmcmFnbWVudE1hcChmcmFnbWVudE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBmcmFnbWVudE1hcCAmJiBmcmFnbWVudE1hcFtmcmFnbWVudE5hbWVdO1xuICAgICAgICAgICAgaW52YXJpYW50KGZyYWdtZW50LCA5LCBmcmFnbWVudE5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIGZyYWdtZW50IHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldEZyYWdtZW50RnJvbVNlbGVjdGlvbi5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgaW52YXJpYW50LCBuZXdJbnZhcmlhbnRFcnJvciwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuLyoqXG4qIFJldHVybnMgYSBxdWVyeSBkb2N1bWVudCB3aGljaCBhZGRzIGEgc2luZ2xlIHF1ZXJ5IG9wZXJhdGlvbiB0aGF0IG9ubHlcbiogc3ByZWFkcyB0aGUgdGFyZ2V0IGZyYWdtZW50IGluc2lkZSBvZiBpdC5cbipcbiogU28gZm9yIGV4YW1wbGUgYSBkb2N1bWVudCBvZjpcbipcbiogYGBgZ3JhcGhxbFxuKiBmcmFnbWVudCBmb28gb24gRm9vIHtcbiogICBhXG4qICAgYlxuKiAgIGNcbiogfVxuKiBgYGBcbipcbiogVHVybnMgaW50bzpcbipcbiogYGBgZ3JhcGhxbFxuKiB7XG4qICAgLi4uZm9vXG4qIH1cbipcbiogZnJhZ21lbnQgZm9vIG9uIEZvbyB7XG4qICAgYVxuKiAgIGJcbiogICBjXG4qIH1cbiogYGBgXG4qXG4qIFRoZSB0YXJnZXQgZnJhZ21lbnQgd2lsbCBlaXRoZXIgYmUgdGhlIG9ubHkgZnJhZ21lbnQgaW4gdGhlIGRvY3VtZW50LCBvciBhXG4qIGZyYWdtZW50IHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgYGZyYWdtZW50TmFtZWAuIElmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmVcbiogZnJhZ21lbnQsIGJ1dCBhIGBmcmFnbWVudE5hbWVgIHdhcyBub3QgZGVmaW5lZCB0aGVuIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRRdWVyeURvY3VtZW50KGRvY3VtZW50LCBmcmFnbWVudE5hbWUpIHtcbiAgICBsZXQgYWN0dWFsRnJhZ21lbnROYW1lID0gZnJhZ21lbnROYW1lO1xuICAgIC8vIEJ1aWxkIGFuIGFycmF5IG9mIGFsbCBvdXIgZnJhZ21lbnQgZGVmaW5pdGlvbnMgdGhhdCB3aWxsIGJlIHVzZWQgZm9yXG4gICAgLy8gdmFsaWRhdGlvbnMuIFdlIGFsc28gZG8gc29tZSB2YWxpZGF0aW9ucyBvbiB0aGUgb3RoZXIgZGVmaW5pdGlvbnMgaW4gdGhlXG4gICAgLy8gZG9jdW1lbnQgd2hpbGUgYnVpbGRpbmcgdGhpcyBsaXN0LlxuICAgIGNvbnN0IGZyYWdtZW50cyA9IFtdO1xuICAgIGRvY3VtZW50LmRlZmluaXRpb25zLmZvckVhY2goKGRlZmluaXRpb24pID0+IHtcbiAgICAgICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgd2UgZW5jb3VudGVyIGFuIG9wZXJhdGlvbiBkZWZpbml0aW9uIGJlY2F1c2Ugd2Ugd2lsbFxuICAgICAgICAvLyBkZWZpbmUgb3VyIG93biBvcGVyYXRpb24gZGVmaW5pdGlvbiBsYXRlciBvbi5cbiAgICAgICAgaWYgKGRlZmluaXRpb24ua2luZCA9PT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ld0ludmFyaWFudEVycm9yKFxuICAgICAgICAgICAgICAgIDEwLFxuICAgICAgICAgICAgICAgIGRlZmluaXRpb24ub3BlcmF0aW9uLFxuICAgICAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA/IGAgbmFtZWQgJyR7ZGVmaW5pdGlvbi5uYW1lLnZhbHVlfSdgIDogXCJcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgb3VyIGRlZmluaXRpb24gdG8gdGhlIGZyYWdtZW50cyBhcnJheSBpZiBpdCBpcyBhIGZyYWdtZW50XG4gICAgICAgIC8vIGRlZmluaXRpb24uXG4gICAgICAgIGlmIChkZWZpbml0aW9uLmtpbmQgPT09IFwiRnJhZ21lbnREZWZpbml0aW9uXCIpIHtcbiAgICAgICAgICAgIGZyYWdtZW50cy5wdXNoKGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gSWYgdGhlIHVzZXIgZGlkIG5vdCBnaXZlIHVzIGEgZnJhZ21lbnQgbmFtZSB0aGVuIGxldCB1cyB0cnkgdG8gZ2V0IGFcbiAgICAvLyBuYW1lIGZyb20gYSBzaW5nbGUgZnJhZ21lbnQgaW4gdGhlIGRlZmluaXRpb24uXG4gICAgaWYgKHR5cGVvZiBhY3R1YWxGcmFnbWVudE5hbWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaW52YXJpYW50KGZyYWdtZW50cy5sZW5ndGggPT09IDEsIDExLCBmcmFnbWVudHMubGVuZ3RoKTtcbiAgICAgICAgYWN0dWFsRnJhZ21lbnROYW1lID0gZnJhZ21lbnRzWzBdLm5hbWUudmFsdWU7XG4gICAgfVxuICAgIC8vIEdlbmVyYXRlIGEgcXVlcnkgZG9jdW1lbnQgd2l0aCBhbiBvcGVyYXRpb24gdGhhdCBzaW1wbHkgc3ByZWFkcyB0aGVcbiAgICAvLyBmcmFnbWVudCBpbnNpZGUgb2YgaXQuXG4gICAgY29uc3QgcXVlcnkgPSB7XG4gICAgICAgIC4uLmRvY3VtZW50LFxuICAgICAgICBkZWZpbml0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwiT3BlcmF0aW9uRGVmaW5pdGlvblwiLFxuICAgICAgICAgICAgICAgIC8vIE9wZXJhdGlvblR5cGVOb2RlIGlzIGFuIGVudW1cbiAgICAgICAgICAgICAgICBvcGVyYXRpb246IFwicXVlcnlcIixcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25TZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogXCJTZWxlY3Rpb25TZXRcIixcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IFwiRnJhZ21lbnRTcHJlYWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IFwiTmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYWN0dWFsRnJhZ21lbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4uZG9jdW1lbnQuZGVmaW5pdGlvbnMsXG4gICAgICAgIF0sXG4gICAgfTtcbiAgICByZXR1cm4gcXVlcnk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRGcmFnbWVudFF1ZXJ5RG9jdW1lbnQuanMubWFwXG4iLAogICAgImltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW52YXJpYW50XCI7XG4vKipcbiogQGludGVybmFsXG4qIFxuKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RGVmaW5pdGlvbihkb2MpIHtcbiAgICBpbnZhcmlhbnQoZG9jLmtpbmQgPT09IFwiRG9jdW1lbnRcIiwgNik7XG4gICAgaW52YXJpYW50KGRvYy5kZWZpbml0aW9ucy5sZW5ndGggPD0gMSwgNyk7XG4gICAgY29uc3QgZnJhZ21lbnREZWYgPSBkb2MuZGVmaW5pdGlvbnNbMF07XG4gICAgaW52YXJpYW50KGZyYWdtZW50RGVmLmtpbmQgPT09IFwiRnJhZ21lbnREZWZpbml0aW9uXCIsIDgpO1xuICAgIHJldHVybiBmcmFnbWVudERlZjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldEZyYWdtZW50RGVmaW5pdGlvbi5qcy5tYXBcbiIsCiAgICAiLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudERlZmluaXRpb25zKGRvYykge1xuICAgIHJldHVybiBkb2MuZGVmaW5pdGlvbnMuZmlsdGVyKChkZWZpbml0aW9uKSA9PiBkZWZpbml0aW9uLmtpbmQgPT09IFwiRnJhZ21lbnREZWZpbml0aW9uXCIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0RnJhZ21lbnREZWZpbml0aW9ucy5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgbmV3SW52YXJpYW50RXJyb3IgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuaW1wb3J0IHsgY2hlY2tEb2N1bWVudCB9IGZyb20gXCIuL2NoZWNrRG9jdW1lbnQuanNcIjtcbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3Qgb3BlcmF0aW9uIGRlZmluaXRpb24gZnJvbSBhIEdyYXBoUUwgZG9jdW1lbnQuIFRoZSBmdW5jdGlvblxuICogcHJpb3JpdGl6ZXMgb3BlcmF0aW9uIGRlZmluaXRpb25zIG92ZXIgZnJhZ21lbnQgZGVmaW5pdGlvbnMsIHdoaWNoIG1ha2VzIGl0XG4gKiBzdWl0YWJsZSBmb3IgZG9jdW1lbnRzIHRoYXQgbWF5IGNvbnRhaW4gYm90aC4gSWYgbm8gb3BlcmF0aW9uIGRlZmluaXRpb24gaXNcbiAqIGZvdW5kLCB0aGUgZmlyc3QgZnJhZ21lbnQgZGVmaW5pdGlvbiB3aWxsIGJlIHJldHVybmVkLiBJZiBubyBkZWZpbml0aW9ucyBhcmVcbiAqIGZvdW5kLCBhbiBlcnJvciBpcyB0aHJvd24uXG4gKlxuICogQHJlbWFya3NcbiAqXG4gKiBVc2UgdGhpcyBmdW5jdGlvbiB3aGVuIHlvdSBuZWVkIHRvIHBlcmZvcm0gbW9yZSBhZHZhbmNlZCB0YXNrcyB3aXRoIHRoZSBtYWluXG4gKiBkZWZpbml0aW9uIEFTVCBub2RlLiBJZiB5b3Ugd2FudCB0byBkZXRlcm1pbmUgd2hlbiBhIGRvY3VtZW50IGlzIGEgc3BlY2lmaWNcbiAqIG9wZXJhdGlvbiB0eXBlLCBwcmVmZXIgdGhlIGBpc1F1ZXJ5T3BlcmF0aW9uYCwgYGlzTXV0YXRpb25PcGVyYXRpb25gLCBhbmRcbiAqIGBpc1N1YnNjcmlwdGlvbk9wZXJhdGlvbmAgdXRpbGl0eSBmdW5jdGlvbnMgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0gcXVlcnlEb2MgLSBUaGUgR3JhcGhRTCBkb2N1bWVudCB0byBleHRyYWN0IHRoZSBkZWZpbml0aW9uIGZyb21cbiAqIEByZXR1cm5zIFRoZSBtYWluIG9wZXJhdGlvbiBvciBmcmFnbWVudCBkZWZpbml0aW9uIEFTVCBub2RlXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZ3FsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50XCI7XG4gKiBpbXBvcnQgeyBnZXRNYWluRGVmaW5pdGlvbiB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbiAqXG4gKiBjb25zdCBxdWVyeSA9IGdxbGBcbiAqICAgcXVlcnkgR2V0VXNlcigkaWQ6IElEISkge1xuICogICAgIHVzZXIoaWQ6ICRpZCkge1xuICogICAgICAgbmFtZVxuICogICAgICAgZW1haWxcbiAqICAgICB9XG4gKiAgIH1cbiAqIGA7XG4gKlxuICogY29uc3QgZGVmaW5pdGlvbiA9IGdldE1haW5EZWZpbml0aW9uKHF1ZXJ5KTtcbiAqIGBgYFxuICpcbiAqIEB0aHJvd3MgV2hlbiB0aGUgZG9jdW1lbnQgY29udGFpbnMgbm8gb3BlcmF0aW9uIG9yIGZyYWdtZW50IGRlZmluaXRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYWluRGVmaW5pdGlvbihxdWVyeURvYykge1xuICAgIGNoZWNrRG9jdW1lbnQocXVlcnlEb2MpO1xuICAgIGxldCBmcmFnbWVudERlZmluaXRpb247XG4gICAgZm9yIChsZXQgZGVmaW5pdGlvbiBvZiBxdWVyeURvYy5kZWZpbml0aW9ucykge1xuICAgICAgICBpZiAoZGVmaW5pdGlvbi5raW5kID09PSBcIk9wZXJhdGlvbkRlZmluaXRpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZmluaXRpb24ua2luZCA9PT0gXCJGcmFnbWVudERlZmluaXRpb25cIiAmJiAhZnJhZ21lbnREZWZpbml0aW9uKSB7XG4gICAgICAgICAgICAvLyB3ZSBkbyB0aGlzIGJlY2F1c2Ugd2Ugd2FudCB0byBhbGxvdyBtdWx0aXBsZSBmcmFnbWVudCBkZWZpbml0aW9uc1xuICAgICAgICAgICAgLy8gdG8gcHJlY2VkZSBhbiBvcGVyYXRpb24gZGVmaW5pdGlvbi5cbiAgICAgICAgICAgIGZyYWdtZW50RGVmaW5pdGlvbiA9IGRlZmluaXRpb247XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZyYWdtZW50RGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnREZWZpbml0aW9uO1xuICAgIH1cbiAgICB0aHJvdyBuZXdJbnZhcmlhbnRFcnJvcigxMik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRNYWluRGVmaW5pdGlvbi5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgY2hlY2tEb2N1bWVudCB9IGZyb20gXCIuL2NoZWNrRG9jdW1lbnQuanNcIjtcbi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbihkb2MpIHtcbiAgICBjaGVja0RvY3VtZW50KGRvYyk7XG4gICAgcmV0dXJuIGRvYy5kZWZpbml0aW9ucy5maWx0ZXIoKGRlZmluaXRpb24pID0+IGRlZmluaXRpb24ua2luZCA9PT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIpWzBdO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0T3BlcmF0aW9uRGVmaW5pdGlvbi5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnZhcmlhbnRcIjtcbmltcG9ydCB7IGdldE9wZXJhdGlvbkRlZmluaXRpb24gfSBmcm9tIFwiLi9nZXRPcGVyYXRpb25EZWZpbml0aW9uLmpzXCI7XG4vKipcbiogQGludGVybmFsXG4qIFxuKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXJ5RGVmaW5pdGlvbihkb2MpIHtcbiAgICBjb25zdCBxdWVyeURlZiA9IGdldE9wZXJhdGlvbkRlZmluaXRpb24oZG9jKTtcbiAgICBpbnZhcmlhbnQocXVlcnlEZWYgJiYgcXVlcnlEZWYub3BlcmF0aW9uID09PSBcInF1ZXJ5XCIsIDEzKTtcbiAgICByZXR1cm4gcXVlcnlEZWY7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRRdWVyeURlZmluaXRpb24uanMubWFwXG4iLAogICAgImltcG9ydCB7IFN0cm9uZ0NhY2hlLCBXZWFrQ2FjaGUgfSBmcm9tIFwiQHdyeS9jYWNoZXNcIjtcbmNvbnN0IHNjaGVkdWxlZENsZWFudXAgPSBuZXcgV2Vha1NldCgpO1xuZnVuY3Rpb24gc2NoZWR1bGUoY2FjaGUpIHtcbiAgICBpZiAoY2FjaGUuc2l6ZSA8PSAoY2FjaGUubWF4IHx8IC0xKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghc2NoZWR1bGVkQ2xlYW51cC5oYXMoY2FjaGUpKSB7XG4gICAgICAgIHNjaGVkdWxlZENsZWFudXAuYWRkKGNhY2hlKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjYWNoZS5jbGVhbigpO1xuICAgICAgICAgICAgc2NoZWR1bGVkQ2xlYW51cC5kZWxldGUoY2FjaGUpO1xuICAgICAgICB9LCAxMDApO1xuICAgIH1cbn1cbi8qKlxuKiBAaW50ZXJuYWxcbiogQSB2ZXJzaW9uIG9mIFdlYWtDYWNoZSB0aGF0IHdpbGwgYXV0by1zY2hlZHVsZSBhIGNsZWFudXAgb2YgdGhlIGNhY2hlIHdoZW5cbiogYSBuZXcgaXRlbSBpcyBhZGRlZCBhbmQgdGhlIGNhY2hlIHJlYWNoZWQgbWF4aW11bSBzaXplLlxuKiBUaHJvdHRsZWQgdG8gb25jZSBwZXIgMTAwbXMuXG4qXG4qIEBwcml2YXRlUmVtYXJrc1xuKiBTaG91bGQgYmUgdXNlZCB0aHJvdWdob3V0IHRoZSByZXN0IG9mIHRoZSBjb2RlYmFzZSBpbnN0ZWFkIG9mIFdlYWtDYWNoZSxcbiogd2l0aCB0aGUgbm90YWJsZSBleGNlcHRpb24gb2YgdXNhZ2UgaW4gYHdyYXBgIGZyb20gYG9wdGltaXNtYCAtIHRoYXQgb25lXG4qIGFscmVhZHkgaGFuZGxlcyBjbGVhbnVwIGFuZCBzaG91bGQgcmVtYWluIGEgYFdlYWtDYWNoZWAuXG4qIFxuKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4qL1xuZXhwb3J0IGNvbnN0IEF1dG9DbGVhbmVkV2Vha0NhY2hlID0gZnVuY3Rpb24gKG1heCwgZGlzcG9zZSkge1xuICAgIC8qXG4gICAgU29tZSBidWlsZHMgb2YgYFdlYWtDYWNoZWAgYXJlIGZ1bmN0aW9uIHByb3RvdHlwZXMsIHNvbWUgYXJlIGNsYXNzZXMuXG4gICAgVGhpcyBsaWJyYXJ5IHN0aWxsIGJ1aWxkcyB3aXRoIGFuIEVTNSB0YXJnZXQsIHNvIHdlIGNhbid0IGV4dGVuZCB0aGVcbiAgICByZWFsIGNsYXNzZXMuXG4gICAgSW5zdGVhZCwgd2UgaGF2ZSB0byB1c2UgdGhpcyB3b3JrYXJvdW5kIHVudGlsIHdlIHN3aXRjaCB0byBhIG5ld2VyIGJ1aWxkXG4gICAgdGFyZ2V0LlxuICAgICovXG4gICAgY29uc3QgY2FjaGUgPSBuZXcgV2Vha0NhY2hlKG1heCwgZGlzcG9zZSk7XG4gICAgY2FjaGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgcmV0ID0gV2Vha0NhY2hlLnByb3RvdHlwZS5zZXQuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcbiAgICAgICAgc2NoZWR1bGUodGhpcyk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICByZXR1cm4gY2FjaGU7XG59O1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBBIHZlcnNpb24gb2YgU3Ryb25nQ2FjaGUgdGhhdCB3aWxsIGF1dG8tc2NoZWR1bGUgYSBjbGVhbnVwIG9mIHRoZSBjYWNoZSB3aGVuXG4qIGEgbmV3IGl0ZW0gaXMgYWRkZWQgYW5kIHRoZSBjYWNoZSByZWFjaGVkIG1heGltdW0gc2l6ZS5cbiogVGhyb3R0bGVkIHRvIG9uY2UgcGVyIDEwMG1zLlxuKlxuKiBAcHJpdmF0ZVJlbWFya3NcbiogU2hvdWxkIGJlIHVzZWQgdGhyb3VnaG91dCB0aGUgcmVzdCBvZiB0aGUgY29kZWJhc2UgaW5zdGVhZCBvZiBTdHJvbmdDYWNoZSxcbiogd2l0aCB0aGUgbm90YWJsZSBleGNlcHRpb24gb2YgdXNhZ2UgaW4gYHdyYXBgIGZyb20gYG9wdGltaXNtYCAtIHRoYXQgb25lXG4qIGFscmVhZHkgaGFuZGxlcyBjbGVhbnVwIGFuZCBzaG91bGQgcmVtYWluIGEgYFN0cm9uZ0NhY2hlYC5cbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgY29uc3QgQXV0b0NsZWFuZWRTdHJvbmdDYWNoZSA9IGZ1bmN0aW9uIChtYXgsIGRpc3Bvc2UpIHtcbiAgICAvKlxuICAgIFNvbWUgYnVpbGRzIG9mIGBTdHJvbmdDYWNoZWAgYXJlIGZ1bmN0aW9uIHByb3RvdHlwZXMsIHNvbWUgYXJlIGNsYXNzZXMuXG4gICAgVGhpcyBsaWJyYXJ5IHN0aWxsIGJ1aWxkcyB3aXRoIGFuIEVTNSB0YXJnZXQsIHNvIHdlIGNhbid0IGV4dGVuZCB0aGVcbiAgICByZWFsIGNsYXNzZXMuXG4gICAgSW5zdGVhZCwgd2UgaGF2ZSB0byB1c2UgdGhpcyB3b3JrYXJvdW5kIHVudGlsIHdlIHN3aXRjaCB0byBhIG5ld2VyIGJ1aWxkXG4gICAgdGFyZ2V0LlxuICAgICovXG4gICAgY29uc3QgY2FjaGUgPSBuZXcgU3Ryb25nQ2FjaGUobWF4LCBkaXNwb3NlKTtcbiAgICBjYWNoZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBjb25zdCByZXQgPSBTdHJvbmdDYWNoZS5wcm90b3R5cGUuc2V0LmNhbGwodGhpcywga2V5LCB2YWx1ZSk7XG4gICAgICAgIHNjaGVkdWxlKHRoaXMpO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG4gICAgcmV0dXJuIGNhY2hlO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlcy5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgX19ERVZfXyB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZW52aXJvbm1lbnRcIjtcbmltcG9ydCB7IGNhY2hlU2l6ZXMgfSBmcm9tIFwiLi4vY2FjaGluZy9zaXplcy5qc1wiO1xuY29uc3QgZ2xvYmFsQ2FjaGVzID0ge307XG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJHbG9iYWxDYWNoZShuYW1lLCBnZXRTaXplKSB7XG4gICAgZ2xvYmFsQ2FjaGVzW25hbWVdID0gZ2V0U2l6ZTtcbn1cbi8qKlxuKiBGb3IgaW50ZXJuYWwgcHVycG9zZXMgb25seSAtIHBsZWFzZSBjYWxsIGBBcG9sbG9DbGllbnQuZ2V0TWVtb3J5SW50ZXJuYWxzYCBpbnN0ZWFkXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBjb25zdCBnZXRBcG9sbG9DbGllbnRNZW1vcnlJbnRlcm5hbHMgPSBfX0RFVl9fID9cbiAgICBfZ2V0QXBvbGxvQ2xpZW50TWVtb3J5SW50ZXJuYWxzXG4gICAgOiB1bmRlZmluZWQ7XG4vKipcbiogRm9yIGludGVybmFsIHB1cnBvc2VzIG9ubHkgLSBwbGVhc2UgY2FsbCBgQXBvbGxvQ2xpZW50LmdldE1lbW9yeUludGVybmFsc2AgaW5zdGVhZFxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgY29uc3QgZ2V0SW5NZW1vcnlDYWNoZU1lbW9yeUludGVybmFscyA9IF9fREVWX18gP1xuICAgIF9nZXRJbk1lbW9yeUNhY2hlTWVtb3J5SW50ZXJuYWxzXG4gICAgOiB1bmRlZmluZWQ7XG4vKipcbiogRm9yIGludGVybmFsIHB1cnBvc2VzIG9ubHkgLSBwbGVhc2UgY2FsbCBgQXBvbGxvQ2xpZW50LmdldE1lbW9yeUludGVybmFsc2AgaW5zdGVhZFxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgY29uc3QgZ2V0QXBvbGxvQ2FjaGVNZW1vcnlJbnRlcm5hbHMgPSBfX0RFVl9fID9cbiAgICBfZ2V0QXBvbGxvQ2FjaGVNZW1vcnlJbnRlcm5hbHNcbiAgICA6IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGdldEN1cnJlbnRDYWNoZVNpemVzKCkge1xuICAgIC8vIGBkZWZhdWx0Q2FjaGVTaXplc2AgaXMgYSBgY29uc3QgZW51bWAgdGhhdCB3aWxsIGJlIGlubGluZWQgZHVyaW5nIGJ1aWxkLCBzbyB3ZSBoYXZlIHRvIHJlY29uc3RydWN0IGl0J3Mgc2hhcGUgaGVyZVxuICAgIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgICAgICBjYW5vbmljYWxTdHJpbmdpZnk6IDEwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJjYW5vbmljYWxTdHJpbmdpZnlcIl0gKi8sXG4gICAgICAgIGNoZWNrRG9jdW1lbnQ6IDIwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJjaGVja0RvY3VtZW50XCJdICovLFxuICAgICAgICBwcmludDogMjAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcInByaW50XCJdICovLFxuICAgICAgICBcImRvY3VtZW50VHJhbnNmb3JtLmNhY2hlXCI6IDIwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJkb2N1bWVudFRyYW5zZm9ybS5jYWNoZVwiXSAqLyxcbiAgICAgICAgXCJxdWVyeU1hbmFnZXIuZ2V0RG9jdW1lbnRJbmZvXCI6IDIwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJxdWVyeU1hbmFnZXIuZ2V0RG9jdW1lbnRJbmZvXCJdICovLFxuICAgICAgICBcIlBlcnNpc3RlZFF1ZXJ5TGluay5wZXJzaXN0ZWRRdWVyeUhhc2hlc1wiOiAyMDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wiUGVyc2lzdGVkUXVlcnlMaW5rLnBlcnNpc3RlZFF1ZXJ5SGFzaGVzXCJdICovLFxuICAgICAgICBcImZyYWdtZW50UmVnaXN0cnkudHJhbnNmb3JtXCI6IDIwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJmcmFnbWVudFJlZ2lzdHJ5LnRyYW5zZm9ybVwiXSAqLyxcbiAgICAgICAgXCJmcmFnbWVudFJlZ2lzdHJ5Lmxvb2t1cFwiOiAxMDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wiZnJhZ21lbnRSZWdpc3RyeS5sb29rdXBcIl0gKi8sXG4gICAgICAgIFwiZnJhZ21lbnRSZWdpc3RyeS5maW5kRnJhZ21lbnRTcHJlYWRzXCI6IDQwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJmcmFnbWVudFJlZ2lzdHJ5LmZpbmRGcmFnbWVudFNwcmVhZHNcIl0gKi8sXG4gICAgICAgIFwiY2FjaGUuZnJhZ21lbnRRdWVyeURvY3VtZW50c1wiOiAxMDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wiY2FjaGUuZnJhZ21lbnRRdWVyeURvY3VtZW50c1wiXSAqLyxcbiAgICAgICAgXCJyZW1vdmVUeXBlbmFtZUZyb21WYXJpYWJsZXMuZ2V0VmFyaWFibGVEZWZpbml0aW9uc1wiOiAyMDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wicmVtb3ZlVHlwZW5hbWVGcm9tVmFyaWFibGVzLmdldFZhcmlhYmxlRGVmaW5pdGlvbnNcIl0gKi8sXG4gICAgICAgIFwiaW5NZW1vcnlDYWNoZS5tYXliZUJyb2FkY2FzdFdhdGNoXCI6IDUwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJpbk1lbW9yeUNhY2hlLm1heWJlQnJvYWRjYXN0V2F0Y2hcIl0gKi8sXG4gICAgICAgIFwiaW5NZW1vcnlDYWNoZS5leGVjdXRlU2VsZWN0aW9uU2V0XCI6IDUwMDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wiaW5NZW1vcnlDYWNoZS5leGVjdXRlU2VsZWN0aW9uU2V0XCJdICovLFxuICAgICAgICBcImluTWVtb3J5Q2FjaGUuZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXlcIjogMTAwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJpbk1lbW9yeUNhY2hlLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5XCJdICovLFxuICAgIH07XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhkZWZhdWx0cykubWFwKChbaywgdl0pID0+IFtcbiAgICAgICAgayxcbiAgICAgICAgY2FjaGVTaXplc1trXSB8fCB2LFxuICAgIF0pKTtcbn1cbmZ1bmN0aW9uIF9nZXRBcG9sbG9DbGllbnRNZW1vcnlJbnRlcm5hbHMoKSB7XG4gICAgaWYgKCFfX0RFVl9fKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJvbmx5IHN1cHBvcnRlZCBpbiBkZXZlbG9wbWVudCBtb2RlXCIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGxpbWl0czogZ2V0Q3VycmVudENhY2hlU2l6ZXMoKSxcbiAgICAgICAgc2l6ZXM6IHtcbiAgICAgICAgICAgIHByaW50OiBnbG9iYWxDYWNoZXMucHJpbnQ/LigpLFxuICAgICAgICAgICAgY2Fub25pY2FsU3RyaW5naWZ5OiBnbG9iYWxDYWNoZXMuY2Fub25pY2FsU3RyaW5naWZ5Py4oKSxcbiAgICAgICAgICAgIGxpbmtzOiBsaW5rSW5mbyh0aGlzLmxpbmspLFxuICAgICAgICAgICAgcXVlcnlNYW5hZ2VyOiB7XG4gICAgICAgICAgICAgICAgZ2V0RG9jdW1lbnRJbmZvOiB0aGlzW1wicXVlcnlNYW5hZ2VyXCJdW1widHJhbnNmb3JtQ2FjaGVcIl0uc2l6ZSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudFRyYW5zZm9ybXM6IHRyYW5zZm9ybUluZm8odGhpc1tcInF1ZXJ5TWFuYWdlclwiXS5kb2N1bWVudFRyYW5zZm9ybSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4udGhpcy5jYWNoZS5nZXRNZW1vcnlJbnRlcm5hbHM/LigpLFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBfZ2V0QXBvbGxvQ2FjaGVNZW1vcnlJbnRlcm5hbHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2FjaGU6IHtcbiAgICAgICAgICAgIGZyYWdtZW50UXVlcnlEb2N1bWVudHM6IGdldFdyYXBwZXJJbmZvcm1hdGlvbih0aGlzW1wiZ2V0RnJhZ21lbnREb2NcIl0pLFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBfZ2V0SW5NZW1vcnlDYWNoZU1lbW9yeUludGVybmFscygpIHtcbiAgICBjb25zdCBmcmFnbWVudHMgPSB0aGlzLmNvbmZpZy5mcmFnbWVudHM7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uX2dldEFwb2xsb0NhY2hlTWVtb3J5SW50ZXJuYWxzLmFwcGx5KHRoaXMpLFxuICAgICAgICBhZGRUeXBlbmFtZURvY3VtZW50VHJhbnNmb3JtOiB0cmFuc2Zvcm1JbmZvKHRoaXNbXCJhZGRUeXBlbmFtZVRyYW5zZm9ybVwiXSksXG4gICAgICAgIGluTWVtb3J5Q2FjaGU6IHtcbiAgICAgICAgICAgIGV4ZWN1dGVTZWxlY3Rpb25TZXQ6IGdldFdyYXBwZXJJbmZvcm1hdGlvbih0aGlzW1wic3RvcmVSZWFkZXJcIl1bXCJleGVjdXRlU2VsZWN0aW9uU2V0XCJdKSxcbiAgICAgICAgICAgIGV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5OiBnZXRXcmFwcGVySW5mb3JtYXRpb24odGhpc1tcInN0b3JlUmVhZGVyXCJdW1wiZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXlcIl0pLFxuICAgICAgICAgICAgbWF5YmVCcm9hZGNhc3RXYXRjaDogZ2V0V3JhcHBlckluZm9ybWF0aW9uKHRoaXNbXCJtYXliZUJyb2FkY2FzdFdhdGNoXCJdKSxcbiAgICAgICAgfSxcbiAgICAgICAgZnJhZ21lbnRSZWdpc3RyeToge1xuICAgICAgICAgICAgZmluZEZyYWdtZW50U3ByZWFkczogZ2V0V3JhcHBlckluZm9ybWF0aW9uKGZyYWdtZW50cz8uZmluZEZyYWdtZW50U3ByZWFkcyksXG4gICAgICAgICAgICBsb29rdXA6IGdldFdyYXBwZXJJbmZvcm1hdGlvbihmcmFnbWVudHM/Lmxvb2t1cCksXG4gICAgICAgICAgICB0cmFuc2Zvcm06IGdldFdyYXBwZXJJbmZvcm1hdGlvbihmcmFnbWVudHM/LnRyYW5zZm9ybSksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGlzV3JhcHBlcihmKSB7XG4gICAgcmV0dXJuICEhZiAmJiBcImRpcnR5S2V5XCIgaW4gZjtcbn1cbmZ1bmN0aW9uIGdldFdyYXBwZXJJbmZvcm1hdGlvbihmKSB7XG4gICAgcmV0dXJuIGlzV3JhcHBlcihmKSA/IGYuc2l6ZSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGlzRGVmaW5lZCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPSBudWxsO1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtSW5mbyh0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gcmVjdXJzZVRyYW5zZm9ybUluZm8odHJhbnNmb3JtKS5tYXAoKGNhY2hlKSA9PiAoeyBjYWNoZSB9KSk7XG59XG5mdW5jdGlvbiByZWN1cnNlVHJhbnNmb3JtSW5mbyh0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtID9cbiAgICAgICAgW1xuICAgICAgICAgICAgZ2V0V3JhcHBlckluZm9ybWF0aW9uKHRyYW5zZm9ybT8uW1wicGVyZm9ybVdvcmtcIl0pLFxuICAgICAgICAgICAgLi4ucmVjdXJzZVRyYW5zZm9ybUluZm8odHJhbnNmb3JtPy5bXCJsZWZ0XCJdKSxcbiAgICAgICAgICAgIC4uLnJlY3Vyc2VUcmFuc2Zvcm1JbmZvKHRyYW5zZm9ybT8uW1wicmlnaHRcIl0pLFxuICAgICAgICBdLmZpbHRlcihpc0RlZmluZWQpXG4gICAgICAgIDogW107XG59XG5mdW5jdGlvbiBsaW5rSW5mbyhsaW5rKSB7XG4gICAgcmV0dXJuIGxpbmsgP1xuICAgICAgICBbXG4gICAgICAgICAgICBsaW5rPy5nZXRNZW1vcnlJbnRlcm5hbHM/LigpLFxuICAgICAgICAgICAgLi4ubGlua0luZm8obGluaz8ubGVmdCksXG4gICAgICAgICAgICAuLi5saW5rSW5mbyhsaW5rPy5yaWdodCksXG4gICAgICAgIF0uZmlsdGVyKGlzRGVmaW5lZClcbiAgICAgICAgOiBbXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldE1lbW9yeUludGVybmFscy5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgX19ERVZfXyB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZW52aXJvbm1lbnRcIjtcbmltcG9ydCB7IGNhY2hlU2l6ZXMgfSBmcm9tIFwiLi4vY2FjaGluZy9zaXplcy5qc1wiO1xuaW1wb3J0IHsgQXV0b0NsZWFuZWRTdHJvbmdDYWNoZSB9IGZyb20gXCIuL2NhY2hlcy5qc1wiO1xuaW1wb3J0IHsgcmVnaXN0ZXJHbG9iYWxDYWNoZSB9IGZyb20gXCIuL2dldE1lbW9yeUludGVybmFscy5qc1wiO1xuLyoqXG4gKiBTZXJpYWxpemVzIGEgdmFsdWUgdG8gSlNPTiB3aXRoIG9iamVjdCBrZXlzIGluIGEgY29uc2lzdGVudCwgc29ydGVkIG9yZGVyLlxuICpcbiAqIEByZW1hcmtzXG4gKlxuICogVW5saWtlIGBKU09OLnN0cmluZ2lmeSgpYCwgdGhpcyBmdW5jdGlvbiBlbnN1cmVzIHRoYXQgb2JqZWN0IGtleXMgYXJlIGFsd2F5c1xuICogc2VyaWFsaXplZCBpbiB0aGUgc2FtZSBhbHBoYWJldGljYWwgb3JkZXIsIHJlZ2FyZGxlc3Mgb2YgdGhlaXIgb3JpZ2luYWwgb3JkZXIuXG4gKiBUaGlzIG1ha2VzIGl0IHN1aXRhYmxlIGZvciBjcmVhdGluZyBjb25zaXN0ZW50IGNhY2hlIGtleXMgZnJvbSBvYmplY3RzLFxuICogY29tcGFyaW5nIG9iamVjdHMgYnkgdGhlaXIgc2VyaWFsaXplZCByZXByZXNlbnRhdGlvbiwgb3IgZ2VuZXJhdGluZ1xuICogZGV0ZXJtaW5pc3RpYyBoYXNoZXMgb2Ygb2JqZWN0cy5cbiAqXG4gKiBUbyBhY2hpZXZlIHBlcmZvcm1hbnQgc29ydGluZywgdGhpcyBmdW5jdGlvbiB1c2VzIGEgYE1hcGAgZnJvbSBKU09OLXNlcmlhbGl6ZWRcbiAqIGFycmF5cyBvZiBrZXlzIChpbiBhbnkgb3JkZXIpIHRvIHNvcnRlZCBhcnJheXMgb2YgdGhlIHNhbWUga2V5cywgd2l0aCBhXG4gKiBzaW5nbGUgc29ydGVkIGFycmF5IHJlZmVyZW5jZSBzaGFyZWQgYnkgYWxsIHBlcm11dGF0aW9ucyBvZiB0aGUga2V5cy5cbiAqXG4gKiBBcyBhIGRyYXdiYWNrLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGEgbGl0dGxlIG1vcmUgbWVtb3J5IGZvciBldmVyeSBvYmplY3RcbiAqIGVuY291bnRlcmVkIHRoYXQgaGFzIGRpZmZlcmVudCAobW9yZSwgbGVzcywgYSBkaWZmZXJlbnQgb3JkZXIgb2YpIGtleXMgdGhhblxuICogaW4gdGhlIHBhc3QuXG4gKlxuICogSW4gYSB0eXBpY2FsIGFwcGxpY2F0aW9uLCB0aGlzIGV4dHJhIG1lbW9yeSB1c2FnZSBzaG91bGQgbm90IHBsYXkgYVxuICogc2lnbmlmaWNhbnQgcm9sZSwgYXMgYGNhbm9uaWNhbFN0cmluZ2lmeWAgd2lsbCBiZSBjYWxsZWQgZm9yIG9ubHkgYSBsaW1pdGVkXG4gKiBudW1iZXIgb2Ygb2JqZWN0IHNoYXBlcywgYW5kIHRoZSBjYWNoZSB3aWxsIG5vdCBncm93IGJleW9uZCBhIGNlcnRhaW4gcG9pbnQuXG4gKiBCdXQgaW4gc29tZSBlZGdlIGNhc2VzLCB0aGlzIGNvdWxkIGJlIGEgcHJvYmxlbS4gVXNlIGNhbm9uaWNhbFN0cmluZ2lmeS5yZXNldCgpXG4gKiBhcyBhIHdheSB0byBjbGVhciB0aGUgbWVtb2l6YXRpb24gY2FjaGUuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHN0cmluZ2lmeVxuICogQHJldHVybnMgSlNPTiBzdHJpbmcgd2l0aCBjb25zaXN0ZW50bHkgb3JkZXJlZCBvYmplY3Qga2V5c1xuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGNhbm9uaWNhbFN0cmluZ2lmeSB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbiAqXG4gKiBjb25zdCBvYmoxID0geyBiOiAyLCBhOiAxIH07XG4gKiBjb25zdCBvYmoyID0geyBhOiAxLCBiOiAyIH07XG4gKlxuICogY29uc29sZS5sb2coY2Fub25pY2FsU3RyaW5naWZ5KG9iajEpKTsgLy8gJ3tcImFcIjoxLFwiYlwiOjJ9J1xuICogY29uc29sZS5sb2coY2Fub25pY2FsU3RyaW5naWZ5KG9iajIpKTsgLy8gJ3tcImFcIjoxLFwiYlwiOjJ9J1xuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBjYW5vbmljYWxTdHJpbmdpZnkgPSBPYmplY3QuYXNzaWduKGZ1bmN0aW9uIGNhbm9uaWNhbFN0cmluZ2lmeSh2YWx1ZSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgc3RhYmxlT2JqZWN0UmVwbGFjZXIpO1xufSwge1xuICAgIHJlc2V0KCkge1xuICAgICAgICAvLyBDbGVhcmluZyB0aGUgc29ydGluZ01hcCB3aWxsIHJlY2xhaW0gYWxsIGNhY2hlZCBtZW1vcnksIHdpdGhvdXRcbiAgICAgICAgLy8gYWZmZWN0aW5nIHRoZSBsb2dpY2FsIHJlc3VsdHMgb2YgY2Fub25pY2FsU3RyaW5naWZ5LCBidXQgcG90ZW50aWFsbHlcbiAgICAgICAgLy8gc2FjcmlmaWNpbmcgcGVyZm9ybWFuY2UgdW50aWwgdGhlIGNhY2hlIGlzIHJlZmlsbGVkLlxuICAgICAgICBzb3J0aW5nTWFwID0gbmV3IEF1dG9DbGVhbmVkU3Ryb25nQ2FjaGUoY2FjaGVTaXplcy5jYW5vbmljYWxTdHJpbmdpZnkgfHwgMTAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplcy5jYW5vbmljYWxTdHJpbmdpZnkgKi8pO1xuICAgIH0sXG59KTtcbmlmIChfX0RFVl9fKSB7XG4gICAgcmVnaXN0ZXJHbG9iYWxDYWNoZShcImNhbm9uaWNhbFN0cmluZ2lmeVwiLCAoKSA9PiBzb3J0aW5nTWFwLnNpemUpO1xufVxuLy8gVmFsdWVzIGFyZSBKU09OLXNlcmlhbGl6ZWQgYXJyYXlzIG9mIG9iamVjdCBrZXlzIChpbiBhbnkgb3JkZXIpLCBhbmQgdmFsdWVzXG4vLyBhcmUgc29ydGVkIGFycmF5cyBvZiB0aGUgc2FtZSBrZXlzLlxubGV0IHNvcnRpbmdNYXA7XG5jYW5vbmljYWxTdHJpbmdpZnkucmVzZXQoKTtcbi8vIFRoZSBKU09OLnN0cmluZ2lmeSBmdW5jdGlvbiB0YWtlcyBhbiBvcHRpb25hbCBzZWNvbmQgYXJndW1lbnQgY2FsbGVkIGFcbi8vIHJlcGxhY2VyIGZ1bmN0aW9uLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBmb3IgZWFjaCBrZXktdmFsdWUgcGFpciBpbiB0aGVcbi8vIG9iamVjdCBiZWluZyBzdHJpbmdpZmllZCwgYW5kIGl0cyByZXR1cm4gdmFsdWUgaXMgdXNlZCBpbnN0ZWFkIG9mIHRoZVxuLy8gb3JpZ2luYWwgdmFsdWUuIElmIHRoZSByZXBsYWNlciBmdW5jdGlvbiByZXR1cm5zIGEgbmV3IHZhbHVlLCB0aGF0IHZhbHVlIGlzXG4vLyBzdHJpbmdpZmllZCBhcyBKU09OIGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eS5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0pTT04vc3RyaW5naWZ5I3RoZV9yZXBsYWNlcl9wYXJhbWV0ZXJcbmZ1bmN0aW9uIHN0YWJsZU9iamVjdFJlcGxhY2VyKGtleSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTtcbiAgICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBtZXNzIHdpdGggb2JqZWN0cyB0aGF0IGFyZSBub3QgXCJwbGFpblwiIG9iamVjdHMsIHdoaWNoXG4gICAgICAgIC8vIG1lYW5zIHRoZWlyIHByb3RvdHlwZSBpcyBlaXRoZXIgT2JqZWN0LnByb3RvdHlwZSBvciBudWxsLiBUaGlzIGNoZWNrIGFsc29cbiAgICAgICAgLy8gcHJldmVudHMgbmVlZGxlc3NseSByZWFycmFuZ2luZyB0aGUgaW5kaWNlcyBvZiBhcnJheXMuXG4gICAgICAgIGlmIChwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBwcm90byA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgICAgICAgIC8vIElmIGtleXMgaXMgYWxyZWFkeSBzb3J0ZWQsIGxldCBKU09OLnN0cmluZ2lmeSBzZXJpYWxpemUgdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAvLyB2YWx1ZSBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IG9iamVjdCB3aXRoIGtleXMgaW4gdGhlIHNhbWUgb3JkZXIuXG4gICAgICAgICAgICBpZiAoa2V5cy5ldmVyeShldmVyeUtleUluT3JkZXIpKVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHVuc29ydGVkS2V5ID0gSlNPTi5zdHJpbmdpZnkoa2V5cyk7XG4gICAgICAgICAgICBsZXQgc29ydGVkS2V5cyA9IHNvcnRpbmdNYXAuZ2V0KHVuc29ydGVkS2V5KTtcbiAgICAgICAgICAgIGlmICghc29ydGVkS2V5cykge1xuICAgICAgICAgICAgICAgIGtleXMuc29ydCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZEtleSA9IEpTT04uc3RyaW5naWZ5KGtleXMpO1xuICAgICAgICAgICAgICAgIC8vIENoZWNraW5nIGZvciBzb3J0ZWRLZXkgaW4gdGhlIHNvcnRpbmdNYXAgYWxsb3dzIHVzIHRvIHNoYXJlIHRoZSBzYW1lXG4gICAgICAgICAgICAgICAgLy8gc29ydGVkIGFycmF5IHJlZmVyZW5jZSBmb3IgYWxsIHBlcm11dGF0aW9ucyBvZiB0aGUgc2FtZSBzZXQgb2Yga2V5cy5cbiAgICAgICAgICAgICAgICBzb3J0ZWRLZXlzID0gc29ydGluZ01hcC5nZXQoc29ydGVkS2V5KSB8fCBrZXlzO1xuICAgICAgICAgICAgICAgIHNvcnRpbmdNYXAuc2V0KHVuc29ydGVkS2V5LCBzb3J0ZWRLZXlzKTtcbiAgICAgICAgICAgICAgICBzb3J0aW5nTWFwLnNldChzb3J0ZWRLZXksIHNvcnRlZEtleXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc29ydGVkT2JqZWN0ID0gT2JqZWN0LmNyZWF0ZShwcm90byk7XG4gICAgICAgICAgICAvLyBSZWFzc2lnbmluZyB0aGUga2V5cyBpbiBzb3J0ZWQgb3JkZXIgd2lsbCBjYXVzZSBKU09OLnN0cmluZ2lmeSB0b1xuICAgICAgICAgICAgLy8gc2VyaWFsaXplIHRoZW0gaW4gc29ydGVkIG9yZGVyLlxuICAgICAgICAgICAgc29ydGVkS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICBzb3J0ZWRPYmplY3Rba2V5XSA9IHZhbHVlW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzb3J0ZWRPYmplY3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLy8gU2luY2UgZXZlcnl0aGluZyB0aGF0IGhhcHBlbnMgaW4gc3RhYmxlT2JqZWN0UmVwbGFjZXIgYmVuZWZpdHMgZnJvbSBiZWluZyBhc1xuLy8gZWZmaWNpZW50IGFzIHBvc3NpYmxlLCB3ZSB1c2UgYSBzdGF0aWMgZnVuY3Rpb24gYXMgdGhlIGNhbGxiYWNrIGZvclxuLy8ga2V5cy5ldmVyeSBpbiBvcmRlciB0byB0ZXN0IGlmIHRoZSBwcm92aWRlZCBrZXlzIGFyZSBhbHJlYWR5IHNvcnRlZCB3aXRob3V0XG4vLyBhbGxvY2F0aW5nIGV4dHJhIG1lbW9yeSBmb3IgYSBjYWxsYmFjay5cbmZ1bmN0aW9uIGV2ZXJ5S2V5SW5PcmRlcihrZXksIGksIGtleXMpIHtcbiAgICByZXR1cm4gaSA9PT0gMCB8fCBrZXlzW2kgLSAxXSA8PSBrZXk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW5vbmljYWxTdHJpbmdpZnkuanMubWFwIiwKICAgICJpbXBvcnQgeyBjYW5vbmljYWxTdHJpbmdpZnkgfSBmcm9tIFwiLi9jYW5vbmljYWxTdHJpbmdpZnkuanNcIjtcbmNvbnN0IEtOT1dOX0RJUkVDVElWRVMgPSBbXG4gICAgXCJjb25uZWN0aW9uXCIsXG4gICAgXCJpbmNsdWRlXCIsXG4gICAgXCJza2lwXCIsXG4gICAgXCJjbGllbnRcIixcbiAgICBcInJlc3RcIixcbiAgICBcImV4cG9ydFwiLFxuICAgIFwibm9ucmVhY3RpdmVcIixcbl07XG4vLyBEZWZhdWx0IHN0YWJsZSBKU09OLnN0cmluZ2lmeSBpbXBsZW1lbnRhdGlvbiB1c2VkIGJ5IGdldFN0b3JlS2V5TmFtZS4gQ2FuIGJlXG4vLyB1cGRhdGVkL3JlcGxhY2VkIHdpdGggc29tZXRoaW5nIGJldHRlciBieSBjYWxsaW5nXG4vLyBnZXRTdG9yZUtleU5hbWUuc2V0U3RyaW5naWZ5KG5ld1N0cmluZ2lmeUZ1bmN0aW9uKS5cbmxldCBzdG9yZUtleU5hbWVTdHJpbmdpZnkgPSBjYW5vbmljYWxTdHJpbmdpZnk7XG4vKipcbiogQGludGVybmFsXG4qIFxuKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4qL1xuZXhwb3J0IGNvbnN0IGdldFN0b3JlS2V5TmFtZSA9IE9iamVjdC5hc3NpZ24oZnVuY3Rpb24gKGZpZWxkTmFtZSwgYXJncywgZGlyZWN0aXZlcykge1xuICAgIGlmIChhcmdzICYmXG4gICAgICAgIGRpcmVjdGl2ZXMgJiZcbiAgICAgICAgZGlyZWN0aXZlc1tcImNvbm5lY3Rpb25cIl0gJiZcbiAgICAgICAgZGlyZWN0aXZlc1tcImNvbm5lY3Rpb25cIl1bXCJrZXlcIl0pIHtcbiAgICAgICAgaWYgKGRpcmVjdGl2ZXNbXCJjb25uZWN0aW9uXCJdW1wiZmlsdGVyXCJdICYmXG4gICAgICAgICAgICBkaXJlY3RpdmVzW1wiY29ubmVjdGlvblwiXVtcImZpbHRlclwiXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJLZXlzID0gZGlyZWN0aXZlc1tcImNvbm5lY3Rpb25cIl1bXCJmaWx0ZXJcIl0gP1xuICAgICAgICAgICAgICAgIGRpcmVjdGl2ZXNbXCJjb25uZWN0aW9uXCJdW1wiZmlsdGVyXCJdXG4gICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgICAgIGZpbHRlcktleXMuc29ydCgpO1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRBcmdzID0ge307XG4gICAgICAgICAgICBmaWx0ZXJLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkQXJnc1trZXldID0gYXJnc1trZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdpZmllZEFyZ3MgPSBzdG9yZUtleU5hbWVTdHJpbmdpZnkoZmlsdGVyZWRBcmdzKTtcbiAgICAgICAgICAgIGlmIChzdHJpbmdpZmllZEFyZ3MgIT09IFwie31cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtkaXJlY3RpdmVzW1wiY29ubmVjdGlvblwiXVtcImtleVwiXX0oJHtzdHJpbmdpZmllZEFyZ3N9KWA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZXNbXCJjb25uZWN0aW9uXCJdW1wia2V5XCJdO1xuICAgIH1cbiAgICBsZXQgY29tcGxldGVGaWVsZE5hbWUgPSBmaWVsZE5hbWU7XG4gICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgLy8gV2UgY2FuJ3QgdXNlIGBKU09OLnN0cmluZ2lmeWAgaGVyZSBzaW5jZSBpdCdzIG5vbi1kZXRlcm1pbmlzdGljLFxuICAgICAgICAvLyBhbmQgY2FuIGxlYWQgdG8gZGlmZmVyZW50IHN0b3JlIGtleSBuYW1lcyBiZWluZyBjcmVhdGVkIGV2ZW4gdGhvdWdoXG4gICAgICAgIC8vIHRoZSBgYXJnc2Agb2JqZWN0IHVzZWQgZHVyaW5nIGNyZWF0aW9uIGhhcyB0aGUgc2FtZSBwcm9wZXJ0aWVzL3ZhbHVlcy5cbiAgICAgICAgY29uc3Qgc3RyaW5naWZpZWRBcmdzID0gc3RvcmVLZXlOYW1lU3RyaW5naWZ5KGFyZ3MpO1xuICAgICAgICBpZiAoc3RyaW5naWZpZWRBcmdzICE9PSBcInt9XCIpIHtcbiAgICAgICAgICAgIGNvbXBsZXRlRmllbGROYW1lICs9IGAoJHtzdHJpbmdpZmllZEFyZ3N9KWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRpcmVjdGl2ZXMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoZGlyZWN0aXZlcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoS05PV05fRElSRUNUSVZFUy5pbmRleE9mKGtleSkgIT09IC0xKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChkaXJlY3RpdmVzW2tleV0gJiYgT2JqZWN0LmtleXMoZGlyZWN0aXZlc1trZXldKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZUZpZWxkTmFtZSArPSBgQCR7a2V5fSgke3N0b3JlS2V5TmFtZVN0cmluZ2lmeShkaXJlY3RpdmVzW2tleV0pfSlgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVGaWVsZE5hbWUgKz0gYEAke2tleX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBsZXRlRmllbGROYW1lO1xufSwge1xuICAgIHNldFN0cmluZ2lmeShzKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzID0gc3RvcmVLZXlOYW1lU3RyaW5naWZ5O1xuICAgICAgICBzdG9yZUtleU5hbWVTdHJpbmdpZnkgPSBzO1xuICAgICAgICByZXR1cm4gcHJldmlvdXM7XG4gICAgfSxcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0U3RvcmVLZXlOYW1lLmpzLm1hcFxuIiwKICAgICIvKipcbiogQGludGVybmFsXG4qIFxuKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGdyYXBoUUxSZXN1bHRIYXNFcnJvcihyZXN1bHQpIHtcbiAgICByZXR1cm4gISFyZXN1bHQuZXJyb3JzPy5sZW5ndGg7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ncmFwaFFMUmVzdWx0SGFzRXJyb3IuanMubWFwXG4iLAogICAgImltcG9ydCB7IEJSRUFLLCB2aXNpdCB9IGZyb20gXCJncmFwaHFsXCI7XG4vKipcbiogQGludGVybmFsXG4qIFxuKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0RpcmVjdGl2ZXMobmFtZXMsIHJvb3QsIGFsbCkge1xuICAgIGNvbnN0IG5hbWVTZXQgPSBuZXcgU2V0KG5hbWVzKTtcbiAgICBjb25zdCB1bmlxdWVDb3VudCA9IG5hbWVTZXQuc2l6ZTtcbiAgICB2aXNpdChyb290LCB7XG4gICAgICAgIERpcmVjdGl2ZShub2RlKSB7XG4gICAgICAgICAgICBpZiAobmFtZVNldC5kZWxldGUobm9kZS5uYW1lLnZhbHVlKSAmJiAoIWFsbCB8fCAhbmFtZVNldC5zaXplKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCUkVBSztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBJZiB3ZSBmb3VuZCBhbGwgdGhlIG5hbWVzLCBuYW1lU2V0IHdpbGwgYmUgZW1wdHkuIElmIHdlIG9ubHkgY2FyZSBhYm91dFxuICAgIC8vIGZpbmRpbmcgc29tZSBvZiB0aGVtLCB0aGUgPCBjb25kaXRpb24gaXMgc3VmZmljaWVudC5cbiAgICByZXR1cm4gYWxsID8gIW5hbWVTZXQuc2l6ZSA6IG5hbWVTZXQuc2l6ZSA8IHVuaXF1ZUNvdW50O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzRGlyZWN0aXZlcy5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgQlJFQUssIHZpc2l0IH0gZnJvbSBcImdyYXBocWxcIjtcbmV4cG9ydCBmdW5jdGlvbiBoYXNGb3JjZWRSZXNvbHZlcnMoZG9jdW1lbnQpIHtcbiAgICBsZXQgZm9yY2VSZXNvbHZlcnMgPSBmYWxzZTtcbiAgICB2aXNpdChkb2N1bWVudCwge1xuICAgICAgICBEaXJlY3RpdmU6IHtcbiAgICAgICAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5uYW1lLnZhbHVlID09PSBcImNsaWVudFwiICYmIG5vZGUuYXJndW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlUmVzb2x2ZXJzID0gbm9kZS5hcmd1bWVudHMuc29tZSgoYXJnKSA9PiBhcmcubmFtZS52YWx1ZSA9PT0gXCJhbHdheXNcIiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnLnZhbHVlLmtpbmQgPT09IFwiQm9vbGVhblZhbHVlXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZy52YWx1ZS52YWx1ZSA9PT0gdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JjZVJlc29sdmVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJSRUFLO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gZm9yY2VSZXNvbHZlcnM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXNGb3JjZWRSZXNvbHZlcnMuanMubWFwIiwKICAgICIvKipcbiogQSB2ZXJzaW9uIG9mIEFycmF5LmlzQXJyYXkgdGhhdCB3b3JrcyBiZXR0ZXIgd2l0aCByZWFkb25seSBhcnJheXMuXG4qXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBjb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXkuanMubWFwXG4iLAogICAgImltcG9ydCB7IGlzTm9uTnVsbE9iamVjdCB9IGZyb20gXCIuL2lzTm9uTnVsbE9iamVjdC5qc1wiO1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RvY3VtZW50Tm9kZSh2YWx1ZSkge1xuICAgIHJldHVybiAoaXNOb25OdWxsT2JqZWN0KHZhbHVlKSAmJlxuICAgICAgICB2YWx1ZS5raW5kID09PSBcIkRvY3VtZW50XCIgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZS5kZWZpbml0aW9ucykpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNEb2N1bWVudE5vZGUuanMubWFwXG4iLAogICAgIi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gaXNGaWVsZChzZWxlY3Rpb24pIHtcbiAgICByZXR1cm4gc2VsZWN0aW9uLmtpbmQgPT09IFwiRmllbGRcIjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRmllbGQuanMubWFwXG4iLAogICAgIi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gaXNOb25FbXB0eUFycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA+IDA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc05vbkVtcHR5QXJyYXkuanMubWFwXG4iLAogICAgIi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gbWFrZVJlZmVyZW5jZShpZCkge1xuICAgIHJldHVybiB7IF9fcmVmOiBTdHJpbmcoaWQpIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYWtlUmVmZXJlbmNlLmpzLm1hcFxuIiwKICAgICJpbXBvcnQgeyBfX0RFVl9fIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9lbnZpcm9ubWVudFwiO1xuaW1wb3J0IHsgaXNOb25OdWxsT2JqZWN0IH0gZnJvbSBcIi4vaXNOb25OdWxsT2JqZWN0LmpzXCI7XG4vKipcbiogQGludGVybmFsIG9ubHkgdG8gYmUgaW1wb3J0ZWQgaW4gdGVzdHNcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gZGVlcEZyZWV6ZSh2YWx1ZSkge1xuICAgIGNvbnN0IHdvcmtTZXQgPSBuZXcgU2V0KFt2YWx1ZV0pO1xuICAgIHdvcmtTZXQuZm9yRWFjaCgob2JqKSA9PiB7XG4gICAgICAgIGlmIChpc05vbk51bGxPYmplY3Qob2JqKSAmJiBzaGFsbG93RnJlZXplKG9iaikgPT09IG9iaikge1xuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTm9uTnVsbE9iamVjdChvYmpbbmFtZV0pKVxuICAgICAgICAgICAgICAgICAgICB3b3JrU2V0LmFkZChvYmpbbmFtZV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBzaGFsbG93RnJlZXplKG9iaikge1xuICAgIGlmIChfX0RFVl9fICYmICFPYmplY3QuaXNGcm96ZW4ob2JqKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZShvYmopO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBTb21lIHR5cGVzIGxpa2UgVWludDhBcnJheSBhbmQgTm9kZS5qcydzIEJ1ZmZlciBjYW5ub3QgYmUgZnJvemVuLCBidXRcbiAgICAgICAgICAgIC8vIHRoZXkgYWxsIHRocm93IGEgVHlwZUVycm9yIHdoZW4geW91IHRyeSwgc28gd2UgcmUtdGhyb3cgYW55IGV4Y2VwdGlvbnNcbiAgICAgICAgICAgIC8vIHRoYXQgYXJlIG5vdCBUeXBlRXJyb3JzLCBzaW5jZSB0aGF0IHdvdWxkIGJlIHVuZXhwZWN0ZWQuXG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFR5cGVFcnJvcilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZXBGcmVlemUuanMubWFwXG4iLAogICAgImltcG9ydCB7IF9fREVWX18gfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2Vudmlyb25tZW50XCI7XG5pbXBvcnQgeyBkZWVwRnJlZXplIH0gZnJvbSBcIi4vZGVlcEZyZWV6ZS5qc1wiO1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXliZURlZXBGcmVlemUob2JqKSB7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgZGVlcEZyZWV6ZShvYmopO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF5YmVEZWVwRnJlZXplLmpzLm1hcFxuIiwKICAgICJpbXBvcnQgeyBEZWVwTWVyZ2VyIH0gZnJvbSBcIi4vRGVlcE1lcmdlci5qc1wiO1xuLy8gSW4gYWxtb3N0IGFueSBzaXR1YXRpb24gd2hlcmUgeW91IGNvdWxkIHN1Y2NlZWQgaW4gZ2V0dGluZyB0aGVcbi8vIFR5cGVTY3JpcHQgY29tcGlsZXIgdG8gaW5mZXIgYSB0dXBsZSB0eXBlIGZvciB0aGUgc291cmNlcyBhcnJheSwgeW91XG4vLyBjb3VsZCBqdXN0IHVzZSBtZXJnZURlZXAgaW5zdGVhZCBvZiBtZXJnZURlZXBBcnJheSwgc28gaW5zdGVhZCBvZlxuLy8gdHJ5aW5nIHRvIGNvbnZlcnQgVFtdIHRvIGFuIGludGVyc2VjdGlvbiB0eXBlIHdlIGp1c3QgaW5mZXIgdGhlIGFycmF5XG4vLyBlbGVtZW50IHR5cGUsIHdoaWNoIHdvcmtzIHBlcmZlY3RseSB3aGVuIHRoZSBzb3VyY2VzIGFycmF5IGhhcyBhXG4vLyBjb25zaXN0ZW50IGVsZW1lbnQgdHlwZS5cbi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VEZWVwQXJyYXkoc291cmNlcykge1xuICAgIGxldCB0YXJnZXQgPSBzb3VyY2VzWzBdIHx8IHt9O1xuICAgIGNvbnN0IGNvdW50ID0gc291cmNlcy5sZW5ndGg7XG4gICAgaWYgKGNvdW50ID4gMSkge1xuICAgICAgICBjb25zdCBtZXJnZXIgPSBuZXcgRGVlcE1lcmdlcigpO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IG1lcmdlci5tZXJnZSh0YXJnZXQsIHNvdXJjZXNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZURlZXBBcnJheS5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgY29tcGFjdCB9IGZyb20gXCIuL2NvbXBhY3QuanNcIjtcbi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VPcHRpb25zKGRlZmF1bHRzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGNvbXBhY3QoZGVmYXVsdHMsIG9wdGlvbnMsIG9wdGlvbnMudmFyaWFibGVzICYmIHtcbiAgICAgICAgdmFyaWFibGVzOiBjb21wYWN0KHtcbiAgICAgICAgICAgIC4uLihkZWZhdWx0cyAmJiBkZWZhdWx0cy52YXJpYWJsZXMpLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgIH0pLFxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVyZ2VPcHRpb25zLmpzLm1hcFxuIiwKICAgICJleHBvcnQgZnVuY3Rpb24gcHJldmVudFVuaGFuZGxlZFJlamVjdGlvbihwcm9taXNlKSB7XG4gICAgcHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJldmVudFVuaGFuZGxlZFJlamVjdGlvbi5qcy5tYXAiLAogICAgImltcG9ydCB7IEtpbmQsIHZpc2l0IH0gZnJvbSBcImdyYXBocWxcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW52YXJpYW50XCI7XG5pbXBvcnQgeyBjaGVja0RvY3VtZW50IH0gZnJvbSBcIi4vY2hlY2tEb2N1bWVudC5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRnJhZ21lbnRNYXAgfSBmcm9tIFwiLi9jcmVhdGVGcmFnbWVudE1hcC5qc1wiO1xuaW1wb3J0IHsgZ2V0RnJhZ21lbnREZWZpbml0aW9uIH0gZnJvbSBcIi4vZ2V0RnJhZ21lbnREZWZpbml0aW9uLmpzXCI7XG5pbXBvcnQgeyBnZXRGcmFnbWVudERlZmluaXRpb25zIH0gZnJvbSBcIi4vZ2V0RnJhZ21lbnREZWZpbml0aW9ucy5qc1wiO1xuaW1wb3J0IHsgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbiB9IGZyb20gXCIuL2dldE9wZXJhdGlvbkRlZmluaXRpb24uanNcIjtcbmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tIFwiLi9pc0FycmF5LmpzXCI7XG5pbXBvcnQgeyBpc05vbkVtcHR5QXJyYXkgfSBmcm9tIFwiLi9pc05vbkVtcHR5QXJyYXkuanNcIjtcbi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRGlyZWN0aXZlc0Zyb21Eb2N1bWVudChkaXJlY3RpdmVzLCBkb2MpIHtcbiAgICBjaGVja0RvY3VtZW50KGRvYyk7XG4gICAgLy8gUGFzc2luZyBlbXB0eSBzdHJpbmdzIHRvIG1ha2VJblVzZUdldHRlckZ1bmN0aW9uIG1lYW5zIHdlIGhhbmRsZSBhbm9ueW1vdXNcbiAgICAvLyBvcGVyYXRpb25zIGFzIGlmIHRoZWlyIG5hbWVzIHdlcmUgXCJcIi4gQW5vbnltb3VzIGZyYWdtZW50IGRlZmluaXRpb25zIGFyZVxuICAgIC8vIG5vdCBzdXBwb3NlZCB0byBiZSBwb3NzaWJsZSwgYnV0IHRoZSBzYW1lIGRlZmF1bHQgbmFtaW5nIHN0cmF0ZWd5IHNlZW1zXG4gICAgLy8gYXBwcm9wcmlhdGUgZm9yIHRoYXQgY2FzZSBhcyB3ZWxsLlxuICAgIGNvbnN0IGdldEluVXNlQnlPcGVyYXRpb25OYW1lID0gbWFrZUluVXNlR2V0dGVyRnVuY3Rpb24oXCJcIik7XG4gICAgY29uc3QgZ2V0SW5Vc2VCeUZyYWdtZW50TmFtZSA9IG1ha2VJblVzZUdldHRlckZ1bmN0aW9uKFwiXCIpO1xuICAgIGNvbnN0IGdldEluVXNlID0gKGFuY2VzdG9ycykgPT4ge1xuICAgICAgICBmb3IgKGxldCBwID0gMCwgYW5jZXN0b3I7IHAgPCBhbmNlc3RvcnMubGVuZ3RoICYmIChhbmNlc3RvciA9IGFuY2VzdG9yc1twXSk7ICsrcCkge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkoYW5jZXN0b3IpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKGFuY2VzdG9yLmtpbmQgPT09IEtpbmQuT1BFUkFUSU9OX0RFRklOSVRJT04pIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBhbiBvcGVyYXRpb24gaXMgYW5vbnltb3VzLCB3ZSB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBpdHMga2V5LlxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRJblVzZUJ5T3BlcmF0aW9uTmFtZShhbmNlc3Rvci5uYW1lICYmIGFuY2VzdG9yLm5hbWUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFuY2VzdG9yLmtpbmQgPT09IEtpbmQuRlJBR01FTlRfREVGSU5JVElPTikge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRJblVzZUJ5RnJhZ21lbnROYW1lKGFuY2VzdG9yLm5hbWUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGludmFyaWFudC5lcnJvcigxNCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgbGV0IG9wZXJhdGlvbkNvdW50ID0gMDtcbiAgICBmb3IgKGxldCBpID0gZG9jLmRlZmluaXRpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIGlmIChkb2MuZGVmaW5pdGlvbnNbaV0ua2luZCA9PT0gS2luZC5PUEVSQVRJT05fREVGSU5JVElPTikge1xuICAgICAgICAgICAgKytvcGVyYXRpb25Db3VudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkaXJlY3RpdmVNYXRjaGVyID0gZ2V0RGlyZWN0aXZlTWF0Y2hlcihkaXJlY3RpdmVzKTtcbiAgICBjb25zdCBzaG91bGRSZW1vdmVGaWVsZCA9IChub2RlRGlyZWN0aXZlcykgPT4gaXNOb25FbXB0eUFycmF5KG5vZGVEaXJlY3RpdmVzKSAmJlxuICAgICAgICBub2RlRGlyZWN0aXZlc1xuICAgICAgICAgICAgLm1hcChkaXJlY3RpdmVNYXRjaGVyKVxuICAgICAgICAgICAgLnNvbWUoKGNvbmZpZykgPT4gY29uZmlnICYmIGNvbmZpZy5yZW1vdmUpO1xuICAgIGNvbnN0IG9yaWdpbmFsRnJhZ21lbnREZWZzQnlQYXRoID0gbmV3IE1hcCgpO1xuICAgIC8vIEFueSB0aW1lIHRoZSBmaXJzdCB0cmF2ZXJzYWwgb2YgdGhlIGRvY3VtZW50IGJlbG93IG1ha2VzIGEgY2hhbmdlIGxpa2VcbiAgICAvLyByZW1vdmluZyBhIGZyYWdtZW50IChieSByZXR1cm5pbmcgbnVsbCksIHRoaXMgdmFyaWFibGUgc2hvdWxkIGJlIHNldCB0b1xuICAgIC8vIHRydWUuIE9uY2UgaXQgYmVjb21lcyB0cnVlLCBpdCBzaG91bGQgbmV2ZXIgYmUgc2V0IHRvIGZhbHNlIGFnYWluLiBJZiB0aGlzXG4gICAgLy8gdmFyaWFibGUgcmVtYWlucyBmYWxzZSB0aHJvdWdob3V0IHRoZSB0cmF2ZXJzYWwsIHRoZW4gd2UgY2FuIHJldHVybiB0aGVcbiAgICAvLyBvcmlnaW5hbCBkb2MgaW1tZWRpYXRlbHkgd2l0aG91dCBhbnkgbW9kaWZpY2F0aW9ucy5cbiAgICBsZXQgZmlyc3RWaXNpdE1hZGVDaGFuZ2VzID0gZmFsc2U7XG4gICAgY29uc3QgZmllbGRPcklubGluZUZyYWdtZW50VmlzaXRvciA9IHtcbiAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgICAgaWYgKHNob3VsZFJlbW92ZUZpZWxkKG5vZGUuZGlyZWN0aXZlcykpIHtcbiAgICAgICAgICAgICAgICBmaXJzdFZpc2l0TWFkZUNoYW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG4gICAgY29uc3QgZG9jV2l0aG91dERpcmVjdGl2ZVN1YnRyZWVzID0gdmlzaXQoZG9jLCB7XG4gICAgICAgIC8vIFRoZXNlIHR3byBBU1Qgbm9kZSB0eXBlcyBzaGFyZSB0aGUgc2FtZSBpbXBsZW1lbnRhdGlvbiwgZGVmaW5lZCBhYm92ZS5cbiAgICAgICAgRmllbGQ6IGZpZWxkT3JJbmxpbmVGcmFnbWVudFZpc2l0b3IsXG4gICAgICAgIElubGluZUZyYWdtZW50OiBmaWVsZE9ySW5saW5lRnJhZ21lbnRWaXNpdG9yLFxuICAgICAgICBWYXJpYWJsZURlZmluaXRpb246IHtcbiAgICAgICAgICAgIGVudGVyKCkge1xuICAgICAgICAgICAgICAgIC8vIFZhcmlhYmxlRGVmaW5pdGlvbiBub2RlcyBkbyBub3QgY291bnQgYXMgdmFyaWFibGVzIGluIHVzZSwgdGhvdWdoXG4gICAgICAgICAgICAgICAgLy8gdGhleSBkbyBjb250YWluIFZhcmlhYmxlIG5vZGVzIHRoYXQgbWlnaHQgYmUgdmlzaXRlZCBiZWxvdy4gVG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyBjb3VudGluZyB2YXJpYWJsZSBkZWNsYXJhdGlvbnMgYXMgdXNhZ2VzLCB3ZSBza2lwIHZpc2l0aW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNvbnRlbnRzIG9mIHRoaXMgVmFyaWFibGVEZWZpbml0aW9uIG5vZGUgYnkgcmV0dXJuaW5nIGZhbHNlLlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFZhcmlhYmxlOiB7XG4gICAgICAgICAgICBlbnRlcihub2RlLCBfa2V5LCBfcGFyZW50LCBfcGF0aCwgYW5jZXN0b3JzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5Vc2UgPSBnZXRJblVzZShhbmNlc3RvcnMpO1xuICAgICAgICAgICAgICAgIGlmIChpblVzZSkge1xuICAgICAgICAgICAgICAgICAgICBpblVzZS52YXJpYWJsZXMuYWRkKG5vZGUubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgRnJhZ21lbnRTcHJlYWQ6IHtcbiAgICAgICAgICAgIGVudGVyKG5vZGUsIF9rZXksIF9wYXJlbnQsIF9wYXRoLCBhbmNlc3RvcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkUmVtb3ZlRmllbGQobm9kZS5kaXJlY3RpdmVzKSkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFZpc2l0TWFkZUNoYW5nZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaW5Vc2UgPSBnZXRJblVzZShhbmNlc3RvcnMpO1xuICAgICAgICAgICAgICAgIGlmIChpblVzZSkge1xuICAgICAgICAgICAgICAgICAgICBpblVzZS5mcmFnbWVudFNwcmVhZHMuYWRkKG5vZGUubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdlIG1pZ2h0IGxpa2UgdG8gcmVtb3ZlIHRoaXMgRnJhZ21lbnRTcHJlYWQgYnkgcmV0dXJuaW5nIG51bGwgaGVyZSBpZlxuICAgICAgICAgICAgICAgIC8vIHRoZSBjb3JyZXNwb25kaW5nIEZyYWdtZW50RGVmaW5pdGlvbiBub2RlIGlzIGFsc28gZ29pbmcgdG8gYmUgcmVtb3ZlZFxuICAgICAgICAgICAgICAgIC8vIGJ5IHRoZSBsb2dpYyBiZWxvdywgYnV0IHdlIGNhbid0IGNvbnRyb2wgdGhlIHJlbGF0aXZlIG9yZGVyIG9mIHRob3NlXG4gICAgICAgICAgICAgICAgLy8gZXZlbnRzLCBzbyB3ZSBoYXZlIHRvIHBvc3Rwb25lIHRoZSByZW1vdmFsIG9mIGRhbmdsaW5nIEZyYWdtZW50U3ByZWFkXG4gICAgICAgICAgICAgICAgLy8gbm9kZXMgdW50aWwgYWZ0ZXIgdGhlIGN1cnJlbnQgdmlzaXQgb2YgdGhlIGRvY3VtZW50IGhhcyBmaW5pc2hlZC5cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIEZyYWdtZW50RGVmaW5pdGlvbjoge1xuICAgICAgICAgICAgZW50ZXIobm9kZSwgX2tleSwgX3BhcmVudCwgcGF0aCkge1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsRnJhZ21lbnREZWZzQnlQYXRoLnNldChKU09OLnN0cmluZ2lmeShwYXRoKSwgbm9kZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGVhdmUobm9kZSwgX2tleSwgX3BhcmVudCwgcGF0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTm9kZSA9IG9yaWdpbmFsRnJhZ21lbnREZWZzQnlQYXRoLmdldChKU09OLnN0cmluZ2lmeShwYXRoKSk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgPT09IG9yaWdpbmFsTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgRnJhZ21lbnROb2RlIHJlY2VpdmVkIGJ5IHRoaXMgbGVhdmUgZnVuY3Rpb24gaXMgaWRlbnRpY2FsIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBvbmUgcmVjZWl2ZWQgYnkgdGhlIGNvcnJlc3BvbmRpbmcgZW50ZXIgZnVuY3Rpb24gKGFib3ZlKSwgdGhlblxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgdmlzaXRvciBtdXN0IG5vdCBoYXZlIG1hZGUgYW55IGNoYW5nZXMgd2l0aGluIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gRnJhZ21lbnREZWZpbml0aW9uIG5vZGUuIFRoaXMgZnJhZ21lbnQgZGVmaW5pdGlvbiBtYXkgc3RpbGwgYmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlZCBpZiB0aGVyZSBhcmUgbm8gLi4uc3ByZWFkIHJlZmVyZW5jZXMgdG8gaXQsIGJ1dCBpdCB3b24ndCBiZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmVkIGp1c3QgYmVjYXVzZSBpdCBoYXMgb25seSBhIF9fdHlwZW5hbWUgZmllbGQuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBsb2dpYyBhcHBsaWVzIG9ubHkgaWYgdGhlIGRvY3VtZW50IGNvbnRhaW5zIG9uZSBvciBtb3JlXG4gICAgICAgICAgICAgICAgLy8gb3BlcmF0aW9ucywgc2luY2UgcmVtb3ZpbmcgYWxsIGZyYWdtZW50cyBmcm9tIGEgZG9jdW1lbnQgY29udGFpbmluZ1xuICAgICAgICAgICAgICAgIC8vIG9ubHkgZnJhZ21lbnRzIG1ha2VzIHRoZSBkb2N1bWVudCB1c2VsZXNzLlxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbkNvdW50ID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICBub2RlLnNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmV2ZXJ5KChzZWxlY3Rpb24pID0+IHNlbGVjdGlvbi5raW5kID09PSBLaW5kLkZJRUxEICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24ubmFtZS52YWx1ZSA9PT0gXCJfX3R5cGVuYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzb21ld2hhdCBvcGluaW9uYXRlZCBjaG9pY2U6IGlmIGEgRnJhZ21lbnREZWZpbml0aW9uIGVuZHNcbiAgICAgICAgICAgICAgICAgICAgLy8gdXAgaGF2aW5nIG5vIGZpZWxkcyBvdGhlciB0aGFuIF9fdHlwZW5hbWUsIHdlIHJlbW92ZSB0aGUgd2hvbGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJhZ21lbnQgZGVmaW5pdGlvbiwgYW5kIGxhdGVyIHBydW5lIC4uLnNwcmVhZCByZWZlcmVuY2VzIHRvIGl0LlxuICAgICAgICAgICAgICAgICAgICBnZXRJblVzZUJ5RnJhZ21lbnROYW1lKG5vZGUubmFtZS52YWx1ZSkucmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0VmlzaXRNYWRlQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIERpcmVjdGl2ZToge1xuICAgICAgICAgICAgbGVhdmUobm9kZSkge1xuICAgICAgICAgICAgICAgIC8vIElmIGEgbWF0Y2hpbmcgZGlyZWN0aXZlIGlzIGZvdW5kLCByZW1vdmUgdGhlIGRpcmVjdGl2ZSBpdHNlbGYuIE5vdGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9lcyBub3QgcmVtb3ZlIHRoZSB0YXJnZXQgKGZpZWxkLCBhcmd1bWVudCwgZXRjKSBvZiB0aGVcbiAgICAgICAgICAgICAgICAvLyBkaXJlY3RpdmUsIGJ1dCBvbmx5IHRoZSBkaXJlY3RpdmUgaXRzZWxmLlxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3RpdmVNYXRjaGVyKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0VmlzaXRNYWRlQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgaWYgKCFmaXJzdFZpc2l0TWFkZUNoYW5nZXMpIHtcbiAgICAgICAgLy8gSWYgb3VyIGZpcnN0IHBhc3MgZGlkIG5vdCBjaGFuZ2UgYW55dGhpbmcgYWJvdXQgdGhlIGRvY3VtZW50LCB0aGVuIHRoZXJlXG4gICAgICAgIC8vIGlzIG5vIGNsZWFudXAgd2UgbmVlZCB0byBkbywgYW5kIHdlIGNhbiByZXR1cm4gdGhlIG9yaWdpbmFsIGRvYy5cbiAgICAgICAgcmV0dXJuIGRvYztcbiAgICB9XG4gICAgLy8gVXRpbGl0eSBmb3IgbWFraW5nIHN1cmUgaW5Vc2UudHJhbnNpdGl2ZVZhcnMgaXMgcmVjdXJzaXZlbHkgcG9wdWxhdGVkLlxuICAgIC8vIEJlY2F1c2UgdGhpcyBsb2dpYyBhc3N1bWVzIGluVXNlLmZyYWdtZW50U3ByZWFkcyBoYXMgYmVlbiBjb21wbGV0ZWx5XG4gICAgLy8gcG9wdWxhdGVkIGFuZCBpblVzZS5yZW1vdmVkIGhhcyBiZWVuIHNldCBpZiBhcHByb3ByaWF0ZSxcbiAgICAvLyBwb3B1bGF0ZVRyYW5zaXRpdmVWYXJzIG11c3QgYmUgY2FsbGVkIGFmdGVyIHRoYXQgaW5mb3JtYXRpb24gaGFzIGJlZW5cbiAgICAvLyBjb2xsZWN0ZWQgYnkgdGhlIGZpcnN0IHRyYXZlcnNhbCBvZiB0aGUgZG9jdW1lbnQuXG4gICAgY29uc3QgcG9wdWxhdGVUcmFuc2l0aXZlVmFycyA9IChpblVzZSkgPT4ge1xuICAgICAgICBpZiAoIWluVXNlLnRyYW5zaXRpdmVWYXJzKSB7XG4gICAgICAgICAgICBpblVzZS50cmFuc2l0aXZlVmFycyA9IG5ldyBTZXQoaW5Vc2UudmFyaWFibGVzKTtcbiAgICAgICAgICAgIGlmICghaW5Vc2UucmVtb3ZlZCkge1xuICAgICAgICAgICAgICAgIGluVXNlLmZyYWdtZW50U3ByZWFkcy5mb3JFYWNoKChjaGlsZEZyYWdtZW50TmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwb3B1bGF0ZVRyYW5zaXRpdmVWYXJzKGdldEluVXNlQnlGcmFnbWVudE5hbWUoY2hpbGRGcmFnbWVudE5hbWUpKS50cmFuc2l0aXZlVmFycy5mb3JFYWNoKCh2YXJOYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpblVzZS50cmFuc2l0aXZlVmFycy5hZGQodmFyTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpblVzZTtcbiAgICB9O1xuICAgIC8vIFNpbmNlIHdlJ3ZlIGJlZW4ga2VlcGluZyB0cmFjayBvZiBmcmFnbWVudCBzcHJlYWRzIHVzZWQgYnkgcGFydGljdWxhclxuICAgIC8vIG9wZXJhdGlvbnMgYW5kIGZyYWdtZW50IGRlZmluaXRpb25zLCB3ZSBub3cgbmVlZCB0byBjb21wdXRlIHRoZSBzZXQgb2YgYWxsXG4gICAgLy8gc3ByZWFkcyB1c2VkICh0cmFuc2l0aXZlbHkpIGJ5IGFueSBvcGVyYXRpb25zIGluIHRoZSBkb2N1bWVudC5cbiAgICBjb25zdCBhbGxGcmFnbWVudE5hbWVzVXNlZCA9IG5ldyBTZXQoKTtcbiAgICBkb2NXaXRob3V0RGlyZWN0aXZlU3VidHJlZXMuZGVmaW5pdGlvbnMuZm9yRWFjaCgoZGVmKSA9PiB7XG4gICAgICAgIGlmIChkZWYua2luZCA9PT0gS2luZC5PUEVSQVRJT05fREVGSU5JVElPTikge1xuICAgICAgICAgICAgcG9wdWxhdGVUcmFuc2l0aXZlVmFycyhnZXRJblVzZUJ5T3BlcmF0aW9uTmFtZShkZWYubmFtZSAmJiBkZWYubmFtZS52YWx1ZSkpLmZyYWdtZW50U3ByZWFkcy5mb3JFYWNoKChjaGlsZEZyYWdtZW50TmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGFsbEZyYWdtZW50TmFtZXNVc2VkLmFkZChjaGlsZEZyYWdtZW50TmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWYua2luZCA9PT0gS2luZC5GUkFHTUVOVF9ERUZJTklUSU9OICYmXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gb3BlcmF0aW9ucyBpbiB0aGUgZG9jdW1lbnQsIHRoZW4gYWxsIGZyYWdtZW50XG4gICAgICAgICAgICAvLyBkZWZpbml0aW9ucyBjb3VudCBhcyB1c2FnZXMgb2YgdGhlaXIgb3duIGZyYWdtZW50IG5hbWVzLiBUaGlzIGhldXJpc3RpY1xuICAgICAgICAgICAgLy8gcHJldmVudHMgYWNjaWRlbnRhbGx5IHJlbW92aW5nIGFsbCBmcmFnbWVudCBkZWZpbml0aW9ucyBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gZG9jdW1lbnQganVzdCBiZWNhdXNlIGl0IGNvbnRhaW5zIG5vIG9wZXJhdGlvbnMgdGhhdCB1c2UgdGhlIGZyYWdtZW50cy5cbiAgICAgICAgICAgIG9wZXJhdGlvbkNvdW50ID09PSAwICYmXG4gICAgICAgICAgICAhZ2V0SW5Vc2VCeUZyYWdtZW50TmFtZShkZWYubmFtZS52YWx1ZSkucmVtb3ZlZCkge1xuICAgICAgICAgICAgYWxsRnJhZ21lbnROYW1lc1VzZWQuYWRkKGRlZi5uYW1lLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIE5vdyB0aGF0IHdlIGhhdmUgYWRkZWQgYWxsIGZyYWdtZW50IHNwcmVhZHMgdXNlZCBieSBvcGVyYXRpb25zIHRvIHRoZVxuICAgIC8vIGFsbEZyYWdtZW50TmFtZXNVc2VkIHNldCwgd2UgY2FuIGNvbXBsZXRlIHRoZSBzZXQgYnkgdHJhbnNpdGl2ZWx5IGFkZGluZ1xuICAgIC8vIGFsbCBmcmFnbWVudCBzcHJlYWRzIHVzZWQgYnkgdGhvc2UgZnJhZ21lbnRzLCBhbmQgc28gb24uXG4gICAgYWxsRnJhZ21lbnROYW1lc1VzZWQuZm9yRWFjaCgoZnJhZ21lbnROYW1lKSA9PiB7XG4gICAgICAgIC8vIE9uY2UgYWxsIHRoZSBjaGlsZEZyYWdtZW50TmFtZSBzdHJpbmdzIGFkZGVkIGhlcmUgaGF2ZSBiZWVuIHNlZW4gYWxyZWFkeSxcbiAgICAgICAgLy8gdGhlIHRvcC1sZXZlbCBhbGxGcmFnbWVudE5hbWVzVXNlZC5mb3JFYWNoIGxvb3Agd2lsbCB0ZXJtaW5hdGUuXG4gICAgICAgIHBvcHVsYXRlVHJhbnNpdGl2ZVZhcnMoZ2V0SW5Vc2VCeUZyYWdtZW50TmFtZShmcmFnbWVudE5hbWUpKS5mcmFnbWVudFNwcmVhZHMuZm9yRWFjaCgoY2hpbGRGcmFnbWVudE5hbWUpID0+IHtcbiAgICAgICAgICAgIGFsbEZyYWdtZW50TmFtZXNVc2VkLmFkZChjaGlsZEZyYWdtZW50TmFtZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGNvbnN0IGZyYWdtZW50V2lsbEJlUmVtb3ZlZCA9IChmcmFnbWVudE5hbWUpID0+ICEhKFxuICAgIC8vIEEgZnJhZ21lbnQgZGVmaW5pdGlvbiB3aWxsIGJlIHJlbW92ZWQgaWYgdGhlcmUgYXJlIG5vIHNwcmVhZHMgdGhhdCByZWZlclxuICAgIC8vIHRvIGl0LCBvciB0aGUgZnJhZ21lbnQgd2FzIGV4cGxpY2l0bHkgcmVtb3ZlZCBiZWNhdXNlIGl0IGhhZCBubyBmaWVsZHNcbiAgICAvLyBvdGhlciB0aGFuIF9fdHlwZW5hbWUuXG4gICAgKCFhbGxGcmFnbWVudE5hbWVzVXNlZC5oYXMoZnJhZ21lbnROYW1lKSB8fFxuICAgICAgICBnZXRJblVzZUJ5RnJhZ21lbnROYW1lKGZyYWdtZW50TmFtZSkucmVtb3ZlZCkpO1xuICAgIGNvbnN0IGVudGVyVmlzaXRvciA9IHtcbiAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgICAgaWYgKGZyYWdtZW50V2lsbEJlUmVtb3ZlZChub2RlLm5hbWUudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICByZXR1cm4gbnVsbElmRG9jSXNFbXB0eSh2aXNpdChkb2NXaXRob3V0RGlyZWN0aXZlU3VidHJlZXMsIHtcbiAgICAgICAgLy8gSWYgdGhlIGZyYWdtZW50IGlzIGdvaW5nIHRvIGJlIHJlbW92ZWQsIHRoZW4gbGVhdmluZyBhbnkgZGFuZ2xpbmdcbiAgICAgICAgLy8gRnJhZ21lbnRTcHJlYWQgbm9kZXMgd2l0aCB0aGUgc2FtZSBuYW1lIHdvdWxkIGJlIGEgbWlzdGFrZS5cbiAgICAgICAgRnJhZ21lbnRTcHJlYWQ6IGVudGVyVmlzaXRvcixcbiAgICAgICAgLy8gVGhpcyBpcyB3aGVyZSB0aGUgZnJhZ21lbnQgZGVmaW5pdGlvbiBpcyBhY3R1YWxseSByZW1vdmVkLlxuICAgICAgICBGcmFnbWVudERlZmluaXRpb246IGVudGVyVmlzaXRvcixcbiAgICAgICAgT3BlcmF0aW9uRGVmaW5pdGlvbjoge1xuICAgICAgICAgICAgbGVhdmUobm9kZSkge1xuICAgICAgICAgICAgICAgIC8vIFVwb24gbGVhdmluZyBlYWNoIG9wZXJhdGlvbiBpbiB0aGUgZGVwdGgtZmlyc3QgQVNUIHRyYXZlcnNhbCwgcHJ1bmVcbiAgICAgICAgICAgICAgICAvLyBhbnkgdmFyaWFibGVzIHRoYXQgYXJlIGRlY2xhcmVkIGJ5IHRoZSBvcGVyYXRpb24gYnV0IHVudXNlZCB3aXRoaW4uXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUudmFyaWFibGVEZWZpbml0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VkVmFyaWFibGVOYW1lcyA9IHBvcHVsYXRlVHJhbnNpdGl2ZVZhcnMoXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGFuIG9wZXJhdGlvbiBpcyBhbm9ueW1vdXMsIHdlIHVzZSB0aGUgZW1wdHkgc3RyaW5nIGFzIGl0cyBrZXkuXG4gICAgICAgICAgICAgICAgICAgIGdldEluVXNlQnlPcGVyYXRpb25OYW1lKG5vZGUubmFtZSAmJiBub2RlLm5hbWUudmFsdWUpKS50cmFuc2l0aXZlVmFycztcbiAgICAgICAgICAgICAgICAgICAgLy8gQWNjb3JkaW5nIHRvIHRoZSBHcmFwaFFMIHNwZWMsIGFsbCB2YXJpYWJsZXMgZGVjbGFyZWQgYnkgYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gb3BlcmF0aW9uIG11c3QgZWl0aGVyIGJlIHVzZWQgYnkgdGhhdCBvcGVyYXRpb24gb3IgdXNlZCBieSBzb21lXG4gICAgICAgICAgICAgICAgICAgIC8vIGZyYWdtZW50IGluY2x1ZGVkIHRyYW5zaXRpdmVseSBpbnRvIHRoYXQgb3BlcmF0aW9uOlxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3NwZWMuZ3JhcGhxbC5vcmcvZHJhZnQvI3NlYy1BbGwtVmFyaWFibGVzLVVzZWRcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gVG8gc3RheSBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGlzIHZhbGlkYXRpb24gcnVsZSwgaWYvd2hlbiB3ZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGxhc3QgJHZhciByZWZlcmVuY2VzIGZyb20gYW4gb3BlcmF0aW9uIG9yIGl0cyBmcmFnbWVudHMsXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgYWxzbyByZW1vdmUgdGhlIGNvcnJlc3BvbmRpbmcgJHZhciBkZWNsYXJhdGlvbiBmcm9tIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBlbmNsb3Npbmcgb3BlcmF0aW9uLiBUaGlzIHBydW5pbmcgYXBwbGllcyBvbmx5IHRvIG9wZXJhdGlvbnMgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBmcmFnbWVudCBkZWZpbml0aW9ucywgYXQgdGhlIG1vbWVudC4gRnJhZ21lbnRzIG1heSBiZSBhYmxlIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlY2xhcmUgdmFyaWFibGVzIGV2ZW50dWFsbHksIGJ1dCB0b2RheSB0aGV5IGNhbiBvbmx5IGNvbnN1bWUgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZWRWYXJpYWJsZU5hbWVzLnNpemUgPCBub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVEZWZpbml0aW9uczogbm9kZS52YXJpYWJsZURlZmluaXRpb25zLmZpbHRlcigodmFyRGVmKSA9PiB1c2VkVmFyaWFibGVOYW1lcy5oYXModmFyRGVmLnZhcmlhYmxlLm5hbWUudmFsdWUpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pKTtcbn1cbmZ1bmN0aW9uIG1ha2VJblVzZUdldHRlckZ1bmN0aW9uKGRlZmF1bHRLZXkpIHtcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGluVXNlR2V0dGVyRnVuY3Rpb24oa2V5ID0gZGVmYXVsdEtleSkge1xuICAgICAgICBsZXQgaW5Vc2UgPSBtYXAuZ2V0KGtleSk7XG4gICAgICAgIGlmICghaW5Vc2UpIHtcbiAgICAgICAgICAgIG1hcC5zZXQoa2V5LCAoaW5Vc2UgPSB7XG4gICAgICAgICAgICAgICAgLy8gVmFyaWFibGUgYW5kIGZyYWdtZW50IHNwcmVhZCBuYW1lcyB1c2VkIGRpcmVjdGx5IHdpdGhpbiB0aGlzXG4gICAgICAgICAgICAgICAgLy8gb3BlcmF0aW9uIG9yIGZyYWdtZW50IGRlZmluaXRpb24sIGFzIGlkZW50aWZpZWQgYnkga2V5LiBUaGVzZSBzZXRzXG4gICAgICAgICAgICAgICAgLy8gd2lsbCBiZSBwb3B1bGF0ZWQgZHVyaW5nIHRoZSBmaXJzdCB0cmF2ZXJzYWwgb2YgdGhlIGRvY3VtZW50IGluXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlRGlyZWN0aXZlc0Zyb21Eb2N1bWVudCBiZWxvdy5cbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNwcmVhZHM6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5Vc2U7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGdldERpcmVjdGl2ZU1hdGNoZXIoY29uZmlncykge1xuICAgIGNvbnN0IG5hbWVzID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHRlc3RzID0gbmV3IE1hcCgpO1xuICAgIGNvbmZpZ3MuZm9yRWFjaCgoZGlyZWN0aXZlKSA9PiB7XG4gICAgICAgIGlmIChkaXJlY3RpdmUpIHtcbiAgICAgICAgICAgIGlmIChkaXJlY3RpdmUubmFtZSkge1xuICAgICAgICAgICAgICAgIG5hbWVzLnNldChkaXJlY3RpdmUubmFtZSwgZGlyZWN0aXZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRpcmVjdGl2ZS50ZXN0KSB7XG4gICAgICAgICAgICAgICAgdGVzdHMuc2V0KGRpcmVjdGl2ZS50ZXN0LCBkaXJlY3RpdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIChkaXJlY3RpdmUpID0+IHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IG5hbWVzLmdldChkaXJlY3RpdmUubmFtZS52YWx1ZSk7XG4gICAgICAgIGlmICghY29uZmlnICYmIHRlc3RzLnNpemUpIHtcbiAgICAgICAgICAgIHRlc3RzLmZvckVhY2goKHRlc3RDb25maWcsIHRlc3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGVzdChkaXJlY3RpdmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IHRlc3RDb25maWc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xufVxuZnVuY3Rpb24gaXNFbXB0eShvcCwgZnJhZ21lbnRNYXApIHtcbiAgICByZXR1cm4gKCFvcCB8fFxuICAgICAgICBvcC5zZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5ldmVyeSgoc2VsZWN0aW9uKSA9PiBzZWxlY3Rpb24ua2luZCA9PT0gS2luZC5GUkFHTUVOVF9TUFJFQUQgJiZcbiAgICAgICAgICAgIGlzRW1wdHkoZnJhZ21lbnRNYXBbc2VsZWN0aW9uLm5hbWUudmFsdWVdLCBmcmFnbWVudE1hcCkpKTtcbn1cbmZ1bmN0aW9uIG51bGxJZkRvY0lzRW1wdHkoZG9jKSB7XG4gICAgcmV0dXJuIChpc0VtcHR5KGdldE9wZXJhdGlvbkRlZmluaXRpb24oZG9jKSB8fCBnZXRGcmFnbWVudERlZmluaXRpb24oZG9jKSwgY3JlYXRlRnJhZ21lbnRNYXAoZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhkb2MpKSkpID9cbiAgICAgICAgbnVsbFxuICAgICAgICA6IGRvYztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQuanMubWFwXG4iLAogICAgImltcG9ydCB7IHZpc2l0IH0gZnJvbSBcImdyYXBocWxcIjtcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVNYXNrZWRGcmFnbWVudFNwcmVhZHMoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gdmlzaXQoZG9jdW1lbnQsIHtcbiAgICAgICAgRnJhZ21lbnRTcHJlYWQobm9kZSkge1xuICAgICAgICAgICAgaWYgKCFub2RlLmRpcmVjdGl2ZXM/LnNvbWUoKHsgbmFtZSB9KSA9PiBuYW1lLnZhbHVlID09PSBcInVubWFza1wiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVtb3ZlRnJhZ21lbnRTcHJlYWRzLmpzLm1hcCIsCiAgICAiLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiByZXN1bHRLZXlOYW1lRnJvbUZpZWxkKGZpZWxkKSB7XG4gICAgcmV0dXJuIGZpZWxkLmFsaWFzID8gZmllbGQuYWxpYXMudmFsdWUgOiBmaWVsZC5uYW1lLnZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdWx0S2V5TmFtZUZyb21GaWVsZC5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnZhcmlhbnRcIjtcbi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkSW5jbHVkZSh7IGRpcmVjdGl2ZXMgfSwgdmFyaWFibGVzKSB7XG4gICAgaWYgKCFkaXJlY3RpdmVzIHx8ICFkaXJlY3RpdmVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGdldEluY2x1c2lvbkRpcmVjdGl2ZXMoZGlyZWN0aXZlcykuZXZlcnkoKHsgZGlyZWN0aXZlLCBpZkFyZ3VtZW50IH0pID0+IHtcbiAgICAgICAgbGV0IGV2YWxlZFZhbHVlID0gZmFsc2U7XG4gICAgICAgIGlmIChpZkFyZ3VtZW50LnZhbHVlLmtpbmQgPT09IFwiVmFyaWFibGVcIikge1xuICAgICAgICAgICAgZXZhbGVkVmFsdWUgPVxuICAgICAgICAgICAgICAgIHZhcmlhYmxlcyAmJiB2YXJpYWJsZXNbaWZBcmd1bWVudC52YWx1ZS5uYW1lLnZhbHVlXTtcbiAgICAgICAgICAgIGludmFyaWFudChldmFsZWRWYWx1ZSAhPT0gdm9pZCAwLCAxNSwgZGlyZWN0aXZlLm5hbWUudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXZhbGVkVmFsdWUgPSBpZkFyZ3VtZW50LnZhbHVlLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gXCJza2lwXCIgPyAhZXZhbGVkVmFsdWUgOiBldmFsZWRWYWx1ZTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGlzSW5jbHVzaW9uRGlyZWN0aXZlKHsgbmFtZTogeyB2YWx1ZSB9IH0pIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IFwic2tpcFwiIHx8IHZhbHVlID09PSBcImluY2x1ZGVcIjtcbn1cbmZ1bmN0aW9uIGdldEluY2x1c2lvbkRpcmVjdGl2ZXMoZGlyZWN0aXZlcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGlmIChkaXJlY3RpdmVzICYmIGRpcmVjdGl2ZXMubGVuZ3RoKSB7XG4gICAgICAgIGRpcmVjdGl2ZXMuZm9yRWFjaCgoZGlyZWN0aXZlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWlzSW5jbHVzaW9uRGlyZWN0aXZlKGRpcmVjdGl2ZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlQXJndW1lbnRzID0gZGlyZWN0aXZlLmFyZ3VtZW50cztcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZU5hbWUgPSBkaXJlY3RpdmUubmFtZS52YWx1ZTtcbiAgICAgICAgICAgIGludmFyaWFudChkaXJlY3RpdmVBcmd1bWVudHMgJiYgZGlyZWN0aXZlQXJndW1lbnRzLmxlbmd0aCA9PT0gMSwgMTYsIGRpcmVjdGl2ZU5hbWUpO1xuICAgICAgICAgICAgY29uc3QgaWZBcmd1bWVudCA9IGRpcmVjdGl2ZUFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIGludmFyaWFudChpZkFyZ3VtZW50Lm5hbWUgJiYgaWZBcmd1bWVudC5uYW1lLnZhbHVlID09PSBcImlmXCIsIDE3LCBkaXJlY3RpdmVOYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGlmVmFsdWUgPSBpZkFyZ3VtZW50LnZhbHVlO1xuICAgICAgICAgICAgLy8gbWVhbnMgaXQgaGFzIHRvIGJlIGEgdmFyaWFibGUgdmFsdWUgaWYgdGhpcyBpcyBhIHZhbGlkIEBza2lwIG9yIEBpbmNsdWRlIGRpcmVjdGl2ZVxuICAgICAgICAgICAgaW52YXJpYW50KGlmVmFsdWUgJiZcbiAgICAgICAgICAgICAgICAoaWZWYWx1ZS5raW5kID09PSBcIlZhcmlhYmxlXCIgfHwgaWZWYWx1ZS5raW5kID09PSBcIkJvb2xlYW5WYWx1ZVwiKSwgMTgsIGRpcmVjdGl2ZU5hbWUpO1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goeyBkaXJlY3RpdmUsIGlmQXJndW1lbnQgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hvdWxkSW5jbHVkZS5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgZ2V0U3RvcmVLZXlOYW1lIH0gZnJvbSBcIi4vZ2V0U3RvcmVLZXlOYW1lLmpzXCI7XG5pbXBvcnQgeyB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24gfSBmcm9tIFwiLi92YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24uanNcIjtcbi8qKlxuKiBAaW50ZXJuYWxcbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVLZXlOYW1lRnJvbUZpZWxkKGZpZWxkLCB2YXJpYWJsZXMpIHtcbiAgICBsZXQgZGlyZWN0aXZlc09iaiA9IG51bGw7XG4gICAgaWYgKGZpZWxkLmRpcmVjdGl2ZXMpIHtcbiAgICAgICAgZGlyZWN0aXZlc09iaiA9IHt9O1xuICAgICAgICBmaWVsZC5kaXJlY3RpdmVzLmZvckVhY2goKGRpcmVjdGl2ZSkgPT4ge1xuICAgICAgICAgICAgZGlyZWN0aXZlc09ialtkaXJlY3RpdmUubmFtZS52YWx1ZV0gPSB7fTtcbiAgICAgICAgICAgIGlmIChkaXJlY3RpdmUuYXJndW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLmFyZ3VtZW50cy5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlIH0pID0+IHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihkaXJlY3RpdmVzT2JqW2RpcmVjdGl2ZS5uYW1lLnZhbHVlXSwgbmFtZSwgdmFsdWUsIHZhcmlhYmxlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGV0IGFyZ09iaiA9IG51bGw7XG4gICAgaWYgKGZpZWxkLmFyZ3VtZW50cyAmJiBmaWVsZC5hcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGFyZ09iaiA9IHt9O1xuICAgICAgICBmaWVsZC5hcmd1bWVudHMuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSB9KSA9PiB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24oYXJnT2JqLCBuYW1lLCB2YWx1ZSwgdmFyaWFibGVzKSk7XG4gICAgfVxuICAgIHJldHVybiBnZXRTdG9yZUtleU5hbWUoZmllbGQubmFtZS52YWx1ZSwgYXJnT2JqLCBkaXJlY3RpdmVzT2JqKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3JlS2V5TmFtZUZyb21GaWVsZC5qcy5tYXBcbiIsCiAgICAiLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1F1ZXJ5UmVzdWx0KHZhbHVlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICBkYXRhOiB2YWx1ZS5kYXRhLFxuICAgIH07XG4gICAgaWYgKHZhbHVlLmVycm9yKSB7XG4gICAgICAgIHJlc3VsdC5lcnJvciA9IHZhbHVlLmVycm9yO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9RdWVyeVJlc3VsdC5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJyeGpzXCI7XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyTWFwKGZuLCBtYWtlQ29udGV4dCA9ICgpID0+IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAoc291cmNlKSA9PiBuZXcgT2JzZXJ2YWJsZSgoc3Vic2NyaWJlcikgPT4ge1xuICAgICAgICBsZXQgY29udGV4dCA9IG1ha2VDb250ZXh0KCk7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIG5leHQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZuKHZhbHVlLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlKCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmlsdGVyTWFwLmpzLm1hcCIsCiAgICAiY29uc3QgeyB0b1N0cmluZywgaGFzT3duUHJvcGVydHkgfSA9IE9iamVjdC5wcm90b3R5cGU7XG5jb25zdCBmblRvU3RyID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuY29uc3QgcHJldmlvdXNDb21wYXJpc29ucyA9IG5ldyBNYXAoKTtcbi8qKlxuICogUGVyZm9ybXMgYSBkZWVwIGVxdWFsaXR5IGNoZWNrIG9uIHR3byBKYXZhU2NyaXB0IHZhbHVlcywgdG9sZXJhdGluZyBjeWNsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbChhLCBiKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNoZWNrKGEsIGIpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgcHJldmlvdXNDb21wYXJpc29ucy5jbGVhcigpO1xuICAgIH1cbn1cbi8vIEFsbG93IGRlZmF1bHQgaW1wb3J0cyBhcyB3ZWxsLlxuZXhwb3J0IGRlZmF1bHQgZXF1YWw7XG5mdW5jdGlvbiBjaGVjayhhLCBiKSB7XG4gICAgLy8gSWYgdGhlIHR3byB2YWx1ZXMgYXJlIHN0cmljdGx5IGVxdWFsLCBvdXIgam9iIGlzIGVhc3kuXG4gICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgcmV0dXJucyBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBydW50aW1lIHR5cGUgb2ZcbiAgICAvLyB0aGUgZ2l2ZW4gdmFsdWUgdGhhdCBpcyBjb25zaWRlcmFibHkgbW9yZSBwcmVjaXNlIHRoYW4gdHlwZW9mLlxuICAgIGNvbnN0IGFUYWcgPSB0b1N0cmluZy5jYWxsKGEpO1xuICAgIGNvbnN0IGJUYWcgPSB0b1N0cmluZy5jYWxsKGIpO1xuICAgIC8vIElmIHRoZSBydW50aW1lIHR5cGVzIG9mIGEgYW5kIGIgYXJlIGRpZmZlcmVudCwgdGhleSBjb3VsZCBtYXliZSBiZSBlcXVhbFxuICAgIC8vIHVuZGVyIHNvbWUgaW50ZXJwcmV0YXRpb24gb2YgZXF1YWxpdHksIGJ1dCBmb3Igc2ltcGxpY2l0eSBhbmQgcGVyZm9ybWFuY2VcbiAgICAvLyB3ZSBqdXN0IHJldHVybiBmYWxzZSBpbnN0ZWFkLlxuICAgIGlmIChhVGFnICE9PSBiVGFnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc3dpdGNoIChhVGFnKSB7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQXJyYXldJzpcbiAgICAgICAgICAgIC8vIEFycmF5cyBhcmUgYSBsb3QgbGlrZSBvdGhlciBvYmplY3RzLCBidXQgd2UgY2FuIGNoZWFwbHkgY29tcGFyZSB0aGVpclxuICAgICAgICAgICAgLy8gbGVuZ3RocyBhcyBhIHNob3J0LWN1dCBiZWZvcmUgY29tcGFyaW5nIHRoZWlyIGVsZW1lbnRzLlxuICAgICAgICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIEZhbGwgdGhyb3VnaCB0byBvYmplY3QgY2FzZS4uLlxuICAgICAgICBjYXNlICdbb2JqZWN0IE9iamVjdF0nOiB7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNseUNvbXBhcmVkKGEsIGIpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY29uc3QgYUtleXMgPSBkZWZpbmVkS2V5cyhhKTtcbiAgICAgICAgICAgIGNvbnN0IGJLZXlzID0gZGVmaW5lZEtleXMoYik7XG4gICAgICAgICAgICAvLyBJZiBgYWAgYW5kIGBiYCBoYXZlIGEgZGlmZmVyZW50IG51bWJlciBvZiBlbnVtZXJhYmxlIGtleXMsIHRoZXlcbiAgICAgICAgICAgIC8vIG11c3QgYmUgZGlmZmVyZW50LlxuICAgICAgICAgICAgY29uc3Qga2V5Q291bnQgPSBhS2V5cy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoa2V5Q291bnQgIT09IGJLZXlzLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAvLyBOb3cgbWFrZSBzdXJlIHRoZXkgaGF2ZSB0aGUgc2FtZSBrZXlzLlxuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBrZXlDb3VudDsgKytrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIGFLZXlzW2tdKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluYWxseSwgY2hlY2sgZGVlcCBlcXVhbGl0eSBvZiBhbGwgY2hpbGQgcHJvcGVydGllcy5cbiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2V5Q291bnQ7ICsraykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGFLZXlzW2tdO1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2soYVtrZXldLCBiW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdbb2JqZWN0IEVycm9yXSc6XG4gICAgICAgICAgICByZXR1cm4gYS5uYW1lID09PSBiLm5hbWUgJiYgYS5tZXNzYWdlID09PSBiLm1lc3NhZ2U7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAgICAgICAvLyBIYW5kbGUgTmFOLCB3aGljaCBpcyAhPT0gaXRzZWxmLlxuICAgICAgICAgICAgaWYgKGEgIT09IGEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGIgIT09IGI7XG4gICAgICAgIC8vIEZhbGwgdGhyb3VnaCB0byBzaGFyZWQgK2EgPT09ICtiIGNhc2UuLi5cbiAgICAgICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgRGF0ZV0nOlxuICAgICAgICAgICAgcmV0dXJuICthID09PSArYjtcbiAgICAgICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgICAgICAgIHJldHVybiBhID09IGAke2J9YDtcbiAgICAgICAgY2FzZSAnW29iamVjdCBNYXBdJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBTZXRdJzoge1xuICAgICAgICAgICAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c2x5Q29tcGFyZWQoYSwgYikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBjb25zdCBhSXRlcmF0b3IgPSBhLmVudHJpZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IGlzTWFwID0gYVRhZyA9PT0gJ1tvYmplY3QgTWFwXSc7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBhSXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChpbmZvLmRvbmUpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vIElmIGEgaW5zdGFuY2VvZiBTZXQsIGFWYWx1ZSA9PT0gYUtleS5cbiAgICAgICAgICAgICAgICBjb25zdCBbYUtleSwgYVZhbHVlXSA9IGluZm8udmFsdWU7XG4gICAgICAgICAgICAgICAgLy8gU28gdGhpcyB3b3JrcyB0aGUgc2FtZSB3YXkgZm9yIGJvdGggU2V0IGFuZCBNYXAuXG4gICAgICAgICAgICAgICAgaWYgKCFiLmhhcyhhS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHdlIGNhcmUgYWJvdXQgZGVlcCBlcXVhbGl0eSBvZiB2YWx1ZXMgb25seSB3aGVuIGRlYWxpbmdcbiAgICAgICAgICAgICAgICAvLyB3aXRoIE1hcCBzdHJ1Y3R1cmVzLlxuICAgICAgICAgICAgICAgIGlmIChpc01hcCAmJiAhY2hlY2soYVZhbHVlLCBiLmdldChhS2V5KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgVWludDE2QXJyYXldJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBVaW50OEFycmF5XSc6IC8vIEJ1ZmZlciwgaW4gTm9kZS5qcy5cbiAgICAgICAgY2FzZSAnW29iamVjdCBVaW50MzJBcnJheV0nOlxuICAgICAgICBjYXNlICdbb2JqZWN0IEludDMyQXJyYXldJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBJbnQ4QXJyYXldJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBJbnQxNkFycmF5XSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQXJyYXlCdWZmZXJdJzpcbiAgICAgICAgICAgIC8vIERhdGFWaWV3IGRvZXNuJ3QgbmVlZCB0aGVzZSBjb252ZXJzaW9ucywgYnV0IHRoZSBlcXVhbGl0eSBjaGVjayBpc1xuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBzYW1lLlxuICAgICAgICAgICAgYSA9IG5ldyBVaW50OEFycmF5KGEpO1xuICAgICAgICAgICAgYiA9IG5ldyBVaW50OEFycmF5KGIpO1xuICAgICAgICAvLyBGYWxsIHRocm91Z2guLi5cbiAgICAgICAgY2FzZSAnW29iamVjdCBEYXRhVmlld10nOiB7XG4gICAgICAgICAgICBsZXQgbGVuID0gYS5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbiA9PT0gYi5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGxlbi0tICYmIGFbbGVuXSA9PT0gYltsZW5dKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgbG9vcGluZyBhcyBsb25nIGFzIHRoZSBieXRlcyBhcmUgZXF1YWwuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxlbiA9PT0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnW29iamVjdCBBc3luY0Z1bmN0aW9uXSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJzpcbiAgICAgICAgY2FzZSAnW29iamVjdCBBc3luY0dlbmVyYXRvckZ1bmN0aW9uXSc6XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgRnVuY3Rpb25dJzoge1xuICAgICAgICAgICAgY29uc3QgYUNvZGUgPSBmblRvU3RyLmNhbGwoYSk7XG4gICAgICAgICAgICBpZiAoYUNvZGUgIT09IGZuVG9TdHIuY2FsbChiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIGNvbnNpZGVyIG5vbi1uYXRpdmUgZnVuY3Rpb25zIGVxdWFsIGlmIHRoZXkgaGF2ZSB0aGUgc2FtZSBjb2RlXG4gICAgICAgICAgICAvLyAobmF0aXZlIGZ1bmN0aW9ucyByZXF1aXJlID09PSBiZWNhdXNlIHRoZWlyIGNvZGUgaXMgY2Vuc29yZWQpLlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgYmVoYXZpb3IgaXMgbm90IGVudGlyZWx5IHNvdW5kLCBzaW5jZSAhPT0gZnVuY3Rpb25cbiAgICAgICAgICAgIC8vIG9iamVjdHMgd2l0aCB0aGUgc2FtZSBjb2RlIGNhbiBiZWhhdmUgZGlmZmVyZW50bHkgZGVwZW5kaW5nIG9uXG4gICAgICAgICAgICAvLyB0aGVpciBjbG9zdXJlIHNjb3BlLiBIb3dldmVyLCBhbnkgZnVuY3Rpb24gY2FuIGJlaGF2ZSBkaWZmZXJlbnRseVxuICAgICAgICAgICAgLy8gZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZXMgb2YgaXRzIGlucHV0IGFyZ3VtZW50cyAoaW5jbHVkaW5nIHRoaXMpXG4gICAgICAgICAgICAvLyBhbmQgaXRzIGNhbGxpbmcgY29udGV4dCAoaW5jbHVkaW5nIGl0cyBjbG9zdXJlIHNjb3BlKSwgZXZlblxuICAgICAgICAgICAgLy8gdGhvdWdoIHRoZSBmdW5jdGlvbiBvYmplY3QgaXMgPT09IHRvIGl0c2VsZjsgYW5kIGl0IGlzIGVudGlyZWx5XG4gICAgICAgICAgICAvLyBwb3NzaWJsZSBmb3IgZnVuY3Rpb25zIHRoYXQgYXJlIG5vdCA9PT0gdG8gYmVoYXZlIGV4YWN0bHkgdGhlXG4gICAgICAgICAgICAvLyBzYW1lIHVuZGVyIGFsbCBjb25jZWl2YWJsZSBjaXJjdW1zdGFuY2VzLiBCZWNhdXNlIG5vbmUgb2YgdGhlc2VcbiAgICAgICAgICAgIC8vIGZhY3RvcnMgYXJlIHN0YXRpY2FsbHkgZGVjaWRhYmxlIGluIEphdmFTY3JpcHQsIEpTIGZ1bmN0aW9uXG4gICAgICAgICAgICAvLyBlcXVhbGl0eSBpcyBub3Qgd2VsbC1kZWZpbmVkLiBUaGlzIGFtYmlndWl0eSBhbGxvd3MgdXMgdG9cbiAgICAgICAgICAgIC8vIGNvbnNpZGVyIHRoZSBiZXN0IHBvc3NpYmxlIGhldXJpc3RpYyBhbW9uZyB2YXJpb3VzIGltcGVyZmVjdFxuICAgICAgICAgICAgLy8gb3B0aW9ucywgYW5kIGVxdWF0aW5nIG5vbi1uYXRpdmUgZnVuY3Rpb25zIHRoYXQgaGF2ZSB0aGUgc2FtZVxuICAgICAgICAgICAgLy8gY29kZSBoYXMgZW5vcm1vdXMgcHJhY3RpY2FsIGJlbmVmaXRzLCBzdWNoIGFzIHdoZW4gY29tcGFyaW5nXG4gICAgICAgICAgICAvLyBmdW5jdGlvbnMgdGhhdCBhcmUgcmVwZWF0ZWRseSBwYXNzZWQgYXMgZnJlc2ggZnVuY3Rpb25cbiAgICAgICAgICAgIC8vIGV4cHJlc3Npb25zIHdpdGhpbiBvYmplY3RzIHRoYXQgYXJlIG90aGVyd2lzZSBkZWVwbHkgZXF1YWwuIFNpbmNlXG4gICAgICAgICAgICAvLyBhbnkgZnVuY3Rpb24gY3JlYXRlZCBmcm9tIHRoZSBzYW1lIHN5bnRhY3RpYyBleHByZXNzaW9uIChpbiB0aGVcbiAgICAgICAgICAgIC8vIHNhbWUgY29kZSBsb2NhdGlvbikgd2lsbCBhbHdheXMgc3RyaW5naWZ5IHRvIHRoZSBzYW1lIGNvZGVcbiAgICAgICAgICAgIC8vIGFjY29yZGluZyB0byBmblRvU3RyLmNhbGwsIHdlIGNhbiByZWFzb25hYmx5IGV4cGVjdCB0aGVzZVxuICAgICAgICAgICAgLy8gcmVwZWF0ZWRseSBwYXNzZWQgZnVuY3Rpb24gZXhwcmVzc2lvbnMgdG8gaGF2ZSB0aGUgc2FtZSBjb2RlLCBhbmRcbiAgICAgICAgICAgIC8vIHRodXMgYmVoYXZlIFwidGhlIHNhbWVcIiAod2l0aCBhbGwgdGhlIGNhdmVhdHMgbWVudGlvbmVkIGFib3ZlKSxcbiAgICAgICAgICAgIC8vIGV2ZW4gdGhvdWdoIHRoZSBydW50aW1lIGZ1bmN0aW9uIG9iamVjdHMgYXJlICE9PSB0byBvbmUgYW5vdGhlci5cbiAgICAgICAgICAgIHJldHVybiAhZW5kc1dpdGgoYUNvZGUsIG5hdGl2ZUNvZGVTdWZmaXgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIE90aGVyd2lzZSB0aGUgdmFsdWVzIGFyZSBub3QgZXF1YWwuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZGVmaW5lZEtleXMob2JqKSB7XG4gICAgLy8gUmVtZW1iZXIgdGhhdCB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIEFycmF5LnByb3RvdHlwZS5maWx0ZXIgd2lsbCBiZVxuICAgIC8vIHVzZWQgYXMgYHRoaXNgIHdpdGhpbiB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikuZmlsdGVyKGlzRGVmaW5lZEtleSwgb2JqKTtcbn1cbmZ1bmN0aW9uIGlzRGVmaW5lZEtleShrZXkpIHtcbiAgICByZXR1cm4gdGhpc1trZXldICE9PSB2b2lkIDA7XG59XG5jb25zdCBuYXRpdmVDb2RlU3VmZml4ID0gXCJ7IFtuYXRpdmUgY29kZV0gfVwiO1xuZnVuY3Rpb24gZW5kc1dpdGgoZnVsbCwgc3VmZml4KSB7XG4gICAgY29uc3QgZnJvbUluZGV4ID0gZnVsbC5sZW5ndGggLSBzdWZmaXgubGVuZ3RoO1xuICAgIHJldHVybiBmcm9tSW5kZXggPj0gMCAmJlxuICAgICAgICBmdWxsLmluZGV4T2Yoc3VmZml4LCBmcm9tSW5kZXgpID09PSBmcm9tSW5kZXg7XG59XG5mdW5jdGlvbiBwcmV2aW91c2x5Q29tcGFyZWQoYSwgYikge1xuICAgIC8vIFRob3VnaCBjeWNsaWMgcmVmZXJlbmNlcyBjYW4gbWFrZSBhbiBvYmplY3QgZ3JhcGggYXBwZWFyIGluZmluaXRlIGZyb20gdGhlXG4gICAgLy8gcGVyc3BlY3RpdmUgb2YgYSBkZXB0aC1maXJzdCB0cmF2ZXJzYWwsIHRoZSBncmFwaCBzdGlsbCBjb250YWlucyBhIGZpbml0ZVxuICAgIC8vIG51bWJlciBvZiBkaXN0aW5jdCBvYmplY3QgcmVmZXJlbmNlcy4gV2UgdXNlIHRoZSBwcmV2aW91c0NvbXBhcmlzb25zIGNhY2hlXG4gICAgLy8gdG8gYXZvaWQgY29tcGFyaW5nIHRoZSBzYW1lIHBhaXIgb2Ygb2JqZWN0IHJlZmVyZW5jZXMgbW9yZSB0aGFuIG9uY2UsIHdoaWNoXG4gICAgLy8gZ3VhcmFudGVlcyB0ZXJtaW5hdGlvbiAoZXZlbiBpZiB3ZSBlbmQgdXAgY29tcGFyaW5nIGV2ZXJ5IG9iamVjdCBpbiBvbmVcbiAgICAvLyBncmFwaCB0byBldmVyeSBvYmplY3QgaW4gdGhlIG90aGVyIGdyYXBoLCB3aGljaCBpcyBleHRyZW1lbHkgdW5saWtlbHkpLFxuICAgIC8vIHdoaWxlIHN0aWxsIGFsbG93aW5nIHdlaXJkIGlzb21vcnBoaWMgc3RydWN0dXJlcyAobGlrZSByaW5ncyB3aXRoIGRpZmZlcmVudFxuICAgIC8vIGxlbmd0aHMpIGEgY2hhbmNlIHRvIHBhc3MgdGhlIGVxdWFsaXR5IHRlc3QuXG4gICAgbGV0IGJTZXQgPSBwcmV2aW91c0NvbXBhcmlzb25zLmdldChhKTtcbiAgICBpZiAoYlNldCkge1xuICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBoZXJlIGJlY2F1c2Ugd2UgY2FuIGJlIHN1cmUgZmFsc2Ugd2lsbCBiZSByZXR1cm5lZCBzb21ld2hlcmVcbiAgICAgICAgLy8gZWxzZSBpZiB0aGUgb2JqZWN0cyBhcmUgbm90IGVxdWl2YWxlbnQuXG4gICAgICAgIGlmIChiU2V0LmhhcyhiKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcHJldmlvdXNDb21wYXJpc29ucy5zZXQoYSwgYlNldCA9IG5ldyBTZXQpO1xuICAgIH1cbiAgICBiU2V0LmFkZChiKTtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLAogICAgImltcG9ydCBlcXVhbCBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgY3JlYXRlRnJhZ21lbnRNYXAgfSBmcm9tIFwiLi9jcmVhdGVGcmFnbWVudE1hcC5qc1wiO1xuaW1wb3J0IHsgZ2V0RnJhZ21lbnREZWZpbml0aW9ucyB9IGZyb20gXCIuL2dldEZyYWdtZW50RGVmaW5pdGlvbnMuanNcIjtcbmltcG9ydCB7IGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbiB9IGZyb20gXCIuL2dldEZyYWdtZW50RnJvbVNlbGVjdGlvbi5qc1wiO1xuaW1wb3J0IHsgZ2V0TWFpbkRlZmluaXRpb24gfSBmcm9tIFwiLi9nZXRNYWluRGVmaW5pdGlvbi5qc1wiO1xuaW1wb3J0IHsgaXNGaWVsZCB9IGZyb20gXCIuL2lzRmllbGQuanNcIjtcbmltcG9ydCB7IHJlc3VsdEtleU5hbWVGcm9tRmllbGQgfSBmcm9tIFwiLi9yZXN1bHRLZXlOYW1lRnJvbUZpZWxkLmpzXCI7XG5pbXBvcnQgeyBzaG91bGRJbmNsdWRlIH0gZnJvbSBcIi4vc2hvdWxkSW5jbHVkZS5qc1wiO1xuLy8gUmV0dXJucyB0cnVlIGlmIGFSZXN1bHQgYW5kIGJSZXN1bHQgYXJlIGRlZXBseSBlcXVhbCBhY2NvcmRpbmcgdG8gdGhlIGZpZWxkc1xuLy8gc2VsZWN0ZWQgYnkgdGhlIGdpdmVuIHF1ZXJ5LCBpZ25vcmluZyBhbnkgZmllbGRzIG1hcmtlZCBhcyBAbm9ucmVhY3RpdmUuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxCeVF1ZXJ5KHF1ZXJ5LCB7IGRhdGE6IGFEYXRhLCAuLi5hUmVzdCB9LCB7IGRhdGE6IGJEYXRhLCAuLi5iUmVzdCB9LCB2YXJpYWJsZXMpIHtcbiAgICByZXR1cm4gKGVxdWFsKGFSZXN0LCBiUmVzdCkgJiZcbiAgICAgICAgZXF1YWxCeVNlbGVjdGlvblNldChnZXRNYWluRGVmaW5pdGlvbihxdWVyeSkuc2VsZWN0aW9uU2V0LCBhRGF0YSwgYkRhdGEsIHtcbiAgICAgICAgICAgIGZyYWdtZW50TWFwOiBjcmVhdGVGcmFnbWVudE1hcChnZXRGcmFnbWVudERlZmluaXRpb25zKHF1ZXJ5KSksXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH0pKTtcbn1cbmZ1bmN0aW9uIGVxdWFsQnlTZWxlY3Rpb25TZXQoc2VsZWN0aW9uU2V0LCBhUmVzdWx0LCBiUmVzdWx0LCBjb250ZXh0KSB7XG4gICAgaWYgKGFSZXN1bHQgPT09IGJSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHNlZW5TZWxlY3Rpb25zID0gbmV3IFNldCgpO1xuICAgIC8vIFJldHVybmluZyB0cnVlIGZyb20gdGhpcyBBcnJheS5wcm90b3R5cGUuZXZlcnkgY2FsbGJhY2sgZnVuY3Rpb24gc2tpcHMgdGhlXG4gICAgLy8gY3VycmVudCBmaWVsZC9zdWJ0cmVlLiBSZXR1cm5pbmcgZmFsc2UgYWJvcnRzIHRoZSBlbnRpcmUgdHJhdmVyc2FsXG4gICAgLy8gaW1tZWRpYXRlbHksIGNhdXNpbmcgZXF1YWxCeVNlbGVjdGlvblNldCB0byByZXR1cm4gZmFsc2UuXG4gICAgcmV0dXJuIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmV2ZXJ5KChzZWxlY3Rpb24pID0+IHtcbiAgICAgICAgLy8gQXZvaWQgcmUtcHJvY2Vzc2luZyB0aGUgc2FtZSBzZWxlY3Rpb24gYXQgdGhlIHNhbWUgbGV2ZWwgb2YgcmVjdXJzaW9uLCBpblxuICAgICAgICAvLyBjYXNlIHRoZSBzYW1lIGZpZWxkIGdldHMgaW5jbHVkZWQgdmlhIG11bHRpcGxlIGluZGlyZWN0IGZyYWdtZW50IHNwcmVhZHMuXG4gICAgICAgIGlmIChzZWVuU2VsZWN0aW9ucy5oYXMoc2VsZWN0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBzZWVuU2VsZWN0aW9ucy5hZGQoc2VsZWN0aW9uKTtcbiAgICAgICAgLy8gSWdub3JlIEBza2lwKGlmOiB0cnVlKSBhbmQgQGluY2x1ZGUoaWY6IGZhbHNlKSBmaWVsZHMuXG4gICAgICAgIGlmICghc2hvdWxkSW5jbHVkZShzZWxlY3Rpb24sIGNvbnRleHQudmFyaWFibGVzKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAvLyBJZiB0aGUgZmllbGQgb3IgKG5hbWVkKSBmcmFnbWVudCBzcHJlYWQgaGFzIGEgQG5vbnJlYWN0aXZlIGRpcmVjdGl2ZSBvblxuICAgICAgICAvLyBpdCwgd2UgZG9uJ3QgY2FyZSBpZiBpdCdzIGRpZmZlcmVudCwgc28gd2UgcHJldGVuZCBpdCdzIHRoZSBzYW1lLlxuICAgICAgICBpZiAoc2VsZWN0aW9uSGFzTm9ucmVhY3RpdmVEaXJlY3RpdmUoc2VsZWN0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoaXNGaWVsZChzZWxlY3Rpb24pKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRLZXkgPSByZXN1bHRLZXlOYW1lRnJvbUZpZWxkKHNlbGVjdGlvbik7XG4gICAgICAgICAgICBjb25zdCBhUmVzdWx0Q2hpbGQgPSBhUmVzdWx0ICYmIGFSZXN1bHRbcmVzdWx0S2V5XTtcbiAgICAgICAgICAgIGNvbnN0IGJSZXN1bHRDaGlsZCA9IGJSZXN1bHQgJiYgYlJlc3VsdFtyZXN1bHRLZXldO1xuICAgICAgICAgICAgY29uc3QgY2hpbGRTZWxlY3Rpb25TZXQgPSBzZWxlY3Rpb24uc2VsZWN0aW9uU2V0O1xuICAgICAgICAgICAgaWYgKCFjaGlsZFNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZXNlIGFyZSBzY2FsYXIgdmFsdWVzLCBzbyB3ZSBjYW4gY29tcGFyZSB0aGVtIHdpdGggZGVlcCBlcXVhbFxuICAgICAgICAgICAgICAgIC8vIHdpdGhvdXQgcmVkb2luZyB0aGUgbWFpbiByZWN1cnNpdmUgd29yay5cbiAgICAgICAgICAgICAgICByZXR1cm4gZXF1YWwoYVJlc3VsdENoaWxkLCBiUmVzdWx0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYUNoaWxkSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoYVJlc3VsdENoaWxkKTtcbiAgICAgICAgICAgIGNvbnN0IGJDaGlsZElzQXJyYXkgPSBBcnJheS5pc0FycmF5KGJSZXN1bHRDaGlsZCk7XG4gICAgICAgICAgICBpZiAoYUNoaWxkSXNBcnJheSAhPT0gYkNoaWxkSXNBcnJheSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoYUNoaWxkSXNBcnJheSAmJiBiQ2hpbGRJc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gYVJlc3VsdENoaWxkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoYlJlc3VsdENoaWxkLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVxdWFsQnlTZWxlY3Rpb25TZXQoY2hpbGRTZWxlY3Rpb25TZXQsIGFSZXN1bHRDaGlsZFtpXSwgYlJlc3VsdENoaWxkW2ldLCBjb250ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGVxdWFsQnlTZWxlY3Rpb25TZXQoY2hpbGRTZWxlY3Rpb25TZXQsIGFSZXN1bHRDaGlsZCwgYlJlc3VsdENoaWxkLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uKHNlbGVjdGlvbiwgY29udGV4dC5mcmFnbWVudE1hcCk7XG4gICAgICAgICAgICBpZiAoZnJhZ21lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZnJhZ21lbnQgbWlnaHQgPT09IHNlbGVjdGlvbiBpZiBpdCdzIGFuIGlubGluZSBmcmFnbWVudCwgYnV0XG4gICAgICAgICAgICAgICAgLy8gY291bGQgYmUgIT09IGlmIGl0J3MgYSBuYW1lZCBmcmFnbWVudCAuLi5zcHJlYWQuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbkhhc05vbnJlYWN0aXZlRGlyZWN0aXZlKGZyYWdtZW50KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVxdWFsQnlTZWxlY3Rpb25TZXQoZnJhZ21lbnQuc2VsZWN0aW9uU2V0LCBcbiAgICAgICAgICAgICAgICAvLyBOb3RpY2UgdGhhdCB3ZSByZXVzZSB0aGUgc2FtZSBhUmVzdWx0IGFuZCBiUmVzdWx0IHZhbHVlcyBoZXJlLFxuICAgICAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBmcmFnbWVudCAuLi5zcHJlYWQgZG9lcyBub3Qgc3BlY2lmeSBhIGZpZWxkIG5hbWUsIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGNvbnNpc3RzIG9mIG11bHRpcGxlIGZpZWxkcyAod2l0aGluIHRoZSBmcmFnbWVudCdzIHNlbGVjdGlvbiBzZXQpXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byB0aGUgY3VycmVudCByZXN1bHQgdmFsdWUocykuXG4gICAgICAgICAgICAgICAgYVJlc3VsdCwgYlJlc3VsdCwgY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHNlbGVjdGlvbkhhc05vbnJlYWN0aXZlRGlyZWN0aXZlKHNlbGVjdGlvbikge1xuICAgIHJldHVybiAoISFzZWxlY3Rpb24uZGlyZWN0aXZlcyAmJiBzZWxlY3Rpb24uZGlyZWN0aXZlcy5zb21lKGRpcmVjdGl2ZUlzTm9ucmVhY3RpdmUpKTtcbn1cbmZ1bmN0aW9uIGRpcmVjdGl2ZUlzTm9ucmVhY3RpdmUoZGlyKSB7XG4gICAgcmV0dXJuIGRpci5uYW1lLnZhbHVlID09PSBcIm5vbnJlYWN0aXZlXCI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcXVhbEJ5UXVlcnkuanMubWFwIiwKICAgICJpbXBvcnQgeyBoYXNEaXJlY3RpdmVzIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbFwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnZhcmlhbnRcIjtcbmV4cG9ydCBjbGFzcyBOb3RJbXBsZW1lbnRlZEhhbmRsZXIge1xuICAgIGlzSW5jcmVtZW50YWxSZXN1bHQoXykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHByZXBhcmVSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICAgICAgaW52YXJpYW50KCFoYXNEaXJlY3RpdmVzKFtcImRlZmVyXCJdLCByZXF1ZXN0LnF1ZXJ5KSwgNjQpO1xuICAgICAgICByZXR1cm4gcmVxdWVzdDtcbiAgICB9XG4gICAgZXh0cmFjdEVycm9ycygpIHsgfVxuICAgIC8vIFRoaXMgY29kZSBwYXRoIGNhbiBuZXZlciBiZSByZWFjaGVkLCBzbyB3ZSB3b24ndCBpbXBsZW1lbnQgaXQuXG4gICAgc3RhcnRSZXF1ZXN0ID0gdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm90SW1wbGVtZW50ZWQuanMubWFwXG4iLAogICAgImltcG9ydCB7IGdldE9wZXJhdGlvbkRlZmluaXRpb24sIGdldE9wZXJhdGlvbk5hbWUsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbFwiO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9wZXJhdGlvbihyZXF1ZXN0LCB7IGNsaWVudCB9KSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uID0ge1xuICAgICAgICBxdWVyeTogcmVxdWVzdC5xdWVyeSxcbiAgICAgICAgdmFyaWFibGVzOiByZXF1ZXN0LnZhcmlhYmxlcyB8fCB7fSxcbiAgICAgICAgZXh0ZW5zaW9uczogcmVxdWVzdC5leHRlbnNpb25zIHx8IHt9LFxuICAgICAgICBvcGVyYXRpb25OYW1lOiBnZXRPcGVyYXRpb25OYW1lKHJlcXVlc3QucXVlcnkpLFxuICAgICAgICBvcGVyYXRpb25UeXBlOiBnZXRPcGVyYXRpb25EZWZpbml0aW9uKHJlcXVlc3QucXVlcnkpLm9wZXJhdGlvbixcbiAgICB9O1xuICAgIGxldCBjb250ZXh0ID0geyAuLi5yZXF1ZXN0LmNvbnRleHQgfTtcbiAgICBjb25zdCBzZXRDb250ZXh0ID0gKG5leHQpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnRleHQgPSB7IC4uLmNvbnRleHQsIC4uLm5leHQoZ2V0Q29udGV4dCgpKSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dCA9IHsgLi4uY29udGV4dCwgLi4ubmV4dCB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBnZXRDb250ZXh0ID0gKCkgPT4gT2JqZWN0LmZyZWV6ZSh7IC4uLmNvbnRleHQgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wZXJhdGlvbiwgXCJzZXRDb250ZXh0XCIsIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBzZXRDb250ZXh0LFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvcGVyYXRpb24sIFwiZ2V0Q29udGV4dFwiLCB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogZ2V0Q29udGV4dCxcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3BlcmF0aW9uLCBcImNsaWVudFwiLCB7XG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogY2xpZW50LFxuICAgIH0pO1xuICAgIHJldHVybiBvcGVyYXRpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVPcGVyYXRpb24uanMubWFwIiwKICAgICJpbXBvcnQgeyB2aXNpdCB9IGZyb20gXCJncmFwaHFsXCI7XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyT3BlcmF0aW9uVmFyaWFibGVzKHZhcmlhYmxlcywgcXVlcnkpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7IC4uLnZhcmlhYmxlcyB9O1xuICAgIGNvbnN0IHVudXNlZE5hbWVzID0gbmV3IFNldChPYmplY3Qua2V5cyh2YXJpYWJsZXMpKTtcbiAgICB2aXNpdChxdWVyeSwge1xuICAgICAgICBWYXJpYWJsZShub2RlLCBfa2V5LCBwYXJlbnQpIHtcbiAgICAgICAgICAgIC8vIEEgdmFyaWFibGUgdHlwZSBkZWZpbml0aW9uIGF0IHRoZSB0b3AgbGV2ZWwgb2YgYSBxdWVyeSBpcyBub3RcbiAgICAgICAgICAgIC8vIGVub3VnaCB0byBzaWxlbmNlIHNlcnZlci1zaWRlIGVycm9ycyBhYm91dCB0aGUgdmFyaWFibGUgYmVpbmdcbiAgICAgICAgICAgIC8vIHVudXNlZCwgc28gdmFyaWFibGUgZGVmaW5pdGlvbnMgZG8gbm90IGNvdW50IGFzIHVzYWdlLlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9zcGVjLmdyYXBocWwub3JnL2RyYWZ0LyNzZWMtQWxsLVZhcmlhYmxlcy1Vc2VkXG4gICAgICAgICAgICBpZiAocGFyZW50ICYmXG4gICAgICAgICAgICAgICAgcGFyZW50LmtpbmQgIT09IFwiVmFyaWFibGVEZWZpbml0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB1bnVzZWROYW1lcy5kZWxldGUobm9kZS5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICB1bnVzZWROYW1lcy5mb3JFYWNoKChuYW1lKSA9PiB7XG4gICAgICAgIGRlbGV0ZSByZXN1bHRbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbHRlck9wZXJhdGlvblZhcmlhYmxlcy5qcy5tYXAiLAogICAgImltcG9ydCB7IEVNUFRZIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IGNyZWF0ZU9wZXJhdGlvbiB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9saW5rL3V0aWxzXCI7XG5pbXBvcnQgeyBfX0RFVl9fIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9lbnZpcm9ubWVudFwiO1xuaW1wb3J0IHsgaW52YXJpYW50LCBuZXdJbnZhcmlhbnRFcnJvciwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuLyoqXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIGxpbmtzIGluIEFwb2xsbyBDbGllbnQuIEEgbGluayByZXByZXNlbnRzIGVpdGhlciBhXG4gKiBzZWxmLWNvbnRhaW5lZCBtb2RpZmljYXRpb24gdG8gYSBHcmFwaFFMIG9wZXJhdGlvbiBvciBhIHNpZGUgZWZmZWN0IChzdWNoIGFzXG4gKiBsb2dnaW5nKS5cbiAqXG4gKiBAcmVtYXJrc1xuICpcbiAqIExpbmtzIGVuYWJsZSB5b3UgdG8gY3VzdG9taXplIEFwb2xsbyBDbGllbnQncyByZXF1ZXN0IGZsb3cgYnkgY29tcG9zaW5nXG4gKiB0b2dldGhlciBkaWZmZXJlbnQgcGllY2VzIG9mIGZ1bmN0aW9uYWxpdHkgaW50byBhIGNoYWluIG9mIGxpbmtzLiBFYWNoXG4gKiBsaW5rIHJlcHJlc2VudHMgYSBzcGVjaWZpYyBjYXBhYmlsaXR5LCBzdWNoIGFzIGFkZGluZyBhdXRoZW50aWNhdGlvbiBoZWFkZXJzLFxuICogcmV0cnlpbmcgZmFpbGVkIHJlcXVlc3RzLCBiYXRjaGluZyBvcGVyYXRpb25zLCBvciBzZW5kaW5nIHJlcXVlc3RzIHRvIGFcbiAqIEdyYXBoUUwgc2VydmVyLlxuICpcbiAqIEV2ZXJ5IGxpbmsgbXVzdCBkZWZpbmUgYSByZXF1ZXN0IGhhbmRsZXIgdmlhIGl0cyBjb25zdHJ1Y3RvciBvciBieSBleHRlbmRpbmdcbiAqIHRoaXMgY2xhc3MgYW5kIGltcGxlbWVudGluZyB0aGUgYHJlcXVlc3RgIG1ldGhvZC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBBcG9sbG9MaW5rIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50XCI7XG4gKlxuICogY29uc3QgbGluayA9IG5ldyBBcG9sbG9MaW5rKChvcGVyYXRpb24sIGZvcndhcmQpID0+IHtcbiAqICAgY29uc29sZS5sb2coXCJPcGVyYXRpb246XCIsIG9wZXJhdGlvbi5vcGVyYXRpb25OYW1lKTtcbiAqICAgcmV0dXJuIGZvcndhcmQob3BlcmF0aW9uKTtcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBBcG9sbG9MaW5rIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbGluayB0aGF0IGNvbXBsZXRlcyBpbW1lZGlhdGVseSBhbmQgZG9lcyBub3QgZW1pdCBhIHJlc3VsdC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IGxpbmsgPSBBcG9sbG9MaW5rLmVtcHR5KCk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IEFwb2xsb0xpbmsoKCkgPT4gRU1QVFkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wb3NlcyBtdWx0aXBsZSBsaW5rcyBpbnRvIGEgc2luZ2xlIGNvbXBvc2VkIGxpbmsgdGhhdCBleGVjdXRlcyBlYWNoXG4gICAgICogcHJvdmlkZWQgbGluayBpbiBzZXJpYWwgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBpbXBvcnQgeyBmcm9tLCBIdHRwTGluaywgQXBvbGxvTGluayB9IGZyb20gXCJAYXBvbGxvL2NsaWVudFwiO1xuICAgICAqIGltcG9ydCB7IFJldHJ5TGluayB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9saW5rL3JldHJ5XCI7XG4gICAgICogaW1wb3J0IE15QXV0aExpbmsgZnJvbSBcIi4uL2F1dGhcIjtcbiAgICAgKlxuICAgICAqIGNvbnN0IGxpbmsgPSBBcG9sbG9MaW5rLmZyb20oW1xuICAgICAqICAgbmV3IFJldHJ5TGluaygpLFxuICAgICAqICAgbmV3IE15QXV0aExpbmsoKSxcbiAgICAgKiAgIG5ldyBIdHRwTGluayh7IHVyaTogXCJodHRwOi8vbG9jYWxob3N0OjQwMDAvZ3JhcGhxbFwiIH0pLFxuICAgICAqIF0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGxpbmtzIC0gQW4gYXJyYXkgb2YgYEFwb2xsb0xpbmtgIGluc3RhbmNlcyBvciByZXF1ZXN0IGhhbmRsZXJzIHRoYXRcbiAgICAgKiBhcmUgZXhlY3V0ZWQgaW4gc2VyaWFsIG9yZGVyLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tKGxpbmtzKSB7XG4gICAgICAgIGlmIChsaW5rcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gQXBvbGxvTGluay5lbXB0eSgpO1xuICAgICAgICBjb25zdCBbZmlyc3QsIC4uLnJlc3RdID0gbGlua3M7XG4gICAgICAgIHJldHVybiBmaXJzdC5jb25jYXQoLi4ucmVzdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBsaW5rIHRoYXQgY29uZGl0aW9uYWxseSByb3V0ZXMgYSByZXF1ZXN0IHRvIGRpZmZlcmVudCBsaW5rcy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIGltcG9ydCB7IEFwb2xsb0xpbmssIEh0dHBMaW5rIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50XCI7XG4gICAgICpcbiAgICAgKiBjb25zdCBsaW5rID0gQXBvbGxvTGluay5zcGxpdChcbiAgICAgKiAgIChvcGVyYXRpb24pID0+IG9wZXJhdGlvbi5nZXRDb250ZXh0KCkudmVyc2lvbiA9PT0gMSxcbiAgICAgKiAgIG5ldyBIdHRwTGluayh7IHVyaTogXCJodHRwOi8vbG9jYWxob3N0OjQwMDAvdjEvZ3JhcGhxbFwiIH0pLFxuICAgICAqICAgbmV3IEh0dHBMaW5rKHsgdXJpOiBcImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC92Mi9ncmFwaHFsXCIgfSlcbiAgICAgKiApO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHRlc3QgLSBBIHByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIHRoZSBjdXJyZW50IGBvcGVyYXRpb25gXG4gICAgICogYW5kIHJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hpY2ggbGluayB0byBleGVjdXRlLiBSZXR1cm5pbmcgYHRydWVgXG4gICAgICogZXhlY3V0ZXMgdGhlIGBsZWZ0YCBsaW5rLiBSZXR1cm5pbmcgYGZhbHNlYCBleGVjdXRlcyB0aGUgYHJpZ2h0YCBsaW5rLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxlZnQgLSBUaGUgbGluayB0aGF0IGV4ZWN1dGVzIHdoZW4gdGhlIGB0ZXN0YCBmdW5jdGlvbiByZXR1cm5zXG4gICAgICogYHRydWVgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJpZ2h0IC0gVGhlIGxpbmsgdGhhdCBleGVjdXRlcyB3aGVuIHRoZSBgdGVzdGAgZnVuY3Rpb24gcmV0dXJuc1xuICAgICAqIGBmYWxzZWAuIElmIHRoZSBgcmlnaHRgIGxpbmsgaXMgbm90IHByb3ZpZGVkLCB0aGUgcmVxdWVzdCBpcyBmb3J3YXJkZWQgdG9cbiAgICAgKiB0aGUgbmV4dCBsaW5rIGluIHRoZSBjaGFpbi5cbiAgICAgKi9cbiAgICBzdGF0aWMgc3BsaXQodGVzdCwgbGVmdCwgcmlnaHQgPSBuZXcgQXBvbGxvTGluaygob3AsIGZvcndhcmQpID0+IGZvcndhcmQob3ApKSkge1xuICAgICAgICBjb25zdCBsaW5rID0gbmV3IEFwb2xsb0xpbmsoKG9wZXJhdGlvbiwgZm9yd2FyZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGVzdChvcGVyYXRpb24pO1xuICAgICAgICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQud2Fybig2MSwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0ID9cbiAgICAgICAgICAgICAgICBsZWZ0LnJlcXVlc3Qob3BlcmF0aW9uLCBmb3J3YXJkKVxuICAgICAgICAgICAgICAgIDogcmlnaHQucmVxdWVzdChvcGVyYXRpb24sIGZvcndhcmQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obGluaywgeyBsZWZ0LCByaWdodCB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgYSBHcmFwaFFMIHJlcXVlc3QgYWdhaW5zdCBhIGxpbmsuIFRoZSBgZXhlY3V0ZWAgZnVuY3Rpb24gYmVnaW5zXG4gICAgICogdGhlIHJlcXVlc3QgYnkgY2FsbGluZyB0aGUgcmVxdWVzdCBoYW5kbGVyIG9mIHRoZSBsaW5rLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3Qgb2JzZXJ2YWJsZSA9IEFwb2xsb0xpbmsuZXhlY3V0ZShsaW5rLCB7IHF1ZXJ5LCB2YXJpYWJsZXMgfSwgeyBjbGllbnQgfSk7XG4gICAgICpcbiAgICAgKiBvYnNlcnZhYmxlLnN1YnNjcmliZSh7XG4gICAgICogICBuZXh0KHZhbHVlKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWRcIiwgdmFsdWUpO1xuICAgICAqICAgfSxcbiAgICAgKiAgIGVycm9yKGVycm9yKSB7XG4gICAgICogICAgIGNvbnNvbGUuZXJyb3IoXCJPb3BzIGdvdCBlcnJvclwiLCBlcnJvcik7XG4gICAgICogICB9LFxuICAgICAqICAgY29tcGxldGUoKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKFwiUmVxdWVzdCBjb21wbGV0ZVwiKTtcbiAgICAgKiAgIH0sXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGluayAtIFRoZSBgQXBvbGxvTGlua2AgaW5zdGFuY2UgdG8gZXhlY3V0ZSB0aGUgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZXF1ZXN0IC0gVGhlIEdyYXBoUUwgcmVxdWVzdCBkZXRhaWxzLCBzdWNoIGFzIHRoZSBgcXVlcnlgIGFuZFxuICAgICAqIGB2YXJpYWJsZXNgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRleHQgLSBUaGUgZXhlY3V0aW9uIGNvbnRleHQgZm9yIHRoZSByZXF1ZXN0LCBzdWNoIGFzIHRoZVxuICAgICAqIGBjbGllbnRgIG1ha2luZyB0aGUgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZXhlY3V0ZShsaW5rLCByZXF1ZXN0LCBjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBsaW5rLnJlcXVlc3QoY3JlYXRlT3BlcmF0aW9uKHJlcXVlc3QsIGNvbnRleHQpLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAgICAgICAgIF9fREVWX18gJiYgaW52YXJpYW50Lndhcm4oNjIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEVNUFRZO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgbXVsdGlwbGUgbGlua3MgaW50byBhIHNpbmdsZSBjb21wb3NlZCBsaW5rLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgbGluayA9IEFwb2xsb0xpbmsuY29uY2F0KGZpcnN0TGluaywgc2Vjb25kTGluaywgdGhpcmRMaW5rKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaW5rcyAtIFRoZSBsaW5rcyB0byBjb25jYXRlbmF0ZSBpbnRvIGEgc2luZ2xlIGxpbmsuIEVhY2ggbGluayB3aWxsXG4gICAgICogZXhlY3V0ZSBpbiBzZXJpYWwgb3JkZXIuXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYEFwb2xsb0xpbmsuZnJvbWAgaW5zdGVhZC4gYEFwb2xsb0xpbmsuY29uY2F0YCB3aWxsIGJlXG4gICAgICogcmVtb3ZlZCBpbiBhIGZ1dHVyZSBtYWpvciB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHN0YXRpYyBjb25jYXQoLi4ubGlua3MpIHtcbiAgICAgICAgcmV0dXJuIEFwb2xsb0xpbmsuZnJvbShsaW5rcyk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3QpIHtcbiAgICAgICAgaWYgKHJlcXVlc3QpXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25jYXRlbmF0ZXMgYSBsaW5rIHRoYXQgY29uZGl0aW9uYWxseSByb3V0ZXMgYSByZXF1ZXN0IHRvIGRpZmZlcmVudCBsaW5rcy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIGltcG9ydCB7IEFwb2xsb0xpbmssIEh0dHBMaW5rIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50XCI7XG4gICAgICpcbiAgICAgKiBjb25zdCBwcmV2aW91c0xpbmsgPSBuZXcgQXBvbGxvTGluaygob3BlcmF0aW9uLCBmb3J3YXJkKSA9PiB7XG4gICAgICogICAvLyBIYW5kbGUgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICAgcmV0dXJuIGZvcndhcmQob3BlcmF0aW9uKTtcbiAgICAgKiB9KTtcbiAgICAgKlxuICAgICAqIGNvbnN0IGxpbmsgPSBwcmV2aW91c0xpbmsuc3BsaXQoXG4gICAgICogICAob3BlcmF0aW9uKSA9PiBvcGVyYXRpb24uZ2V0Q29udGV4dCgpLnZlcnNpb24gPT09IDEsXG4gICAgICogICBuZXcgSHR0cExpbmsoeyB1cmk6IFwiaHR0cDovL2xvY2FsaG9zdDo0MDAwL3YxL2dyYXBocWxcIiB9KSxcbiAgICAgKiAgIG5ldyBIdHRwTGluayh7IHVyaTogXCJodHRwOi8vbG9jYWxob3N0OjQwMDAvdjIvZ3JhcGhxbFwiIH0pXG4gICAgICogKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZXN0IC0gQSBwcmVkaWNhdGUgZnVuY3Rpb24gdGhhdCByZWNlaXZlcyB0aGUgY3VycmVudCBgb3BlcmF0aW9uYFxuICAgICAqIGFuZCByZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoaWNoIGxpbmsgdG8gZXhlY3V0ZS4gUmV0dXJuaW5nIGB0cnVlYFxuICAgICAqIGV4ZWN1dGVzIHRoZSBgbGVmdGAgbGluay4gUmV0dXJuaW5nIGBmYWxzZWAgZXhlY3V0ZXMgdGhlIGByaWdodGAgbGluay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsZWZ0IC0gVGhlIGxpbmsgdGhhdCBleGVjdXRlcyB3aGVuIHRoZSBgdGVzdGAgZnVuY3Rpb24gcmV0dXJuc1xuICAgICAqIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByaWdodCAtIFRoZSBsaW5rIHRoYXQgZXhlY3V0ZXMgd2hlbiB0aGUgYHRlc3RgIGZ1bmN0aW9uIHJldHVybnNcbiAgICAgKiBgZmFsc2VgLiBJZiB0aGUgYHJpZ2h0YCBsaW5rIGlzIG5vdCBwcm92aWRlZCwgdGhlIHJlcXVlc3QgaXMgZm9yd2FyZGVkIHRvXG4gICAgICogdGhlIG5leHQgbGluayBpbiB0aGUgY2hhaW4uXG4gICAgICovXG4gICAgc3BsaXQodGVzdCwgbGVmdCwgcmlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uY2F0KEFwb2xsb0xpbmsuc3BsaXQodGVzdCwgbGVmdCwgcmlnaHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdGhlIGxpbmsgd2l0aCBvdGhlciBsaW5rcyBpbnRvIGEgc2luZ2xlIGNvbXBvc2VkIGxpbmsuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBpbXBvcnQgeyBBcG9sbG9MaW5rLCBIdHRwTGluayB9IGZyb20gXCJAYXBvbGxvL2NsaWVudFwiO1xuICAgICAqXG4gICAgICogY29uc3QgcHJldmlvdXNMaW5rID0gbmV3IEFwb2xsb0xpbmsoKG9wZXJhdGlvbiwgZm9yd2FyZCkgPT4ge1xuICAgICAqICAgLy8gSGFuZGxlIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAgIHJldHVybiBmb3J3YXJkKG9wZXJhdGlvbik7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBjb25zdCBsaW5rID0gcHJldmlvdXNMaW5rLmNvbmNhdChcbiAgICAgKiAgIGxpbmsxLFxuICAgICAqICAgbGluazIsXG4gICAgICogICBuZXcgSHR0cExpbmsoeyB1cmk6IFwiaHR0cDovL2xvY2FsaG9zdDo0MDAwL2dyYXBocWxcIiB9KVxuICAgICAqICk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgY29uY2F0KC4uLmxpbmtzKSB7XG4gICAgICAgIGlmIChsaW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rcy5yZWR1Y2UodGhpcy5jb21iaW5lLmJpbmQodGhpcyksIHRoaXMpO1xuICAgIH1cbiAgICBjb21iaW5lKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIGNvbnN0IGxpbmsgPSBuZXcgQXBvbGxvTGluaygob3BlcmF0aW9uLCBmb3J3YXJkKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbGVmdC5yZXF1ZXN0KG9wZXJhdGlvbiwgKG9wKSA9PiByaWdodC5yZXF1ZXN0KG9wLCBmb3J3YXJkKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihsaW5rLCB7IGxlZnQsIHJpZ2h0IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSByZXF1ZXN0IGhhbmRsZXIgZm9yIHRoZSBwcm92aWRlZCBvcGVyYXRpb24uXG4gICAgICpcbiAgICAgKiA+IFshTk9URV1cbiAgICAgKiA+IFRoaXMgaXMgY2FsbGVkIGJ5IHRoZSBgQXBvbGxvTGluay5leGVjdXRlYCBmdW5jdGlvbiBmb3IgeW91IGFuZCBzaG91bGRcbiAgICAgKiA+IG5vdCBiZSBjYWxsZWQgZGlyZWN0bHkuIFByZWZlciB1c2luZyBgQXBvbGxvTGluay5leGVjdXRlYCB0byBtYWtlIHRoZVxuICAgICAqID4gcmVxdWVzdCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHJlcXVlc3Qob3BlcmF0aW9uLCBmb3J3YXJkKSB7XG4gICAgICAgIHRocm93IG5ld0ludmFyaWFudEVycm9yKDYzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAaW50ZXJuYWxcbiAgICAqIFVzZWQgdG8gaXRlcmF0ZSB0aHJvdWdoIGFsbCBsaW5rcyB0aGF0IGFyZSBjb25jYXRlbmF0aW9ucyBvciBgc3BsaXRgIGxpbmtzLlxuICAgICogXG4gICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4gICAgKi9cbiAgICBsZWZ0O1xuICAgIC8qKlxuICAgICogQGludGVybmFsXG4gICAgKiBVc2VkIHRvIGl0ZXJhdGUgdGhyb3VnaCBhbGwgbGlua3MgdGhhdCBhcmUgY29uY2F0ZW5hdGlvbnMgb3IgYHNwbGl0YCBsaW5rcy5cbiAgICAqIFxuICAgICogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuICAgICovXG4gICAgcmlnaHQ7XG4gICAgLyoqXG4gICAgKiBAaW50ZXJuYWxcbiAgICAqIENhbiBiZSBwcm92aWRlZCBieSBhIGxpbmsgdGhhdCBoYXMgYW4gaW50ZXJuYWwgY2FjaGUgdG8gcmVwb3J0IGl0J3MgbWVtb3J5IGRldGFpbHMuXG4gICAgKiBcbiAgICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiAgICAqL1xuICAgIGdldE1lbW9yeUludGVybmFscztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFwb2xsb0xpbmsuanMubWFwXG4iLAogICAgImltcG9ydCB7IEFwb2xsb0xpbmsgfSBmcm9tIFwiLi9BcG9sbG9MaW5rLmpzXCI7XG5leHBvcnQgY29uc3QgZXhlY3V0ZSA9IEFwb2xsb0xpbmsuZXhlY3V0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4ZWN1dGUuanMubWFwIiwKICAgICJpbXBvcnQgeyBXZWFrQ2FjaGUgfSBmcm9tIFwiQHdyeS9jYWNoZXNcIjtcbmltcG9ydCB7IFRyaWUgfSBmcm9tIFwiQHdyeS90cmllXCI7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSBcIm9wdGltaXNtXCI7XG5pbXBvcnQgeyBjaGVja0RvY3VtZW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbFwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnZhcmlhbnRcIjtcbmltcG9ydCB7IGNhY2hlU2l6ZXMgfSBmcm9tIFwiLi4vY2FjaGluZy9zaXplcy5qc1wiO1xuZnVuY3Rpb24gaWRlbnRpdHkoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQ7XG59XG4vKipcbiAqIEEgY2xhc3MgZm9yIHRyYW5zZm9ybWluZyBHcmFwaFFMIGRvY3VtZW50cy4gU2VlIHRoZSBbRG9jdW1lbnQgdHJhbnNmb3Jtc1xuICogZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly93d3cuYXBvbGxvZ3JhcGhxbC5jb20vZG9jcy9yZWFjdC9kYXRhL2RvY3VtZW50LXRyYW5zZm9ybXMpIGZvciBtb3JlIGRldGFpbHMgb24gdXNpbmcgdGhlbS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBEb2N1bWVudFRyYW5zZm9ybSB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbiAqIGltcG9ydCB7IHZpc2l0IH0gZnJvbSBcImdyYXBocWxcIjtcbiAqXG4gKiBjb25zdCBkb2N1bWVudFRyYW5zZm9ybSA9IG5ldyBEb2N1bWVudFRyYW5zZm9ybSgoZG9jKSA9PiB7XG4gKiAgIHJldHVybiB2aXNpdChkb2MsIHtcbiAqICAgICAvLyAuLi5cbiAqICAgfSk7XG4gKiB9KTtcbiAqXG4gKiBjb25zdCB0cmFuc2Zvcm1lZERvYyA9IGRvY3VtZW50VHJhbnNmb3JtLnRyYW5zZm9ybURvY3VtZW50KG15RG9jdW1lbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBEb2N1bWVudFRyYW5zZm9ybSB7XG4gICAgdHJhbnNmb3JtO1xuICAgIGNhY2hlZDtcbiAgICByZXN1bHRDYWNoZSA9IG5ldyBXZWFrU2V0KCk7XG4gICAgLy8gVGhpcyBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGdldENhY2hlS2V5IGNhbiBiZSBvdmVycmlkZGVuIGJ5IHByb3ZpZGluZ1xuICAgIC8vIG9wdGlvbnMuZ2V0Q2FjaGVLZXkgdG8gdGhlIERvY3VtZW50VHJhbnNmb3JtIGNvbnN0cnVjdG9yLiBJbiBnZW5lcmFsLCBhXG4gICAgLy8gZ2V0Q2FjaGVLZXkgZnVuY3Rpb24gbWF5IGVpdGhlciByZXR1cm4gYW4gYXJyYXkgb2Yga2V5cyAob2Z0ZW4gaW5jbHVkaW5nXG4gICAgLy8gdGhlIGRvY3VtZW50KSB0byBiZSB1c2VkIGFzIGEgY2FjaGUga2V5LCBvciB1bmRlZmluZWQgdG8gaW5kaWNhdGUgdGhlXG4gICAgLy8gdHJhbnNmb3JtIGZvciB0aGlzIGRvY3VtZW50IHNob3VsZCBub3QgYmUgY2FjaGVkLlxuICAgIGdldENhY2hlS2V5KGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiBbZG9jdW1lbnRdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgRG9jdW1lbnRUcmFuc2Zvcm0gdGhhdCByZXR1cm5zIHRoZSBpbnB1dCBkb2N1bWVudCB1bmNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgaW5wdXQgZG9jdW1lbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgaWRlbnRpdHkoKSB7XG4gICAgICAgIC8vIE5vIG5lZWQgdG8gY2FjaGUgdGhpcyB0cmFuc2Zvcm0gc2luY2UgaXQganVzdCByZXR1cm5zIHRoZSBkb2N1bWVudFxuICAgICAgICAvLyB1bmNoYW5nZWQuIFRoaXMgc2hvdWxkIHNhdmUgYSBiaXQgb2YgbWVtb3J5IHRoYXQgd291bGQgb3RoZXJ3aXNlIGJlXG4gICAgICAgIC8vIG5lZWRlZCB0byBwb3B1bGF0ZSB0aGUgYGRvY3VtZW50Q2FjaGVgIG9mIHRoaXMgdHJhbnNmb3JtLlxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50VHJhbnNmb3JtKGlkZW50aXR5LCB7IGNhY2hlOiBmYWxzZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIERvY3VtZW50VHJhbnNmb3JtIHRoYXQgY29uZGl0aW9uYWxseSBhcHBsaWVzIG9uZSBvZiB0d28gdHJhbnNmb3Jtcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmVkaWNhdGUgLSBGdW5jdGlvbiB0aGF0IGRldGVybWluZXMgd2hpY2ggdHJhbnNmb3JtIHRvIGFwcGx5XG4gICAgICogQHBhcmFtIGxlZnQgLSBUcmFuc2Zvcm0gdG8gYXBwbHkgd2hlbiBgcHJlZGljYXRlYCByZXR1cm5zIGB0cnVlYFxuICAgICAqIEBwYXJhbSByaWdodCAtIFRyYW5zZm9ybSB0byBhcHBseSB3aGVuIGBwcmVkaWNhdGVgIHJldHVybnMgYGZhbHNlYC4gSWYgbm90IHByb3ZpZGVkLCBpdCBkZWZhdWx0cyB0byBgRG9jdW1lbnRUcmFuc2Zvcm0uaWRlbnRpdHkoKWAuXG4gICAgICogQHJldHVybnMgQSBEb2N1bWVudFRyYW5zZm9ybSB0aGF0IGNvbmRpdGlvbmFsbHkgYXBwbGllcyBhIGRvY3VtZW50IHRyYW5zZm9ybSBiYXNlZCBvbiB0aGUgcHJlZGljYXRlXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBpbXBvcnQgeyBpc1F1ZXJ5T3BlcmF0aW9uIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllc1wiO1xuICAgICAqXG4gICAgICogY29uc3QgY29uZGl0aW9uYWxUcmFuc2Zvcm0gPSBEb2N1bWVudFRyYW5zZm9ybS5zcGxpdChcbiAgICAgKiAgIChkb2N1bWVudCkgPT4gaXNRdWVyeU9wZXJhdGlvbihkb2N1bWVudCksXG4gICAgICogICBxdWVyeVRyYW5zZm9ybSxcbiAgICAgKiAgIG11dGF0aW9uVHJhbnNmb3JtXG4gICAgICogKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzdGF0aWMgc3BsaXQocHJlZGljYXRlLCBsZWZ0LCByaWdodCA9IERvY3VtZW50VHJhbnNmb3JtLmlkZW50aXR5KCkpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IERvY3VtZW50VHJhbnNmb3JtKChkb2N1bWVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRUcmFuc2Zvcm0gPSBwcmVkaWNhdGUoZG9jdW1lbnQpID8gbGVmdCA6IHJpZ2h0O1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50VHJhbnNmb3JtLnRyYW5zZm9ybURvY3VtZW50KGRvY3VtZW50KTtcbiAgICAgICAgfSwgXG4gICAgICAgIC8vIFJlYXNvbmFibHkgYXNzdW1lIGJvdGggYGxlZnRgIGFuZCBgcmlnaHRgIHRyYW5zZm9ybXMgaGFuZGxlIHRoZWlyIG93biBjYWNoaW5nXG4gICAgICAgIHsgY2FjaGU6IGZhbHNlIH0pLCB7IGxlZnQsIHJpZ2h0IH0pO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih0cmFuc2Zvcm0sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZ2V0Q2FjaGVLZXkpIHtcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlIGRlZmF1bHQgYGdldENhY2hlS2V5YCBmdW5jdGlvbiwgd2hpY2ggcmV0dXJucyBbZG9jdW1lbnRdLlxuICAgICAgICAgICAgdGhpcy5nZXRDYWNoZUtleSA9IG9wdGlvbnMuZ2V0Q2FjaGVLZXk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWNoZWQgPSBvcHRpb25zLmNhY2hlICE9PSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZXNldENhY2hlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgaW50ZXJuYWwgY2FjaGUgb2YgdGhpcyB0cmFuc2Zvcm0sIGlmIGl0IGlzIGNhY2hlZC5cbiAgICAgKi9cbiAgICByZXNldENhY2hlKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YWJsZUNhY2hlS2V5cyA9IG5ldyBUcmllKCk7XG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1Xb3JrID0gd3JhcChEb2N1bWVudFRyYW5zZm9ybS5wcm90b3R5cGUucGVyZm9ybVdvcmsuYmluZCh0aGlzKSwge1xuICAgICAgICAgICAgICAgIG1ha2VDYWNoZUtleTogKGRvY3VtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5cyA9IHRoaXMuZ2V0Q2FjaGVLZXkoZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVLZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhcmlhbnQoQXJyYXkuaXNBcnJheShjYWNoZUtleXMpLCAyMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhYmxlQ2FjaGVLZXlzLmxvb2t1cEFycmF5KGNhY2hlS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1heDogY2FjaGVTaXplc1tcImRvY3VtZW50VHJhbnNmb3JtLmNhY2hlXCJdLFxuICAgICAgICAgICAgICAgIGNhY2hlOiAoV2Vha0NhY2hlKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBlcmZvcm1Xb3JrKGRvY3VtZW50KSB7XG4gICAgICAgIGNoZWNrRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm0oZG9jdW1lbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm1zIGEgR3JhcGhRTCBkb2N1bWVudCB1c2luZyB0aGUgY29uZmlndXJlZCB0cmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcmVtYXJrc1xuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB0cmFuc2Zvcm1Eb2N1bWVudGAgY2FjaGVzIHRoZSB0cmFuc2Zvcm1lZCBkb2N1bWVudC4gQ2FsbGluZ1xuICAgICAqIGB0cmFuc2Zvcm1Eb2N1bWVudGAgYWdhaW4gd2l0aCB0aGUgYWxyZWFkeS10cmFuc2Zvcm1lZCBkb2N1bWVudCB3aWxsXG4gICAgICogaW1tZWRpYXRlbHkgcmV0dXJuIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIEdyYXBoUUwgZG9jdW1lbnQgdG8gdHJhbnNmb3JtXG4gICAgICogQHJldHVybnMgVGhlIHRyYW5zZm9ybWVkIGRvY3VtZW50XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBkb2N1bWVudCA9IGdxbGBcbiAgICAgKiAgICMgLi4uXG4gICAgICogYDtcbiAgICAgKlxuICAgICAqIGNvbnN0IGRvY3VtZW50VHJhbnNmb3JtID0gbmV3IERvY3VtZW50VHJhbnNmb3JtKHRyYW5zZm9ybUZuKTtcbiAgICAgKiBjb25zdCB0cmFuc2Zvcm1lZERvY3VtZW50ID0gZG9jdW1lbnRUcmFuc2Zvcm0udHJhbnNmb3JtRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHRyYW5zZm9ybURvY3VtZW50KGRvY3VtZW50KSB7XG4gICAgICAgIC8vIElmIGEgdXNlciBwYXNzZXMgYW4gYWxyZWFkeSB0cmFuc2Zvcm1lZCByZXN1bHQgYmFjayB0byB0aGlzIGZ1bmN0aW9uLFxuICAgICAgICAvLyBpbW1lZGlhdGVseSByZXR1cm4gaXQuXG4gICAgICAgIGlmICh0aGlzLnJlc3VsdENhY2hlLmhhcyhkb2N1bWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZERvY3VtZW50ID0gdGhpcy5wZXJmb3JtV29yayhkb2N1bWVudCk7XG4gICAgICAgIHRoaXMucmVzdWx0Q2FjaGUuYWRkKHRyYW5zZm9ybWVkRG9jdW1lbnQpO1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWREb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdGhpcyBkb2N1bWVudCB0cmFuc2Zvcm0gd2l0aCBhbm90aGVyIGRvY3VtZW50IHRyYW5zZm9ybS4gVGhlXG4gICAgICogcmV0dXJuZWQgZG9jdW1lbnQgdHJhbnNmb3JtIGZpcnN0IGFwcGxpZXMgdGhlIGN1cnJlbnQgZG9jdW1lbnQgdHJhbnNmb3JtLFxuICAgICAqIHRoZW4gYXBwbGllcyB0aGUgb3RoZXIgZG9jdW1lbnQgdHJhbnNmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyVHJhbnNmb3JtIC0gVGhlIHRyYW5zZm9ybSB0byBhcHBseSBhZnRlciB0aGlzIG9uZVxuICAgICAqIEByZXR1cm5zIEEgbmV3IERvY3VtZW50VHJhbnNmb3JtIHRoYXQgYXBwbGllcyBib3RoIHRyYW5zZm9ybXMgaW4gc2VxdWVuY2VcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IGNvbWJpbmVkVHJhbnNmb3JtID0gYWRkVHlwZW5hbWVUcmFuc2Zvcm0uY29uY2F0KFxuICAgICAqICAgcmVtb3ZlRGlyZWN0aXZlc1RyYW5zZm9ybVxuICAgICAqICk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgY29uY2F0KG90aGVyVHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBEb2N1bWVudFRyYW5zZm9ybSgoZG9jdW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBvdGhlclRyYW5zZm9ybS50cmFuc2Zvcm1Eb2N1bWVudCh0aGlzLnRyYW5zZm9ybURvY3VtZW50KGRvY3VtZW50KSk7XG4gICAgICAgIH0sIFxuICAgICAgICAvLyBSZWFzb25hYmx5IGFzc3VtZSBib3RoIHRyYW5zZm9ybXMgaGFuZGxlIHRoZWlyIG93biBjYWNoaW5nXG4gICAgICAgIHsgY2FjaGU6IGZhbHNlIH0pLCB7XG4gICAgICAgICAgICBsZWZ0OiB0aGlzLFxuICAgICAgICAgICAgcmlnaHQ6IG90aGVyVHJhbnNmb3JtLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAaW50ZXJuYWxcbiAgICAqIFVzZWQgdG8gaXRlcmF0ZSB0aHJvdWdoIGFsbCB0cmFuc2Zvcm1zIHRoYXQgYXJlIGNvbmNhdGVuYXRpb25zIG9yIGBzcGxpdGAgbGlua3MuXG4gICAgKiBcbiAgICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiAgICAqL1xuICAgIGxlZnQ7XG4gICAgLyoqXG4gICAgKiBAaW50ZXJuYWxcbiAgICAqIFVzZWQgdG8gaXRlcmF0ZSB0aHJvdWdoIGFsbCB0cmFuc2Zvcm1zIHRoYXQgYXJlIGNvbmNhdGVuYXRpb25zIG9yIGBzcGxpdGAgbGlua3MuXG4gICAgKiBcbiAgICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiAgICAqL1xuICAgIHJpZ2h0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RG9jdW1lbnRUcmFuc2Zvcm0uanMubWFwXG4iLAogICAgImltcG9ydCB7IHByaW50IGFzIG9yaWdQcmludCB9IGZyb20gXCJncmFwaHFsXCI7XG5pbXBvcnQgeyBfX0RFVl9fIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9lbnZpcm9ubWVudFwiO1xuaW1wb3J0IHsgQXV0b0NsZWFuZWRXZWFrQ2FjaGUsIHJlZ2lzdGVyR2xvYmFsQ2FjaGUsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbFwiO1xuaW1wb3J0IHsgY2FjaGVTaXplcyB9IGZyb20gXCIuLi9jYWNoaW5nL2luZGV4LmpzXCI7XG5sZXQgcHJpbnRDYWNoZTtcbi8qKlxuICogQ29udmVydHMgYW4gQVNUIGludG8gYSBzdHJpbmcsIHVzaW5nIG9uZSBzZXQgb2YgcmVhc29uYWJsZVxuICogZm9ybWF0dGluZyBydWxlcy5cbiAqXG4gKiBAcmVtYXJrcyBUaGlzIGlzIHRoZSBzYW1lIGZ1bmN0aW9uIGFzIHRoZSBHcmFwaFFMLmpzIGBwcmludGAgZnVuY3Rpb24gYnV0XG4gKiB3aXRoIGFuIGFkZGVkIGNhY2hlIHRvIGF2b2lkIHJlY29tcHV0YXRpb24gd2hlbiBlbmNvdW50ZXJpbmcgdGhlIHNhbWVcbiAqIGBBU1ROb2RlYCBtb3JlIHRoYW4gb25jZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHByaW50ID0gT2JqZWN0LmFzc2lnbigoYXN0KSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IHByaW50Q2FjaGUuZ2V0KGFzdCk7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmVzdWx0ID0gb3JpZ1ByaW50KGFzdCk7XG4gICAgICAgIHByaW50Q2FjaGUuc2V0KGFzdCwgcmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn0sIHtcbiAgICByZXNldCgpIHtcbiAgICAgICAgcHJpbnRDYWNoZSA9IG5ldyBBdXRvQ2xlYW5lZFdlYWtDYWNoZShjYWNoZVNpemVzLnByaW50IHx8IDIwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXMucHJpbnQgKi8pO1xuICAgIH0sXG59KTtcbnByaW50LnJlc2V0KCk7XG5pZiAoX19ERVZfXykge1xuICAgIHJlZ2lzdGVyR2xvYmFsQ2FjaGUoXCJwcmludFwiLCAoKSA9PiAocHJpbnRDYWNoZSA/IHByaW50Q2FjaGUuc2l6ZSA6IDApKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByaW50LmpzLm1hcCIsCiAgICAiLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgZ2l2ZW4gb2JqZWN0IGlzIGEgcmVmZXJlbmNlIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gb2JqIC0gVGhlIG9iamVjdCB0byBjaGVjayBpZiBpdHMgYSByZWZlcmVuY2Ugb2JqZWN0XG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgaXNSZWZlcmVuY2UgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzXCI7XG4gKlxuICogaXNSZWZlcmVuY2UoeyBfX3JlZjogXCJVc2VyOjFcIiB9KTsgLy8gdHJ1ZVxuICogaXNSZWZlcmVuY2UoeyBfX3R5cGVuYW1lOiBcIlVzZXJcIiwgaWQ6IDEgfSk7IC8vIGZhbHNlXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUmVmZXJlbmNlKG9iaikge1xuICAgIHJldHVybiBCb29sZWFuKG9iaiAmJiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmouX19yZWYgPT09IFwic3RyaW5nXCIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RvcmVVdGlscy5qcy5tYXAiLAogICAgImltcG9ydCB7IEtpbmQsIHZpc2l0IH0gZnJvbSBcImdyYXBocWxcIjtcbmNvbnN0IFRZUEVOQU1FX0ZJRUxEID0ge1xuICAgIGtpbmQ6IEtpbmQuRklFTEQsXG4gICAgbmFtZToge1xuICAgICAgICBraW5kOiBLaW5kLk5BTUUsXG4gICAgICAgIHZhbHVlOiBcIl9fdHlwZW5hbWVcIixcbiAgICB9LFxufTtcbi8qKlxuICogQWRkcyBgX190eXBlbmFtZWAgdG8gYWxsIHNlbGVjdGlvbiBzZXRzIGluIHRoZSBkb2N1bWVudCBleGNlcHQgZm9yIHRoZSByb290XG4gKiBzZWxlY3Rpb24gc2V0LlxuICpcbiAqIEBwYXJhbSBkb2MgLSBUaGUgYEFTVE5vZGVgIHRvIGFkZCBgX190eXBlbmFtZWAgdG9cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBkb2N1bWVudCA9IGdxbGBcbiAqICAgIyAuLi5cbiAqIGA7XG4gKlxuICogY29uc3Qgd2l0aFR5cGVuYW1lID0gYWRkVHlwZW5hbWVUb0RvY3VtZW50KGRvY3VtZW50KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgYWRkVHlwZW5hbWVUb0RvY3VtZW50ID0gT2JqZWN0LmFzc2lnbihmdW5jdGlvbiAoZG9jKSB7XG4gICAgcmV0dXJuIHZpc2l0KGRvYywge1xuICAgICAgICBTZWxlY3Rpb25TZXQ6IHtcbiAgICAgICAgICAgIGVudGVyKG5vZGUsIF9rZXksIHBhcmVudCkge1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGFkZCBfX3R5cGVuYW1lIHRvIE9wZXJhdGlvbkRlZmluaXRpb25zLlxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmtpbmQgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICBLaW5kLk9QRVJBVElPTl9ERUZJTklUSU9OKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gTm8gY2hhbmdlcyBpZiBubyBzZWxlY3Rpb25zLlxuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VsZWN0aW9ucyB9ID0gbm9kZTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiBzZWxlY3Rpb25zIGFscmVhZHkgaGF2ZSBhIF9fdHlwZW5hbWUsIG9yIGFyZSBwYXJ0IG9mIGFuXG4gICAgICAgICAgICAgICAgLy8gaW50cm9zcGVjdGlvbiBxdWVyeSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgICBjb25zdCBza2lwID0gc2VsZWN0aW9ucy5zb21lKChzZWxlY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChzZWxlY3Rpb24ua2luZCA9PT0gS2luZC5GSUVMRCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGVjdGlvbi5uYW1lLnZhbHVlID09PSBcIl9fdHlwZW5hbWVcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5uYW1lLnZhbHVlLmxhc3RJbmRleE9mKFwiX19cIiwgMCkgPT09IDApKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoc2tpcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgU2VsZWN0aW9uU2V0IGlzIEBleHBvcnQtZWQgYXMgYW4gaW5wdXQgdmFyaWFibGUsIGl0IHNob3VsZFxuICAgICAgICAgICAgICAgIC8vIG5vdCBoYXZlIGEgX190eXBlbmFtZSBmaWVsZCAoc2VlIGlzc3VlICM0NjkxKS5cbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IHBhcmVudDtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQua2luZCA9PT0gS2luZC5GSUVMRCAmJlxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5kaXJlY3RpdmVzICYmXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLmRpcmVjdGl2ZXMuc29tZSgoZCkgPT4gZC5uYW1lLnZhbHVlID09PSBcImV4cG9ydFwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgcmV0dXJuIGEgbmV3IFNlbGVjdGlvblNldCB3aXRoIGEgX190eXBlbmFtZSBGaWVsZC5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25zOiBbLi4uc2VsZWN0aW9ucywgVFlQRU5BTUVfRklFTERdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pO1xufSwge1xuICAgIGFkZGVkKGZpZWxkKSB7XG4gICAgICAgIHJldHVybiBmaWVsZCA9PT0gVFlQRU5BTUVfRklFTEQ7XG4gICAgfSxcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbiB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWxcIjtcbmZ1bmN0aW9uIGlzT3BlcmF0aW9uKGRvY3VtZW50LCBvcGVyYXRpb24pIHtcbiAgICByZXR1cm4gZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbihkb2N1bWVudCk/Lm9wZXJhdGlvbiA9PT0gb3BlcmF0aW9uO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSBkb2N1bWVudCBpcyBhIG11dGF0aW9uIGRvY3VtZW50LlxuICpcbiAqIEByZW1hcmtzXG4gKiBJZiB5b3UgYXJlIGF1dGhvcmluZyBhbiBBcG9sbG8gbGluaywgeW91IG1pZ2h0IG5vdCBuZWVkIHRoaXMgdXRpbGl0eS5cbiAqIFByZWZlciB1c2luZyB0aGUgYG9wZXJhdGlvblR5cGVgIHByb3BlcnR5IHRoZSBgb3BlcmF0aW9uYCBvYmplY3QgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgR3JhcGhRTCBkb2N1bWVudCB0byBjaGVja1xuICogQHJldHVybnMgQSBib29sZWFuIGluZGljYXRpbmcgaWYgdGhlIGRvY3VtZW50IGlzIGEgbXV0YXRpb24gb3BlcmF0aW9uXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgaXNNdXRhdGlvbk9wZXJhdGlvbiB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbiAqXG4gKiBjb25zdCBtdXRhdGlvbiA9IGdxbGBcbiAqICAgbXV0YXRpb24gTXlNdXRhdGlvbiB7XG4gKiAgICAgIyAuLi5cbiAqICAgfVxuICogYDtcbiAqXG4gKiBpc011dGF0aW9uT3BlcmF0aW9uKG11dGF0aW9uKTsgLy8gdHJ1ZVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc011dGF0aW9uT3BlcmF0aW9uKGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIGlzT3BlcmF0aW9uKGRvY3VtZW50LCBcIm11dGF0aW9uXCIpO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSBkb2N1bWVudCBpcyBhIHF1ZXJ5IGRvY3VtZW50LlxuICpcbiAqIEByZW1hcmtzXG4gKiBJZiB5b3UgYXJlIGF1dGhvcmluZyBhbiBBcG9sbG8gbGluaywgeW91IG1pZ2h0IG5vdCBuZWVkIHRoaXMgdXRpbGl0eS5cbiAqIFByZWZlciB1c2luZyB0aGUgYG9wZXJhdGlvblR5cGVgIHByb3BlcnR5IHRoZSBgb3BlcmF0aW9uYCBvYmplY3QgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgR3JhcGhRTCBkb2N1bWVudCB0byBjaGVja1xuICogQHJldHVybnMgQSBib29sZWFuIGluZGljYXRpbmcgaWYgdGhlIGRvY3VtZW50IGlzIGEgcXVlcnkgb3BlcmF0aW9uXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgaXNRdWVyeU9wZXJhdGlvbiB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbiAqXG4gKiBjb25zdCBxdWVyeSA9IGdxbGBcbiAqICAgcXVlcnkgTXlRdWVyeSB7XG4gKiAgICAgIyAuLi5cbiAqICAgfVxuICogYDtcbiAqXG4gKiBpc1F1ZXJ5T3BlcmF0aW9uKHF1ZXJ5KTsgLy8gdHJ1ZVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1F1ZXJ5T3BlcmF0aW9uKGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIGlzT3BlcmF0aW9uKGRvY3VtZW50LCBcInF1ZXJ5XCIpO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSBkb2N1bWVudCBpcyBhIHN1YnNjcmlwdGlvbiBkb2N1bWVudC5cbiAqXG4gKiBAcmVtYXJrc1xuICogSWYgeW91IGFyZSBhdXRob3JpbmcgYW4gQXBvbGxvIGxpbmssIHlvdSBtaWdodCBub3QgbmVlZCB0aGlzIHV0aWxpdHkuXG4gKiBQcmVmZXIgdXNpbmcgdGhlIGBvcGVyYXRpb25UeXBlYCBwcm9wZXJ0eSB0aGUgYG9wZXJhdGlvbmAgb2JqZWN0IGluc3RlYWQuXG4gKlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIEdyYXBoUUwgZG9jdW1lbnQgdG8gY2hlY2tcbiAqIEByZXR1cm5zIEEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZSBkb2N1bWVudCBpcyBhIHN1YnNjcmlwdGlvbiBvcGVyYXRpb25cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBpc1N1YnNjcmlwdGlvbk9wZXJhdGlvbiB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbiAqXG4gKiBjb25zdCBzdWJzY3JpcHRpb24gPSBncWxgXG4gKiAgIHN1YnNjcmlwdGlvbiBNeVN1YnNjcmlwdGlvbiB7XG4gKiAgICAgIyAuLi5cbiAqICAgfVxuICogYDtcbiAqXG4gKiBpc1N1YnNjcmlwdGlvbk9wZXJhdGlvbihzdWJzY3JpcHRpb24pOyAvLyB0cnVlXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3Vic2NyaXB0aW9uT3BlcmF0aW9uKGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIGlzT3BlcmF0aW9uKGRvY3VtZW50LCBcInN1YnNjcmlwdGlvblwiKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZXJhdGlvbnMuanMubWFwIiwKICAgICJpbXBvcnQgeyBXZWFrQ2FjaGUgfSBmcm9tIFwiQHdyeS9jYWNoZXNcIjtcbmltcG9ydCB7IHdyYXAgfSBmcm9tIFwib3B0aW1pc21cIjtcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgY2FjaGVTaXplcyB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbmltcG9ydCB7IF9fREVWX18gfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2Vudmlyb25tZW50XCI7XG5pbXBvcnQgeyBlcXVhbEJ5UXVlcnksIGdldEFwb2xsb0NhY2hlTWVtb3J5SW50ZXJuYWxzLCBnZXRGcmFnbWVudERlZmluaXRpb24sIGdldEZyYWdtZW50UXVlcnlEb2N1bWVudCwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuZXhwb3J0IGNsYXNzIEFwb2xsb0NhY2hlIHtcbiAgICBhc3N1bWVJbW11dGFibGVSZXN1bHRzID0gZmFsc2U7XG4gICAgLy8gRnVuY3Rpb24gdXNlZCB0byBsb29rdXAgYSBmcmFnbWVudCB3aGVuIGEgZnJhZ21lbnQgZGVmaW5pdGlvbiBpcyBub3QgcGFydFxuICAgIC8vIG9mIHRoZSBHcmFwaFFMIGRvY3VtZW50LiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FjaGVzLCBzdWNoIGFzIEluTWVtb3J5Q2FjaGUsXG4gICAgLy8gdGhhdCByZWdpc3RlciBmcmFnbWVudHMgYWhlYWQgb2YgdGltZSBzbyB0aGV5IGNhbiBiZSByZWZlcmVuY2VkIGJ5IG5hbWUuXG4gICAgbG9va3VwRnJhZ21lbnQoZnJhZ21lbnROYW1lKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBUcmFuc2FjdGlvbmFsIEFQSVxuICAgIC8vIFRoZSBiYXRjaCBtZXRob2QgaXMgaW50ZW5kZWQgdG8gcmVwbGFjZS9zdWJzdW1lIGJvdGggcGVyZm9ybVRyYW5zYWN0aW9uXG4gICAgLy8gYW5kIHJlY29yZE9wdGltaXN0aWNUcmFuc2FjdGlvbiwgYnV0IHBlcmZvcm1UcmFuc2FjdGlvbiBjYW1lIGZpcnN0LCBzbyB3ZVxuICAgIC8vIHByb3ZpZGUgYSBkZWZhdWx0IGJhdGNoIGltcGxlbWVudGF0aW9uIHRoYXQncyBqdXN0IGFub3RoZXIgd2F5IG9mIGNhbGxpbmdcbiAgICAvLyBwZXJmb3JtVHJhbnNhY3Rpb24uIFN1YmNsYXNzZXMgb2YgQXBvbGxvQ2FjaGUgKHN1Y2ggYXMgSW5NZW1vcnlDYWNoZSkgY2FuXG4gICAgLy8gb3ZlcnJpZGUgdGhlIGJhdGNoIG1ldGhvZCB0byBkbyBtb3JlIGludGVyZXN0aW5nIHRoaW5ncyB3aXRoIGl0cyBvcHRpb25zLlxuICAgIGJhdGNoKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgb3B0aW1pc3RpY0lkID0gdHlwZW9mIG9wdGlvbnMub3B0aW1pc3RpYyA9PT0gXCJzdHJpbmdcIiA/IG9wdGlvbnMub3B0aW1pc3RpY1xuICAgICAgICAgICAgOiBvcHRpb25zLm9wdGltaXN0aWMgPT09IGZhbHNlID8gbnVsbFxuICAgICAgICAgICAgICAgIDogdm9pZCAwO1xuICAgICAgICBsZXQgdXBkYXRlUmVzdWx0O1xuICAgICAgICB0aGlzLnBlcmZvcm1UcmFuc2FjdGlvbigoKSA9PiAodXBkYXRlUmVzdWx0ID0gb3B0aW9ucy51cGRhdGUodGhpcykpLCBvcHRpbWlzdGljSWQpO1xuICAgICAgICByZXR1cm4gdXBkYXRlUmVzdWx0O1xuICAgIH1cbiAgICByZWNvcmRPcHRpbWlzdGljVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24sIG9wdGltaXN0aWNJZCkge1xuICAgICAgICB0aGlzLnBlcmZvcm1UcmFuc2FjdGlvbih0cmFuc2FjdGlvbiwgb3B0aW1pc3RpY0lkKTtcbiAgICB9XG4gICAgLy8gT3B0aW9uYWwgQVBJXG4gICAgLy8gQ2FsbGVkIG9uY2UgcGVyIGlucHV0IGRvY3VtZW50LCBhbGxvd2luZyB0aGUgY2FjaGUgdG8gbWFrZSBzdGF0aWMgY2hhbmdlc1xuICAgIC8vIHRvIHRoZSBxdWVyeSwgc3VjaCBhcyBhZGRpbmcgX190eXBlbmFtZSBmaWVsZHMuXG4gICAgdHJhbnNmb3JtRG9jdW1lbnQoZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH1cbiAgICAvLyBDYWxsZWQgYmVmb3JlIGVhY2ggQXBvbGxvTGluayByZXF1ZXN0LCBhbGxvd2luZyB0aGUgY2FjaGUgdG8gbWFrZSBkeW5hbWljXG4gICAgLy8gY2hhbmdlcyB0byB0aGUgcXVlcnksIHN1Y2ggYXMgZmlsbGluZyBpbiBtaXNzaW5nIGZyYWdtZW50IGRlZmluaXRpb25zLlxuICAgIHRyYW5zZm9ybUZvckxpbmsoZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH1cbiAgICBpZGVudGlmeShvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnYygpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBtb2RpZnkob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJlYWRRdWVyeShvcHRpb25zLCBvcHRpbWlzdGljID0gISFvcHRpb25zLm9wdGltaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZCh7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgcm9vdElkOiBvcHRpb25zLmlkIHx8IFwiUk9PVF9RVUVSWVwiLFxuICAgICAgICAgICAgb3B0aW1pc3RpYyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogV2F0Y2hlcyB0aGUgY2FjaGUgc3RvcmUgb2YgdGhlIGZyYWdtZW50IGFjY29yZGluZyB0byB0aGUgb3B0aW9ucyBzcGVjaWZpZWRcbiAgICAqIGFuZCByZXR1cm5zIGFuIGBPYnNlcnZhYmxlYC4gV2UgY2FuIHN1YnNjcmliZSB0byB0aGlzXG4gICAgKiBgT2JzZXJ2YWJsZWAgYW5kIHJlY2VpdmUgdXBkYXRlZCByZXN1bHRzIHRocm91Z2ggYW5cbiAgICAqIG9ic2VydmVyIHdoZW4gdGhlIGNhY2hlIHN0b3JlIGNoYW5nZXMuXG4gICAgKiBcbiAgICAqIFlvdSBtdXN0IHBhc3MgaW4gYSBHcmFwaFFMIGRvY3VtZW50IHdpdGggYSBzaW5nbGUgZnJhZ21lbnQgb3IgYSBkb2N1bWVudFxuICAgICogd2l0aCBtdWx0aXBsZSBmcmFnbWVudHMgdGhhdCByZXByZXNlbnQgd2hhdCB5b3UgYXJlIHJlYWRpbmcuIElmIHlvdSBwYXNzXG4gICAgKiBpbiBhIGRvY3VtZW50IHdpdGggbXVsdGlwbGUgZnJhZ21lbnRzIHRoZW4geW91IG11c3QgYWxzbyBzcGVjaWZ5IGFcbiAgICAqIGBmcmFnbWVudE5hbWVgLlxuICAgICogXG4gICAgKiBAc2luY2UgMy4xMC4wXG4gICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCBvZiB0eXBlIGBXYXRjaEZyYWdtZW50T3B0aW9uc2AgdGhhdCBhbGxvd3NcbiAgICAqIHRoZSBjYWNoZSB0byBpZGVudGlmeSB0aGUgZnJhZ21lbnQgYW5kIG9wdGlvbmFsbHkgc3BlY2lmeSB3aGV0aGVyIHRvIHJlYWN0XG4gICAgKiB0byBvcHRpbWlzdGljIHVwZGF0ZXMuXG4gICAgKi9cbiAgICB3YXRjaEZyYWdtZW50KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBmcmFnbWVudCwgZnJhZ21lbnROYW1lLCBmcm9tLCBvcHRpbWlzdGljID0gdHJ1ZSwgLi4ub3RoZXJPcHRpb25zIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBxdWVyeSA9IHRoaXMuZ2V0RnJhZ21lbnREb2MoZnJhZ21lbnQsIGZyYWdtZW50TmFtZSk7XG4gICAgICAgIC8vIFdoaWxlIG91ciBUeXBlU2NyaXB0IHR5cGVzIGRvIG5vdCBhbGxvdyBmb3IgYHVuZGVmaW5lZGAgYXMgYSB2YWxpZFxuICAgICAgICAvLyBgZnJvbWAsIGl0cyBwb3NzaWJsZSBgdXNlRnJhZ21lbnRgIGdpdmVzIHVzIGFuIGB1bmRlZmluZWRgIHNpbmNlIGl0XG4gICAgICAgIC8vIGNhbGxzYCBjYWNoZS5pZGVudGlmeWAgYW5kIHByb3ZpZGVzIHRoYXQgdmFsdWUgdG8gYGZyb21gLiBXZSBhcmVcbiAgICAgICAgLy8gYWRkaW5nIHRoaXMgZml4IGhlcmUgaG93ZXZlciB0byBlbnN1cmUgdGhvc2UgdXNpbmcgcGxhaW4gSmF2YVNjcmlwdFxuICAgICAgICAvLyBhbmQgdXNpbmcgYGNhY2hlLmlkZW50aWZ5YCB0aGVtc2VsdmVzIHdpbGwgYXZvaWQgc2VlaW5nIHRoZSBvYnNjdXJlXG4gICAgICAgIC8vIHdhcm5pbmcuXG4gICAgICAgIGNvbnN0IGlkID0gdHlwZW9mIGZyb20gPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGZyb20gPT09IFwic3RyaW5nXCIgP1xuICAgICAgICAgICAgZnJvbVxuICAgICAgICAgICAgOiB0aGlzLmlkZW50aWZ5KGZyb20pO1xuICAgICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAgICAgY29uc3QgYWN0dWFsRnJhZ21lbnROYW1lID0gZnJhZ21lbnROYW1lIHx8IGdldEZyYWdtZW50RGVmaW5pdGlvbihmcmFnbWVudCkubmFtZS52YWx1ZTtcbiAgICAgICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKDEwOSwgYWN0dWFsRnJhZ21lbnROYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaWZmT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLm90aGVyT3B0aW9ucyxcbiAgICAgICAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0cnVlLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIG9wdGltaXN0aWMsXG4gICAgICAgIH07XG4gICAgICAgIGxldCBsYXRlc3REaWZmO1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoKG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53YXRjaCh7XG4gICAgICAgICAgICAgICAgLi4uZGlmZk9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW1tZWRpYXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoZGlmZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IGRpZmYucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBvbmNlIGB3YXRjaEZyYWdtZW50YCBzdXBwb3J0cyBgbnVsbGAgYXMgdmFsaWRcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFsdWUgZW1pdHRlZFxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgLy8gQWx3YXlzIGVuc3VyZSB3ZSBkZWxpdmVyIHRoZSBmaXJzdCByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0RGlmZiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZXF1YWxCeVF1ZXJ5KHF1ZXJ5LCB7IGRhdGE6IGxhdGVzdERpZmYucmVzdWx0IH0sIHsgZGF0YSB9LCBvcHRpb25zLnZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0YXRlOiBkaWZmLmNvbXBsZXRlID8gXCJjb21wbGV0ZVwiIDogXCJwYXJ0aWFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogISFkaWZmLmNvbXBsZXRlLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZi5taXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubWlzc2luZyA9IGRpZmYubWlzc2luZy5taXNzaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxhdGVzdERpZmYgPSB7IC4uLmRpZmYsIHJlc3VsdDogZGF0YSB9O1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gTWFrZSBzdXJlIHdlIGNvbXB1dGUgdGhlIHNhbWUgKD09PSkgZnJhZ21lbnQgcXVlcnkgZG9jdW1lbnQgZXZlcnlcbiAgICAvLyB0aW1lIHdlIHJlY2VpdmUgdGhlIHNhbWUgZnJhZ21lbnQgaW4gcmVhZEZyYWdtZW50LlxuICAgIGdldEZyYWdtZW50RG9jID0gd3JhcChnZXRGcmFnbWVudFF1ZXJ5RG9jdW1lbnQsIHtcbiAgICAgICAgbWF4OiBjYWNoZVNpemVzW1wiY2FjaGUuZnJhZ21lbnRRdWVyeURvY3VtZW50c1wiXSB8fFxuICAgICAgICAgICAgMTAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcImNhY2hlLmZyYWdtZW50UXVlcnlEb2N1bWVudHNcIl0gKi8sXG4gICAgICAgIGNhY2hlOiBXZWFrQ2FjaGUsXG4gICAgfSk7XG4gICAgcmVhZEZyYWdtZW50KG9wdGlvbnMsIG9wdGltaXN0aWMgPSAhIW9wdGlvbnMub3B0aW1pc3RpYykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkKHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBxdWVyeTogdGhpcy5nZXRGcmFnbWVudERvYyhvcHRpb25zLmZyYWdtZW50LCBvcHRpb25zLmZyYWdtZW50TmFtZSksXG4gICAgICAgICAgICByb290SWQ6IG9wdGlvbnMuaWQsXG4gICAgICAgICAgICBvcHRpbWlzdGljLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgd3JpdGVRdWVyeSh7IGlkLCBkYXRhLCAuLi5vcHRpb25zIH0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JpdGUoT2JqZWN0LmFzc2lnbihvcHRpb25zLCB7XG4gICAgICAgICAgICBkYXRhSWQ6IGlkIHx8IFwiUk9PVF9RVUVSWVwiLFxuICAgICAgICAgICAgcmVzdWx0OiBkYXRhLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHdyaXRlRnJhZ21lbnQoeyBpZCwgZGF0YSwgZnJhZ21lbnQsIGZyYWdtZW50TmFtZSwgLi4ub3B0aW9ucyB9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyaXRlKE9iamVjdC5hc3NpZ24ob3B0aW9ucywge1xuICAgICAgICAgICAgcXVlcnk6IHRoaXMuZ2V0RnJhZ21lbnREb2MoZnJhZ21lbnQsIGZyYWdtZW50TmFtZSksXG4gICAgICAgICAgICBkYXRhSWQ6IGlkLFxuICAgICAgICAgICAgcmVzdWx0OiBkYXRhLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5KG9wdGlvbnMsIHVwZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaCh7XG4gICAgICAgICAgICB1cGRhdGUoY2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNhY2hlLnJlYWRRdWVyeShvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gdXBkYXRlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PT0gdm9pZCAwIHx8IGRhdGEgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICBjYWNoZS53cml0ZVF1ZXJ5KHsgLi4ub3B0aW9ucywgZGF0YSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGVGcmFnbWVudChvcHRpb25zLCB1cGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2goe1xuICAgICAgICAgICAgdXBkYXRlKGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjYWNoZS5yZWFkRnJhZ21lbnQob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHVwZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09IHZvaWQgMCB8fCBkYXRhID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgY2FjaGUud3JpdGVGcmFnbWVudCh7IC4uLm9wdGlvbnMsIGRhdGEgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBAZXhwZXJpbWVudGFsXG4gICAgKiBAaW50ZXJuYWxcbiAgICAqIFRoaXMgaXMgbm90IGEgc3RhYmxlIEFQSSAtIGl0IGlzIHVzZWQgaW4gZGV2ZWxvcG1lbnQgYnVpbGRzIHRvIGV4cG9zZVxuICAgICogaW5mb3JtYXRpb24gdG8gdGhlIERldlRvb2xzLlxuICAgICogVXNlIGF0IHlvdXIgb3duIHJpc2shXG4gICAgKiBcbiAgICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiAgICAqL1xuICAgIGdldE1lbW9yeUludGVybmFscztcbn1cbmlmIChfX0RFVl9fKSB7XG4gICAgQXBvbGxvQ2FjaGUucHJvdG90eXBlLmdldE1lbW9yeUludGVybmFscyA9IGdldEFwb2xsb0NhY2hlTWVtb3J5SW50ZXJuYWxzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUuanMubWFwXG4iLAogICAgImV4cG9ydCBjbGFzcyBNaXNzaW5nRmllbGRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBtZXNzYWdlO1xuICAgIHBhdGg7XG4gICAgcXVlcnk7XG4gICAgdmFyaWFibGVzO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHBhdGgsIHF1ZXJ5LCB2YXJpYWJsZXMpIHtcbiAgICAgICAgLy8gJ0Vycm9yJyBicmVha3MgcHJvdG90eXBlIGNoYWluIGhlcmVcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgdGhpcy52YXJpYWJsZXMgPSB2YXJpYWJsZXM7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiTWlzc2luZ0ZpZWxkRXJyb3JcIjtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wYXRoKSkge1xuICAgICAgICAgICAgdGhpcy5taXNzaW5nID0gdGhpcy5tZXNzYWdlO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMucGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWlzc2luZyA9IHsgW3RoaXMucGF0aFtpXV06IHRoaXMubWlzc2luZyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5taXNzaW5nID0gdGhpcy5wYXRoO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlJ3JlIG5vdCB1c2luZyBgT2JqZWN0LnNldFByb3RvdHlwZU9mYCBoZXJlIGFzIGl0IGlzbid0IGZ1bGx5IHN1cHBvcnRlZFxuICAgICAgICAvLyBvbiBBbmRyb2lkIChzZWUgaXNzdWUgIzMyMzYpLlxuICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IE1pc3NpbmdGaWVsZEVycm9yLnByb3RvdHlwZTtcbiAgICB9XG4gICAgbWlzc2luZztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLAogICAgImltcG9ydCB7IGlzUmVmZXJlbmNlIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllc1wiO1xuaW1wb3J0IHsgY29tcGFjdCwgY3JlYXRlRnJhZ21lbnRNYXAsIERlZXBNZXJnZXIsIGdldEZyYWdtZW50RGVmaW5pdGlvbnMsIGlzQXJyYXksIGlzRmllbGQsIGlzTm9uTnVsbE9iamVjdCwgcmVzdWx0S2V5TmFtZUZyb21GaWVsZCwgc2hvdWxkSW5jbHVkZSwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5leHBvcnQgY29uc3QgeyBoYXNPd25Qcm9wZXJ0eTogaGFzT3duIH0gPSBPYmplY3QucHJvdG90eXBlO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHREYXRhSWRGcm9tT2JqZWN0KHsgX190eXBlbmFtZSwgaWQsIF9pZCB9LCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBfX3R5cGVuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgICAgICBjb250ZXh0LmtleU9iamVjdCA9XG4gICAgICAgICAgICAgICAgaWQgIT0gbnVsbCA/IHsgaWQgfVxuICAgICAgICAgICAgICAgICAgICA6IF9pZCAhPSBudWxsID8geyBfaWQgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gb2JqZWN0LmlkLCBmYWxsIGJhY2sgdG8gb2JqZWN0Ll9pZC5cbiAgICAgICAgaWYgKGlkID09IG51bGwgJiYgX2lkICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlkID0gX2lkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7X190eXBlbmFtZX06JHt0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIGlkID09PSBcInN0cmluZ1wiID9cbiAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkoaWQpfWA7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAgIGRhdGFJZEZyb21PYmplY3Q6IGRlZmF1bHREYXRhSWRGcm9tT2JqZWN0LFxuICAgIHJlc3VsdENhY2hpbmc6IHRydWUsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUNvbmZpZyhjb25maWcpIHtcbiAgICByZXR1cm4gY29tcGFjdChkZWZhdWx0Q29uZmlnLCBjb25maWcpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFR5cGVuYW1lRnJvbVN0b3JlT2JqZWN0KHN0b3JlLCBvYmplY3RPclJlZmVyZW5jZSkge1xuICAgIHJldHVybiBpc1JlZmVyZW5jZShvYmplY3RPclJlZmVyZW5jZSkgP1xuICAgICAgICBzdG9yZS5nZXQob2JqZWN0T3JSZWZlcmVuY2UuX19yZWYsIFwiX190eXBlbmFtZVwiKVxuICAgICAgICA6IG9iamVjdE9yUmVmZXJlbmNlICYmIG9iamVjdE9yUmVmZXJlbmNlLl9fdHlwZW5hbWU7XG59XG5leHBvcnQgY29uc3QgVHlwZU9yRmllbGROYW1lUmVnRXhwID0gL15bX2Etel1bXzAtOWEtel0qL2k7XG5leHBvcnQgZnVuY3Rpb24gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSkge1xuICAgIGNvbnN0IG1hdGNoID0gc3RvcmVGaWVsZE5hbWUubWF0Y2goVHlwZU9yRmllbGROYW1lUmVnRXhwKTtcbiAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFswXSA6IHN0b3JlRmllbGROYW1lO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQoc2VsZWN0aW9uU2V0LCByZXN1bHQsIHZhcmlhYmxlcykge1xuICAgIGlmIChpc05vbk51bGxPYmplY3QocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4gaXNBcnJheShyZXN1bHQpID9cbiAgICAgICAgICAgIHJlc3VsdC5ldmVyeSgoaXRlbSkgPT4gc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdChzZWxlY3Rpb25TZXQsIGl0ZW0sIHZhcmlhYmxlcykpXG4gICAgICAgICAgICA6IHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmV2ZXJ5KChmaWVsZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc0ZpZWxkKGZpZWxkKSAmJiBzaG91bGRJbmNsdWRlKGZpZWxkLCB2YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHJlc3VsdEtleU5hbWVGcm9tRmllbGQoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGhhc093bi5jYWxsKHJlc3VsdCwga2V5KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKCFmaWVsZC5zZWxlY3Rpb25TZXQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0KGZpZWxkLnNlbGVjdGlvblNldCwgcmVzdWx0W2tleV0sIHZhcmlhYmxlcykpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHNlbGVjdGlvbiBoYXMgYmVlbiBza2lwcGVkIHdpdGggQHNraXAodHJ1ZSkgb3JcbiAgICAgICAgICAgICAgICAvLyBAaW5jbHVkZShmYWxzZSksIGl0IHNob3VsZCBub3QgY291bnQgYWdhaW5zdCB0aGUgbWF0Y2hpbmcuIElmXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlbGVjdGlvbiBpcyBub3QgYSBmaWVsZCwgaXQgbXVzdCBiZSBhIGZyYWdtZW50IChpbmxpbmUgb3JcbiAgICAgICAgICAgICAgICAvLyBuYW1lZCkuIFdlIHdpbGwgZGV0ZXJtaW5lIGlmIHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQgZm9yIHRoYXRcbiAgICAgICAgICAgICAgICAvLyBmcmFnbWVudCB3aGVuIHdlIGdldCB0byBpdCwgc28gZm9yIG5vdyB3ZSByZXR1cm4gdHJ1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QodmFsdWUpIHtcbiAgICByZXR1cm4gaXNOb25OdWxsT2JqZWN0KHZhbHVlKSAmJiAhaXNSZWZlcmVuY2UodmFsdWUpICYmICFpc0FycmF5KHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUHJvY2Vzc2VkRmllbGRzTWVyZ2VyKCkge1xuICAgIHJldHVybiBuZXcgRGVlcE1lcmdlcigpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RGcmFnbWVudENvbnRleHQoZG9jdW1lbnQsIGZyYWdtZW50cykge1xuICAgIC8vIEZyYWdtZW50TWFwIGNvbnNpc3Rpbmcgb25seSBvZiBmcmFnbWVudHMgZGVmaW5lZCBkaXJlY3RseSBpbiBkb2N1bWVudCwgbm90XG4gICAgLy8gaW5jbHVkaW5nIG90aGVyIGZyYWdtZW50cyByZWdpc3RlcmVkIGluIHRoZSBGcmFnbWVudFJlZ2lzdHJ5LlxuICAgIGNvbnN0IGZyYWdtZW50TWFwID0gY3JlYXRlRnJhZ21lbnRNYXAoZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhkb2N1bWVudCkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGZyYWdtZW50TWFwLFxuICAgICAgICBsb29rdXBGcmFnbWVudChuYW1lKSB7XG4gICAgICAgICAgICBsZXQgZGVmID0gZnJhZ21lbnRNYXBbbmFtZV07XG4gICAgICAgICAgICBpZiAoIWRlZiAmJiBmcmFnbWVudHMpIHtcbiAgICAgICAgICAgICAgICBkZWYgPSBmcmFnbWVudHMubG9va3VwKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZiB8fCBudWxsO1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWxwZXJzLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgZXF1YWwgfSBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgVHJpZSB9IGZyb20gXCJAd3J5L3RyaWVcIjtcbmltcG9ydCB7IGRlcCB9IGZyb20gXCJvcHRpbWlzbVwiO1xuaW1wb3J0IHsgaXNSZWZlcmVuY2UgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBfX0RFVl9fIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9lbnZpcm9ubWVudFwiO1xuaW1wb3J0IHsgRGVlcE1lcmdlciwgaXNOb25OdWxsT2JqZWN0LCBtYWtlUmVmZXJlbmNlLCBtYXliZURlZXBGcmVlemUsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbFwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnZhcmlhbnRcIjtcbmltcG9ydCB7IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUsIGhhc093biB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbmNvbnN0IERFTEVURSA9IHt9O1xuY29uc3QgZGVsTW9kaWZpZXIgPSAoKSA9PiBERUxFVEU7XG5jb25zdCBJTlZBTElEQVRFID0ge307XG5leHBvcnQgY2xhc3MgRW50aXR5U3RvcmUge1xuICAgIHBvbGljaWVzO1xuICAgIGdyb3VwO1xuICAgIGRhdGEgPSB7fTtcbiAgICBjb25zdHJ1Y3Rvcihwb2xpY2llcywgZ3JvdXApIHtcbiAgICAgICAgdGhpcy5wb2xpY2llcyA9IHBvbGljaWVzO1xuICAgICAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XG4gICAgfVxuICAgIC8vIEFsdGhvdWdoIHRoZSBFbnRpdHlTdG9yZSBjbGFzcyBpcyBhYnN0cmFjdCwgaXQgY29udGFpbnMgY29uY3JldGVcbiAgICAvLyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIHZhcmlvdXMgTm9ybWFsaXplZENhY2hlIGludGVyZmFjZSBtZXRob2RzIHRoYXRcbiAgICAvLyBhcmUgaW5oZXJpdGVkIGJ5IHRoZSBSb290IGFuZCBMYXllciBzdWJjbGFzc2VzLlxuICAgIHRvT2JqZWN0KCkge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLmRhdGEgfTtcbiAgICB9XG4gICAgaGFzKGRhdGFJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb29rdXAoZGF0YUlkLCB0cnVlKSAhPT0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQoZGF0YUlkLCBmaWVsZE5hbWUpIHtcbiAgICAgICAgdGhpcy5ncm91cC5kZXBlbmQoZGF0YUlkLCBmaWVsZE5hbWUpO1xuICAgICAgICBpZiAoaGFzT3duLmNhbGwodGhpcy5kYXRhLCBkYXRhSWQpKSB7XG4gICAgICAgICAgICBjb25zdCBzdG9yZU9iamVjdCA9IHRoaXMuZGF0YVtkYXRhSWRdO1xuICAgICAgICAgICAgaWYgKHN0b3JlT2JqZWN0ICYmIGhhc093bi5jYWxsKHN0b3JlT2JqZWN0LCBmaWVsZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlT2JqZWN0W2ZpZWxkTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZWxkTmFtZSA9PT0gXCJfX3R5cGVuYW1lXCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWQsIGRhdGFJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkW2RhdGFJZF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldChkYXRhSWQsIGZpZWxkTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9va3VwKGRhdGFJZCwgZGVwZW5kT25FeGlzdGVuY2UpIHtcbiAgICAgICAgLy8gVGhlIGhhcyBtZXRob2QgKGFib3ZlKSBjYWxscyBsb29rdXAgd2l0aCBkZXBlbmRPbkV4aXN0ZW5jZSA9IHRydWUsIHNvXG4gICAgICAgIC8vIHRoYXQgaXQgY2FuIGxhdGVyIGJlIGludmFsaWRhdGVkIHdoZW4gd2UgYWRkIG9yIHJlbW92ZSBhIFN0b3JlT2JqZWN0IGZvclxuICAgICAgICAvLyB0aGlzIGRhdGFJZC4gQW55IGNvbnN1bWVyIHdobyBjYXJlcyBhYm91dCB0aGUgY29udGVudHMgb2YgdGhlIFN0b3JlT2JqZWN0XG4gICAgICAgIC8vIHNob3VsZCBub3QgcmVseSBvbiB0aGlzIGRlcGVuZGVuY3ksIHNpbmNlIHRoZSBjb250ZW50cyBjb3VsZCBjaGFuZ2VcbiAgICAgICAgLy8gd2l0aG91dCB0aGUgb2JqZWN0IGJlaW5nIGFkZGVkIG9yIHJlbW92ZWQuXG4gICAgICAgIGlmIChkZXBlbmRPbkV4aXN0ZW5jZSlcbiAgICAgICAgICAgIHRoaXMuZ3JvdXAuZGVwZW5kKGRhdGFJZCwgXCJfX2V4aXN0c1wiKTtcbiAgICAgICAgaWYgKGhhc093bi5jYWxsKHRoaXMuZGF0YSwgZGF0YUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtkYXRhSWRdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5sb29rdXAoZGF0YUlkLCBkZXBlbmRPbkV4aXN0ZW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbZGF0YUlkXSkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgfVxuICAgIG1lcmdlKG9sZGVyLCBuZXdlcikge1xuICAgICAgICBsZXQgZGF0YUlkO1xuICAgICAgICAvLyBDb252ZXJ0IHVuZXhwZWN0ZWQgcmVmZXJlbmNlcyB0byBJRCBzdHJpbmdzLlxuICAgICAgICBpZiAoaXNSZWZlcmVuY2Uob2xkZXIpKVxuICAgICAgICAgICAgb2xkZXIgPSBvbGRlci5fX3JlZjtcbiAgICAgICAgaWYgKGlzUmVmZXJlbmNlKG5ld2VyKSlcbiAgICAgICAgICAgIG5ld2VyID0gbmV3ZXIuX19yZWY7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdHlwZW9mIG9sZGVyID09PSBcInN0cmluZ1wiID8gdGhpcy5sb29rdXAoKGRhdGFJZCA9IG9sZGVyKSkgOiBvbGRlcjtcbiAgICAgICAgY29uc3QgaW5jb21pbmcgPSB0eXBlb2YgbmV3ZXIgPT09IFwic3RyaW5nXCIgPyB0aGlzLmxvb2t1cCgoZGF0YUlkID0gbmV3ZXIpKSA6IG5ld2VyO1xuICAgICAgICAvLyBJZiBuZXdlciB3YXMgYSBzdHJpbmcgSUQsIGJ1dCB0aGF0IElEIHdhcyBub3QgZGVmaW5lZCBpbiB0aGlzIHN0b3JlLFxuICAgICAgICAvLyB0aGVuIHRoZXJlIGFyZSBubyBmaWVsZHMgdG8gYmUgbWVyZ2VkLCBzbyB3ZSdyZSBkb25lLlxuICAgICAgICBpZiAoIWluY29taW5nKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpbnZhcmlhbnQodHlwZW9mIGRhdGFJZCA9PT0gXCJzdHJpbmdcIiwgOTUpO1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgRGVlcE1lcmdlcihzdG9yZU9iamVjdFJlY29uY2lsZXIpLm1lcmdlKGV4aXN0aW5nLCBpbmNvbWluZyk7XG4gICAgICAgIC8vIEV2ZW4gaWYgbWVyZ2VkID09PSBleGlzdGluZywgZXhpc3RpbmcgbWF5IGhhdmUgY29tZSBmcm9tIGEgbG93ZXJcbiAgICAgICAgLy8gbGF5ZXIsIHNvIHdlIGFsd2F5cyBuZWVkIHRvIHNldCB0aGlzLmRhdGFbZGF0YUlkXSBvbiB0aGlzIGxldmVsLlxuICAgICAgICB0aGlzLmRhdGFbZGF0YUlkXSA9IG1lcmdlZDtcbiAgICAgICAgaWYgKG1lcmdlZCAhPT0gZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlZnNbZGF0YUlkXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwLmNhY2hpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHNUb0RpcnR5ID0ge307XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgYWRkZWQgYSBuZXcgU3RvcmVPYmplY3Qgd2hlcmUgdGhlcmUgd2FzIHByZXZpb3VzbHkgbm9uZSwgZGlydHlcbiAgICAgICAgICAgICAgICAvLyBhbnl0aGluZyB0aGF0IGRlcGVuZGVkIG9uIHRoZSBleGlzdGVuY2Ugb2YgdGhpcyBkYXRhSWQsIHN1Y2ggYXMgdGhlXG4gICAgICAgICAgICAgICAgLy8gRW50aXR5U3RvcmUjaGFzIG1ldGhvZC5cbiAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nKVxuICAgICAgICAgICAgICAgICAgICBmaWVsZHNUb0RpcnR5Ll9fZXhpc3RzID0gMTtcbiAgICAgICAgICAgICAgICAvLyBOb3cgaW52YWxpZGF0ZSBkZXBlbmRlbnRzIHdobyBjYWxsZWQgZ2V0RmllbGRWYWx1ZSBmb3IgYW55IGZpZWxkc1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgYXJlIGNoYW5naW5nIGFzIGEgcmVzdWx0IG9mIHRoaXMgbWVyZ2UuXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoaW5jb21pbmcpLmZvckVhY2goKHN0b3JlRmllbGROYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmcgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nW3N0b3JlRmllbGROYW1lXSAhPT0gbWVyZ2VkW3N0b3JlRmllbGROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWx3YXlzIGRpcnR5IHRoZSBmdWxsIHN0b3JlRmllbGROYW1lLCB3aGljaCBtYXkgaW5jbHVkZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VyaWFsaXplZCBhcmd1bWVudHMgZm9sbG93aW5nIHRoZSBmaWVsZE5hbWUgcHJlZml4LlxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVG9EaXJ0eVtzdG9yZUZpZWxkTmFtZV0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxzbyBkaXJ0eSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKSBpZiBpdCdzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkaWZmZXJlbnQgZnJvbSBzdG9yZUZpZWxkTmFtZSBhbmQgdGhpcyBmaWVsZCBkb2VzIG5vdCBoYXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBrZXlBcmdzIGNvbmZpZ3VyZWQsIGJlY2F1c2UgdGhhdCBtZWFucyB0aGUgY2FjaGUgY2FuJ3QgbWFrZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW55IGFzc3VtcHRpb25zIGFib3V0IGhvdyBmaWVsZCB2YWx1ZXMgd2l0aCB0aGUgc2FtZSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmFtZSBidXQgZGlmZmVyZW50IGFyZ3VtZW50cyBtaWdodCBiZSBpbnRlcnJlbGF0ZWQsIHNvIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtdXN0IGVyciBvbiB0aGUgc2lkZSBvZiBpbnZhbGlkYXRpbmcgYWxsIGZpZWxkIHZhbHVlcyB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaGFyZSB0aGUgc2FtZSBzaG9ydCBmaWVsZE5hbWUsIHJlZ2FyZGxlc3Mgb2YgYXJndW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGROYW1lICE9PSBzdG9yZUZpZWxkTmFtZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnBvbGljaWVzLmhhc0tleUFyZ3MobWVyZ2VkLl9fdHlwZW5hbWUsIGZpZWxkTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNUb0RpcnR5W2ZpZWxkTmFtZV0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgbWVyZ2VkW3N0b3JlRmllbGROYW1lXSBoYXMgYmVjb21lIHVuZGVmaW5lZCwgYW5kIHRoaXMgaXMgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSb290IGxheWVyLCBhY3R1YWxseSBkZWxldGUgdGhlIHByb3BlcnR5IGZyb20gdGhlIG1lcmdlZCBvYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBpcyBndWFyYW50ZWVkIHRvIGhhdmUgYmVlbiBjcmVhdGVkIGZyZXNoIGluIHRoaXMgbWV0aG9kLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lcmdlZFtzdG9yZUZpZWxkTmFtZV0gPT09IHZvaWQgMCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBMYXllcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbWVyZ2VkW3N0b3JlRmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZHNUb0RpcnR5Ll9fdHlwZW5hbWUgJiZcbiAgICAgICAgICAgICAgICAgICAgIShleGlzdGluZyAmJiBleGlzdGluZy5fX3R5cGVuYW1lKSAmJlxuICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB3ZSByZXR1cm4gZGVmYXVsdCByb290IF9fdHlwZW5hbWUgc3RyaW5nc1xuICAgICAgICAgICAgICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IGZyb20gc3RvcmUuZ2V0LCB3ZSBkb24ndCBuZWVkIHRvIGRpcnR5IHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBST09UX1FVRVJZLl9fdHlwZW5hbWUgZmllbGQgaWYgbWVyZ2VkLl9fdHlwZW5hbWUgaXMgZXF1YWxcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gdGhlIGRlZmF1bHQgc3RyaW5nICh1c3VhbGx5IFwiUXVlcnlcIikuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbZGF0YUlkXSA9PT0gbWVyZ2VkLl9fdHlwZW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpZWxkc1RvRGlydHkuX190eXBlbmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZmllbGRzVG9EaXJ0eSkuZm9yRWFjaCgoZmllbGROYW1lKSA9PiB0aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgZmllbGROYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbW9kaWZ5KGRhdGFJZCwgZmllbGRzLCBleGFjdCkge1xuICAgICAgICBjb25zdCBzdG9yZU9iamVjdCA9IHRoaXMubG9va3VwKGRhdGFJZCk7XG4gICAgICAgIGlmIChzdG9yZU9iamVjdCkge1xuICAgICAgICAgICAgY29uc3QgY2hhbmdlZEZpZWxkcyA9IHt9O1xuICAgICAgICAgICAgbGV0IG5lZWRUb01lcmdlID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgYWxsRGVsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBzaGFyZWREZXRhaWxzID0ge1xuICAgICAgICAgICAgICAgIERFTEVURSxcbiAgICAgICAgICAgICAgICBJTlZBTElEQVRFLFxuICAgICAgICAgICAgICAgIGlzUmVmZXJlbmNlLFxuICAgICAgICAgICAgICAgIHRvUmVmZXJlbmNlOiB0aGlzLnRvUmVmZXJlbmNlLFxuICAgICAgICAgICAgICAgIGNhblJlYWQ6IHRoaXMuY2FuUmVhZCxcbiAgICAgICAgICAgICAgICByZWFkRmllbGQ6IChmaWVsZE5hbWVPck9wdGlvbnMsIGZyb20pID0+IHRoaXMucG9saWNpZXMucmVhZEZpZWxkKHR5cGVvZiBmaWVsZE5hbWVPck9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZU9yT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IGZyb20gfHwgbWFrZVJlZmVyZW5jZShkYXRhSWQpLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDogZmllbGROYW1lT3JPcHRpb25zLCB7IHN0b3JlOiB0aGlzIH0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JlT2JqZWN0KS5mb3JFYWNoKChzdG9yZUZpZWxkTmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIGxldCBmaWVsZFZhbHVlID0gc3RvcmVPYmplY3Rbc3RvcmVGaWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlID09PSB2b2lkIDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RpZnkgPSB0eXBlb2YgZmllbGRzID09PSBcImZ1bmN0aW9uXCIgPyBmaWVsZHMgOiAoZmllbGRzW3N0b3JlRmllbGROYW1lXSB8fCAoZXhhY3QgPyB1bmRlZmluZWQgOiBmaWVsZHNbZmllbGROYW1lXSkpO1xuICAgICAgICAgICAgICAgIGlmIChtb2RpZnkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0gbW9kaWZ5ID09PSBkZWxNb2RpZmllciA/IERFTEVURSA6IChtb2RpZnkobWF5YmVEZWVwRnJlZXplKGZpZWxkVmFsdWUpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5zaGFyZWREZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVGaWVsZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlOiB0aGlzLmdldFN0b3JhZ2UoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSksXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBJTlZBTElEQVRFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBERUxFVEUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGZpZWxkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkRmllbGRzW3N0b3JlRmllbGROYW1lXSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRUb01lcmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tSZWZlcmVuY2UgPSAocmVmKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sb29rdXAocmVmLl9fcmVmKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQud2Fybig5NiwgcmVmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVmZXJlbmNlKG5ld1ZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tSZWZlcmVuY2UobmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXYXJuIGFib3V0IHdyaXRpbmcgXCJtaXhlZFwiIGFycmF5cyBvZiBSZWZlcmVuY2UgYW5kIG5vbi1SZWZlcmVuY2Ugb2JqZWN0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlZW5SZWZlcmVuY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzb21lTm9uUmVmZXJlbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1JlZmVyZW5jZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VlblJlZmVyZW5jZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja1JlZmVyZW5jZSh2YWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCB3YXJuIG9uIHByaW1pdGl2ZSB2YWx1ZXMsIHNpbmNlIHRob3NlIGNvdWxkIG5ldmVyIGJlIHJlcHJlc2VudGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ5IGEgcmVmZXJlbmNlLiBUaGlzIGlzIGEgdmFsaWQgKGFsYmVpdCB1bmNvbW1vbikgdXNlIGNhc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgISF2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW2lkXSA9IHRoaXMucG9saWNpZXMuaWRlbnRpZnkodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgb2JqZWN0IGNvdWxkIGV2ZW4gYmUgcmVmZXJlbmNlZCwgb3RoZXJ3aXNlIHdlIGFyZSBub3QgaW50ZXJlc3RlZCBpbiBpdCBmb3IgdGhpcyB3YXJuaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb21lTm9uUmVmZXJlbmNlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlZW5SZWZlcmVuY2UgJiYgc29tZU5vblJlZmVyZW5jZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fREVWX18gJiYgaW52YXJpYW50Lndhcm4oOTcsIHNvbWVOb25SZWZlcmVuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBhbGxEZWxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobmVlZFRvTWVyZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lcmdlKGRhdGFJZCwgY2hhbmdlZEZpZWxkcyk7XG4gICAgICAgICAgICAgICAgaWYgKGFsbERlbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW2RhdGFJZF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5kYXRhW2RhdGFJZF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIFwiX19leGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gSWYgY2FsbGVkIHdpdGggb25seSBvbmUgYXJndW1lbnQsIHJlbW92ZXMgdGhlIGVudGlyZSBlbnRpdHlcbiAgICAvLyBpZGVudGlmaWVkIGJ5IGRhdGFJZC4gSWYgY2FsbGVkIHdpdGggYSBmaWVsZE5hbWUgYXMgd2VsbCwgcmVtb3ZlcyBhbGxcbiAgICAvLyBmaWVsZHMgb2YgdGhhdCBlbnRpdHkgd2hvc2UgbmFtZXMgbWF0Y2ggZmllbGROYW1lIGFjY29yZGluZyB0byB0aGVcbiAgICAvLyBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lIGhlbHBlciBmdW5jdGlvbi4gSWYgY2FsbGVkIHdpdGggYSBmaWVsZE5hbWVcbiAgICAvLyBhbmQgdmFyaWFibGVzLCByZW1vdmVzIGFsbCBmaWVsZHMgb2YgdGhhdCBlbnRpdHkgd2hvc2UgbmFtZXMgbWF0Y2ggZmllbGROYW1lXG4gICAgLy8gYW5kIHdob3NlIGFyZ3VtZW50cyB3aGVuIGNhY2hlZCBleGFjdGx5IG1hdGNoIHRoZSB2YXJpYWJsZXMgcGFzc2VkLlxuICAgIGRlbGV0ZShkYXRhSWQsIGZpZWxkTmFtZSwgYXJncykge1xuICAgICAgICBjb25zdCBzdG9yZU9iamVjdCA9IHRoaXMubG9va3VwKGRhdGFJZCk7XG4gICAgICAgIGlmIChzdG9yZU9iamVjdCkge1xuICAgICAgICAgICAgY29uc3QgdHlwZW5hbWUgPSB0aGlzLmdldEZpZWxkVmFsdWUoc3RvcmVPYmplY3QsIFwiX190eXBlbmFtZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlRmllbGROYW1lID0gZmllbGROYW1lICYmIGFyZ3MgP1xuICAgICAgICAgICAgICAgIHRoaXMucG9saWNpZXMuZ2V0U3RvcmVGaWVsZE5hbWUoeyB0eXBlbmFtZSwgZmllbGROYW1lLCBhcmdzIH0pXG4gICAgICAgICAgICAgICAgOiBmaWVsZE5hbWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tb2RpZnkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSA/XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBbc3RvcmVGaWVsZE5hbWVdOiBkZWxNb2RpZmllcixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBkZWxNb2RpZmllciwgISFhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2aWN0KG9wdGlvbnMsIGxpbWl0KSB7XG4gICAgICAgIGxldCBldmljdGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChvcHRpb25zLmlkKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwodGhpcy5kYXRhLCBvcHRpb25zLmlkKSkge1xuICAgICAgICAgICAgICAgIGV2aWN0ZWQgPSB0aGlzLmRlbGV0ZShvcHRpb25zLmlkLCBvcHRpb25zLmZpZWxkTmFtZSwgb3B0aW9ucy5hcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTGF5ZXIgJiYgdGhpcyAhPT0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICBldmljdGVkID0gdGhpcy5wYXJlbnQuZXZpY3Qob3B0aW9ucywgbGltaXQpIHx8IGV2aWN0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBbHdheXMgaW52YWxpZGF0ZSB0aGUgZmllbGQgdG8gdHJpZ2dlciByZXJlYWRpbmcgb2Ygd2F0Y2hlZFxuICAgICAgICAgICAgLy8gcXVlcmllcywgZXZlbiBpZiBubyBjYWNoZSBkYXRhIHdhcyBtb2RpZmllZCBieSB0aGUgZXZpY3Rpb24sXG4gICAgICAgICAgICAvLyBiZWNhdXNlIHF1ZXJpZXMgbWF5IGRlcGVuZCBvbiBjb21wdXRlZCBmaWVsZHMgd2l0aCBjdXN0b20gcmVhZFxuICAgICAgICAgICAgLy8gZnVuY3Rpb25zLCB3aG9zZSB2YWx1ZXMgYXJlIG5vdCBzdG9yZWQgaW4gdGhlIEVudGl0eVN0b3JlLlxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZmllbGROYW1lIHx8IGV2aWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwLmRpcnR5KG9wdGlvbnMuaWQsIG9wdGlvbnMuZmllbGROYW1lIHx8IFwiX19leGlzdHNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2aWN0ZWQ7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLnJlcGxhY2UobnVsbCk7XG4gICAgfVxuICAgIGV4dHJhY3QoKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMudG9PYmplY3QoKTtcbiAgICAgICAgY29uc3QgZXh0cmFSb290SWRzID0gW107XG4gICAgICAgIHRoaXMuZ2V0Um9vdElkU2V0KCkuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFzT3duLmNhbGwodGhpcy5wb2xpY2llcy5yb290VHlwZW5hbWVzQnlJZCwgaWQpKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFSb290SWRzLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGV4dHJhUm9vdElkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9iai5fX01FVEEgPSB7IGV4dHJhUm9vdElkczogZXh0cmFSb290SWRzLnNvcnQoKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIHJlcGxhY2UobmV3RGF0YSkge1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmRhdGEpLmZvckVhY2goKGRhdGFJZCkgPT4ge1xuICAgICAgICAgICAgaWYgKCEobmV3RGF0YSAmJiBoYXNPd24uY2FsbChuZXdEYXRhLCBkYXRhSWQpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlKGRhdGFJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobmV3RGF0YSkge1xuICAgICAgICAgICAgY29uc3QgeyBfX01FVEEsIC4uLnJlc3QgfSA9IG5ld0RhdGE7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhyZXN0KS5mb3JFYWNoKChkYXRhSWQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lcmdlKGRhdGFJZCwgcmVzdFtkYXRhSWRdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKF9fTUVUQSkge1xuICAgICAgICAgICAgICAgIF9fTUVUQS5leHRyYVJvb3RJZHMuZm9yRWFjaCh0aGlzLnJldGFpbiwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTWFwcyByb290IGVudGl0eSBJRHMgdG8gdGhlIG51bWJlciBvZiB0aW1lcyB0aGV5IGhhdmUgYmVlbiByZXRhaW5lZCwgbWludXNcbiAgICAvLyB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZXkgaGF2ZSBiZWVuIHJlbGVhc2VkLiBSZXRhaW5lZCBlbnRpdGllcyBrZWVwIG90aGVyXG4gICAgLy8gZW50aXRpZXMgdGhleSByZWZlcmVuY2UgKGV2ZW4gaW5kaXJlY3RseSkgZnJvbSBiZWluZyBnYXJiYWdlIGNvbGxlY3RlZC5cbiAgICByb290SWRzID0ge307XG4gICAgcmV0YWluKHJvb3RJZCkge1xuICAgICAgICByZXR1cm4gKHRoaXMucm9vdElkc1tyb290SWRdID0gKHRoaXMucm9vdElkc1tyb290SWRdIHx8IDApICsgMSk7XG4gICAgfVxuICAgIHJlbGVhc2Uocm9vdElkKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3RJZHNbcm9vdElkXSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gLS10aGlzLnJvb3RJZHNbcm9vdElkXTtcbiAgICAgICAgICAgIGlmICghY291bnQpXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucm9vdElkc1tyb290SWRdO1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gYSBTZXQ8c3RyaW5nPiBvZiBhbGwgdGhlIElEIHN0cmluZ3MgdGhhdCBoYXZlIGJlZW4gcmV0YWluZWQgYnlcbiAgICAvLyB0aGlzIGxheWVyL3Jvb3QgKmFuZCogYW55IGxheWVycy9yb290cyBiZW5lYXRoIGl0LlxuICAgIGdldFJvb3RJZFNldChpZHMgPSBuZXcgU2V0KCkpIHtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5yb290SWRzKS5mb3JFYWNoKGlkcy5hZGQsIGlkcyk7XG4gICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmdldFJvb3RJZFNldChpZHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gT2ZmaWNpYWwgc2luZ2xldG9uIElEcyBsaWtlIFJPT1RfUVVFUlkgYW5kIFJPT1RfTVVUQVRJT04gYXJlXG4gICAgICAgICAgICAvLyBhbHdheXMgY29uc2lkZXJlZCByb290cyBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uLCByZWdhcmRsZXNzIG9mXG4gICAgICAgICAgICAvLyB0aGVpciByZXRhaW5tZW50IGNvdW50cyBpbiB0aGlzLnJvb3RJZHMuXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkKS5mb3JFYWNoKGlkcy5hZGQsIGlkcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkcztcbiAgICB9XG4gICAgLy8gVGhlIGdvYWwgb2YgZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIHRvIHJlbW92ZSBJRHMgZnJvbSB0aGUgUm9vdCBsYXllciBvZiB0aGVcbiAgICAvLyBzdG9yZSB0aGF0IGFyZSBubyBsb25nZXIgcmVhY2hhYmxlIHN0YXJ0aW5nIGZyb20gYW55IElEcyB0aGF0IGhhdmUgYmVlblxuICAgIC8vIGV4cGxpY2l0bHkgcmV0YWluZWQgKHNlZSByZXRhaW4gYW5kIHJlbGVhc2UsIGFib3ZlKS4gUmV0dXJucyBhbiBhcnJheSBvZlxuICAgIC8vIGRhdGFJZCBzdHJpbmdzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhlIHN0b3JlLlxuICAgIGdjKCkge1xuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLmdldFJvb3RJZFNldCgpO1xuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMudG9PYmplY3QoKTtcbiAgICAgICAgaWRzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoc25hcHNob3QsIGlkKSkge1xuICAgICAgICAgICAgICAgIC8vIEJlY2F1c2Ugd2UgYXJlIGl0ZXJhdGluZyBvdmVyIGFuIEVDTUFTY3JpcHQgU2V0LCB0aGUgSURzIHdlIGFkZCBoZXJlXG4gICAgICAgICAgICAgICAgLy8gd2lsbCBiZSB2aXNpdGVkIGluIGxhdGVyIGl0ZXJhdGlvbnMgb2YgdGhlIGZvckVhY2ggbG9vcCBvbmx5IGlmIHRoZXlcbiAgICAgICAgICAgICAgICAvLyB3ZXJlIG5vdCBwcmV2aW91c2x5IGNvbnRhaW5lZCBieSB0aGUgU2V0LlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZmluZENoaWxkUmVmSWRzKGlkKSkuZm9yRWFjaChpZHMuYWRkLCBpZHMpO1xuICAgICAgICAgICAgICAgIC8vIEJ5IHJlbW92aW5nIElEcyBmcm9tIHRoZSBzbmFwc2hvdCBvYmplY3QgaGVyZSwgd2UgcHJvdGVjdCB0aGVtIGZyb21cbiAgICAgICAgICAgICAgICAvLyBnZXR0aW5nIHJlbW92ZWQgZnJvbSB0aGUgcm9vdCBzdG9yZSBsYXllciBiZWxvdy5cbiAgICAgICAgICAgICAgICBkZWxldGUgc25hcHNob3RbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaWRzVG9SZW1vdmUgPSBPYmplY3Qua2V5cyhzbmFwc2hvdCk7XG4gICAgICAgIGlmIChpZHNUb1JlbW92ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCByb290ID0gdGhpcztcbiAgICAgICAgICAgIHdoaWxlIChyb290IGluc3RhbmNlb2YgTGF5ZXIpXG4gICAgICAgICAgICAgICAgcm9vdCA9IHJvb3QucGFyZW50O1xuICAgICAgICAgICAgaWRzVG9SZW1vdmUuZm9yRWFjaCgoaWQpID0+IHJvb3QuZGVsZXRlKGlkKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlkc1RvUmVtb3ZlO1xuICAgIH1cbiAgICAvLyBMYXppbHkgdHJhY2tzIHsgX19yZWY6IDxkYXRhSWQ+IH0gc3RyaW5ncyBjb250YWluZWQgYnkgdGhpcy5kYXRhW2RhdGFJZF0uXG4gICAgcmVmcyA9IHt9O1xuICAgIGZpbmRDaGlsZFJlZklkcyhkYXRhSWQpIHtcbiAgICAgICAgaWYgKCFoYXNPd24uY2FsbCh0aGlzLnJlZnMsIGRhdGFJZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gKHRoaXMucmVmc1tkYXRhSWRdID0ge30pO1xuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuZGF0YVtkYXRhSWRdO1xuICAgICAgICAgICAgaWYgKCFyb290KVxuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgIGNvbnN0IHdvcmtTZXQgPSBuZXcgU2V0KFtyb290XSk7XG4gICAgICAgICAgICAvLyBXaXRoaW4gdGhlIHN0b3JlLCBvbmx5IGFycmF5cyBhbmQgb2JqZWN0cyBjYW4gY29udGFpbiBjaGlsZCBlbnRpdHlcbiAgICAgICAgICAgIC8vIHJlZmVyZW5jZXMsIHNvIHdlIGNhbiBwcnVuZSB0aGUgdHJhdmVyc2FsIHVzaW5nIHRoaXMgcHJlZGljYXRlOlxuICAgICAgICAgICAgd29ya1NldC5mb3JFYWNoKChvYmopID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2Uob2JqKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3VuZFtvYmouX19yZWZdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gcmFyZSBjYXNlcywgYSB7IF9fcmVmIH0gUmVmZXJlbmNlIG9iamVjdCBtYXkgaGF2ZSBvdGhlciBmaWVsZHMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgb2Z0ZW4gaW5kaWNhdGVzIGEgbWlzbWVyZ2luZyBvZiBSZWZlcmVuY2VzIHdpdGggU3RvcmVPYmplY3RzLFxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgZ2FyYmFnZSBjb2xsZWN0aW9uIHNob3VsZCBub3QgYmUgZm9vbGVkIGJ5IGEgc3RyYXkgX19yZWZcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvcGVydHkgaW4gYSBTdG9yZU9iamVjdCAoaWdub3JpbmcgYWxsIHRoZSBvdGhlciBmaWVsZHMganVzdFxuICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIHRoZSBTdG9yZU9iamVjdCBsb29rcyBsaWtlIGEgUmVmZXJlbmNlKS4gVG8gYXZvaWQgdGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyBwcmVtYXR1cmUgdGVybWluYXRpb24gb2YgZmluZENoaWxkUmVmSWRzIHJlY3Vyc2lvbiwgd2UgZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBjb2RlIGJlbG93LCB3aGljaCB3aWxsIGhhbmRsZSBhbnkgb3RoZXIgcHJvcGVydGllcyBvZiBvYmouXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc05vbk51bGxPYmplY3Qob2JqKSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gYWRkIHByaW1pdGl2ZSB2YWx1ZXMgdG8gdGhlIHdvcmtTZXQsIHNpbmNlIHRoZXkgY2Fubm90XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250YWluIHJlZmVyZW5jZSBvYmplY3RzLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm9uTnVsbE9iamVjdChjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrU2V0LmFkZChjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlZnNbZGF0YUlkXTtcbiAgICB9XG4gICAgbWFrZUNhY2hlS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncm91cC5rZXlNYWtlci5sb29rdXBBcnJheShhcmd1bWVudHMpO1xuICAgIH1cbiAgICAvLyBCb3VuZCBmdW5jdGlvbiB0aGF0IGNhbiBiZSBwYXNzZWQgYXJvdW5kIHRvIHByb3ZpZGUgZWFzeSBhY2Nlc3MgdG8gZmllbGRzXG4gICAgLy8gb2YgUmVmZXJlbmNlIG9iamVjdHMgYXMgd2VsbCBhcyBvcmRpbmFyeSBvYmplY3RzLlxuICAgIGdldEZpZWxkVmFsdWUgPSAob2JqZWN0T3JSZWZlcmVuY2UsIHN0b3JlRmllbGROYW1lKSA9PiBtYXliZURlZXBGcmVlemUoaXNSZWZlcmVuY2Uob2JqZWN0T3JSZWZlcmVuY2UpID9cbiAgICAgICAgdGhpcy5nZXQob2JqZWN0T3JSZWZlcmVuY2UuX19yZWYsIHN0b3JlRmllbGROYW1lKVxuICAgICAgICA6IG9iamVjdE9yUmVmZXJlbmNlICYmIG9iamVjdE9yUmVmZXJlbmNlW3N0b3JlRmllbGROYW1lXSk7XG4gICAgLy8gUmV0dXJucyB0cnVlIGZvciBub24tbm9ybWFsaXplZCBTdG9yZU9iamVjdHMgYW5kIG5vbi1kYW5nbGluZ1xuICAgIC8vIFJlZmVyZW5jZXMsIGluZGljYXRpbmcgdGhhdCByZWFkRmllbGQobmFtZSwgb2JqT3JSZWYpIGhhcyBhIGNoYW5jZSBvZlxuICAgIC8vIHdvcmtpbmcuIFVzZWZ1bCBmb3IgZmlsdGVyaW5nIG91dCBkYW5nbGluZyByZWZlcmVuY2VzIGZyb20gbGlzdHMuXG4gICAgY2FuUmVhZCA9IChvYmpPclJlZikgPT4ge1xuICAgICAgICByZXR1cm4gaXNSZWZlcmVuY2Uob2JqT3JSZWYpID9cbiAgICAgICAgICAgIHRoaXMuaGFzKG9iak9yUmVmLl9fcmVmKVxuICAgICAgICAgICAgOiB0eXBlb2Ygb2JqT3JSZWYgPT09IFwib2JqZWN0XCI7XG4gICAgfTtcbiAgICAvLyBCb3VuZCBmdW5jdGlvbiB0aGF0IGNvbnZlcnRzIGFuIGlkIG9yIGFuIG9iamVjdCB3aXRoIGEgX190eXBlbmFtZSBhbmRcbiAgICAvLyBwcmltYXJ5IGtleSBmaWVsZHMgdG8gYSBSZWZlcmVuY2Ugb2JqZWN0LiBJZiBjYWxsZWQgd2l0aCBhIFJlZmVyZW5jZSBvYmplY3QsXG4gICAgLy8gdGhhdCBzYW1lIFJlZmVyZW5jZSBvYmplY3QgaXMgcmV0dXJuZWQuIFBhc3MgdHJ1ZSBmb3IgbWVyZ2VJbnRvU3RvcmUgdG8gcGVyc2lzdFxuICAgIC8vIGFuIG9iamVjdCBpbnRvIHRoZSBzdG9yZS5cbiAgICB0b1JlZmVyZW5jZSA9IChvYmpPcklkT3JSZWYsIG1lcmdlSW50b1N0b3JlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqT3JJZE9yUmVmID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVJlZmVyZW5jZShvYmpPcklkT3JSZWYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlZmVyZW5jZShvYmpPcklkT3JSZWYpKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqT3JJZE9yUmVmO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtpZF0gPSB0aGlzLnBvbGljaWVzLmlkZW50aWZ5KG9iak9ySWRPclJlZik7XG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgY29uc3QgcmVmID0gbWFrZVJlZmVyZW5jZShpZCk7XG4gICAgICAgICAgICBpZiAobWVyZ2VJbnRvU3RvcmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lcmdlKGlkLCBvYmpPcklkT3JSZWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlZjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZ2V0IHN1cHBvcnRzUmVzdWx0Q2FjaGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JvdXAuY2FjaGluZztcbiAgICB9XG59XG4vLyBBIHNpbmdsZSBDYWNoZUdyb3VwIHJlcHJlc2VudHMgYSBzZXQgb2Ygb25lIG9yIG1vcmUgRW50aXR5U3RvcmUgb2JqZWN0cyxcbi8vIHR5cGljYWxseSB0aGUgUm9vdCBzdG9yZSBpbiBhIENhY2hlR3JvdXAgYnkgaXRzZWxmLCBhbmQgYWxsIGFjdGl2ZSBMYXllclxuLy8gc3RvcmVzIGluIGEgZ3JvdXAgdG9nZXRoZXIuIEEgc2luZ2xlIEVudGl0eVN0b3JlIG9iamVjdCBiZWxvbmdzIHRvIG9ubHlcbi8vIG9uZSBDYWNoZUdyb3VwLCBzdG9yZS5ncm91cC4gVGhlIENhY2hlR3JvdXAgaXMgcmVzcG9uc2libGUgZm9yIHRyYWNraW5nXG4vLyBkZXBlbmRlbmNpZXMsIHNvIHN0b3JlLmdyb3VwIGlzIGhlbHBmdWwgZm9yIGdlbmVyYXRpbmcgdW5pcXVlIGtleXMgZm9yXG4vLyBjYWNoZWQgcmVzdWx0cyB0aGF0IG5lZWQgdG8gYmUgaW52YWxpZGF0ZWQgd2hlbi9pZiB0aG9zZSBkZXBlbmRlbmNpZXNcbi8vIGNoYW5nZS4gSWYgd2UgdXNlZCB0aGUgRW50aXR5U3RvcmUgb2JqZWN0cyB0aGVtc2VsdmVzIGFzIGNhY2hlIGtleXMgKHRoYXRcbi8vIGlzLCBzdG9yZSByYXRoZXIgdGhhbiBzdG9yZS5ncm91cCksIHRoZSBjYWNoZSB3b3VsZCBiZWNvbWUgdW5uZWNlc3NhcmlseVxuLy8gZnJhZ21lbnRlZCBieSBhbGwgdGhlIGRpZmZlcmVudCBMYXllciBvYmplY3RzLiBJbnN0ZWFkLCB0aGUgQ2FjaGVHcm91cFxuLy8gYXBwcm9hY2ggYWxsb3dzIGFsbCBvcHRpbWlzdGljIExheWVyIG9iamVjdHMgaW4gdGhlIHNhbWUgbGlua2VkIGxpc3QgdG9cbi8vIGJlbG9uZyB0byBvbmUgQ2FjaGVHcm91cCwgd2l0aCB0aGUgbm9uLW9wdGltaXN0aWMgUm9vdCBvYmplY3QgYmVsb25naW5nXG4vLyB0byBhbm90aGVyIENhY2hlR3JvdXAsIGFsbG93aW5nIHJlc3VsdENhY2hpbmcgZGVwZW5kZW5jaWVzIHRvIGJlIHRyYWNrZWRcbi8vIHNlcGFyYXRlbHkgZm9yIG9wdGltaXN0aWMgYW5kIG5vbi1vcHRpbWlzdGljIGVudGl0eSBkYXRhLlxuY2xhc3MgQ2FjaGVHcm91cCB7XG4gICAgY2FjaGluZztcbiAgICBwYXJlbnQ7XG4gICAgZCA9IG51bGw7XG4gICAgLy8gVXNlZCBieSB0aGUgRW50aXR5U3RvcmUjbWFrZUNhY2hlS2V5IG1ldGhvZCB0byBjb21wdXRlIGNhY2hlIGtleXNcbiAgICAvLyBzcGVjaWZpYyB0byB0aGlzIENhY2hlR3JvdXAuXG4gICAga2V5TWFrZXI7XG4gICAgY29uc3RydWN0b3IoY2FjaGluZywgcGFyZW50ID0gbnVsbCkge1xuICAgICAgICB0aGlzLmNhY2hpbmcgPSBjYWNoaW5nO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5yZXNldENhY2hpbmcoKTtcbiAgICB9XG4gICAgcmVzZXRDYWNoaW5nKCkge1xuICAgICAgICB0aGlzLmQgPSB0aGlzLmNhY2hpbmcgPyBkZXAoKSA6IG51bGw7XG4gICAgICAgIHRoaXMua2V5TWFrZXIgPSBuZXcgVHJpZSgpO1xuICAgIH1cbiAgICBkZXBlbmQoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSkge1xuICAgICAgICBpZiAodGhpcy5kKSB7XG4gICAgICAgICAgICB0aGlzLmQobWFrZURlcEtleShkYXRhSWQsIHN0b3JlRmllbGROYW1lKSk7XG4gICAgICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgIGlmIChmaWVsZE5hbWUgIT09IHN0b3JlRmllbGROYW1lKSB7XG4gICAgICAgICAgICAgICAgLy8gRmllbGRzIHdpdGggYXJndW1lbnRzIHRoYXQgY29udHJpYnV0ZSBleHRyYSBpZGVudGlmeWluZ1xuICAgICAgICAgICAgICAgIC8vIGluZm9ybWF0aW9uIHRvIHRoZSBmaWVsZE5hbWUgKHRodXMgZm9ybWluZyB0aGUgc3RvcmVGaWVsZE5hbWUpXG4gICAgICAgICAgICAgICAgLy8gZGVwZW5kIG5vdCBvbmx5IG9uIHRoZSBmdWxsIHN0b3JlRmllbGROYW1lIGJ1dCBhbHNvIG9uIHRoZVxuICAgICAgICAgICAgICAgIC8vIHNob3J0IGZpZWxkTmFtZSwgc28gdGhlIGZpZWxkIGNhbiBiZSBpbnZhbGlkYXRlZCB1c2luZyBlaXRoZXJcbiAgICAgICAgICAgICAgICAvLyBsZXZlbCBvZiBzcGVjaWZpY2l0eS5cbiAgICAgICAgICAgICAgICB0aGlzLmQobWFrZURlcEtleShkYXRhSWQsIGZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGVwZW5kKGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRpcnR5KGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZCkge1xuICAgICAgICAgICAgdGhpcy5kLmRpcnR5KG1ha2VEZXBLZXkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSksIFxuICAgICAgICAgICAgLy8gV2hlbiBzdG9yZUZpZWxkTmFtZSA9PT0gXCJfX2V4aXN0c1wiLCB0aGF0IG1lYW5zIHRoZSBlbnRpdHkgaWRlbnRpZmllZFxuICAgICAgICAgICAgLy8gYnkgZGF0YUlkIGhhcyBlaXRoZXIgZGlzYXBwZWFyZWQgZnJvbSB0aGUgY2FjaGUgb3Igd2FzIG5ld2x5IGFkZGVkLFxuICAgICAgICAgICAgLy8gc28gdGhlIHJlc3VsdCBjYWNoaW5nIHN5c3RlbSB3b3VsZCBkbyB3ZWxsIHRvIFwiZm9yZ2V0IGV2ZXJ5dGhpbmcgaXRcbiAgICAgICAgICAgIC8vIGtub3dzXCIgYWJvdXQgdGhhdCBvYmplY3QuIFRvIGFjaGlldmUgdGhhdCBraW5kIG9mIGludmFsaWRhdGlvbiwgd2VcbiAgICAgICAgICAgIC8vIG5vdCBvbmx5IGRpcnR5IHRoZSBhc3NvY2lhdGVkIHJlc3VsdCBjYWNoZSBlbnRyeSwgYnV0IGFsc28gcmVtb3ZlIGl0XG4gICAgICAgICAgICAvLyBjb21wbGV0ZWx5IGZyb20gdGhlIGRlcGVuZGVuY3kgZ3JhcGguIEZvciB0aGUgb3B0aW1pc20gaW1wbGVtZW50YXRpb25cbiAgICAgICAgICAgIC8vIGRldGFpbHMsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmVuamFtbi9vcHRpbWlzbS9wdWxsLzE5NS5cbiAgICAgICAgICAgIHN0b3JlRmllbGROYW1lID09PSBcIl9fZXhpc3RzXCIgPyBcImZvcmdldFwiIDogXCJzZXREaXJ0eVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIG1ha2VEZXBLZXkoZGF0YUlkLCBzdG9yZUZpZWxkTmFtZSkge1xuICAgIC8vIFNpbmNlIGZpZWxkIG5hbWVzIGNhbm5vdCBoYXZlICcjJyBjaGFyYWN0ZXJzIGluIHRoZW0sIHRoaXMgbWV0aG9kXG4gICAgLy8gb2Ygam9pbmluZyB0aGUgZmllbGQgbmFtZSBhbmQgdGhlIElEIHNob3VsZCBiZSB1bmFtYmlndW91cywgYW5kIG11Y2hcbiAgICAvLyBjaGVhcGVyIHRoYW4gSlNPTi5zdHJpbmdpZnkoW2RhdGFJZCwgZmllbGROYW1lXSkuXG4gICAgcmV0dXJuIHN0b3JlRmllbGROYW1lICsgXCIjXCIgKyBkYXRhSWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVEZXBlbmRPbkV4aXN0ZW5jZU9mRW50aXR5KHN0b3JlLCBlbnRpdHlJZCkge1xuICAgIGlmIChzdXBwb3J0c1Jlc3VsdENhY2hpbmcoc3RvcmUpKSB7XG4gICAgICAgIC8vIFdlIHVzZSB0aGlzIHBzZXVkby1maWVsZCBfX2V4aXN0cyBlbHNld2hlcmUgaW4gdGhlIEVudGl0eVN0b3JlIGNvZGUgdG9cbiAgICAgICAgLy8gcmVwcmVzZW50IGNoYW5nZXMgaW4gdGhlIGV4aXN0ZW5jZSBvZiB0aGUgZW50aXR5IG9iamVjdCBpZGVudGlmaWVkIGJ5XG4gICAgICAgIC8vIGVudGl0eUlkLiBUaGlzIGRlcGVuZGVuY3kgZ2V0cyByZWxpYWJseSBkaXJ0aWVkIHdoZW5ldmVyIGFuIG9iamVjdCB3aXRoXG4gICAgICAgIC8vIHRoaXMgSUQgaXMgZGVsZXRlZCAob3IgbmV3bHkgY3JlYXRlZCkgd2l0aGluIHRoaXMgZ3JvdXAsIHNvIGFueSByZXN1bHRcbiAgICAgICAgLy8gY2FjaGUgZW50cmllcyAoZm9yIGV4YW1wbGUsIFN0b3JlUmVhZGVyI2V4ZWN1dGVTZWxlY3Rpb25TZXQgcmVzdWx0cykgdGhhdFxuICAgICAgICAvLyBkZXBlbmQgb24gX19leGlzdHMgZm9yIHRoaXMgZW50aXR5SWQgd2lsbCBnZXQgZGlydGllZCBhcyB3ZWxsLCBsZWFkaW5nIHRvXG4gICAgICAgIC8vIHRoZSBldmVudHVhbCByZWNvbXB1dGF0aW9uIChpbnN0ZWFkIG9mIHJldXNlKSBvZiB0aG9zZSByZXN1bHQgb2JqZWN0cyB0aGVcbiAgICAgICAgLy8gbmV4dCB0aW1lIHNvbWVvbmUgcmVhZHMgdGhlbSBmcm9tIHRoZSBjYWNoZS5cbiAgICAgICAgc3RvcmUuZ3JvdXAuZGVwZW5kKGVudGl0eUlkLCBcIl9fZXhpc3RzXCIpO1xuICAgIH1cbn1cbmNsYXNzIFJvb3QgZXh0ZW5kcyBFbnRpdHlTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoeyBwb2xpY2llcywgcmVzdWx0Q2FjaGluZyA9IHRydWUsIHNlZWQsIH0pIHtcbiAgICAgICAgc3VwZXIocG9saWNpZXMsIG5ldyBDYWNoZUdyb3VwKHJlc3VsdENhY2hpbmcpKTtcbiAgICAgICAgaWYgKHNlZWQpXG4gICAgICAgICAgICB0aGlzLnJlcGxhY2Uoc2VlZCk7XG4gICAgfVxuICAgIHN0dW1wID0gbmV3IFN0dW1wKHRoaXMpO1xuICAgIGFkZExheWVyKGxheWVySWQsIHJlcGxheSkge1xuICAgICAgICAvLyBBZGRpbmcgYW4gb3B0aW1pc3RpYyBMYXllciBvbiB0b3Agb2YgdGhlIFJvb3QgYWN0dWFsbHkgYWRkcyB0aGUgTGF5ZXJcbiAgICAgICAgLy8gb24gdG9wIG9mIHRoZSBTdHVtcCwgc28gdGhlIFN0dW1wIGFsd2F5cyBjb21lcyBiZXR3ZWVuIHRoZSBSb290IGFuZFxuICAgICAgICAvLyBhbnkgTGF5ZXIgb2JqZWN0cyB0aGF0IHdlJ3ZlIGFkZGVkLlxuICAgICAgICByZXR1cm4gdGhpcy5zdHVtcC5hZGRMYXllcihsYXllcklkLCByZXBsYXkpO1xuICAgIH1cbiAgICByZW1vdmVMYXllcigpIHtcbiAgICAgICAgLy8gTmV2ZXIgcmVtb3ZlIHRoZSByb290IGxheWVyLlxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc3RvcmFnZVRyaWUgPSBuZXcgVHJpZSgpO1xuICAgIGdldFN0b3JhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VUcmllLmxvb2t1cEFycmF5KGFyZ3VtZW50cyk7XG4gICAgfVxufVxuRW50aXR5U3RvcmUuUm9vdCA9IFJvb3Q7XG4vLyBOb3QgZXhwb3J0ZWQsIHNpbmNlIGFsbCBMYXllciBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYnkgdGhlIGFkZExheWVyIG1ldGhvZFxuLy8gb2YgdGhlIEVudGl0eVN0b3JlLlJvb3QgY2xhc3MuXG5jbGFzcyBMYXllciBleHRlbmRzIEVudGl0eVN0b3JlIHtcbiAgICBpZDtcbiAgICBwYXJlbnQ7XG4gICAgcmVwbGF5O1xuICAgIGdyb3VwO1xuICAgIGNvbnN0cnVjdG9yKGlkLCBwYXJlbnQsIHJlcGxheSwgZ3JvdXApIHtcbiAgICAgICAgc3VwZXIocGFyZW50LnBvbGljaWVzLCBncm91cCk7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMucmVwbGF5ID0gcmVwbGF5O1xuICAgICAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XG4gICAgICAgIHJlcGxheSh0aGlzKTtcbiAgICB9XG4gICAgYWRkTGF5ZXIobGF5ZXJJZCwgcmVwbGF5KSB7XG4gICAgICAgIHJldHVybiBuZXcgTGF5ZXIobGF5ZXJJZCwgdGhpcywgcmVwbGF5LCB0aGlzLmdyb3VwKTtcbiAgICB9XG4gICAgcmVtb3ZlTGF5ZXIobGF5ZXJJZCkge1xuICAgICAgICAvLyBSZW1vdmUgYWxsIGluc3RhbmNlcyBvZiB0aGUgZ2l2ZW4gaWQsIG5vdCBqdXN0IHRoZSBmaXJzdCBvbmUuXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucGFyZW50LnJlbW92ZUxheWVyKGxheWVySWQpO1xuICAgICAgICBpZiAobGF5ZXJJZCA9PT0gdGhpcy5pZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ3JvdXAuY2FjaGluZykge1xuICAgICAgICAgICAgICAgIC8vIERpcnR5IGV2ZXJ5IElEIHdlJ3JlIHJlbW92aW5nLiBUZWNobmljYWxseSB3ZSBtaWdodCBiZSBhYmxlIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gZGlydHlpbmcgZmllbGRzIHRoYXQgaGF2ZSB2YWx1ZXMgaW4gaGlnaGVyIGxheWVycywgYnV0IHdlIGRvbid0IGhhdmVcbiAgICAgICAgICAgICAgICAvLyBlYXN5IGFjY2VzcyB0byBoaWdoZXIgbGF5ZXJzIGhlcmUsIGFuZCB3ZSdyZSBhYm91dCB0byByZWNyZWF0ZSB0aG9zZVxuICAgICAgICAgICAgICAgIC8vIGxheWVycyBhbnl3YXkgKHNlZSBwYXJlbnQuYWRkTGF5ZXIgYmVsb3cpLlxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkuZm9yRWFjaCgoZGF0YUlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG93blN0b3JlT2JqZWN0ID0gdGhpcy5kYXRhW2RhdGFJZF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudFN0b3JlT2JqZWN0ID0gcGFyZW50W1wibG9va3VwXCJdKGRhdGFJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyZW50U3RvcmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBTdG9yZU9iamVjdCBpZGVudGlmaWVkIGJ5IGRhdGFJZCB3YXMgZGVmaW5lZCBpbiB0aGlzIGxheWVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgd2lsbCBiZSB1bmRlZmluZWQgaW4gdGhlIHBhcmVudCBsYXllciwgc28gd2UgY2FuIGRlbGV0ZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdob2xlIGVudGl0eSB1c2luZyB0aGlzLmRlbGV0ZShkYXRhSWQpLiBTaW5jZSB3ZSdyZSBhYm91dCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhyb3cgdGhpcyBsYXllciBhd2F5LCB0aGUgb25seSBnb2FsIG9mIHRoaXMgZGVsZXRpb24gaXMgdG8gZGlydHlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZW1vdmVkIGZpZWxkcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlKGRhdGFJZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIW93blN0b3JlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGxheWVyIGhhZCBhbiBlbnRyeSBmb3IgZGF0YUlkIGJ1dCBpdCB3YXMgdW5kZWZpbmVkLCB3aGljaFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVhbnMgdGhlIGVudGl0eSB3YXMgZGVsZXRlZCBpbiB0aGlzIGxheWVyLCBhbmQgaXQncyBhYm91dCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVjb21lIHVuZGVsZXRlZCB3aGVuIHdlIHJlbW92ZSB0aGlzIGxheWVyLCBzbyB3ZSBuZWVkIHRvIGRpcnR5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGwgZmllbGRzIHRoYXQgYXJlIGFib3V0IHRvIGJlIHJlZXhwb3NlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXAuZGlydHkoZGF0YUlkLCBcIl9fZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyZW50U3RvcmVPYmplY3QpLmZvckVhY2goKHN0b3JlRmllbGROYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG93blN0b3JlT2JqZWN0ICE9PSBwYXJlbnRTdG9yZU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgb3duU3RvcmVPYmplY3QgaXMgbm90IGV4YWN0bHkgdGhlIHNhbWUgYXMgcGFyZW50U3RvcmVPYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXJ0eSBhbnkgZmllbGRzIHdob3NlIHZhbHVlcyB3aWxsIGNoYW5nZSBhcyBhIHJlc3VsdCBvZiB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmFsLlxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMob3duU3RvcmVPYmplY3QpLmZvckVhY2goKHN0b3JlRmllbGROYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcXVhbChvd25TdG9yZU9iamVjdFtzdG9yZUZpZWxkTmFtZV0sIHBhcmVudFN0b3JlT2JqZWN0W3N0b3JlRmllbGROYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBObyBjaGFuZ2VzIGFyZSBuZWNlc3NhcnkgaWYgdGhlIHBhcmVudCBjaGFpbiByZW1haW5zIGlkZW50aWNhbC5cbiAgICAgICAgaWYgKHBhcmVudCA9PT0gdGhpcy5wYXJlbnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgLy8gUmVjcmVhdGUgdGhpcyBsYXllciBvbiB0b3Agb2YgdGhlIG5ldyBwYXJlbnQuXG4gICAgICAgIHJldHVybiBwYXJlbnQuYWRkTGF5ZXIodGhpcy5pZCwgdGhpcy5yZXBsYXkpO1xuICAgIH1cbiAgICB0b09iamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMucGFyZW50LnRvT2JqZWN0KCksXG4gICAgICAgICAgICAuLi50aGlzLmRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZpbmRDaGlsZFJlZklkcyhkYXRhSWQpIHtcbiAgICAgICAgY29uc3QgZnJvbVBhcmVudCA9IHRoaXMucGFyZW50LmZpbmRDaGlsZFJlZklkcyhkYXRhSWQpO1xuICAgICAgICByZXR1cm4gaGFzT3duLmNhbGwodGhpcy5kYXRhLCBkYXRhSWQpID9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5mcm9tUGFyZW50LFxuICAgICAgICAgICAgICAgIC4uLnN1cGVyLmZpbmRDaGlsZFJlZklkcyhkYXRhSWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBmcm9tUGFyZW50O1xuICAgIH1cbiAgICBnZXRTdG9yYWdlKC4uLmFyZ3MpIHtcbiAgICAgICAgbGV0IHAgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgd2hpbGUgKHAucGFyZW50KVxuICAgICAgICAgICAgcCA9IHAucGFyZW50O1xuICAgICAgICByZXR1cm4gcC5nZXRTdG9yYWdlKC4uLmFyZ3MpO1xuICAgIH1cbn1cbi8vIFJlcHJlc2VudHMgYSBMYXllciBwZXJtYW5lbnRseSBpbnN0YWxsZWQganVzdCBhYm92ZSB0aGUgUm9vdCwgd2hpY2ggYWxsb3dzXG4vLyByZWFkaW5nIG9wdGltaXN0aWNhbGx5IChhbmQgcmVnaXN0ZXJpbmcgb3B0aW1pc3RpYyBkZXBlbmRlbmNpZXMpIGV2ZW4gd2hlblxuLy8gbm8gb3B0aW1pc3RpYyBsYXllcnMgYXJlIGN1cnJlbnRseSBhY3RpdmUuIFRoZSBzdHVtcC5ncm91cCBDYWNoZUdyb3VwIG9iamVjdFxuLy8gaXMgc2hhcmVkIGJ5IGFueS9hbGwgTGF5ZXIgb2JqZWN0cyBhZGRlZCBvbiB0b3Agb2YgdGhlIFN0dW1wLlxuY2xhc3MgU3R1bXAgZXh0ZW5kcyBMYXllciB7XG4gICAgY29uc3RydWN0b3Iocm9vdCkge1xuICAgICAgICBzdXBlcihcIkVudGl0eVN0b3JlLlN0dW1wXCIsIHJvb3QsICgpID0+IHsgfSwgbmV3IENhY2hlR3JvdXAocm9vdC5ncm91cC5jYWNoaW5nLCByb290Lmdyb3VwKSk7XG4gICAgfVxuICAgIHJlbW92ZUxheWVyKCkge1xuICAgICAgICAvLyBOZXZlciByZW1vdmUgdGhlIFN0dW1wIGxheWVyLlxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgbWVyZ2Uob2xkZXIsIG5ld2VyKSB7XG4gICAgICAgIC8vIFdlIG5ldmVyIHdhbnQgdG8gd3JpdGUgYW55IGRhdGEgaW50byB0aGUgU3R1bXAsIHNvIHdlIGZvcndhcmQgYW55IG1lcmdlXG4gICAgICAgIC8vIGNhbGxzIHRvIHRoZSBSb290IGluc3RlYWQuIEFub3RoZXIgb3B0aW9uIGhlcmUgd291bGQgYmUgdG8gdGhyb3cgYW5cbiAgICAgICAgLy8gZXhjZXB0aW9uLCBidXQgdGhlIHRvUmVmZXJlbmNlKG9iamVjdCwgdHJ1ZSkgZnVuY3Rpb24gY2FuIHNvbWV0aW1lc1xuICAgICAgICAvLyB0cmlnZ2VyIFN0dW1wIHdyaXRlcyAod2hpY2ggdXNlZCB0byBiZSBSb290IHdyaXRlcywgYmVmb3JlIHRoZSBTdHVtcFxuICAgICAgICAvLyBjb25jZXB0IHdhcyBpbnRyb2R1Y2VkKS5cbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lm1lcmdlKG9sZGVyLCBuZXdlcik7XG4gICAgfVxufVxuZnVuY3Rpb24gc3RvcmVPYmplY3RSZWNvbmNpbGVyKGV4aXN0aW5nT2JqZWN0LCBpbmNvbWluZ09iamVjdCwgcHJvcGVydHkpIHtcbiAgICBjb25zdCBleGlzdGluZ1ZhbHVlID0gZXhpc3RpbmdPYmplY3RbcHJvcGVydHldO1xuICAgIGNvbnN0IGluY29taW5nVmFsdWUgPSBpbmNvbWluZ09iamVjdFtwcm9wZXJ0eV07XG4gICAgLy8gV2hlcmV2ZXIgdGhlcmUgaXMgYSBrZXkgY29sbGlzaW9uLCBwcmVmZXIgdGhlIGluY29taW5nIHZhbHVlLCB1bmxlc3NcbiAgICAvLyBpdCBpcyBkZWVwbHkgZXF1YWwgdG8gdGhlIGV4aXN0aW5nIHZhbHVlLiBJdCdzIHdvcnRoIGNoZWNraW5nIGRlZXBcbiAgICAvLyBlcXVhbGl0eSBoZXJlIChldmVuIHRob3VnaCBibGluZGx5IHJldHVybmluZyBpbmNvbWluZyB3b3VsZCBiZVxuICAgIC8vIGxvZ2ljYWxseSBjb3JyZWN0KSBiZWNhdXNlIHByZXNlcnZpbmcgdGhlIHJlZmVyZW50aWFsIGlkZW50aXR5IG9mXG4gICAgLy8gZXhpc3RpbmcgZGF0YSBjYW4gcHJldmVudCBuZWVkbGVzcyByZXJlYWRpbmcgYW5kIHJlcmVuZGVyaW5nLlxuICAgIHJldHVybiBlcXVhbChleGlzdGluZ1ZhbHVlLCBpbmNvbWluZ1ZhbHVlKSA/IGV4aXN0aW5nVmFsdWUgOiBpbmNvbWluZ1ZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN1cHBvcnRzUmVzdWx0Q2FjaGluZyhzdG9yZSkge1xuICAgIC8vIFdoZW4gcmVzdWx0IGNhY2hpbmcgaXMgZGlzYWJsZWQsIHN0b3JlLmRlcGVuZCB3aWxsIGJlIG51bGwuXG4gICAgcmV0dXJuICEhKHN0b3JlICYmIHN0b3JlLnN1cHBvcnRzUmVzdWx0Q2FjaGluZyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnRpdHlTdG9yZS5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgS2luZCB9IGZyb20gXCJncmFwaHFsXCI7XG5pbXBvcnQgeyBTbG90IH0gZnJvbSBcIm9wdGltaXNtXCI7XG5pbXBvcnQgeyBfX0RFVl9fIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9lbnZpcm9ubWVudFwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnZhcmlhbnRcIjtcbi8vIENvbnRleHR1YWwgc2xvdCB0aGF0IGFsbG93cyB1cyB0byBkaXNhYmxlIGFjY2Vzc29yIHdhcm5pbmdzIG9uIGZpZWxkcyB3aGVuIGluXG4vLyBtaWdyYXRlIG1vZGUuXG4vKipcbiogQGludGVybmFsXG4qIFxuKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4qL1xuZXhwb3J0IGNvbnN0IGRpc2FibGVXYXJuaW5nc1Nsb3QgPSBuZXcgU2xvdCgpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50TWFza01vZGUoZnJhZ21lbnQpIHtcbiAgICBjb25zdCBkaXJlY3RpdmUgPSBmcmFnbWVudC5kaXJlY3RpdmVzPy5maW5kKCh7IG5hbWUgfSkgPT4gbmFtZS52YWx1ZSA9PT0gXCJ1bm1hc2tcIik7XG4gICAgaWYgKCFkaXJlY3RpdmUpIHtcbiAgICAgICAgcmV0dXJuIFwibWFza1wiO1xuICAgIH1cbiAgICBjb25zdCBtb2RlQXJnID0gZGlyZWN0aXZlLmFyZ3VtZW50cz8uZmluZCgoeyBuYW1lIH0pID0+IG5hbWUudmFsdWUgPT09IFwibW9kZVwiKTtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgICBpZiAobW9kZUFyZykge1xuICAgICAgICAgICAgaWYgKG1vZGVBcmcudmFsdWUua2luZCA9PT0gS2luZC5WQVJJQUJMRSkge1xuICAgICAgICAgICAgICAgIF9fREVWX18gJiYgaW52YXJpYW50Lndhcm4oNDQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZUFyZy52YWx1ZS5raW5kICE9PSBLaW5kLlNUUklORykge1xuICAgICAgICAgICAgICAgIF9fREVWX18gJiYgaW52YXJpYW50Lndhcm4oNDUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZUFyZy52YWx1ZS52YWx1ZSAhPT0gXCJtaWdyYXRlXCIpIHtcbiAgICAgICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKDQ2LCBtb2RlQXJnLnZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobW9kZUFyZyAmJlxuICAgICAgICBcInZhbHVlXCIgaW4gbW9kZUFyZy52YWx1ZSAmJlxuICAgICAgICBtb2RlQXJnLnZhbHVlLnZhbHVlID09PSBcIm1pZ3JhdGVcIikge1xuICAgICAgICByZXR1cm4gXCJtaWdyYXRlXCI7XG4gICAgfVxuICAgIHJldHVybiBcInVubWFza1wiO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwXG4iLAogICAgImltcG9ydCB7IEtpbmQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgX19ERVZfXyB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZW52aXJvbm1lbnRcIjtcbmltcG9ydCB7IG1heWJlRGVlcEZyZWV6ZSwgcmVzdWx0S2V5TmFtZUZyb21GaWVsZCwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuaW1wb3J0IHsgZGlzYWJsZVdhcm5pbmdzU2xvdCwgZ2V0RnJhZ21lbnRNYXNrTW9kZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWFza0RlZmluaXRpb24oZGF0YSwgc2VsZWN0aW9uU2V0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGRpc2FibGVXYXJuaW5nc1Nsb3Qud2l0aFZhbHVlKHRydWUsICgpID0+IHtcbiAgICAgICAgY29uc3QgbWFza2VkID0gbWFza1NlbGVjdGlvblNldChkYXRhLCBzZWxlY3Rpb25TZXQsIGNvbnRleHQsIGZhbHNlKTtcbiAgICAgICAgaWYgKE9iamVjdC5pc0Zyb3plbihkYXRhKSkge1xuICAgICAgICAgICAgbWF5YmVEZWVwRnJlZXplKG1hc2tlZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hc2tlZDtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGdldE11dGFibGVUYXJnZXQoZGF0YSwgbXV0YWJsZVRhcmdldHMpIHtcbiAgICBpZiAobXV0YWJsZVRhcmdldHMuaGFzKGRhdGEpKSB7XG4gICAgICAgIHJldHVybiBtdXRhYmxlVGFyZ2V0cy5nZXQoZGF0YSk7XG4gICAgfVxuICAgIGNvbnN0IG11dGFibGVUYXJnZXQgPSBBcnJheS5pc0FycmF5KGRhdGEpID8gW10gOiB7fTtcbiAgICBtdXRhYmxlVGFyZ2V0cy5zZXQoZGF0YSwgbXV0YWJsZVRhcmdldCk7XG4gICAgcmV0dXJuIG11dGFibGVUYXJnZXQ7XG59XG5mdW5jdGlvbiBtYXNrU2VsZWN0aW9uU2V0KGRhdGEsIHNlbGVjdGlvblNldCwgY29udGV4dCwgbWlncmF0aW9uLCBwYXRoKSB7XG4gICAgY29uc3QgeyBrbm93bkNoYW5nZWQgfSA9IGNvbnRleHQ7XG4gICAgY29uc3QgbWVtbyA9IGdldE11dGFibGVUYXJnZXQoZGF0YSwgY29udGV4dC5tdXRhYmxlVGFyZ2V0cyk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGl0ZW1dIG9mIEFycmF5LmZyb20oZGF0YS5lbnRyaWVzKCkpKSB7XG4gICAgICAgICAgICBpZiAoaXRlbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG1lbW9baW5kZXhdID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1hc2tlZCA9IG1hc2tTZWxlY3Rpb25TZXQoaXRlbSwgc2VsZWN0aW9uU2V0LCBjb250ZXh0LCBtaWdyYXRpb24sIF9fREVWX18gPyBgJHtwYXRoIHx8IFwiXCJ9WyR7aW5kZXh9XWAgOiB2b2lkIDApO1xuICAgICAgICAgICAgaWYgKGtub3duQ2hhbmdlZC5oYXMobWFza2VkKSkge1xuICAgICAgICAgICAgICAgIGtub3duQ2hhbmdlZC5hZGQobWVtbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZW1vW2luZGV4XSA9IG1hc2tlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga25vd25DaGFuZ2VkLmhhcyhtZW1vKSA/IG1lbW8gOiBkYXRhO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNlbGVjdGlvbiBvZiBzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucykge1xuICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgIC8vIHdlIGxhdGVyIHdhbnQgdG8gYWRkIGFjZXNzb3Igd2FybmluZ3MgdG8gdGhlIGZpbmFsIHJlc3VsdFxuICAgICAgICAvLyBzbyB3ZSBuZWVkIGEgbmV3IG9iamVjdCB0byBhZGQgdGhlIGFjY2Vzc29yIHdhcm5pbmcgdG9cbiAgICAgICAgaWYgKG1pZ3JhdGlvbikge1xuICAgICAgICAgICAga25vd25DaGFuZ2VkLmFkZChtZW1vKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0aW9uLmtpbmQgPT09IEtpbmQuRklFTEQpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleU5hbWUgPSByZXN1bHRLZXlOYW1lRnJvbUZpZWxkKHNlbGVjdGlvbik7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFNlbGVjdGlvblNldCA9IHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQ7XG4gICAgICAgICAgICB2YWx1ZSA9IG1lbW9ba2V5TmFtZV0gfHwgZGF0YVtrZXlOYW1lXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hpbGRTZWxlY3Rpb25TZXQgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXNrZWQgPSBtYXNrU2VsZWN0aW9uU2V0KGRhdGFba2V5TmFtZV0sIGNoaWxkU2VsZWN0aW9uU2V0LCBjb250ZXh0LCBtaWdyYXRpb24sIF9fREVWX18gPyBgJHtwYXRoIHx8IFwiXCJ9LiR7a2V5TmFtZX1gIDogdm9pZCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoa25vd25DaGFuZ2VkLmhhcyhtYXNrZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbWFza2VkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghX19ERVZfXykge1xuICAgICAgICAgICAgICAgIG1lbW9ba2V5TmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pZ3JhdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICBrZXlOYW1lICE9PSBcIl9fdHlwZW5hbWVcIiAmJlxuICAgICAgICAgICAgICAgICAgICAvLyBlaXRoZXIgdGhlIGZpZWxkIGlzIG5vdCBwcmVzZW50IGluIHRoZSBtZW1vIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAvLyBvciBpdCBoYXMgYSBgZ2V0YCBkZXNjcmlwdG9yLCBub3QgYSBgdmFsdWVgIGRlc2NyaXB0b3JcbiAgICAgICAgICAgICAgICAgICAgLy8gPT4gaXQgaXMgYSB3YXJuaW5nIGFjY2Vzc29yIGFuZCB3ZSBjYW4gb3ZlcndyaXRlIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHdpdGggYW5vdGhlciBhY2Nlc3NvclxuICAgICAgICAgICAgICAgICAgICAhT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtZW1vLCBrZXlOYW1lKT8udmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1lbW8sIGtleU5hbWUsIGdldEFjY2Vzc29yV2FybmluZ0Rlc2NyaXB0b3Ioa2V5TmFtZSwgdmFsdWUsIHBhdGggfHwgXCJcIiwgY29udGV4dC5vcGVyYXRpb25OYW1lLCBjb250ZXh0Lm9wZXJhdGlvblR5cGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZW1vW2tleU5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBtZW1vW2tleU5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rpb24ua2luZCA9PT0gS2luZC5JTkxJTkVfRlJBR01FTlQgJiZcbiAgICAgICAgICAgICghc2VsZWN0aW9uLnR5cGVDb25kaXRpb24gfHxcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNhY2hlLmZyYWdtZW50TWF0Y2hlcyhzZWxlY3Rpb24sIGRhdGEuX190eXBlbmFtZSkpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG1hc2tTZWxlY3Rpb25TZXQoZGF0YSwgc2VsZWN0aW9uLnNlbGVjdGlvblNldCwgY29udGV4dCwgbWlncmF0aW9uLCBwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0aW9uLmtpbmQgPT09IEtpbmQuRlJBR01FTlRfU1BSRUFEKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudE5hbWUgPSBzZWxlY3Rpb24ubmFtZS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gY29udGV4dC5mcmFnbWVudE1hcFtmcmFnbWVudE5hbWVdIHx8XG4gICAgICAgICAgICAgICAgKGNvbnRleHQuZnJhZ21lbnRNYXBbZnJhZ21lbnROYW1lXSA9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2FjaGUubG9va3VwRnJhZ21lbnQoZnJhZ21lbnROYW1lKSk7XG4gICAgICAgICAgICBpbnZhcmlhbnQoZnJhZ21lbnQsIDM5LCBmcmFnbWVudE5hbWUpO1xuICAgICAgICAgICAgY29uc3QgbW9kZSA9IGdldEZyYWdtZW50TWFza01vZGUoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChtb2RlICE9PSBcIm1hc2tcIikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbWFza1NlbGVjdGlvblNldChkYXRhLCBmcmFnbWVudC5zZWxlY3Rpb25TZXQsIGNvbnRleHQsIG1vZGUgPT09IFwibWlncmF0ZVwiLCBwYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoa25vd25DaGFuZ2VkLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGtub3duQ2hhbmdlZC5hZGQobWVtbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKFwiX190eXBlbmFtZVwiIGluIGRhdGEgJiYgIShcIl9fdHlwZW5hbWVcIiBpbiBtZW1vKSkge1xuICAgICAgICBtZW1vLl9fdHlwZW5hbWUgPSBkYXRhLl9fdHlwZW5hbWU7XG4gICAgfVxuICAgIC8vIFRoaXMgY2hlY2sgcHJldmVudHMgY2FzZXMgd2hlcmUgbWFza2VkIGZpZWxkcyBtYXkgYWNjaWRlbnRhbGx5IGJlXG4gICAgLy8gcmV0dXJuZWQgYXMgcGFydCBvZiB0aGlzIG9iamVjdCB3aGVuIHRoZSBmcmFnbWVudCBhbHNvIHNlbGVjdHNcbiAgICAvLyBhZGRpdGlvbmFsIGZpZWxkcyBmcm9tIHRoZSBzYW1lIGNoaWxkIHNlbGVjdGlvbi5cbiAgICBpZiAoT2JqZWN0LmtleXMobWVtbykubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGgpIHtcbiAgICAgICAga25vd25DaGFuZ2VkLmFkZChtZW1vKTtcbiAgICB9XG4gICAgcmV0dXJuIGtub3duQ2hhbmdlZC5oYXMobWVtbykgPyBtZW1vIDogZGF0YTtcbn1cbmZ1bmN0aW9uIGdldEFjY2Vzc29yV2FybmluZ0Rlc2NyaXB0b3IoZmllbGROYW1lLCB2YWx1ZSwgcGF0aCwgb3BlcmF0aW9uTmFtZSwgb3BlcmF0aW9uVHlwZSkge1xuICAgIGxldCBnZXRWYWx1ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKGRpc2FibGVXYXJuaW5nc1Nsb3QuZ2V0VmFsdWUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIF9fREVWX18gJiYgaW52YXJpYW50Lndhcm4oNDAsIG9wZXJhdGlvbk5hbWUgP1xuICAgICAgICAgICAgYCR7b3BlcmF0aW9uVHlwZX0gJyR7b3BlcmF0aW9uTmFtZX0nYFxuICAgICAgICAgICAgOiBgYW5vbnltb3VzICR7b3BlcmF0aW9uVHlwZX1gLCBgJHtwYXRofS4ke2ZpZWxkTmFtZX1gLnJlcGxhY2UoL15cXC4vLCBcIlwiKSk7XG4gICAgICAgIGdldFZhbHVlID0gKCkgPT4gdmFsdWU7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRWYWx1ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQobmV3VmFsdWUpIHtcbiAgICAgICAgICAgIGdldFZhbHVlID0gKCkgPT4gbmV3VmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFza0RlZmluaXRpb24uanMubWFwXG4iLAogICAgImltcG9ydCBlcXVhbCBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgS2luZCB9IGZyb20gXCJncmFwaHFsXCI7XG5pbXBvcnQgeyBjcmVhdGVGcmFnbWVudE1hcCwgZ2V0RnJhZ21lbnREZWZpbml0aW9ucywgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuaW1wb3J0IHsgbWFza0RlZmluaXRpb24gfSBmcm9tIFwiLi9tYXNrRGVmaW5pdGlvbi5qc1wiO1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXNrRnJhZ21lbnQoZGF0YSwgZG9jdW1lbnQsIGNhY2hlLCBmcmFnbWVudE5hbWUpIHtcbiAgICBjb25zdCBmcmFnbWVudHMgPSBkb2N1bWVudC5kZWZpbml0aW9ucy5maWx0ZXIoKG5vZGUpID0+IG5vZGUua2luZCA9PT0gS2luZC5GUkFHTUVOVF9ERUZJTklUSU9OKTtcbiAgICBpZiAodHlwZW9mIGZyYWdtZW50TmFtZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpbnZhcmlhbnQoZnJhZ21lbnRzLmxlbmd0aCA9PT0gMSwgNDEsIGZyYWdtZW50cy5sZW5ndGgpO1xuICAgICAgICBmcmFnbWVudE5hbWUgPSBmcmFnbWVudHNbMF0ubmFtZS52YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgZnJhZ21lbnQgPSBmcmFnbWVudHMuZmluZCgoZnJhZ21lbnQpID0+IGZyYWdtZW50Lm5hbWUudmFsdWUgPT09IGZyYWdtZW50TmFtZSk7XG4gICAgaW52YXJpYW50KCEhZnJhZ21lbnQsIDQyLCBmcmFnbWVudE5hbWUpO1xuICAgIGlmIChkYXRhID09IG51bGwpIHtcbiAgICAgICAgLy8gTWFpbnRhaW4gdGhlIG9yaWdpbmFsIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKGVxdWFsKGRhdGEsIHt9KSkge1xuICAgICAgICAvLyBSZXR1cm4gZWFybHkgYW5kIHNraXAgdGhlIG1hc2tpbmcgYWxnb3JpdGhtIGlmIHdlIGRvbid0IGhhdmUgYW55IGRhdGFcbiAgICAgICAgLy8geWV0LiBUaGlzIGNhbiBoYXBwZW4gd2hlbiBjYWNoZS5kaWZmIHJldHVybnMgYW4gZW1wdHkgb2JqZWN0IHdoaWNoIGlzXG4gICAgICAgIC8vIHVzZWQgZnJvbSB3YXRjaEZyYWdtZW50LlxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIG1hc2tEZWZpbml0aW9uKGRhdGEsIGZyYWdtZW50LnNlbGVjdGlvblNldCwge1xuICAgICAgICBvcGVyYXRpb25UeXBlOiBcImZyYWdtZW50XCIsXG4gICAgICAgIG9wZXJhdGlvbk5hbWU6IGZyYWdtZW50Lm5hbWUudmFsdWUsXG4gICAgICAgIGZyYWdtZW50TWFwOiBjcmVhdGVGcmFnbWVudE1hcChnZXRGcmFnbWVudERlZmluaXRpb25zKGRvY3VtZW50KSksXG4gICAgICAgIGNhY2hlLFxuICAgICAgICBtdXRhYmxlVGFyZ2V0czogbmV3IFdlYWtNYXAoKSxcbiAgICAgICAga25vd25DaGFuZ2VkOiBuZXcgV2Vha1NldCgpLFxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFza0ZyYWdtZW50LmpzLm1hcFxuIiwKICAgICJpbXBvcnQgeyBjcmVhdGVGcmFnbWVudE1hcCwgZ2V0RnJhZ21lbnREZWZpbml0aW9ucywgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbiwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuaW1wb3J0IHsgbWFza0RlZmluaXRpb24gfSBmcm9tIFwiLi9tYXNrRGVmaW5pdGlvbi5qc1wiO1xuLyoqXG4qIEBpbnRlcm5hbFxuKiBcbiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXNrT3BlcmF0aW9uKGRhdGEsIGRvY3VtZW50LCBjYWNoZSkge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSBnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvY3VtZW50KTtcbiAgICBpbnZhcmlhbnQoZGVmaW5pdGlvbiwgNDMpO1xuICAgIGlmIChkYXRhID09IG51bGwpIHtcbiAgICAgICAgLy8gTWFpbnRhaW4gdGhlIG9yaWdpbmFsIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIG1hc2tEZWZpbml0aW9uKGRhdGEsIGRlZmluaXRpb24uc2VsZWN0aW9uU2V0LCB7XG4gICAgICAgIG9wZXJhdGlvblR5cGU6IGRlZmluaXRpb24ub3BlcmF0aW9uLFxuICAgICAgICBvcGVyYXRpb25OYW1lOiBkZWZpbml0aW9uLm5hbWU/LnZhbHVlLFxuICAgICAgICBmcmFnbWVudE1hcDogY3JlYXRlRnJhZ21lbnRNYXAoZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhkb2N1bWVudCkpLFxuICAgICAgICBjYWNoZSxcbiAgICAgICAgbXV0YWJsZVRhcmdldHM6IG5ldyBXZWFrTWFwKCksXG4gICAgICAgIGtub3duQ2hhbmdlZDogbmV3IFdlYWtTZXQoKSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hc2tPcGVyYXRpb24uanMubWFwXG4iLAogICAgImltcG9ydCB7IGFyZ3VtZW50c09iamVjdEZyb21GaWVsZCwgRGVlcE1lcmdlciwgaXNBcnJheSwgaXNOb25FbXB0eUFycmF5LCBpc05vbk51bGxPYmplY3QsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbFwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnZhcmlhbnRcIjtcbmltcG9ydCB7IGhhc093biB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbi8vIE1hcHBpbmcgZnJvbSBKU09OLWVuY29kZWQgS2V5U3BlY2lmaWVyIHN0cmluZ3MgdG8gYXNzb2NpYXRlZCBpbmZvcm1hdGlvbi5cbmNvbnN0IHNwZWNpZmllckluZm9DYWNoZSA9IHt9O1xuZnVuY3Rpb24gbG9va3VwU3BlY2lmaWVySW5mbyhzcGVjKSB7XG4gICAgLy8gSXQncyBzYWZlIHRvIGVuY29kZSBLZXlTcGVjaWZpZXIgYXJyYXlzIHdpdGggSlNPTi5zdHJpbmdpZnksIHNpbmNlIHRoZXkncmVcbiAgICAvLyBqdXN0IGFycmF5cyBvZiBzdHJpbmdzIG9yIG5lc3RlZCBLZXlTcGVjaWZpZXIgYXJyYXlzLCBhbmQgdGhlIG9yZGVyIG9mIHRoZVxuICAgIC8vIGFycmF5IGVsZW1lbnRzIGlzIGltcG9ydGFudCAoYW5kIHN1aXRhYmx5IHByZXNlcnZlZCBieSBKU09OLnN0cmluZ2lmeSkuXG4gICAgY29uc3QgY2FjaGVLZXkgPSBKU09OLnN0cmluZ2lmeShzcGVjKTtcbiAgICByZXR1cm4gc3BlY2lmaWVySW5mb0NhY2hlW2NhY2hlS2V5XSB8fCAoc3BlY2lmaWVySW5mb0NhY2hlW2NhY2hlS2V5XSA9IHt9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBrZXlGaWVsZHNGbkZyb21TcGVjaWZpZXIoc3BlY2lmaWVyKSB7XG4gICAgY29uc3QgaW5mbyA9IGxvb2t1cFNwZWNpZmllckluZm8oc3BlY2lmaWVyKTtcbiAgICByZXR1cm4gKGluZm8ua2V5RmllbGRzRm4gfHwgKGluZm8ua2V5RmllbGRzRm4gPSAob2JqZWN0LCBjb250ZXh0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBleHRyYWN0ID0gKGZyb20sIGtleSkgPT4gY29udGV4dC5yZWFkRmllbGQoa2V5LCBmcm9tKTtcbiAgICAgICAgICAgIGNvbnN0IGtleU9iamVjdCA9IChjb250ZXh0LmtleU9iamVjdCA9IGNvbGxlY3RTcGVjaWZpZXJQYXRocyhzcGVjaWZpZXIsIChzY2hlbWFLZXlQYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGV4dHJhY3RlZCA9IGV4dHJhY3RLZXlQYXRoKGNvbnRleHQuc3RvcmVPYmplY3QsIHNjaGVtYUtleVBhdGgsIFxuICAgICAgICAgICAgICAgIC8vIFVzaW5nIGNvbnRleHQucmVhZEZpZWxkIHRvIGV4dHJhY3QgcGF0aHMgZnJvbSBjb250ZXh0LnN0b3JlT2JqZWN0XG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIHRoZSBleHRyYWN0aW9uIHRvIHNlZSB0aHJvdWdoIFJlZmVyZW5jZSBvYmplY3RzIGFuZCByZXNwZWN0XG4gICAgICAgICAgICAgICAgLy8gY3VzdG9tIHJlYWQgZnVuY3Rpb25zLlxuICAgICAgICAgICAgICAgIGV4dHJhY3QpO1xuICAgICAgICAgICAgICAgIGlmIChleHRyYWN0ZWQgPT09IHZvaWQgMCAmJlxuICAgICAgICAgICAgICAgICAgICBvYmplY3QgIT09IGNvbnRleHQuc3RvcmVPYmplY3QgJiZcbiAgICAgICAgICAgICAgICAgICAgaGFzT3duLmNhbGwob2JqZWN0LCBzY2hlbWFLZXlQYXRoWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBjb250ZXh0LnN0b3JlT2JqZWN0IGZhaWxzIHRvIHByb3ZpZGUgYSB2YWx1ZSBmb3IgdGhlIHJlcXVlc3RlZFxuICAgICAgICAgICAgICAgICAgICAvLyBwYXRoLCBmYWxsIGJhY2sgdG8gdGhlIHJhdyByZXN1bHQgb2JqZWN0LCBpZiBpdCBoYXMgYSB0b3AtbGV2ZWwga2V5XG4gICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoaW5nIHRoZSBmaXJzdCBrZXkgaW4gdGhlIHBhdGggKHNjaGVtYUtleVBhdGhbMF0pLiBUaGlzIGFsbG93c1xuICAgICAgICAgICAgICAgICAgICAvLyBrZXkgZmllbGRzIGluY2x1ZGVkIGluIHRoZSB3cml0dGVuIGRhdGEgdG8gYmUgc2F2ZWQgaW4gdGhlIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgIC8vIGV2ZW4gaWYgdGhleSBhcmUgbm90IHNlbGVjdGVkIGV4cGxpY2l0bHkgaW4gY29udGV4dC5zZWxlY3Rpb25TZXQuXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdCBiZWluZyBtZW50aW9uZWQgYnkgY29udGV4dC5zZWxlY3Rpb25TZXQgaXMgY29udmVuaWVudCBoZXJlLFxuICAgICAgICAgICAgICAgICAgICAvLyBzaW5jZSBpdCBtZWFucyB0aGVzZSBleHRyYSBmaWVsZHMgY2Fubm90IGJlIGFmZmVjdGVkIGJ5IGZpZWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsaWFzaW5nLCB3aGljaCBpcyB3aHkgd2UgY2FuIHVzZSBleHRyYWN0S2V5IGluc3RlYWQgb2ZcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGV4dC5yZWFkRmllbGQgZm9yIHRoaXMgZXh0cmFjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkID0gZXh0cmFjdEtleVBhdGgob2JqZWN0LCBzY2hlbWFLZXlQYXRoLCBleHRyYWN0S2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW52YXJpYW50KGV4dHJhY3RlZCAhPT0gdm9pZCAwLCA5OCwgc2NoZW1hS2V5UGF0aC5qb2luKFwiLlwiKSwgb2JqZWN0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFjdGVkO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGAke2NvbnRleHQudHlwZW5hbWV9OiR7SlNPTi5zdHJpbmdpZnkoa2V5T2JqZWN0KX1gO1xuICAgICAgICB9KSk7XG59XG4vLyBUaGUga2V5QXJncyBleHRyYWN0aW9uIHByb2Nlc3MgaXMgcm91Z2hseSBhbmFsb2dvdXMgdG8ga2V5RmllbGRzIGV4dHJhY3Rpb24sXG4vLyBidXQgdGhlcmUgYXJlIG5vIGFsaWFzZXMgaW52b2x2ZWQsIG1pc3NpbmcgZmllbGRzIGFyZSB0b2xlcmF0ZWQgKGJ5IG1lcmVseVxuLy8gb21pdHRpbmcgdGhlbSBmcm9tIHRoZSBrZXkpLCBhbmQgZHJhd2luZyBmcm9tIGZpZWxkLmRpcmVjdGl2ZXMgb3IgdmFyaWFibGVzXG4vLyBpcyBhbGxvd2VkIChpbiBhZGRpdGlvbiB0byBkcmF3aW5nIGZyb20gdGhlIGZpZWxkJ3MgYXJndW1lbnRzIG9iamVjdCkuXG4vLyBDb25jcmV0ZWx5LCB0aGVzZSBkaWZmZXJlbmNlcyBtZWFuIHBhc3NpbmcgYSBkaWZmZXJlbnQga2V5IHBhdGggZXh0cmFjdG9yXG4vLyBmdW5jdGlvbiB0byBjb2xsZWN0U3BlY2lmaWVyUGF0aHMsIHJldXNpbmcgdGhlIHNoYXJlZCBleHRyYWN0S2V5UGF0aCBoZWxwZXJcbi8vIHdoZXJldmVyIHBvc3NpYmxlLlxuZXhwb3J0IGZ1bmN0aW9uIGtleUFyZ3NGbkZyb21TcGVjaWZpZXIoc3BlY2lmaWVyKSB7XG4gICAgY29uc3QgaW5mbyA9IGxvb2t1cFNwZWNpZmllckluZm8oc3BlY2lmaWVyKTtcbiAgICByZXR1cm4gKGluZm8ua2V5QXJnc0ZuIHx8XG4gICAgICAgIChpbmZvLmtleUFyZ3NGbiA9IChhcmdzLCB7IGZpZWxkLCB2YXJpYWJsZXMsIGZpZWxkTmFtZSB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb2xsZWN0ZWQgPSBjb2xsZWN0U3BlY2lmaWVyUGF0aHMoc3BlY2lmaWVyLCAoa2V5UGF0aCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0S2V5ID0ga2V5UGF0aFswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENoYXIgPSBmaXJzdEtleS5jaGFyQXQoMCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Q2hhciA9PT0gXCJAXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkICYmIGlzTm9uRW1wdHlBcnJheShmaWVsZC5kaXJlY3RpdmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlTmFtZSA9IGZpcnN0S2V5LnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRpcmVjdGl2ZSBhcHBlYXJzIG11bHRpcGxlIHRpbWVzLCBvbmx5IHRoZSBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2NjdXJyZW5jZSdzIGFyZ3VtZW50cyB3aWxsIGJlIHVzZWQuIFRPRE8gQWxsb3cgcmVwZXRpdGlvbj9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2FjaGUgdGhpcyB3b3JrIHNvbWVob3csIGEgbGEgYWxpYXNNYXA/XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gZmllbGQuZGlyZWN0aXZlcy5maW5kKChkKSA9PiBkLm5hbWUudmFsdWUgPT09IGRpcmVjdGl2ZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9ydHVuYXRlbHkgYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkIHdvcmtzIGZvciBEaXJlY3RpdmVOb2RlIVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aXZlQXJncyA9IGQgJiYgYXJndW1lbnRzT2JqZWN0RnJvbUZpZWxkKGQsIHZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZGlyZWN0aXZlcyB3aXRob3V0IGFyZ3VtZW50cyAoZCBkZWZpbmVkLCBidXQgZGlyZWN0aXZlQXJncyA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG51bGwpLCB0aGUgcHJlc2VuY2Ugb3IgYWJzZW5jZSBvZiB0aGUgZGlyZWN0aXZlIHN0aWxsIGNvdW50cyBhc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFydCBvZiB0aGUgZmllbGQga2V5LCBzbyB3ZSByZXR1cm4gbnVsbCBpbiB0aG9zZSBjYXNlcy4gSWYgbm9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZSB3aXRoIHRoaXMgbmFtZSB3YXMgZm91bmQgZm9yIHRoaXMgZmllbGQgKGQgdW5kZWZpbmVkIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGh1cyBkaXJlY3RpdmVBcmdzIHVuZGVmaW5lZCksIHdlIHJldHVybiB1bmRlZmluZWQsIHdoaWNoIGNhdXNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB2YWx1ZSB0byBiZSBvbWl0dGVkIGZyb20gdGhlIGtleSBvYmplY3QgcmV0dXJuZWQgYnlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3RTcGVjaWZpZXJQYXRocy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZGlyZWN0aXZlQXJncyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RLZXlQYXRoKGRpcmVjdGl2ZUFyZ3MsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGtleVBhdGgubGVuZ3RoID09PSAxLCB0aGlzIGNvZGUgY2FsbHMgZXh0cmFjdEtleVBhdGggd2l0aCBhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVtcHR5IHBhdGgsIHdoaWNoIHdvcmtzIGJlY2F1c2UgaXQgdXNlcyBkaXJlY3RpdmVBcmdzIGFzIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4dHJhY3RlZCB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlQYXRoLnNsaWNlKDEpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGtleSBzdGFydGVkIHdpdGggQCBidXQgdGhlcmUgd2FzIG5vIGNvcnJlc3BvbmRpbmcgZGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3YW50IHRvIG9taXQgdGhpcyB2YWx1ZSBmcm9tIHRoZSBrZXkgb2JqZWN0LCBub3QgZmFsbCB0aHJvdWdoIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyZWF0aW5nIEB3aGF0ZXZlciBhcyBhIG5vcm1hbCBhcmd1bWVudCBuYW1lLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaXJzdENoYXIgPT09IFwiJFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlTmFtZSA9IGZpcnN0S2V5LnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFibGVzICYmIGhhc093bi5jYWxsKHZhcmlhYmxlcywgdmFyaWFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyS2V5UGF0aCA9IGtleVBhdGguc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJLZXlQYXRoWzBdID0gdmFyaWFibGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RLZXlQYXRoKHZhcmlhYmxlcywgdmFyS2V5UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGtleSBzdGFydGVkIHdpdGggJCBidXQgdGhlcmUgd2FzIG5vIGNvcnJlc3BvbmRpbmcgdmFyaWFibGUsIHdlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdhbnQgdG8gb21pdCB0aGlzIHZhbHVlIGZyb20gdGhlIGtleSBvYmplY3QsIG5vdCBmYWxsIHRocm91Z2ggdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gdHJlYXRpbmcgJHdoYXRldmVyIGFzIGEgbm9ybWFsIGFyZ3VtZW50IG5hbWUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RLZXlQYXRoKGFyZ3MsIGtleVBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc3VmZml4ID0gSlNPTi5zdHJpbmdpZnkoY29sbGVjdGVkKTtcbiAgICAgICAgICAgIC8vIElmIG5vIGFyZ3VtZW50cyB3ZXJlIHBhc3NlZCB0byB0aGlzIGZpZWxkLCBhbmQgaXQgZGlkbid0IGhhdmUgYW55IG90aGVyXG4gICAgICAgICAgICAvLyBmaWVsZCBrZXkgY29udHJpYnV0aW9ucyBmcm9tIGRpcmVjdGl2ZXMgb3IgdmFyaWFibGVzLCBoaWRlIHRoZSBlbXB0eVxuICAgICAgICAgICAgLy8gOnt9IHN1ZmZpeCBmcm9tIHRoZSBmaWVsZCBrZXkuIEhvd2V2ZXIsIGEgZmllbGQgcGFzc2VkIG5vIGFyZ3VtZW50cyBjYW5cbiAgICAgICAgICAgIC8vIHN0aWxsIGVuZCB1cCB3aXRoIGEgbm9uLWVtcHR5IDp7Li4ufSBzdWZmaXggaWYgaXRzIGtleSBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAvLyByZWZlcnMgdG8gZGlyZWN0aXZlcyBvciB2YXJpYWJsZXMuXG4gICAgICAgICAgICBpZiAoYXJncyB8fCBzdWZmaXggIT09IFwie31cIikge1xuICAgICAgICAgICAgICAgIGZpZWxkTmFtZSArPSBcIjpcIiArIHN1ZmZpeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmaWVsZE5hbWU7XG4gICAgICAgIH0pKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb2xsZWN0U3BlY2lmaWVyUGF0aHMoc3BlY2lmaWVyLCBleHRyYWN0b3IpIHtcbiAgICAvLyBGb3IgZWFjaCBwYXRoIHNwZWNpZmllZCBieSBzcGVjaWZpZXIsIGludm9rZSB0aGUgZXh0cmFjdG9yLCBhbmQgcmVwZWF0ZWRseVxuICAgIC8vIG1lcmdlIHRoZSByZXN1bHRzIHRvZ2V0aGVyLCB3aXRoIGFwcHJvcHJpYXRlIGFuY2VzdG9yIGNvbnRleHQuXG4gICAgY29uc3QgbWVyZ2VyID0gbmV3IERlZXBNZXJnZXIoKTtcbiAgICByZXR1cm4gZ2V0U3BlY2lmaWVyUGF0aHMoc3BlY2lmaWVyKS5yZWR1Y2UoKGNvbGxlY3RlZCwgcGF0aCkgPT4ge1xuICAgICAgICBsZXQgdG9NZXJnZSA9IGV4dHJhY3RvcihwYXRoKTtcbiAgICAgICAgaWYgKHRvTWVyZ2UgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgLy8gVGhpcyBwYXRoIGlzIG5vdCBleHBlY3RlZCB0byBjb250YWluIGFycmF5IGluZGV4ZXMsIHNvIHRoZSB0b01lcmdlXG4gICAgICAgICAgICAvLyByZWNvbnN0cnVjdGlvbiB3aWxsIG5vdCBjb250YWluIGFycmF5cy4gVE9ETyBGaXggdGhpcz9cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBwYXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgdG9NZXJnZSA9IHsgW3BhdGhbaV1dOiB0b01lcmdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xsZWN0ZWQgPSBtZXJnZXIubWVyZ2UoY29sbGVjdGVkLCB0b01lcmdlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGVjdGVkO1xuICAgIH0sIHt9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRTcGVjaWZpZXJQYXRocyhzcGVjKSB7XG4gICAgY29uc3QgaW5mbyA9IGxvb2t1cFNwZWNpZmllckluZm8oc3BlYyk7XG4gICAgaWYgKCFpbmZvLnBhdGhzKSB7XG4gICAgICAgIGNvbnN0IHBhdGhzID0gKGluZm8ucGF0aHMgPSBbXSk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gW107XG4gICAgICAgIHNwZWMuZm9yRWFjaCgocywgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkocykpIHtcbiAgICAgICAgICAgICAgICBnZXRTcGVjaWZpZXJQYXRocyhzKS5mb3JFYWNoKChwKSA9PiBwYXRocy5wdXNoKGN1cnJlbnRQYXRoLmNvbmNhdChwKSkpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aC5wdXNoKHMpO1xuICAgICAgICAgICAgICAgIGlmICghaXNBcnJheShzcGVjW2kgKyAxXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aHMucHVzaChjdXJyZW50UGF0aC5zbGljZSgwKSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGluZm8ucGF0aHM7XG59XG5mdW5jdGlvbiBleHRyYWN0S2V5KG9iamVjdCwga2V5KSB7XG4gICAgcmV0dXJuIG9iamVjdFtrZXldO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RLZXlQYXRoKG9iamVjdCwgcGF0aCwgZXh0cmFjdCkge1xuICAgIC8vIEZvciBlYWNoIGtleSBpbiBwYXRoLCBleHRyYWN0IHRoZSBjb3JyZXNwb25kaW5nIGNoaWxkIHByb3BlcnR5IGZyb20gb2JqLFxuICAgIC8vIGZsYXR0ZW5pbmcgYXJyYXlzIGlmIGVuY291bnRlcmVkICh1bmNvbW1vbiBmb3Iga2V5RmllbGRzIGFuZCBrZXlBcmdzLCBidXRcbiAgICAvLyBwb3NzaWJsZSkuIFRoZSBmaW5hbCByZXN1bHQgb2YgcGF0aC5yZWR1Y2UgaXMgbm9ybWFsaXplZCBzbyB1bmV4cGVjdGVkIGxlYWZcbiAgICAvLyBvYmplY3RzIGhhdmUgdGhlaXIga2V5cyBzYWZlbHkgc29ydGVkLiBUaGF0IGZpbmFsIHJlc3VsdCBpcyBkaWZmaWN1bHQgdG9cbiAgICAvLyB0eXBlIGFzIGFueXRoaW5nIG90aGVyIHRoYW4gYW55LiBZb3UncmUgd2VsY29tZSB0byB0cnkgdG8gaW1wcm92ZSB0aGVcbiAgICAvLyByZXR1cm4gdHlwZSwgYnV0IGtlZXAgaW4gbWluZCBleHRyYWN0S2V5UGF0aCBpcyBub3QgYSBwdWJsaWMgZnVuY3Rpb25cbiAgICAvLyAoZXhwb3J0ZWQgb25seSBmb3IgdGVzdGluZyksIHNvIHRoZSBlZmZvcnQgbWF5IG5vdCBiZSB3b3J0aHdoaWxlIHVubGVzcyB0aGVcbiAgICAvLyBsaW1pdGVkIHNldCBvZiBhY3R1YWwgY2FsbGVycyAoc2VlIGFib3ZlKSBwYXNzIGFyZ3VtZW50cyB0aGF0IFR5cGVTY3JpcHRcbiAgICAvLyBjYW4gc3RhdGljYWxseSB0eXBlLiBJZiB3ZSBrbm93IG9ubHkgdGhhdCBwYXRoIGlzIHNvbWUgYXJyYXkgb2Ygc3RyaW5nc1xuICAgIC8vIChhbmQgbm90LCBzYXksIGEgc3BlY2lmaWMgdHVwbGUgb2Ygc3RhdGljYWxseSBrbm93biBzdHJpbmdzKSwgYW55IChvclxuICAgIC8vIHBvc3NpYmx5IHVua25vd24pIGlzIHRoZSBob25lc3QgYW5zd2VyLlxuICAgIGV4dHJhY3QgPSBleHRyYWN0IHx8IGV4dHJhY3RLZXk7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZShwYXRoLnJlZHVjZShmdW5jdGlvbiByZWR1Y2VyKG9iaiwga2V5KSB7XG4gICAgICAgIHJldHVybiBpc0FycmF5KG9iaikgP1xuICAgICAgICAgICAgb2JqLm1hcCgoY2hpbGQpID0+IHJlZHVjZXIoY2hpbGQsIGtleSkpXG4gICAgICAgICAgICA6IG9iaiAmJiBleHRyYWN0KG9iaiwga2V5KTtcbiAgICB9LCBvYmplY3QpKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZSh2YWx1ZSkge1xuICAgIC8vIFVzdWFsbHkgdGhlIGV4dHJhY3RlZCB2YWx1ZSB3aWxsIGJlIGEgc2NhbGFyIHZhbHVlLCBzaW5jZSBtb3N0IHByaW1hcnlcbiAgICAvLyBrZXkgZmllbGRzIGFyZSBzY2FsYXIsIGJ1dCBqdXN0IGluIGNhc2Ugd2UgZ2V0IGFuIG9iamVjdCBvciBhbiBhcnJheSwgd2VcbiAgICAvLyBuZWVkIHRvIGRvIHNvbWUgbm9ybWFsaXphdGlvbiBvZiB0aGUgb3JkZXIgb2YgKG5lc3RlZCkga2V5cy5cbiAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5tYXAobm9ybWFsaXplKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGVjdFNwZWNpZmllclBhdGhzKE9iamVjdC5rZXlzKHZhbHVlKS5zb3J0KCksIChwYXRoKSA9PiBleHRyYWN0S2V5UGF0aCh2YWx1ZSwgcGF0aCkpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZXktZXh0cmFjdG9yLmpzLm1hcFxuIiwKICAgICJpbXBvcnQgeyBkZXAsIFNsb3QgfSBmcm9tIFwib3B0aW1pc21cIjtcbi8vIENvbnRleHR1YWwgU2xvdCB0aGF0IGFjcXVpcmVzIGl0cyB2YWx1ZSB3aGVuIGN1c3RvbSByZWFkIGZ1bmN0aW9ucyBhcmVcbi8vIGNhbGxlZCBpbiBQb2xpY2llcyNyZWFkRmllbGQuXG5leHBvcnQgY29uc3QgY2FjaGVTbG90ID0gbmV3IFNsb3QoKTtcbmNvbnN0IGNhY2hlSW5mb01hcCA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBnZXRDYWNoZUluZm8oY2FjaGUpIHtcbiAgICBsZXQgaW5mbyA9IGNhY2hlSW5mb01hcC5nZXQoY2FjaGUpO1xuICAgIGlmICghaW5mbykge1xuICAgICAgICBjYWNoZUluZm9NYXAuc2V0KGNhY2hlLCAoaW5mbyA9IHtcbiAgICAgICAgICAgIHZhcnM6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIGRlcDogZGVwKCksXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIGluZm87XG59XG5leHBvcnQgZnVuY3Rpb24gZm9yZ2V0Q2FjaGUoY2FjaGUpIHtcbiAgICBnZXRDYWNoZUluZm8oY2FjaGUpLnZhcnMuZm9yRWFjaCgocnYpID0+IHJ2LmZvcmdldENhY2hlKGNhY2hlKSk7XG59XG4vLyBDYWxsaW5nIGZvcmdldENhY2hlKGNhY2hlKSBzZXJ2ZXMgdG8gc2lsZW5jZSBicm9hZGNhc3RzIGFuZCBhbGxvd3MgdGhlXG4vLyBjYWNoZSB0byBiZSBnYXJiYWdlIGNvbGxlY3RlZC4gSG93ZXZlciwgdGhlIHZhcnNCeUNhY2hlIFdlYWtNYXBcbi8vIHByZXNlcnZlcyB0aGUgc2V0IG9mIHJlYWN0aXZlIHZhcmlhYmxlcyB0aGF0IHdlcmUgcHJldmlvdXNseSBhc3NvY2lhdGVkXG4vLyB3aXRoIHRoaXMgY2FjaGUsIHdoaWNoIG1ha2VzIGl0IHBvc3NpYmxlIHRvIFwicmVjYWxsXCIgdGhlIGNhY2hlIGF0IGFcbi8vIGxhdGVyIHRpbWUsIGJ5IHJlYXR0YWNoaW5nIGl0IHRvIHRob3NlIHZhcmlhYmxlcy4gSWYgdGhlIGNhY2hlIGhhcyBiZWVuXG4vLyBnYXJiYWdlIGNvbGxlY3RlZCBpbiB0aGUgbWVhbnRpbWUsIGJlY2F1c2UgaXQgaXMgbm8gbG9uZ2VyIHJlYWNoYWJsZSxcbi8vIHlvdSB3b24ndCBiZSBhYmxlIHRvIGNhbGwgcmVjYWxsQ2FjaGUoY2FjaGUpLCBhbmQgdGhlIGNhY2hlIHdpbGxcbi8vIGF1dG9tYXRpY2FsbHkgZGlzYXBwZWFyIGZyb20gdGhlIHZhcnNCeUNhY2hlIFdlYWtNYXAuXG5leHBvcnQgZnVuY3Rpb24gcmVjYWxsQ2FjaGUoY2FjaGUpIHtcbiAgICBnZXRDYWNoZUluZm8oY2FjaGUpLnZhcnMuZm9yRWFjaCgocnYpID0+IHJ2LmF0dGFjaENhY2hlKGNhY2hlKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVZhcih2YWx1ZSkge1xuICAgIGNvbnN0IGNhY2hlcyA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgcnYgPSBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICBjYWNoZXMuZm9yRWFjaCgoY2FjaGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZGF0ZSBhbnkgZmllbGRzIHdpdGggY3VzdG9tIHJlYWQgZnVuY3Rpb25zIHRoYXRcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3VtZWQgdGhpcyB2YXJpYWJsZSwgc28gcXVlcnkgcmVzdWx0cyBpbnZvbHZpbmcgdGhvc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gZmllbGRzIHdpbGwgYmUgcmVjb21wdXRlZCB0aGUgbmV4dCB0aW1lIHdlIHJlYWQgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS5kZXAuZGlydHkocnYpO1xuICAgICAgICAgICAgICAgICAgICAvLyBCcm9hZGNhc3QgY2hhbmdlcyB0byBhbnkgY2FjaGVzIHRoYXQgaGF2ZSBwcmV2aW91c2x5IHJlYWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSB0aGlzIHZhcmlhYmxlLlxuICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3QoY2FjaGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIEZpbmFsbHksIG5vdGlmeSBhbnkgbGlzdGVuZXJzIGFkZGVkIHZpYSBydi5vbk5leHRDaGFuZ2UuXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkTGlzdGVuZXJzID0gQXJyYXkuZnJvbShsaXN0ZW5lcnMpO1xuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5jbGVhcigpO1xuICAgICAgICAgICAgICAgIG9sZExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIodmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFdoZW4gcmVhZGluZyBmcm9tIHRoZSB2YXJpYWJsZSwgb2J0YWluIHRoZSBjdXJyZW50IGNhY2hlIGZyb21cbiAgICAgICAgICAgIC8vIGNvbnRleHQgdmlhIGNhY2hlU2xvdC4gVGhpcyBpc24ndCBlbnRpcmVseSBmb29scHJvb2YsIGJ1dCBpdCdzXG4gICAgICAgICAgICAvLyB0aGUgc2FtZSBzeXN0ZW0gdGhhdCBwb3dlcnMgdmFyRGVwLlxuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSBjYWNoZVNsb3QuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgICAgIGF0dGFjaChjYWNoZSk7XG4gICAgICAgICAgICAgICAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS5kZXAocnYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIHJ2Lm9uTmV4dENoYW5nZSA9IChsaXN0ZW5lcikgPT4ge1xuICAgICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgY29uc3QgYXR0YWNoID0gKHJ2LmF0dGFjaENhY2hlID0gKGNhY2hlKSA9PiB7XG4gICAgICAgIGNhY2hlcy5hZGQoY2FjaGUpO1xuICAgICAgICBnZXRDYWNoZUluZm8oY2FjaGUpLnZhcnMuYWRkKHJ2KTtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH0pO1xuICAgIHJ2LmZvcmdldENhY2hlID0gKGNhY2hlKSA9PiBjYWNoZXMuZGVsZXRlKGNhY2hlKTtcbiAgICByZXR1cm4gcnY7XG59XG5mdW5jdGlvbiBicm9hZGNhc3QoY2FjaGUpIHtcbiAgICBpZiAoY2FjaGUuYnJvYWRjYXN0V2F0Y2hlcykge1xuICAgICAgICBjYWNoZS5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhY3RpdmVWYXJzLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgZGlzYWJsZVdhcm5pbmdzU2xvdCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9tYXNraW5nXCI7XG5pbXBvcnQgeyBpc1JlZmVyZW5jZSB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbmltcG9ydCB7IF9fREVWX18gfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2Vudmlyb25tZW50XCI7XG5pbXBvcnQgeyBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQsIGdldFN0b3JlS2V5TmFtZSwgaXNBcnJheSwgaXNOb25OdWxsT2JqZWN0LCBzdG9yZUtleU5hbWVGcm9tRmllbGQsIHN0cmluZ2lmeUZvckRpc3BsYXksIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbFwiO1xuaW1wb3J0IHsgaW52YXJpYW50LCBuZXdJbnZhcmlhbnRFcnJvciwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuaW1wb3J0IHsgZGVmYXVsdERhdGFJZEZyb21PYmplY3QsIGZpZWxkTmFtZUZyb21TdG9yZU5hbWUsIGhhc093biwgc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdCwgc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QsIFR5cGVPckZpZWxkTmFtZVJlZ0V4cCwgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBrZXlBcmdzRm5Gcm9tU3BlY2lmaWVyLCBrZXlGaWVsZHNGbkZyb21TcGVjaWZpZXIsIH0gZnJvbSBcIi4va2V5LWV4dHJhY3Rvci5qc1wiO1xuaW1wb3J0IHsgY2FjaGVTbG90IH0gZnJvbSBcIi4vcmVhY3RpdmVWYXJzLmpzXCI7XG5mdW5jdGlvbiBhcmdzRnJvbUZpZWxkU3BlY2lmaWVyKHNwZWMpIHtcbiAgICByZXR1cm4gKHNwZWMuYXJncyAhPT0gdm9pZCAwID8gc3BlYy5hcmdzXG4gICAgICAgIDogc3BlYy5maWVsZCA/IGFyZ3VtZW50c09iamVjdEZyb21GaWVsZChzcGVjLmZpZWxkLCBzcGVjLnZhcmlhYmxlcylcbiAgICAgICAgICAgIDogbnVsbCk7XG59XG5jb25zdCBudWxsS2V5RmllbGRzRm4gPSAoKSA9PiB2b2lkIDA7XG5jb25zdCBzaW1wbGVLZXlBcmdzRm4gPSAoX2FyZ3MsIGNvbnRleHQpID0+IGNvbnRleHQuZmllbGROYW1lO1xuLy8gVGhlc2UgbWVyZ2UgZnVuY3Rpb25zIGNhbiBiZSBzZWxlY3RlZCBieSBzcGVjaWZ5aW5nIG1lcmdlOnRydWUgb3Jcbi8vIG1lcmdlOmZhbHNlIGluIGEgZmllbGQgcG9saWN5LlxuY29uc3QgbWVyZ2VUcnVlRm4gPSAoZXhpc3RpbmcsIGluY29taW5nLCB7IG1lcmdlT2JqZWN0cyB9KSA9PiBtZXJnZU9iamVjdHMoZXhpc3RpbmcsIGluY29taW5nKTtcbmNvbnN0IG1lcmdlRmFsc2VGbiA9IChfLCBpbmNvbWluZykgPT4gaW5jb21pbmc7XG5leHBvcnQgY2xhc3MgUG9saWNpZXMge1xuICAgIGNvbmZpZztcbiAgICB0eXBlUG9saWNpZXMgPSB7fTtcbiAgICB0b0JlQWRkZWQgPSB7fTtcbiAgICAvLyBNYXAgZnJvbSBzdWJ0eXBlIG5hbWVzIHRvIHNldHMgb2Ygc3VwZXJ0eXBlIG5hbWVzLiBOb3RlIHRoYXQgdGhpc1xuICAgIC8vIHJlcHJlc2VudGF0aW9uIGludmVydHMgdGhlIHN0cnVjdHVyZSBvZiBwb3NzaWJsZVR5cGVzICh3aG9zZSBrZXlzIGFyZVxuICAgIC8vIHN1cGVydHlwZXMgYW5kIHdob3NlIHZhbHVlcyBhcmUgYXJyYXlzIG9mIHN1YnR5cGVzKSBiZWNhdXNlIGl0IHRlbmRzXG4gICAgLy8gdG8gYmUgbXVjaCBtb3JlIGVmZmljaWVudCB0byBzZWFyY2ggdXB3YXJkcyB0aGFuIGRvd253YXJkcy5cbiAgICBzdXBlcnR5cGVNYXAgPSBuZXcgTWFwKCk7XG4gICAgLy8gQW55IGZ1enp5IHN1YnR5cGVzIHNwZWNpZmllZCBieSBwb3NzaWJsZVR5cGVzIHdpbGwgYmUgY29udmVydGVkIHRvXG4gICAgLy8gUmVnRXhwIG9iamVjdHMgYW5kIHJlY29yZGVkIGhlcmUuIEV2ZXJ5IGtleSBvZiB0aGlzIG1hcCBjYW4gYWxzbyBiZVxuICAgIC8vIGZvdW5kIGluIHN1cGVydHlwZU1hcC4gSW4gbWFueSBjYXNlcyB0aGlzIE1hcCB3aWxsIGJlIGVtcHR5LCB3aGljaFxuICAgIC8vIG1lYW5zIG5vIGZ1enp5IHN1YnR5cGUgY2hlY2tpbmcgd2lsbCBoYXBwZW4gaW4gZnJhZ21lbnRNYXRjaGVzLlxuICAgIGZ1enp5U3VidHlwZXMgPSBuZXcgTWFwKCk7XG4gICAgY2FjaGU7XG4gICAgcm9vdElkc0J5VHlwZW5hbWUgPSB7fTtcbiAgICByb290VHlwZW5hbWVzQnlJZCA9IHt9O1xuICAgIHVzaW5nUG9zc2libGVUeXBlcyA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgICAgICBkYXRhSWRGcm9tT2JqZWN0OiBkZWZhdWx0RGF0YUlkRnJvbU9iamVjdCxcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jYWNoZSA9IHRoaXMuY29uZmlnLmNhY2hlO1xuICAgICAgICB0aGlzLnNldFJvb3RUeXBlbmFtZShcIlF1ZXJ5XCIpO1xuICAgICAgICB0aGlzLnNldFJvb3RUeXBlbmFtZShcIk11dGF0aW9uXCIpO1xuICAgICAgICB0aGlzLnNldFJvb3RUeXBlbmFtZShcIlN1YnNjcmlwdGlvblwiKTtcbiAgICAgICAgaWYgKGNvbmZpZy5wb3NzaWJsZVR5cGVzKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFBvc3NpYmxlVHlwZXMoY29uZmlnLnBvc3NpYmxlVHlwZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcudHlwZVBvbGljaWVzKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFR5cGVQb2xpY2llcyhjb25maWcudHlwZVBvbGljaWVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZGVudGlmeShvYmplY3QsIHBhcnRpYWxDb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IHBvbGljaWVzID0gdGhpcztcbiAgICAgICAgY29uc3QgdHlwZW5hbWUgPSAocGFydGlhbENvbnRleHQgJiZcbiAgICAgICAgICAgIChwYXJ0aWFsQ29udGV4dC50eXBlbmFtZSB8fCBwYXJ0aWFsQ29udGV4dC5zdG9yZU9iamVjdD8uX190eXBlbmFtZSkpIHx8XG4gICAgICAgICAgICBvYmplY3QuX190eXBlbmFtZTtcbiAgICAgICAgLy8gSXQgc2hvdWxkIGJlIHBvc3NpYmxlIHRvIHdyaXRlIHJvb3QgUXVlcnkgZmllbGRzIHdpdGggd3JpdGVGcmFnbWVudCxcbiAgICAgICAgLy8gdXNpbmcgeyBfX3R5cGVuYW1lOiBcIlF1ZXJ5XCIsIC4uLiB9IGFzIHRoZSBkYXRhLCBidXQgaXQgZG9lcyBub3QgbWFrZVxuICAgICAgICAvLyBzZW5zZSB0byBhbGxvdyB0aGUgc2FtZSBpZGVudGlmaWNhdGlvbiBiZWhhdmlvciBmb3IgdGhlIE11dGF0aW9uIGFuZFxuICAgICAgICAvLyBTdWJzY3JpcHRpb24gdHlwZXMsIHNpbmNlIGFwcGxpY2F0aW9uIGNvZGUgc2hvdWxkIG5ldmVyIGJlIHdyaXRpbmdcbiAgICAgICAgLy8gZGlyZWN0bHkgdG8gKG9yIHJlYWRpbmcgZGlyZWN0bHkgZnJvbSkgdGhvc2Ugcm9vdCBvYmplY3RzLlxuICAgICAgICBpZiAodHlwZW5hbWUgPT09IHRoaXMucm9vdFR5cGVuYW1lc0J5SWQuUk9PVF9RVUVSWSkge1xuICAgICAgICAgICAgcmV0dXJuIFtcIlJPT1RfUVVFUllcIl07XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGVmYXVsdCBjb250ZXh0LnN0b3JlT2JqZWN0IHRvIG9iamVjdCBpZiBub3Qgb3RoZXJ3aXNlIHByb3ZpZGVkLlxuICAgICAgICBjb25zdCBzdG9yZU9iamVjdCA9IChwYXJ0aWFsQ29udGV4dCAmJiBwYXJ0aWFsQ29udGV4dC5zdG9yZU9iamVjdCkgfHwgb2JqZWN0O1xuICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICAgICAgLi4ucGFydGlhbENvbnRleHQsXG4gICAgICAgICAgICB0eXBlbmFtZSxcbiAgICAgICAgICAgIHN0b3JlT2JqZWN0LFxuICAgICAgICAgICAgcmVhZEZpZWxkOiAocGFydGlhbENvbnRleHQgJiYgcGFydGlhbENvbnRleHQucmVhZEZpZWxkKSB8fFxuICAgICAgICAgICAgICAgICgoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0gbm9ybWFsaXplUmVhZEZpZWxkT3B0aW9ucyhhcmdzLCBzdG9yZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb2xpY2llcy5yZWFkRmllbGQob3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmU6IHBvbGljaWVzLmNhY2hlW1wiZGF0YVwiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgICAgICBsZXQgaWQ7XG4gICAgICAgIGNvbnN0IHBvbGljeSA9IHR5cGVuYW1lICYmIHRoaXMuZ2V0VHlwZVBvbGljeSh0eXBlbmFtZSk7XG4gICAgICAgIGxldCBrZXlGbiA9IChwb2xpY3kgJiYgcG9saWN5LmtleUZuKSB8fCB0aGlzLmNvbmZpZy5kYXRhSWRGcm9tT2JqZWN0O1xuICAgICAgICBkaXNhYmxlV2FybmluZ3NTbG90LndpdGhWYWx1ZSh0cnVlLCAoKSA9PiB7XG4gICAgICAgICAgICB3aGlsZSAoa2V5Rm4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzcGVjaWZpZXJPcklkID0ga2V5Rm4oeyAuLi5vYmplY3QsIC4uLnN0b3JlT2JqZWN0IH0sIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KHNwZWNpZmllck9ySWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleUZuID0ga2V5RmllbGRzRm5Gcm9tU3BlY2lmaWVyKHNwZWNpZmllck9ySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBzcGVjaWZpZXJPcklkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZCA9IGlkID8gU3RyaW5nKGlkKSA6IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQua2V5T2JqZWN0ID8gW2lkLCBjb250ZXh0LmtleU9iamVjdF0gOiBbaWRdO1xuICAgIH1cbiAgICBhZGRUeXBlUG9saWNpZXModHlwZVBvbGljaWVzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHR5cGVQb2xpY2llcykuZm9yRWFjaCgodHlwZW5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcXVlcnlUeXBlLCBtdXRhdGlvblR5cGUsIHN1YnNjcmlwdGlvblR5cGUsIC4uLmluY29taW5nIH0gPSB0eXBlUG9saWNpZXNbdHlwZW5hbWVdO1xuICAgICAgICAgICAgLy8gVGhvdWdoIHtxdWVyeSxtdXRhdGlvbixzdWJzY3JpcHRpb259VHlwZSBjb25maWd1cmF0aW9ucyBhcmUgcmFyZSxcbiAgICAgICAgICAgIC8vIGl0J3MgaW1wb3J0YW50IHRvIGNhbGwgc2V0Um9vdFR5cGVuYW1lIGFzIGVhcmx5IGFzIHBvc3NpYmxlLFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlc2UgY29uZmlndXJhdGlvbnMgc2hvdWxkIGFwcGx5IGNvbnNpc3RlbnRseSBmb3IgdGhlXG4gICAgICAgICAgICAvLyBlbnRpcmUgbGlmZXRpbWUgb2YgdGhlIGNhY2hlLiBBbHNvLCBzaW5jZSBvbmx5IG9uZSBfX3R5cGVuYW1lIGNhblxuICAgICAgICAgICAgLy8gcXVhbGlmeSBhcyBvbmUgb2YgdGhlc2Ugcm9vdCB0eXBlcywgdGhlc2UgdGhyZWUgcHJvcGVydGllcyBjYW5ub3RcbiAgICAgICAgICAgIC8vIGJlIGluaGVyaXRlZCwgdW5saWtlIHRoZSByZXN0IG9mIHRoZSBpbmNvbWluZyBwcm9wZXJ0aWVzLiBUaGF0XG4gICAgICAgICAgICAvLyByZXN0cmljdGlvbiBpcyBjb252ZW5pZW50LCBiZWNhdXNlIHRoZSBwdXJwb3NlIG9mIHRoaXMudG9CZUFkZGVkXG4gICAgICAgICAgICAvLyBpcyB0byBkZWxheSB0aGUgcHJvY2Vzc2luZyBvZiB0eXBlL2ZpZWxkIHBvbGljaWVzIHVudGlsIHRoZSBmaXJzdFxuICAgICAgICAgICAgLy8gdGltZSB0aGV5J3JlIHVzZWQsIGFsbG93aW5nIHBvbGljaWVzIHRvIGJlIGFkZGVkIGluIGFueSBvcmRlciBhc1xuICAgICAgICAgICAgLy8gbG9uZyBhcyBhbGwgcmVsZXZhbnQgcG9saWNpZXMgKGluY2x1ZGluZyBwb2xpY2llcyBmb3Igc3VwZXJ0eXBlcylcbiAgICAgICAgICAgIC8vIGhhdmUgYmVlbiBhZGRlZCBieSB0aGUgdGltZSBhIGdpdmVuIHBvbGljeSBpcyB1c2VkIGZvciB0aGUgZmlyc3RcbiAgICAgICAgICAgIC8vIHRpbWUuIEluIG90aGVyIHdvcmRzLCBzaW5jZSBpbmhlcml0YW5jZSBkb2Vzbid0IG1hdHRlciBmb3IgdGhlc2VcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMsIHRoZXJlJ3MgYWxzbyBubyBuZWVkIHRvIGRlbGF5IHRoZWlyIHByb2Nlc3NpbmcgdXNpbmdcbiAgICAgICAgICAgIC8vIHRoZSB0aGlzLnRvQmVBZGRlZCBxdWV1ZS5cbiAgICAgICAgICAgIGlmIChxdWVyeVR5cGUpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSb290VHlwZW5hbWUoXCJRdWVyeVwiLCB0eXBlbmFtZSk7XG4gICAgICAgICAgICBpZiAobXV0YXRpb25UeXBlKVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Um9vdFR5cGVuYW1lKFwiTXV0YXRpb25cIiwgdHlwZW5hbWUpO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvblR5cGUpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSb290VHlwZW5hbWUoXCJTdWJzY3JpcHRpb25cIiwgdHlwZW5hbWUpO1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKHRoaXMudG9CZUFkZGVkLCB0eXBlbmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvQmVBZGRlZFt0eXBlbmFtZV0ucHVzaChpbmNvbWluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvQmVBZGRlZFt0eXBlbmFtZV0gPSBbaW5jb21pbmddO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlVHlwZVBvbGljeSh0eXBlbmFtZSwgaW5jb21pbmcsIGV4aXN0aW5nRmllbGRQb2xpY2llcykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZ2V0VHlwZVBvbGljeSh0eXBlbmFtZSk7XG4gICAgICAgIGNvbnN0IHsga2V5RmllbGRzLCBmaWVsZHMgfSA9IGluY29taW5nO1xuICAgICAgICBmdW5jdGlvbiBzZXRNZXJnZShleGlzdGluZywgbWVyZ2UpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nLm1lcmdlID1cbiAgICAgICAgICAgICAgICB0eXBlb2YgbWVyZ2UgPT09IFwiZnVuY3Rpb25cIiA/IG1lcmdlXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhc3MgbWVyZ2U6dHJ1ZSBhcyBhIHNob3J0aGFuZCBmb3IgYSBtZXJnZSBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHJldHVybnMgb3B0aW9ucy5tZXJnZU9iamVjdHMoZXhpc3RpbmcsIGluY29taW5nKS5cbiAgICAgICAgICAgICAgICAgICAgOiBtZXJnZSA9PT0gdHJ1ZSA/IG1lcmdlVHJ1ZUZuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIG1lcmdlOmZhbHNlIHRvIG1ha2UgaW5jb21pbmcgYWx3YXlzIHJlcGxhY2UgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGhvdXQgYW55IHdhcm5pbmdzIGFib3V0IGRhdGEgY2xvYmJlcmluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIDogbWVyZ2UgPT09IGZhbHNlID8gbWVyZ2VGYWxzZUZuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBleGlzdGluZy5tZXJnZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUeXBlIHBvbGljaWVzIGNhbiBkZWZpbmUgbWVyZ2UgZnVuY3Rpb25zLCBhcyBhbiBhbHRlcm5hdGl2ZSB0b1xuICAgICAgICAvLyB1c2luZyBmaWVsZCBwb2xpY2llcyB0byBtZXJnZSBjaGlsZCBvYmplY3RzLlxuICAgICAgICBzZXRNZXJnZShleGlzdGluZywgaW5jb21pbmcubWVyZ2UpO1xuICAgICAgICBleGlzdGluZy5rZXlGbiA9XG4gICAgICAgICAgICAvLyBQYXNzIGZhbHNlIHRvIGRpc2FibGUgbm9ybWFsaXphdGlvbiBmb3IgdGhpcyB0eXBlbmFtZS5cbiAgICAgICAgICAgIGtleUZpZWxkcyA9PT0gZmFsc2UgPyBudWxsS2V5RmllbGRzRm5cbiAgICAgICAgICAgICAgICAvLyBQYXNzIGFuIGFycmF5IG9mIHN0cmluZ3MgdG8gdXNlIHRob3NlIGZpZWxkcyB0byBjb21wdXRlIGFcbiAgICAgICAgICAgICAgICAvLyBjb21wb3NpdGUgSUQgZm9yIG9iamVjdHMgb2YgdGhpcyB0eXBlbmFtZS5cbiAgICAgICAgICAgICAgICA6IGlzQXJyYXkoa2V5RmllbGRzKSA/IGtleUZpZWxkc0ZuRnJvbVNwZWNpZmllcihrZXlGaWVsZHMpXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhc3MgYSBmdW5jdGlvbiB0byB0YWtlIGZ1bGwgY29udHJvbCBvdmVyIGlkZW50aWZpY2F0aW9uLlxuICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiBrZXlGaWVsZHMgPT09IFwiZnVuY3Rpb25cIiA/IGtleUZpZWxkc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVhdmUgZXhpc3Rpbmcua2V5Rm4gdW5jaGFuZ2VkIGlmIGFib3ZlIGNhc2VzIGZhaWwuXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGV4aXN0aW5nLmtleUZuO1xuICAgICAgICBpZiAoZmllbGRzKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhmaWVsZHMpLmZvckVhY2goKGZpZWxkTmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBleGlzdGluZyA9IGV4aXN0aW5nRmllbGRQb2xpY2llc1tmaWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgIC8vIEZpZWxkIHBvbGljeSBpbmhlcml0YW5jZSBpcyBhdG9taWMvc2hhbGxvdzogeW91IGNhbid0IGluaGVyaXQgYVxuICAgICAgICAgICAgICAgIC8vIGZpZWxkIHBvbGljeSBhbmQgdGhlbiBvdmVycmlkZSBqdXN0IGl0cyByZWFkIGZ1bmN0aW9uLCBzaW5jZSByZWFkXG4gICAgICAgICAgICAgICAgLy8gYW5kIG1lcmdlIGZ1bmN0aW9ucyBvZnRlbiBuZWVkIHRvIGNvb3BlcmF0ZSwgc28gY2hhbmdpbmcgb25seSBvbmVcbiAgICAgICAgICAgICAgICAvLyBvZiB0aGVtIHdvdWxkIGJlIGEgcmVjaXBlIGZvciBpbmNvbnNpc3RlbmN5LlxuICAgICAgICAgICAgICAgIC8vIFNvIGhlcmUgd2UgYXZvaWQgbWVyZ2luZyBhbiBpbmhlcml0ZWQgZmllbGQgcG9saWN5IHdpdGggYW4gdXBkYXRlZCBvbmUuXG4gICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZyB8fCBleGlzdGluZz8udHlwZW5hbWUgIT09IHR5cGVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gZXhpc3RpbmdGaWVsZFBvbGljaWVzW2ZpZWxkTmFtZV0gPSB7IHR5cGVuYW1lIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGluY29taW5nID0gZmllbGRzW2ZpZWxkTmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbmNvbWluZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLnJlYWQgPSBpbmNvbWluZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsga2V5QXJncywgcmVhZCwgbWVyZ2UgfSA9IGluY29taW5nO1xuICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5rZXlGbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIGZhbHNlIHRvIGRpc2FibGUgYXJndW1lbnQtYmFzZWQgZGlmZmVyZW50aWF0aW9uIG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaWVsZCBpZGVudGl0aWVzLlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5QXJncyA9PT0gZmFsc2UgPyBzaW1wbGVLZXlBcmdzRm5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXNzIGFuIGFycmF5IG9mIHN0cmluZ3MgdG8gdXNlIG5hbWVkIGFyZ3VtZW50cyB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXB1dGUgYSBjb21wb3NpdGUgaWRlbnRpdHkgZm9yIHRoZSBmaWVsZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGlzQXJyYXkoa2V5QXJncykgPyBrZXlBcmdzRm5Gcm9tU3BlY2lmaWVyKGtleUFyZ3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBhc3MgYSBmdW5jdGlvbiB0byB0YWtlIGZ1bGwgY29udHJvbCBvdmVyIGZpZWxkIGlkZW50aXR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiBrZXlBcmdzID09PSBcImZ1bmN0aW9uXCIgPyBrZXlBcmdzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWF2ZSBleGlzdGluZy5rZXlGbiB1bmNoYW5nZWQgaWYgYWJvdmUgY2FzZXMgZmFpbC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZXhpc3Rpbmcua2V5Rm47XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5yZWFkID0gcmVhZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRNZXJnZShleGlzdGluZywgbWVyZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcucmVhZCAmJiBleGlzdGluZy5tZXJnZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGJvdGggYSByZWFkIGFuZCBhIG1lcmdlIGZ1bmN0aW9uLCBhc3N1bWVcbiAgICAgICAgICAgICAgICAgICAgLy8ga2V5QXJnczpmYWxzZSwgYmVjYXVzZSByZWFkIGFuZCBtZXJnZSB0b2dldGhlciBjYW4gdGFrZVxuICAgICAgICAgICAgICAgICAgICAvLyByZXNwb25zaWJpbGl0eSBmb3IgaW50ZXJwcmV0aW5nIGFyZ3VtZW50cyBpbiBhbmQgb3V0LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQgYXNzdW1wdGlvbiBjYW4gYWx3YXlzIGJlIG92ZXJyaWRkZW4gYnkgc3BlY2lmeWluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBrZXlBcmdzIGV4cGxpY2l0bHkgaW4gdGhlIEZpZWxkUG9saWN5LlxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5rZXlGbiA9IGV4aXN0aW5nLmtleUZuIHx8IHNpbXBsZUtleUFyZ3NGbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRSb290VHlwZW5hbWUod2hpY2gsIHR5cGVuYW1lID0gd2hpY2gpIHtcbiAgICAgICAgY29uc3Qgcm9vdElkID0gXCJST09UX1wiICsgd2hpY2gudG9VcHBlckNhc2UoKTtcbiAgICAgICAgY29uc3Qgb2xkID0gdGhpcy5yb290VHlwZW5hbWVzQnlJZFtyb290SWRdO1xuICAgICAgICBpZiAodHlwZW5hbWUgIT09IG9sZCkge1xuICAgICAgICAgICAgaW52YXJpYW50KCFvbGQgfHwgb2xkID09PSB3aGljaCwgOTksIHdoaWNoKTtcbiAgICAgICAgICAgIC8vIEZpcnN0LCBkZWxldGUgYW55IG9sZCBfX3R5cGVuYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJvb3RJZCBmcm9tXG4gICAgICAgICAgICAvLyByb290SWRzQnlUeXBlbmFtZS5cbiAgICAgICAgICAgIGlmIChvbGQpXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucm9vdElkc0J5VHlwZW5hbWVbb2xkXTtcbiAgICAgICAgICAgIC8vIE5vdyBtYWtlIHRoaXMgdGhlIG9ubHkgX190eXBlbmFtZSB0aGF0IG1hcHMgdG8gdGhpcyByb290SWQuXG4gICAgICAgICAgICB0aGlzLnJvb3RJZHNCeVR5cGVuYW1lW3R5cGVuYW1lXSA9IHJvb3RJZDtcbiAgICAgICAgICAgIC8vIEZpbmFsbHksIHVwZGF0ZSB0aGUgX190eXBlbmFtZSBhc3NvY2lhdGVkIHdpdGggdGhpcyByb290SWQuXG4gICAgICAgICAgICB0aGlzLnJvb3RUeXBlbmFtZXNCeUlkW3Jvb3RJZF0gPSB0eXBlbmFtZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRQb3NzaWJsZVR5cGVzKHBvc3NpYmxlVHlwZXMpIHtcbiAgICAgICAgdGhpcy51c2luZ1Bvc3NpYmxlVHlwZXMgPSB0cnVlO1xuICAgICAgICBPYmplY3Qua2V5cyhwb3NzaWJsZVR5cGVzKS5mb3JFYWNoKChzdXBlcnR5cGUpID0+IHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgdHlwZXMgaGF2ZSBhbiBlbnRyeSBpbiB0aGlzLnN1cGVydHlwZU1hcCwgZXZlbiBpZlxuICAgICAgICAgICAgLy8gdGhlaXIgc3VwZXJ0eXBlIHNldCBpcyBlbXB0eSwgc28gd2UgY2FuIHJldHVybiBmYWxzZSBpbW1lZGlhdGVseVxuICAgICAgICAgICAgLy8gZnJvbSBwb2xpY2llcy5mcmFnbWVudE1hdGNoZXMgZm9yIHVua25vd24gc3VwZXJ0eXBlcy5cbiAgICAgICAgICAgIHRoaXMuZ2V0U3VwZXJ0eXBlU2V0KHN1cGVydHlwZSwgdHJ1ZSk7XG4gICAgICAgICAgICBwb3NzaWJsZVR5cGVzW3N1cGVydHlwZV0uZm9yRWFjaCgoc3VidHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3VwZXJ0eXBlU2V0KHN1YnR5cGUsIHRydWUpLmFkZChzdXBlcnR5cGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gc3VidHlwZS5tYXRjaChUeXBlT3JGaWVsZE5hbWVSZWdFeHApO1xuICAgICAgICAgICAgICAgIGlmICghbWF0Y2ggfHwgbWF0Y2hbMF0gIT09IHN1YnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBEb24ndCBpbnRlcnByZXQganVzdCBhbnkgaW52YWxpZCB0eXBlbmFtZSBhcyBhIFJlZ0V4cC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mdXp6eVN1YnR5cGVzLnNldChzdWJ0eXBlLCBuZXcgUmVnRXhwKHN1YnR5cGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFR5cGVQb2xpY3kodHlwZW5hbWUpIHtcbiAgICAgICAgaWYgKCFoYXNPd24uY2FsbCh0aGlzLnR5cGVQb2xpY2llcywgdHlwZW5hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCBwb2xpY3kgPSAodGhpcy50eXBlUG9saWNpZXNbdHlwZW5hbWVdID0ge30pO1xuICAgICAgICAgICAgcG9saWN5LmZpZWxkcyA9IHt9O1xuICAgICAgICAgICAgLy8gV2hlbiB0aGUgVHlwZVBvbGljeSBmb3IgdHlwZW5hbWUgaXMgZmlyc3QgYWNjZXNzZWQsIGluc3RlYWQgb2ZcbiAgICAgICAgICAgIC8vIHN0YXJ0aW5nIHdpdGggYW4gZW1wdHkgcG9saWN5IG9iamVjdCwgaW5oZXJpdCBhbnkgcHJvcGVydGllcyBvclxuICAgICAgICAgICAgLy8gZmllbGRzIGZyb20gdGhlIHR5cGUgcG9saWNpZXMgb2YgdGhlIHN1cGVydHlwZXMgb2YgdHlwZW5hbWUuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gQW55IHByb3BlcnRpZXMgb3IgZmllbGRzIGRlZmluZWQgZXhwbGljaXRseSB3aXRoaW4gdGhlIFR5cGVQb2xpY3lcbiAgICAgICAgICAgIC8vIGZvciB0eXBlbmFtZSB3aWxsIHRha2UgcHJlY2VkZW5jZSwgYW5kIGlmIHRoZXJlIGFyZSBtdWx0aXBsZVxuICAgICAgICAgICAgLy8gc3VwZXJ0eXBlcywgdGhlIHByb3BlcnRpZXMgb2YgcG9saWNpZXMgd2hvc2UgdHlwZXMgd2VyZSBhZGRlZFxuICAgICAgICAgICAgLy8gbGF0ZXIgdmlhIGFkZFBvc3NpYmxlVHlwZXMgd2lsbCB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aG9zZSBvZlxuICAgICAgICAgICAgLy8gZWFybGllciBzdXBlcnR5cGVzLiBUT0RPIFBlcmhhcHMgd2Ugc2hvdWxkIHdhcm4gYWJvdXQgdGhlc2VcbiAgICAgICAgICAgIC8vIGNvbmZsaWN0cyBpbiBkZXZlbG9wbWVudCwgYW5kIHJlY29tbWVuZCBkZWZpbmluZyB0aGUgcHJvcGVydHlcbiAgICAgICAgICAgIC8vIGV4cGxpY2l0bHkgaW4gdGhlIHN1YnR5cGUgcG9saWN5P1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEZpZWxkIHBvbGljeSBpbmhlcml0YW5jZSBpcyBhdG9taWMvc2hhbGxvdzogeW91IGNhbid0IGluaGVyaXQgYVxuICAgICAgICAgICAgLy8gZmllbGQgcG9saWN5IGFuZCB0aGVuIG92ZXJyaWRlIGp1c3QgaXRzIHJlYWQgZnVuY3Rpb24sIHNpbmNlIHJlYWRcbiAgICAgICAgICAgIC8vIGFuZCBtZXJnZSBmdW5jdGlvbnMgb2Z0ZW4gbmVlZCB0byBjb29wZXJhdGUsIHNvIGNoYW5naW5nIG9ubHkgb25lXG4gICAgICAgICAgICAvLyBvZiB0aGVtIHdvdWxkIGJlIGEgcmVjaXBlIGZvciBpbmNvbnNpc3RlbmN5LlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIE9uY2UgdGhlIFR5cGVQb2xpY3kgZm9yIHR5cGVuYW1lIGhhcyBiZWVuIGFjY2Vzc2VkLCBpdHMgcHJvcGVydGllcyBjYW5cbiAgICAgICAgICAgIC8vIHN0aWxsIGJlIHVwZGF0ZWQgZGlyZWN0bHkgdXNpbmcgYWRkVHlwZVBvbGljaWVzLCBidXQgZnV0dXJlIGNoYW5nZXMgdG9cbiAgICAgICAgICAgIC8vIGluaGVyaXRlZCBzdXBlcnR5cGUgcG9saWNpZXMgd2lsbCBub3QgYmUgcmVmbGVjdGVkIGluIHRoaXMgc3VidHlwZVxuICAgICAgICAgICAgLy8gcG9saWN5LCBiZWNhdXNlIHRoaXMgY29kZSBydW5zIGF0IG1vc3Qgb25jZSBwZXIgdHlwZW5hbWUuXG4gICAgICAgICAgICBsZXQgc3VwZXJ0eXBlcyA9IHRoaXMuc3VwZXJ0eXBlTWFwLmdldCh0eXBlbmFtZSk7XG4gICAgICAgICAgICBpZiAoIXN1cGVydHlwZXMgJiYgdGhpcy5mdXp6eVN1YnR5cGVzLnNpemUpIHtcbiAgICAgICAgICAgICAgICAvLyBUbyBtYWtlIHRoZSBpbmhlcml0YW5jZSBsb2dpYyB3b3JrIGZvciB1bmtub3duIHR5cGVuYW1lIHN0cmluZ3MgdGhhdFxuICAgICAgICAgICAgICAgIC8vIG1heSBoYXZlIGZ1enp5IHN1cGVydHlwZXMsIHdlIGdpdmUgdGhpcyB0eXBlbmFtZSBhbiBlbXB0eSBzdXBlcnR5cGVcbiAgICAgICAgICAgICAgICAvLyBzZXQgYW5kIHRoZW4gcG9wdWxhdGUgaXQgd2l0aCBhbnkgZnV6enkgc3VwZXJ0eXBlcyB0aGF0IG1hdGNoLlxuICAgICAgICAgICAgICAgIHN1cGVydHlwZXMgPSB0aGlzLmdldFN1cGVydHlwZVNldCh0eXBlbmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBvbmx5IHdvcmtzIGZvciB0eXBlbmFtZXMgdGhhdCBhcmUgZGlyZWN0bHkgbWF0Y2hlZCBieSBhIGZ1enp5XG4gICAgICAgICAgICAgICAgLy8gc3VwZXJ0eXBlLiBXaGF0IGlmIHRoZXJlIGlzIGFuIGludGVybWVkaWF0ZSBjaGFpbiBvZiBzdXBlcnR5cGVzP1xuICAgICAgICAgICAgICAgIC8vIFdoaWxlIHBvc3NpYmxlLCB0aGF0IHNpdHVhdGlvbiBjYW4gb25seSBiZSBzb2x2ZWQgZWZmZWN0aXZlbHkgYnlcbiAgICAgICAgICAgICAgICAvLyBzcGVjaWZ5aW5nIHRoZSBpbnRlcm1lZGlhdGUgcmVsYXRpb25zaGlwcyB2aWEgcG9zc2libGVUeXBlcywgbWFudWFsbHlcbiAgICAgICAgICAgICAgICAvLyBhbmQgaW4gYSBub24tZnV6enkgd2F5LlxuICAgICAgICAgICAgICAgIHRoaXMuZnV6enlTdWJ0eXBlcy5mb3JFYWNoKChyZWdFeHAsIGZ1enp5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWdFeHAudGVzdCh0eXBlbmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBmdXp6eSBwYXJhbWV0ZXIgaXMganVzdCB0aGUgb3JpZ2luYWwgc3RyaW5nIHZlcnNpb24gb2YgcmVnRXhwXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAobm90IGEgdmFsaWQgX190eXBlbmFtZSBzdHJpbmcpLCBidXQgd2UgY2FuIGxvb2sgdXAgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHN1cGVydHlwZShzKSBpbiB0aGlzLnN1cGVydHlwZU1hcC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1enp5U3VwZXJ0eXBlcyA9IHRoaXMuc3VwZXJ0eXBlTWFwLmdldChmdXp6eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnV6enlTdXBlcnR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnV6enlTdXBlcnR5cGVzLmZvckVhY2goKHN1cGVydHlwZSkgPT4gc3VwZXJ0eXBlcy5hZGQoc3VwZXJ0eXBlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdXBlcnR5cGVzICYmIHN1cGVydHlwZXMuc2l6ZSkge1xuICAgICAgICAgICAgICAgIHN1cGVydHlwZXMuZm9yRWFjaCgoc3VwZXJ0eXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZmllbGRzLCAuLi5yZXN0IH0gPSB0aGlzLmdldFR5cGVQb2xpY3koc3VwZXJ0eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwb2xpY3ksIHJlc3QpO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHBvbGljeS5maWVsZHMsIGZpZWxkcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5ib3ggPSB0aGlzLnRvQmVBZGRlZFt0eXBlbmFtZV07XG4gICAgICAgIGlmIChpbmJveCAmJiBpbmJveC5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIE1lcmdlIHRoZSBwZW5kaW5nIHBvbGljaWVzIGludG8gdGhpcy50eXBlUG9saWNpZXMsIGluIHRoZSBvcmRlciB0aGV5XG4gICAgICAgICAgICAvLyB3ZXJlIG9yaWdpbmFsbHkgcGFzc2VkIHRvIGFkZFR5cGVQb2xpY3kuXG4gICAgICAgICAgICBpbmJveC5zcGxpY2UoMCkuZm9yRWFjaCgocG9saWN5KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUeXBlUG9saWN5KHR5cGVuYW1lLCBwb2xpY3ksIHRoaXMudHlwZVBvbGljaWVzW3R5cGVuYW1lXS5maWVsZHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZVBvbGljaWVzW3R5cGVuYW1lXTtcbiAgICB9XG4gICAgZ2V0RmllbGRQb2xpY3kodHlwZW5hbWUsIGZpZWxkTmFtZSkge1xuICAgICAgICBpZiAodHlwZW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFR5cGVQb2xpY3kodHlwZW5hbWUpLmZpZWxkc1tmaWVsZE5hbWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFN1cGVydHlwZVNldChzdWJ0eXBlLCBjcmVhdGVJZk1pc3NpbmcpIHtcbiAgICAgICAgbGV0IHN1cGVydHlwZVNldCA9IHRoaXMuc3VwZXJ0eXBlTWFwLmdldChzdWJ0eXBlKTtcbiAgICAgICAgaWYgKCFzdXBlcnR5cGVTZXQgJiYgY3JlYXRlSWZNaXNzaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnN1cGVydHlwZU1hcC5zZXQoc3VidHlwZSwgKHN1cGVydHlwZVNldCA9IG5ldyBTZXQoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlcnR5cGVTZXQ7XG4gICAgfVxuICAgIGZyYWdtZW50TWF0Y2hlcyhmcmFnbWVudCwgdHlwZW5hbWUsIHJlc3VsdCwgdmFyaWFibGVzKSB7XG4gICAgICAgIGlmICghZnJhZ21lbnQudHlwZUNvbmRpdGlvbilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAvLyBJZiB0aGUgZnJhZ21lbnQgaGFzIGEgdHlwZSBjb25kaXRpb24gYnV0IHRoZSBvYmplY3Qgd2UncmUgbWF0Y2hpbmdcbiAgICAgICAgLy8gYWdhaW5zdCBkb2VzIG5vdCBoYXZlIGEgX190eXBlbmFtZSwgdGhlIGZyYWdtZW50IGNhbm5vdCBtYXRjaC5cbiAgICAgICAgaWYgKCF0eXBlbmFtZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3Qgc3VwZXJ0eXBlID0gZnJhZ21lbnQudHlwZUNvbmRpdGlvbi5uYW1lLnZhbHVlO1xuICAgICAgICAvLyBDb21tb24gY2FzZTogZnJhZ21lbnQgdHlwZSBjb25kaXRpb24gYW5kIF9fdHlwZW5hbWUgYXJlIHRoZSBzYW1lLlxuICAgICAgICBpZiAodHlwZW5hbWUgPT09IHN1cGVydHlwZSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodGhpcy51c2luZ1Bvc3NpYmxlVHlwZXMgJiYgdGhpcy5zdXBlcnR5cGVNYXAuaGFzKHN1cGVydHlwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVuYW1lU3VwZXJ0eXBlU2V0ID0gdGhpcy5nZXRTdXBlcnR5cGVTZXQodHlwZW5hbWUsIHRydWUpO1xuICAgICAgICAgICAgY29uc3Qgd29ya1F1ZXVlID0gW3R5cGVuYW1lU3VwZXJ0eXBlU2V0XTtcbiAgICAgICAgICAgIGNvbnN0IG1heWJlRW5xdWV1ZSA9IChzdWJ0eXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VwZXJ0eXBlU2V0ID0gdGhpcy5nZXRTdXBlcnR5cGVTZXQoc3VidHlwZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGlmIChzdXBlcnR5cGVTZXQgJiZcbiAgICAgICAgICAgICAgICAgICAgc3VwZXJ0eXBlU2V0LnNpemUgJiZcbiAgICAgICAgICAgICAgICAgICAgd29ya1F1ZXVlLmluZGV4T2Yoc3VwZXJ0eXBlU2V0KSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd29ya1F1ZXVlLnB1c2goc3VwZXJ0eXBlU2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBjaGVjayBmdXp6eSBzdWJ0eXBlcyBvbmx5IGlmIHdlIGVuY291bnRlcmVkIGZ1enp5XG4gICAgICAgICAgICAvLyBzdWJ0eXBlIHN0cmluZ3MgaW4gYWRkUG9zc2libGVUeXBlcywgYW5kIG9ubHkgd2hpbGUgd3JpdGluZyB0b1xuICAgICAgICAgICAgLy8gdGhlIGNhY2hlLCBzaW5jZSB0aGF0J3Mgd2hlbiBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0IGdpdmVzIGFcbiAgICAgICAgICAgIC8vIHN0cm9uZyBzaWduYWwgb2YgZnJhZ21lbnQgbWF0Y2hpbmcuIFRoZSBTdG9yZVJlYWRlciBjbGFzcyBjYWxsc1xuICAgICAgICAgICAgLy8gcG9saWNpZXMuZnJhZ21lbnRNYXRjaGVzIHdpdGhvdXQgcGFzc2luZyBhIHJlc3VsdCBvYmplY3QsIHNvXG4gICAgICAgICAgICAvLyBuZWVkVG9DaGVja0Z1enp5U3VidHlwZXMgaXMgYWx3YXlzIGZhbHNlIHdoaWxlIHJlYWRpbmcuXG4gICAgICAgICAgICBsZXQgbmVlZFRvQ2hlY2tGdXp6eVN1YnR5cGVzID0gISEocmVzdWx0ICYmIHRoaXMuZnV6enlTdWJ0eXBlcy5zaXplKTtcbiAgICAgICAgICAgIGxldCBjaGVja2luZ0Z1enp5U3VidHlwZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIEl0J3MgaW1wb3J0YW50IHRvIGtlZXAgZXZhbHVhdGluZyB3b3JrUXVldWUubGVuZ3RoIGVhY2ggdGltZSB0aHJvdWdoXG4gICAgICAgICAgICAvLyB0aGUgbG9vcCwgYmVjYXVzZSB0aGUgcXVldWUgY2FuIGdyb3cgd2hpbGUgd2UncmUgaXRlcmF0aW5nIG92ZXIgaXQuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmtRdWV1ZS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1cGVydHlwZVNldCA9IHdvcmtRdWV1ZVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoc3VwZXJ0eXBlU2V0LmhhcyhzdXBlcnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdHlwZW5hbWVTdXBlcnR5cGVTZXQuaGFzKHN1cGVydHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2luZ0Z1enp5U3VidHlwZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKDEwMCwgdHlwZW5hbWUsIHN1cGVydHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWNvcmQgcG9zaXRpdmUgcmVzdWx0cyBmb3IgZmFzdGVyIGZ1dHVyZSBsb29rdXAuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCB3ZSBjYW5ub3Qgc2FmZWx5IGNhY2hlIG5lZ2F0aXZlIHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIG5ldyBwb3NzaWJsZVR5cGVzIGRhdGEgY291bGQgYWx3YXlzIGJlIGFkZGVkIHRvIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG9saWNpZXMgY2xhc3MuXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlbmFtZVN1cGVydHlwZVNldC5hZGQoc3VwZXJ0eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3VwZXJ0eXBlU2V0LmZvckVhY2gobWF5YmVFbnF1ZXVlKTtcbiAgICAgICAgICAgICAgICBpZiAobmVlZFRvQ2hlY2tGdXp6eVN1YnR5cGVzICYmXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0YXJ0IGNoZWNraW5nIGZ1enp5IHN1YnR5cGVzIG9ubHkgYWZ0ZXIgZXhoYXVzdGluZyBhbGxcbiAgICAgICAgICAgICAgICAgICAgLy8gbm9uLWZ1enp5IHN1YnR5cGVzIChhZnRlciB0aGUgZmluYWwgaXRlcmF0aW9uIG9mIHRoZSBsb29wKS5cbiAgICAgICAgICAgICAgICAgICAgaSA9PT0gd29ya1F1ZXVlLmxlbmd0aCAtIDEgJiZcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgY291bGQgd2FpdCB0byBjb21wYXJlIGZyYWdtZW50LnNlbGVjdGlvblNldCB0byByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgd2UgdmVyaWZ5IHRoZSBzdXBlcnR5cGUsIGJ1dCB0aGlzIGNoZWNrIGlzIG9mdGVuIGxlc3NcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIHRoYW4gdGhhdCBzZWFyY2gsIGFuZCB3ZSB3aWxsIGhhdmUgdG8gZG8gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXBhcmlzb24gYW55d2F5IHdoZW5ldmVyIHdlIGZpbmQgYSBwb3RlbnRpYWwgbWF0Y2guXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQoZnJhZ21lbnQuc2VsZWN0aW9uU2V0LCByZXN1bHQsIHZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgYWx3YXlzIG5lZWQgdG8gY2hlY2sgZnV6enkgc3VidHlwZXMgKGlmIG5vIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICAvLyB3YXMgcHJvdmlkZWQsIG9yICF0aGlzLmZ1enp5U3VidHlwZXMuc2l6ZSksIGJ1dCwgd2hlbiB3ZSBkbyxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Ugb25seSB3YW50IHRvIGNoZWNrIHRoZW0gb25jZS5cbiAgICAgICAgICAgICAgICAgICAgbmVlZFRvQ2hlY2tGdXp6eVN1YnR5cGVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNraW5nRnV6enlTdWJ0eXBlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGZpbmQgYW55IGZ1enp5IHN1YnR5cGVzIHRoYXQgbWF0Y2ggdHlwZW5hbWUsIGV4dGVuZCB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gd29ya1F1ZXVlIHRvIHNlYXJjaCB0aHJvdWdoIHRoZSBzdXBlcnR5cGVzIG9mIHRob3NlIGZ1enp5XG4gICAgICAgICAgICAgICAgICAgIC8vIHN1YnR5cGVzLiBPdGhlcndpc2UgdGhlIGZvci1sb29wIHdpbGwgdGVybWluYXRlIGFuZCB3ZSdsbFxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZmFsc2UgYmVsb3cuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnV6enlTdWJ0eXBlcy5mb3JFYWNoKChyZWdFeHAsIGZ1enp5U3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHR5cGVuYW1lLm1hdGNoKHJlZ0V4cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMF0gPT09IHR5cGVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVFbnF1ZXVlKGZ1enp5U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaGFzS2V5QXJncyh0eXBlbmFtZSwgZmllbGROYW1lKSB7XG4gICAgICAgIGNvbnN0IHBvbGljeSA9IHRoaXMuZ2V0RmllbGRQb2xpY3kodHlwZW5hbWUsIGZpZWxkTmFtZSk7XG4gICAgICAgIHJldHVybiAhIShwb2xpY3kgJiYgcG9saWN5LmtleUZuKTtcbiAgICB9XG4gICAgZ2V0U3RvcmVGaWVsZE5hbWUoZmllbGRTcGVjKSB7XG4gICAgICAgIGNvbnN0IHsgdHlwZW5hbWUsIGZpZWxkTmFtZSB9ID0gZmllbGRTcGVjO1xuICAgICAgICBjb25zdCBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KHR5cGVuYW1lLCBmaWVsZE5hbWUpO1xuICAgICAgICBsZXQgc3RvcmVGaWVsZE5hbWU7XG4gICAgICAgIGxldCBrZXlGbiA9IHBvbGljeSAmJiBwb2xpY3kua2V5Rm47XG4gICAgICAgIGlmIChrZXlGbiAmJiB0eXBlbmFtZSkge1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlbmFtZSxcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWUsXG4gICAgICAgICAgICAgICAgZmllbGQ6IGZpZWxkU3BlYy5maWVsZCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogZmllbGRTcGVjLnZhcmlhYmxlcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gYXJnc0Zyb21GaWVsZFNwZWNpZmllcihmaWVsZFNwZWMpO1xuICAgICAgICAgICAgd2hpbGUgKGtleUZuKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BlY2lmaWVyT3JTdHJpbmcgPSBrZXlGbihhcmdzLCBjb250ZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShzcGVjaWZpZXJPclN0cmluZykpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5Rm4gPSBrZXlBcmdzRm5Gcm9tU3BlY2lmaWVyKHNwZWNpZmllck9yU3RyaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjdXN0b20ga2V5Rm4gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBmYWxsIGJhY2sgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gZmllbGROYW1lIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlRmllbGROYW1lID0gc3BlY2lmaWVyT3JTdHJpbmcgfHwgZmllbGROYW1lO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0b3JlRmllbGROYW1lID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHN0b3JlRmllbGROYW1lID1cbiAgICAgICAgICAgICAgICBmaWVsZFNwZWMuZmllbGQgP1xuICAgICAgICAgICAgICAgICAgICBzdG9yZUtleU5hbWVGcm9tRmllbGQoZmllbGRTcGVjLmZpZWxkLCBmaWVsZFNwZWMudmFyaWFibGVzKVxuICAgICAgICAgICAgICAgICAgICA6IGdldFN0b3JlS2V5TmFtZShmaWVsZE5hbWUsIGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoZmllbGRTcGVjKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJuaW5nIGZhbHNlIGZyb20gYSBrZXlBcmdzIGZ1bmN0aW9uIGlzIGxpa2UgY29uZmlndXJpbmdcbiAgICAgICAgLy8ga2V5QXJnczogZmFsc2UsIGJ1dCBtb3JlIGR5bmFtaWMuXG4gICAgICAgIGlmIChzdG9yZUZpZWxkTmFtZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWVsZE5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIGN1c3RvbSBmaWVsZCBuYW1lcyBzdGFydCB3aXRoIHRoZSBhY3R1YWwgZmllbGQubmFtZS52YWx1ZVxuICAgICAgICAvLyBvZiB0aGUgZmllbGQsIHNvIHdlIGNhbiBhbHdheXMgZmlndXJlIG91dCB3aGljaCBwcm9wZXJ0aWVzIG9mIGFcbiAgICAgICAgLy8gU3RvcmVPYmplY3QgY29ycmVzcG9uZCB0byB3aGljaCBvcmlnaW5hbCBmaWVsZCBuYW1lcy5cbiAgICAgICAgcmV0dXJuIGZpZWxkTmFtZSA9PT0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSkgPyBzdG9yZUZpZWxkTmFtZVxuICAgICAgICAgICAgOiBmaWVsZE5hbWUgKyBcIjpcIiArIHN0b3JlRmllbGROYW1lO1xuICAgIH1cbiAgICByZWFkRmllbGQob3B0aW9ucywgY29udGV4dCkge1xuICAgICAgICBjb25zdCBvYmplY3RPclJlZmVyZW5jZSA9IG9wdGlvbnMuZnJvbTtcbiAgICAgICAgaWYgKCFvYmplY3RPclJlZmVyZW5jZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgbmFtZU9yRmllbGQgPSBvcHRpb25zLmZpZWxkIHx8IG9wdGlvbnMuZmllbGROYW1lO1xuICAgICAgICBpZiAoIW5hbWVPckZpZWxkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAob3B0aW9ucy50eXBlbmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlbmFtZSA9IGNvbnRleHQuc3RvcmUuZ2V0RmllbGRWYWx1ZShvYmplY3RPclJlZmVyZW5jZSwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgaWYgKHR5cGVuYW1lKVxuICAgICAgICAgICAgICAgIG9wdGlvbnMudHlwZW5hbWUgPSB0eXBlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdG9yZUZpZWxkTmFtZSA9IHRoaXMuZ2V0U3RvcmVGaWVsZE5hbWUob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGNvbnRleHQuc3RvcmUuZ2V0RmllbGRWYWx1ZShvYmplY3RPclJlZmVyZW5jZSwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICBjb25zdCBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KG9wdGlvbnMudHlwZW5hbWUsIGZpZWxkTmFtZSk7XG4gICAgICAgIGNvbnN0IHJlYWQgPSBwb2xpY3kgJiYgcG9saWN5LnJlYWQ7XG4gICAgICAgIGlmIChyZWFkKSB7XG4gICAgICAgICAgICBjb25zdCByZWFkT3B0aW9ucyA9IG1ha2VGaWVsZEZ1bmN0aW9uT3B0aW9ucyh0aGlzLCBvYmplY3RPclJlZmVyZW5jZSwgb3B0aW9ucywgY29udGV4dCwgY29udGV4dC5zdG9yZS5nZXRTdG9yYWdlKGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKSA/XG4gICAgICAgICAgICAgICAgb2JqZWN0T3JSZWZlcmVuY2UuX19yZWZcbiAgICAgICAgICAgICAgICA6IG9iamVjdE9yUmVmZXJlbmNlLCBzdG9yZUZpZWxkTmFtZSkpO1xuICAgICAgICAgICAgLy8gQ2FsbCByZWFkKGV4aXN0aW5nLCByZWFkT3B0aW9ucykgd2l0aCBjYWNoZVNsb3QgaG9sZGluZyB0aGlzLmNhY2hlLlxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlU2xvdC53aXRoVmFsdWUodGhpcy5jYWNoZSwgcmVhZCwgW1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nLFxuICAgICAgICAgICAgICAgIHJlYWRPcHRpb25zLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgIH1cbiAgICBnZXRSZWFkRnVuY3Rpb24odHlwZW5hbWUsIGZpZWxkTmFtZSkge1xuICAgICAgICBjb25zdCBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KHR5cGVuYW1lLCBmaWVsZE5hbWUpO1xuICAgICAgICByZXR1cm4gcG9saWN5ICYmIHBvbGljeS5yZWFkO1xuICAgIH1cbiAgICBnZXRNZXJnZUZ1bmN0aW9uKHBhcmVudFR5cGVuYW1lLCBmaWVsZE5hbWUsIGNoaWxkVHlwZW5hbWUpIHtcbiAgICAgICAgbGV0IHBvbGljeSA9IHRoaXMuZ2V0RmllbGRQb2xpY3kocGFyZW50VHlwZW5hbWUsIGZpZWxkTmFtZSk7XG4gICAgICAgIGxldCBtZXJnZSA9IHBvbGljeSAmJiBwb2xpY3kubWVyZ2U7XG4gICAgICAgIGlmICghbWVyZ2UgJiYgY2hpbGRUeXBlbmFtZSkge1xuICAgICAgICAgICAgcG9saWN5ID0gdGhpcy5nZXRUeXBlUG9saWN5KGNoaWxkVHlwZW5hbWUpO1xuICAgICAgICAgICAgbWVyZ2UgPSBwb2xpY3kgJiYgcG9saWN5Lm1lcmdlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXJnZTtcbiAgICB9XG4gICAgcnVuTWVyZ2VGdW5jdGlvbihleGlzdGluZywgaW5jb21pbmcsIHsgZmllbGQsIHR5cGVuYW1lLCBtZXJnZSB9LCBjb250ZXh0LCBzdG9yYWdlKSB7XG4gICAgICAgIGlmIChtZXJnZSA9PT0gbWVyZ2VUcnVlRm4pIHtcbiAgICAgICAgICAgIC8vIEluc3RlYWQgb2YgZ29pbmcgdG8gdGhlIHRyb3VibGUgb2YgY3JlYXRpbmcgYSBmdWxsXG4gICAgICAgICAgICAvLyBGaWVsZEZ1bmN0aW9uT3B0aW9ucyBvYmplY3QgYW5kIGNhbGxpbmcgbWVyZ2VUcnVlRm4sIHdlIGNhblxuICAgICAgICAgICAgLy8gc2ltcGx5IGNhbGwgbWVyZ2VPYmplY3RzLCBhcyBtZXJnZVRydWVGbiB3b3VsZC5cbiAgICAgICAgICAgIHJldHVybiBtYWtlTWVyZ2VPYmplY3RzRnVuY3Rpb24oY29udGV4dC5zdG9yZSkoZXhpc3RpbmcsIGluY29taW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVyZ2UgPT09IG1lcmdlRmFsc2VGbikge1xuICAgICAgICAgICAgLy8gTGlrZXdpc2UgZm9yIG1lcmdlRmFsc2VGbiwgd2hvc2UgaW1wbGVtZW50YXRpb24gaXMgZXZlbiBzaW1wbGVyLlxuICAgICAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGNhY2hlLndyaXRlUXVlcnkgb3IgY2FjaGUud3JpdGVGcmFnbWVudCB3YXMgY2FsbGVkIHdpdGhcbiAgICAgICAgLy8gb3B0aW9ucy5vdmVyd3JpdGUgc2V0IHRvIHRydWUsIHdlIHN0aWxsIGNhbGwgbWVyZ2UgZnVuY3Rpb25zLCBidXRcbiAgICAgICAgLy8gdGhlIGV4aXN0aW5nIGRhdGEgaXMgYWx3YXlzIHVuZGVmaW5lZCwgc28gdGhlIG1lcmdlIGZ1bmN0aW9uIHdpbGxcbiAgICAgICAgLy8gbm90IGF0dGVtcHQgdG8gY29tYmluZSB0aGUgaW5jb21pbmcgZGF0YSB3aXRoIHRoZSBleGlzdGluZyBkYXRhLlxuICAgICAgICBpZiAoY29udGV4dC5vdmVyd3JpdGUpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXJnZShleGlzdGluZywgaW5jb21pbmcsIG1ha2VGaWVsZEZ1bmN0aW9uT3B0aW9ucyh0aGlzLCBcbiAgICAgICAgLy8gVW5saWtlIG9wdGlvbnMucmVhZEZpZWxkIGZvciByZWFkIGZ1bmN0aW9ucywgd2UgZG8gbm90IGZhbGxcbiAgICAgICAgLy8gYmFjayB0byB0aGUgY3VycmVudCBvYmplY3QgaWYgbm8gZm9yZWlnbk9iak9yUmVmIGlzIHByb3ZpZGVkLFxuICAgICAgICAvLyBiZWNhdXNlIGl0J3Mgbm90IGNsZWFyIHdoYXQgdGhlIGN1cnJlbnQgb2JqZWN0IHNob3VsZCBiZSBmb3JcbiAgICAgICAgLy8gbWVyZ2UgZnVuY3Rpb25zOiB0aGUgKHBvc3NpYmx5IHVuZGVmaW5lZCkgZXhpc3Rpbmcgb2JqZWN0LCBvclxuICAgICAgICAvLyB0aGUgaW5jb21pbmcgb2JqZWN0PyBJZiB5b3UgdGhpbmsgeW91ciBtZXJnZSBmdW5jdGlvbiBuZWVkc1xuICAgICAgICAvLyB0byByZWFkIHNpYmxpbmcgZmllbGRzIGluIG9yZGVyIHRvIHByb2R1Y2UgYSBuZXcgdmFsdWUgZm9yXG4gICAgICAgIC8vIHRoZSBjdXJyZW50IGZpZWxkLCB5b3UgbWlnaHQgd2FudCB0byByZXRoaW5rIHlvdXIgc3RyYXRlZ3ksXG4gICAgICAgIC8vIGJlY2F1c2UgdGhhdCdzIGEgcmVjaXBlIGZvciBtYWtpbmcgbWVyZ2UgYmVoYXZpb3Igc2Vuc2l0aXZlXG4gICAgICAgIC8vIHRvIHRoZSBvcmRlciBpbiB3aGljaCBmaWVsZHMgYXJlIHdyaXR0ZW4gaW50byB0aGUgY2FjaGUuXG4gICAgICAgIC8vIEhvd2V2ZXIsIHJlYWRGaWVsZChuYW1lLCByZWYpIGlzIHVzZWZ1bCBmb3IgbWVyZ2UgZnVuY3Rpb25zXG4gICAgICAgIC8vIHRoYXQgbmVlZCB0byBkZWR1cGxpY2F0ZSBjaGlsZCBvYmplY3RzIGFuZCByZWZlcmVuY2VzLlxuICAgICAgICB2b2lkIDAsIHtcbiAgICAgICAgICAgIHR5cGVuYW1lLFxuICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZC5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICB2YXJpYWJsZXM6IGNvbnRleHQudmFyaWFibGVzLFxuICAgICAgICB9LCBjb250ZXh0LCBzdG9yYWdlIHx8IHt9KSk7XG4gICAgfVxufVxuZnVuY3Rpb24gbWFrZUZpZWxkRnVuY3Rpb25PcHRpb25zKHBvbGljaWVzLCBvYmplY3RPclJlZmVyZW5jZSwgZmllbGRTcGVjLCBjb250ZXh0LCBzdG9yYWdlKSB7XG4gICAgY29uc3Qgc3RvcmVGaWVsZE5hbWUgPSBwb2xpY2llcy5nZXRTdG9yZUZpZWxkTmFtZShmaWVsZFNwZWMpO1xuICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgIGNvbnN0IHZhcmlhYmxlcyA9IGZpZWxkU3BlYy52YXJpYWJsZXMgfHwgY29udGV4dC52YXJpYWJsZXM7XG4gICAgY29uc3QgeyB0b1JlZmVyZW5jZSwgY2FuUmVhZCB9ID0gY29udGV4dC5zdG9yZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcmdzOiBhcmdzRnJvbUZpZWxkU3BlY2lmaWVyKGZpZWxkU3BlYyksXG4gICAgICAgIGZpZWxkOiBmaWVsZFNwZWMuZmllbGQgfHwgbnVsbCxcbiAgICAgICAgZmllbGROYW1lLFxuICAgICAgICBzdG9yZUZpZWxkTmFtZSxcbiAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICBpc1JlZmVyZW5jZSxcbiAgICAgICAgdG9SZWZlcmVuY2UsXG4gICAgICAgIHN0b3JhZ2UsXG4gICAgICAgIGNhY2hlOiBwb2xpY2llcy5jYWNoZSxcbiAgICAgICAgY2FuUmVhZCxcbiAgICAgICAgcmVhZEZpZWxkKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBwb2xpY2llcy5yZWFkRmllbGQobm9ybWFsaXplUmVhZEZpZWxkT3B0aW9ucyhhcmdzLCBvYmplY3RPclJlZmVyZW5jZSwgdmFyaWFibGVzKSwgY29udGV4dCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1lcmdlT2JqZWN0czogbWFrZU1lcmdlT2JqZWN0c0Z1bmN0aW9uKGNvbnRleHQuc3RvcmUpLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUmVhZEZpZWxkT3B0aW9ucyhyZWFkRmllbGRBcmdzLCBvYmplY3RPclJlZmVyZW5jZSwgdmFyaWFibGVzKSB7XG4gICAgY29uc3QgeyAwOiBmaWVsZE5hbWVPck9wdGlvbnMsIDE6IGZyb20sIGxlbmd0aDogYXJnYyB9ID0gcmVhZEZpZWxkQXJncztcbiAgICBsZXQgb3B0aW9ucztcbiAgICBpZiAodHlwZW9mIGZpZWxkTmFtZU9yT3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZE5hbWVPck9wdGlvbnMsXG4gICAgICAgICAgICAvLyBEZWZhdWx0IHRvIG9iamVjdE9yUmVmZXJlbmNlIG9ubHkgd2hlbiBubyBzZWNvbmQgYXJndW1lbnQgd2FzXG4gICAgICAgICAgICAvLyBwYXNzZWQgZm9yIHRoZSBmcm9tIHBhcmFtZXRlciwgbm90IHdoZW4gdW5kZWZpbmVkIGlzIGV4cGxpY2l0bHlcbiAgICAgICAgICAgIC8vIHBhc3NlZCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LlxuICAgICAgICAgICAgZnJvbTogYXJnYyA+IDEgPyBmcm9tIDogb2JqZWN0T3JSZWZlcmVuY2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvcHRpb25zID0geyAuLi5maWVsZE5hbWVPck9wdGlvbnMgfTtcbiAgICAgICAgLy8gRGVmYXVsdCB0byBvYmplY3RPclJlZmVyZW5jZSBvbmx5IHdoZW4gZmllbGROYW1lT3JPcHRpb25zLmZyb20gaXNcbiAgICAgICAgLy8gYWN0dWFsbHkgb21pdHRlZCwgcmF0aGVyIHRoYW4ganVzdCB1bmRlZmluZWQuXG4gICAgICAgIGlmICghaGFzT3duLmNhbGwob3B0aW9ucywgXCJmcm9tXCIpKSB7XG4gICAgICAgICAgICBvcHRpb25zLmZyb20gPSBvYmplY3RPclJlZmVyZW5jZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoX19ERVZfXyAmJiBvcHRpb25zLmZyb20gPT09IHZvaWQgMCkge1xuICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKDEwMSwgc3RyaW5naWZ5Rm9yRGlzcGxheShBcnJheS5mcm9tKHJlYWRGaWVsZEFyZ3MpKSk7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgPT09IG9wdGlvbnMudmFyaWFibGVzKSB7XG4gICAgICAgIG9wdGlvbnMudmFyaWFibGVzID0gdmFyaWFibGVzO1xuICAgIH1cbiAgICByZXR1cm4gb3B0aW9ucztcbn1cbmZ1bmN0aW9uIG1ha2VNZXJnZU9iamVjdHNGdW5jdGlvbihzdG9yZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZU9iamVjdHMoZXhpc3RpbmcsIGluY29taW5nKSB7XG4gICAgICAgIGlmIChpc0FycmF5KGV4aXN0aW5nKSB8fCBpc0FycmF5KGluY29taW5nKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3SW52YXJpYW50RXJyb3IoMTAyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGVzZSBkeW5hbWljIGNoZWNrcyBhcmUgbmVjZXNzYXJ5IGJlY2F1c2UgdGhlIHBhcmFtZXRlcnMgb2YgYVxuICAgICAgICAvLyBjdXN0b20gbWVyZ2UgZnVuY3Rpb24gY2FuIGVhc2lseSBoYXZlIHRoZSBhbnkgdHlwZSwgc28gdGhlIHR5cGVcbiAgICAgICAgLy8gc3lzdGVtIGNhbm5vdCBhbHdheXMgZW5mb3JjZSB0aGUgU3RvcmVPYmplY3QgfCBSZWZlcmVuY2UgcGFyYW1ldGVyXG4gICAgICAgIC8vIHR5cGVzIG9mIG9wdGlvbnMubWVyZ2VPYmplY3RzLlxuICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KGV4aXN0aW5nKSAmJiBpc05vbk51bGxPYmplY3QoaW5jb21pbmcpKSB7XG4gICAgICAgICAgICBjb25zdCBlVHlwZSA9IHN0b3JlLmdldEZpZWxkVmFsdWUoZXhpc3RpbmcsIFwiX190eXBlbmFtZVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGlUeXBlID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShpbmNvbWluZywgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgY29uc3QgdHlwZXNEaWZmZXIgPSBlVHlwZSAmJiBpVHlwZSAmJiBlVHlwZSAhPT0gaVR5cGU7XG4gICAgICAgICAgICBpZiAodHlwZXNEaWZmZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5jb21pbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2UoZXhpc3RpbmcpICYmIHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGluY29taW5nKSkge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbm9ybWFsaXplZCBFbnRpdHlTdG9yZSBmb3IgdGhlIGVudGl0eSBpZGVudGlmaWVkIGJ5XG4gICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcuX19yZWYsIHByZWZlcnJpbmcvb3ZlcndyaXRpbmcgYW55IGZpZWxkcyBjb250cmlidXRlZCBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXdlciBpbmNvbWluZyBTdG9yZU9iamVjdC5cbiAgICAgICAgICAgICAgICBzdG9yZS5tZXJnZShleGlzdGluZy5fX3JlZiwgaW5jb21pbmcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdG9yZVZhbHVlSXNTdG9yZU9iamVjdChleGlzdGluZykgJiYgaXNSZWZlcmVuY2UoaW5jb21pbmcpKSB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBub3JtYWxpemVkIEVudGl0eVN0b3JlIGZvciB0aGUgZW50aXR5IGlkZW50aWZpZWQgYnlcbiAgICAgICAgICAgICAgICAvLyBpbmNvbWluZy5fX3JlZiwgdGFraW5nIGZpZWxkcyBmcm9tIHRoZSBvbGRlciBleGlzdGluZyBvYmplY3Qgb25seSBpZlxuICAgICAgICAgICAgICAgIC8vIHRob3NlIGZpZWxkcyBhcmUgbm90IGFscmVhZHkgcHJlc2VudCBpbiB0aGUgbmV3ZXIgU3RvcmVPYmplY3RcbiAgICAgICAgICAgICAgICAvLyBpZGVudGlmaWVkIGJ5IGluY29taW5nLl9fcmVmLlxuICAgICAgICAgICAgICAgIHN0b3JlLm1lcmdlKGV4aXN0aW5nLCBpbmNvbWluZy5fX3JlZik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGV4aXN0aW5nKSAmJlxuICAgICAgICAgICAgICAgIHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGluY29taW5nKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmV4aXN0aW5nLCAuLi5pbmNvbWluZyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNvbWluZztcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cG9saWNpZXMuanMubWFwXG4iLAogICAgImltcG9ydCB7IEtpbmQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gXCJvcHRpbWlzbVwiO1xuaW1wb3J0IHsgYWRkVHlwZW5hbWVUb0RvY3VtZW50LCBjYWNoZVNpemVzLCBjYW5vbmljYWxTdHJpbmdpZnksIGlzUmVmZXJlbmNlLCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbmltcG9ydCB7IF9fREVWX18gfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2Vudmlyb25tZW50XCI7XG5pbXBvcnQgeyBEZWVwTWVyZ2VyLCBnZXREZWZhdWx0VmFsdWVzLCBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24sIGdldE1haW5EZWZpbml0aW9uLCBnZXRRdWVyeURlZmluaXRpb24sIGlzQXJyYXksIGlzRmllbGQsIGlzTm9uTnVsbE9iamVjdCwgbWFrZVJlZmVyZW5jZSwgbWF5YmVEZWVwRnJlZXplLCBtZXJnZURlZXBBcnJheSwgcmVzdWx0S2V5TmFtZUZyb21GaWVsZCwgc2hvdWxkSW5jbHVkZSwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIG5ld0ludmFyaWFudEVycm9yLCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW52YXJpYW50XCI7XG5pbXBvcnQgeyBNaXNzaW5nRmllbGRFcnJvciB9IGZyb20gXCIuLi9jb3JlL3R5cGVzL2NvbW1vbi5qc1wiO1xuaW1wb3J0IHsgbWF5YmVEZXBlbmRPbkV4aXN0ZW5jZU9mRW50aXR5LCBzdXBwb3J0c1Jlc3VsdENhY2hpbmcsIH0gZnJvbSBcIi4vZW50aXR5U3RvcmUuanNcIjtcbmltcG9ydCB7IGV4dHJhY3RGcmFnbWVudENvbnRleHQsIGdldFR5cGVuYW1lRnJvbVN0b3JlT2JqZWN0LCB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbmZ1bmN0aW9uIGV4ZWNTZWxlY3Rpb25TZXRLZXlBcmdzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gW29wdGlvbnMuc2VsZWN0aW9uU2V0LCBvcHRpb25zLm9iamVjdE9yUmVmZXJlbmNlLCBvcHRpb25zLmNvbnRleHRdO1xufVxuZXhwb3J0IGNsYXNzIFN0b3JlUmVhZGVyIHtcbiAgICAvLyBjYWNoZWQgdmVyc2lvbiBvZiBleGVjdXRlU2VsZWN0aW9uU2V0XG4gICAgZXhlY3V0ZVNlbGVjdGlvblNldDtcbiAgICAvLyBjYWNoZWQgdmVyc2lvbiBvZiBleGVjdXRlU3ViU2VsZWN0ZWRBcnJheVxuICAgIGV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5O1xuICAgIGNvbmZpZztcbiAgICBrbm93blJlc3VsdHMgPSBuZXcgV2Vha01hcCgpO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgLy8gbWVtb2l6ZWQgZnVuY3Rpb25zIGluIHRoaXMgY2xhc3Mgd2lsbCBiZSBcImdhcmJhZ2UtY29sbGVjdGVkXCJcbiAgICAgICAgLy8gYnkgcmVjcmVhdGluZyB0aGUgd2hvbGUgYFN0b3JlUmVhZGVyYCBpblxuICAgICAgICAvLyBgSW5NZW1vcnlDYWNoZS5yZXNldFJlc3VsdHNDYWNoZWBcbiAgICAgICAgLy8gKHRyaWdnZXJlZCBmcm9tIGBJbk1lbW9yeUNhY2hlLmdjYCB3aXRoIGByZXNldFJlc3VsdENhY2hlOiB0cnVlYClcbiAgICAgICAgdGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0ID0gd3JhcCgob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGVla0FyZ3MgPSBleGVjU2VsZWN0aW9uU2V0S2V5QXJncyhvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IG90aGVyID0gdGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0LnBlZWsoLi4ucGVla0FyZ3MpO1xuICAgICAgICAgICAgaWYgKG90aGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgcHJldmlvdXNseSByZWFkIHRoaXMgcmVzdWx0IHdpdGggY2Fub25pemF0aW9uIGVuYWJsZWQsIHdlIGNhblxuICAgICAgICAgICAgICAgIC8vIHJldHVybiB0aGF0IGNhbm9uaXplZCByZXN1bHQgYXMtaXMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG90aGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWF5YmVEZXBlbmRPbkV4aXN0ZW5jZU9mRW50aXR5KG9wdGlvbnMuY29udGV4dC5zdG9yZSwgb3B0aW9ucy5lbmNsb3NpbmdSZWYuX19yZWYpO1xuICAgICAgICAgICAgLy8gRmluYWxseSwgaWYgd2UgZGlkbid0IGZpbmQgYW55IHVzZWZ1bCBwcmV2aW91cyByZXN1bHRzLCBydW4gdGhlIHJlYWxcbiAgICAgICAgICAgIC8vIGV4ZWNTZWxlY3Rpb25TZXRJbXBsIG1ldGhvZCB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY1NlbGVjdGlvblNldEltcGwob3B0aW9ucyk7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1heDogY2FjaGVTaXplc1tcImluTWVtb3J5Q2FjaGUuZXhlY3V0ZVNlbGVjdGlvblNldFwiXSB8fFxuICAgICAgICAgICAgICAgIDUwMDAwIC8qIGRlZmF1bHRDYWNoZVNpemVzW1wiaW5NZW1vcnlDYWNoZS5leGVjdXRlU2VsZWN0aW9uU2V0XCJdICovLFxuICAgICAgICAgICAga2V5QXJnczogZXhlY1NlbGVjdGlvblNldEtleUFyZ3MsXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHBhcmFtZXRlcnMgb2YgbWFrZUNhY2hlS2V5IGFyZSBkZXRlcm1pbmVkIGJ5IHRoZVxuICAgICAgICAgICAgLy8gYXJyYXkgcmV0dXJuZWQgYnkga2V5QXJncy5cbiAgICAgICAgICAgIG1ha2VDYWNoZUtleShzZWxlY3Rpb25TZXQsIHBhcmVudCwgY29udGV4dCkge1xuICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0c1Jlc3VsdENhY2hpbmcoY29udGV4dC5zdG9yZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuc3RvcmUubWFrZUNhY2hlS2V5KHNlbGVjdGlvblNldCwgaXNSZWZlcmVuY2UocGFyZW50KSA/IHBhcmVudC5fX3JlZiA6IHBhcmVudCwgY29udGV4dC52YXJTdHJpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5ID0gd3JhcCgob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgbWF5YmVEZXBlbmRPbkV4aXN0ZW5jZU9mRW50aXR5KG9wdGlvbnMuY29udGV4dC5zdG9yZSwgb3B0aW9ucy5lbmNsb3NpbmdSZWYuX19yZWYpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhlY1N1YlNlbGVjdGVkQXJyYXlJbXBsKG9wdGlvbnMpO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtYXg6IGNhY2hlU2l6ZXNbXCJpbk1lbW9yeUNhY2hlLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5XCJdIHx8XG4gICAgICAgICAgICAgICAgMTAwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJpbk1lbW9yeUNhY2hlLmV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5XCJdICovLFxuICAgICAgICAgICAgbWFrZUNhY2hlS2V5KHsgZmllbGQsIGFycmF5LCBjb250ZXh0IH0pIHtcbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKGNvbnRleHQuc3RvcmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnN0b3JlLm1ha2VDYWNoZUtleShmaWVsZCwgYXJyYXksIGNvbnRleHQudmFyU3RyaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBzdG9yZSBhbmQgYSBxdWVyeSwgcmV0dXJuIGFzIG11Y2ggb2YgdGhlIHJlc3VsdCBhcyBwb3NzaWJsZSBhbmRcbiAgICAgKiBpZGVudGlmeSBpZiBhbnkgZGF0YSB3YXMgbWlzc2luZyBmcm9tIHRoZSBzdG9yZS5cbiAgICAgKi9cbiAgICBkaWZmUXVlcnlBZ2FpbnN0U3RvcmUoeyBzdG9yZSwgcXVlcnksIHJvb3RJZCA9IFwiUk9PVF9RVUVSWVwiLCB2YXJpYWJsZXMsIHJldHVyblBhcnRpYWxEYXRhID0gdHJ1ZSwgfSkge1xuICAgICAgICBjb25zdCBwb2xpY2llcyA9IHRoaXMuY29uZmlnLmNhY2hlLnBvbGljaWVzO1xuICAgICAgICB2YXJpYWJsZXMgPSB7XG4gICAgICAgICAgICAuLi5nZXREZWZhdWx0VmFsdWVzKGdldFF1ZXJ5RGVmaW5pdGlvbihxdWVyeSkpLFxuICAgICAgICAgICAgLi4udmFyaWFibGVzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByb290UmVmID0gbWFrZVJlZmVyZW5jZShyb290SWQpO1xuICAgICAgICBjb25zdCBleGVjUmVzdWx0ID0gdGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0KHtcbiAgICAgICAgICAgIHNlbGVjdGlvblNldDogZ2V0TWFpbkRlZmluaXRpb24ocXVlcnkpLnNlbGVjdGlvblNldCxcbiAgICAgICAgICAgIG9iamVjdE9yUmVmZXJlbmNlOiByb290UmVmLFxuICAgICAgICAgICAgZW5jbG9zaW5nUmVmOiByb290UmVmLFxuICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgIHN0b3JlLFxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgICAgIHBvbGljaWVzLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICB2YXJTdHJpbmc6IGNhbm9uaWNhbFN0cmluZ2lmeSh2YXJpYWJsZXMpLFxuICAgICAgICAgICAgICAgIC4uLmV4dHJhY3RGcmFnbWVudENvbnRleHQocXVlcnksIHRoaXMuY29uZmlnLmZyYWdtZW50cyksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG1pc3Npbmc7XG4gICAgICAgIGlmIChleGVjUmVzdWx0Lm1pc3NpbmcpIHtcbiAgICAgICAgICAgIG1pc3NpbmcgPSBuZXcgTWlzc2luZ0ZpZWxkRXJyb3IoZmlyc3RNaXNzaW5nKGV4ZWNSZXN1bHQubWlzc2luZyksIGV4ZWNSZXN1bHQubWlzc2luZywgcXVlcnksIHZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAhbWlzc2luZztcbiAgICAgICAgY29uc3QgeyByZXN1bHQgfSA9IGV4ZWNSZXN1bHQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN1bHQ6IGNvbXBsZXRlIHx8IHJldHVyblBhcnRpYWxEYXRhID9cbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmxlbmd0aCA9PT0gMCA/XG4gICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICAgICAgOiByZXN1bHRcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICBjb21wbGV0ZSxcbiAgICAgICAgICAgIG1pc3NpbmcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlzRnJlc2gocmVzdWx0LCBwYXJlbnQsIHNlbGVjdGlvblNldCwgY29udGV4dCkge1xuICAgICAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKGNvbnRleHQuc3RvcmUpICYmXG4gICAgICAgICAgICB0aGlzLmtub3duUmVzdWx0cy5nZXQocmVzdWx0KSA9PT0gc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICBjb25zdCBsYXRlc3QgPSB0aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQucGVlayhzZWxlY3Rpb25TZXQsIHBhcmVudCwgY29udGV4dCk7XG4gICAgICAgICAgICBpZiAobGF0ZXN0ICYmIHJlc3VsdCA9PT0gbGF0ZXN0LnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gVW5jYWNoZWQgdmVyc2lvbiBvZiBleGVjdXRlU2VsZWN0aW9uU2V0LlxuICAgIGV4ZWNTZWxlY3Rpb25TZXRJbXBsKHsgc2VsZWN0aW9uU2V0LCBvYmplY3RPclJlZmVyZW5jZSwgZW5jbG9zaW5nUmVmLCBjb250ZXh0LCB9KSB7XG4gICAgICAgIGlmIChpc1JlZmVyZW5jZShvYmplY3RPclJlZmVyZW5jZSkgJiZcbiAgICAgICAgICAgICFjb250ZXh0LnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkW29iamVjdE9yUmVmZXJlbmNlLl9fcmVmXSAmJlxuICAgICAgICAgICAgIWNvbnRleHQuc3RvcmUuaGFzKG9iamVjdE9yUmVmZXJlbmNlLl9fcmVmKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHt9LFxuICAgICAgICAgICAgICAgIG1pc3Npbmc6IGBEYW5nbGluZyByZWZlcmVuY2UgdG8gbWlzc2luZyAke29iamVjdE9yUmVmZXJlbmNlLl9fcmVmfSBvYmplY3RgLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHZhcmlhYmxlcywgcG9saWNpZXMsIHN0b3JlIH0gPSBjb250ZXh0O1xuICAgICAgICBjb25zdCB0eXBlbmFtZSA9IHN0b3JlLmdldEZpZWxkVmFsdWUob2JqZWN0T3JSZWZlcmVuY2UsIFwiX190eXBlbmFtZVwiKTtcbiAgICAgICAgY29uc3Qgb2JqZWN0c1RvTWVyZ2UgPSBbXTtcbiAgICAgICAgbGV0IG1pc3Npbmc7XG4gICAgICAgIGNvbnN0IG1pc3NpbmdNZXJnZXIgPSBuZXcgRGVlcE1lcmdlcigpO1xuICAgICAgICBpZiAodHlwZW9mIHR5cGVuYW1lID09PSBcInN0cmluZ1wiICYmICFwb2xpY2llcy5yb290SWRzQnlUeXBlbmFtZVt0eXBlbmFtZV0pIHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSB3ZSBhbHdheXMgaW5jbHVkZSBhIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBfX3R5cGVuYW1lXG4gICAgICAgICAgICAvLyBmaWVsZCwgaWYgd2UgaGF2ZSBvbmUuIE5vdGUgdGhhdCB0aGlzIGZpZWxkIGNhbiBiZSBvdmVycmlkZGVuIGJ5IG90aGVyXG4gICAgICAgICAgICAvLyBtZXJnZWQgb2JqZWN0cy5cbiAgICAgICAgICAgIG9iamVjdHNUb01lcmdlLnB1c2goeyBfX3R5cGVuYW1lOiB0eXBlbmFtZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVNaXNzaW5nKHJlc3VsdCwgcmVzdWx0TmFtZSkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5taXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgbWlzc2luZyA9IG1pc3NpbmdNZXJnZXIubWVyZ2UobWlzc2luZywge1xuICAgICAgICAgICAgICAgICAgICBbcmVzdWx0TmFtZV06IHJlc3VsdC5taXNzaW5nLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd29ya1NldCA9IG5ldyBTZXQoc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMpO1xuICAgICAgICB3b3JrU2V0LmZvckVhY2goKHNlbGVjdGlvbikgPT4ge1xuICAgICAgICAgICAgLy8gT21pdCBmaWVsZHMgd2l0aCBkaXJlY3RpdmVzIEBza2lwKGlmOiA8dHJ1dGh5IHZhbHVlPikgb3JcbiAgICAgICAgICAgIC8vIEBpbmNsdWRlKGlmOiA8ZmFsc3kgdmFsdWU+KS5cbiAgICAgICAgICAgIGlmICghc2hvdWxkSW5jbHVkZShzZWxlY3Rpb24sIHZhcmlhYmxlcykpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIGxldCBmaWVsZFZhbHVlID0gcG9saWNpZXMucmVhZEZpZWxkKHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOiBzZWxlY3Rpb24ubmFtZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBjb250ZXh0LnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogb2JqZWN0T3JSZWZlcmVuY2UsXG4gICAgICAgICAgICAgICAgfSwgY29udGV4dCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0TmFtZSA9IHJlc3VsdEtleU5hbWVGcm9tRmllbGQoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWRkVHlwZW5hbWVUb0RvY3VtZW50LmFkZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pc3NpbmcgPSBtaXNzaW5nTWVyZ2VyLm1lcmdlKG1pc3NpbmcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcmVzdWx0TmFtZV06IGBDYW4ndCBmaW5kIGZpZWxkICcke3NlbGVjdGlvbi5uYW1lLnZhbHVlfScgb24gJHtpc1JlZmVyZW5jZShvYmplY3RPclJlZmVyZW5jZSkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RPclJlZmVyZW5jZS5fX3JlZiArIFwiIG9iamVjdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJvYmplY3QgXCIgKyBKU09OLnN0cmluZ2lmeShvYmplY3RPclJlZmVyZW5jZSwgbnVsbCwgMil9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXkoZmllbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IGhhbmRsZU1pc3NpbmcodGhpcy5leGVjdXRlU3ViU2VsZWN0ZWRBcnJheSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheTogZmllbGRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNsb3NpbmdSZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByZXN1bHROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2VsZWN0aW9uLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpZWxkVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIGJlY2F1c2Ugd2Uga25vdyB0aGUgZmllbGQgaGFzIGEgc2VsZWN0aW9uIHNldCxcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgbXVzdCBiZSB0cnlpbmcgdG8gcXVlcnkgYSBHcmFwaFFMT2JqZWN0VHlwZSwgd2hpY2ggaXMgd2h5XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpZWxkVmFsdWUgbXVzdCBiZSAhPSBudWxsLlxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gaGFuZGxlTWlzc2luZyh0aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uU2V0OiBzZWxlY3Rpb24uc2VsZWN0aW9uU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0T3JSZWZlcmVuY2U6IGZpZWxkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmNsb3NpbmdSZWY6IGlzUmVmZXJlbmNlKGZpZWxkVmFsdWUpID8gZmllbGRWYWx1ZSA6IGVuY2xvc2luZ1JlZixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIH0pLCByZXN1bHROYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3RzVG9NZXJnZS5wdXNoKHsgW3Jlc3VsdE5hbWVdOiBmaWVsZFZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uKHNlbGVjdGlvbiwgY29udGV4dC5sb29rdXBGcmFnbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKCFmcmFnbWVudCAmJiBzZWxlY3Rpb24ua2luZCA9PT0gS2luZC5GUkFHTUVOVF9TUFJFQUQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3SW52YXJpYW50RXJyb3IoMTAzLCBzZWxlY3Rpb24ubmFtZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmcmFnbWVudCAmJiBwb2xpY2llcy5mcmFnbWVudE1hdGNoZXMoZnJhZ21lbnQsIHR5cGVuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC5zZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5mb3JFYWNoKHdvcmtTZXQuYWRkLCB3b3JrU2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBtZXJnZURlZXBBcnJheShvYmplY3RzVG9NZXJnZSk7XG4gICAgICAgIGNvbnN0IGZpbmFsUmVzdWx0ID0geyByZXN1bHQsIG1pc3NpbmcgfTtcbiAgICAgICAgY29uc3QgZnJvemVuID0gbWF5YmVEZWVwRnJlZXplKGZpbmFsUmVzdWx0KTtcbiAgICAgICAgLy8gU3RvcmUgdGhpcyByZXN1bHQgd2l0aCBpdHMgc2VsZWN0aW9uIHNldCBzbyB0aGF0IHdlIGNhbiBxdWlja2x5XG4gICAgICAgIC8vIHJlY29nbml6ZSBpdCBhZ2FpbiBpbiB0aGUgU3RvcmVSZWFkZXIjaXNGcmVzaCBtZXRob2QuXG4gICAgICAgIGlmIChmcm96ZW4ucmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmtub3duUmVzdWx0cy5zZXQoZnJvemVuLnJlc3VsdCwgc2VsZWN0aW9uU2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJvemVuO1xuICAgIH1cbiAgICAvLyBVbmNhY2hlZCB2ZXJzaW9uIG9mIGV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5LlxuICAgIGV4ZWNTdWJTZWxlY3RlZEFycmF5SW1wbCh7IGZpZWxkLCBhcnJheSwgZW5jbG9zaW5nUmVmLCBjb250ZXh0LCB9KSB7XG4gICAgICAgIGxldCBtaXNzaW5nO1xuICAgICAgICBsZXQgbWlzc2luZ01lcmdlciA9IG5ldyBEZWVwTWVyZ2VyKCk7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1pc3NpbmcoY2hpbGRSZXN1bHQsIGkpIHtcbiAgICAgICAgICAgIGlmIChjaGlsZFJlc3VsdC5taXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgbWlzc2luZyA9IG1pc3NpbmdNZXJnZXIubWVyZ2UobWlzc2luZywgeyBbaV06IGNoaWxkUmVzdWx0Lm1pc3NpbmcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2hpbGRSZXN1bHQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICAgIGFycmF5ID0gYXJyYXkuZmlsdGVyKGNvbnRleHQuc3RvcmUuY2FuUmVhZCk7XG4gICAgICAgIH1cbiAgICAgICAgYXJyYXkgPSBhcnJheS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIC8vIG51bGwgdmFsdWUgaW4gYXJyYXlcbiAgICAgICAgICAgIGlmIChpdGVtID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgbmVzdGVkIGFycmF5LCByZWN1cnNlXG4gICAgICAgICAgICBpZiAoaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVNaXNzaW5nKHRoaXMuZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXkoe1xuICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgYXJyYXk6IGl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIGVuY2xvc2luZ1JlZixcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICB9KSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGFuIG9iamVjdCwgcnVuIHRoZSBzZWxlY3Rpb24gc2V0IG9uIGl0XG4gICAgICAgICAgICBpZiAoZmllbGQuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZU1pc3NpbmcodGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0KHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uU2V0OiBmaWVsZC5zZWxlY3Rpb25TZXQsXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdE9yUmVmZXJlbmNlOiBpdGVtLFxuICAgICAgICAgICAgICAgICAgICBlbmNsb3NpbmdSZWY6IGlzUmVmZXJlbmNlKGl0ZW0pID8gaXRlbSA6IGVuY2xvc2luZ1JlZixcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICB9KSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAgICAgICAgIGFzc2VydFNlbGVjdGlvblNldEZvcklkVmFsdWUoY29udGV4dC5zdG9yZSwgZmllbGQsIGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdWx0OiBhcnJheSxcbiAgICAgICAgICAgIG1pc3NpbmcsXG4gICAgICAgIH07XG4gICAgfVxufVxuZnVuY3Rpb24gZmlyc3RNaXNzaW5nKHRyZWUpIHtcbiAgICB0cnkge1xuICAgICAgICBKU09OLnN0cmluZ2lmeSh0cmVlLCAoXywgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgdGhyb3cgdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0U2VsZWN0aW9uU2V0Rm9ySWRWYWx1ZShzdG9yZSwgZmllbGQsIGZpZWxkVmFsdWUpIHtcbiAgICBpZiAoIWZpZWxkLnNlbGVjdGlvblNldCkge1xuICAgICAgICBjb25zdCB3b3JrU2V0ID0gbmV3IFNldChbZmllbGRWYWx1ZV0pO1xuICAgICAgICB3b3JrU2V0LmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNOb25OdWxsT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGludmFyaWFudChcbiAgICAgICAgICAgICAgICAgICAgIWlzUmVmZXJlbmNlKHZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgMTA0LFxuICAgICAgICAgICAgICAgICAgICBnZXRUeXBlbmFtZUZyb21TdG9yZU9iamVjdChzdG9yZSwgdmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5uYW1lLnZhbHVlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHZhbHVlKS5mb3JFYWNoKHdvcmtTZXQuYWRkLCB3b3JrU2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhZEZyb21TdG9yZS5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgZXF1YWwgfSBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgVHJpZSB9IGZyb20gXCJAd3J5L3RyaWVcIjtcbmltcG9ydCB7IEtpbmQgfSBmcm9tIFwiZ3JhcGhxbFwiO1xuaW1wb3J0IHsgYWRkVHlwZW5hbWVUb0RvY3VtZW50LCBjYW5vbmljYWxTdHJpbmdpZnksIGlzUmVmZXJlbmNlLCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXNcIjtcbmltcG9ydCB7IF9fREVWX18gfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2Vudmlyb25tZW50XCI7XG5pbXBvcnQgeyBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQsIGNsb25lRGVlcCwgZ2V0RGVmYXVsdFZhbHVlcywgZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uLCBnZXRPcGVyYXRpb25EZWZpbml0aW9uLCBpc0FycmF5LCBpc0ZpZWxkLCBpc05vbkVtcHR5QXJyYXksIG1ha2VSZWZlcmVuY2UsIHJlc3VsdEtleU5hbWVGcm9tRmllbGQsIHNob3VsZEluY2x1ZGUsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbFwiO1xuaW1wb3J0IHsgaW52YXJpYW50LCBuZXdJbnZhcmlhbnRFcnJvciwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuaW1wb3J0IHsgZXh0cmFjdEZyYWdtZW50Q29udGV4dCwgZmllbGROYW1lRnJvbVN0b3JlTmFtZSwgbWFrZVByb2Nlc3NlZEZpZWxkc01lcmdlciwgc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QsIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplUmVhZEZpZWxkT3B0aW9ucyB9IGZyb20gXCIuL3BvbGljaWVzLmpzXCI7XG4vLyBTaW5jZSB0aGVyZSBhcmUgb25seSBmb3VyIHBvc3NpYmxlIGNvbWJpbmF0aW9ucyBvZiBjb250ZXh0LmNsaWVudE9ubHkgYW5kXG4vLyBjb250ZXh0LmRlZmVycmVkIHZhbHVlcywgd2Ugc2hvdWxkIG5lZWQgYXQgbW9zdCBmb3VyIFwiZmxhdm9yc1wiIG9mIGFueSBnaXZlblxuLy8gV3JpdGVDb250ZXh0LiBUbyBhdm9pZCBjcmVhdGluZyBtdWx0aXBsZSBjb3BpZXMgb2YgdGhlIHNhbWUgY29udGV4dCwgd2UgY2FjaGVcbi8vIHRoZSBjb250ZXh0cyBpbiB0aGUgY29udGV4dC5mbGF2b3JzIE1hcCAoc2hhcmVkIGJ5IGFsbCBmbGF2b3JzKSBhY2NvcmRpbmcgdG9cbi8vIHRoZWlyIGNsaWVudE9ubHkgYW5kIGRlZmVycmVkIHZhbHVlcyAoYWx3YXlzIGluIHRoYXQgb3JkZXIpLlxuZnVuY3Rpb24gZ2V0Q29udGV4dEZsYXZvcihjb250ZXh0LCBjbGllbnRPbmx5LCBkZWZlcnJlZCkge1xuICAgIGNvbnN0IGtleSA9IGAke2NsaWVudE9ubHl9JHtkZWZlcnJlZH1gO1xuICAgIGxldCBmbGF2b3JlZCA9IGNvbnRleHQuZmxhdm9ycy5nZXQoa2V5KTtcbiAgICBpZiAoIWZsYXZvcmVkKSB7XG4gICAgICAgIGNvbnRleHQuZmxhdm9ycy5zZXQoa2V5LCAoZmxhdm9yZWQgPVxuICAgICAgICAgICAgY29udGV4dC5jbGllbnRPbmx5ID09PSBjbGllbnRPbmx5ICYmIGNvbnRleHQuZGVmZXJyZWQgPT09IGRlZmVycmVkID9cbiAgICAgICAgICAgICAgICBjb250ZXh0XG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudE9ubHksXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIGZsYXZvcmVkO1xufVxuZXhwb3J0IGNsYXNzIFN0b3JlV3JpdGVyIHtcbiAgICBjYWNoZTtcbiAgICByZWFkZXI7XG4gICAgZnJhZ21lbnRzO1xuICAgIGNvbnN0cnVjdG9yKGNhY2hlLCByZWFkZXIsIGZyYWdtZW50cykge1xuICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgICAgIHRoaXMucmVhZGVyID0gcmVhZGVyO1xuICAgICAgICB0aGlzLmZyYWdtZW50cyA9IGZyYWdtZW50cztcbiAgICB9XG4gICAgd3JpdGVUb1N0b3JlKHN0b3JlLCB7IHF1ZXJ5LCByZXN1bHQsIGRhdGFJZCwgdmFyaWFibGVzLCBvdmVyd3JpdGUsIH0pIHtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uRGVmaW5pdGlvbiA9IGdldE9wZXJhdGlvbkRlZmluaXRpb24ocXVlcnkpO1xuICAgICAgICBjb25zdCBtZXJnZXIgPSBtYWtlUHJvY2Vzc2VkRmllbGRzTWVyZ2VyKCk7XG4gICAgICAgIHZhcmlhYmxlcyA9IHtcbiAgICAgICAgICAgIC4uLmdldERlZmF1bHRWYWx1ZXMob3BlcmF0aW9uRGVmaW5pdGlvbiksXG4gICAgICAgICAgICAuLi52YXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgICAgICBzdG9yZSxcbiAgICAgICAgICAgIHdyaXR0ZW46IHt9LFxuICAgICAgICAgICAgbWVyZ2UoZXhpc3RpbmcsIGluY29taW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lcmdlci5tZXJnZShleGlzdGluZywgaW5jb21pbmcpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhcmlhYmxlczogdmFyaWFibGVzLFxuICAgICAgICAgICAgdmFyU3RyaW5nOiBjYW5vbmljYWxTdHJpbmdpZnkodmFyaWFibGVzKSxcbiAgICAgICAgICAgIC4uLmV4dHJhY3RGcmFnbWVudENvbnRleHQocXVlcnksIHRoaXMuZnJhZ21lbnRzKSxcbiAgICAgICAgICAgIG92ZXJ3cml0ZTogISFvdmVyd3JpdGUsXG4gICAgICAgICAgICBpbmNvbWluZ0J5SWQ6IG5ldyBNYXAoKSxcbiAgICAgICAgICAgIGNsaWVudE9ubHk6IGZhbHNlLFxuICAgICAgICAgICAgZGVmZXJyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZmxhdm9yczogbmV3IE1hcCgpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZWYgPSB0aGlzLnByb2Nlc3NTZWxlY3Rpb25TZXQoe1xuICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQgfHwge30sXG4gICAgICAgICAgICBkYXRhSWQsXG4gICAgICAgICAgICBzZWxlY3Rpb25TZXQ6IG9wZXJhdGlvbkRlZmluaXRpb24uc2VsZWN0aW9uU2V0LFxuICAgICAgICAgICAgbWVyZ2VUcmVlOiB7IG1hcDogbmV3IE1hcCgpIH0sXG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFpc1JlZmVyZW5jZShyZWYpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXdJbnZhcmlhbnRFcnJvcigxMDUsIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU28gZmFyLCB0aGUgc3RvcmUgaGFzIG5vdCBiZWVuIG1vZGlmaWVkLCBzbyBub3cgaXQncyB0aW1lIHRvIHByb2Nlc3NcbiAgICAgICAgLy8gY29udGV4dC5pbmNvbWluZ0J5SWQgYW5kIG1lcmdlIHRob3NlIGluY29taW5nIGZpZWxkcyBpbnRvIGNvbnRleHQuc3RvcmUuXG4gICAgICAgIGNvbnRleHQuaW5jb21pbmdCeUlkLmZvckVhY2goKHsgc3RvcmVPYmplY3QsIG1lcmdlVHJlZSwgZmllbGROb2RlU2V0IH0sIGRhdGFJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZW50aXR5UmVmID0gbWFrZVJlZmVyZW5jZShkYXRhSWQpO1xuICAgICAgICAgICAgaWYgKG1lcmdlVHJlZSAmJiBtZXJnZVRyZWUubWFwLnNpemUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcHBsaWVkID0gdGhpcy5hcHBseU1lcmdlcyhtZXJnZVRyZWUsIGVudGl0eVJlZiwgc3RvcmVPYmplY3QsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc1JlZmVyZW5jZShhcHBsaWVkKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBc3N1bWUgUmVmZXJlbmNlcyByZXR1cm5lZCBieSBhcHBseU1lcmdlcyBoYXZlIGFscmVhZHkgYmVlbiBtZXJnZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW50byB0aGUgc3RvcmUuIFNlZSBtYWtlTWVyZ2VPYmplY3RzRnVuY3Rpb24gaW4gcG9saWNpZXMudHMgZm9yIGFuXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4YW1wbGUgb2YgaG93IHRoaXMgY2FuIGhhcHBlbi5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGFwcGx5TWVyZ2VzIHJldHVybmVkIGEgU3RvcmVPYmplY3QsIHdob3NlIGZpZWxkcyB3ZSBzaG91bGRcbiAgICAgICAgICAgICAgICAvLyBtZXJnZSBpbnRvIHRoZSBzdG9yZSAoc2VlIHN0b3JlLm1lcmdlIHN0YXRlbWVudCBiZWxvdykuXG4gICAgICAgICAgICAgICAgc3RvcmVPYmplY3QgPSBhcHBsaWVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF9fREVWX18gJiYgIWNvbnRleHQub3ZlcndyaXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRzV2l0aFNlbGVjdGlvblNldHMgPSB7fTtcbiAgICAgICAgICAgICAgICBmaWVsZE5vZGVTZXQuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzV2l0aFNlbGVjdGlvblNldHNbZmllbGQubmFtZS52YWx1ZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzU2VsZWN0aW9uU2V0ID0gKHN0b3JlRmllbGROYW1lKSA9PiBmaWVsZHNXaXRoU2VsZWN0aW9uU2V0c1tmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKV0gPT09XG4gICAgICAgICAgICAgICAgICAgIHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzTWVyZ2VGdW5jdGlvbiA9IChzdG9yZUZpZWxkTmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFRyZWUgPSBtZXJnZVRyZWUgJiYgbWVyZ2VUcmVlLm1hcC5nZXQoc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbihjaGlsZFRyZWUgJiYgY2hpbGRUcmVlLmluZm8gJiYgY2hpbGRUcmVlLmluZm8ubWVyZ2UpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmVPYmplY3QpLmZvckVhY2goKHN0b3JlRmllbGROYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGEgbWVyZ2UgZnVuY3Rpb24gd2FzIGRlZmluZWQgZm9yIHRoaXMgZmllbGQsIHRydXN0IHRoYXQgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlkIHRoZSByaWdodCB0aGluZyBhYm91dCAobm90KSBjbG9iYmVyaW5nIGRhdGEuIElmIHRoZSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAvLyBoYXMgbm8gc2VsZWN0aW9uIHNldCwgaXQncyBhIHNjYWxhciBmaWVsZCwgc28gaXQgZG9lc24ndCBuZWVkXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgbWVyZ2UgZnVuY3Rpb24gKGV2ZW4gaWYgaXQncyBhbiBvYmplY3QsIGxpa2UgSlNPTiBkYXRhKS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1NlbGVjdGlvblNldChzdG9yZUZpZWxkTmFtZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFoYXNNZXJnZUZ1bmN0aW9uKHN0b3JlRmllbGROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FybkFib3V0RGF0YUxvc3MoZW50aXR5UmVmLCBzdG9yZU9iamVjdCwgc3RvcmVGaWVsZE5hbWUsIGNvbnRleHQuc3RvcmUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9yZS5tZXJnZShkYXRhSWQsIHN0b3JlT2JqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFueSBJRHMgd3JpdHRlbiBleHBsaWNpdGx5IHRvIHRoZSBjYWNoZSB3aWxsIGJlIHJldGFpbmVkIGFzXG4gICAgICAgIC8vIHJlYWNoYWJsZSByb290IElEcyBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIHB1cnBvc2VzLiBBbHRob3VnaCB0aGlzXG4gICAgICAgIC8vIGxvZ2ljIGluY2x1ZGVzIHJvb3QgSURzIGxpa2UgUk9PVF9RVUVSWSBhbmQgUk9PVF9NVVRBVElPTiwgdGhlaXJcbiAgICAgICAgLy8gcmV0YWlubWVudCBjb3VudHMgYXJlIGVmZmVjdGl2ZWx5IGlnbm9yZWQgYmVjYXVzZSBjYWNoZS5nYygpIGFsd2F5c1xuICAgICAgICAvLyBpbmNsdWRlcyB0aGVtIGluIGl0cyByb290IElEIHNldC5cbiAgICAgICAgc3RvcmUucmV0YWluKHJlZi5fX3JlZik7XG4gICAgICAgIHJldHVybiByZWY7XG4gICAgfVxuICAgIHByb2Nlc3NTZWxlY3Rpb25TZXQoeyBkYXRhSWQsIHJlc3VsdCwgc2VsZWN0aW9uU2V0LCBjb250ZXh0LCBcbiAgICAvLyBUaGlzIG9iamVjdCBhbGxvd3MgcHJvY2Vzc1NlbGVjdGlvblNldCB0byByZXBvcnQgdXNlZnVsIGluZm9ybWF0aW9uXG4gICAgLy8gdG8gaXRzIGNhbGxlcnMgd2l0aG91dCBleHBsaWNpdGx5IHJldHVybmluZyB0aGF0IGluZm9ybWF0aW9uLlxuICAgIG1lcmdlVHJlZSwgfSkge1xuICAgICAgICBjb25zdCB7IHBvbGljaWVzIH0gPSB0aGlzLmNhY2hlO1xuICAgICAgICAvLyBUaGlzIHZhcmlhYmxlIHdpbGwgYmUgcmVwZWF0ZWRseSB1cGRhdGVkIHVzaW5nIGNvbnRleHQubWVyZ2UgdG9cbiAgICAgICAgLy8gYWNjdW11bGF0ZSBhbGwgZmllbGRzIHRoYXQgbmVlZCB0byBiZSB3cml0dGVuIGludG8gdGhlIHN0b3JlLlxuICAgICAgICBsZXQgaW5jb21pbmcgPSB7fTtcbiAgICAgICAgLy8gSWYgdHlwZW5hbWUgd2FzIG5vdCBwYXNzZWQgaW4sIGluZmVyIGl0LiBOb3RlIHRoYXQgdHlwZW5hbWUgaXNcbiAgICAgICAgLy8gYWx3YXlzIHBhc3NlZCBpbiBmb3IgdHJpY2t5LXRvLWluZmVyIGNhc2VzIHN1Y2ggYXMgXCJRdWVyeVwiIGZvclxuICAgICAgICAvLyBST09UX1FVRVJZLlxuICAgICAgICBjb25zdCB0eXBlbmFtZSA9IChkYXRhSWQgJiYgcG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbZGF0YUlkXSkgfHxcbiAgICAgICAgICAgIGdldFR5cGVuYW1lRnJvbVJlc3VsdChyZXN1bHQsIHNlbGVjdGlvblNldCwgY29udGV4dC5mcmFnbWVudE1hcCkgfHxcbiAgICAgICAgICAgIChkYXRhSWQgJiYgY29udGV4dC5zdG9yZS5nZXQoZGF0YUlkLCBcIl9fdHlwZW5hbWVcIikpO1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHR5cGVuYW1lKSB7XG4gICAgICAgICAgICBpbmNvbWluZy5fX3R5cGVuYW1lID0gdHlwZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyByZWFkRmllbGQgZnVuY3Rpb24gd2lsbCBiZSBwYXNzZWQgYXMgY29udGV4dC5yZWFkRmllbGQgaW4gdGhlXG4gICAgICAgIC8vIEtleUZpZWxkc0NvbnRleHQgb2JqZWN0IGNyZWF0ZWQgd2l0aGluIHBvbGljaWVzLmlkZW50aWZ5IChjYWxsZWQgYmVsb3cpLlxuICAgICAgICAvLyBJbiBhZGRpdGlvbiB0byByZWFkaW5nIGZyb20gdGhlIGV4aXN0aW5nIGNvbnRleHQuc3RvcmUgKHRoYW5rcyB0byB0aGVcbiAgICAgICAgLy8gcG9saWNpZXMucmVhZEZpZWxkKG9wdGlvbnMsIGNvbnRleHQpIGxpbmUgYXQgdGhlIHZlcnkgYm90dG9tKSwgdGhpc1xuICAgICAgICAvLyB2ZXJzaW9uIG9mIHJlYWRGaWVsZCBjYW4gcmVhZCBmcm9tIFJlZmVyZW5jZSBvYmplY3RzIHRoYXQgYXJlIGN1cnJlbnRseVxuICAgICAgICAvLyBwZW5kaW5nIGluIGNvbnRleHQuaW5jb21pbmdCeUlkLCB3aGljaCBpcyBpbXBvcnRhbnQgd2hlbmV2ZXIga2V5RmllbGRzXG4gICAgICAgIC8vIG5lZWQgdG8gYmUgZXh0cmFjdGVkIGZyb20gYSBjaGlsZCBvYmplY3QgdGhhdCBwcm9jZXNzU2VsZWN0aW9uU2V0IGhhc1xuICAgICAgICAvLyB0dXJuZWQgaW50byBhIFJlZmVyZW5jZS5cbiAgICAgICAgY29uc3QgcmVhZEZpZWxkID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBub3JtYWxpemVSZWFkRmllbGRPcHRpb25zKGFyZ3MsIGluY29taW5nLCBjb250ZXh0LnZhcmlhYmxlcyk7XG4gICAgICAgICAgICBpZiAoaXNSZWZlcmVuY2Uob3B0aW9ucy5mcm9tKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBjb250ZXh0LmluY29taW5nQnlJZC5nZXQob3B0aW9ucy5mcm9tLl9fcmVmKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBwb2xpY2llcy5yZWFkRmllbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IGluZm8uc3RvcmVPYmplY3QsXG4gICAgICAgICAgICAgICAgICAgIH0sIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcG9saWNpZXMucmVhZEZpZWxkKG9wdGlvbnMsIGNvbnRleHQpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZE5vZGVTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuZmxhdHRlbkZpZWxkcyhzZWxlY3Rpb25TZXQsIHJlc3VsdCwgXG4gICAgICAgIC8vIFRoaXMgV3JpdGVDb250ZXh0IHdpbGwgYmUgdGhlIGRlZmF1bHQgY29udGV4dCB2YWx1ZSBmb3IgZmllbGRzIHJldHVybmVkXG4gICAgICAgIC8vIGJ5IHRoZSBmbGF0dGVuRmllbGRzIG1ldGhvZCwgYnV0IHNvbWUgZmllbGRzIG1heSBiZSBhc3NpZ25lZCBhIG1vZGlmaWVkXG4gICAgICAgIC8vIGNvbnRleHQsIGRlcGVuZGluZyBvbiB0aGUgcHJlc2VuY2Ugb2YgQGNsaWVudCBhbmQgb3RoZXIgZGlyZWN0aXZlcy5cbiAgICAgICAgY29udGV4dCwgdHlwZW5hbWUpLmZvckVhY2goKGNvbnRleHQsIGZpZWxkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRGaWVsZEtleSA9IHJlc3VsdEtleU5hbWVGcm9tRmllbGQoZmllbGQpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByZXN1bHRbcmVzdWx0RmllbGRLZXldO1xuICAgICAgICAgICAgZmllbGROb2RlU2V0LmFkZChmaWVsZCk7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlRmllbGROYW1lID0gcG9saWNpZXMuZ2V0U3RvcmVGaWVsZE5hbWUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lOiBmaWVsZC5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiBjb250ZXh0LnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFRyZWUgPSBnZXRDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBsZXQgaW5jb21pbmdWYWx1ZSA9IHRoaXMucHJvY2Vzc0ZpZWxkVmFsdWUodmFsdWUsIGZpZWxkLCBcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb250ZXh0LmNsaWVudE9ubHkgYW5kIGNvbnRleHQuZGVmZXJyZWQgdG8gdGhlaXIgZGVmYXVsdFxuICAgICAgICAgICAgICAgIC8vIHZhbHVlcyBiZWZvcmUgcHJvY2Vzc2luZyBuZXN0ZWQgc2VsZWN0aW9uIHNldHMuXG4gICAgICAgICAgICAgICAgZmllbGQuc2VsZWN0aW9uU2V0ID9cbiAgICAgICAgICAgICAgICAgICAgZ2V0Q29udGV4dEZsYXZvcihjb250ZXh0LCBmYWxzZSwgZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIDogY29udGV4dCwgY2hpbGRUcmVlKTtcbiAgICAgICAgICAgICAgICAvLyBUbyBkZXRlcm1pbmUgaWYgdGhpcyBmaWVsZCBob2xkcyBhIGNoaWxkIG9iamVjdCB3aXRoIGEgbWVyZ2UgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAvLyBkZWZpbmVkIGluIGl0cyB0eXBlIHBvbGljeSAoc2VlIFBSICM3MDcwKSwgd2UgbmVlZCB0byBmaWd1cmUgb3V0IHRoZVxuICAgICAgICAgICAgICAgIC8vIGNoaWxkIG9iamVjdCdzIF9fdHlwZW5hbWUuXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkVHlwZW5hbWU7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGZpZWxkJ3MgdmFsdWUgY2FuIGJlIGFuIG9iamVjdCB0aGF0IGhhcyBhIF9fdHlwZW5hbWUgb25seSBpZiB0aGVcbiAgICAgICAgICAgICAgICAvLyBmaWVsZCBoYXMgYSBzZWxlY3Rpb24gc2V0LiBPdGhlcndpc2UgaW5jb21pbmdWYWx1ZSBpcyBzY2FsYXIuXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLnNlbGVjdGlvblNldCAmJlxuICAgICAgICAgICAgICAgICAgICAoaXNSZWZlcmVuY2UoaW5jb21pbmdWYWx1ZSkgfHwgc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QoaW5jb21pbmdWYWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkVHlwZW5hbWUgPSByZWFkRmllbGQoXCJfX3R5cGVuYW1lXCIsIGluY29taW5nVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBtZXJnZSA9IHBvbGljaWVzLmdldE1lcmdlRnVuY3Rpb24odHlwZW5hbWUsIGZpZWxkLm5hbWUudmFsdWUsIGNoaWxkVHlwZW5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChtZXJnZSkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZFRyZWUuaW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2hlY2sgY29tcGF0aWJpbGl0eSBhZ2FpbnN0IGFueSBleGlzdGluZyBjaGlsZFRyZWUuZmllbGQ/XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2UsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXliZVJlY3ljbGVDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5jb21pbmcgPSBjb250ZXh0Lm1lcmdlKGluY29taW5nLCB7XG4gICAgICAgICAgICAgICAgICAgIFtzdG9yZUZpZWxkTmFtZV06IGluY29taW5nVmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChfX0RFVl9fICYmXG4gICAgICAgICAgICAgICAgIWNvbnRleHQuY2xpZW50T25seSAmJlxuICAgICAgICAgICAgICAgICFjb250ZXh0LmRlZmVycmVkICYmXG4gICAgICAgICAgICAgICAgIWFkZFR5cGVuYW1lVG9Eb2N1bWVudC5hZGRlZChmaWVsZCkgJiZcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZmllbGQgaGFzIGEgcmVhZCBmdW5jdGlvbiwgaXQgbWF5IGJlIGEgc3ludGhldGljIGZpZWxkIG9yXG4gICAgICAgICAgICAgICAgLy8gcHJvdmlkZSBhIGRlZmF1bHQgdmFsdWUsIHNvIGl0cyBhYnNlbmNlIGZyb20gdGhlIHdyaXR0ZW4gZGF0YSBzaG91bGRcbiAgICAgICAgICAgICAgICAvLyBub3QgYmUgY2F1c2UgZm9yIGFsYXJtLlxuICAgICAgICAgICAgICAgICFwb2xpY2llcy5nZXRSZWFkRnVuY3Rpb24odHlwZW5hbWUsIGZpZWxkLm5hbWUudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaW52YXJpYW50LmVycm9yKDEwNiwgcmVzdWx0S2V5TmFtZUZyb21GaWVsZChmaWVsZCksIHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBJZGVudGlmeSB0aGUgcmVzdWx0IG9iamVjdCwgZXZlbiBpZiBkYXRhSWQgd2FzIGFscmVhZHkgcHJvdmlkZWQsXG4gICAgICAgIC8vIHNpbmNlIHdlIGFsd2F5cyBuZWVkIGtleU9iamVjdCBiZWxvdy5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IFtpZCwga2V5T2JqZWN0XSA9IHBvbGljaWVzLmlkZW50aWZ5KHJlc3VsdCwge1xuICAgICAgICAgICAgICAgIHR5cGVuYW1lLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvblNldCxcbiAgICAgICAgICAgICAgICBmcmFnbWVudE1hcDogY29udGV4dC5mcmFnbWVudE1hcCxcbiAgICAgICAgICAgICAgICBzdG9yZU9iamVjdDogaW5jb21pbmcsXG4gICAgICAgICAgICAgICAgcmVhZEZpZWxkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBJZiBkYXRhSWQgd2FzIG5vdCBwcm92aWRlZCwgZmFsbCBiYWNrIHRvIHRoZSBpZCBqdXN0IGdlbmVyYXRlZCBieVxuICAgICAgICAgICAgLy8gcG9saWNpZXMuaWRlbnRpZnkuXG4gICAgICAgICAgICBkYXRhSWQgPSBkYXRhSWQgfHwgaWQ7XG4gICAgICAgICAgICAvLyBXcml0ZSBhbnkga2V5IGZpZWxkcyB0aGF0IHdlcmUgdXNlZCBkdXJpbmcgaWRlbnRpZmljYXRpb24sIGV2ZW4gaWZcbiAgICAgICAgICAgIC8vIHRoZXkgd2VyZSBub3QgbWVudGlvbmVkIGluIHRoZSBvcmlnaW5hbCBxdWVyeS5cbiAgICAgICAgICAgIGlmIChrZXlPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPIFJldmVyc2UgdGhlIG9yZGVyIG9mIHRoZSBhcmd1bWVudHM/XG4gICAgICAgICAgICAgICAgaW5jb21pbmcgPSBjb250ZXh0Lm1lcmdlKGluY29taW5nLCBrZXlPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBJZiBkYXRhSWQgd2FzIHByb3ZpZGVkLCB0b2xlcmF0ZSBmYWlsdXJlIG9mIHBvbGljaWVzLmlkZW50aWZ5LlxuICAgICAgICAgICAgaWYgKCFkYXRhSWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGRhdGFJZCkge1xuICAgICAgICAgICAgY29uc3QgZGF0YVJlZiA9IG1ha2VSZWZlcmVuY2UoZGF0YUlkKTtcbiAgICAgICAgICAgIC8vIEF2b2lkIHByb2Nlc3NpbmcgdGhlIHNhbWUgZW50aXR5IG9iamVjdCB1c2luZyB0aGUgc2FtZSBzZWxlY3Rpb25cbiAgICAgICAgICAgIC8vIHNldCBtb3JlIHRoYW4gb25jZS4gV2UgdXNlIGFuIGFycmF5IGluc3RlYWQgb2YgYSBTZXQgc2luY2UgbW9zdFxuICAgICAgICAgICAgLy8gZW50aXR5IElEcyB3aWxsIGJlIHdyaXR0ZW4gdXNpbmcgb25seSBvbmUgc2VsZWN0aW9uIHNldCwgc28gdGhlXG4gICAgICAgICAgICAvLyBzaXplIG9mIHRoaXMgYXJyYXkgaXMgbGlrZWx5IHRvIGJlIHZlcnkgc21hbGwsIG1lYW5pbmcgaW5kZXhPZiBpc1xuICAgICAgICAgICAgLy8gbGlrZWx5IHRvIGJlIGZhc3RlciB0aGFuIFNldC5wcm90b3R5cGUuaGFzLlxuICAgICAgICAgICAgY29uc3Qgc2V0cyA9IGNvbnRleHQud3JpdHRlbltkYXRhSWRdIHx8IChjb250ZXh0LndyaXR0ZW5bZGF0YUlkXSA9IFtdKTtcbiAgICAgICAgICAgIGlmIChzZXRzLmluZGV4T2Yoc2VsZWN0aW9uU2V0KSA+PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhUmVmO1xuICAgICAgICAgICAgc2V0cy5wdXNoKHNlbGVjdGlvblNldCk7XG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBhYm91dCB0byB3cml0ZSBhIHJlc3VsdCBvYmplY3QgaW50byB0aGUgc3RvcmUsIGJ1dCB3ZVxuICAgICAgICAgICAgLy8gaGFwcGVuIHRvIGtub3cgdGhhdCB0aGUgZXhhY3Qgc2FtZSAoPT09KSByZXN1bHQgb2JqZWN0IHdvdWxkIGJlXG4gICAgICAgICAgICAvLyByZXR1cm5lZCBpZiB3ZSB3ZXJlIHRvIHJlcmVhZCB0aGUgcmVzdWx0IHdpdGggdGhlIHNhbWUgaW5wdXRzLFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSBjYW4gc2tpcCB0aGUgcmVzdCBvZiB0aGUgcHJvY2Vzc1NlbGVjdGlvblNldCB3b3JrIGZvclxuICAgICAgICAgICAgLy8gdGhpcyBvYmplY3QsIGFuZCBpbW1lZGlhdGVseSByZXR1cm4gYSBSZWZlcmVuY2UgdG8gaXQuXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkZXIgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWRlci5pc0ZyZXNoKHJlc3VsdCwgZGF0YVJlZiwgc2VsZWN0aW9uU2V0LCBjb250ZXh0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhUmVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXMgPSBjb250ZXh0LmluY29taW5nQnlJZC5nZXQoZGF0YUlkKTtcbiAgICAgICAgICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzLnN0b3JlT2JqZWN0ID0gY29udGV4dC5tZXJnZShwcmV2aW91cy5zdG9yZU9iamVjdCwgaW5jb21pbmcpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzLm1lcmdlVHJlZSA9IG1lcmdlTWVyZ2VUcmVlcyhwcmV2aW91cy5tZXJnZVRyZWUsIG1lcmdlVHJlZSk7XG4gICAgICAgICAgICAgICAgZmllbGROb2RlU2V0LmZvckVhY2goKGZpZWxkKSA9PiBwcmV2aW91cy5maWVsZE5vZGVTZXQuYWRkKGZpZWxkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmluY29taW5nQnlJZC5zZXQoZGF0YUlkLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlT2JqZWN0OiBpbmNvbWluZyxcbiAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSBhIHJlZmVyZW5jZSB0byBtZXJnZVRyZWUgb25seSBpZiBpdCBpcyBub3QgZW1wdHksIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1wdHkgTWVyZ2VUcmVlcyBtYXkgYmUgcmVjeWNsZWQgYnkgbWF5YmVSZWN5Y2xlQ2hpbGRNZXJnZVRyZWUgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldXNlZCBmb3IgZW50aXJlbHkgZGlmZmVyZW50IHBhcnRzIG9mIHRoZSByZXN1bHQgdHJlZS5cbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VUcmVlOiBtZXJnZVRyZWVJc0VtcHR5KG1lcmdlVHJlZSkgPyB2b2lkIDAgOiBtZXJnZVRyZWUsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTm9kZVNldCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhUmVmO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNvbWluZztcbiAgICB9XG4gICAgcHJvY2Vzc0ZpZWxkVmFsdWUodmFsdWUsIGZpZWxkLCBjb250ZXh0LCBtZXJnZVRyZWUpIHtcbiAgICAgICAgaWYgKCFmaWVsZC5zZWxlY3Rpb25TZXQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIEluIGRldmVsb3BtZW50LCB3ZSBuZWVkIHRvIGNsb25lIHNjYWxhciB2YWx1ZXMgc28gdGhhdCB0aGV5IGNhbiBiZVxuICAgICAgICAgICAgLy8gc2FmZWx5IGZyb3plbiB3aXRoIG1heWJlRGVlcEZyZWV6ZSBpbiByZWFkRnJvbVN0b3JlLnRzLiBJbiBwcm9kdWN0aW9uLFxuICAgICAgICAgICAgLy8gaXQncyBjaGVhcGVyIHRvIHN0b3JlIHRoZSBzY2FsYXIgdmFsdWVzIGRpcmVjdGx5IGluIHRoZSBjYWNoZS5cbiAgICAgICAgICAgIHJldHVybiBfX0RFVl9fID8gY2xvbmVEZWVwKHZhbHVlKSA6IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5wcm9jZXNzRmllbGRWYWx1ZShpdGVtLCBmaWVsZCwgY29udGV4dCwgZ2V0Q2hpbGRNZXJnZVRyZWUobWVyZ2VUcmVlLCBpKSk7XG4gICAgICAgICAgICAgICAgbWF5YmVSZWN5Y2xlQ2hpbGRNZXJnZVRyZWUobWVyZ2VUcmVlLCBpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzU2VsZWN0aW9uU2V0KHtcbiAgICAgICAgICAgIHJlc3VsdDogdmFsdWUsXG4gICAgICAgICAgICBzZWxlY3Rpb25TZXQ6IGZpZWxkLnNlbGVjdGlvblNldCxcbiAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICBtZXJnZVRyZWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBJbXBsZW1lbnRzIGh0dHBzOi8vc3BlYy5ncmFwaHFsLm9yZy9kcmFmdC8jc2VjLUZpZWxkLUNvbGxlY3Rpb24sIGJ1dCB3aXRoXG4gICAgLy8gc29tZSBhZGRpdGlvbnMgZm9yIHRyYWNraW5nIEBjbGllbnQgYW5kIEBkZWZlciBkaXJlY3RpdmVzLlxuICAgIGZsYXR0ZW5GaWVsZHMoc2VsZWN0aW9uU2V0LCByZXN1bHQsIGNvbnRleHQsIHR5cGVuYW1lID0gZ2V0VHlwZW5hbWVGcm9tUmVzdWx0KHJlc3VsdCwgc2VsZWN0aW9uU2V0LCBjb250ZXh0LmZyYWdtZW50TWFwKSkge1xuICAgICAgICBjb25zdCBmaWVsZE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgeyBwb2xpY2llcyB9ID0gdGhpcy5jYWNoZTtcbiAgICAgICAgY29uc3QgbGltaXRpbmdUcmllID0gbmV3IFRyaWUoZmFsc2UpOyAvLyBObyBuZWVkIGZvciBXZWFrTWFwLCBzaW5jZSBsaW1pdGluZ1RyaWUgZG9lcyBub3QgZXNjYXBlLlxuICAgICAgICAoZnVuY3Rpb24gZmxhdHRlbihzZWxlY3Rpb25TZXQsIGluaGVyaXRlZENvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpc2l0ZWROb2RlID0gbGltaXRpbmdUcmllLmxvb2t1cChzZWxlY3Rpb25TZXQsIFxuICAgICAgICAgICAgLy8gQmVjYXVzZSB3ZSB0YWtlIGluaGVyaXRlZENsaWVudE9ubHkgYW5kIGluaGVyaXRlZERlZmVycmVkIGludG9cbiAgICAgICAgICAgIC8vIGNvbnNpZGVyYXRpb24gaGVyZSAoaW4gYWRkaXRpb24gdG8gc2VsZWN0aW9uU2V0KSwgaXQncyBwb3NzaWJsZSBmb3JcbiAgICAgICAgICAgIC8vIHRoZSBzYW1lIHNlbGVjdGlvbiBzZXQgdG8gYmUgZmxhdHRlbmVkIG1vcmUgdGhhbiBvbmNlLCBpZiBpdCBhcHBlYXJzXG4gICAgICAgICAgICAvLyBpbiB0aGUgcXVlcnkgd2l0aCBkaWZmZXJlbnQgQGNsaWVudCBhbmQvb3IgQGRpcmVjdGl2ZSBjb25maWd1cmF0aW9ucy5cbiAgICAgICAgICAgIGluaGVyaXRlZENvbnRleHQuY2xpZW50T25seSwgaW5oZXJpdGVkQ29udGV4dC5kZWZlcnJlZCk7XG4gICAgICAgICAgICBpZiAodmlzaXRlZE5vZGUudmlzaXRlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2aXNpdGVkTm9kZS52aXNpdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmZvckVhY2goKHNlbGVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghc2hvdWxkSW5jbHVkZShzZWxlY3Rpb24sIGNvbnRleHQudmFyaWFibGVzKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGxldCB7IGNsaWVudE9ubHksIGRlZmVycmVkIH0gPSBpbmhlcml0ZWRDb250ZXh0O1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGUgcHJlc2VuY2Ugb2YgQGNsaWVudCBvciBAZGVmZXIgb24gdGhpcyBmaWVsZCBjYW4gb25seVxuICAgICAgICAgICAgICAgIC8vIGNhdXNlIGNsaWVudE9ubHkgb3IgZGVmZXJyZWQgdG8gYmVjb21lIHRydWUsIHdlIGNhbiBza2lwIHRoZVxuICAgICAgICAgICAgICAgIC8vIGZvckVhY2ggbG9vcCBpZiBib3RoIGNsaWVudE9ubHkgYW5kIGRlZmVycmVkIGFyZSBhbHJlYWR5IHRydWUuXG4gICAgICAgICAgICAgICAgIShjbGllbnRPbmx5ICYmIGRlZmVycmVkKSAmJlxuICAgICAgICAgICAgICAgICAgICBpc05vbkVtcHR5QXJyYXkoc2VsZWN0aW9uLmRpcmVjdGl2ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5kaXJlY3RpdmVzLmZvckVhY2goKGRpcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGRpci5uYW1lLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwiY2xpZW50XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50T25seSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gXCJkZWZlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IGFyZ3VtZW50c09iamVjdEZyb21GaWVsZChkaXIsIGNvbnRleHQudmFyaWFibGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgQGRlZmVyIGRpcmVjdGl2ZSB0YWtlcyBhbiBvcHRpb25hbCBhcmdzLmlmIGJvb2xlYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhcmd1bWVudCwgc2ltaWxhciB0byBAaW5jbHVkZShpZjogYm9vbGVhbikuIE5vdGUgdGhhdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEBkZWZlcihpZjogZmFsc2UpIGRvZXMgbm90IG1ha2UgY29udGV4dC5kZWZlcnJlZCBmYWxzZSwgYnV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCBiZWhhdmVzIGFzIGlmIHRoZXJlIHdhcyBubyBAZGVmZXIgZGlyZWN0aXZlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXJncyB8fCBhcmdzLmlmICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gSW4gdGhlIGZ1dHVyZSwgd2UgbWF5IHdhbnQgdG8gcmVjb3JkIGFyZ3MubGFiZWwgdXNpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250ZXh0LmRlZmVycmVkLCBpZiBhIGxhYmVsIGlzIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBmaWVsZE1hcC5nZXQoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZpZWxkIGhhcyBiZWVuIHZpc2l0ZWQgYWxvbmcgYW5vdGhlciByZWN1cnNpdmUgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlLCB0aGUgZmluYWwgY29udGV4dCBzaG91bGQgaGF2ZSBjbGllbnRPbmx5IG9yIGRlZmVycmVkIHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gdHJ1ZSBvbmx5IGlmICphbGwqIHBhdGhzIGhhdmUgdGhlIGRpcmVjdGl2ZSAoaGVuY2UgdGhlICYmKS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudE9ubHkgPSBjbGllbnRPbmx5ICYmIGV4aXN0aW5nLmNsaWVudE9ubHk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZCA9IGRlZmVycmVkICYmIGV4aXN0aW5nLmRlZmVycmVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTWFwLnNldChzZWxlY3Rpb24sIGdldENvbnRleHRGbGF2b3IoY29udGV4dCwgY2xpZW50T25seSwgZGVmZXJyZWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uKHNlbGVjdGlvbiwgY29udGV4dC5sb29rdXBGcmFnbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZnJhZ21lbnQgJiYgc2VsZWN0aW9uLmtpbmQgPT09IEtpbmQuRlJBR01FTlRfU1BSRUFEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXdJbnZhcmlhbnRFcnJvcigxMDcsIHNlbGVjdGlvbi5uYW1lLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZnJhZ21lbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljaWVzLmZyYWdtZW50TWF0Y2hlcyhmcmFnbWVudCwgdHlwZW5hbWUsIHJlc3VsdCwgY29udGV4dC52YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbGF0dGVuKGZyYWdtZW50LnNlbGVjdGlvblNldCwgZ2V0Q29udGV4dEZsYXZvcihjb250ZXh0LCBjbGllbnRPbmx5LCBkZWZlcnJlZCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKHNlbGVjdGlvblNldCwgY29udGV4dCk7XG4gICAgICAgIHJldHVybiBmaWVsZE1hcDtcbiAgICB9XG4gICAgYXBwbHlNZXJnZXMobWVyZ2VUcmVlLCBleGlzdGluZywgaW5jb21pbmcsIGNvbnRleHQsIGdldFN0b3JhZ2VBcmdzKSB7XG4gICAgICAgIGlmIChtZXJnZVRyZWUubWFwLnNpemUgJiYgIWlzUmVmZXJlbmNlKGluY29taW5nKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAgICAgLy8gSXRlbXMgaW4gdGhlIHNhbWUgcG9zaXRpb24gaW4gZGlmZmVyZW50IGFycmF5cyBhcmUgbm90XG4gICAgICAgICAgICAvLyBuZWNlc3NhcmlseSByZWxhdGVkIHRvIGVhY2ggb3RoZXIsIHNvIHdoZW4gaW5jb21pbmcgaXMgYW4gYXJyYXlcbiAgICAgICAgICAgIC8vIHdlIHByb2Nlc3MgaXRzIGVsZW1lbnRzIGFzIGlmIHRoZXJlIHdhcyBubyBleGlzdGluZyBkYXRhLlxuICAgICAgICAgICAgKCFpc0FycmF5KGluY29taW5nKSAmJlxuICAgICAgICAgICAgICAgIC8vIExpa2V3aXNlLCBleGlzdGluZyBtdXN0IGJlIGVpdGhlciBhIFJlZmVyZW5jZSBvciBhIFN0b3JlT2JqZWN0XG4gICAgICAgICAgICAgICAgLy8gaW4gb3JkZXIgZm9yIGl0cyBmaWVsZHMgdG8gYmUgc2FmZSB0byBtZXJnZSB3aXRoIHRoZSBmaWVsZHMgb2ZcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5jb21pbmcgb2JqZWN0LlxuICAgICAgICAgICAgICAgIChpc1JlZmVyZW5jZShleGlzdGluZykgfHwgc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QoZXhpc3RpbmcpKSkgP1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgOiB2b2lkIDA7XG4gICAgICAgICAgICAvLyBUaGlzIG5hcnJvd2luZyBpcyBpbXBsaWVkIGJ5IG1lcmdlVHJlZS5tYXAuc2l6ZSA+IDAgYW5kXG4gICAgICAgICAgICAvLyAhaXNSZWZlcmVuY2UoaW5jb21pbmcpLCB0aG91Z2ggVHlwZVNjcmlwdCB1bmRlcnN0YW5kYWJseSBjYW5ub3RcbiAgICAgICAgICAgIC8vIGhvcGUgdG8gaW5mZXIgdGhpcyB0eXBlLlxuICAgICAgICAgICAgY29uc3QgaSA9IGluY29taW5nO1xuICAgICAgICAgICAgLy8gVGhlIG9wdGlvbnMuc3RvcmFnZSBvYmplY3RzIHByb3ZpZGVkIHRvIHJlYWQgYW5kIG1lcmdlIGZ1bmN0aW9uc1xuICAgICAgICAgICAgLy8gYXJlIGRlcml2ZWQgZnJvbSB0aGUgaWRlbnRpdHkgb2YgdGhlIHBhcmVudCBvYmplY3QgcGx1cyBhXG4gICAgICAgICAgICAvLyBzZXF1ZW5jZSBvZiBzdG9yZUZpZWxkTmFtZSBzdHJpbmdzL251bWJlcnMgaWRlbnRpZnlpbmcgdGhlIG5lc3RlZFxuICAgICAgICAgICAgLy8gZmllbGQgbmFtZSBwYXRoIG9mIGVhY2ggZmllbGQgdmFsdWUgdG8gYmUgbWVyZ2VkLlxuICAgICAgICAgICAgaWYgKGUgJiYgIWdldFN0b3JhZ2VBcmdzKSB7XG4gICAgICAgICAgICAgICAgZ2V0U3RvcmFnZUFyZ3MgPSBbaXNSZWZlcmVuY2UoZSkgPyBlLl9fcmVmIDogZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgYXBwbHlpbmcgbWVyZ2UgZnVuY3Rpb25zIHRvIHRoaXMgc3VidHJlZSB3aWxsXG4gICAgICAgICAgICAvLyBub3QgY2hhbmdlIHRoZSBpbmNvbWluZyBkYXRhLCBzbyB0aGlzIHZhcmlhYmxlIHRyYWNrcyB0aGUgZmllbGRzXG4gICAgICAgICAgICAvLyB0aGF0IGRpZCBjaGFuZ2UsIHNvIHdlIGNhbiBjcmVhdGUgYSBuZXcgaW5jb21pbmcgb2JqZWN0IHdoZW4gKGFuZFxuICAgICAgICAgICAgLy8gb25seSB3aGVuKSBhdCBsZWFzdCBvbmUgaW5jb21pbmcgZmllbGQgaGFzIGNoYW5nZWQuIFdlIHVzZSBhIE1hcFxuICAgICAgICAgICAgLy8gdG8gcHJlc2VydmUgdGhlIHR5cGUgb2YgbnVtZXJpYyBrZXlzLlxuICAgICAgICAgICAgbGV0IGNoYW5nZWRGaWVsZHM7XG4gICAgICAgICAgICBjb25zdCBnZXRWYWx1ZSA9IChmcm9tLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChpc0FycmF5KGZyb20pID9cbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG5hbWUgPT09IFwibnVtYmVyXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVtuYW1lXVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB2b2lkIDBcbiAgICAgICAgICAgICAgICAgICAgOiBjb250ZXh0LnN0b3JlLmdldEZpZWxkVmFsdWUoZnJvbSwgU3RyaW5nKG5hbWUpKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbWVyZ2VUcmVlLm1hcC5mb3JFYWNoKChjaGlsZFRyZWUsIHN0b3JlRmllbGROYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZVZhbCA9IGdldFZhbHVlKGUsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpVmFsID0gZ2V0VmFsdWUoaSwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbm8gaW5jb21pbmcgZGF0YSwgbGVhdmUgYW55IGV4aXN0aW5nIGRhdGEgdW50b3VjaGVkLlxuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGlWYWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZ2V0U3RvcmFnZUFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0U3RvcmFnZUFyZ3MucHVzaChzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGFWYWwgPSB0aGlzLmFwcGx5TWVyZ2VzKGNoaWxkVHJlZSwgZVZhbCwgaVZhbCwgY29udGV4dCwgZ2V0U3RvcmFnZUFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChhVmFsICE9PSBpVmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWRGaWVsZHMgPSBjaGFuZ2VkRmllbGRzIHx8IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZEZpZWxkcy5zZXQoc3RvcmVGaWVsZE5hbWUsIGFWYWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2V0U3RvcmFnZUFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YXJpYW50KGdldFN0b3JhZ2VBcmdzLnBvcCgpID09PSBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2hhbmdlZEZpZWxkcykge1xuICAgICAgICAgICAgICAgIC8vIFNoYWxsb3cgY2xvbmUgaSBzbyB3ZSBjYW4gYWRkIGNoYW5nZWQgZmllbGRzIHRvIGl0LlxuICAgICAgICAgICAgICAgIGluY29taW5nID0gKGlzQXJyYXkoaSkgPyBpLnNsaWNlKDApIDogeyAuLi5pIH0pO1xuICAgICAgICAgICAgICAgIGNoYW5nZWRGaWVsZHMuZm9yRWFjaCgodmFsdWUsIG5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW5jb21pbmdbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWVyZ2VUcmVlLmluZm8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlLnBvbGljaWVzLnJ1bk1lcmdlRnVuY3Rpb24oZXhpc3RpbmcsIGluY29taW5nLCBtZXJnZVRyZWUuaW5mbywgY29udGV4dCwgZ2V0U3RvcmFnZUFyZ3MgJiYgY29udGV4dC5zdG9yZS5nZXRTdG9yYWdlKC4uLmdldFN0b3JhZ2VBcmdzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH1cbn1cbmNvbnN0IGVtcHR5TWVyZ2VUcmVlUG9vbCA9IFtdO1xuZnVuY3Rpb24gZ2V0Q2hpbGRNZXJnZVRyZWUoeyBtYXAgfSwgbmFtZSkge1xuICAgIGlmICghbWFwLmhhcyhuYW1lKSkge1xuICAgICAgICBtYXAuc2V0KG5hbWUsIGVtcHR5TWVyZ2VUcmVlUG9vbC5wb3AoKSB8fCB7IG1hcDogbmV3IE1hcCgpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbWFwLmdldChuYW1lKTtcbn1cbmZ1bmN0aW9uIG1lcmdlTWVyZ2VUcmVlcyhsZWZ0LCByaWdodCkge1xuICAgIGlmIChsZWZ0ID09PSByaWdodCB8fCAhcmlnaHQgfHwgbWVyZ2VUcmVlSXNFbXB0eShyaWdodCkpXG4gICAgICAgIHJldHVybiBsZWZ0O1xuICAgIGlmICghbGVmdCB8fCBtZXJnZVRyZWVJc0VtcHR5KGxlZnQpKVxuICAgICAgICByZXR1cm4gcmlnaHQ7XG4gICAgY29uc3QgaW5mbyA9IGxlZnQuaW5mbyAmJiByaWdodC5pbmZvID9cbiAgICAgICAge1xuICAgICAgICAgICAgLi4ubGVmdC5pbmZvLFxuICAgICAgICAgICAgLi4ucmlnaHQuaW5mbyxcbiAgICAgICAgfVxuICAgICAgICA6IGxlZnQuaW5mbyB8fCByaWdodC5pbmZvO1xuICAgIGNvbnN0IG5lZWRUb01lcmdlTWFwcyA9IGxlZnQubWFwLnNpemUgJiYgcmlnaHQubWFwLnNpemU7XG4gICAgY29uc3QgbWFwID0gbmVlZFRvTWVyZ2VNYXBzID8gbmV3IE1hcCgpXG4gICAgICAgIDogbGVmdC5tYXAuc2l6ZSA/IGxlZnQubWFwXG4gICAgICAgICAgICA6IHJpZ2h0Lm1hcDtcbiAgICBjb25zdCBtZXJnZWQgPSB7IGluZm8sIG1hcCB9O1xuICAgIGlmIChuZWVkVG9NZXJnZU1hcHMpIHtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nUmlnaHRLZXlzID0gbmV3IFNldChyaWdodC5tYXAua2V5cygpKTtcbiAgICAgICAgbGVmdC5tYXAuZm9yRWFjaCgobGVmdFRyZWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgbWVyZ2VkLm1hcC5zZXQoa2V5LCBtZXJnZU1lcmdlVHJlZXMobGVmdFRyZWUsIHJpZ2h0Lm1hcC5nZXQoa2V5KSkpO1xuICAgICAgICAgICAgcmVtYWluaW5nUmlnaHRLZXlzLmRlbGV0ZShrZXkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nUmlnaHRLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgbWVyZ2VkLm1hcC5zZXQoa2V5LCBtZXJnZU1lcmdlVHJlZXMocmlnaHQubWFwLmdldChrZXkpLCBsZWZ0Lm1hcC5nZXQoa2V5KSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZDtcbn1cbmZ1bmN0aW9uIG1lcmdlVHJlZUlzRW1wdHkodHJlZSkge1xuICAgIHJldHVybiAhdHJlZSB8fCAhKHRyZWUuaW5mbyB8fCB0cmVlLm1hcC5zaXplKTtcbn1cbmZ1bmN0aW9uIG1heWJlUmVjeWNsZUNoaWxkTWVyZ2VUcmVlKHsgbWFwIH0sIG5hbWUpIHtcbiAgICBjb25zdCBjaGlsZFRyZWUgPSBtYXAuZ2V0KG5hbWUpO1xuICAgIGlmIChjaGlsZFRyZWUgJiYgbWVyZ2VUcmVlSXNFbXB0eShjaGlsZFRyZWUpKSB7XG4gICAgICAgIGVtcHR5TWVyZ2VUcmVlUG9vbC5wdXNoKGNoaWxkVHJlZSk7XG4gICAgICAgIG1hcC5kZWxldGUobmFtZSk7XG4gICAgfVxufVxuY29uc3Qgd2FybmluZ3MgPSBuZXcgU2V0KCk7XG4vLyBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyB1bnVzZWQgaW4gcHJvZHVjdGlvbiwgYW5kIHRodXMgc2hvdWxkIGJlXG4vLyBwcnVuZWQgYnkgYW55IHdlbGwtY29uZmlndXJlZCBtaW5pZmllci5cbmZ1bmN0aW9uIHdhcm5BYm91dERhdGFMb3NzKGV4aXN0aW5nUmVmLCBpbmNvbWluZ09iaiwgc3RvcmVGaWVsZE5hbWUsIHN0b3JlKSB7XG4gICAgY29uc3QgZ2V0Q2hpbGQgPSAob2JqT3JSZWYpID0+IHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBzdG9yZS5nZXRGaWVsZFZhbHVlKG9iak9yUmVmLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgIHJldHVybiB0eXBlb2YgY2hpbGQgPT09IFwib2JqZWN0XCIgJiYgY2hpbGQ7XG4gICAgfTtcbiAgICBjb25zdCBleGlzdGluZyA9IGdldENoaWxkKGV4aXN0aW5nUmVmKTtcbiAgICBpZiAoIWV4aXN0aW5nKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgaW5jb21pbmcgPSBnZXRDaGlsZChpbmNvbWluZ09iaik7XG4gICAgaWYgKCFpbmNvbWluZylcbiAgICAgICAgcmV0dXJuO1xuICAgIC8vIEl0J3MgYWx3YXlzIHNhZmUgdG8gcmVwbGFjZSBhIHJlZmVyZW5jZSwgc2luY2UgaXQgcmVmZXJzIHRvIGRhdGFcbiAgICAvLyBzYWZlbHkgc3RvcmVkIGVsc2V3aGVyZS5cbiAgICBpZiAoaXNSZWZlcmVuY2UoZXhpc3RpbmcpKVxuICAgICAgICByZXR1cm47XG4gICAgLy8gSWYgdGhlIHZhbHVlcyBhcmUgc3RydWN0dXJhbGx5IGVxdWl2YWxlbnQsIHdlIGRvIG5vdCBuZWVkIHRvIHdvcnJ5XG4gICAgLy8gYWJvdXQgaW5jb21pbmcgcmVwbGFjaW5nIGV4aXN0aW5nLlxuICAgIGlmIChlcXVhbChleGlzdGluZywgaW5jb21pbmcpKVxuICAgICAgICByZXR1cm47XG4gICAgLy8gSWYgd2UncmUgcmVwbGFjaW5nIGV2ZXJ5IGtleSBvZiB0aGUgZXhpc3Rpbmcgb2JqZWN0LCB0aGVuIHRoZVxuICAgIC8vIGV4aXN0aW5nIGRhdGEgd291bGQgYmUgb3ZlcndyaXR0ZW4gZXZlbiBpZiB0aGUgb2JqZWN0cyB3ZXJlXG4gICAgLy8gbm9ybWFsaXplZCwgc28gd2FybmluZyB3b3VsZCBub3QgYmUgaGVscGZ1bCBoZXJlLlxuICAgIGlmIChPYmplY3Qua2V5cyhleGlzdGluZykuZXZlcnkoKGtleSkgPT4gc3RvcmUuZ2V0RmllbGRWYWx1ZShpbmNvbWluZywga2V5KSAhPT0gdm9pZCAwKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudFR5cGUgPSBzdG9yZS5nZXRGaWVsZFZhbHVlKGV4aXN0aW5nUmVmLCBcIl9fdHlwZW5hbWVcIikgfHxcbiAgICAgICAgc3RvcmUuZ2V0RmllbGRWYWx1ZShpbmNvbWluZ09iaiwgXCJfX3R5cGVuYW1lXCIpO1xuICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgIGNvbnN0IHR5cGVEb3ROYW1lID0gYCR7cGFyZW50VHlwZX0uJHtmaWVsZE5hbWV9YDtcbiAgICAvLyBBdm9pZCB3YXJuaW5nIG1vcmUgdGhhbiBvbmNlIGZvciB0aGUgc2FtZSB0eXBlIGFuZCBmaWVsZCBuYW1lLlxuICAgIGlmICh3YXJuaW5ncy5oYXModHlwZURvdE5hbWUpKVxuICAgICAgICByZXR1cm47XG4gICAgd2FybmluZ3MuYWRkKHR5cGVEb3ROYW1lKTtcbiAgICBjb25zdCBjaGlsZFR5cGVuYW1lcyA9IFtdO1xuICAgIC8vIEFycmF5cyBkbyBub3QgaGF2ZSBfX3R5cGVuYW1lIGZpZWxkcywgYW5kIGFsd2F5cyBuZWVkIGEgY3VzdG9tIG1lcmdlXG4gICAgLy8gZnVuY3Rpb24sIGV2ZW4gaWYgdGhlaXIgZWxlbWVudHMgYXJlIG5vcm1hbGl6ZWQgZW50aXRpZXMuXG4gICAgaWYgKCFpc0FycmF5KGV4aXN0aW5nKSAmJiAhaXNBcnJheShpbmNvbWluZykpIHtcbiAgICAgICAgW2V4aXN0aW5nLCBpbmNvbWluZ10uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVuYW1lID0gc3RvcmUuZ2V0RmllbGRWYWx1ZShjaGlsZCwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlbmFtZSA9PT0gXCJzdHJpbmdcIiAmJiAhY2hpbGRUeXBlbmFtZXMuaW5jbHVkZXModHlwZW5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRUeXBlbmFtZXMucHVzaCh0eXBlbmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKDEwOCwgZmllbGROYW1lLCBwYXJlbnRUeXBlLCBjaGlsZFR5cGVuYW1lcy5sZW5ndGggP1xuICAgICAgICBcImVpdGhlciBlbnN1cmUgYWxsIG9iamVjdHMgb2YgdHlwZSBcIiArXG4gICAgICAgICAgICBjaGlsZFR5cGVuYW1lcy5qb2luKFwiIGFuZCBcIikgK1xuICAgICAgICAgICAgXCIgaGF2ZSBhbiBJRCBvciBhIGN1c3RvbSBtZXJnZSBmdW5jdGlvbiwgb3IgXCJcbiAgICAgICAgOiBcIlwiLCB0eXBlRG90TmFtZSwgeyAuLi5leGlzdGluZyB9LCB7IC4uLmluY29taW5nIH0pO1xufVxuZnVuY3Rpb24gZ2V0VHlwZW5hbWVGcm9tUmVzdWx0KHJlc3VsdCwgc2VsZWN0aW9uU2V0LCBmcmFnbWVudE1hcCkge1xuICAgIGxldCBmcmFnbWVudHM7XG4gICAgZm9yIChjb25zdCBzZWxlY3Rpb24gb2Ygc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMpIHtcbiAgICAgICAgaWYgKGlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5uYW1lLnZhbHVlID09PSBcIl9fdHlwZW5hbWVcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRbcmVzdWx0S2V5TmFtZUZyb21GaWVsZChzZWxlY3Rpb24pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmcmFnbWVudHMpIHtcbiAgICAgICAgICAgIGZyYWdtZW50cy5wdXNoKHNlbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmcmFnbWVudHMgPSBbc2VsZWN0aW9uXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlc3VsdC5fX3R5cGVuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiByZXN1bHQuX190eXBlbmFtZTtcbiAgICB9XG4gICAgaWYgKGZyYWdtZW50cykge1xuICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdGlvbiBvZiBmcmFnbWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVuYW1lID0gZ2V0VHlwZW5hbWVGcm9tUmVzdWx0KHJlc3VsdCwgZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uKHNlbGVjdGlvbiwgZnJhZ21lbnRNYXApLnNlbGVjdGlvblNldCwgZnJhZ21lbnRNYXApO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlbmFtZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdyaXRlVG9TdG9yZS5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgZXF1YWwgfSBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gXCJvcHRpbWlzbVwiO1xuaW1wb3J0IHsgYWRkVHlwZW5hbWVUb0RvY3VtZW50LCBjYWNoZVNpemVzLCBjYW5vbmljYWxTdHJpbmdpZnksIERvY3VtZW50VHJhbnNmb3JtLCBpc1JlZmVyZW5jZSwgcHJpbnQsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllc1wiO1xuaW1wb3J0IHsgX19ERVZfXyB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZW52aXJvbm1lbnRcIjtcbmltcG9ydCB7IGdldEluTWVtb3J5Q2FjaGVNZW1vcnlJbnRlcm5hbHMgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuaW1wb3J0IHsgQXBvbGxvQ2FjaGUgfSBmcm9tIFwiLi4vY29yZS9jYWNoZS5qc1wiO1xuaW1wb3J0IHsgRW50aXR5U3RvcmUsIHN1cHBvcnRzUmVzdWx0Q2FjaGluZyB9IGZyb20gXCIuL2VudGl0eVN0b3JlLmpzXCI7XG5pbXBvcnQgeyBoYXNPd24sIG5vcm1hbGl6ZUNvbmZpZyB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbmltcG9ydCB7IFBvbGljaWVzIH0gZnJvbSBcIi4vcG9saWNpZXMuanNcIjtcbmltcG9ydCB7IGZvcmdldENhY2hlLCBtYWtlVmFyLCByZWNhbGxDYWNoZSB9IGZyb20gXCIuL3JlYWN0aXZlVmFycy5qc1wiO1xuaW1wb3J0IHsgU3RvcmVSZWFkZXIgfSBmcm9tIFwiLi9yZWFkRnJvbVN0b3JlLmpzXCI7XG5pbXBvcnQgeyBTdG9yZVdyaXRlciB9IGZyb20gXCIuL3dyaXRlVG9TdG9yZS5qc1wiO1xuZXhwb3J0IGNsYXNzIEluTWVtb3J5Q2FjaGUgZXh0ZW5kcyBBcG9sbG9DYWNoZSB7XG4gICAgZGF0YTtcbiAgICBvcHRpbWlzdGljRGF0YTtcbiAgICBjb25maWc7XG4gICAgd2F0Y2hlcyA9IG5ldyBTZXQoKTtcbiAgICBzdG9yZVJlYWRlcjtcbiAgICBzdG9yZVdyaXRlcjtcbiAgICBhZGRUeXBlbmFtZVRyYW5zZm9ybSA9IG5ldyBEb2N1bWVudFRyYW5zZm9ybShhZGRUeXBlbmFtZVRvRG9jdW1lbnQpO1xuICAgIG1heWJlQnJvYWRjYXN0V2F0Y2g7XG4gICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdmFsdWUsIHNpbmNlIEluTWVtb3J5Q2FjaGUgcmVzdWx0IG9iamVjdHMgYXJlIGZyb3plblxuICAgIC8vIGluIGRldmVsb3BtZW50IGFuZCBleHBlY3RlZCB0byByZW1haW4gbG9naWNhbGx5IGltbXV0YWJsZSBpbiBwcm9kdWN0aW9uLlxuICAgIGFzc3VtZUltbXV0YWJsZVJlc3VsdHMgPSB0cnVlO1xuICAgIC8vIER5bmFtaWNhbGx5IGltcG9ydGVkIGNvZGUgY2FuIGF1Z21lbnQgZXhpc3RpbmcgdHlwZVBvbGljaWVzIG9yXG4gICAgLy8gcG9zc2libGVUeXBlcyBieSBjYWxsaW5nIGNhY2hlLnBvbGljaWVzLmFkZFR5cGVQb2xpY2llcyBvclxuICAgIC8vIGNhY2hlLnBvbGljaWVzLmFkZFBvc3NpYmxldHlwZXMuXG4gICAgcG9saWNpZXM7XG4gICAgbWFrZVZhciA9IG1ha2VWYXI7XG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBub3JtYWxpemVDb25maWcoY29uZmlnKTtcbiAgICAgICAgdGhpcy5wb2xpY2llcyA9IG5ldyBQb2xpY2llcyh7XG4gICAgICAgICAgICBjYWNoZTogdGhpcyxcbiAgICAgICAgICAgIGRhdGFJZEZyb21PYmplY3Q6IHRoaXMuY29uZmlnLmRhdGFJZEZyb21PYmplY3QsXG4gICAgICAgICAgICBwb3NzaWJsZVR5cGVzOiB0aGlzLmNvbmZpZy5wb3NzaWJsZVR5cGVzLFxuICAgICAgICAgICAgdHlwZVBvbGljaWVzOiB0aGlzLmNvbmZpZy50eXBlUG9saWNpZXMsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgLy8gUGFzc2luZyB7IHJlc3VsdENhY2hpbmc6IGZhbHNlIH0gaW4gdGhlIEluTWVtb3J5Q2FjaGUgY29uc3RydWN0b3Igb3B0aW9uc1xuICAgICAgICAvLyB3aWxsIGNvbXBsZXRlbHkgZGlzYWJsZSBkZXBlbmRlbmN5IHRyYWNraW5nLCB3aGljaCB3aWxsIGltcHJvdmUgbWVtb3J5XG4gICAgICAgIC8vIHVzYWdlIGJ1dCB3b3JzZW4gdGhlIHBlcmZvcm1hbmNlIG9mIHJlcGVhdGVkIHJlYWRzLlxuICAgICAgICBjb25zdCByb290U3RvcmUgPSAodGhpcy5kYXRhID0gbmV3IEVudGl0eVN0b3JlLlJvb3Qoe1xuICAgICAgICAgICAgcG9saWNpZXM6IHRoaXMucG9saWNpZXMsXG4gICAgICAgICAgICByZXN1bHRDYWNoaW5nOiB0aGlzLmNvbmZpZy5yZXN1bHRDYWNoaW5nLFxuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFdoZW4gbm8gb3B0aW1pc3RpYyB3cml0ZXMgYXJlIGN1cnJlbnRseSBhY3RpdmUsIGNhY2hlLm9wdGltaXN0aWNEYXRhID09PVxuICAgICAgICAvLyBjYWNoZS5kYXRhLCBzbyB0aGVyZSBhcmUgbm8gYWRkaXRpb25hbCBsYXllcnMgb24gdG9wIG9mIHRoZSBhY3R1YWwgZGF0YS5cbiAgICAgICAgLy8gV2hlbiBhbiBvcHRpbWlzdGljIHVwZGF0ZSBoYXBwZW5zLCB0aGlzLm9wdGltaXN0aWNEYXRhIHdpbGwgYmVjb21lIGFcbiAgICAgICAgLy8gbGlua2VkIGxpc3Qgb2YgRW50aXR5U3RvcmUgTGF5ZXIgb2JqZWN0cyB0aGF0IHRlcm1pbmF0ZXMgd2l0aCB0aGVcbiAgICAgICAgLy8gb3JpZ2luYWwgdGhpcy5kYXRhIGNhY2hlIG9iamVjdC5cbiAgICAgICAgdGhpcy5vcHRpbWlzdGljRGF0YSA9IHJvb3RTdG9yZS5zdHVtcDtcbiAgICAgICAgdGhpcy5yZXNldFJlc3VsdENhY2hlKCk7XG4gICAgfVxuICAgIHJlc2V0UmVzdWx0Q2FjaGUoKSB7XG4gICAgICAgIGNvbnN0IHsgZnJhZ21lbnRzIH0gPSB0aGlzLmNvbmZpZztcbiAgICAgICAgdGhpcy5hZGRUeXBlbmFtZVRyYW5zZm9ybS5yZXNldENhY2hlKCk7XG4gICAgICAgIGZyYWdtZW50cz8ucmVzZXRDYWNoZXMoKTtcbiAgICAgICAgLy8gVGhlIFN0b3JlV3JpdGVyIGlzIG1vc3RseSBzdGF0ZWxlc3MgYW5kIHNvIGRvZXNuJ3QgcmVhbGx5IG5lZWQgdG8gYmVcbiAgICAgICAgLy8gcmVzZXQsIGJ1dCBpdCBkb2VzIG5lZWQgdG8gaGF2ZSBpdHMgd3JpdGVyLnN0b3JlUmVhZGVyIHJlZmVyZW5jZSB1cGRhdGVkLFxuICAgICAgICAvLyBzbyBpdCdzIHNpbXBsZXIgdG8gdXBkYXRlIHRoaXMuc3RvcmVXcml0ZXIgYXMgd2VsbC5cbiAgICAgICAgdGhpcy5zdG9yZVdyaXRlciA9IG5ldyBTdG9yZVdyaXRlcih0aGlzLCAodGhpcy5zdG9yZVJlYWRlciA9IG5ldyBTdG9yZVJlYWRlcih7IGNhY2hlOiB0aGlzLCBmcmFnbWVudHMgfSkpLCBmcmFnbWVudHMpO1xuICAgICAgICB0aGlzLm1heWJlQnJvYWRjYXN0V2F0Y2ggPSB3cmFwKChjLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5icm9hZGNhc3RXYXRjaChjLCBvcHRpb25zKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbWF4OiBjYWNoZVNpemVzW1wiaW5NZW1vcnlDYWNoZS5tYXliZUJyb2FkY2FzdFdhdGNoXCJdIHx8XG4gICAgICAgICAgICAgICAgNTAwMCAvKiBkZWZhdWx0Q2FjaGVTaXplc1tcImluTWVtb3J5Q2FjaGUubWF5YmVCcm9hZGNhc3RXYXRjaFwiXSAqLyxcbiAgICAgICAgICAgIG1ha2VDYWNoZUtleTogKGMpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gYSBjYWNoZSBrZXkgKHRodXMgZW5hYmxpbmcgcmVzdWx0IGNhY2hpbmcpIG9ubHkgaWYgd2UncmVcbiAgICAgICAgICAgICAgICAvLyBjdXJyZW50bHkgdXNpbmcgYSBkYXRhIHN0b3JlIHRoYXQgY2FuIHRyYWNrIGNhY2hlIGRlcGVuZGVuY2llcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IGMub3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzUmVzdWx0Q2FjaGluZyhzdG9yZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBvcHRpbWlzdGljLCBpZCwgdmFyaWFibGVzIH0gPSBjO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmUubWFrZUNhY2hlS2V5KGMucXVlcnksIFxuICAgICAgICAgICAgICAgICAgICAvLyBEaWZmZXJlbnQgd2F0Y2hlcyBjYW4gaGF2ZSB0aGUgc2FtZSBxdWVyeSwgb3B0aW1pc3RpY1xuICAgICAgICAgICAgICAgICAgICAvLyBzdGF0dXMsIHJvb3RJZCwgYW5kIHZhcmlhYmxlcywgYnV0IGlmIHRoZWlyIGNhbGxiYWNrcyBhcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlmZmVyZW50LCB0aGUgKGlkZW50aWNhbCkgcmVzdWx0IG5lZWRzIHRvIGJlIGRlbGl2ZXJlZCB0b1xuICAgICAgICAgICAgICAgICAgICAvLyBlYWNoIGRpc3RpbmN0IGNhbGxiYWNrLiBUaGUgZWFzaWVzdCB3YXkgdG8gYWNoaWV2ZSB0aGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcGFyYXRpb24gaXMgdG8gaW5jbHVkZSBjLmNhbGxiYWNrIGluIHRoZSBjYWNoZSBrZXkgZm9yXG4gICAgICAgICAgICAgICAgICAgIC8vIG1heWJlQnJvYWRjYXN0V2F0Y2ggY2FsbHMuIFNlZSBpc3N1ZSAjNTczMy5cbiAgICAgICAgICAgICAgICAgICAgYy5jYWxsYmFjaywgY2Fub25pY2FsU3RyaW5naWZ5KHsgb3B0aW1pc3RpYywgaWQsIHZhcmlhYmxlcyB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFNpbmNlIHdlIGhhdmUgdGhyb3duIGF3YXkgYWxsIHRoZSBjYWNoZWQgZnVuY3Rpb25zIHRoYXQgZGVwZW5kIG9uIHRoZVxuICAgICAgICAvLyBDYWNoZUdyb3VwIGRlcGVuZGVuY2llcyBtYWludGFpbmVkIGJ5IEVudGl0eVN0b3JlLCB3ZSBzaG91bGQgYWxzbyByZXNldFxuICAgICAgICAvLyBhbGwgQ2FjaGVHcm91cCBkZXBlbmRlbmN5IGluZm9ybWF0aW9uLlxuICAgICAgICBuZXcgU2V0KFt0aGlzLmRhdGEuZ3JvdXAsIHRoaXMub3B0aW1pc3RpY0RhdGEuZ3JvdXBdKS5mb3JFYWNoKChncm91cCkgPT4gZ3JvdXAucmVzZXRDYWNoaW5nKCkpO1xuICAgIH1cbiAgICByZXN0b3JlKGRhdGEpIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIC8vIFNpbmNlIGNhbGxpbmcgdGhpcy5pbml0KCkgZGlzY2FyZHMvcmVwbGFjZXMgdGhlIGVudGlyZSBTdG9yZVJlYWRlciwgYWxvbmdcbiAgICAgICAgLy8gd2l0aCB0aGUgcmVzdWx0IGNhY2hlcyBpdCBtYWludGFpbnMsIHRoaXMuZGF0YS5yZXBsYWNlKGRhdGEpIHdvbid0IGhhdmVcbiAgICAgICAgLy8gdG8gYm90aGVyIGRlbGV0aW5nIHRoZSBvbGQgZGF0YS5cbiAgICAgICAgaWYgKGRhdGEpXG4gICAgICAgICAgICB0aGlzLmRhdGEucmVwbGFjZShkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGV4dHJhY3Qob3B0aW1pc3RpYyA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiAob3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGEpLmV4dHJhY3QoKTtcbiAgICB9XG4gICAgcmVhZChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgXG4gICAgICAgIC8vIFNpbmNlIHJlYWQgcmV0dXJucyBkYXRhIG9yIG51bGwsIHdpdGhvdXQgYW55IGFkZGl0aW9uYWwgbWV0YWRhdGFcbiAgICAgICAgLy8gYWJvdXQgd2hldGhlci93aGVyZSB0aGVyZSBtaWdodCBoYXZlIGJlZW4gbWlzc2luZyBmaWVsZHMsIHRoZVxuICAgICAgICAvLyBkZWZhdWx0IGJlaGF2aW9yIGNhbm5vdCBiZSByZXR1cm5QYXJ0aWFsRGF0YSA9IHRydWUgKGxpa2UgaXQgaXNcbiAgICAgICAgLy8gZm9yIHRoZSBkaWZmIG1ldGhvZCksIHNpbmNlIGRlZmF1bHRpbmcgdG8gdHJ1ZSB3b3VsZCB2aW9sYXRlIHRoZVxuICAgICAgICAvLyBpbnRlZ3JpdHkgb2YgdGhlIFQgaW4gdGhlIHJldHVybiB0eXBlLiBIb3dldmVyLCBwYXJ0aWFsIGRhdGEgbWF5XG4gICAgICAgIC8vIGJlIHVzZWZ1bCBpbiBzb21lIGNhc2VzLCBzbyByZXR1cm5QYXJ0aWFsRGF0YTp0cnVlIG1heSBiZVxuICAgICAgICAvLyBzcGVjaWZpZWQgZXhwbGljaXRseS5cbiAgICAgICAgcmV0dXJuUGFydGlhbERhdGEgPSBmYWxzZSwgfSA9IG9wdGlvbnM7XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlUmVhZGVyLmRpZmZRdWVyeUFnYWluc3RTdG9yZSh7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgc3RvcmU6IG9wdGlvbnMub3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGEsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgcmV0dXJuUGFydGlhbERhdGEsXG4gICAgICAgIH0pLnJlc3VsdDtcbiAgICB9XG4gICAgd3JpdGUob3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgKyt0aGlzLnR4Q291bnQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdG9yZVdyaXRlci53cml0ZVRvU3RvcmUodGhpcy5kYXRhLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmICghLS10aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbW9kaWZ5KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGhhc093bi5jYWxsKG9wdGlvbnMsIFwiaWRcIikgJiYgIW9wdGlvbnMuaWQpIHtcbiAgICAgICAgICAgIC8vIFRvIG15IGtub3dsZWRnZSwgVHlwZVNjcmlwdCBkb2VzIG5vdCBjdXJyZW50bHkgcHJvdmlkZSBhIHdheSB0b1xuICAgICAgICAgICAgLy8gZW5mb3JjZSB0aGF0IGFuIG9wdGlvbmFsIHByb3BlcnR5Pzp0eXBlIG11c3QgKm5vdCogYmUgdW5kZWZpbmVkXG4gICAgICAgICAgICAvLyB3aGVuIHByZXNlbnQuIFRoYXQgYWJpbGl0eSB3b3VsZCBiZSB1c2VmdWwgaGVyZSwgYmVjYXVzZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyBvcHRpb25zLmlkIHRvIGRlZmF1bHQgdG8gUk9PVF9RVUVSWSBvbmx5IHdoZW4gbm8gb3B0aW9ucy5pZCB3YXNcbiAgICAgICAgICAgIC8vIHByb3ZpZGVkLiBJZiB0aGUgY2FsbGVyIGF0dGVtcHRzIHRvIHBhc3Mgb3B0aW9ucy5pZCB3aXRoIGFcbiAgICAgICAgICAgIC8vIGZhbHN5L3VuZGVmaW5lZCB2YWx1ZSAocGVyaGFwcyBiZWNhdXNlIGNhY2hlLmlkZW50aWZ5IGZhaWxlZCksIHdlXG4gICAgICAgICAgICAvLyBzaG91bGQgbm90IGFzc3VtZSB0aGUgZ29hbCB3YXMgdG8gbW9kaWZ5IHRoZSBST09UX1FVRVJZIG9iamVjdC5cbiAgICAgICAgICAgIC8vIFdlIGNvdWxkIHRocm93LCBidXQgaXQgc2VlbXMgbmF0dXJhbCB0byByZXR1cm4gZmFsc2UgdG8gaW5kaWNhdGVcbiAgICAgICAgICAgIC8vIHRoYXQgbm90aGluZyB3YXMgbW9kaWZpZWQuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RvcmUgPSAoKG9wdGlvbnMub3B0aW1pc3RpYykgLy8gRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAgICAgICkgP1xuICAgICAgICAgICAgdGhpcy5vcHRpbWlzdGljRGF0YVxuICAgICAgICAgICAgOiB0aGlzLmRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICArK3RoaXMudHhDb3VudDtcbiAgICAgICAgICAgIHJldHVybiBzdG9yZS5tb2RpZnkob3B0aW9ucy5pZCB8fCBcIlJPT1RfUVVFUllcIiwgb3B0aW9ucy5maWVsZHMsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmICghLS10aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlmZihvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlUmVhZGVyLmRpZmZRdWVyeUFnYWluc3RTdG9yZSh7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgc3RvcmU6IG9wdGlvbnMub3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGEsXG4gICAgICAgICAgICByb290SWQ6IG9wdGlvbnMuaWQgfHwgXCJST09UX1FVRVJZXCIsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgd2F0Y2god2F0Y2gpIHtcbiAgICAgICAgaWYgKCF0aGlzLndhdGNoZXMuc2l6ZSkge1xuICAgICAgICAgICAgLy8gSW4gY2FzZSB3ZSBwcmV2aW91c2x5IGNhbGxlZCBmb3JnZXRDYWNoZSh0aGlzKSBiZWNhdXNlXG4gICAgICAgICAgICAvLyB0aGlzLndhdGNoZXMgYmVjYW1lIGVtcHR5IChzZWUgYmVsb3cpLCByZWF0dGFjaCB0aGlzIGNhY2hlIHRvIGFueVxuICAgICAgICAgICAgLy8gcmVhY3RpdmUgdmFyaWFibGVzIG9uIHdoaWNoIGl0IHByZXZpb3VzbHkgZGVwZW5kZWQuIEl0IG1pZ2h0IHNlZW1cbiAgICAgICAgICAgIC8vIHBhcmFkb3hpY2FsIHRoYXQgd2UncmUgYWJsZSB0byByZWNhbGwgc29tZXRoaW5nIHdlIHN1cHBvc2VkbHlcbiAgICAgICAgICAgIC8vIGZvcmdvdCwgYnV0IHRoZSBwb2ludCBvZiBjYWxsaW5nIGZvcmdldENhY2hlKHRoaXMpIGlzIHRvIHNpbGVuY2VcbiAgICAgICAgICAgIC8vIHVzZWxlc3MgYnJvYWRjYXN0cyB3aGlsZSB0aGlzLndhdGNoZXMgaXMgZW1wdHksIGFuZCB0byBhbGxvdyB0aGVcbiAgICAgICAgICAgIC8vIGNhY2hlIHRvIGJlIGdhcmJhZ2UgY29sbGVjdGVkLiBJZiwgaG93ZXZlciwgd2UgbWFuYWdlIHRvIGNhbGxcbiAgICAgICAgICAgIC8vIHJlY2FsbENhY2hlKHRoaXMpIGhlcmUsIHRoaXMgY2FjaGUgb2JqZWN0IG11c3Qgbm90IGhhdmUgYmVlblxuICAgICAgICAgICAgLy8gZ2FyYmFnZSBjb2xsZWN0ZWQgeWV0LCBhbmQgc2hvdWxkIHJlc3VtZSByZWNlaXZpbmcgdXBkYXRlcyBmcm9tXG4gICAgICAgICAgICAvLyByZWFjdGl2ZSB2YXJpYWJsZXMsIG5vdyB0aGF0IGl0IGhhcyBhIHdhdGNoZXIgdG8gbm90aWZ5LlxuICAgICAgICAgICAgcmVjYWxsQ2FjaGUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YXRjaGVzLmFkZCh3YXRjaCk7XG4gICAgICAgIGlmICh3YXRjaC5pbW1lZGlhdGUpIHtcbiAgICAgICAgICAgIHRoaXMubWF5YmVCcm9hZGNhc3RXYXRjaCh3YXRjaCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIC8vIE9uY2Ugd2UgcmVtb3ZlIHRoZSBsYXN0IHdhdGNoIGZyb20gdGhpcy53YXRjaGVzLCBjYWNoZS5icm9hZGNhc3RXYXRjaGVzXG4gICAgICAgICAgICAvLyBubyBsb25nZXIgZG9lcyBhbnl0aGluZywgc28gd2UgcHJlZW1wdGl2ZWx5IHRlbGwgdGhlIHJlYWN0aXZlIHZhcmlhYmxlXG4gICAgICAgICAgICAvLyBzeXN0ZW0gdG8gZXhjbHVkZSB0aGlzIGNhY2hlIGZyb20gZnV0dXJlIGJyb2FkY2FzdHMuXG4gICAgICAgICAgICBpZiAodGhpcy53YXRjaGVzLmRlbGV0ZSh3YXRjaCkgJiYgIXRoaXMud2F0Y2hlcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgZm9yZ2V0Q2FjaGUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhpcyB3YXRjaCBmcm9tIHRoZSBMUlUgY2FjaGUgbWFuYWdlZCBieSB0aGVcbiAgICAgICAgICAgIC8vIG1heWJlQnJvYWRjYXN0V2F0Y2ggT3B0aW1pc3RpY1dyYXBwZXJGdW5jdGlvbiwgdG8gcHJldmVudCBtZW1vcnlcbiAgICAgICAgICAgIC8vIGxlYWtzIGludm9sdmluZyB0aGUgY2xvc3VyZSBvZiB3YXRjaC5jYWxsYmFjay5cbiAgICAgICAgICAgIHRoaXMubWF5YmVCcm9hZGNhc3RXYXRjaC5mb3JnZXQod2F0Y2gpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBnYyhvcHRpb25zKSB7XG4gICAgICAgIGNhbm9uaWNhbFN0cmluZ2lmeS5yZXNldCgpO1xuICAgICAgICBwcmludC5yZXNldCgpO1xuICAgICAgICBjb25zdCBpZHMgPSB0aGlzLm9wdGltaXN0aWNEYXRhLmdjKCk7XG4gICAgICAgIGlmIChvcHRpb25zICYmICF0aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5yZXNldFJlc3VsdENhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0UmVzdWx0Q2FjaGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaWRzO1xuICAgIH1cbiAgICAvLyBDYWxsIHRoaXMgbWV0aG9kIHRvIGVuc3VyZSB0aGUgZ2l2ZW4gcm9vdCBJRCByZW1haW5zIGluIHRoZSBjYWNoZSBhZnRlclxuICAgIC8vIGdhcmJhZ2UgY29sbGVjdGlvbiwgYWxvbmcgd2l0aCBpdHMgdHJhbnNpdGl2ZSBjaGlsZCBlbnRpdGllcy4gTm90ZSB0aGF0XG4gICAgLy8gdGhlIGNhY2hlIGF1dG9tYXRpY2FsbHkgcmV0YWlucyBhbGwgZGlyZWN0bHkgd3JpdHRlbiBlbnRpdGllcy4gQnkgZGVmYXVsdCxcbiAgICAvLyB0aGUgcmV0YWlubWVudCBwZXJzaXN0cyBhZnRlciBvcHRpbWlzdGljIHVwZGF0ZXMgYXJlIHJlbW92ZWQuIFBhc3MgdHJ1ZVxuICAgIC8vIGZvciB0aGUgb3B0aW1pc3RpYyBhcmd1bWVudCBpZiB5b3Ugd291bGQgcHJlZmVyIGZvciB0aGUgcmV0YWlubWVudCB0byBiZVxuICAgIC8vIGRpc2NhcmRlZCB3aGVuIHRoZSB0b3AtbW9zdCBvcHRpbWlzdGljIGxheWVyIGlzIHJlbW92ZWQuIFJldHVybnMgdGhlXG4gICAgLy8gcmVzdWx0aW5nIChub24tbmVnYXRpdmUpIHJldGFpbm1lbnQgY291bnQuXG4gICAgcmV0YWluKHJvb3RJZCwgb3B0aW1pc3RpYykge1xuICAgICAgICByZXR1cm4gKG9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhKS5yZXRhaW4ocm9vdElkKTtcbiAgICB9XG4gICAgLy8gQ2FsbCB0aGlzIG1ldGhvZCB0byB1bmRvIHRoZSBlZmZlY3Qgb2YgdGhlIHJldGFpbiBtZXRob2QsIGFib3ZlLiBPbmNlIHRoZVxuICAgIC8vIHJldGFpbm1lbnQgY291bnQgZmFsbHMgdG8gemVybywgdGhlIGdpdmVuIElEIHdpbGwgbm8gbG9uZ2VyIGJlIHByZXNlcnZlZFxuICAgIC8vIGR1cmluZyBnYXJiYWdlIGNvbGxlY3Rpb24sIHRob3VnaCBpdCBtYXkgc3RpbGwgYmUgcHJlc2VydmVkIGJ5IG90aGVyIHNhZmVcbiAgICAvLyBlbnRpdGllcyB0aGF0IHJlZmVyIHRvIGl0LiBSZXR1cm5zIHRoZSByZXN1bHRpbmcgKG5vbi1uZWdhdGl2ZSkgcmV0YWlubWVudFxuICAgIC8vIGNvdW50LCBpbiBjYXNlIHRoYXQncyB1c2VmdWwuXG4gICAgcmVsZWFzZShyb290SWQsIG9wdGltaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIChvcHRpbWlzdGljID8gdGhpcy5vcHRpbWlzdGljRGF0YSA6IHRoaXMuZGF0YSkucmVsZWFzZShyb290SWQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBjYW5vbmljYWwgSUQgZm9yIGEgZ2l2ZW4gU3RvcmVPYmplY3QsIG9iZXlpbmcgdHlwZVBvbGljaWVzXG4gICAgLy8gYW5kIGtleUZpZWxkcyAoYW5kIGRhdGFJZEZyb21PYmplY3QsIGlmIHlvdSBzdGlsbCB1c2UgdGhhdCkuIEF0IG1pbmltdW0sXG4gICAgLy8gdGhlIG9iamVjdCBtdXN0IGNvbnRhaW4gYSBfX3R5cGVuYW1lIGFuZCBhbnkgcHJpbWFyeSBrZXkgZmllbGRzIHJlcXVpcmVkXG4gICAgLy8gdG8gaWRlbnRpZnkgZW50aXRpZXMgb2YgdGhhdCB0eXBlLiBJZiB5b3UgcGFzcyBhIHF1ZXJ5IHJlc3VsdCBvYmplY3QsIGJlXG4gICAgLy8gc3VyZSB0aGF0IG5vbmUgb2YgdGhlIHByaW1hcnkga2V5IGZpZWxkcyBoYXZlIGJlZW4gcmVuYW1lZCBieSBhbGlhc2luZy5cbiAgICAvLyBJZiB5b3UgcGFzcyBhIFJlZmVyZW5jZSBvYmplY3QsIGl0cyBfX3JlZiBJRCBzdHJpbmcgd2lsbCBiZSByZXR1cm5lZC5cbiAgICBpZGVudGlmeShvYmplY3QpIHtcbiAgICAgICAgaWYgKGlzUmVmZXJlbmNlKG9iamVjdCkpXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0Ll9fcmVmO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9saWNpZXMuaWRlbnRpZnkob2JqZWN0KVswXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQud2FybihlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBldmljdChvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5pZCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKG9wdGlvbnMsIFwiaWRcIikpIHtcbiAgICAgICAgICAgICAgICAvLyBTZWUgY29tbWVudCBpbiBtb2RpZnkgbWV0aG9kIGFib3V0IHdoeSB3ZSByZXR1cm4gZmFsc2Ugd2hlblxuICAgICAgICAgICAgICAgIC8vIG9wdGlvbnMuaWQgZXhpc3RzIGJ1dCBpcyBmYWxzeS91bmRlZmluZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgaWQ6IFwiUk9PVF9RVUVSWVwiIH07XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEl0J3MgdW5saWtlbHkgdGhhdCB0aGUgZXZpY3Rpb24gd2lsbCBlbmQgdXAgaW52b2tpbmcgYW55IG90aGVyXG4gICAgICAgICAgICAvLyBjYWNoZSB1cGRhdGUgb3BlcmF0aW9ucyB3aGlsZSBpdCdzIHJ1bm5pbmcsIGJ1dCB7aW4sZGV9Y3JlbWVudGluZ1xuICAgICAgICAgICAgLy8gdGhpcy50eENvdW50IHN0aWxsIHNlZW1zIGxpa2UgYSBnb29kIGlkZWEsIGZvciB1bmlmb3JtaXR5IHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSBvdGhlciB1cGRhdGUgbWV0aG9kcy5cbiAgICAgICAgICAgICsrdGhpcy50eENvdW50O1xuICAgICAgICAgICAgLy8gUGFzcyB0aGlzLmRhdGEgYXMgYSBsaW1pdCBvbiB0aGUgZGVwdGggb2YgdGhlIGV2aWN0aW9uLCBzbyBldmljdGlvbnNcbiAgICAgICAgICAgIC8vIGR1cmluZyBvcHRpbWlzdGljIHVwZGF0ZXMgKHdoZW4gdGhpcy5kYXRhIGlzIHRlbXBvcmFyaWx5IHNldCBlcXVhbCB0b1xuICAgICAgICAgICAgLy8gdGhpcy5vcHRpbWlzdGljRGF0YSkgZG8gbm90IGVzY2FwZSB0aGVpciBvcHRpbWlzdGljIExheWVyLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW1pc3RpY0RhdGEuZXZpY3Qob3B0aW9ucywgdGhpcy5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmICghLS10aGlzLnR4Q291bnQgJiYgb3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzZXQob3B0aW9ucykge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgY2Fub25pY2FsU3RyaW5naWZ5LnJlc2V0KCk7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZGlzY2FyZFdhdGNoZXMpIHtcbiAgICAgICAgICAgIC8vIFNpbWlsYXIgdG8gd2hhdCBoYXBwZW5zIGluIHRoZSB1bnN1YnNjcmliZSBmdW5jdGlvbiByZXR1cm5lZCBieVxuICAgICAgICAgICAgLy8gY2FjaGUud2F0Y2gsIGFwcGxpZWQgdG8gYWxsIGN1cnJlbnQgd2F0Y2hlcy5cbiAgICAgICAgICAgIHRoaXMud2F0Y2hlcy5mb3JFYWNoKCh3YXRjaCkgPT4gdGhpcy5tYXliZUJyb2FkY2FzdFdhdGNoLmZvcmdldCh3YXRjaCkpO1xuICAgICAgICAgICAgdGhpcy53YXRjaGVzLmNsZWFyKCk7XG4gICAgICAgICAgICBmb3JnZXRDYWNoZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhpcy5pbml0KCkgYWJvdmUgdW5ibG9ja3MgYWxsIG1heWJlQnJvYWRjYXN0V2F0Y2ggY2FjaGluZywgc29cbiAgICAgICAgICAgIC8vIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcygpIHRyaWdnZXJzIGEgYnJvYWRjYXN0IHRvIGV2ZXJ5IGN1cnJlbnQgd2F0Y2hlclxuICAgICAgICAgICAgLy8gKGxldHRpbmcgdGhlbSBrbm93IHRoZWlyIGRhdGEgaXMgbm93IG1pc3NpbmcpLiBUaGlzIGRlZmF1bHQgYmVoYXZpb3IgaXNcbiAgICAgICAgICAgIC8vIGNvbnZlbmllbnQgYmVjYXVzZSBpdCBtZWFucyB0aGUgd2F0Y2hlcyBkbyBub3QgaGF2ZSB0byBiZSBtYW51YWxseVxuICAgICAgICAgICAgLy8gcmVlc3RhYmxpc2hlZCBhZnRlciByZXNldHRpbmcgdGhlIGNhY2hlLiBUbyBwcmV2ZW50IHRoaXMgYnJvYWRjYXN0IGFuZFxuICAgICAgICAgICAgLy8gY2FuY2VsIGFsbCB3YXRjaGVzLCBwYXNzIHRydWUgZm9yIG9wdGlvbnMuZGlzY2FyZFdhdGNoZXMuXG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU9wdGltaXN0aWMoaWRUb1JlbW92ZSkge1xuICAgICAgICBjb25zdCBuZXdPcHRpbWlzdGljRGF0YSA9IHRoaXMub3B0aW1pc3RpY0RhdGEucmVtb3ZlTGF5ZXIoaWRUb1JlbW92ZSk7XG4gICAgICAgIGlmIChuZXdPcHRpbWlzdGljRGF0YSAhPT0gdGhpcy5vcHRpbWlzdGljRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpbWlzdGljRGF0YSA9IG5ld09wdGltaXN0aWNEYXRhO1xuICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RXYXRjaGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHhDb3VudCA9IDA7XG4gICAgYmF0Y2gob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHVwZGF0ZSwgb3B0aW1pc3RpYyA9IHRydWUsIHJlbW92ZU9wdGltaXN0aWMsIG9uV2F0Y2hVcGRhdGVkLCB9ID0gb3B0aW9ucztcbiAgICAgICAgbGV0IHVwZGF0ZVJlc3VsdDtcbiAgICAgICAgY29uc3QgcGVyZm9ybSA9IChsYXllcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBvcHRpbWlzdGljRGF0YSB9ID0gdGhpcztcbiAgICAgICAgICAgICsrdGhpcy50eENvdW50O1xuICAgICAgICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5vcHRpbWlzdGljRGF0YSA9IGxheWVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHVwZGF0ZVJlc3VsdCA9IHVwZGF0ZSh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAtLXRoaXMudHhDb3VudDtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW1pc3RpY0RhdGEgPSBvcHRpbWlzdGljRGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWxyZWFkeURpcnR5ID0gbmV3IFNldCgpO1xuICAgICAgICBpZiAob25XYXRjaFVwZGF0ZWQgJiYgIXRoaXMudHhDb3VudCkge1xuICAgICAgICAgICAgLy8gSWYgYW4gb3B0aW9ucy5vbldhdGNoVXBkYXRlZCBjYWxsYmFjayBpcyBwcm92aWRlZCwgd2Ugd2FudCB0byBjYWxsIGl0XG4gICAgICAgICAgICAvLyB3aXRoIG9ubHkgdGhlIENhY2hlLldhdGNoT3B0aW9ucyBvYmplY3RzIGFmZmVjdGVkIGJ5IG9wdGlvbnMudXBkYXRlLFxuICAgICAgICAgICAgLy8gYnV0IHRoZXJlIG1pZ2h0IGJlIGRpcnR5IHdhdGNoZXJzIGFscmVhZHkgd2FpdGluZyB0byBiZSBicm9hZGNhc3QgdGhhdFxuICAgICAgICAgICAgLy8gaGF2ZSBub3RoaW5nIHRvIGRvIHdpdGggdGhlIHVwZGF0ZS4gVG8gcHJldmVudCBpbmNsdWRpbmcgdGhvc2Ugd2F0Y2hlcnNcbiAgICAgICAgICAgIC8vIGluIHRoZSBwb3N0LXVwZGF0ZSBicm9hZGNhc3QsIHdlIHBlcmZvcm0gdGhpcyBpbml0aWFsIGJyb2FkY2FzdCB0b1xuICAgICAgICAgICAgLy8gY29sbGVjdCB0aGUgZGlydHkgd2F0Y2hlcnMsIHNvIHdlIGNhbiByZS1kaXJ0eSB0aGVtIGxhdGVyLCBhZnRlciB0aGVcbiAgICAgICAgICAgIC8vIHBvc3QtdXBkYXRlIGJyb2FkY2FzdCwgYWxsb3dpbmcgdGhlbSB0byByZWNlaXZlIHRoZWlyIHBlbmRpbmdcbiAgICAgICAgICAgIC8vIGJyb2FkY2FzdHMgdGhlIG5leHQgdGltZSBicm9hZGNhc3RXYXRjaGVzIGlzIGNhbGxlZCwganVzdCBhcyB0aGV5IHdvdWxkXG4gICAgICAgICAgICAvLyBpZiB3ZSBuZXZlciBjYWxsZWQgY2FjaGUuYmF0Y2guXG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoe1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgb25XYXRjaFVwZGF0ZWQod2F0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxyZWFkeURpcnR5LmFkZCh3YXRjaCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpbWlzdGljID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlcmUgY2FuIGJlIG11bHRpcGxlIGxheWVycyB3aXRoIHRoZSBzYW1lIG9wdGltaXN0aWMgSUQuXG4gICAgICAgICAgICAvLyBXaGVuIHJlbW92ZU9wdGltaXN0aWMoaWQpIGlzIGNhbGxlZCBmb3IgdGhhdCBpZCwgYWxsIG1hdGNoaW5nIGxheWVyc1xuICAgICAgICAgICAgLy8gd2lsbCBiZSByZW1vdmVkLCBhbmQgdGhlIHJlbWFpbmluZyBsYXllcnMgd2lsbCBiZSByZWFwcGxpZWQuXG4gICAgICAgICAgICB0aGlzLm9wdGltaXN0aWNEYXRhID0gdGhpcy5vcHRpbWlzdGljRGF0YS5hZGRMYXllcihvcHRpbWlzdGljLCBwZXJmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpbWlzdGljID09PSBmYWxzZSkge1xuICAgICAgICAgICAgLy8gRW5zdXJlIGJvdGggdGhpcy5kYXRhIGFuZCB0aGlzLm9wdGltaXN0aWNEYXRhIHJlZmVyIHRvIHRoZSByb290XG4gICAgICAgICAgICAvLyAobm9uLW9wdGltaXN0aWMpIGxheWVyIG9mIHRoZSBjYWNoZSBkdXJpbmcgdGhlIHVwZGF0ZS4gTm90ZSB0aGF0XG4gICAgICAgICAgICAvLyB0aGlzLmRhdGEgY291bGQgYmUgYSBMYXllciBpZiB3ZSBhcmUgY3VycmVudGx5IGV4ZWN1dGluZyBhbiBvcHRpbWlzdGljXG4gICAgICAgICAgICAvLyB1cGRhdGUgZnVuY3Rpb24sIGJ1dCBvdGhlcndpc2Ugd2lsbCBhbHdheXMgYmUgYW4gRW50aXR5U3RvcmUuUm9vdFxuICAgICAgICAgICAgLy8gaW5zdGFuY2UuXG4gICAgICAgICAgICBwZXJmb3JtKHRoaXMuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIGxlYXZlIHRoaXMuZGF0YSBhbmQgdGhpcy5vcHRpbWlzdGljRGF0YSB1bmNoYW5nZWQgYW5kIHJ1blxuICAgICAgICAgICAgLy8gdGhlIHVwZGF0ZSB3aXRoIGJyb2FkY2FzdCBiYXRjaGluZy5cbiAgICAgICAgICAgIHBlcmZvcm0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlbW92ZU9wdGltaXN0aWMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW1pc3RpY0RhdGEgPSB0aGlzLm9wdGltaXN0aWNEYXRhLnJlbW92ZUxheWVyKHJlbW92ZU9wdGltaXN0aWMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vdGU6IGlmIHRoaXMudHhDb3VudCA+IDAsIHRoZW4gYWxyZWFkeURpcnR5LnNpemUgPT09IDAsIHNvIHRoaXMgY29kZVxuICAgICAgICAvLyB0YWtlcyB0aGUgZWxzZSBicmFuY2ggYW5kIGNhbGxzIHRoaXMuYnJvYWRjYXN0V2F0Y2hlcyhvcHRpb25zKSwgd2hpY2hcbiAgICAgICAgLy8gZG9lcyBub3RoaW5nIHdoZW4gdGhpcy50eENvdW50ID4gMC5cbiAgICAgICAgaWYgKG9uV2F0Y2hVcGRhdGVkICYmIGFscmVhZHlEaXJ0eS5zaXplKSB7XG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoe1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgb25XYXRjaFVwZGF0ZWQod2F0Y2gsIGRpZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb25XYXRjaFVwZGF0ZWQuY2FsbCh0aGlzLCB3YXRjaCwgZGlmZik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSBvbldhdGNoVXBkYXRlZCBkaWQgbm90IHJldHVybiBmYWxzZSwgdGhpcyBkaWZmIGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhYm91dCB0byBiZSBicm9hZGNhc3QgdG8gd2F0Y2guY2FsbGJhY2ssIHNvIHdlIGRvbid0IG5lZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIHJlLWRpcnR5IGl0IHdpdGggdGhlIG90aGVyIGFscmVhZHlEaXJ0eSB3YXRjaGVzIGJlbG93LlxuICAgICAgICAgICAgICAgICAgICAgICAgYWxyZWFkeURpcnR5LmRlbGV0ZSh3YXRjaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTaWxlbnRseSByZS1kaXJ0eSBhbnkgd2F0Y2hlcyB0aGF0IHdlcmUgYWxyZWFkeSBkaXJ0eSBiZWZvcmUgdGhlIHVwZGF0ZVxuICAgICAgICAgICAgLy8gd2FzIHBlcmZvcm1lZCwgYW5kIHdlcmUgbm90IGJyb2FkY2FzdCBqdXN0IG5vdy5cbiAgICAgICAgICAgIGlmIChhbHJlYWR5RGlydHkuc2l6ZSkge1xuICAgICAgICAgICAgICAgIGFscmVhZHlEaXJ0eS5mb3JFYWNoKCh3YXRjaCkgPT4gdGhpcy5tYXliZUJyb2FkY2FzdFdhdGNoLmRpcnR5KHdhdGNoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBhbHJlYWR5RGlydHkgaXMgZW1wdHkgb3Igd2UgZG9uJ3QgaGF2ZSBhbiBvbldhdGNoVXBkYXRlZFxuICAgICAgICAgICAgLy8gZnVuY3Rpb24sIHdlIGRvbid0IG5lZWQgdG8gZ28gdG8gdGhlIHRyb3VibGUgb2Ygd3JhcHBpbmdcbiAgICAgICAgICAgIC8vIG9wdGlvbnMub25XYXRjaFVwZGF0ZWQuXG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVwZGF0ZVJlc3VsdDtcbiAgICB9XG4gICAgcGVyZm9ybVRyYW5zYWN0aW9uKHVwZGF0ZSwgb3B0aW1pc3RpY0lkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoKHtcbiAgICAgICAgICAgIHVwZGF0ZSxcbiAgICAgICAgICAgIG9wdGltaXN0aWM6IG9wdGltaXN0aWNJZCB8fCBvcHRpbWlzdGljSWQgIT09IG51bGwsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRUeXBlbmFtZVRyYW5zZm9ybS50cmFuc2Zvcm1Eb2N1bWVudCh0aGlzLmFkZEZyYWdtZW50c1RvRG9jdW1lbnQoZG9jdW1lbnQpKTtcbiAgICB9XG4gICAgZnJhZ21lbnRNYXRjaGVzKGZyYWdtZW50LCB0eXBlbmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb2xpY2llcy5mcmFnbWVudE1hdGNoZXMoZnJhZ21lbnQsIHR5cGVuYW1lKTtcbiAgICB9XG4gICAgbG9va3VwRnJhZ21lbnQoZnJhZ21lbnROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5mcmFnbWVudHM/Lmxvb2t1cChmcmFnbWVudE5hbWUpIHx8IG51bGw7XG4gICAgfVxuICAgIGJyb2FkY2FzdFdhdGNoZXMob3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMudHhDb3VudCkge1xuICAgICAgICAgICAgdGhpcy53YXRjaGVzLmZvckVhY2goKGMpID0+IHRoaXMubWF5YmVCcm9hZGNhc3RXYXRjaChjLCBvcHRpb25zKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkRnJhZ21lbnRzVG9Eb2N1bWVudChkb2N1bWVudCkge1xuICAgICAgICBjb25zdCB7IGZyYWdtZW50cyB9ID0gdGhpcy5jb25maWc7XG4gICAgICAgIHJldHVybiBmcmFnbWVudHMgPyBmcmFnbWVudHMudHJhbnNmb3JtKGRvY3VtZW50KSA6IGRvY3VtZW50O1xuICAgIH1cbiAgICAvLyBUaGlzIG1ldGhvZCBpcyB3cmFwcGVkIGJ5IG1heWJlQnJvYWRjYXN0V2F0Y2gsIHdoaWNoIGlzIGNhbGxlZCBieVxuICAgIC8vIGJyb2FkY2FzdFdhdGNoZXMsIHNvIHRoYXQgd2UgY29tcHV0ZSBhbmQgYnJvYWRjYXN0IHJlc3VsdHMgb25seSB3aGVuXG4gICAgLy8gdGhlIGRhdGEgdGhhdCB3b3VsZCBiZSBicm9hZGNhc3QgbWlnaHQgaGF2ZSBjaGFuZ2VkLiBJdCB3b3VsZCBiZVxuICAgIC8vIHNpbXBsZXIgdG8gY2hlY2sgZm9yIGNoYW5nZXMgYWZ0ZXIgcmVjb21wdXRpbmcgYSByZXN1bHQgYnV0IGJlZm9yZVxuICAgIC8vIGJyb2FkY2FzdGluZyBpdCwgYnV0IHRoaXMgd3JhcHBpbmcgYXBwcm9hY2ggYWxsb3dzIHVzIHRvIHNraXAgYm90aFxuICAgIC8vIHRoZSByZWNvbXB1dGF0aW9uIGFuZCB0aGUgYnJvYWRjYXN0LCBpbiBtb3N0IGNhc2VzLlxuICAgIGJyb2FkY2FzdFdhdGNoKGMsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBsYXN0RGlmZiB9ID0gYztcbiAgICAgICAgLy8gQm90aCBXYXRjaE9wdGlvbnMgYW5kIERpZmZPcHRpb25zIGV4dGVuZCBSZWFkT3B0aW9ucywgYW5kIERpZmZPcHRpb25zXG4gICAgICAgIC8vIGN1cnJlbnRseSByZXF1aXJlcyBubyBhZGRpdGlvbmFsIHByb3BlcnRpZXMsIHNvIHdlIGNhbiB1c2UgYyAoYVxuICAgICAgICAvLyBXYXRjaE9wdGlvbnMgb2JqZWN0KSBhcyBEaWZmT3B0aW9ucywgd2l0aG91dCBoYXZpbmcgdG8gYWxsb2NhdGUgYSBuZXdcbiAgICAgICAgLy8gb2JqZWN0LCBhbmQgd2l0aG91dCBoYXZpbmcgdG8gZW51bWVyYXRlIHRoZSByZWxldmFudCBwcm9wZXJ0aWVzIChxdWVyeSxcbiAgICAgICAgLy8gdmFyaWFibGVzLCBldGMuKSBleHBsaWNpdGx5LiBUaGVyZSB3aWxsIGJlIHNvbWUgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gICAgICAgIC8vIChsYXN0RGlmZiwgY2FsbGJhY2ssIGV0Yy4pLCBidXQgY2FjaGUuZGlmZiBpZ25vcmVzIHRoZW0uXG4gICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmRpZmYoYyk7XG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoYy5vcHRpbWlzdGljICYmIHR5cGVvZiBvcHRpb25zLm9wdGltaXN0aWMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBkaWZmLmZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMub25XYXRjaFVwZGF0ZWQgJiZcbiAgICAgICAgICAgICAgICBvcHRpb25zLm9uV2F0Y2hVcGRhdGVkLmNhbGwodGhpcywgYywgZGlmZiwgbGFzdERpZmYpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIFJldHVybmluZyBmYWxzZSBmcm9tIHRoZSBvbldhdGNoVXBkYXRlZCBjYWxsYmFjayB3aWxsIHByZXZlbnRcbiAgICAgICAgICAgICAgICAvLyBjYWxsaW5nIGMuY2FsbGJhY2soZGlmZikgZm9yIHRoaXMgd2F0Y2hlci5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsYXN0RGlmZiB8fCAhZXF1YWwobGFzdERpZmYucmVzdWx0LCBkaWZmLnJlc3VsdCkpIHtcbiAgICAgICAgICAgIGMuY2FsbGJhY2soKGMubGFzdERpZmYgPSBkaWZmKSwgbGFzdERpZmYpO1xuICAgICAgICB9XG4gICAgfVxufVxuaWYgKF9fREVWX18pIHtcbiAgICBJbk1lbW9yeUNhY2hlLnByb3RvdHlwZS5nZXRNZW1vcnlJbnRlcm5hbHMgPSBnZXRJbk1lbW9yeUNhY2hlTWVtb3J5SW50ZXJuYWxzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5NZW1vcnlDYWNoZS5qcy5tYXBcbiIsCiAgICAiZXhwb3J0IGZ1bmN0aW9uIGlzQnJhbmRlZChlcnJvciwgbmFtZSkge1xuICAgIHJldHVybiAodHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgIGVycm9yW1N5bWJvbC5mb3IoXCJhcG9sbG8uZXJyb3JcIildID09PSBuYW1lKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBicmFuZChlcnJvcikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlcnJvciwgU3ltYm9sLmZvcihcImFwb2xsby5lcnJvclwiKSwge1xuICAgICAgICB2YWx1ZTogZXJyb3IubmFtZSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgYnJhbmQsIGlzQnJhbmRlZCB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5mdW5jdGlvbiBkZWZhdWx0Rm9ybWF0TWVzc2FnZShlcnJvcnMpIHtcbiAgICByZXR1cm4gZXJyb3JzLm1hcCgoZSkgPT4gZS5tZXNzYWdlIHx8IFwiRXJyb3IgbWVzc2FnZSBub3QgZm91bmQuXCIpLmpvaW4oXCJcXG5cIik7XG59XG4vKipcbiAqIEZhdGFsIHRyYW5zcG9ydC1sZXZlbCBlcnJvcnMgcmV0dXJuZWQgd2hlbiBleGVjdXRpbmcgYSBzdWJzY3JpcHRpb24gdXNpbmcgdGhlXG4gKiBtdWx0aXBhcnQgSFRUUCBzdWJzY3JpcHRpb24gcHJvdG9jb2wuIFNlZSB0aGUgZG9jdW1lbnRhdGlvbiBvbiB0aGVcbiAqIFttdWx0aXBhcnQgSFRUUCBwcm90b2NvbCBmb3IgR3JhcGhRTCBTdWJzY3JpcHRpb25zXShodHRwczovL3d3dy5hcG9sbG9ncmFwaHFsLmNvbS9kb2NzL2dyYXBob3Mvcm91dGluZy9vcGVyYXRpb25zL3N1YnNjcmlwdGlvbnMvbXVsdGlwYXJ0LXByb3RvY29sKSBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGVzZSBlcnJvcnMuXG4gKlxuICogQHJlbWFya3NcbiAqXG4gKiBUaGVzZSBlcnJvcnMgaW5kaWNhdGUgaXNzdWVzIHdpdGggdGhlIHN1YnNjcmlwdGlvbiB0cmFuc3BvcnQgaXRzZWxmLCByYXRoZXJcbiAqIHRoYW4gR3JhcGhRTC1sZXZlbCBlcnJvcnMuIFRoZXkgdHlwaWNhbGx5IG9jY3VyIHdoZW4gdGhlcmUgYXJlIHByb2JsZW1zXG4gKiBjb21tdW5pY2F0aW5nIHdpdGggc3ViZ3JhcGhzIGZyb20gdGhlIEFwb2xsbyBSb3V0ZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQ29tYmluZWRQcm90b2NvbEVycm9ycyB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9lcnJvcnNcIjtcbiAqXG4gKiAvLyBDaGVjayBpZiBhbiBlcnJvciBpcyBhIENvbWJpbmVkUHJvdG9jb2xFcnJvcnMgaW5zdGFuY2VcbiAqIGlmIChDb21iaW5lZFByb3RvY29sRXJyb3JzLmlzKGVycm9yKSkge1xuICogICAvLyBBY2Nlc3MgaW5kaXZpZHVhbCBwcm90b2NvbCBlcnJvcnNcbiAqICAgZXJyb3IuZXJyb3JzLmZvckVhY2goKHByb3RvY29sRXJyb3IpID0+IHtcbiAqICAgICBjb25zb2xlLmxvZyhwcm90b2NvbEVycm9yLm1lc3NhZ2UpO1xuICogICAgIGNvbnNvbGUubG9nKHByb3RvY29sRXJyb3IuZXh0ZW5zaW9ucyk7XG4gKiAgIH0pO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21iaW5lZFByb3RvY29sRXJyb3JzIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIEEgbWV0aG9kIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGlzIGEgYENvbWJpbmVkUHJvdG9jb2xFcnJvcnNgXG4gICAgICogb2JqZWN0LiBUaGlzIG1ldGhvZCBlbmFibGVzIFR5cGVTY3JpcHQgdG8gbmFycm93IHRoZSBlcnJvciB0eXBlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogaWYgKENvbWJpbmVkUHJvdG9jb2xFcnJvcnMuaXMoZXJyb3IpKSB7XG4gICAgICogICAvLyBUeXBlU2NyaXB0IG5vdyBrbm93cyBgZXJyb3JgIGlzIGEgQ29tYmluZWRQcm90b2NvbEVycm9ycyBvYmplY3RcbiAgICAgKiAgIGNvbnNvbGUubG9nKGVycm9yLmVycm9ycyk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBpcyhlcnJvcikge1xuICAgICAgICByZXR1cm4gaXNCcmFuZGVkKGVycm9yLCBcIkNvbWJpbmVkUHJvdG9jb2xFcnJvcnNcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICogQSBmdW5jdGlvbiB0aGF0IGZvcm1hdHMgdGhlIGVycm9yIG1lc3NhZ2UgdXNlZCBmb3IgdGhlIGVycm9yJ3MgYG1lc3NhZ2VgXG4gICAgKiBwcm9wZXJ0eS4gT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gcHJvdmlkZSB5b3VyIG93biBmb3JtYXR0aW5nLlxuICAgICogXG4gICAgKiBAcmVtYXJrc1xuICAgICogXG4gICAgKiBUaGUgYGZvcm1hdE1lc3NhZ2VgIGZ1bmN0aW9uIGlzIGNhbGxlZCBieSB0aGUgYENvbWJpbmVkUHJvdG9jb2xFcnJvcnNgXG4gICAgKiBjb25zdHJ1Y3RvciB0byBwcm92aWRlIGEgZm9ybWF0dGVkIG1lc3NhZ2UgYXMgdGhlIGBtZXNzYWdlYCBwcm9wZXJ0eSBvZiB0aGVcbiAgICAqIGBDb21iaW5lZFByb3RvY29sRXJyb3JzYCBvYmplY3QuIEZvbGxvdyB0aGUgW1wiUHJvdmlkaW5nIGEgY3VzdG9tIG1lc3NhZ2VcbiAgICAqIGZvcm1hdHRlclwiXShodHRwczovL3d3dy5hcG9sbG9ncmFwaHFsLmNvbS9kb2NzL3JlYWN0L2FwaS9lcnJvcnMvQ29tYmluZWRQcm90b2NvbEVycm9ycyNwcm92aWRpbmctYS1jdXN0b20tbWVzc2FnZS1mb3JtYXR0ZXIpIGd1aWRlIHRvIGxlYXJuIGhvdyB0byBtb2RpZnkgdGhlIG1lc3NhZ2UgZm9ybWF0LlxuICAgICogXG4gICAgKiBAcGFyYW0gZXJyb3JzIC0gVGhlIGFycmF5IG9mIEdyYXBoUUwgZXJyb3JzIHJldHVybmVkIGZyb20gdGhlIHNlcnZlciBpbiB0aGVcbiAgICAqIGBlcnJvcnNgIGZpZWxkIG9mIHRoZSByZXNwb25zZS5cbiAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBjb250ZXh0IHRoYXQgY291bGQgYmUgdXNlZnVsIHdoZW4gZm9ybWF0dGluZ1xuICAgICogdGhlIG1lc3NhZ2UuXG4gICAgKi9cbiAgICBzdGF0aWMgZm9ybWF0TWVzc2FnZSA9IGRlZmF1bHRGb3JtYXRNZXNzYWdlO1xuICAgIC8qKlxuICAgICogVGhlIHJhdyBsaXN0IG9mIGVycm9ycyByZXR1cm5lZCBieSB0aGUgdG9wLWxldmVsIGBlcnJvcnNgIGZpZWxkIGluIHRoZVxuICAgICogbXVsdGlwYXJ0IEhUVFAgc3Vic2NyaXB0aW9uIHJlc3BvbnNlLlxuICAgICovXG4gICAgZXJyb3JzO1xuICAgIGNvbnN0cnVjdG9yKHByb3RvY29sRXJyb3JzKSB7XG4gICAgICAgIHN1cGVyKENvbWJpbmVkUHJvdG9jb2xFcnJvcnMuZm9ybWF0TWVzc2FnZShwcm90b2NvbEVycm9ycywge1xuICAgICAgICAgICAgZGVmYXVsdEZvcm1hdE1lc3NhZ2UsXG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJDb21iaW5lZFByb3RvY29sRXJyb3JzXCI7XG4gICAgICAgIHRoaXMuZXJyb3JzID0gcHJvdG9jb2xFcnJvcnM7XG4gICAgICAgIGJyYW5kKHRoaXMpO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgQ29tYmluZWRQcm90b2NvbEVycm9ycy5wcm90b3R5cGUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbWJpbmVkUHJvdG9jb2xFcnJvcnMuanMubWFwXG4iLAogICAgImV4cG9ydCBmdW5jdGlvbiBpc0Vycm9yTGlrZShlcnJvcikge1xuICAgIHJldHVybiAoZXJyb3IgIT09IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHR5cGVvZiBlcnJvci5tZXNzYWdlID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIHR5cGVvZiBlcnJvci5uYW1lID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICh0eXBlb2YgZXJyb3Iuc3RhY2sgPT09IFwic3RyaW5nXCIgfHxcbiAgICAgICAgICAgIHR5cGVvZiBlcnJvci5zdGFjayA9PT0gXCJ1bmRlZmluZWRcIikpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNFcnJvckxpa2UuanMubWFwIiwKICAgICJpbXBvcnQgeyBicmFuZCwgaXNCcmFuZGVkIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbi8qKlxuICogQSB3cmFwcGVyIGVycm9yIHR5cGUgdGhhdCByZXByZXNlbnRzIGEgbm9uLXN0YW5kYXJkIGVycm9yIHRocm93biBmcm9tIGFcbiAqIEEgd3JhcHBlciBlcnJvciB0eXBlIHRoYXQgcmVwcmVzZW50cyBhIG5vbi1lcnJvciB2YWx1ZSB0aHJvd24gZnJvbSB0aGVcbiAqIGxpbmsgY2hhaW4sIHN1Y2ggYXMgYSBzeW1ib2wsIHByaW1pdGl2ZSBvciBwbGFpbiBvYmplY3QuIFJlYWQgdGhlIGBjYXVzZWAgcHJvcGVydHkgdG9cbiAqIGRldGVybWluZSB0aGUgc291cmNlIG9mIHRoZSBlcnJvci5cbiAqXG4gKiBAcmVtYXJrc1xuICpcbiAqIFRoaXMgZXJyb3IgaXMgdXNlZCB0byBzdGFuZGFyZGl6ZSBlcnJvciBoYW5kbGluZyB3aGVuIG5vbi1FcnJvciB2YWx1ZXMgYXJlXG4gKiB0aHJvd24gaW4gdGhlIEFwb2xsbyBDbGllbnQgbGluayBjaGFpbiBvciBvdGhlciBwYXJ0cyBvZiB0aGUgc3lzdGVtLlxuICogSmF2YVNjcmlwdCBhbGxvd3MgdGhyb3dpbmcgYW55IHZhbHVlIChub3QganVzdCBFcnJvciBpbnN0YW5jZXMpLCBhbmQgdGhpc1xuICogd3JhcHBlciBlbnN1cmVzIHRoYXQgYWxsIHRocm93biB2YWx1ZXMgY2FuIGJlIGhhbmRsZWQgY29uc2lzdGVudGx5IGFzXG4gKiBFcnJvci1saWtlIG9iamVjdHMgd2hpbGUgcHJlc2VydmluZyB0aGUgb3JpZ2luYWwgdGhyb3duIHZhbHVlLlxuICpcbiAqID4gWyFOT1RFXVxuICogPiBQbGFpbiBzdHJpbmdzIHRocm93biBhcyBlcnJvcnMgYXJlIHdyYXBwZWQgaW4gcmVndWxhciBbYEVycm9yYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IpIG9iamVjdHMgaW5zdGVhZCBvZiBgVW5jb252ZW50aW9uYWxFcnJvcmAgb2JqZWN0cyBzaW5jZSBzdHJpbmdzIGNhbiBiZSBzYWZlbHkgdXNlZCBhcyB0aGUgZXJyb3IncyBgbWVzc2FnZWAuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgVW5jb252ZW50aW9uYWxFcnJvciB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9lcnJvcnNcIjtcbiAqXG4gKiAvLyBDaGVjayBpZiBhbiBlcnJvciBpcyBhbiBVbmNvbnZlbnRpb25hbEVycm9yIGluc3RhbmNlXG4gKiBpZiAoVW5jb252ZW50aW9uYWxFcnJvci5pcyhlcnJvcikpIHtcbiAqICAgY29uc29sZS5sb2coXCJOb24tc3RhbmRhcmQgZXJyb3IgdGhyb3duOlwiLCBlcnJvci5jYXVzZSk7XG4gKlxuICogICAvLyBDaGVjayB0aGUgdHlwZSBvZiB0aGUgb3JpZ2luYWwgdGhyb3duIHZhbHVlXG4gKiAgIGlmICh0eXBlb2YgZXJyb3IuY2F1c2UgPT09IFwic3ltYm9sXCIpIHtcbiAqICAgICBjb25zb2xlLmxvZyhcIkEgc3ltYm9sIHdhcyB0aHJvd246XCIsIGVycm9yLmNhdXNlLnRvU3RyaW5nKCkpO1xuICogICB9IGVsc2UgaWYgKHR5cGVvZiBlcnJvci5jYXVzZSA9PT0gXCJvYmplY3RcIikge1xuICogICAgIGNvbnNvbGUubG9nKFwiQW4gb2JqZWN0IHdhcyB0aHJvd246XCIsIGVycm9yLmNhdXNlKTtcbiAqICAgfSBlbHNlIHtcbiAqICAgICBjb25zb2xlLmxvZyhcIlVuZXhwZWN0ZWQgdmFsdWUgdGhyb3duOlwiLCBlcnJvci5jYXVzZSk7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgVW5jb252ZW50aW9uYWxFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICAvKipcbiAgICAgKiBBIG1ldGhvZCB0aGF0IGRldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBpcyBhbiBgVW5jb252ZW50aW9uYWxFcnJvcmBcbiAgICAgKiBvYmplY3QuIFRoaXMgbWV0aG9kIGVuYWJsZXMgVHlwZVNjcmlwdCB0byBuYXJyb3cgdGhlIGVycm9yIHR5cGUuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBpZiAoVW5jb252ZW50aW9uYWxFcnJvci5pcyhlcnJvcikpIHtcbiAgICAgKiAgIC8vIFR5cGVTY3JpcHQgbm93IGtub3dzIGBlcnJvcmAgaXMgYSBVbmNvbnZlbnRpb25hbEVycm9yIG9iamVjdFxuICAgICAqICAgY29uc29sZS5sb2coXCJXaGF0IGNhdXNlZCB0aGlzP1wiLCBlcnJvci5jYXVzZSk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBpcyhlcnJvcikge1xuICAgICAgICByZXR1cm4gaXNCcmFuZGVkKGVycm9yLCBcIlVuY29udmVudGlvbmFsRXJyb3JcIik7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihcIkFuIGVycm9yIG9mIHVuZXhwZWN0ZWQgc2hhcGUgb2NjdXJyZWQuXCIsIHsgY2F1c2U6IGVycm9yVHlwZSB9KTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJVbmNvbnZlbnRpb25hbEVycm9yXCI7XG4gICAgICAgIGJyYW5kKHRoaXMpO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgVW5jb252ZW50aW9uYWxFcnJvci5wcm90b3R5cGUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuY29udmVudGlvbmFsRXJyb3IuanMubWFwIiwKICAgICJpbXBvcnQgeyBicmFuZCwgaXNCcmFuZGVkIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmZ1bmN0aW9uIGRlZmF1bHRGb3JtYXRNZXNzYWdlKGVycm9ycykge1xuICAgIHJldHVybiAoZXJyb3JzXG4gICAgICAgIC8vIEhhbmRsZSBub24tc3BlYy1jb21wbGlhbnQgc2VydmVyczogU2VlICMxMTg1XG4gICAgICAgIC5maWx0ZXIoKGUpID0+IGUpXG4gICAgICAgIC5tYXAoKGUpID0+IGUubWVzc2FnZSB8fCBcIkVycm9yIG1lc3NhZ2Ugbm90IGZvdW5kLlwiKVxuICAgICAgICAuam9pbihcIlxcblwiKSk7XG59XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGNvbWJpbmVkIGxpc3Qgb2YgR3JhcGhRTCBlcnJvcnMgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyIGluIGFcbiAqIEdyYXBoUUwgcmVzcG9uc2UuIFRoaXMgZXJyb3IgdHlwZSBpcyB1c2VkIHdoZW4geW91ciBHcmFwaFFMIG9wZXJhdGlvbiByZXR1cm5zXG4gKiBlcnJvcnMgaW4gdGhlIGBlcnJvcnNgIGZpZWxkIG9mIHRoZSByZXNwb25zZS5cbiAqXG4gKiBAcmVtYXJrc1xuICpcbiAqIFdoZW4geW91ciBHcmFwaFFMIG9wZXJhdGlvbiBlbmNvdW50ZXJzIGVycm9ycyBvbiB0aGUgc2VydmVyIHNpZGUgKHN1Y2ggYXNcbiAqIHJlc29sdmVyIGVycm9ycywgdmFsaWRhdGlvbiBlcnJvcnMsIG9yIHN5bnRheCBlcnJvcnMpLCB0aGUgc2VydmVyIHJldHVybnNcbiAqIHRoZXNlIGVycm9ycyBpbiB0aGUgYGVycm9yc2AgYXJyYXkgb2YgdGhlIEdyYXBoUUwgcmVzcG9uc2UuIEFwb2xsbyBDbGllbnRcbiAqIHdyYXBzIHRoZXNlIGVycm9ycyBpbiBhIGBDb21iaW5lZEdyYXBoUUxFcnJvcnNgIG9iamVjdCwgd2hpY2ggcHJvdmlkZXMgYWNjZXNzXG4gKiB0byB0aGUgaW5kaXZpZHVhbCBlcnJvcnMgd2hpbGUgbWFpbnRhaW5pbmcgYWRkaXRpb25hbCBjb250ZXh0IGFib3V0IHRoZVxuICogcmVzcG9uc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQ29tYmluZWRHcmFwaFFMRXJyb3JzIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L2Vycm9yc1wiO1xuICpcbiAqIC8vIENoZWNrIGlmIGFuIGVycm9yIGlzIGEgQ29tYmluZWRHcmFwaFFMRXJyb3JzIG9iamVjdFxuICogaWYgKENvbWJpbmVkR3JhcGhRTEVycm9ycy5pcyhlcnJvcikpIHtcbiAqICAgLy8gQWNjZXNzIGluZGl2aWR1YWwgR3JhcGhRTCBlcnJvcnNcbiAqICAgZXJyb3IuZXJyb3JzLmZvckVhY2goKGdyYXBoUUxFcnJvcikgPT4ge1xuICogICAgIGNvbnNvbGUubG9nKGdyYXBoUUxFcnJvci5tZXNzYWdlKTtcbiAqICAgICBjb25zb2xlLmxvZyhncmFwaFFMRXJyb3IucGF0aCk7XG4gKiAgICAgY29uc29sZS5sb2coZ3JhcGhRTEVycm9yLmxvY2F0aW9ucyk7XG4gKiAgIH0pO1xuICpcbiAqICAgLy8gQWNjZXNzIHRoZSBvcmlnaW5hbCBHcmFwaFFMIHJlc3VsdFxuICogICBjb25zb2xlLmxvZyhlcnJvci5yZXN1bHQpO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21iaW5lZEdyYXBoUUxFcnJvcnMgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgKiBBIG1ldGhvZCB0aGF0IGRldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBpcyBhIGBDb21iaW5lZEdyYXBoUUxFcnJvcnNgXG4gICAgKiBvYmplY3QuIFRoaXMgbWV0aG9kIGVuYWJsZXMgVHlwZVNjcmlwdCB0byBuYXJyb3cgdGhlIGVycm9yIHR5cGUuXG4gICAgKiBcbiAgICAqIEBleGFtcGxlXG4gICAgKiBcbiAgICAqIGBgYHRzXG4gICAgKiBpZiAoQ29tYmluZWRHcmFwaFFMRXJyb3JzLmlzKGVycm9yKSkge1xuICAgICogICAvLyBUeXBlU2NyaXB0IG5vdyBrbm93cyBgZXJyb3JgIGlzIGEgYENvbWJpbmVkR3JhcGhRTEVycm9yc2Agb2JqZWN0XG4gICAgKiAgIGNvbnNvbGUubG9nKGVycm9yLmVycm9ycyk7XG4gICAgKiB9XG4gICAgKiBgYGBcbiAgICAqL1xuICAgIHN0YXRpYyBpcyhlcnJvcikge1xuICAgICAgICByZXR1cm4gaXNCcmFuZGVkKGVycm9yLCBcIkNvbWJpbmVkR3JhcGhRTEVycm9yc1wiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBBIGZ1bmN0aW9uIHRoYXQgZm9ybWF0cyB0aGUgZXJyb3IgbWVzc2FnZSB1c2VkIGZvciB0aGUgZXJyb3IncyBgbWVzc2FnZWBcbiAgICAqIHByb3BlcnR5LiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBwcm92aWRlIHlvdXIgb3duIGZvcm1hdHRpbmcuXG4gICAgKiBcbiAgICAqIEByZW1hcmtzXG4gICAgKiBcbiAgICAqIFRoZSBgZm9ybWF0TWVzc2FnZWAgZnVuY3Rpb24gaXMgY2FsbGVkIGJ5IHRoZSBgQ29tYmluZWRHcmFwaFFMRXJyb3JzYFxuICAgICogY29uc3RydWN0b3IgdG8gcHJvdmlkZSBhIGZvcm1hdHRlZCBtZXNzYWdlIGFzIHRoZSBgbWVzc2FnZWAgcHJvcGVydHkgb2YgdGhlXG4gICAgKiBgQ29tYmluZWRHcmFwaFFMRXJyb3JzYCBvYmplY3QuIEZvbGxvdyB0aGUgW1wiUHJvdmlkaW5nIGEgY3VzdG9tIG1lc3NhZ2VcbiAgICAqIGZvcm1hdHRlclwiXShodHRwczovL3d3dy5hcG9sbG9ncmFwaHFsLmNvbS9kb2NzL3JlYWN0L2FwaS9lcnJvcnMvQ29tYmluZWRHcmFwaFFMRXJyb3JzI3Byb3ZpZGluZy1hLWN1c3RvbS1tZXNzYWdlLWZvcm1hdHRlcikgZ3VpZGUgdG8gbGVhcm4gaG93IHRvIG1vZGlmeSB0aGUgbWVzc2FnZSBmb3JtYXQuXG4gICAgKiBcbiAgICAqIEBwYXJhbSBlcnJvcnMgLSBUaGUgYXJyYXkgb2YgR3JhcGhRTCBlcnJvcnMgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyIGluXG4gICAgKiB0aGUgYGVycm9yc2AgZmllbGQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIGNvbnRleHQgdGhhdCBjb3VsZCBiZSB1c2VmdWwgd2hlbiBmb3JtYXR0aW5nXG4gICAgKiB0aGUgbWVzc2FnZS5cbiAgICAqL1xuICAgIHN0YXRpYyBmb3JtYXRNZXNzYWdlID0gZGVmYXVsdEZvcm1hdE1lc3NhZ2U7XG4gICAgLyoqXG4gICAgKiBUaGUgcmF3IGxpc3Qgb2YgR3JhcGhRTCBlcnJvcnMgcmV0dXJuZWQgYnkgdGhlIGBlcnJvcnNgIGZpZWxkIGluIHRoZSBHcmFwaFFMIHJlc3BvbnNlLlxuICAgICovXG4gICAgZXJyb3JzO1xuICAgIC8qKlxuICAgICogUGFydGlhbCBkYXRhIHJldHVybmVkIGluIHRoZSBgZGF0YWAgZmllbGQgb2YgdGhlIEdyYXBoUUwgcmVzcG9uc2UuXG4gICAgKi9cbiAgICBkYXRhO1xuICAgIC8qKlxuICAgICogRXh0ZW5zaW9ucyByZXR1cm5lZCBieSB0aGUgYGV4dGVuc2lvbnNgIGZpZWxkIGluIHRoZSBHcmFwaFFMIHJlc3BvbnNlLlxuICAgICovXG4gICAgZXh0ZW5zaW9ucztcbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQsIGVycm9ycyA9IHJlc3VsdC5lcnJvcnMgfHwgW10pIHtcbiAgICAgICAgc3VwZXIoQ29tYmluZWRHcmFwaFFMRXJyb3JzLmZvcm1hdE1lc3NhZ2UoZXJyb3JzLCB7XG4gICAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgICBkZWZhdWx0Rm9ybWF0TWVzc2FnZSxcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICAgICAgdGhpcy5kYXRhID0gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IHJlc3VsdC5leHRlbnNpb25zO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkNvbWJpbmVkR3JhcGhRTEVycm9yc1wiO1xuICAgICAgICBicmFuZCh0aGlzKTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIENvbWJpbmVkR3JhcGhRTEVycm9ycy5wcm90b3R5cGUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbWJpbmVkR3JhcGhRTEVycm9ycy5qcy5tYXBcbiIsCiAgICAiY29uc3QgcmVnaXN0cnkgPSBuZXcgV2Vha1NldCgpO1xuLyoqXG4qIEBpbnRlcm5hbCBQbGVhc2UgZG8gbm90IHVzZSBkaXJlY3RseS5cbiogXG4qIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJMaW5rRXJyb3IoZXJyb3IpIHtcbiAgICByZWdpc3RyeS5hZGQoZXJyb3IpO1xufVxuLyoqXG4gKiBBIGZhY2FkZSBlcnJvciB0eXBlIHRoYXQga2VlcHMgYSByZWdpc3RyeSBvZiBlcnJvcnMgZW1pdHRlZCBmcm9tIHRoZSBsaW5rXG4gKiBjaGFpbi4gYExpbmtFcnJvcmAgaXMgbm90IGFuIGVycm9yIGNsYXNzIGl0c2VsZiBidXQgcmF0aGVyIGEgdXRpbGl0eSB0b1xuICogZGV0ZWN0IHdoZXRoZXIgYW4gZXJyb3Igb3JpZ2luYXRlZCBmcm9tIHRoZSBsaW5rIGNoYWluLlxuICpcbiAqIEByZW1hcmtzXG4gKlxuICogVXNlIGBMaW5rRXJyb3JgIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gZXJyb3JzIGZyb20gdGhlIGxpbmsgY2hhaW4gYW5kIGN1c3RvbVxuICogZXJyb3JzLiBUaGlzIGlzIGhlbHBmdWwgZm9yIHJldHJ5aW5nIGFuIG9wZXJhdGlvbiBhdCB0aGUgY2FsbCBzaXRlIG9ubHkgd2hlblxuICogdGhlIGVycm9yIG9yaWdpbmF0ZXMgZnJvbSB0aGUgbGluayBjaGFpbi5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBjcmVhdGVzIGEgY3VzdG9tIHdyYXBwZWQgcXVlcnkgZnVuY3Rpb24gdGhhdCBkZXRlY3RzXG4gKiB3aGV0aGVyIHRoZSBxdWVyeSBpbmNsdWRlcyBhbiBvcGVyYXRpb24gbmFtZSBhbmQgdGhyb3dzIGlmIG5vdC5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgTGlua0Vycm9yIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L2Vycm9yc1wiO1xuICpcbiAqIGFzeW5jIGZ1bmN0aW9uIHJ1blF1ZXJ5PFREYXRhPihxdWVyeTogVHlwZWREb2N1bWVudE5vZGU8VERhdGE+KSB7XG4gKiAgIGlmICghaGFzT3BlcmF0aW9uTmFtZShxdWVyeSkpIHtcbiAqICAgICB0aHJvdyBuZXcgRXJyb3IoXCJRdWVyaWVzIHNob3VsZCBoYXZlIG9wZXJhdGlvbiBuYW1lcy5cIik7XG4gKiAgIH1cbiAqXG4gKiAgIHJldHVybiBjbGllbnQud2F0Y2hRdWVyeSh7IHF1ZXJ5IH0pO1xuICogfVxuICpcbiAqIHRyeSB7XG4gKiAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1blF1ZXJ5KHF1ZXJ5KTtcbiAqIH0gY2F0Y2ggKGVycm9yKSB7XG4gKiAgIC8vIE9ubHkgbG9nIHRoZSBlcnJvciBpZiB0aGUgZXJyb3Igd2Fzbid0IG91ciBvd24gY3VzdG9tIHRocm93biBlcnJvclxuICogICBpZiAoTGlua0Vycm9yLmlzKGVycm9yKSkge1xuICogICAgIGNvbnNvbGUubG9nKFwiR290IG5ldHdvcmsgZXJyb3I6XCIsIGVycm9yLm1lc3NhZ2UpO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IExpbmtFcnJvciA9IHtcbiAgICAvKipcbiAgICAgKiBBIG1ldGhvZCB0aGF0IGRldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBvcmlnaW5hdGVkIGZyb20gdGhlIGxpbmsgY2hhaW4uXG4gICAgICogYGlzYCBkb2VzIG5vdCBwcm92aWRlIGFueSB0eXBlIG5hcnJvd2luZy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIGlmIChMaW5rRXJyb3IuaXMoZXJyb3IpKSB7XG4gICAgICogICAvLyBUaGUgZXJyb3Igb3JpZ2luYXRlZCBmcm9tIHRoZSBsaW5rIGNoYWluXG4gICAgICogICBjb25zb2xlLmxvZyhcIkdvdCBuZXR3b3JrIGVycm9yOlwiLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgaXM6IChlcnJvcikgPT4gcmVnaXN0cnkuaGFzKGVycm9yKSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MaW5rRXJyb3IuanMubWFwXG4iLAogICAgImltcG9ydCB7IGJyYW5kLCBpc0JyYW5kZWQgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGVycm9yIHdoZW4gYSBub24tMjAwIEhUVFAgc3RhdHVzIGNvZGUgaXMgcmV0dXJuZWQgZnJvbSB0aGVcbiAqIHNlcnZlciBhY2NvcmRpbmcgdG8gdGhlIFtHcmFwaFFMIE92ZXIgSFRUUCBzcGVjaWZpY2F0aW9uXShodHRwczovL2dyYXBocWwuZ2l0aHViLmlvL2dyYXBocWwtb3Zlci1odHRwL2RyYWZ0LykuIFRoaXMgZXJyb3JcbiAqIGNvbnRhaW5zIHRoZSBmdWxsIHNlcnZlciByZXNwb25zZSwgaW5jbHVkaW5nIHN0YXR1cyBjb2RlIGFuZCBib2R5IHRleHQuXG4gKlxuICogQHJlbWFya3NcbiAqXG4gKiBUaGlzIGVycm9yIG9jY3VycyB3aGVuIHlvdXIgR3JhcGhRTCBzZXJ2ZXIgcmVzcG9uZHMgd2l0aCBhbiBIVFRQIHN0YXR1cyBjb2RlXG4gKiBvdGhlciB0aGFuIDIwMCAoc3VjaCBhcyA0eHggb3IgNXh4IHN0YXR1cyBjb2Rlcykgd2l0aCBhbnkgbWVkaWEgdHlwZSBvdGhlclxuICogdGhhbiBbYGFwcGxpY2F0aW9uL2dyYXBocWwtcmVzcG9uc2UranNvbmBdKGh0dHBzOi8vZ3JhcGhxbC5naXRodWIuaW8vZ3JhcGhxbC1vdmVyLWh0dHAvZHJhZnQvI3NlYy1hcHBsaWNhdGlvbi1ncmFwaHFsLXJlc3BvbnNlLWpzb24pLlxuICpcbiAqIFNlcnZlcnMgdGhhdCByZXR1cm4gbm9uLTIwMCBzdGF0dXMgY29kZXMgd2l0aCBvdGhlciBtZWRpYSB0eXBlcyBhcmUgbm90XG4gKiBndWFyYW50ZWVkIHRvIGNvbnRhaW4gYSB3ZWxsLWZvcm1lZCBHcmFwaFFMIHJlc3BvbnNlIGFuZCBtYXkgaW5kaWNhdGUgaXNzdWVzXG4gKiBhdCB0aGUgSFRUUCBsZXZlbCwgc3VjaCBhcyBhdXRoZW50aWNhdGlvbiBmYWlsdXJlcywgc2VydmVyIHVuYXZhaWxhYmlsaXR5LFxuICogb3Igb3RoZXIgSFRUUC1sZXZlbCBwcm9ibGVtcy5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBTZXJ2ZXJFcnJvciB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9lcnJvcnNcIjtcbiAqXG4gKiAvLyBDaGVjayBpZiBhbiBlcnJvciBpcyBhIFNlcnZlckVycm9yIGluc3RhbmNlXG4gKiBpZiAoU2VydmVyRXJyb3IuaXMoZXJyb3IpKSB7XG4gKiAgIGNvbnNvbGUubG9nKGBTZXJ2ZXIgcmV0dXJuZWQgc3RhdHVzOiAke2Vycm9yLnN0YXR1c0NvZGV9YCk7XG4gKiAgIGNvbnNvbGUubG9nKGBSZXNwb25zZSBib2R5OiAke2Vycm9yLmJvZHlUZXh0fWApO1xuICpcbiAqICAgLy8gSGFuZGxlIHNwZWNpZmljIHN0YXR1cyBjb2Rlc1xuICogICBpZiAoZXJyb3Iuc3RhdHVzQ29kZSA9PT0gNDAxKSB7XG4gKiAgICAgLy8gSGFuZGxlIHVuYXV0aG9yaXplZCBhY2Nlc3NcbiAqICAgfVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJ2ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICAvKipcbiAgICAgKiBBIG1ldGhvZCB0aGF0IGRldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBpcyBhIGBTZXJ2ZXJFcnJvcmAgb2JqZWN0LiBUaGlzXG4gICAgICogbWV0aG9kIGVuYWJsZXMgVHlwZVNjcmlwdCB0byBuYXJyb3cgdGhlIGVycm9yIHR5cGUuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBpZiAoU2VydmVyRXJyb3IuaXMoZXJyb3IpKSB7XG4gICAgICogICAvLyBUeXBlU2NyaXB0IG5vdyBrbm93cyBgZXJyb3JgIGlzIGEgU2VydmVyRXJyb3Igb2JqZWN0XG4gICAgICogICBjb25zb2xlLmxvZyhlcnJvci5lcnJvcnMpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzdGF0aWMgaXMoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGlzQnJhbmRlZChlcnJvciwgXCJTZXJ2ZXJFcnJvclwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBUaGUgcmF3IFtgUmVzcG9uc2VgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUmVzcG9uc2UpIG9iamVjdCBwcm92aWRlZCBieSB0aGUgW0ZldGNoIEFQSV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ZldGNoX0FQSSkuXG4gICAgKi9cbiAgICByZXNwb25zZTtcbiAgICAvKipcbiAgICAqIFRoZSBzdGF0dXMgY29kZSByZXR1cm5lZCBieSB0aGUgc2VydmVyIGluIHRoZSByZXNwb25zZS4gVGhpcyBpcyBwcm92aWRlZCBhc1xuICAgICogYSBzaG9ydGN1dCBmb3IgYHJlc3BvbnNlLnN0YXR1c2AuXG4gICAgKi9cbiAgICBzdGF0dXNDb2RlO1xuICAgIC8qKlxuICAgICogVGhlIHJhdyByZXNwb25zZSBib2R5IHRleHQuXG4gICAgKi9cbiAgICBib2R5VGV4dDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlNlcnZlckVycm9yXCI7XG4gICAgICAgIHRoaXMucmVzcG9uc2UgPSBvcHRpb25zLnJlc3BvbnNlO1xuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBvcHRpb25zLnJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgdGhpcy5ib2R5VGV4dCA9IG9wdGlvbnMuYm9keVRleHQ7XG4gICAgICAgIGJyYW5kKHRoaXMpO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgU2VydmVyRXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2ZXJFcnJvci5qcy5tYXBcbiIsCiAgICAiaW1wb3J0IHsgYnJhbmQsIGlzQnJhbmRlZCB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBmYWlsdXJlIHRvIHBhcnNlIHRoZSByZXNwb25zZSBhcyBKU09OIGZyb20gdGhlIHNlcnZlci4gVGhpc1xuICogZXJyb3IgaGVscHMgZGVidWcgaXNzdWVzIHdoZXJlIHRoZSBzZXJ2ZXIgcmV0dXJucyBtYWxmb3JtZWQgSlNPTiBvciBub24tSlNPTlxuICogY29udGVudC5cbiAqXG4gKiBAcmVtYXJrc1xuICpcbiAqIFRoaXMgZXJyb3Igb2NjdXJzIHdoZW4gQXBvbGxvIENsaWVudCByZWNlaXZlcyBhIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlciBidXRcbiAqIGNhbm5vdCBwYXJzZSBpdCBhcyB2YWxpZCBKU09OLiBUaGlzIHR5cGljYWxseSBoYXBwZW5zIHdoZW4gdGhlIHNlcnZlciByZXR1cm5zXG4gKiBIVE1MIGVycm9yIHBhZ2VzLCBwbGFpbiB0ZXh0IHJlc3BvbnNlcywgb3IgbWFsZm9ybWVkIEpTT04gaW5zdGVhZCBvZiB0aGVcbiAqIGV4cGVjdGVkIEdyYXBoUUwgSlNPTiByZXNwb25zZSBmb3JtYXQuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgU2VydmVyUGFyc2VFcnJvciB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9lcnJvcnNcIjtcbiAqXG4gKiAvLyBDaGVjayBpZiBhbiBlcnJvciBpcyBhIFNlcnZlclBhcnNlRXJyb3IgaW5zdGFuY2VcbiAqIGlmIChTZXJ2ZXJQYXJzZUVycm9yLmlzKGVycm9yKSkge1xuICogICBjb25zb2xlLmxvZyhgRmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlIGZyb20gJHtlcnJvci5yZXNwb25zZS51cmx9YCk7XG4gKiAgIGNvbnNvbGUubG9nKGBSYXcgcmVzcG9uc2U6ICR7ZXJyb3IuYm9keVRleHR9YCk7XG4gKiAgIGNvbnNvbGUubG9nKGBTdGF0dXMgY29kZTogJHtlcnJvci5zdGF0dXNDb2RlfWApO1xuICpcbiAqICAgLy8gQWNjZXNzIHRoZSBvcmlnaW5hbCBwYXJzZSBlcnJvclxuICogICBjb25zb2xlLmxvZyhgUGFyc2UgZXJyb3I6ICR7ZXJyb3IuY2F1c2V9YCk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFNlcnZlclBhcnNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgLyoqXG4gICAgICogQSBtZXRob2QgdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgaXMgYSBgU2VydmVyUGFyc2VFcnJvcmBcbiAgICAgKiBvYmplY3QuIFRoaXMgbWV0aG9kIGVuYWJsZXMgVHlwZVNjcmlwdCB0byBuYXJyb3cgdGhlIGVycm9yIHR5cGUuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHNcbiAgICAgKiBpZiAoU2VydmVyUGFyc2VFcnJvci5pcyhlcnJvcikpIHtcbiAgICAgKiAgIC8vIFR5cGVTY3JpcHQgbm93IGtub3dzIGBlcnJvcmAgaXMgYSBTZXJ2ZXJQYXJzZUVycm9yIG9iamVjdFxuICAgICAqICAgY29uc29sZS5sb2coZXJyb3Iuc3RhdHVzQ29kZSk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBpcyhlcnJvcikge1xuICAgICAgICByZXR1cm4gaXNCcmFuZGVkKGVycm9yLCBcIlNlcnZlclBhcnNlRXJyb3JcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICogVGhlIHJhdyBbYFJlc3BvbnNlYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1Jlc3BvbnNlKSBvYmplY3QgcHJvdmlkZWQgYnkgdGhlIFtGZXRjaCBBUEldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9GZXRjaF9BUEkpLlxuICAgICovXG4gICAgcmVzcG9uc2U7XG4gICAgLyoqXG4gICAgKiBUaGUgc3RhdHVzIGNvZGUgcmV0dXJuZWQgYnkgdGhlIHNlcnZlciBpbiB0aGUgcmVzcG9uc2UuIFRoaXMgaXMgcHJvdmlkZWRcbiAgICAqIGFzIGEgc2hvcnRjdXQgZm9yIGByZXNwb25zZS5zdGF0dXNgLlxuICAgICovXG4gICAgc3RhdHVzQ29kZTtcbiAgICAvKipcbiAgICAqIFRoZSByYXcgcmVzcG9uc2UgYm9keSB0ZXh0LlxuICAgICovXG4gICAgYm9keVRleHQ7XG4gICAgY29uc3RydWN0b3Iob3JpZ2luYWxQYXJzZUVycm9yLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9yaWdpbmFsUGFyc2VFcnJvciBpbnN0YW5jZW9mIEVycm9yID9cbiAgICAgICAgICAgIG9yaWdpbmFsUGFyc2VFcnJvci5tZXNzYWdlXG4gICAgICAgICAgICA6IFwiQ291bGQgbm90IHBhcnNlIHNlcnZlciByZXNwb25zZVwiLCB7IGNhdXNlOiBvcmlnaW5hbFBhcnNlRXJyb3IgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiU2VydmVyUGFyc2VFcnJvclwiO1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gb3B0aW9ucy5yZXNwb25zZTtcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gb3B0aW9ucy5yZXNwb25zZS5zdGF0dXM7XG4gICAgICAgIHRoaXMuYm9keVRleHQgPSBvcHRpb25zLmJvZHlUZXh0O1xuICAgICAgICBicmFuZCh0aGlzKTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIFNlcnZlclBhcnNlRXJyb3IucHJvdG90eXBlKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZXJ2ZXJQYXJzZUVycm9yLmpzLm1hcFxuIiwKICAgICJpbXBvcnQgeyBDb21iaW5lZFByb3RvY29sRXJyb3JzIH0gZnJvbSBcIi4vQ29tYmluZWRQcm90b2NvbEVycm9ycy5qc1wiO1xuaW1wb3J0IHsgaXNFcnJvckxpa2UgfSBmcm9tIFwiLi9pc0Vycm9yTGlrZS5qc1wiO1xuaW1wb3J0IHsgVW5jb252ZW50aW9uYWxFcnJvciB9IGZyb20gXCIuL1VuY29udmVudGlvbmFsRXJyb3IuanNcIjtcbi8vIFRoaXMgU3ltYm9sIGFsbG93cyB1cyB0byBwYXNzIHRyYW5zcG9ydC1zcGVjaWZpYyBlcnJvcnMgZnJvbSB0aGUgbGluayBjaGFpblxuLy8gaW50byBRdWVyeU1hbmFnZXIvY2xpZW50IGludGVybmFscyB3aXRob3V0IHJpc2tpbmcgYSBuYW1pbmcgY29sbGlzaW9uIHdpdGhpblxuLy8gZXh0ZW5zaW9ucyAod2hpY2ggaW1wbGVtZW50ZXJzIGNhbiB1c2UgYXMgdGhleSBzZWUgZml0KS5cbmV4cG9ydCBjb25zdCBQUk9UT0NPTF9FUlJPUlNfU1lNQk9MID0gU3ltYm9sKCk7XG5leHBvcnQgZnVuY3Rpb24gZ3JhcGhRTFJlc3VsdEhhc1Byb3RvY29sRXJyb3JzKHJlc3VsdCkge1xuICAgIGlmIChcImV4dGVuc2lvbnNcIiBpbiByZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIENvbWJpbmVkUHJvdG9jb2xFcnJvcnMuaXMocmVzdWx0LmV4dGVuc2lvbnNbUFJPVE9DT0xfRVJST1JTX1NZTUJPTF0pO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gdG9FcnJvckxpa2UoZXJyb3IpIHtcbiAgICBpZiAoaXNFcnJvckxpa2UoZXJyb3IpKSB7XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gbmV3IEVycm9yKGVycm9yLCB7IGNhdXNlOiBlcnJvciB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBVbmNvbnZlbnRpb25hbEVycm9yKGVycm9yKTtcbn1cbmV4cG9ydCB7IENvbWJpbmVkR3JhcGhRTEVycm9ycyB9IGZyb20gXCIuL0NvbWJpbmVkR3JhcGhRTEVycm9ycy5qc1wiO1xuZXhwb3J0IHsgQ29tYmluZWRQcm90b2NvbEVycm9ycyB9IGZyb20gXCIuL0NvbWJpbmVkUHJvdG9jb2xFcnJvcnMuanNcIjtcbmV4cG9ydCB7IGlzRXJyb3JMaWtlIH0gZnJvbSBcIi4vaXNFcnJvckxpa2UuanNcIjtcbmV4cG9ydCB7IExpbmtFcnJvciwgcmVnaXN0ZXJMaW5rRXJyb3IgfSBmcm9tIFwiLi9MaW5rRXJyb3IuanNcIjtcbmV4cG9ydCB7IExvY2FsU3RhdGVFcnJvciB9IGZyb20gXCIuL0xvY2FsU3RhdGVFcnJvci5qc1wiO1xuZXhwb3J0IHsgU2VydmVyRXJyb3IgfSBmcm9tIFwiLi9TZXJ2ZXJFcnJvci5qc1wiO1xuZXhwb3J0IHsgU2VydmVyUGFyc2VFcnJvciB9IGZyb20gXCIuL1NlcnZlclBhcnNlRXJyb3IuanNcIjtcbmV4cG9ydCB7IFVuY29udmVudGlvbmFsRXJyb3IgfSBmcm9tIFwiLi9VbmNvbnZlbnRpb25hbEVycm9yLmpzXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLAogICAgIi8qKlxuICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIGEgcXVlcnnigJlzIGV4ZWN1dGlvbiBpbiBvdXIgc3lzdGVtLlxuICovXG5leHBvcnQgdmFyIE5ldHdvcmtTdGF0dXM7XG4oZnVuY3Rpb24gKE5ldHdvcmtTdGF0dXMpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaGFzIG5ldmVyIGJlZW4gcnVuIGJlZm9yZSBhbmQgdGhlIHF1ZXJ5IGlzIG5vdyBjdXJyZW50bHkgcnVubmluZy4gQSBxdWVyeSB3aWxsIHN0aWxsXG4gICAgICogaGF2ZSB0aGlzIG5ldHdvcmsgc3RhdHVzIGV2ZW4gaWYgYSBwYXJ0aWFsIGRhdGEgcmVzdWx0IHdhcyByZXR1cm5lZCBmcm9tIHRoZSBjYWNoZSwgYnV0IGFcbiAgICAgKiBxdWVyeSB3YXMgZGlzcGF0Y2hlZCBhbnl3YXkuXG4gICAgICovXG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wibG9hZGluZ1wiXSA9IDFdID0gXCJsb2FkaW5nXCI7XG4gICAgLyoqXG4gICAgICogSWYgYHNldFZhcmlhYmxlc2Agd2FzIGNhbGxlZCBhbmQgYSBxdWVyeSB3YXMgZmlyZWQgYmVjYXVzZSBvZiB0aGF0IHRoZW4gdGhlIG5ldHdvcmsgc3RhdHVzXG4gICAgICogd2lsbCBiZSBgc2V0VmFyaWFibGVzYCB1bnRpbCB0aGUgcmVzdWx0IG9mIHRoYXQgcXVlcnkgY29tZXMgYmFjay5cbiAgICAgKi9cbiAgICBOZXR3b3JrU3RhdHVzW05ldHdvcmtTdGF0dXNbXCJzZXRWYXJpYWJsZXNcIl0gPSAyXSA9IFwic2V0VmFyaWFibGVzXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgYGZldGNoTW9yZWAgd2FzIGNhbGxlZCBvbiB0aGlzIHF1ZXJ5IGFuZCB0aGF0IHRoZSBxdWVyeSBjcmVhdGVkIGlzIGN1cnJlbnRseSBpblxuICAgICAqIGZsaWdodC5cbiAgICAgKi9cbiAgICBOZXR3b3JrU3RhdHVzW05ldHdvcmtTdGF0dXNbXCJmZXRjaE1vcmVcIl0gPSAzXSA9IFwiZmV0Y2hNb3JlXCI7XG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byB0aGUgYHNldFZhcmlhYmxlc2AgbmV0d29yayBzdGF0dXMuIEl0IG1lYW5zIHRoYXQgYHJlZmV0Y2hgIHdhcyBjYWxsZWQgb24gYSBxdWVyeVxuICAgICAqIGFuZCB0aGUgcmVmZXRjaCByZXF1ZXN0IGlzIGN1cnJlbnRseSBpbiBmbGlnaHQuXG4gICAgICovXG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wicmVmZXRjaFwiXSA9IDRdID0gXCJyZWZldGNoXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgYSBwb2xsaW5nIHF1ZXJ5IGlzIGN1cnJlbnRseSBpbiBmbGlnaHQuIFNvIGZvciBleGFtcGxlIGlmIHlvdSBhcmUgcG9sbGluZyBhXG4gICAgICogcXVlcnkgZXZlcnkgMTAgc2Vjb25kcyB0aGVuIHRoZSBuZXR3b3JrIHN0YXR1cyB3aWxsIHN3aXRjaCB0byBgcG9sbGAgZXZlcnkgMTAgc2Vjb25kcyB3aGVuZXZlclxuICAgICAqIGEgcG9sbCByZXF1ZXN0IGhhcyBiZWVuIHNlbnQgYnV0IG5vdCByZXNvbHZlZC5cbiAgICAgKi9cbiAgICBOZXR3b3JrU3RhdHVzW05ldHdvcmtTdGF0dXNbXCJwb2xsXCJdID0gNl0gPSBcInBvbGxcIjtcbiAgICAvKipcbiAgICAgKiBObyByZXF1ZXN0IGlzIGluIGZsaWdodCBmb3IgdGhpcyBxdWVyeSwgYW5kIG5vIGVycm9ycyBoYXBwZW5lZC4gRXZlcnl0aGluZyBpcyBPSy5cbiAgICAgKi9cbiAgICBOZXR3b3JrU3RhdHVzW05ldHdvcmtTdGF0dXNbXCJyZWFkeVwiXSA9IDddID0gXCJyZWFkeVwiO1xuICAgIC8qKlxuICAgICAqIE5vIHJlcXVlc3QgaXMgaW4gZmxpZ2h0IGZvciB0aGlzIHF1ZXJ5LCBidXQgb25lIG9yIG1vcmUgZXJyb3JzIHdlcmUgZGV0ZWN0ZWQuXG4gICAgICovXG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wiZXJyb3JcIl0gPSA4XSA9IFwiZXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCBhIGBAZGVmZXJgIHF1ZXJ5IGhhcyByZWNlaXZlZCBhdCBsZWFzdCB0aGUgZmlyc3QgY2h1bmsgb2ZcbiAgICAgKiB0aGUgcmVzdWx0IGJ1dCB0aGUgZnVsbCByZXN1bHQgaGFzIG5vdCB5ZXQgYmVlbiBmdWxseSBzdHJlYW1lZCB0byB0aGVcbiAgICAgKiBjbGllbnQuXG4gICAgICovXG4gICAgTmV0d29ya1N0YXR1c1tOZXR3b3JrU3RhdHVzW1wic3RyZWFtaW5nXCJdID0gOV0gPSBcInN0cmVhbWluZ1wiO1xufSkoTmV0d29ya1N0YXR1cyB8fCAoTmV0d29ya1N0YXR1cyA9IHt9KSk7XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBjdXJyZW50bHkgYSBuZXR3b3JrIHJlcXVlc3QgaW4gZmxpZ2h0IGFjY29yZGluZyB0byBhIGdpdmVuIG5ldHdvcmtcbiAqIHN0YXR1cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodChuZXR3b3JrU3RhdHVzKSB7XG4gICAgcmV0dXJuICFpc05ldHdvcmtSZXF1ZXN0U2V0dGxlZChuZXR3b3JrU3RhdHVzKTtcbn1cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXR3b3JrIHJlcXVlc3QgaXMgaW4gcmVhZHkgb3IgZXJyb3Igc3RhdGUgYWNjb3JkaW5nIHRvIGEgZ2l2ZW4gbmV0d29ya1xuICogc3RhdHVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOZXR3b3JrUmVxdWVzdFNldHRsZWQobmV0d29ya1N0YXR1cykge1xuICAgIHJldHVybiBuZXR3b3JrU3RhdHVzID09PSA3IHx8IG5ldHdvcmtTdGF0dXMgPT09IDg7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXR3b3JrU3RhdHVzLmpzLm1hcCIsCiAgICAiaW1wb3J0IHsgZXF1YWwgfSBmcm9tIFwiQHdyeS9lcXVhbGl0eVwiO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlLCBzaGFyZSwgU3ViamVjdCwgdGFwIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IF9fREVWX18gfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2Vudmlyb25tZW50XCI7XG5pbXBvcnQgeyBjb21wYWN0LCBlcXVhbEJ5UXVlcnksIGZpbHRlck1hcCwgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbiwgZ2V0T3BlcmF0aW9uTmFtZSwgZ2V0UXVlcnlEZWZpbml0aW9uLCBwcmV2ZW50VW5oYW5kbGVkUmVqZWN0aW9uLCB0b1F1ZXJ5UmVzdWx0LCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWxcIjtcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW52YXJpYW50XCI7XG5pbXBvcnQgeyBpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQsIE5ldHdvcmtTdGF0dXMgfSBmcm9tIFwiLi9uZXR3b3JrU3RhdHVzLmpzXCI7XG5jb25zdCB7IGFzc2lnbiwgaGFzT3duUHJvcGVydHkgfSA9IE9iamVjdDtcbmNvbnN0IHVuaW5pdGlhbGl6ZWQgPSB7XG4gICAgbG9hZGluZzogdHJ1ZSxcbiAgICBuZXR3b3JrU3RhdHVzOiBOZXR3b3JrU3RhdHVzLmxvYWRpbmcsXG4gICAgZGF0YTogdW5kZWZpbmVkLFxuICAgIGRhdGFTdGF0ZTogXCJlbXB0eVwiLFxuICAgIHBhcnRpYWw6IHRydWUsXG59O1xuY29uc3QgZW1wdHkgPSB7XG4gICAgbG9hZGluZzogZmFsc2UsXG4gICAgbmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5yZWFkeSxcbiAgICBkYXRhOiB1bmRlZmluZWQsXG4gICAgZGF0YVN0YXRlOiBcImVtcHR5XCIsXG4gICAgcGFydGlhbDogdHJ1ZSxcbn07XG5leHBvcnQgY2xhc3MgT2JzZXJ2YWJsZVF1ZXJ5IHtcbiAgICBvcHRpb25zO1xuICAgIHF1ZXJ5TmFtZTtcbiAgICAvKipcbiAgICAqIEBpbnRlcm5hbCB3aWxsIGJlIHJlYWQgYW5kIHdyaXR0ZW4gZnJvbSBgUXVlcnlJbmZvYFxuICAgICogXG4gICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4gICAgKi9cbiAgICBfbGFzdFdyaXRlO1xuICAgIC8vIFRoZSBgcXVlcnlgIGNvbXB1dGVkIHByb3BlcnR5IHdpbGwgYWx3YXlzIHJlZmxlY3QgdGhlIGRvY3VtZW50IHRyYW5zZm9ybWVkXG4gICAgLy8gYnkgdGhlIGxhc3QgcnVuIHF1ZXJ5LiBgdGhpcy5vcHRpb25zLnF1ZXJ5YCB3aWxsIGFsd2F5cyByZWZsZWN0IHRoZSByYXdcbiAgICAvLyB1bnRyYW5zZm9ybWVkIHF1ZXJ5IHRvIGVuc3VyZSBkb2N1bWVudCB0cmFuc2Zvcm1zIHdpdGggcnVudGltZSBjb25kaXRpb25hbHNcbiAgICAvLyBhcmUgcnVuIG9uIHRoZSBvcmlnaW5hbCBkb2N1bWVudC5cbiAgICBnZXQgcXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RRdWVyeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHZhcmlhYmxlcyB0aGF0IHdlcmUgcHJvdmlkZWQgZm9yIHRoZSBxdWVyeS5cbiAgICAgKi9cbiAgICBnZXQgdmFyaWFibGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnZhcmlhYmxlcztcbiAgICB9XG4gICAgdW5zdWJzY3JpYmVGcm9tQ2FjaGU7XG4gICAgaW5wdXQ7XG4gICAgc3ViamVjdDtcbiAgICBpc1Rvcm5Eb3duO1xuICAgIHF1ZXJ5TWFuYWdlcjtcbiAgICBzdWJzY3JpcHRpb25zID0gbmV3IFNldCgpO1xuICAgIC8qKlxuICAgICAqIElmIGFuIGBPYnNlcnZhYmxlUXVlcnlgIGlzIGNyZWF0ZWQgd2l0aCBhIGBuZXR3b3JrLW9ubHlgIGZldGNoIHBvbGljeSxcbiAgICAgKiBpdCBzaG91bGQgYWN0dWFsbHkgc3RhcnQgcmVjZWl2aW5nIGNhY2hlIHVwZGF0ZXMsIGJ1dCBub3QgYmVmb3JlIGl0IGhhc1xuICAgICAqIHJlY2VpdmVkIHRoZSBmaXJzdCByZXN1bHQgZnJvbSB0aGUgbmV0d29yay5cbiAgICAgKi9cbiAgICB3YWl0Rm9yTmV0d29ya1Jlc3VsdDtcbiAgICBsYXN0UXVlcnk7XG4gICAgbGlua1N1YnNjcmlwdGlvbjtcbiAgICBwb2xsaW5nSW5mbztcbiAgICBnZXQgbmV0d29ya1N0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5nZXRWYWx1ZSgpLnJlc3VsdC5uZXR3b3JrU3RhdHVzO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih7IHF1ZXJ5TWFuYWdlciwgb3B0aW9ucywgdHJhbnNmb3JtZWRRdWVyeSA9IHF1ZXJ5TWFuYWdlci50cmFuc2Zvcm0ob3B0aW9ucy5xdWVyeSksIH0pIHtcbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIgPSBxdWVyeU1hbmFnZXI7XG4gICAgICAgIC8vIGFjdGl2ZSBzdGF0ZVxuICAgICAgICB0aGlzLndhaXRGb3JOZXR3b3JrUmVzdWx0ID0gb3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gXCJuZXR3b3JrLW9ubHlcIjtcbiAgICAgICAgdGhpcy5pc1Rvcm5Eb3duID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlVG9Nb3JlID0gdGhpcy5zdWJzY3JpYmVUb01vcmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5tYXNrUmVzdWx0ID0gdGhpcy5tYXNrUmVzdWx0LmJpbmQodGhpcyk7XG4gICAgICAgIGNvbnN0IHsgd2F0Y2hRdWVyeTogeyBmZXRjaFBvbGljeTogZGVmYXVsdEZldGNoUG9saWN5ID0gXCJjYWNoZS1maXJzdFwiIH0gPSB7fSwgfSA9IHF1ZXJ5TWFuYWdlci5kZWZhdWx0T3B0aW9ucztcbiAgICAgICAgY29uc3QgeyBmZXRjaFBvbGljeSA9IGRlZmF1bHRGZXRjaFBvbGljeSwgXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCBzdG9yZSBcInN0YW5kYnlcIiBhcyB0aGUgaW5pdGlhbEZldGNoUG9saWN5LlxuICAgICAgICBpbml0aWFsRmV0Y2hQb2xpY3kgPSBmZXRjaFBvbGljeSA9PT0gXCJzdGFuZGJ5XCIgPyBkZWZhdWx0RmV0Y2hQb2xpY3kgOiAoZmV0Y2hQb2xpY3kpLCB9ID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5sYXN0UXVlcnkgPSB0cmFuc2Zvcm1lZFF1ZXJ5O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgLy8gUmVtZW1iZXIgdGhlIGluaXRpYWwgb3B0aW9ucy5mZXRjaFBvbGljeSBzbyB3ZSBjYW4gcmV2ZXJ0IGJhY2sgdG8gdGhpc1xuICAgICAgICAgICAgLy8gcG9saWN5IHdoZW4gdmFyaWFibGVzIGNoYW5nZS4gVGhpcyBpbmZvcm1hdGlvbiBjYW4gYWxzbyBiZSBzcGVjaWZpZWRcbiAgICAgICAgICAgIC8vIChvciBvdmVycmlkZGVuKSBieSBwcm92aWRpbmcgb3B0aW9ucy5pbml0aWFsRmV0Y2hQb2xpY3kgZXhwbGljaXRseS5cbiAgICAgICAgICAgIGluaXRpYWxGZXRjaFBvbGljeSxcbiAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3kgYWx3YXlzIGhhcyBhIHN0cmluZyB2YWx1ZSwgaW5cbiAgICAgICAgICAgIC8vIGNhc2Ugb3B0aW9ucy5mZXRjaFBvbGljeSB3YXMgbm90IHByb3ZpZGVkLlxuICAgICAgICAgICAgZmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMuZ2V0VmFyaWFibGVzV2l0aERlZmF1bHRzKG9wdGlvbnMudmFyaWFibGVzKSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplT2JzZXJ2YWJsZXNRdWV1ZSgpO1xuICAgICAgICB0aGlzW1wiQEBvYnNlcnZhYmxlXCJdID0gKCkgPT4gdGhpcztcbiAgICAgICAgaWYgKFN5bWJvbC5vYnNlcnZhYmxlKSB7XG4gICAgICAgICAgICB0aGlzW1N5bWJvbC5vYnNlcnZhYmxlXSA9ICgpID0+IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3BEZWYgPSBnZXRPcGVyYXRpb25EZWZpbml0aW9uKHRoaXMucXVlcnkpO1xuICAgICAgICB0aGlzLnF1ZXJ5TmFtZSA9IG9wRGVmICYmIG9wRGVmLm5hbWUgJiYgb3BEZWYubmFtZS52YWx1ZTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZU9ic2VydmFibGVzUXVldWUoKSB7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3Qoe1xuICAgICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnksXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLFxuICAgICAgICAgICAgcmVzdWx0OiB1bmluaXRpYWxpemVkLFxuICAgICAgICAgICAgbWV0YToge30sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBvYnNlcnZhYmxlID0gdGhpcy5zdWJqZWN0LnBpcGUodGFwKHtcbiAgICAgICAgICAgIHN1YnNjcmliZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdWJqZWN0Lm9ic2VydmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVvYnNlcnZlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFNlZSBpZiB3ZSBjYW4gcmV3b3JrIHVwZGF0ZVBvbGxpbmcgdG8gYmV0dGVyIGhhbmRsZSB0aGlzLlxuICAgICAgICAgICAgICAgICAgICAvLyByZW9ic2VydmUgY2FsbHMgdXBkYXRlUG9sbGluZyBidXQgdGhpcyBgc3Vic2NyaWJlYCBjYWxsYmFjayBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgYmVmb3JlIHRoZSBzdWJqZWN0IGlzIHN1YnNjcmliZWQgdG8gc28gYHVwZGF0ZVBvbGxpbmdgXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbid0IGFjY3VyYXRlbHkgZGV0ZWN0IGlmIHRoZXJlIGlzIGFuIGFjdGl2ZSBzdWJzY3JpcHRpb24uXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGxpbmcgaXQgYWdhaW4gaGVyZSBlbnN1cmVzIHRoYXQgaXQgY2FuIGRldGVjdCBpZiBpdCBjYW4gcG9sbFxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudXBkYXRlUG9sbGluZygpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3ViamVjdC5vYnNlcnZlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlYXJEb3duUXVlcnkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSwgZmlsdGVyTWFwKCh7IHF1ZXJ5LCB2YXJpYWJsZXMsIHJlc3VsdDogY3VycmVudCwgbWV0YSB9LCBjb250ZXh0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHNob3VsZEVtaXQgfSA9IG1ldGE7XG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gdW5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIC8vIHJlc2V0IGludGVybmFsIHN0YXRlIGFmdGVyIGBPYnNlcnZhYmxlUXVlcnkucmVzZXQoKWBcbiAgICAgICAgICAgICAgICBjb250ZXh0LnByZXZpb3VzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnRleHQucHJldmlvdXNWYXJpYWJsZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZldGNoUG9saWN5ID09PSBcInN0YW5kYnlcIiB8fFxuICAgICAgICAgICAgICAgIHNob3VsZEVtaXQgPT09IDIgLyogRW1pdEJlaGF2aW9yLm5ldmVyICovKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChzaG91bGRFbWl0ID09PSAxIC8qIEVtaXRCZWhhdmlvci5mb3JjZSAqLylcbiAgICAgICAgICAgICAgICByZXR1cm4gZW1pdCgpO1xuICAgICAgICAgICAgY29uc3QgeyBwcmV2aW91cywgcHJldmlvdXNWYXJpYWJsZXMgfSA9IGNvbnRleHQ7XG4gICAgICAgICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkb2N1bWVudEluZm8gPSB0aGlzLnF1ZXJ5TWFuYWdlci5nZXREb2N1bWVudEluZm8ocXVlcnkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFNYXNraW5nID0gdGhpcy5xdWVyeU1hbmFnZXIuZGF0YU1hc2tpbmc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFza2VkUXVlcnkgPSBkYXRhTWFza2luZyA/IGRvY3VtZW50SW5mby5ub25SZWFjdGl2ZVF1ZXJ5IDogcXVlcnk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0SXNFcXVhbCA9IGRhdGFNYXNraW5nIHx8IGRvY3VtZW50SW5mby5oYXNOb25yZWFjdGl2ZURpcmVjdGl2ZSA/XG4gICAgICAgICAgICAgICAgICAgIGVxdWFsQnlRdWVyeShtYXNrZWRRdWVyeSwgcHJldmlvdXMsIGN1cnJlbnQsIHZhcmlhYmxlcylcbiAgICAgICAgICAgICAgICAgICAgOiBlcXVhbChwcmV2aW91cywgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdElzRXF1YWwgJiYgZXF1YWwocHJldmlvdXNWYXJpYWJsZXMsIHZhcmlhYmxlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaG91bGRFbWl0ID09PSAzIC8qIEVtaXRCZWhhdmlvci5uZXR3b3JrU3RhdHVzQ2hhbmdlICovICYmXG4gICAgICAgICAgICAgICAgKCF0aGlzLm9wdGlvbnMubm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlIHx8XG4gICAgICAgICAgICAgICAgICAgIGVxdWFsKHByZXZpb3VzLCBjdXJyZW50KSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZW1pdCgpO1xuICAgICAgICAgICAgZnVuY3Rpb24gZW1pdCgpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnByZXZpb3VzID0gY3VycmVudDtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnByZXZpb3VzVmFyaWFibGVzID0gdmFyaWFibGVzO1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAoKSA9PiAoe30pKSk7XG4gICAgICAgIHRoaXMucGlwZSA9IG9ic2VydmFibGUucGlwZS5iaW5kKG9ic2VydmFibGUpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZSA9IG9ic2VydmFibGUuc3Vic2NyaWJlLmJpbmQob2JzZXJ2YWJsZSk7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAvLyB3ZSB3YW50IHRvIGZlZWQgbWFueSBzdHJlYW1zIGludG8gYHRoaXMuc3ViamVjdGAsIGJ1dCBub25lIG9mIHRoZW0gc2hvdWxkXG4gICAgICAgIC8vIGJlIGFibGUgdG8gY2xvc2UgYHRoaXMuaW5wdXRgXG4gICAgICAgIHRoaXMuaW5wdXQuY29tcGxldGUgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMuaW5wdXQucGlwZSh0aGlzLm9wZXJhdG9yKS5zdWJzY3JpYmUodGhpcy5zdWJqZWN0KTtcbiAgICB9XG4gICAgLy8gV2UgY2FuJ3QgdXNlIE9ic2VydmFibGVbJ3N1YnNjcmliZSddIGhlcmUgYXMgdGhlIHR5cGUgYXMgaXQgY29uZmxpY3RzIHdpdGhcbiAgICAvLyB0aGUgYWJpbGl0eSB0byBpbmZlciBUIGZyb20gU3Vic2NyaWJhYmxlPFQ+LiBUaGlzIGxpbWl0cyB0aGUgc3VyZmFjZSBhcmVhXG4gICAgLy8gdG8gdGhlIG5vbi1kZXByZWNhdGVkIHNpZ25hdHVyZSB3aGljaCB3b3JrcyBwcm9wZXJseSB3aXRoIHR5cGUgaW5mZXJlbmNlLlxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdG8gdGhlIGBPYnNlcnZhYmxlUXVlcnlgLlxuICAgICAqIEBwYXJhbSBvYnNlcnZlck9yTmV4dCAtIEVpdGhlciBhbiBSeEpTIGBPYnNlcnZlcmAgd2l0aCBzb21lIG9yIGFsbCBjYWxsYmFjayBtZXRob2RzLFxuICAgICAqIG9yIHRoZSBgbmV4dGAgaGFuZGxlciB0aGF0IGlzIGNhbGxlZCBmb3IgZWFjaCB2YWx1ZSBlbWl0dGVkIGZyb20gdGhlIHN1YnNjcmliZWQgT2JzZXJ2YWJsZS5cbiAgICAgKiBAcmV0dXJucyBBIHN1YnNjcmlwdGlvbiByZWZlcmVuY2UgdG8gdGhlIHJlZ2lzdGVyZWQgaGFuZGxlcnMuXG4gICAgICovXG4gICAgc3Vic2NyaWJlO1xuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gc3RpdGNoIHRvZ2V0aGVyIGZ1bmN0aW9uYWwgb3BlcmF0b3JzIGludG8gYSBjaGFpbi5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIGltcG9ydCB7IGZpbHRlciwgbWFwIH0gZnJvbSAncnhqcyc7XG4gICAgICpcbiAgICAgKiBvYnNlcnZhYmxlUXVlcnlcbiAgICAgKiAgIC5waXBlKFxuICAgICAqICAgICBmaWx0ZXIoLi4uKSxcbiAgICAgKiAgICAgbWFwKC4uLiksXG4gICAgICogICApXG4gICAgICogICAuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIE9ic2VydmFibGUgcmVzdWx0IG9mIGFsbCB0aGUgb3BlcmF0b3JzIGhhdmluZyBiZWVuIGNhbGxlZFxuICAgICAqIGluIHRoZSBvcmRlciB0aGV5IHdlcmUgcGFzc2VkIGluLlxuICAgICAqL1xuICAgIHBpcGU7XG4gICAgW1N5bWJvbC5vYnNlcnZhYmxlXTtcbiAgICBbXCJAQG9ic2VydmFibGVcIl07XG4gICAgLyoqXG4gICAgKiBAaW50ZXJuYWxcbiAgICAqIFxuICAgICogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuICAgICovXG4gICAgZ2V0Q2FjaGVEaWZmKHsgb3B0aW1pc3RpYyA9IHRydWUgfSA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci5jYWNoZS5kaWZmKHtcbiAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLnF1ZXJ5LFxuICAgICAgICAgICAgdmFyaWFibGVzOiB0aGlzLnZhcmlhYmxlcyxcbiAgICAgICAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0cnVlLFxuICAgICAgICAgICAgb3B0aW1pc3RpYyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEluaXRpYWxSZXN1bHQoaW5pdGlhbEZldGNoUG9saWN5KSB7XG4gICAgICAgIGNvbnN0IGZldGNoUG9saWN5ID0gdGhpcy5xdWVyeU1hbmFnZXIucHJpb3JpdGl6ZUNhY2hlVmFsdWVzID9cbiAgICAgICAgICAgIFwiY2FjaGUtZmlyc3RcIlxuICAgICAgICAgICAgOiBpbml0aWFsRmV0Y2hQb2xpY3kgfHwgdGhpcy5vcHRpb25zLmZldGNoUG9saWN5O1xuICAgICAgICBjb25zdCBjYWNoZVJlc3VsdCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmdldENhY2hlRGlmZigpO1xuICAgICAgICAgICAgLy8gVE9ETzogcXVlcnlJbmZvLmdldERpZmYgc2hvdWxkIGhhbmRsZSB0aGlzIHNpbmNlIGNhY2hlLmRpZmYgcmV0dXJucyBhXG4gICAgICAgICAgICAvLyBudWxsIHdoZW4gcmV0dXJuUGFydGlhbERhdGEgaXMgZmFsc2VcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLm9wdGlvbnMucmV0dXJuUGFydGlhbERhdGEgfHwgZGlmZi5jb21wbGV0ZSA/XG4gICAgICAgICAgICAgICAgZGlmZi5yZXN1bHQgPz8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXNrUmVzdWx0KHtcbiAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIGRhdGFTdGF0ZTogZGlmZi5jb21wbGV0ZSA/IFwiY29tcGxldGVcIlxuICAgICAgICAgICAgICAgICAgICA6IGRhdGEgPT09IHVuZGVmaW5lZCA/IFwiZW1wdHlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcInBhcnRpYWxcIixcbiAgICAgICAgICAgICAgICBsb2FkaW5nOiAhZGlmZi5jb21wbGV0ZSxcbiAgICAgICAgICAgICAgICBuZXR3b3JrU3RhdHVzOiBkaWZmLmNvbXBsZXRlID8gTmV0d29ya1N0YXR1cy5yZWFkeSA6IE5ldHdvcmtTdGF0dXMubG9hZGluZyxcbiAgICAgICAgICAgICAgICBwYXJ0aWFsOiAhZGlmZi5jb21wbGV0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBzd2l0Y2ggKGZldGNoUG9saWN5KSB7XG4gICAgICAgICAgICBjYXNlIFwiY2FjaGUtb25seVwiOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FjaGVSZXN1bHQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcmtTdGF0dXM6IE5ldHdvcmtTdGF0dXMucmVhZHksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJjYWNoZS1maXJzdFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZVJlc3VsdCgpO1xuICAgICAgICAgICAgY2FzZSBcImNhY2hlLWFuZC1uZXR3b3JrXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FjaGVSZXN1bHQoKSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5sb2FkaW5nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIFwic3RhbmRieVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuaW5pdGlhbGl6ZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzdWJzY3JpYmVDYWNoZSgpIHtcbiAgICAgICAgY29uc3QgeyB2YXJpYWJsZXMsIGZldGNoUG9saWN5IH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5xdWVyeTtcbiAgICAgICAgY29uc3Qgc2hvdWxkVW5zdWJzY3JpYmUgPSBmZXRjaFBvbGljeSA9PT0gXCJzdGFuZGJ5XCIgfHxcbiAgICAgICAgICAgIGZldGNoUG9saWN5ID09PSBcIm5vLWNhY2hlXCIgfHxcbiAgICAgICAgICAgIHRoaXMud2FpdEZvck5ldHdvcmtSZXN1bHQ7XG4gICAgICAgIGNvbnN0IHNob3VsZFJlc3Vic2NyaWJlID0gIWlzRXF1YWxRdWVyeSh7IHF1ZXJ5LCB2YXJpYWJsZXMgfSwgdGhpcy51bnN1YnNjcmliZUZyb21DYWNoZSkgJiZcbiAgICAgICAgICAgICF0aGlzLndhaXRGb3JOZXR3b3JrUmVzdWx0O1xuICAgICAgICBpZiAoc2hvdWxkVW5zdWJzY3JpYmUgfHwgc2hvdWxkUmVzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVGcm9tQ2FjaGU/LigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRVbnN1YnNjcmliZSB8fCAhc2hvdWxkUmVzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3YXRjaCA9IHtcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgb3B0aW1pc3RpYzogdHJ1ZSxcbiAgICAgICAgICAgIHdhdGNoZXI6IHRoaXMsXG4gICAgICAgICAgICBjYWxsYmFjazogKGRpZmYpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gdGhpcy5xdWVyeU1hbmFnZXIuZ2V0RG9jdW1lbnRJbmZvKHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5mby5oYXNDbGllbnRFeHBvcnRzIHx8IGluZm8uaGFzRm9yY2VkUmVzb2x2ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgbm90IHNldCB0byBzb21ldGhpbmcgZGlmZmVyZW50IHRoYW4gYGRpZmZgLCB3ZSB3aWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBiZSBub3RpZmllZCBhYm91dCBmdXR1cmUgY2FjaGUgY2hhbmdlcyB3aXRoIGFuIGVxdWFsIGBkaWZmYC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhhdCB3b3VsZCBiZSB0aGUgY2FzZSBpZiB3ZSBhcmUgd29ya2luZyB3aXRoIGNsaWVudC1vbmx5IGZpZWxkc1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IGFyZSBmb3JjZWQgb3Igd2l0aCBgZXhwb3J0c2AgZmllbGRzIHRoYXQgbWlnaHQgY2hhbmdlLCBjYXVzaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvY2FsIHJlc292bGVycyB0byByZXR1cm4gYSBuZXcgcmVzdWx0LlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGJhc2VkIG9uIGFuIGltcGxlbWVudGF0aW9uIGRldGFpbCBvZiBgSW5NZW1vcnlDYWNoZWAsIHdoaWNoXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG5vdCBvcHRpbWFsIC0gYnV0IHRoZSBvbmx5IGFsdGVybmF0aXZlIHRvIHRoaXMgd291bGQgYmUgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWJzY3JpYmUgdG8gdGhlIGNhY2hlIGFzeW5jaG9ub3VseSwgd2hpY2ggd291bGQgYmVhciB0aGUgcmlzayBvZlxuICAgICAgICAgICAgICAgICAgICAvLyBtaXNzaW5nIGZ1cnRoZXIgc3luY2hyb25vdXMgdXBkYXRlcy5cbiAgICAgICAgICAgICAgICAgICAgd2F0Y2gubGFzdERpZmYgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh3YXRjaC5sYXN0T3duRGlmZiA9PT0gZGlmZikge1xuICAgICAgICAgICAgICAgICAgICAvLyBza2lwIGNhY2hlIHVwZGF0ZXMgdGhhdCB3ZXJlIGNhdXNlZCBieSBvdXIgb3duIHdyaXRlc1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcmVzdWx0OiBwcmV2aW91c1Jlc3VsdCB9ID0gdGhpcy5zdWJqZWN0LmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFkaWZmLmNvbXBsZXRlICYmXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSB0cnlpbmcgdG8gZGVsaXZlciBhbiBpbmNvbXBsZXRlIGNhY2hlIHJlc3VsdCwgd2UgYXZvaWRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwb3J0aW5nIGl0IGlmIHRoZSBxdWVyeSBoYXMgZXJyb3JlZCwgb3RoZXJ3aXNlIHdlIGxldCB0aGUgYnJvYWRjYXN0IHRyeVxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgcmVwYWlyIHRoZSBwYXJ0aWFsIHJlc3VsdCBieSByZWZldGNoaW5nIHRoZSBxdWVyeS4gVGhpcyBjaGVjayBhdm9pZHNcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBzaXR1YXRpb24gd2hlcmUgYSBxdWVyeSB0aGF0IGVycm9ycyBhbmQgYW5vdGhlciBzdWNjZWVkcyB3aXRoXG4gICAgICAgICAgICAgICAgICAgIC8vIG92ZXJsYXBwaW5nIGRhdGEgZG9lcyBub3QgcmVwb3J0IHRoZSBwYXJ0aWFsIGRhdGEgcmVzdWx0IHRvIHRoZSBlcnJvcmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2Fwb2xsb2dyYXBocWwvYXBvbGxvLWNsaWVudC9pc3N1ZXMvMTE0MDAgZm9yIG1vcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5mb3JtYXRpb24gb24gdGhpcyBpc3N1ZS5cbiAgICAgICAgICAgICAgICAgICAgKHByZXZpb3VzUmVzdWx0LmVycm9yIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHRvIHNjaGVkdWxlIGEgbm90aWZ5IGRpcmVjdGx5IGFmdGVyIHRoZSBgT2JzZXJ2YWJsZVF1ZXJ5YFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFzIGJlZW4gYHJlc2V0YCAod2hpY2ggd2lsbCBzZXQgdGhlIGBwcmV2aW91c1Jlc3VsdGAgdG8gYHVuaW5pdGlhbGl6ZWRgIG9yIGBlbXB0eWApXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhcyBpbiB0aG9zZSBjYXNlcywgYHJlc2V0Q2FjaGVgIHdpbGwgbWFudWFsbHkgY2FsbCBgcmVmZXRjaGAgd2l0aCBtb3JlIGludGVudGlvbmFsIHRpbWluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzdWx0ID09PSB1bmluaXRpYWxpemVkIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3VsdCA9PT0gZW1wdHkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlcXVhbChwcmV2aW91c1Jlc3VsdC5kYXRhLCBkaWZmLnJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU5vdGlmeSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNhbmNlbFdhdGNoID0gdGhpcy5xdWVyeU1hbmFnZXIuY2FjaGUud2F0Y2god2F0Y2gpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlRnJvbUNhY2hlID0gT2JqZWN0LmFzc2lnbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlRnJvbUNhY2hlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY2FuY2VsV2F0Y2goKTtcbiAgICAgICAgfSwgeyBxdWVyeSwgdmFyaWFibGVzIH0pO1xuICAgIH1cbiAgICBzdGFibGVMYXN0UmVzdWx0O1xuICAgIGdldEN1cnJlbnRSZXN1bHQoKSB7XG4gICAgICAgIGNvbnN0IHsgcmVzdWx0OiBjdXJyZW50IH0gPSB0aGlzLnN1YmplY3QuZ2V0VmFsdWUoKTtcbiAgICAgICAgbGV0IHZhbHVlID0gKFxuICAgICAgICAvLyBpZiB0aGUgYGN1cnJlbnRgIHJlc3VsdCBpcyBpbiBhbiBlcnJvciBzdGF0ZSwgd2Ugd2lsbCBhbHdheXMgcmV0dXJuIHRoYXRcbiAgICAgICAgLy8gZXJyb3Igc3RhdGUsIGV2ZW4gaWYgd2UgaGF2ZSBubyBvYnNlcnZlcnNcbiAgICAgICAgKGN1cnJlbnQubmV0d29ya1N0YXR1cyA9PT0gTmV0d29ya1N0YXR1cy5lcnJvciB8fFxuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBvYnNlcnZlcnMsIHdlIGFyZSB3YXRjaGluZyB0aGUgY2FjaGUgYW5kXG4gICAgICAgICAgICAvLyB0aGlzLnN1YmplY3QuZ2V0VmFsdWUoKSB3aWxsIGFsd2F5cyBiZSB1cCB0byBkYXRlXG4gICAgICAgICAgICB0aGlzLmhhc09ic2VydmVycygpIHx8IC8vIGlmIHdlIGFyZSB1c2luZyBhIGBuby1jYWNoZWAgZmV0Y2ggcG9saWN5IGluIHdoaWNoIGNhc2UgdGhpc1xuICAgICAgICAvLyBgT2JzZXJ2YWJsZVF1ZXJ5YCBjYW5ub3QgaGF2ZSBiZWVuIHVwZGF0ZWQgZnJvbSB0aGUgb3V0c2lkZSAtIGluXG4gICAgICAgIC8vIHRoYXQgY2FzZSwgd2UgcHJlZmVyIHRvIGtlZXAgdGhlIGN1cnJlbnQgdmFsdWVcbiAgICAgICAgdGhpcy5vcHRpb25zLmZldGNoUG9saWN5ID09PSBcIm5vLWNhY2hlXCIpKSA/XG4gICAgICAgICAgICBjdXJyZW50XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UsIHRoZSBgY3VycmVudGAgdmFsdWUgbWlnaHQgYmUgb3V0ZGF0ZWQgZHVlIHRvIG1pc3NlZFxuICAgICAgICAgICAgLy8gZXh0ZXJuYWwgdXBkYXRlcyAtIGNhbGN1bGF0ZSBpdCBhZ2FpblxuICAgICAgICAgICAgOiB0aGlzLmdldEluaXRpYWxSZXN1bHQoKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuZ2V0SW5pdGlhbFJlc3VsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXF1YWwodGhpcy5zdGFibGVMYXN0UmVzdWx0LCB2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhYmxlTGFzdFJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YWJsZUxhc3RSZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgdmFyaWFibGVzIG9mIHRoaXMgb2JzZXJ2YWJsZSBxdWVyeSwgYW5kIGZldGNoIHRoZSBuZXcgcmVzdWx0cy5cbiAgICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgcHJlZmVycmVkIG92ZXIgYHNldFZhcmlhYmxlc2AgaW4gbW9zdCB1c2UgY2FzZXMuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgYFJlc3VsdFByb21pc2VgIHdpdGggYW4gYWRkaXRpb25hbCBgLnJldGFpbigpYCBtZXRob2QuIENhbGxpbmdcbiAgICAgKiBgLnJldGFpbigpYCBrZWVwcyB0aGUgbmV0d29yayBvcGVyYXRpb24gcnVubmluZyBldmVuIGlmIHRoZSBgT2JzZXJ2YWJsZVF1ZXJ5YFxuICAgICAqIG5vIGxvbmdlciByZXF1aXJlcyB0aGUgcmVzdWx0LlxuICAgICAqXG4gICAgICogTm90ZTogYHJlZmV0Y2goKWAgZ3VhcmFudGVlcyB0aGF0IGEgdmFsdWUgd2lsbCBiZSBlbWl0dGVkIGZyb20gdGhlXG4gICAgICogb2JzZXJ2YWJsZSwgZXZlbiBpZiB0aGUgcmVzdWx0IGlzIGRlZXAgZXF1YWwgdG8gdGhlIHByZXZpb3VzIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhcmlhYmxlcyAtIFRoZSBuZXcgc2V0IG9mIHZhcmlhYmxlcy4gSWYgdGhlcmUgYXJlIG1pc3NpbmcgdmFyaWFibGVzLFxuICAgICAqIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgdGhvc2UgdmFyaWFibGVzIHdpbGwgYmUgdXNlZC5cbiAgICAgKi9cbiAgICByZWZldGNoKHZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCB7IGZldGNoUG9saWN5IH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHJlb2JzZXJ2ZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAvLyBBbHdheXMgZGlzYWJsZSBwb2xsaW5nIGZvciByZWZldGNoZXMuXG4gICAgICAgICAgICBwb2xsSW50ZXJ2YWw6IDAsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFVubGVzcyB0aGUgcHJvdmlkZWQgZmV0Y2hQb2xpY3kgYWx3YXlzIGNvbnN1bHRzIHRoZSBuZXR3b3JrXG4gICAgICAgIC8vIChuby1jYWNoZSwgbmV0d29yay1vbmx5LCBvciBjYWNoZS1hbmQtbmV0d29yayksIG92ZXJyaWRlIGl0IHdpdGhcbiAgICAgICAgLy8gbmV0d29yay1vbmx5IHRvIGZvcmNlIHRoZSByZWZldGNoIGZvciB0aGlzIGZldGNoUXVlcnkgY2FsbC5cbiAgICAgICAgaWYgKGZldGNoUG9saWN5ID09PSBcIm5vLWNhY2hlXCIpIHtcbiAgICAgICAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMuZmV0Y2hQb2xpY3kgPSBcIm5vLWNhY2hlXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZW9ic2VydmVPcHRpb25zLmZldGNoUG9saWN5ID0gXCJuZXR3b3JrLW9ubHlcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX19ERVZfXyAmJiB2YXJpYWJsZXMgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YXJpYWJsZXMsIFwidmFyaWFibGVzXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeURlZiA9IGdldFF1ZXJ5RGVmaW5pdGlvbih0aGlzLnF1ZXJ5KTtcbiAgICAgICAgICAgIGNvbnN0IHZhcnMgPSBxdWVyeURlZi52YXJpYWJsZURlZmluaXRpb25zO1xuICAgICAgICAgICAgaWYgKCF2YXJzIHx8ICF2YXJzLnNvbWUoKHYpID0+IHYudmFyaWFibGUubmFtZS52YWx1ZSA9PT0gXCJ2YXJpYWJsZXNcIikpIHtcbiAgICAgICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKDc3LCB2YXJpYWJsZXMsIHF1ZXJ5RGVmLm5hbWU/LnZhbHVlIHx8IHF1ZXJ5RGVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodmFyaWFibGVzICYmICFlcXVhbCh0aGlzLnZhcmlhYmxlcywgdmFyaWFibGVzKSkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyBvcHRpb25zIHdpdGggbmV3IHZhcmlhYmxlc1xuICAgICAgICAgICAgcmVvYnNlcnZlT3B0aW9ucy52YXJpYWJsZXMgPSB0aGlzLm9wdGlvbnMudmFyaWFibGVzID1cbiAgICAgICAgICAgICAgICB0aGlzLmdldFZhcmlhYmxlc1dpdGhEZWZhdWx0cyh7IC4uLnRoaXMudmFyaWFibGVzLCAuLi52YXJpYWJsZXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGFzdFdyaXRlID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVvYnNlcnZlKHJlb2JzZXJ2ZU9wdGlvbnMsIHtcbiAgICAgICAgICAgIG5ld05ldHdvcmtTdGF0dXM6IE5ldHdvcmtTdGF0dXMucmVmZXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZldGNoTW9yZSh7IHF1ZXJ5LCB2YXJpYWJsZXMsIGNvbnRleHQsIGVycm9yUG9saWN5LCB1cGRhdGVRdWVyeSwgfSkge1xuICAgICAgICBpbnZhcmlhbnQoXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3kgIT09IFwiY2FjaGUtb25seVwiLFxuICAgICAgICAgICAgNzgsXG4gICAgICAgICAgICBnZXRPcGVyYXRpb25OYW1lKHRoaXMucXVlcnksIFwiKGFub255bW91cylcIilcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgY29tYmluZWRPcHRpb25zID0ge1xuICAgICAgICAgICAgLi4uY29tcGFjdCh0aGlzLm9wdGlvbnMsIHsgZXJyb3JQb2xpY3k6IFwibm9uZVwiIH0sIHtcbiAgICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgIGVycm9yUG9saWN5LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB2YXJpYWJsZXM6IChxdWVyeSA/IHZhcmlhYmxlcyA6ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgLi4udmFyaWFibGVzLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgLy8gVGhlIGZldGNoTW9yZSByZXF1ZXN0IGdvZXMgaW1tZWRpYXRlbHkgdG8gdGhlIG5ldHdvcmsgYW5kIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBhdXRvbWF0aWNhbGx5IHdyaXRlIGl0cyByZXN1bHQgdG8gdGhlIGNhY2hlIChoZW5jZSBuby1jYWNoZVxuICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiBuZXR3b3JrLW9ubHkpLCBiZWNhdXNlIHdlIGFsbG93IHRoZSBjYWxsZXIgb2ZcbiAgICAgICAgICAgIC8vIGZldGNoTW9yZSB0byBwcm92aWRlIGFuIHVwZGF0ZVF1ZXJ5IGNhbGxiYWNrIHRoYXQgZGV0ZXJtaW5lcyBob3dcbiAgICAgICAgICAgIC8vIHRoZSBkYXRhIGdldHMgd3JpdHRlbiB0byB0aGUgY2FjaGUuXG4gICAgICAgICAgICBmZXRjaFBvbGljeTogXCJuby1jYWNoZVwiLFxuICAgICAgICAgICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlOiB0aGlzLm9wdGlvbnMubm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlLFxuICAgICAgICB9O1xuICAgICAgICBjb21iaW5lZE9wdGlvbnMucXVlcnkgPSB0aGlzLnRyYW5zZm9ybURvY3VtZW50KGNvbWJpbmVkT3B0aW9ucy5xdWVyeSk7XG4gICAgICAgIC8vIElmIGEgdGVtcG9yYXJ5IHF1ZXJ5IGlzIHBhc3NlZCB0byBgZmV0Y2hNb3JlYCwgd2UgZG9uJ3Qgd2FudCB0byBzdG9yZVxuICAgICAgICAvLyBpdCBhcyB0aGUgbGFzdCBxdWVyeSByZXN1bHQgc2luY2UgaXQgbWF5IGJlIGFuIG9wdGltaXplZCBxdWVyeSBmb3JcbiAgICAgICAgLy8gcGFnaW5hdGlvbi4gV2Ugd2lsbCBob3dldmVyIHJ1biB0aGUgdHJhbnNmb3JtcyBvbiB0aGUgb3JpZ2luYWwgZG9jdW1lbnRcbiAgICAgICAgLy8gYXMgd2VsbCBhcyB0aGUgZG9jdW1lbnQgcGFzc2VkIGluIGBmZXRjaE1vcmVPcHRpb25zYCB0byBlbnN1cmUgdGhlIGNhY2hlXG4gICAgICAgIC8vIHVzZXMgdGhlIG1vc3QgdXAtdG8tZGF0ZSBkb2N1bWVudCB3aGljaCBtYXkgcmVseSBvbiBydW50aW1lIGNvbmRpdGlvbmFscy5cbiAgICAgICAgdGhpcy5sYXN0UXVlcnkgPVxuICAgICAgICAgICAgcXVlcnkgP1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtRG9jdW1lbnQodGhpcy5vcHRpb25zLnF1ZXJ5KVxuICAgICAgICAgICAgICAgIDogY29tYmluZWRPcHRpb25zLnF1ZXJ5O1xuICAgICAgICBsZXQgd2FzVXBkYXRlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBpc0NhY2hlZCA9IHRoaXMub3B0aW9ucy5mZXRjaFBvbGljeSAhPT0gXCJuby1jYWNoZVwiO1xuICAgICAgICBpZiAoIWlzQ2FjaGVkKSB7XG4gICAgICAgICAgICBpbnZhcmlhbnQodXBkYXRlUXVlcnksIDc5KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGZpbmFsaXplLCBwdXNoTm90aWZpY2F0aW9uIH0gPSB0aGlzLnB1c2hPcGVyYXRpb24oTmV0d29ya1N0YXR1cy5mZXRjaE1vcmUpO1xuICAgICAgICBwdXNoTm90aWZpY2F0aW9uKHtcbiAgICAgICAgICAgIHNvdXJjZTogXCJuZXdOZXR3b3JrU3RhdHVzXCIsXG4gICAgICAgICAgICBraW5kOiBcIk5cIixcbiAgICAgICAgICAgIHZhbHVlOiB7fSxcbiAgICAgICAgfSwgeyBzaG91bGRFbWl0OiAzIC8qIEVtaXRCZWhhdmlvci5uZXR3b3JrU3RhdHVzQ2hhbmdlICovIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXJcbiAgICAgICAgICAgIC5mZXRjaFF1ZXJ5KGNvbWJpbmVkT3B0aW9ucywgTmV0d29ya1N0YXR1cy5mZXRjaE1vcmUpXG4gICAgICAgICAgICAudGhlbigoZmV0Y2hNb3JlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAvLyBkaXNhYmxlIHRoZSBgZmV0Y2hNb3JlYCBvdmVycmlkZSB0aGF0IGlzIGN1cnJlbnRseSBhY3RpdmVcbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IHVwZGF0ZXMgY2F1c2VkIGJ5IHRoaXMgc2hvdWxkIG5vdCBiZSBgZmV0Y2hNb3JlYCBhbnltb3JlLFxuICAgICAgICAgICAgLy8gYnV0IGByZWFkeWAgb3Igd2hhdGV2ZXIgb3RoZXIgY2FsY3VsYXRlZCBsb2FkaW5nIHN0YXRlIGlzIGN1cnJlbnRseVxuICAgICAgICAgICAgLy8gYXBwcm9wcmlhdGVcbiAgICAgICAgICAgIGZpbmFsaXplKCk7XG4gICAgICAgICAgICBpZiAoaXNDYWNoZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBQZXJmb3JtaW5nIHRoaXMgY2FjaGUgdXBkYXRlIGluc2lkZSBhIGNhY2hlLmJhdGNoIHRyYW5zYWN0aW9uIGVuc3VyZXNcbiAgICAgICAgICAgICAgICAvLyBhbnkgYWZmZWN0ZWQgY2FjaGUud2F0Y2ggd2F0Y2hlcnMgYXJlIG5vdGlmaWVkIGF0IG1vc3Qgb25jZSBhYm91dCBhbnlcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVzLiBNb3N0IHdhdGNoZXJzIHdpbGwgYmUgdXNpbmcgdGhlIFF1ZXJ5SW5mbyBjbGFzcywgd2hpY2hcbiAgICAgICAgICAgICAgICAvLyByZXNwb25kcyB0byBub3RpZmljYXRpb25zIGJ5IGNhbGxpbmcgcmVvYnNlcnZlQ2FjaGVGaXJzdCB0byBkZWxpdmVyXG4gICAgICAgICAgICAgICAgLy8gZmV0Y2hNb3JlIGNhY2hlIHJlc3VsdHMgYmFjayB0byB0aGlzIE9ic2VydmFibGVRdWVyeS5cbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlci5jYWNoZS5iYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogKGNhY2hlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS51cGRhdGVRdWVyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1pc3RpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKHByZXZpb3VzKSA9PiB1cGRhdGVRdWVyeShwcmV2aW91cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZXRjaE1vcmVSZXN1bHQ6IGZldGNoTW9yZVJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGNvbWJpbmVkT3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UncmUgdXNpbmcgYSBmaWVsZCBwb2xpY3kgaW5zdGVhZCBvZiB1cGRhdGVRdWVyeSwgdGhlIG9ubHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGluZyB3ZSBuZWVkIHRvIGRvIGlzIHdyaXRlIHRoZSBuZXcgZGF0YSB0byB0aGUgY2FjaGUgdXNpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21iaW5lZE9wdGlvbnMudmFyaWFibGVzIChpbnN0ZWFkIG9mIHRoaXMudmFyaWFibGVzLCB3aGljaCBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoYXQgdGhpcy51cGRhdGVRdWVyeSB1c2VzLCBiZWNhdXNlIGl0IHdvcmtzIGJ5IGFidXNpbmcgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3JpZ2luYWwgZmllbGQgdmFsdWUsIGtleWVkIGJ5IHRoZSBvcmlnaW5hbCB2YXJpYWJsZXMpLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLndyaXRlUXVlcnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeTogY29tYmluZWRPcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IGNvbWJpbmVkT3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGZldGNoTW9yZVJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbldhdGNoVXBkYXRlZDogKHdhdGNoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2F0Y2gud2F0Y2hlciA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhc1VwZGF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYSBwb3NzaWJpbGl0eSBgbGFzdFJlc3VsdGAgbWF5IG5vdCBiZSBzZXQgd2hlblxuICAgICAgICAgICAgICAgIC8vIGBmZXRjaE1vcmVgIGlzIGNhbGxlZCB3aGljaCB3b3VsZCBjYXVzZSB0aGlzIHRvIGNyYXNoLiBUaGlzIHNob3VsZFxuICAgICAgICAgICAgICAgIC8vIG9ubHkgaGFwcGVuIGlmIHdlIGhhdmVuJ3QgcHJldmlvdXNseSByZXBvcnRlZCBhIHJlc3VsdC4gV2UgZG9uJ3RcbiAgICAgICAgICAgICAgICAvLyBxdWl0ZSBrbm93IHdoYXQgdGhlIHJpZ2h0IGJlaGF2aW9yIHNob3VsZCBiZSBoZXJlIHNpbmNlIHRoaXMgYmxvY2tcbiAgICAgICAgICAgICAgICAvLyBvZiBjb2RlIHJ1bnMgYWZ0ZXIgdGhlIGZldGNoIHJlc3VsdCBoYXMgZXhlY3V0ZWQgb24gdGhlIG5ldHdvcmsuXG4gICAgICAgICAgICAgICAgLy8gV2UgcGxhbiB0byBsZXQgaXQgY3Jhc2ggaW4gdGhlIG1lYW50aW1lLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgZ2V0IGJ1ZyByZXBvcnRzIGR1ZSB0byB0aGUgYGRhdGFgIHByb3BlcnR5IGFjY2VzcyBvblxuICAgICAgICAgICAgICAgIC8vIHVuZGVmaW5lZCwgdGhpcyBzaG91bGQgZ2l2ZSB1cyBhIHJlYWwtd29ybGQgc2NlbmFyaW8gdGhhdCB3ZSBjYW5cbiAgICAgICAgICAgICAgICAvLyB1c2UgdG8gdGVzdCBhZ2FpbnN0IGFuZCBkZXRlcm1pbmUgdGhlIHJpZ2h0IGJlaGF2aW9yLiBJZiB3ZSBkbyBlbmRcbiAgICAgICAgICAgICAgICAvLyB1cCBjaGFuZ2luZyB0aGlzIGJlaGF2aW9yLCB0aGlzIG1heSByZXF1aXJlLCBmb3IgZXhhbXBsZSwgYW5cbiAgICAgICAgICAgICAgICAvLyBhZGp1c3RtZW50IHRvIHRoZSB0eXBlcyBvbiBgdXBkYXRlUXVlcnlgIHNpbmNlIHRoYXQgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAvLyBleHBlY3RzIHRoYXQgdGhlIGZpcnN0IGFyZ3VtZW50IGFsd2F5cyBjb250YWlucyBwcmV2aW91cyByZXN1bHRcbiAgICAgICAgICAgICAgICAvLyBkYXRhLCBidXQgbm90IGB1bmRlZmluZWRgLlxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RSZXN1bHQgPSB0aGlzLmdldEN1cnJlbnRSZXN1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gdXBkYXRlUXVlcnkobGFzdFJlc3VsdC5kYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgIGZldGNoTW9yZVJlc3VsdDogZmV0Y2hNb3JlUmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogY29tYmluZWRPcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyB3YXMgcmVwb3J0UmVzdWx0XG4gICAgICAgICAgICAgICAgcHVzaE5vdGlmaWNhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFwiTlwiLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubGFzdFJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtTdGF0dXM6IE5ldHdvcmtTdGF0dXMucmVhZHksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aWxsIGJlIG92ZXJ3cml0dGVuIGFueXdheXMsIGp1c3QgaGVyZSBmb3IgdHlwZXMgc2FrZVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0YXRlOiBsYXN0UmVzdWx0LmRhdGFTdGF0ZSA9PT0gXCJzdHJlYW1pbmdcIiA/IFwic3RyZWFtaW5nXCIgOiBcImNvbXBsZXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogXCJuZXR3b3JrXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXNrUmVzdWx0KGZldGNoTW9yZVJlc3VsdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAvLyBjYWxsIGBmaW5hbGl6ZWAgYSBzZWNvbmQgdGltZSBpbiBjYXNlIHRoZSBgLnRoZW5gIGNhc2UgYWJvdmUgd2FzIG5vdCByZWFjaGVkXG4gICAgICAgICAgICBmaW5hbGl6ZSgpO1xuICAgICAgICAgICAgLy8gSW4gY2FzZSB0aGUgY2FjaGUgd3JpdGVzIGFib3ZlIGRpZCBub3QgZ2VuZXJhdGUgYSBicm9hZGNhc3RcbiAgICAgICAgICAgIC8vIG5vdGlmaWNhdGlvbiAod2hpY2ggd291bGQgaGF2ZSBiZWVuIGludGVyY2VwdGVkIGJ5IG9uV2F0Y2hVcGRhdGVkKSxcbiAgICAgICAgICAgIC8vIGxpa2VseSBiZWNhdXNlIHRoZSB3cml0dGVuIGRhdGEgd2VyZSB0aGUgc2FtZSBhcyB3aGF0IHdhcyBhbHJlYWR5IGluXG4gICAgICAgICAgICAvLyB0aGUgY2FjaGUsIHdlIHN0aWxsIHdhbnQgZmV0Y2hNb3JlIHRvIGRlbGl2ZXIgaXRzIGZpbmFsIGxvYWRpbmc6ZmFsc2VcbiAgICAgICAgICAgIC8vIHJlc3VsdCB3aXRoIHRoZSB1bmNoYW5nZWQgZGF0YS5cbiAgICAgICAgICAgIGlmIChpc0NhY2hlZCAmJiAhd2FzVXBkYXRlZCkge1xuICAgICAgICAgICAgICAgIHB1c2hOb3RpZmljYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICBraW5kOiBcIk5cIixcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBcIm5ld05ldHdvcmtTdGF0dXNcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHt9LFxuICAgICAgICAgICAgICAgIH0sIHsgc2hvdWxkRW1pdDogMSAvKiBFbWl0QmVoYXZpb3IuZm9yY2UgKi8gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBYWFggdGhlIHN1YnNjcmlwdGlvbiB2YXJpYWJsZXMgYXJlIHNlcGFyYXRlIGZyb20gdGhlIHF1ZXJ5IHZhcmlhYmxlcy5cbiAgICAvLyBpZiB5b3Ugd2FudCB0byB1cGRhdGUgc3Vic2NyaXB0aW9uIHZhcmlhYmxlcywgcmlnaHQgbm93IHlvdSBoYXZlIHRvIGRvIHRoYXQgc2VwYXJhdGVseSxcbiAgICAvLyBhbmQgeW91IGNhbiBvbmx5IGRvIGl0IGJ5IHN0b3BwaW5nIHRoZSBzdWJzY3JpcHRpb24gYW5kIHRoZW4gc3Vic2NyaWJpbmcgYWdhaW4gd2l0aCBuZXcgdmFyaWFibGVzLlxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBlbmFibGVzIHlvdSB0byBleGVjdXRlIGEgW3N1YnNjcmlwdGlvbl0oaHR0cHM6Ly93d3cuYXBvbGxvZ3JhcGhxbC5jb20vZG9jcy9yZWFjdC9kYXRhL3N1YnNjcmlwdGlvbnMvKSwgdXN1YWxseSB0byBzdWJzY3JpYmUgdG8gc3BlY2lmaWMgZmllbGRzIHRoYXQgd2VyZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgX2Fub3RoZXJfIGZ1bmN0aW9uIHRoYXQgeW91IGNhbiBjYWxsIHRvIHRlcm1pbmF0ZSB0aGUgc3Vic2NyaXB0aW9uLlxuICAgICAqL1xuICAgIHN1YnNjcmliZVRvTW9yZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMucXVlcnlNYW5hZ2VyXG4gICAgICAgICAgICAuc3RhcnRHcmFwaFFMU3Vic2NyaXB0aW9uKHtcbiAgICAgICAgICAgIHF1ZXJ5OiBvcHRpb25zLmRvY3VtZW50LFxuICAgICAgICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICAgICAgIGNvbnRleHQ6IG9wdGlvbnMuY29udGV4dCxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgbmV4dDogKHN1YnNjcmlwdGlvbkRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHVwZGF0ZVF1ZXJ5LCBvbkVycm9yIH0gPSBvcHRpb25zO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IHN1YnNjcmlwdGlvbkRhdGE7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFyaWFudC5lcnJvcig4MCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZVF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUXVlcnkoKHByZXZpb3VzLCB1cGRhdGVPcHRpb25zKSA9PiB1cGRhdGVRdWVyeShwcmV2aW91cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uRGF0YTogc3Vic2NyaXB0aW9uRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnVwZGF0ZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZChzdWJzY3JpcHRpb24pO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucy5kZWxldGUoc3Vic2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBpbnRlcm5hbFxuICAgICogXG4gICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4gICAgKi9cbiAgICBhcHBseU9wdGlvbnMobmV3T3B0aW9ucykge1xuICAgICAgICBjb25zdCBtZXJnZWRPcHRpb25zID0gY29tcGFjdCh0aGlzLm9wdGlvbnMsIG5ld09wdGlvbnMgfHwge30pO1xuICAgICAgICBhc3NpZ24odGhpcy5vcHRpb25zLCBtZXJnZWRPcHRpb25zKTtcbiAgICAgICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgdmFyaWFibGVzIG9mIHRoaXMgb2JzZXJ2YWJsZSBxdWVyeSwgYW5kIGZldGNoIHRoZSBuZXcgcmVzdWx0c1xuICAgICAqIGlmIHRoZXkndmUgY2hhbmdlZC4gTW9zdCB1c2VycyBzaG91bGQgcHJlZmVyIGByZWZldGNoYCBpbnN0ZWFkIG9mXG4gICAgICogYHNldFZhcmlhYmxlc2AgaW4gb3JkZXIgdG8gdG8gYmUgcHJvcGVybHkgbm90aWZpZWQgb2YgcmVzdWx0cyBldmVuIHdoZW5cbiAgICAgKiB0aGV5IGNvbWUgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBOb3RlOiBgc2V0VmFyaWFibGVzKClgIGd1YXJhbnRlZXMgdGhhdCBhIHZhbHVlIHdpbGwgYmUgZW1pdHRlZCBmcm9tIHRoZVxuICAgICAqIG9ic2VydmFibGUsIGV2ZW4gaWYgdGhlIHJlc3VsdCBpcyBkZWVwbHkgZXF1YWwgdG8gdGhlIHByZXZpb3VzIHZhbHVlLlxuICAgICAqXG4gICAgICogTm90ZTogdGhlIHByb21pc2Ugd2lsbCByZXNvbHZlIHdpdGggdGhlIGxhc3QgZW1pdHRlZCByZXN1bHRcbiAgICAgKiB3aGVuIGVpdGhlciB0aGUgdmFyaWFibGVzIG1hdGNoIHRoZSBjdXJyZW50IHZhcmlhYmxlcyBvciB0aGVyZVxuICAgICAqIGFyZSBubyBzdWJzY3JpYmVycyB0byB0aGUgcXVlcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFyaWFibGVzIC0gVGhlIG5ldyBzZXQgb2YgdmFyaWFibGVzLiBJZiB0aGVyZSBhcmUgbWlzc2luZyB2YXJpYWJsZXMsXG4gICAgICogdGhlIHByZXZpb3VzIHZhbHVlcyBvZiB0aG9zZSB2YXJpYWJsZXMgd2lsbCBiZSB1c2VkLlxuICAgICAqL1xuICAgIGFzeW5jIHNldFZhcmlhYmxlcyh2YXJpYWJsZXMpIHtcbiAgICAgICAgdmFyaWFibGVzID0gdGhpcy5nZXRWYXJpYWJsZXNXaXRoRGVmYXVsdHModmFyaWFibGVzKTtcbiAgICAgICAgaWYgKGVxdWFsKHRoaXMudmFyaWFibGVzLCB2YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vIG9ic2VydmVycywgdGhlbiB3ZSBkb24ndCBhY3R1YWxseSB3YW50IHRvIG1ha2UgYSBuZXR3b3JrXG4gICAgICAgICAgICAvLyByZXF1ZXN0LiBBcyBzb29uIGFzIHNvbWVvbmUgb2JzZXJ2ZXMgdGhlIHF1ZXJ5LCB0aGUgcmVxdWVzdCB3aWxsIGtpY2tcbiAgICAgICAgICAgIC8vIG9mZi4gRm9yIG5vdywgd2UganVzdCBzdG9yZSBhbnkgY2hhbmdlcy4gKFNlZSAjMTA3NylcbiAgICAgICAgICAgIHJldHVybiB0b1F1ZXJ5UmVzdWx0KHRoaXMuZ2V0Q3VycmVudFJlc3VsdCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnMudmFyaWFibGVzID0gdmFyaWFibGVzO1xuICAgICAgICAvLyBTZWUgY29tbWVudCBhYm92ZVxuICAgICAgICBpZiAoIXRoaXMuaGFzT2JzZXJ2ZXJzKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0b1F1ZXJ5UmVzdWx0KHRoaXMuZ2V0Q3VycmVudFJlc3VsdCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcmVvYnNlcnZlKHtcbiAgICAgICAgICAgIC8vIFJlc2V0IG9wdGlvbnMuZmV0Y2hQb2xpY3kgdG8gaXRzIG9yaWdpbmFsIHZhbHVlLlxuICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IHRoaXMub3B0aW9ucy5pbml0aWFsRmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH0sIHsgbmV3TmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5zZXRWYXJpYWJsZXMgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBlbmFibGVzIHlvdSB0byB1cGRhdGUgdGhlIHF1ZXJ5J3MgY2FjaGVkIHJlc3VsdCB3aXRob3V0IGV4ZWN1dGluZyBhIGZvbGxvd3VwIEdyYXBoUUwgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogU2VlIFt1c2luZyB1cGRhdGVRdWVyeSBhbmQgdXBkYXRlRnJhZ21lbnRdKGh0dHBzOi8vd3d3LmFwb2xsb2dyYXBocWwuY29tL2RvY3MvcmVhY3QvY2FjaGluZy9jYWNoZS1pbnRlcmFjdGlvbi8jdXNpbmctdXBkYXRlcXVlcnktYW5kLXVwZGF0ZWZyYWdtZW50KSBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi5cbiAgICAgKi9cbiAgICB1cGRhdGVRdWVyeShtYXBGbikge1xuICAgICAgICBjb25zdCB7IHF1ZXJ5TWFuYWdlciB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgeyByZXN1bHQsIGNvbXBsZXRlIH0gPSB0aGlzLmdldENhY2hlRGlmZih7IG9wdGltaXN0aWM6IGZhbHNlIH0pO1xuICAgICAgICBjb25zdCBuZXdSZXN1bHQgPSBtYXBGbihyZXN1bHQsIHtcbiAgICAgICAgICAgIHZhcmlhYmxlczogdGhpcy52YXJpYWJsZXMsXG4gICAgICAgICAgICBjb21wbGV0ZTogISFjb21wbGV0ZSxcbiAgICAgICAgICAgIHByZXZpb3VzRGF0YTogcmVzdWx0LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG5ld1Jlc3VsdCkge1xuICAgICAgICAgICAgcXVlcnlNYW5hZ2VyLmNhY2hlLndyaXRlUXVlcnkoe1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLm9wdGlvbnMucXVlcnksXG4gICAgICAgICAgICAgICAgZGF0YTogbmV3UmVzdWx0LFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogdGhpcy52YXJpYWJsZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHF1ZXJ5TWFuYWdlci5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGluc3RydWN0cyB0aGUgcXVlcnkgdG8gYmVnaW4gcmUtZXhlY3V0aW5nIGF0IGEgc3BlY2lmaWVkIGludGVydmFsIChpbiBtaWxsaXNlY29uZHMpLlxuICAgICAqL1xuICAgIHN0YXJ0UG9sbGluZyhwb2xsSW50ZXJ2YWwpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnBvbGxJbnRlcnZhbCA9IHBvbGxJbnRlcnZhbDtcbiAgICAgICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBpbnN0cnVjdHMgdGhlIHF1ZXJ5IHRvIHN0b3AgcG9sbGluZyBhZnRlciBhIHByZXZpb3VzIGNhbGwgdG8gYHN0YXJ0UG9sbGluZ2AuXG4gICAgICovXG4gICAgc3RvcFBvbGxpbmcoKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5wb2xsSW50ZXJ2YWwgPSAwO1xuICAgICAgICB0aGlzLnVwZGF0ZVBvbGxpbmcoKTtcbiAgICB9XG4gICAgLy8gVXBkYXRlIG9wdGlvbnMuZmV0Y2hQb2xpY3kgYWNjb3JkaW5nIHRvIG9wdGlvbnMubmV4dEZldGNoUG9saWN5LlxuICAgIGFwcGx5TmV4dEZldGNoUG9saWN5KHJlYXNvbiwgXG4gICAgLy8gSXQncyBwb3NzaWJsZSB0byB1c2UgdGhpcyBtZXRob2QgdG8gYXBwbHkgb3B0aW9ucy5uZXh0RmV0Y2hQb2xpY3kgdG9cbiAgICAvLyBvcHRpb25zLmZldGNoUG9saWN5IGV2ZW4gaWYgb3B0aW9ucyAhPT0gdGhpcy5vcHRpb25zLCB0aG91Z2ggdGhhdCBoYXBwZW5zXG4gICAgLy8gbW9zdCBvZnRlbiB3aGVuIHRoZSBvcHRpb25zIGFyZSB0ZW1wb3JhcnksIHVzZWQgZm9yIG9ubHkgb25lIHJlcXVlc3QgYW5kXG4gICAgLy8gdGhlbiB0aHJvd24gYXdheSwgc28gbmV4dEZldGNoUG9saWN5IG1heSBub3QgZW5kIHVwIG1hdHRlcmluZy5cbiAgICBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zLm5leHRGZXRjaFBvbGljeSkge1xuICAgICAgICAgICAgY29uc3QgeyBmZXRjaFBvbGljeSA9IFwiY2FjaGUtZmlyc3RcIiwgaW5pdGlhbEZldGNoUG9saWN5ID0gZmV0Y2hQb2xpY3kgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoZmV0Y2hQb2xpY3kgPT09IFwic3RhbmRieVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZywgbGVhdmluZyBvcHRpb25zLmZldGNoUG9saWN5IHVuY2hhbmdlZC5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLm5leHRGZXRjaFBvbGljeSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBzb21lb25lIGNob29zZXMgXCJjYWNoZS1hbmQtbmV0d29ya1wiIG9yIFwibmV0d29yay1vbmx5XCIgYXMgdGhlaXJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsIEZldGNoUG9saWN5LCB0aGV5IG9mdGVuIGRvIG5vdCB3YW50IGZ1dHVyZSBjYWNoZSB1cGRhdGVzIHRvXG4gICAgICAgICAgICAgICAgLy8gdHJpZ2dlciB1bmNvbmRpdGlvbmFsIG5ldHdvcmsgcmVxdWVzdHMsIHdoaWNoIGlzIHdoYXQgcmVwZWF0ZWRseVxuICAgICAgICAgICAgICAgIC8vIGFwcGx5aW5nIHRoZSBcImNhY2hlLWFuZC1uZXR3b3JrXCIgb3IgXCJuZXR3b3JrLW9ubHlcIiBwb2xpY2llcyB3b3VsZFxuICAgICAgICAgICAgICAgIC8vIHNlZW0gdG8gaW1wbHkuIEluc3RlYWQsIHdoZW4gdGhlIGNhY2hlIHJlcG9ydHMgYW4gdXBkYXRlIGFmdGVyIHRoZVxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWwgbmV0d29yayByZXF1ZXN0LCBpdCBtYXkgYmUgZGVzaXJhYmxlIGZvciBzdWJzZXF1ZW50IG5ldHdvcmtcbiAgICAgICAgICAgICAgICAvLyByZXF1ZXN0cyB0byBiZSB0cmlnZ2VyZWQgb25seSBpZiB0aGUgY2FjaGUgcmVzdWx0IGlzIGluY29tcGxldGUuIFRvXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBlbmQsIHRoZSBvcHRpb25zLm5leHRGZXRjaFBvbGljeSBvcHRpb24gcHJvdmlkZXMgYW4gZWFzeSB3YXkgdG9cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgb3B0aW9ucy5mZXRjaFBvbGljeSBhZnRlciB0aGUgaW5pdGlhbCBuZXR3b3JrIHJlcXVlc3QsIHdpdGhvdXRcbiAgICAgICAgICAgICAgICAvLyBoYXZpbmcgdG8gY2FsbCBvYnNlcnZhYmxlUXVlcnkucmVvYnNlcnZlLlxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZmV0Y2hQb2xpY3kgPSBvcHRpb25zLm5leHRGZXRjaFBvbGljeS5jYWxsKG9wdGlvbnMsIGZldGNoUG9saWN5LCB7IHJlYXNvbiwgb3B0aW9ucywgb2JzZXJ2YWJsZTogdGhpcywgaW5pdGlhbEZldGNoUG9saWN5IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVhc29uID09PSBcInZhcmlhYmxlcy1jaGFuZ2VkXCIpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmZldGNoUG9saWN5ID0gaW5pdGlhbEZldGNoUG9saWN5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mZXRjaFBvbGljeSA9IG9wdGlvbnMubmV4dEZldGNoUG9saWN5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRpb25zLmZldGNoUG9saWN5O1xuICAgIH1cbiAgICBmZXRjaChvcHRpb25zLCBuZXR3b3JrU3RhdHVzLCBmZXRjaFF1ZXJ5LCBvcGVyYXRvcikge1xuICAgICAgICAvLyBUT0RPIE1ha2Ugc3VyZSB3ZSB1cGRhdGUgdGhlIG5ldHdvcmtTdGF0dXMgKGFuZCBpbmZlciBmZXRjaFZhcmlhYmxlcylcbiAgICAgICAgLy8gYmVmb3JlIGFjdHVhbGx5IGNvbW1pdHRpbmcgdG8gdGhlIGZldGNoLlxuICAgICAgICBjb25zdCBpbml0aWFsRmV0Y2hQb2xpY3kgPSB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3k7XG4gICAgICAgIG9wdGlvbnMuY29udGV4dCA/Pz0ge307XG4gICAgICAgIGxldCBzeW5jaHJvbm91c2x5RW1pdHRlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBvbkNhY2hlSGl0ID0gKCkgPT4ge1xuICAgICAgICAgICAgc3luY2hyb25vdXNseUVtaXR0ZWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmZXRjaFF1ZXJ5T3BlcmF0b3IgPSAvLyB3ZSBjYW5ub3QgdXNlIGB0YXBgIGhlcmUsIHNpbmNlIGl0IGFsbG93cyBvbmx5IGZvciBhIFwiYmVmb3JlIHN1YnNjcmlwdGlvblwiXG4gICAgICAgICBcbiAgICAgICAgLy8gaG9vayB3aXRoIGBzdWJzY3JpYmVgIGFuZCB3ZSBjYXJlIGZvciBcImRpcmVjdGx5IGJlZm9yZSBhbmQgYWZ0ZXIgc3Vic2NyaXB0aW9uXCJcbiAgICAgICAgKHNvdXJjZSkgPT4gbmV3IE9ic2VydmFibGUoKHN1YnNjcmliZXIpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgICAgICBuZXh0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzeW5jaHJvbm91c2x5RW1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogKGVycm9yKSA9PiBzdWJzY3JpYmVyLmVycm9yKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6ICgpID0+IHN1YnNjcmliZXIuY29tcGxldGUoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGlmICghc3luY2hyb25vdXNseUVtaXR0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uLm92ZXJyaWRlID0gbmV0d29ya1N0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5uZXh0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IFwiTlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBcIm5ld05ldHdvcmtTdGF0dXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRFcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRFbWl0OiAzIC8qIEVtaXRCZWhhdmlvci5uZXR3b3JrU3RhdHVzQ2hhbmdlICovLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVGhlIG1vbWVudCB0aGlzIG5vdGlmaWNhdGlvbiBpcyBlbWl0dGVkLCBgbmV4dEZldGNoUG9saWN5YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG1pZ2h0IGFscmVhZHkgaGF2ZSBzd2l0Y2hlZCBmcm9tIGEgYG5ldHdvcmstb25seWAgdG8gYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGBjYWNoZS1zb21ldGhpbmdgIHBvbGljeSwgc28gd2Ugd2FudCB0byBlbnN1cmUgdGhhdCB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBsb2FkaW5nIHN0YXRlIGVtaXQgZG9lc24ndCBhY2NpZGVudGFsbHkgcmVhZCBmcm9tIHRoZSBjYWNoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGluIHRob3NlIGNhc2VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUG9saWN5OiBpbml0aWFsRmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgeyBvYnNlcnZhYmxlLCBmcm9tTGluayB9ID0gdGhpcy5xdWVyeU1hbmFnZXIuZmV0Y2hPYnNlcnZhYmxlV2l0aEluZm8ob3B0aW9ucywge1xuICAgICAgICAgICAgbmV0d29ya1N0YXR1cyxcbiAgICAgICAgICAgIHF1ZXJ5OiBmZXRjaFF1ZXJ5LFxuICAgICAgICAgICAgb25DYWNoZUhpdCxcbiAgICAgICAgICAgIGZldGNoUXVlcnlPcGVyYXRvcixcbiAgICAgICAgICAgIG9ic2VydmFibGVRdWVyeTogdGhpcyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHRyYWNrIHF1ZXJ5IGFuZCB2YXJpYWJsZXMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIG9wZXJhdGlvblxuICAgICAgICBjb25zdCB7IHF1ZXJ5LCB2YXJpYWJsZXMgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IHtcbiAgICAgICAgICAgIGFib3J0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWN0aXZlT3BlcmF0aW9ucy5hZGQob3BlcmF0aW9uKTtcbiAgICAgICAgbGV0IGZvcmNlRmlyc3RWYWx1ZUVtaXQgPSBuZXR3b3JrU3RhdHVzID09IE5ldHdvcmtTdGF0dXMucmVmZXRjaCB8fFxuICAgICAgICAgICAgbmV0d29ya1N0YXR1cyA9PSBOZXR3b3JrU3RhdHVzLnNldFZhcmlhYmxlcztcbiAgICAgICAgb2JzZXJ2YWJsZSA9IG9ic2VydmFibGUucGlwZShvcGVyYXRvciwgc2hhcmUoKSk7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGVcbiAgICAgICAgICAgIC5waXBlKHRhcCh7XG4gICAgICAgICAgICBuZXh0OiAobm90aWZpY2F0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi5zb3VyY2UgPT09IFwibmV3TmV0d29ya1N0YXR1c1wiIHx8XG4gICAgICAgICAgICAgICAgICAgIChub3RpZmljYXRpb24ua2luZCA9PT0gXCJOXCIgJiYgbm90aWZpY2F0aW9uLnZhbHVlLmxvYWRpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5vdmVycmlkZSA9IG5ldHdvcmtTdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3BlcmF0aW9uLm92ZXJyaWRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmaW5hbGl6ZTogKCkgPT4gdGhpcy5hY3RpdmVPcGVyYXRpb25zLmRlbGV0ZShvcGVyYXRpb24pLFxuICAgICAgICB9KSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgbmV4dDogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YSA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChmb3JjZUZpcnN0VmFsdWVFbWl0ICYmXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmtpbmQgPT09IFwiTlwiICYmXG4gICAgICAgICAgICAgICAgICAgIFwibG9hZGluZ1wiIGluIHZhbHVlLnZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgICF2YWx1ZS52YWx1ZS5sb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlRmlyc3RWYWx1ZUVtaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbWV0YS5zaG91bGRFbWl0ID0gMSAvKiBFbWl0QmVoYXZpb3IuZm9yY2UgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQubmV4dCh7IC4uLnZhbHVlLCBxdWVyeSwgdmFyaWFibGVzLCBtZXRhIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IGZyb21MaW5rLCBzdWJzY3JpcHRpb24sIG9ic2VydmFibGUgfTtcbiAgICB9XG4gICAgLy8gVHVybnMgcG9sbGluZyBvbiBvciBvZmYgYmFzZWQgb24gdGhpcy5vcHRpb25zLnBvbGxJbnRlcnZhbC5cbiAgICBkaWRXYXJuQ2FjaGVPbmx5UG9sbGluZyA9IGZhbHNlO1xuICAgIHVwZGF0ZVBvbGxpbmcoKSB7XG4gICAgICAgIC8vIEF2b2lkIHBvbGxpbmcgaW4gU1NSIG1vZGVcbiAgICAgICAgaWYgKHRoaXMucXVlcnlNYW5hZ2VyLnNzck1vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHBvbGxpbmdJbmZvLCBvcHRpb25zOiB7IGZldGNoUG9saWN5LCBwb2xsSW50ZXJ2YWwgfSwgfSA9IHRoaXM7XG4gICAgICAgIGlmICghcG9sbEludGVydmFsIHx8ICF0aGlzLmhhc09ic2VydmVycygpIHx8IGZldGNoUG9saWN5ID09PSBcImNhY2hlLW9ubHlcIikge1xuICAgICAgICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGlkV2FybkNhY2hlT25seVBvbGxpbmcgJiZcbiAgICAgICAgICAgICAgICAgICAgcG9sbEludGVydmFsICYmXG4gICAgICAgICAgICAgICAgICAgIGZldGNoUG9saWN5ID09PSBcImNhY2hlLW9ubHlcIikge1xuICAgICAgICAgICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKDgxLCBnZXRPcGVyYXRpb25OYW1lKHRoaXMucXVlcnksIFwiKGFub255bW91cylcIikpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpZFdhcm5DYWNoZU9ubHlQb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNhbmNlbFBvbGxpbmcoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9sbGluZ0luZm8/LmludGVydmFsID09PSBwb2xsSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmZvID0gcG9sbGluZ0luZm8gfHwgKHRoaXMucG9sbGluZ0luZm8gPSB7fSk7XG4gICAgICAgIGluZm8uaW50ZXJ2YWwgPSBwb2xsSW50ZXJ2YWw7XG4gICAgICAgIGNvbnN0IG1heWJlRmV0Y2ggPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wb2xsaW5nSW5mbykge1xuICAgICAgICAgICAgICAgIGlmICghaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0KHRoaXMubmV0d29ya1N0YXR1cykgJiZcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMub3B0aW9ucy5za2lwUG9sbEF0dGVtcHQ/LigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Jlb2JzZXJ2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3N0IGZldGNoUG9saWN5IG9wdGlvbnMgZG9uJ3QgbWFrZSBzZW5zZSB0byB1c2UgaW4gYSBwb2xsaW5nIGNvbnRleHQsIGFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VycyB3b3VsZG4ndCB3YW50IHRvIGJlIHBvbGxpbmcgdGhlIGNhY2hlIGRpcmVjdGx5LiBIb3dldmVyLCBuZXR3b3JrLW9ubHkgYW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuby1jYWNoZSBhcmUgYm90aCB1c2VmdWwgZm9yIHdoZW4gdGhlIHVzZXIgd2FudHMgdG8gY29udHJvbCB3aGV0aGVyIG9yIG5vdCB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbGxlZCByZXN1bHRzIGFyZSB3cml0dGVuIHRvIHRoZSBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoUG9saWN5OiB0aGlzLm9wdGlvbnMuaW5pdGlhbEZldGNoUG9saWN5ID09PSBcIm5vLWNhY2hlXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibm8tY2FjaGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJuZXR3b3JrLW9ubHlcIixcbiAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5wb2xsLFxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKHBvbGwsIHBvbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcG9sbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcG9sbCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZm8gPSB0aGlzLnBvbGxpbmdJbmZvO1xuICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaW5mby50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICBpbmZvLnRpbWVvdXQgPSBzZXRUaW1lb3V0KG1heWJlRmV0Y2gsIGluZm8uaW50ZXJ2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwb2xsKCk7XG4gICAgfVxuICAgIC8vIFRoaXMgZGlmZmVycyBmcm9tIHN0b3BQb2xsaW5nIGluIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHBvbGxJbnRlcnZhbCB0byAwXG4gICAgY2FuY2VsUG9sbGluZygpIHtcbiAgICAgICAgaWYgKHRoaXMucG9sbGluZ0luZm8pIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbGxpbmdJbmZvLnRpbWVvdXQpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucG9sbGluZ0luZm87XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVldmFsdWF0ZSB0aGUgcXVlcnksIG9wdGlvbmFsbHkgYWdhaW5zdCBuZXcgb3B0aW9ucy4gTmV3IG9wdGlvbnMgd2lsbCBiZVxuICAgICAqIG1lcmdlZCB3aXRoIHRoZSBjdXJyZW50IG9wdGlvbnMgd2hlbiBnaXZlbi5cbiAgICAgKlxuICAgICAqIE5vdGU6IGB2YXJpYWJsZXNgIGNhbiBiZSByZXNldCBiYWNrIHRvIHRoZWlyIGRlZmF1bHRzICh0eXBpY2FsbHkgZW1wdHkpIGJ5IGNhbGxpbmcgYHJlb2JzZXJ2ZWAgd2l0aFxuICAgICAqIGB2YXJpYWJsZXM6IHVuZGVmaW5lZGAuXG4gICAgICovXG4gICAgcmVvYnNlcnZlKG5ld09wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlb2JzZXJ2ZShuZXdPcHRpb25zKTtcbiAgICB9XG4gICAgX3Jlb2JzZXJ2ZShuZXdPcHRpb25zLCBpbnRlcm5hbE9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5pc1Rvcm5Eb3duID0gZmFsc2U7XG4gICAgICAgIGxldCB7IG5ld05ldHdvcmtTdGF0dXMgfSA9IGludGVybmFsT3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIub2JzUXVlcmllcy5hZGQodGhpcyk7XG4gICAgICAgIGNvbnN0IHVzZURpc3Bvc2FibGVPYnNlcnZhYmxlID0gXG4gICAgICAgIC8vIFJlZmV0Y2hpbmcgdXNlcyBhIGRpc3Bvc2FibGUgT2JzZXJ2YWJsZSB0byBhbGxvdyByZWZldGNoZXMgdXNpbmcgZGlmZmVyZW50XG4gICAgICAgIC8vIG9wdGlvbnMsIHdpdGhvdXQgcGVybWFuZW50bHkgYWx0ZXJpbmcgdGhlIG9wdGlvbnMgb2YgdGhlXG4gICAgICAgIC8vIG9yaWdpbmFsIE9ic2VydmFibGVRdWVyeS5cbiAgICAgICAgbmV3TmV0d29ya1N0YXR1cyA9PT0gTmV0d29ya1N0YXR1cy5yZWZldGNoIHx8XG4gICAgICAgICAgICAvLyBQb2xsaW5nIHVzZXMgYSBkaXNwb3NhYmxlIE9ic2VydmFibGUgc28gdGhlIHBvbGxpbmcgb3B0aW9ucyAod2hpY2ggZm9yY2VcbiAgICAgICAgICAgIC8vIGZldGNoUG9saWN5IHRvIGJlIFwibmV0d29yay1vbmx5XCIgb3IgXCJuby1jYWNoZVwiKSB3b24ndCBvdmVycmlkZSB0aGUgb3JpZ2luYWwgb3B0aW9ucy5cbiAgICAgICAgICAgIG5ld05ldHdvcmtTdGF0dXMgPT09IE5ldHdvcmtTdGF0dXMucG9sbDtcbiAgICAgICAgLy8gU2F2ZSB0aGUgb2xkIHZhcmlhYmxlcywgc2luY2UgT2JqZWN0LmFzc2lnbiBtYXkgbW9kaWZ5IHRoZW0gYmVsb3cuXG4gICAgICAgIGNvbnN0IG9sZFZhcmlhYmxlcyA9IHRoaXMudmFyaWFibGVzO1xuICAgICAgICBjb25zdCBvbGRGZXRjaFBvbGljeSA9IHRoaXMub3B0aW9ucy5mZXRjaFBvbGljeTtcbiAgICAgICAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IGNvbXBhY3QodGhpcy5vcHRpb25zLCBuZXdPcHRpb25zIHx8IHt9KTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHVzZURpc3Bvc2FibGVPYnNlcnZhYmxlID9cbiAgICAgICAgICAgIC8vIERpc3Bvc2FibGUgT2JzZXJ2YWJsZSBmZXRjaGVzIHJlY2VpdmUgYSBzaGFsbG93IGNvcHkgb2YgdGhpcy5vcHRpb25zXG4gICAgICAgICAgICAvLyAobWVyZ2VkIHdpdGggbmV3T3B0aW9ucyksIGxlYXZpbmcgdGhpcy5vcHRpb25zIHVubW9kaWZpZWQuXG4gICAgICAgICAgICBtZXJnZWRPcHRpb25zXG4gICAgICAgICAgICA6IGFzc2lnbih0aGlzLm9wdGlvbnMsIG1lcmdlZE9wdGlvbnMpO1xuICAgICAgICAvLyBEb24ndCB1cGRhdGUgb3B0aW9ucy5xdWVyeSB3aXRoIHRoZSB0cmFuc2Zvcm1lZCBxdWVyeSB0byBhdm9pZFxuICAgICAgICAvLyBvdmVyd3JpdGluZyB0aGlzLm9wdGlvbnMucXVlcnkgd2hlbiB3ZSBhcmVuJ3QgdXNpbmcgYSBkaXNwb3NhYmxlIGNvbmNhc3QuXG4gICAgICAgIC8vIFdlIHdhbnQgdG8gZW5zdXJlIHdlIGNhbiByZS1ydW4gdGhlIGN1c3RvbSBkb2N1bWVudCB0cmFuc2Zvcm1zIHRoZSBuZXh0XG4gICAgICAgIC8vIHRpbWUgYSByZXF1ZXN0IGlzIG1hZGUgYWdhaW5zdCB0aGUgb3JpZ2luYWwgcXVlcnkuXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy50cmFuc2Zvcm1Eb2N1bWVudChvcHRpb25zLnF1ZXJ5KTtcbiAgICAgICAgdGhpcy5sYXN0UXVlcnkgPSBxdWVyeTtcbiAgICAgICAgLy8gUmVldmFsdWF0ZSB2YXJpYWJsZXMgdG8gYWxsb3cgcmVzZXR0aW5nIHZhcmlhYmxlcyB3aXRoIHZhcmlhYmxlczogdW5kZWZpbmVkLFxuICAgICAgICAvLyBvdGhlcndpc2UgYGNvbXBhY3RgIHdpbGwgaWdub3JlIHRoZSBgdmFyaWFibGVzYCBrZXkgaW4gYG5ld09wdGlvbnNgLiBXZVxuICAgICAgICAvLyBkbyB0aGlzIGFmdGVyIHdlIHJ1biB0aGUgcXVlcnkgdHJhbnNmb3JtIHRvIGVuc3VyZSB3ZSBnZXQgZGVmYXVsdFxuICAgICAgICAvLyB2YXJpYWJsZXMgZnJvbSB0aGUgdHJhbnNmb3JtZWQgcXVlcnkuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIE5vdGU6IHVwZGF0aW5nIG9wdGlvbnMudmFyaWFibGVzIG1heSBtdXRhdGUgdGhpcy5vcHRpb25zLnZhcmlhYmxlc1xuICAgICAgICAvLyBpbiB0aGUgY2FzZSBvZiBhIG5vbi1kaXNwb3NhYmxlIHF1ZXJ5LiBUaGlzIGlzIGludGVudGlvbmFsLlxuICAgICAgICBpZiAobmV3T3B0aW9ucyAmJiBcInZhcmlhYmxlc1wiIGluIG5ld09wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudmFyaWFibGVzID0gdGhpcy5nZXRWYXJpYWJsZXNXaXRoRGVmYXVsdHMobmV3T3B0aW9ucy52YXJpYWJsZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdXNlRGlzcG9zYWJsZU9ic2VydmFibGUpIHtcbiAgICAgICAgICAgIC8vIFdlIGNhbiBza2lwIGNhbGxpbmcgdXBkYXRlUG9sbGluZyBpZiB3ZSdyZSBub3QgY2hhbmdpbmcgdGhpcy5vcHRpb25zLlxuICAgICAgICAgICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgICAgICAgICAvLyBSZXNldCBvcHRpb25zLmZldGNoUG9saWN5IHRvIGl0cyBvcmlnaW5hbCB2YWx1ZSB3aGVuIHZhcmlhYmxlcyBjaGFuZ2UsXG4gICAgICAgICAgICAvLyB1bmxlc3MgYSBuZXcgZmV0Y2hQb2xpY3kgd2FzIHByb3ZpZGVkIGJ5IG5ld09wdGlvbnMuXG4gICAgICAgICAgICBpZiAobmV3T3B0aW9ucyAmJlxuICAgICAgICAgICAgICAgIG5ld09wdGlvbnMudmFyaWFibGVzICYmXG4gICAgICAgICAgICAgICAgIWVxdWFsKG5ld09wdGlvbnMudmFyaWFibGVzLCBvbGRWYXJpYWJsZXMpICYmXG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgbWVzcyB3aXRoIHRoZSBmZXRjaFBvbGljeSBpZiBpdCdzIGN1cnJlbnRseSBcInN0YW5kYnlcIi5cbiAgICAgICAgICAgICAgICBvcHRpb25zLmZldGNoUG9saWN5ICE9PSBcInN0YW5kYnlcIiAmJlxuICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIGNoYW5naW5nIHRoZSBmZXRjaFBvbGljeSBhbnl3YXksIGRvbid0IHRyeSB0byBjaGFuZ2UgaXQgaGVyZVxuICAgICAgICAgICAgICAgIC8vIHVzaW5nIGFwcGx5TmV4dEZldGNoUG9saWN5LiBUaGUgZXhwbGljaXQgb3B0aW9ucy5mZXRjaFBvbGljeSB3aW5zLlxuICAgICAgICAgICAgICAgIChvcHRpb25zLmZldGNoUG9saWN5ID09PSBvbGRGZXRjaFBvbGljeSB8fFxuICAgICAgICAgICAgICAgICAgICAvLyBBIGBuZXh0RmV0Y2hQb2xpY3lgIGZ1bmN0aW9uIGhhcyBldmVuIGhpZ2hlciBwcmlvcml0eSwgdGhvdWdoLFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBpbiB0aGF0IGNhc2UgYGFwcGx5TmV4dEZldGNoUG9saWN5YCBtdXN0IGJlIGNhbGxlZC5cbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMubmV4dEZldGNoUG9saWN5ID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBtaWdodCBtdXRhdGUgb3B0aW9ucy5mZXRjaFBvbGljeVxuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlOZXh0RmV0Y2hQb2xpY3koXCJ2YXJpYWJsZXMtY2hhbmdlZFwiLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3TmV0d29ya1N0YXR1cyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld05ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLnNldFZhcmlhYmxlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkTmV0d29ya1N0YXR1cyA9IHRoaXMubmV0d29ya1N0YXR1cztcbiAgICAgICAgaWYgKCFuZXdOZXR3b3JrU3RhdHVzKSB7XG4gICAgICAgICAgICBuZXdOZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5sb2FkaW5nO1xuICAgICAgICAgICAgaWYgKG9sZE5ldHdvcmtTdGF0dXMgIT09IE5ldHdvcmtTdGF0dXMubG9hZGluZyAmJlxuICAgICAgICAgICAgICAgIG5ld09wdGlvbnM/LnZhcmlhYmxlcyAmJlxuICAgICAgICAgICAgICAgICFlcXVhbChuZXdPcHRpb25zLnZhcmlhYmxlcywgb2xkVmFyaWFibGVzKSkge1xuICAgICAgICAgICAgICAgIG5ld05ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLnNldFZhcmlhYmxlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFF1ZXJ5TWFuYWdlciBkb2VzIG5vdCBlbWl0IGFueSB2YWx1ZXMgZm9yIHN0YW5kYnkgZmV0Y2ggcG9saWNpZXMgc28gd2VcbiAgICAgICAgICAgIC8vIHdhbnQgZW5zdXJlIHRoYXQgdGhlIG5ldHdvcmtTdGF0dXMgcmVtYWlucyByZWFkeS5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZldGNoUG9saWN5ID09PSBcInN0YW5kYnlcIikge1xuICAgICAgICAgICAgICAgIG5ld05ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLnJlYWR5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmZldGNoUG9saWN5ID09PSBcInN0YW5kYnlcIikge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxQb2xsaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXN1YnNjcmliZUNhY2hlKCk7XG4gICAgICAgIGNvbnN0IHsgcHJvbWlzZSwgb3BlcmF0b3I6IHByb21pc2VPcGVyYXRvciB9ID0gZ2V0VHJhY2tpbmdPcGVyYXRvclByb21pc2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKHZhbHVlLmtpbmQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiRVwiOlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyB2YWx1ZS5lcnJvcjtcbiAgICAgICAgICAgICAgICBjYXNlIFwiTlwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc291cmNlICE9PSBcIm5ld05ldHdvcmtTdGF0dXNcIiAmJiAhdmFsdWUudmFsdWUubG9hZGluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgXG4gICAgICAgIC8vIFRoaXMgZGVmYXVsdCB2YWx1ZSBzaG91bGQgb25seSBiZSB1c2VkIHdoZW4gdXNpbmcgYSBgZmV0Y2hQb2xpY3lgIG9mXG4gICAgICAgIC8vIGBzdGFuZGJ5YCBzaW5jZSB0aGF0IGZldGNoIHBvbGljeSBjb21wbGV0ZXMgd2l0aG91dCBlbWl0dGluZyBhXG4gICAgICAgIC8vIHJlc3VsdC4gU2luY2Ugd2UgYXJlIGNvbnZlcnRpbmcgdGhpcyB0byBhIFF1ZXJ5UmVzdWx0IHR5cGUsIHdlXG4gICAgICAgIC8vIG9taXQgdGhlIGV4dHJhIGZpZWxkcyBmcm9tIEFwb2xsb1F1ZXJ5UmVzdWx0IGluIHRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAgICBvcHRpb25zLmZldGNoUG9saWN5ID09PSBcInN0YW5kYnlcIiA/XG4gICAgICAgICAgICB7IGRhdGE6IHVuZGVmaW5lZCB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgICAgIGNvbnN0IHsgc3Vic2NyaXB0aW9uLCBvYnNlcnZhYmxlLCBmcm9tTGluayB9ID0gdGhpcy5mZXRjaChvcHRpb25zLCBuZXdOZXR3b3JrU3RhdHVzLCBxdWVyeSwgcHJvbWlzZU9wZXJhdG9yKTtcbiAgICAgICAgaWYgKCF1c2VEaXNwb3NhYmxlT2JzZXJ2YWJsZSAmJiAoZnJvbUxpbmsgfHwgIXRoaXMubGlua1N1YnNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmtTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmtTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGlua1N1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXQgPSBPYmplY3QuYXNzaWduKHByZXZlbnRVbmhhbmRsZWRSZWplY3Rpb24ocHJvbWlzZVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gdG9RdWVyeVJlc3VsdCh0aGlzLm1hc2tSZXN1bHQocmVzdWx0KSkpXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzT2JzZXJ2ZXJzKCkgJiYgdGhpcy5hY3RpdmVPcGVyYXRpb25zLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBgcmVvYnNlcnZlYCB3YXMgY2FsbGVkIG9uIGEgcXVlcnkgd2l0aG91dCBhbnkgb2JlcnZlcnMsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHRlYXJkb3duIGxvZ2ljIHdvdWxkIG5ldmVyIGJlIGNhbGxlZCwgc28gd2UgbmVlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNhbGwgaXQgaGVyZSB0byBlbnN1cmUgdGhlIHF1ZXJ5IGlzIHByb3Blcmx5IHRvcm4gZG93bi5cbiAgICAgICAgICAgICAgICB0aGlzLnRlYXJEb3duUXVlcnkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCB7XG4gICAgICAgICAgICByZXRhaW46ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlLnN1YnNjcmliZSh7fSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4odW5zdWJzY3JpYmUsIHVuc3Vic2NyaWJlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICAgIGhhc09ic2VydmVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5vYnNlcnZlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVhcnMgZG93biB0aGUgYE9ic2VydmFibGVRdWVyeWAgYW5kIHN0b3BzIGFsbCBhY3RpdmUgb3BlcmF0aW9ucyBieSBzZW5kaW5nIGEgYGNvbXBsZXRlYCBub3RpZmljYXRpb24uXG4gICAgICovXG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5zdWJqZWN0LmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZU9ic2VydmFibGVzUXVldWUoKTtcbiAgICAgICAgdGhpcy50ZWFyRG93blF1ZXJ5KCk7XG4gICAgfVxuICAgIHRlYXJEb3duUXVlcnkoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVG9ybkRvd24pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMucmVzZXROb3RpZmljYXRpb25zKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVGcm9tQ2FjaGU/LigpO1xuICAgICAgICBpZiAodGhpcy5saW5rU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmtTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpbmtTdWJzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgICAgICAvLyBzdG9wIGFsbCBhY3RpdmUgR3JhcGhRTCBzdWJzY3JpcHRpb25zXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKChzdWIpID0+IHN1Yi51bnN1YnNjcmliZSgpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLm9ic1F1ZXJpZXMuZGVsZXRlKHRoaXMpO1xuICAgICAgICB0aGlzLmlzVG9ybkRvd24gPSB0cnVlO1xuICAgICAgICB0aGlzLmFib3J0QWN0aXZlT3BlcmF0aW9ucygpO1xuICAgICAgICB0aGlzLl9sYXN0V3JpdGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRyYW5zZm9ybURvY3VtZW50KGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci50cmFuc2Zvcm0oZG9jdW1lbnQpO1xuICAgIH1cbiAgICBtYXNrUmVzdWx0KHJlc3VsdCkge1xuICAgICAgICBjb25zdCBtYXNrZWQgPSB0aGlzLnF1ZXJ5TWFuYWdlci5tYXNrT3BlcmF0aW9uKHtcbiAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLnF1ZXJ5LFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LmRhdGEsXG4gICAgICAgICAgICBmZXRjaFBvbGljeTogdGhpcy5vcHRpb25zLmZldGNoUG9saWN5LFxuICAgICAgICAgICAgY2F1c2U6IHRoaXMsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBNYWludGFpbiBvYmplY3QgaWRlbnRpdHkgYXMgbXVjaCBhcyBwb3NzaWJsZVxuICAgICAgICByZXR1cm4gbWFza2VkID09PSByZXN1bHQuZGF0YSA/IHJlc3VsdCA6IHsgLi4ucmVzdWx0LCBkYXRhOiBtYXNrZWQgfTtcbiAgICB9XG4gICAgZGlydHkgPSBmYWxzZTtcbiAgICBub3RpZnlUaW1lb3V0O1xuICAgIC8qKlxuICAgICogQGludGVybmFsXG4gICAgKiBcbiAgICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiAgICAqL1xuICAgIHJlc2V0Tm90aWZpY2F0aW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMubm90aWZ5VGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubm90aWZ5VGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeVRpbWVvdXQgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBpbnRlcm5hbFxuICAgICogXG4gICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4gICAgKi9cbiAgICBzY2hlZHVsZU5vdGlmeSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlydHkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMubm90aWZ5VGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLm5vdGlmeSh0cnVlKSwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgKiBAaW50ZXJuYWxcbiAgICAqIFxuICAgICogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBBUEkgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gVGhpcyBjYW4gYmUgcmVtb3ZlZCBvciBjaGFuZ2VkIGF0IGFueSB0aW1lLlxuICAgICovXG4gICAgbm90aWZ5KHNjaGVkdWxlZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICghc2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB3aXRoIGNsaWVudCBleHBvcnRzIG9yIGZvcmNlZCByZXNvbHZlcnMsIHdlIGRvbid0IHdhbnQgdG9cbiAgICAgICAgICAgIC8vIHN5bmNocm9ub3VzbHkgcmVvYnNlcnZlIHRoZSBjYWNoZSBvbiBicm9hZGNhc3QsXG4gICAgICAgICAgICAvLyBidXQgYWN0dWFsbHkgd2FpdCBmb3IgdGhlIGBzY2hlZHVsZU5vdGlmeWAgdGltZW91dCB0cmlnZ2VyZWQgYnkgdGhlXG4gICAgICAgICAgICAvLyBgY2FjaGUud2F0Y2hgIGNhbGxiYWNrIGZyb20gYHJlc3Vic2NyaWJlQ2FjaGVgLlxuICAgICAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMucXVlcnlNYW5hZ2VyLmdldERvY3VtZW50SW5mbyh0aGlzLnF1ZXJ5KTtcbiAgICAgICAgICAgIGlmIChpbmZvLmhhc0NsaWVudEV4cG9ydHMgfHwgaW5mby5oYXNGb3JjZWRSZXNvbHZlcnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBkaXJ0eSB9ID0gdGhpcztcbiAgICAgICAgdGhpcy5yZXNldE5vdGlmaWNhdGlvbnMoKTtcbiAgICAgICAgaWYgKGRpcnR5ICYmXG4gICAgICAgICAgICAodGhpcy5vcHRpb25zLmZldGNoUG9saWN5ID09IFwiY2FjaGUtb25seVwiIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZldGNoUG9saWN5ID09IFwiY2FjaGUtYW5kLW5ldHdvcmtcIiB8fFxuICAgICAgICAgICAgICAgICF0aGlzLmFjdGl2ZU9wZXJhdGlvbnMuc2l6ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmdldENhY2hlRGlmZigpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gYGZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb25gIGlzIG5vdCBhdmFpYWJsZSB0aHJvdWdoIHRoZSBgY2FjaGUuZGlmZmBcbiAgICAgICAgICAgIC8vIGNvZGUgcGF0aCwgc28gd2UgbmVlZCB0byBjaGVjayBpdCB0aGlzIHdheVxuICAgICAgICAgICAgZXF1YWwoZGlmZi5yZXN1bHQsIHRoaXMuZ2V0Q2FjaGVEaWZmKHsgb3B0aW1pc3RpYzogZmFsc2UgfSkucmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIC8vSWYgdGhpcyBkaWZmIGRpZCBub3QgY29tZSBmcm9tIGFuIG9wdGltaXN0aWMgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgICAgICAvLyBtYWtlIHRoZSBPYnNlcnZhYmxlUXVlcnkgXCJyZW9ic2VydmVcIiB0aGUgbGF0ZXN0IGRhdGFcbiAgICAgICAgICAgICAgICAvLyB1c2luZyBhIHRlbXBvcmFyeSBmZXRjaCBwb2xpY3kgb2YgXCJjYWNoZS1maXJzdFwiLCBzbyBjb21wbGV0ZSBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIHJlc3VsdHMgaGF2ZSBhIGNoYW5jZSB0byBiZSBkZWxpdmVyZWQgd2l0aG91dCB0cmlnZ2VyaW5nIGFkZGl0aW9uYWxcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIHJlcXVlc3RzLCBldmVuIHdoZW4gb3B0aW9ucy5mZXRjaFBvbGljeSBpcyBcIm5ldHdvcmstb25seVwiXG4gICAgICAgICAgICAgICAgLy8gb3IgXCJjYWNoZS1hbmQtbmV0d29ya1wiLiBBbGwgb3RoZXIgZmV0Y2ggcG9saWNpZXMgYXJlIHByZXNlcnZlZCBieVxuICAgICAgICAgICAgICAgIC8vIHRoaXMgbWV0aG9kLCBhbmQgYXJlIGhhbmRsZWQgYnkgY2FsbGluZyBvcS5yZW9ic2VydmUoKS4gSWYgdGhpc1xuICAgICAgICAgICAgICAgIC8vIHJlb2JzZXJ2YXRpb24gaXMgc3B1cmlvdXMsIGRpc3RpbmN0VW50aWxDaGFuZ2VkIHN0aWxsIGhhcyBhXG4gICAgICAgICAgICAgICAgLy8gY2hhbmNlIHRvIGNhdGNoIGl0IGJlZm9yZSBkZWxpdmVyeSB0byBPYnNlcnZhYmxlUXVlcnkgc3Vic2NyaWJlcnMuXG4gICAgICAgICAgICAgICAgdGhpcy5yZW9ic2VydmVDYWNoZUZpcnN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGRpZmYgY2FtZSBmcm9tIGFuIG9wdGltaXN0aWMgdHJhbnNhY3Rpb24sIGRlbGl2ZXIgdGhlXG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCBjYWNoZSBkYXRhIHRvIHRoZSBPYnNlcnZhYmxlUXVlcnksIGJ1dCBkb24ndCBwZXJmb3JtIGFcbiAgICAgICAgICAgICAgICAvLyByZW9ic2VydmF0aW9uLCBzaW5jZSBvcS5yZW9ic2VydmVDYWNoZUZpcnN0IG1pZ2h0IG1ha2UgYSBuZXR3b3JrXG4gICAgICAgICAgICAgICAgLy8gcmVxdWVzdCwgYW5kIHdlIG5ldmVyIHdhbnQgdG8gdHJpZ2dlciBuZXR3b3JrIHJlcXVlc3RzIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIG1pZGRsZSBvZiBvcHRpbWlzdGljIHVwZGF0ZXMuXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5uZXh0KHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogXCJOXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkaWZmLnJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdGF0ZTogZGlmZi5jb21wbGV0ZSA/IFwiY29tcGxldGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZGlmZi5yZXN1bHQgPyBcInBhcnRpYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiZW1wdHlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtTdGF0dXM6IE5ldHdvcmtTdGF0dXMucmVhZHksXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsOiAhZGlmZi5jb21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBcImNhY2hlXCIsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICBtZXRhOiB7fSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhY3RpdmVPcGVyYXRpb25zID0gbmV3IFNldCgpO1xuICAgIHB1c2hPcGVyYXRpb24obmV0d29ya1N0YXR1cykge1xuICAgICAgICBsZXQgYWJvcnRlZCA9IGZhbHNlO1xuICAgICAgICAvLyB0cmFjayBxdWVyeSBhbmQgdmFyaWFibGVzIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBvcGVyYXRpb25cbiAgICAgICAgY29uc3QgeyBxdWVyeSwgdmFyaWFibGVzIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBmaW5hbGl6ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlT3BlcmF0aW9ucy5kZWxldGUob3BlcmF0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0ge1xuICAgICAgICAgICAgb3ZlcnJpZGU6IG5ldHdvcmtTdGF0dXMsXG4gICAgICAgICAgICBhYm9ydDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZpbmFsaXplKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWN0aXZlT3BlcmF0aW9ucy5hZGQob3BlcmF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbmFsaXplLFxuICAgICAgICAgICAgcHVzaE5vdGlmaWNhdGlvbjogKG5vdGlmaWNhdGlvbiwgYWRkaXRpb25hbE1ldGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5uZXh0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm5vdGlmaWNhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YTogeyAuLi5hZGRpdGlvbmFsTWV0YSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYWxjdWxhdGVOZXR3b3JrU3RhdHVzKGJhc2VOZXR3b3JrU3RhdHVzKSB7XG4gICAgICAgIGlmIChiYXNlTmV0d29ya1N0YXR1cyA9PT0gTmV0d29ya1N0YXR1cy5zdHJlYW1pbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBiYXNlTmV0d29ya1N0YXR1cztcbiAgICAgICAgfVxuICAgICAgICAvLyBpbiB0aGUgZnV0dXJlLCB0aGlzIGNvdWxkIGJlIG1vcmUgY29tcGxleCBsb2dpYywgZS5nLiBcInJlZmV0Y2hcIiBhbmRcbiAgICAgICAgLy8gXCJmZXRjaE1vcmVcIiBoYXZpbmcgcHJpb3JpdHkgb3ZlciBcInBvbGxpbmdcIiBvciBcImxvYWRpbmdcIiBuZXR3b3JrIHN0YXR1c2VzXG4gICAgICAgIC8vIGFzIGZvciBub3cgd2UganVzdCB0YWtlIHRoZSBcImxhdGVzdFwiIG9wZXJhdGlvbiB0aGF0IGlzIHN0aWxsIGFjdGl2ZSxcbiAgICAgICAgLy8gYXMgdGhhdCBsaW5lcyB1cCBiZXN0IHdpdGggcHJldmlvdXMgYmVoYXZpb3JbXVxuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBBcnJheS5mcm9tKHRoaXMuYWN0aXZlT3BlcmF0aW9ucy52YWx1ZXMoKSkuZmluZExhc3QoKG9wZXJhdGlvbikgPT4gaXNFcXVhbFF1ZXJ5KG9wZXJhdGlvbiwgdGhpcykgJiYgb3BlcmF0aW9uLm92ZXJyaWRlICE9PSB1bmRlZmluZWQpO1xuICAgICAgICByZXR1cm4gb3BlcmF0aW9uPy5vdmVycmlkZSA/PyBiYXNlTmV0d29ya1N0YXR1cztcbiAgICB9XG4gICAgYWJvcnRBY3RpdmVPcGVyYXRpb25zKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZU9wZXJhdGlvbnMuZm9yRWFjaCgob3BlcmF0aW9uKSA9PiBvcGVyYXRpb24uYWJvcnQoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICogQGludGVybmFsXG4gICAgKiBDYWxsZWQgZnJvbSBgY2xlYXJTdG9yZWAuXG4gICAgKlxuICAgICogLSByZXNldHMgdGhlIHF1ZXJ5IHRvIGl0cyBpbml0aWFsIHN0YXRlXG4gICAgKiAtIGNhbmNlbHMgYWxsIGFjdGl2ZSBvcGVyYXRpb25zIGFuZCB0aGVpciBzdWJzY3JpcHRpb25zXG4gICAgKiBcbiAgICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuIFRoaXMgY2FuIGJlIHJlbW92ZWQgb3IgY2hhbmdlZCBhdCBhbnkgdGltZS5cbiAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICAvLyBleGNlcHRpb24gZm9yIGNhY2hlLW9ubHkgcXVlcmllcyAtIHdlIHJlc2V0IHRoZW0gaW50byBhIFwicmVhZHlcIiBzdGF0ZVxuICAgICAgICAvLyBhcyB3ZSB3b24ndCB0cmlnZ2VyIGEgcmVmZXRjaCBmb3IgdGhlbVxuICAgICAgICBjb25zdCByZXNldFRvRW1wdHkgPSB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09IFwiY2FjaGUtb25seVwiO1xuICAgICAgICB0aGlzLnNldFJlc3VsdChyZXNldFRvRW1wdHkgPyBlbXB0eSA6IHVuaW5pdGlhbGl6ZWQsIHtcbiAgICAgICAgICAgIHNob3VsZEVtaXQ6IHJlc2V0VG9FbXB0eSA/IDEgLyogRW1pdEJlaGF2aW9yLmZvcmNlICovIDogMiAvKiBFbWl0QmVoYXZpb3IubmV2ZXIgKi8sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFib3J0QWN0aXZlT3BlcmF0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEBpbnRlcm5hbFxuICAgICogXG4gICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4gICAgKi9cbiAgICBzZXRSZXN1bHQocmVzdWx0LCBhZGRpdGlvbmFsTWV0YSkge1xuICAgICAgICB0aGlzLmlucHV0Lm5leHQoe1xuICAgICAgICAgICAgc291cmNlOiBcInNldFJlc3VsdFwiLFxuICAgICAgICAgICAga2luZDogXCJOXCIsXG4gICAgICAgICAgICB2YWx1ZTogcmVzdWx0LFxuICAgICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnksXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLFxuICAgICAgICAgICAgbWV0YTogeyAuLi5hZGRpdGlvbmFsTWV0YSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb3BlcmF0b3IgPSBmaWx0ZXJNYXAoKG5vdGlmaWNhdGlvbikgPT4ge1xuICAgICAgICBjb25zdCB7IHF1ZXJ5LCB2YXJpYWJsZXMsIG1ldGEgfSA9IG5vdGlmaWNhdGlvbjtcbiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi5zb3VyY2UgPT09IFwic2V0UmVzdWx0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHF1ZXJ5LCB2YXJpYWJsZXMsIHJlc3VsdDogbm90aWZpY2F0aW9uLnZhbHVlLCBtZXRhIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi5raW5kID09PSBcIkNcIiB8fCAhaXNFcXVhbFF1ZXJ5KG5vdGlmaWNhdGlvbiwgdGhpcykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBjb25zdCBwcmV2aW91cyA9IHRoaXMuc3ViamVjdC5nZXRWYWx1ZSgpO1xuICAgICAgICBpZiAobm90aWZpY2F0aW9uLnNvdXJjZSA9PT0gXCJjYWNoZVwiKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBub3RpZmljYXRpb24udmFsdWU7XG4gICAgICAgICAgICBpZiAocmVzdWx0Lm5ldHdvcmtTdGF0dXMgPT09IE5ldHdvcmtTdGF0dXMucmVhZHkgJiZcbiAgICAgICAgICAgICAgICByZXN1bHQucGFydGlhbCAmJlxuICAgICAgICAgICAgICAgICghdGhpcy5vcHRpb25zLnJldHVyblBhcnRpYWxEYXRhIHx8XG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzLnJlc3VsdC5uZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLmVycm9yKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mZXRjaFBvbGljeSAhPT0gXCJjYWNoZS1vbmx5XCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm90aWZpY2F0aW9uLnNvdXJjZSA9PT0gXCJuZXR3b3JrXCIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndhaXRGb3JOZXR3b3JrUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy53YWl0Rm9yTmV0d29ya1Jlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdWJzY3JpYmVDYWNoZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ID1cbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb24ua2luZCA9PT0gXCJFXCIgP1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oaXNFcXVhbFF1ZXJ5KHByZXZpb3VzLCBub3RpZmljYXRpb24pID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91cy5yZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHsgZGF0YTogdW5kZWZpbmVkLCBkYXRhU3RhdGU6IFwiZW1wdHlcIiwgcGFydGlhbDogdHJ1ZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBub3RpZmljYXRpb24uZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrU3RhdHVzOiBOZXR3b3JrU3RhdHVzLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiBub3RpZmljYXRpb24udmFsdWU7XG4gICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uLmtpbmQgPT09IFwiRVwiICYmIHJlc3VsdC5kYXRhU3RhdGUgPT09IFwic3RyZWFtaW5nXCIpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZGF0YVN0YXRlID0gXCJjb21wbGV0ZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICAgICAgICAgIG1ldGEuc2hvdWxkRW1pdCA9IDEgLyogRW1pdEJlaGF2aW9yLmZvcmNlICovO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vdGlmaWNhdGlvbi5zb3VyY2UgPT09IFwibmV3TmV0d29ya1N0YXR1c1wiKSB7XG4gICAgICAgICAgICBjb25zdCBiYXNlUmVzdWx0ID0gaXNFcXVhbFF1ZXJ5KHByZXZpb3VzLCBub3RpZmljYXRpb24pID9cbiAgICAgICAgICAgICAgICBwcmV2aW91cy5yZXN1bHRcbiAgICAgICAgICAgICAgICA6IHRoaXMuZ2V0SW5pdGlhbFJlc3VsdChtZXRhLmZldGNoUG9saWN5KTtcbiAgICAgICAgICAgIGNvbnN0IHsgcmVzZXRFcnJvciB9ID0gbm90aWZpY2F0aW9uLnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSByZXNldEVycm9yID8gdW5kZWZpbmVkIDogYmFzZVJlc3VsdC5lcnJvcjtcbiAgICAgICAgICAgIGNvbnN0IG5ldHdvcmtTdGF0dXMgPSBlcnJvciA/IE5ldHdvcmtTdGF0dXMuZXJyb3IgOiBOZXR3b3JrU3RhdHVzLnJlYWR5O1xuICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIC4uLmJhc2VSZXN1bHQsXG4gICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgbmV0d29ya1N0YXR1cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXZlcnkgY29kZSBwYXRoIHVudGlsIGhlcmUgc2hvdWxkIGhhdmUgZWl0aGVyIHJldHVybmVkIG9yIHNldCBhIHJlc3VsdCxcbiAgICAgICAgLy8gYnV0IHR5cGVzY3JpcHQgbmVlZHMgYSBsaXR0bGUgaGVscFxuICAgICAgICBpbnZhcmlhbnQocmVzdWx0KTtcbiAgICAgICAgLy8gbm9ybWFsaXplIHJlc3VsdCBzaGFwZVxuICAgICAgICBpZiAoIXJlc3VsdC5lcnJvcilcbiAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuZXJyb3I7XG4gICAgICAgIHJlc3VsdC5uZXR3b3JrU3RhdHVzID0gdGhpcy5jYWxjdWxhdGVOZXR3b3JrU3RhdHVzKHJlc3VsdC5uZXR3b3JrU3RhdHVzKTtcbiAgICAgICAgcmVzdWx0LmxvYWRpbmcgPSBpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQocmVzdWx0Lm5ldHdvcmtTdGF0dXMpO1xuICAgICAgICByZXN1bHQgPSB0aGlzLm1hc2tSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgcmV0dXJuIHsgcXVlcnksIHZhcmlhYmxlcywgcmVzdWx0LCBtZXRhIH07XG4gICAgfSk7XG4gICAgLy8gUmVvYnNlcnZlIHdpdGggZmV0Y2hQb2xpY3kgZWZmZWN0aXZlbHkgc2V0IHRvIFwiY2FjaGUtZmlyc3RcIiwgdHJpZ2dlcmluZ1xuICAgIC8vIGRlbGl2ZXJ5IG9mIGFueSBuZXcgZGF0YSBmcm9tIHRoZSBjYWNoZSwgcG9zc2libHkgZmFsbGluZyBiYWNrIHRvIHRoZSBuZXR3b3JrXG4gICAgLy8gaWYgYW55IGNhY2hlIGRhdGEgYXJlIG1pc3NpbmcuIFRoaXMgYWxsb3dzIF9jb21wbGV0ZV8gY2FjaGUgcmVzdWx0cyB0byBiZVxuICAgIC8vIGRlbGl2ZXJlZCB3aXRob3V0IGFsc28ga2lja2luZyBvZmYgdW5uZWNlc3NhcnkgbmV0d29yayByZXF1ZXN0cyB3aGVuXG4gICAgLy8gdGhpcy5vcHRpb25zLmZldGNoUG9saWN5IGlzIFwiY2FjaGUtYW5kLW5ldHdvcmtcIiBvciBcIm5ldHdvcmstb25seVwiLiBXaGVuXG4gICAgLy8gdGhpcy5vcHRpb25zLmZldGNoUG9saWN5IGlzIGFueSBvdGhlciBwb2xpY3kgKFwiY2FjaGUtZmlyc3RcIiwgXCJjYWNoZS1vbmx5XCIsXG4gICAgLy8gXCJzdGFuZGJ5XCIsIG9yIFwibm8tY2FjaGVcIiksIHdlIGNhbGwgdGhpcy5yZW9ic2VydmUoKSBhcyB1c3VhbC5cbiAgICByZW9ic2VydmVDYWNoZUZpcnN0KCkge1xuICAgICAgICBjb25zdCB7IGZldGNoUG9saWN5LCBuZXh0RmV0Y2hQb2xpY3kgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgaWYgKGZldGNoUG9saWN5ID09PSBcImNhY2hlLWFuZC1uZXR3b3JrXCIgfHwgZmV0Y2hQb2xpY3kgPT09IFwibmV0d29yay1vbmx5XCIpIHtcbiAgICAgICAgICAgIHRoaXMucmVvYnNlcnZlKHtcbiAgICAgICAgICAgICAgICBmZXRjaFBvbGljeTogXCJjYWNoZS1maXJzdFwiLFxuICAgICAgICAgICAgICAgIC8vIFVzZSBhIHRlbXBvcmFyeSBuZXh0RmV0Y2hQb2xpY3kgZnVuY3Rpb24gdGhhdCByZXBsYWNlcyBpdHNlbGYgd2l0aCB0aGVcbiAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyBuZXh0RmV0Y2hQb2xpY3kgdmFsdWUgYW5kIHJldHVybnMgdGhlIG9yaWdpbmFsIGZldGNoUG9saWN5LlxuICAgICAgICAgICAgICAgIG5leHRGZXRjaFBvbGljeShjdXJyZW50RmV0Y2hQb2xpY3ksIGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGlzIG5leHRGZXRjaFBvbGljeSBmdW5jdGlvbiBpbiB0aGUgb3B0aW9ucyBvYmplY3Qgd2l0aCB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gb3JpZ2luYWwgdGhpcy5vcHRpb25zLm5leHRGZXRjaFBvbGljeSB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0RmV0Y2hQb2xpY3kgPSBuZXh0RmV0Y2hQb2xpY3k7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBvcmlnaW5hbCBuZXh0RmV0Y2hQb2xpY3kgdmFsdWUgd2FzIGEgZnVuY3Rpb24sIGdpdmUgaXQgYVxuICAgICAgICAgICAgICAgICAgICAvLyBjaGFuY2UgdG8gZGVjaWRlIHdoYXQgaGFwcGVucyBoZXJlLlxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMubmV4dEZldGNoUG9saWN5ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRGZXRjaFBvbGljeShjdXJyZW50RmV0Y2hQb2xpY3ksIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBnbyBiYWNrIHRvIHRoZSBvcmlnaW5hbCB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3kuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaFBvbGljeTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlb2JzZXJ2ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFZhcmlhYmxlc1dpdGhEZWZhdWx0cyh2YXJpYWJsZXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLmdldFZhcmlhYmxlcyh0aGlzLnF1ZXJ5LCB2YXJpYWJsZXMpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBsb2dNaXNzaW5nRmllbGRFcnJvcnMobWlzc2luZykge1xuICAgIGlmIChfX0RFVl9fICYmIG1pc3NpbmcpIHtcbiAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQuZGVidWcoODIsIG1pc3NpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzRXF1YWxRdWVyeShhLCBiKSB7XG4gICAgcmV0dXJuICEhKGEgJiYgYiAmJiBhLnF1ZXJ5ID09PSBiLnF1ZXJ5ICYmIGVxdWFsKGEudmFyaWFibGVzLCBiLnZhcmlhYmxlcykpO1xufVxuZnVuY3Rpb24gZ2V0VHJhY2tpbmdPcGVyYXRvclByb21pc2UoZmlsdGVyTWFwQ2IsIGRlZmF1bHRWYWx1ZSkge1xuICAgIGxldCBsYXN0VmFsdWUgPSBkZWZhdWx0VmFsdWUsIHJlc29sdmUsIHJlamVjdDtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICAgIHJlc29sdmUgPSByZXM7XG4gICAgICAgIHJlamVjdCA9IHJlajtcbiAgICB9KTtcbiAgICBjb25zdCBvcGVyYXRvciA9IHRhcCh7XG4gICAgICAgIG5leHQodmFsdWUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBmaWx0ZXJNYXBDYih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZmluYWxpemU6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChsYXN0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGxhc3RWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gXCJUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgICAgICAgICAgICAgICByZWplY3QodHlwZW9mIERPTUV4Y2VwdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiA/XG4gICAgICAgICAgICAgICAgICAgIG5ldyBET01FeGNlcHRpb24obWVzc2FnZSwgbmFtZSlcbiAgICAgICAgICAgICAgICAgICAgLy8gc29tZSBlbnZpcm9ubWVudHMgZG8gbm90IGhhdmUgYERPTUV4Y2VwdGlvbmAsIGUuZy4gbm9kZVxuICAgICAgICAgICAgICAgICAgICAvLyB1c2VzIGEgbm9ybWFsIGBFcnJvcmAgd2l0aCBhIGBuYW1lYCBwcm9wZXJ0eSBpbnN0ZWFkOiBodHRwczovL2dpdGh1Yi5jb20vcGhyeW5lYXMvbm9kZS9ibG9iL2QwNTc5YjY0ZjBmNmI3MjJmOGU0OWJmOGE0NzFkZDBkMDYwNGEyMWUvbGliL2ludGVybmFsL2Vycm9ycy5qcyNMOTY0XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLmNvZGUgaXMgYSBsZWdhY3kgcHJvcGVydHkgdGhhdCBpcyBub3QgdXNlZCBhbnltb3JlLFxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgYWxzbyBpbmNvbnNpc3RlbnQgYWNyb3NzIGVudmlyb25tZW50cyAoaW4gc3VwcG9ydGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBicm93c2VycyBpdCBpcyBgMjBgLCBpbiBub2RlIGAnQUJPUlRfRVJSJ2ApIHNvIHdlIG9taXQgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgOiBPYmplY3QuYXNzaWduKG5ldyBFcnJvcihtZXNzYWdlKSwgeyBuYW1lIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4geyBwcm9taXNlLCBvcGVyYXRvciB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JzZXJ2YWJsZVF1ZXJ5LmpzLm1hcFxuIiwKICAgICJpbXBvcnQgeyBlcXVhbCB9IGZyb20gXCJAd3J5L2VxdWFsaXR5XCI7XG5pbXBvcnQgeyBnZXRPcGVyYXRpb25OYW1lLCBncmFwaFFMUmVzdWx0SGFzRXJyb3IsIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnRlcm5hbFwiO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9pbnZhcmlhbnRcIjtcbmNvbnN0IElHTk9SRSA9IHt9O1xuY29uc3QgZGVzdHJ1Y3RpdmVNZXRob2RDb3VudHMgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gd3JhcERlc3RydWN0aXZlQ2FjaGVNZXRob2QoY2FjaGUsIG1ldGhvZE5hbWUpIHtcbiAgICBjb25zdCBvcmlnaW5hbCA9IGNhY2hlW21ldGhvZE5hbWVdO1xuICAgIGlmICh0eXBlb2Ygb3JpZ2luYWwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRoaXMgaXMganVzdCB0b28gZ2VuZXJpYyB0byBiZSB0eXBlZCBjb3JyZWN0bHlcbiAgICAgICAgY2FjaGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5zZXQoY2FjaGUsIFxuICAgICAgICAgICAgLy8gVGhlICUxZTE1IGFsbG93cyB0aGUgY291bnQgdG8gd3JhcCBhcm91bmQgdG8gMCBzYWZlbHkgZXZlcnlcbiAgICAgICAgICAgIC8vIHF1YWRyaWxsaW9uIGV2aWN0aW9ucywgc28gdGhlcmUncyBubyByaXNrIG9mIG92ZXJmbG93LiBUbyBiZVxuICAgICAgICAgICAgLy8gY2xlYXIsIHRoaXMgaXMgbW9yZSBvZiBhIHBlZGFudGljIHByaW5jaXBsZSB0aGFuIHNvbWV0aGluZ1xuICAgICAgICAgICAgLy8gdGhhdCBtYXR0ZXJzIGluIGFueSBjb25jZWl2YWJsZSBwcmFjdGljYWwgc2NlbmFyaW8uXG4gICAgICAgICAgICAoZGVzdHJ1Y3RpdmVNZXRob2RDb3VudHMuZ2V0KGNhY2hlKSArIDEpICUgMWUxNSk7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRoaXMgaXMganVzdCB0b28gZ2VuZXJpYyB0byBiZSB0eXBlZCBjb3JyZWN0bHlcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH1cbn1cbmNvbnN0IHF1ZXJ5SW5mb0lkcyA9IG5ldyBXZWFrTWFwKCk7XG4vLyBBIFF1ZXJ5SW5mbyBvYmplY3QgcmVwcmVzZW50cyBhIHNpbmdsZSBuZXR3b3JrIHJlcXVlc3QsIGVpdGhlciBpbml0aWF0ZWRcbi8vIGZyb20gdGhlIFF1ZXJ5TWFuYWdlciBvciBmcm9tIGFuIE9ic2VydmFibGVRdWVyeS5cbi8vIEl0IHdpbGwgb25seSBldmVyIGJlIHVzZWQgZm9yIGEgc2luZ2xlIG5ldHdvcmsgY2FsbC5cbi8vIEl0IGlzIHJlc3BvbnNpYmxlIGZvciByZXBvcnRpbmcgcmVzdWx0cyB0byB0aGUgY2FjaGUsIG1lcmdpbmcgYW5kIGluIGEgbm8tY2FjaGVcbi8vIHNjZW5hcmlvIGFjY3VtdWxhdGluZyB0aGUgcmVzcG9uc2UuXG5leHBvcnQgY2xhc3MgUXVlcnlJbmZvIHtcbiAgICAvLyBUT0RPIHJlbW92ZSBzb29uIC0gdGhpcyBzaG91bGQgYmUgYWJsZSB0byBiZSBoYW5kbGVkIGJ5IGNhbmNlbGxpbmcgb2xkIG9wZXJhdGlvbnMgYmVmb3JlIHN0YXJ0aW5nIG5ldyBvbmVzXG4gICAgbGFzdFJlcXVlc3RJZCA9IDE7XG4gICAgY2FjaGU7XG4gICAgcXVlcnlNYW5hZ2VyO1xuICAgIGlkO1xuICAgIG9ic2VydmFibGVRdWVyeTtcbiAgICBpbmNyZW1lbnRhbDtcbiAgICBjb25zdHJ1Y3RvcihxdWVyeU1hbmFnZXIsIG9ic2VydmFibGVRdWVyeSkge1xuICAgICAgICBjb25zdCBjYWNoZSA9ICh0aGlzLmNhY2hlID0gcXVlcnlNYW5hZ2VyLmNhY2hlKTtcbiAgICAgICAgY29uc3QgaWQgPSAocXVlcnlJbmZvSWRzLmdldChxdWVyeU1hbmFnZXIpIHx8IDApICsgMTtcbiAgICAgICAgcXVlcnlJbmZvSWRzLnNldChxdWVyeU1hbmFnZXIsIGlkKTtcbiAgICAgICAgdGhpcy5pZCA9IGlkICsgXCJcIjtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlUXVlcnkgPSBvYnNlcnZhYmxlUXVlcnk7XG4gICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyID0gcXVlcnlNYW5hZ2VyO1xuICAgICAgICAvLyBUcmFjayBob3cgb2Z0ZW4gY2FjaGUuZXZpY3QgaXMgY2FsbGVkLCBzaW5jZSB3ZSB3YW50IGV2aWN0aW9uIHRvXG4gICAgICAgIC8vIG92ZXJyaWRlIHRoZSBmZXVkLXN0b3BwaW5nIGxvZ2ljIGluIHRoZSBtYXJrUXVlcnlSZXN1bHQgbWV0aG9kLCBieVxuICAgICAgICAvLyBjYXVzaW5nIHNob3VsZFdyaXRlIHRvIHJldHVybiB0cnVlLiBXcmFwcGluZyB0aGUgY2FjaGUuZXZpY3QgbWV0aG9kXG4gICAgICAgIC8vIGlzIGEgYml0IG9mIGEgaGFjaywgYnV0IGl0IHNhdmVzIHVzIGZyb20gaGF2aW5nIHRvIG1ha2UgZXZpY3Rpb25cbiAgICAgICAgLy8gY291bnRpbmcgYW4gb2ZmaWNpYWwgcGFydCBvZiB0aGUgQXBvbGxvQ2FjaGUgQVBJLlxuICAgICAgICBpZiAoIWRlc3RydWN0aXZlTWV0aG9kQ291bnRzLmhhcyhjYWNoZSkpIHtcbiAgICAgICAgICAgIGRlc3RydWN0aXZlTWV0aG9kQ291bnRzLnNldChjYWNoZSwgMCk7XG4gICAgICAgICAgICB3cmFwRGVzdHJ1Y3RpdmVDYWNoZU1ldGhvZChjYWNoZSwgXCJldmljdFwiKTtcbiAgICAgICAgICAgIHdyYXBEZXN0cnVjdGl2ZUNhY2hlTWV0aG9kKGNhY2hlLCBcIm1vZGlmeVwiKTtcbiAgICAgICAgICAgIHdyYXBEZXN0cnVjdGl2ZUNhY2hlTWV0aG9kKGNhY2hlLCBcInJlc2V0XCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICogQGludGVybmFsXG4gICAgKiBGb3IgZmV1ZC1wcmV2ZW50aW5nIGJlaGF2aW91ciwgYGxhc3RXcml0ZWAgc2hvdWxkIGJlIHNoYXJlZCBieSBhbGwgYFF1ZXJ5SW5mb2AgaW5zdGFuY2VzIG9mIGFuIGBPYnNlcnZhYmxlUXVlcnlgLlxuICAgICogSW4gdGhlIGNhc2Ugb2YgYSBzdGFuZGFsb25lIGBRdWVyeUluZm9gLCB3ZSB3aWxsIGtlZXAgYSBsb2NhbCB2ZXJzaW9uLlxuICAgICogXG4gICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIEFQSSBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5LiBUaGlzIGNhbiBiZSByZW1vdmVkIG9yIGNoYW5nZWQgYXQgYW55IHRpbWUuXG4gICAgKi9cbiAgICBfbGFzdFdyaXRlO1xuICAgIGdldCBsYXN0V3JpdGUoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5vYnNlcnZhYmxlUXVlcnkgfHwgdGhpcykuX2xhc3RXcml0ZTtcbiAgICB9XG4gICAgc2V0IGxhc3RXcml0ZSh2YWx1ZSkge1xuICAgICAgICAodGhpcy5vYnNlcnZhYmxlUXVlcnkgfHwgdGhpcykuX2xhc3RXcml0ZSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXNldExhc3RXcml0ZSgpIHtcbiAgICAgICAgdGhpcy5sYXN0V3JpdGUgPSB2b2lkIDA7XG4gICAgfVxuICAgIHNob3VsZFdyaXRlKHJlc3VsdCwgdmFyaWFibGVzKSB7XG4gICAgICAgIGNvbnN0IHsgbGFzdFdyaXRlIH0gPSB0aGlzO1xuICAgICAgICByZXR1cm4gIShsYXN0V3JpdGUgJiZcbiAgICAgICAgICAgIC8vIElmIGNhY2hlLmV2aWN0IGhhcyBiZWVuIGNhbGxlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHdlIHdyb3RlIHRoaXNcbiAgICAgICAgICAgIC8vIGRhdGEgaW50byB0aGUgY2FjaGUsIHRoZXJlJ3MgYSBjaGFuY2Ugd3JpdGluZyB0aGlzIHJlc3VsdCBpbnRvXG4gICAgICAgICAgICAvLyB0aGUgY2FjaGUgd2lsbCByZXBhaXIgd2hhdCB3YXMgZXZpY3RlZC5cbiAgICAgICAgICAgIGxhc3RXcml0ZS5kbUNvdW50ID09PSBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5nZXQodGhpcy5jYWNoZSkgJiZcbiAgICAgICAgICAgIGVxdWFsKHZhcmlhYmxlcywgbGFzdFdyaXRlLnZhcmlhYmxlcykgJiZcbiAgICAgICAgICAgIGVxdWFsKHJlc3VsdC5kYXRhLCBsYXN0V3JpdGUucmVzdWx0LmRhdGEpKTtcbiAgICB9XG4gICAgZ2V0IGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluY3JlbWVudGFsID8gdGhpcy5pbmNyZW1lbnRhbC5oYXNOZXh0IDogZmFsc2U7XG4gICAgfVxuICAgIG1heWJlSGFuZGxlSW5jcmVtZW50YWxSZXN1bHQoY2FjaGVEYXRhLCBpbmNvbWluZywgcXVlcnkpIHtcbiAgICAgICAgY29uc3QgeyBpbmNyZW1lbnRhbEhhbmRsZXIgfSA9IHRoaXMucXVlcnlNYW5hZ2VyO1xuICAgICAgICBpZiAoaW5jcmVtZW50YWxIYW5kbGVyLmlzSW5jcmVtZW50YWxSZXN1bHQoaW5jb21pbmcpKSB7XG4gICAgICAgICAgICB0aGlzLmluY3JlbWVudGFsIHx8PSBpbmNyZW1lbnRhbEhhbmRsZXIuc3RhcnRSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50YWwuaGFuZGxlKGNhY2hlRGF0YSwgaW5jb21pbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNvbWluZztcbiAgICB9XG4gICAgbWFya1F1ZXJ5UmVzdWx0KGluY29taW5nLCB7IGRvY3VtZW50OiBxdWVyeSwgdmFyaWFibGVzLCBlcnJvclBvbGljeSwgY2FjaGVXcml0ZUJlaGF2aW9yLCB9KSB7XG4gICAgICAgIGNvbnN0IGRpZmZPcHRpb25zID0ge1xuICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgIG9wdGltaXN0aWM6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIC8vIENhbmNlbCB0aGUgcGVuZGluZyBub3RpZnkgdGltZW91dCAoaWYgaXQgZXhpc3RzKSB0byBwcmV2ZW50IGV4dHJhbmVvdXMgbmV0d29ya1xuICAgICAgICAvLyByZXF1ZXN0cy4gVG8gYWxsb3cgZnV0dXJlIG5vdGlmeSB0aW1lb3V0cywgZGlmZiBhbmQgZGlydHkgYXJlIHJlc2V0IGFzIHdlbGwuXG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZVF1ZXJ5Py5bXCJyZXNldE5vdGlmaWNhdGlvbnNcIl0oKTtcbiAgICAgICAgY29uc3Qgc2tpcENhY2hlID0gY2FjaGVXcml0ZUJlaGF2aW9yID09PSAwIC8qIENhY2hlV3JpdGVCZWhhdmlvci5GT1JCSUQgKi87XG4gICAgICAgIGNvbnN0IGxhc3REaWZmID0gc2tpcENhY2hlID8gdW5kZWZpbmVkIDogdGhpcy5jYWNoZS5kaWZmKGRpZmZPcHRpb25zKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMubWF5YmVIYW5kbGVJbmNyZW1lbnRhbFJlc3VsdChsYXN0RGlmZj8ucmVzdWx0LCBpbmNvbWluZywgcXVlcnkpO1xuICAgICAgICBpZiAoc2tpcENhY2hlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRXcml0ZVJlc3VsdChyZXN1bHQsIGVycm9yUG9saWN5KSkge1xuICAgICAgICAgICAgLy8gVXNpbmcgYSB0cmFuc2FjdGlvbiBoZXJlIHNvIHdlIGhhdmUgYSBjaGFuY2UgdG8gcmVhZCB0aGUgcmVzdWx0XG4gICAgICAgICAgICAvLyBiYWNrIGZyb20gdGhlIGNhY2hlIGJlZm9yZSB0aGUgd2F0Y2ggY2FsbGJhY2sgZmlyZXMgYXMgYSByZXN1bHRcbiAgICAgICAgICAgIC8vIG9mIHdyaXRlUXVlcnksIHNvIHdlIGNhbiBzdG9yZSB0aGUgbmV3IGRpZmYgcXVpZXRseSBhbmQgaWdub3JlXG4gICAgICAgICAgICAvLyBpdCB3aGVuIHdlIHJlY2VpdmUgaXQgcmVkdW5kYW50bHkgZnJvbSB0aGUgd2F0Y2ggY2FsbGJhY2suXG4gICAgICAgICAgICB0aGlzLmNhY2hlLmJhdGNoKHtcbiAgICAgICAgICAgICAgICBvbldhdGNoVXBkYXRlZDogKFxuICAgICAgICAgICAgICAgIC8vIGFsbCBhZGRpdGlvbmFsIG9wdGlvbnMgb24gT2JzZXJ2YWJsZVF1ZXJ5LkNhY2hlV2F0Y2hPcHRpb25zIGFyZVxuICAgICAgICAgICAgICAgIC8vIG9wdGlvbmFsIHNvIHdlIGNhbiB1c2UgdGhlIHR5cGUgaGVyZVxuICAgICAgICAgICAgICAgIHdhdGNoLCBkaWZmKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaC53YXRjaGVyID09PSB0aGlzLm9ic2VydmFibGVRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VlIGNvbW1lbnQgb24gYGxhc3RPd25EaWZmYCBmb3IgZXhwbGFuYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoLmxhc3RPd25EaWZmID0gZGlmZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXBkYXRlOiAoY2FjaGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkV3JpdGUocmVzdWx0LCB2YXJpYWJsZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS53cml0ZVF1ZXJ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcndyaXRlOiBjYWNoZVdyaXRlQmVoYXZpb3IgPT09IDEgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLk9WRVJXUklURSAqLyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbUNvdW50OiBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5nZXQodGhpcy5jYWNoZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgcmVzdWx0IGlzIHRoZSBzYW1lIGFzIHRoZSBsYXN0IHJlc3VsdCB3ZSByZWNlaXZlZCBmcm9tXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbmV0d29yayAoYW5kIHRoZSB2YXJpYWJsZXMgbWF0Y2ggdG9vKSwgYXZvaWQgd3JpdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IGludG8gdGhlIGNhY2hlIGFnYWluLiBUaGUgd2lzZG9tIG9mIHNraXBwaW5nIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhY2hlIHdyaXRlIGlzIGZhciBmcm9tIG9idmlvdXMsIHNpbmNlIGFueSBjYWNoZSB3cml0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY291bGQgYmUgdGhlIG9uZSB0aGF0IHB1dHMgdGhlIGNhY2hlIGJhY2sgaW50byBhIGRlc2lyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXRlLCBmaXhpbmcgY29ycnVwdGlvbiBvciBtaXNzaW5nIGRhdGEuIEhvd2V2ZXIsIGlmIHdlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbHdheXMgd3JpdGUgZXZlcnkgbmV0d29yayByZXN1bHQgaW50byB0aGUgY2FjaGUsIHdlIGVuYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmV1ZHMgYmV0d2VlbiBxdWVyaWVzIGNvbXBldGluZyB0byB1cGRhdGUgdGhlIHNhbWUgZGF0YSBpblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5jb21wYXRpYmxlIHdheXMsIHdoaWNoIGNhbiBsZWFkIHRvIGFuIGVuZGxlc3MgY3ljbGUgb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhY2hlIGJyb2FkY2FzdHMgYW5kIHVzZWxlc3MgbmV0d29yayByZXF1ZXN0cy4gQXMgd2l0aCBhbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZldWQsIGV2ZW50dWFsbHkgb25lIHNpZGUgbXVzdCBzdGVwIGJhY2sgZnJvbSB0aGUgYnJpbmssXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXR0aW5nIHRoZSBvdGhlciBzaWRlKHMpIGhhdmUgdGhlIGxhc3Qgd29yZChzKS4gVGhlcmUgbWF5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZSBvdGhlciBwb2ludHMgd2hlcmUgd2UgY291bGQgYnJlYWsgdGhpcyBjeWNsZSwgc3VjaCBhc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2lsZW5jaW5nIHRoZSBicm9hZGNhc3QgZm9yIGNhY2hlLndyaXRlUXVlcnkgKG5vdCBhIGdvb2RcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlkZWEsIHNpbmNlIGl0IGp1c3QgZGVsYXlzIHRoZSBmZXVkIGEgYml0KSBvciBzb21laG93XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhdm9pZGluZyB0aGUgbmV0d29yayByZXF1ZXN0IHRoYXQganVzdCBoYXBwZW5lZCAoYWxzbyBiYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIHRoZSBzZXJ2ZXIgY291bGQgcmV0dXJuIHVzZWZ1bCBuZXcgZGF0YSkuIEFsbFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3B0aW9ucyBjb25zaWRlcmVkLCBza2lwcGluZyB0aGlzIGNhY2hlIHdyaXRlIHNlZW1zIHRvIGJlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGVhc3QgZGFtYWdpbmcgcGxhY2UgdG8gYnJlYWsgdGhlIGN5Y2xlLCBiZWNhdXNlIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZWZsZWN0cyB0aGUgaW50dWl0aW9uIHRoYXQgd2UgcmVjZW50bHkgd3JvdGUgdGhpcyBleGFjdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IGludG8gdGhlIGNhY2hlLCBzbyB0aGUgY2FjaGUgKnNob3VsZCogYWxyZWFkeS9zdGlsbFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udGFpbiB0aGlzIGRhdGEuIElmIHNvbWUgb3RoZXIgcXVlcnkgaGFzIGNsb2JiZXJlZCB0aGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkYXRhIGluIHRoZSBtZWFudGltZSwgdGhhdCdzIHRvbyBiYWQsIGJ1dCB0aGVyZSB3aWxsIGJlIG5vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5uZXJzIGlmIGV2ZXJ5IHF1ZXJ5IGJsaW5kbHkgcmV2ZXJ0cyB0byBpdHMgb3duIHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHRoZSBkYXRhLiBUaGlzIGFwcHJvYWNoIGFsc28gZ2l2ZXMgdGhlIG5ldHdvcmsgYSBjaGFuY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIHJldHVybiBuZXcgZGF0YSwgd2hpY2ggd2lsbCBiZSB3cml0dGVuIGludG8gdGhlIGNhY2hlIGFzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1c3VhbCwgbm90aWZ5aW5nIG9ubHkgdGhvc2UgcXVlcmllcyB0aGF0IGFyZSBkaXJlY3RseVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWZmZWN0ZWQgYnkgdGhlIGNhY2hlIHVwZGF0ZXMsIGFzIHVzdWFsLiBJbiB0aGUgZnV0dXJlLCBhblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXZlbiBtb3JlIHNvcGhpc3RpY2F0ZWQgY2FjaGUgY291bGQgcGVyaGFwcyBwcmV2ZW50IG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtaXRpZ2F0ZSB0aGUgY2xvYmJlcmluZyBzb21laG93LCBidXQgdGhhdCB3b3VsZCBtYWtlIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcnRpY3VsYXIgY2FjaGUgd3JpdGUgZXZlbiBsZXNzIGltcG9ydGFudCwgYW5kIHRodXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNraXBwaW5nIGl0IHdvdWxkIGJlIGV2ZW4gc2FmZXIgdGhhbiBpdCBpcyB0b2RheS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0RGlmZiAmJiBsYXN0RGlmZi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldXNlIGRhdGEgZnJvbSB0aGUgbGFzdCBnb29kIChjb21wbGV0ZSkgZGlmZiB0aGF0IHdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjZWl2ZWQsIHdoZW4gcG9zc2libGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0geyAuLi5yZXN1bHQsIGRhdGE6IGxhc3REaWZmLnJlc3VsdCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBwcmV2aW91cyB0aGlzLmRpZmYgd2FzIGluY29tcGxldGUsIGZhbGwgdGhyb3VnaCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtcmVhZGluZyB0aGUgbGF0ZXN0IGRhdGEgd2l0aCBjYWNoZS5kaWZmLCBiZWxvdy5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gY2FjaGUuZGlmZihkaWZmT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlJ3JlIGFsbG93ZWQgdG8gd3JpdGUgdG8gdGhlIGNhY2hlLCBhbmQgd2UgY2FuIHJlYWQgYVxuICAgICAgICAgICAgICAgICAgICAvLyBjb21wbGV0ZSByZXN1bHQgZnJvbSB0aGUgY2FjaGUsIHVwZGF0ZSByZXN1bHQuZGF0YSB0byBiZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IGZyb20gdGhlIGNhY2hlLCByYXRoZXIgdGhhbiB0aGUgcmF3IG5ldHdvcmsgcmVzdWx0LlxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgd2l0aG91dCBzZXREaWZmIHRvIGF2b2lkIHRyaWdnZXJpbmcgYSBub3RpZnkgY2FsbCwgc2luY2VcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBvdGhlciB3YXlzIG9mIG5vdGlmeWluZyBmb3IgdGhpcyByZXN1bHQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaWZmLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7IC4uLnJlc3VsdCwgZGF0YTogZGlmZi5yZXN1bHQgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFdyaXRlID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIG1hcmtNdXRhdGlvblJlc3VsdChpbmNvbWluZywgbXV0YXRpb24sIGNhY2hlID0gdGhpcy5jYWNoZSkge1xuICAgICAgICBjb25zdCBjYWNoZVdyaXRlcyA9IFtdO1xuICAgICAgICBjb25zdCBza2lwQ2FjaGUgPSBtdXRhdGlvbi5jYWNoZVdyaXRlQmVoYXZpb3IgPT09IDAgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLkZPUkJJRCAqLztcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMubWF5YmVIYW5kbGVJbmNyZW1lbnRhbFJlc3VsdChza2lwQ2FjaGUgPyB1bmRlZmluZWQgOiAoY2FjaGUuZGlmZih7XG4gICAgICAgICAgICBpZDogXCJST09UX01VVEFUSU9OXCIsXG4gICAgICAgICAgICAvLyBUaGUgY2FjaGUgY29tcGxhaW5zIGlmIHBhc3NlZCBhIG11dGF0aW9uIHdoZXJlIGl0IGV4cGVjdHMgYVxuICAgICAgICAgICAgLy8gcXVlcnksIHNvIHdlIHRyYW5zZm9ybSBtdXRhdGlvbnMgYW5kIHN1YnNjcmlwdGlvbnMgdG8gcXVlcmllc1xuICAgICAgICAgICAgLy8gKG9ubHkgb25jZSwgdGhhbmtzIHRvIHRoaXMudHJhbnNmb3JtQ2FjaGUpLlxuICAgICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnlNYW5hZ2VyLmdldERvY3VtZW50SW5mbyhtdXRhdGlvbi5kb2N1bWVudCkuYXNRdWVyeSxcbiAgICAgICAgICAgIHZhcmlhYmxlczogbXV0YXRpb24udmFyaWFibGVzLFxuICAgICAgICAgICAgb3B0aW1pc3RpYzogZmFsc2UsXG4gICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgfSkucmVzdWx0KSwgaW5jb21pbmcsIG11dGF0aW9uLmRvY3VtZW50KTtcbiAgICAgICAgaWYgKG11dGF0aW9uLmVycm9yUG9saWN5ID09PSBcImlnbm9yZVwiKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB7IC4uLnJlc3VsdCwgZXJyb3JzOiBbXSB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChncmFwaFFMUmVzdWx0SGFzRXJyb3IocmVzdWx0KSAmJiBtdXRhdGlvbi5lcnJvclBvbGljeSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnZXRSZXN1bHRXaXRoRGF0YVN0YXRlID0gKCkgPT4gKHtcbiAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgIGRhdGFTdGF0ZTogdGhpcy5oYXNOZXh0ID8gXCJzdHJlYW1pbmdcIiA6IFwiY29tcGxldGVcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghc2tpcENhY2hlICYmIHNob3VsZFdyaXRlUmVzdWx0KHJlc3VsdCwgbXV0YXRpb24uZXJyb3JQb2xpY3kpKSB7XG4gICAgICAgICAgICBjYWNoZVdyaXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgIGRhdGFJZDogXCJST09UX01VVEFUSU9OXCIsXG4gICAgICAgICAgICAgICAgcXVlcnk6IG11dGF0aW9uLmRvY3VtZW50LFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogbXV0YXRpb24udmFyaWFibGVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB7IHVwZGF0ZVF1ZXJpZXMgfSA9IG11dGF0aW9uO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZVF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlclxuICAgICAgICAgICAgICAgICAgICAuZ2V0T2JzZXJ2YWJsZVF1ZXJpZXMoXCJhbGxcIilcbiAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goKG9ic2VydmFibGVRdWVyeSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBxdWVyeU5hbWUgPSBvYnNlcnZhYmxlUXVlcnkgJiYgb2JzZXJ2YWJsZVF1ZXJ5LnF1ZXJ5TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeU5hbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh1cGRhdGVRdWVyaWVzLCBxdWVyeU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlciA9IHVwZGF0ZVF1ZXJpZXNbcXVlcnlOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBxdWVyeTogZG9jdW1lbnQsIHZhcmlhYmxlcyB9ID0gb2JzZXJ2YWJsZVF1ZXJ5O1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdCBmcm9tIHRoZSBzdG9yZS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyByZXN1bHQ6IGN1cnJlbnRRdWVyeVJlc3VsdCwgY29tcGxldGUgfSA9IG9ic2VydmFibGVRdWVyeS5nZXRDYWNoZURpZmYoeyBvcHRpbWlzdGljOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBsZXRlICYmIGN1cnJlbnRRdWVyeVJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUnVuIG91ciByZWR1Y2VyIHVzaW5nIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdCBhbmQgdGhlIG11dGF0aW9uIHJlc3VsdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRRdWVyeVJlc3VsdCA9IHVwZGF0ZXIoY3VycmVudFF1ZXJ5UmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25SZXN1bHQ6IGdldFJlc3VsdFdpdGhEYXRhU3RhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeU5hbWU6IChkb2N1bWVudCAmJiBnZXRPcGVyYXRpb25OYW1lKGRvY3VtZW50KSkgfHwgdm9pZCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5VmFyaWFibGVzOiB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBtb2RpZmllZCByZXN1bHQgYmFjayBpbnRvIHRoZSBzdG9yZSBpZiB3ZSBnb3QgYSBuZXcgcmVzdWx0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRRdWVyeVJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlV3JpdGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IG5leHRRdWVyeVJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUlkOiBcIlJPT1RfUVVFUllcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IGRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVmZXRjaFF1ZXJpZXMgPSBtdXRhdGlvbi5yZWZldGNoUXVlcmllcztcbiAgICAgICAgaWYgKHR5cGVvZiByZWZldGNoUXVlcmllcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZWZldGNoUXVlcmllcyA9IHJlZmV0Y2hRdWVyaWVzKGdldFJlc3VsdFdpdGhEYXRhU3RhdGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlV3JpdGVzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgIChyZWZldGNoUXVlcmllcyB8fCBcIlwiKS5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICBtdXRhdGlvbi51cGRhdGUgfHxcbiAgICAgICAgICAgIG11dGF0aW9uLm9uUXVlcnlVcGRhdGVkIHx8XG4gICAgICAgICAgICBtdXRhdGlvbi5yZW1vdmVPcHRpbWlzdGljKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlclxuICAgICAgICAgICAgICAgIC5yZWZldGNoUXVlcmllcyh7XG4gICAgICAgICAgICAgICAgdXBkYXRlQ2FjaGU6IChjYWNoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNraXBDYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVXcml0ZXMuZm9yRWFjaCgod3JpdGUpID0+IGNhY2hlLndyaXRlKHdyaXRlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIG11dGF0aW9uIGhhcyBzb21lIHdyaXRlcyBhc3NvY2lhdGVkIHdpdGggaXQgdGhlbiB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIGFwcGx5IHRob3NlIHdyaXRlcyB0byB0aGUgc3RvcmUgYnkgcnVubmluZyB0aGlzIHJlZHVjZXIgYWdhaW4gd2l0aFxuICAgICAgICAgICAgICAgICAgICAvLyBhIHdyaXRlIGFjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB1cGRhdGUgfSA9IG11dGF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgd2hldGhlciByZXN1bHQgaXMgYSBTaW5nbGVFeGVjdXRpb25SZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIC8vIG9yIHRoZSBmaW5hbCBFeGVjdXRpb25QYXRjaFJlc3VsdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFza2lwQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZS1yZWFkIHRoZSBST09UX01VVEFUSU9OIGRhdGEgd2UganVzdCB3cm90ZSBpbnRvIHRoZSBjYWNoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICh0aGUgZmlyc3QgY2FjaGUud3JpdGUgY2FsbCBpbiB0aGUgY2FjaGVXcml0ZXMuZm9yRWFjaCBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWJvdmUpLCBzbyBmaWVsZCByZWFkIGZ1bmN0aW9ucyBoYXZlIGEgY2hhbmNlIHRvIHJ1biBmb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaWVsZHMgd2l0aGluIG11dGF0aW9uIHJlc3VsdCBvYmplY3RzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBjYWNoZS5kaWZmKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiUk9PVF9NVVRBVElPTlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY2FjaGUgY29tcGxhaW5zIGlmIHBhc3NlZCBhIG11dGF0aW9uIHdoZXJlIGl0IGV4cGVjdHMgYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBxdWVyeSwgc28gd2UgdHJhbnNmb3JtIG11dGF0aW9ucyBhbmQgc3Vic2NyaXB0aW9ucyB0byBxdWVyaWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChvbmx5IG9uY2UsIHRoYW5rcyB0byB0aGlzLnRyYW5zZm9ybUNhY2hlKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnlNYW5hZ2VyLmdldERvY3VtZW50SW5mbyhtdXRhdGlvbi5kb2N1bWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hc1F1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG11dGF0aW9uLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1pc3RpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaWZmLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRpZmYucmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlJ3ZlIHJlY2VpdmVkIHRoZSB3aG9sZSByZXNwb25zZSwgY2FsbCB0aGUgdXBkYXRlIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhc05leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoY2FjaGUsIHJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBtdXRhdGlvbi5jb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG11dGF0aW9uLnZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIERvIHRoaXMgd2l0aCBjYWNoZS5ldmljdCh7IGlkOiAnUk9PVF9NVVRBVElPTicgfSkgYnV0IG1ha2UgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hhbGxvdyB0byBhbGxvdyByb2xsaW5nIGJhY2sgb3B0aW1pc3RpYyBldmljdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2tpcENhY2hlICYmICFtdXRhdGlvbi5rZWVwUm9vdEZpZWxkcyAmJiAhdGhpcy5oYXNOZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5tb2RpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcIlJPT1RfTVVUQVRJT05cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHModmFsdWUsIHsgZmllbGROYW1lLCBERUxFVEUgfSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGROYW1lID09PSBcIl9fdHlwZW5hbWVcIiA/IHZhbHVlIDogREVMRVRFO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogcmVmZXRjaFF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgLy8gV3JpdGUgdGhlIGZpbmFsIG11dGF0aW9uLnJlc3VsdCB0byB0aGUgcm9vdCBsYXllciBvZiB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgICAgb3B0aW1pc3RpYzogZmFsc2UsXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBjb3JyZXNwb25kaW5nIG9wdGltaXN0aWMgbGF5ZXIgYXQgdGhlIHNhbWUgdGltZSBhcyB3ZVxuICAgICAgICAgICAgICAgIC8vIHdyaXRlIHRoZSBmaW5hbCBub24tb3B0aW1pc3RpYyByZXN1bHQuXG4gICAgICAgICAgICAgICAgcmVtb3ZlT3B0aW1pc3RpYzogbXV0YXRpb24ucmVtb3ZlT3B0aW1pc3RpYyxcbiAgICAgICAgICAgICAgICAvLyBMZXQgdGhlIGNhbGxlciBvZiBjbGllbnQubXV0YXRlIG9wdGlvbmFsbHkgZGV0ZXJtaW5lIHRoZSByZWZldGNoaW5nXG4gICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgZm9yIHdhdGNoZWQgcXVlcmllcyBhZnRlciB0aGUgbXV0YXRpb24udXBkYXRlIGZ1bmN0aW9uIHJ1bnMuXG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gb25RdWVyeVVwZGF0ZWQgZnVuY3Rpb24gd2FzIHByb3ZpZGVkIGZvciB0aGlzIG11dGF0aW9uLCBwYXNzXG4gICAgICAgICAgICAgICAgLy8gbnVsbCBpbnN0ZWFkIG9mIHVuZGVmaW5lZCB0byBkaXNhYmxlIHRoZSBkZWZhdWx0IHJlZmV0Y2hpbmcgYmVoYXZpb3IuXG4gICAgICAgICAgICAgICAgb25RdWVyeVVwZGF0ZWQ6IG11dGF0aW9uLm9uUXVlcnlVcGRhdGVkIHx8IG51bGwsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKChyZXN1bHQpID0+IHJlc3VsdHMucHVzaChyZXN1bHQpKTtcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbi5hd2FpdFJlZmV0Y2hRdWVyaWVzIHx8IG11dGF0aW9uLm9uUXVlcnlVcGRhdGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuaW5nIGEgcHJvbWlzZSBoZXJlIG1ha2VzIHRoZSBtdXRhdGlvbiBhd2FpdCB0aGF0IHByb21pc2UsIHNvIHdlXG4gICAgICAgICAgICAgICAgLy8gaW5jbHVkZSByZXN1bHRzIGluIHRoYXQgcHJvbWlzZSdzIHdvcmsgaWYgYXdhaXRSZWZldGNoUXVlcmllcyBvciBhblxuICAgICAgICAgICAgICAgIC8vIG9uUXVlcnlVcGRhdGVkIGZ1bmN0aW9uIHdhcyBzcGVjaWZpZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHJlc3VsdHMpLnRoZW4oKCkgPT4gcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgfVxuICAgIG1hcmtNdXRhdGlvbk9wdGltaXN0aWMob3B0aW1pc3RpY1Jlc3BvbnNlLCBtdXRhdGlvbikge1xuICAgICAgICBjb25zdCBkYXRhID0gdHlwZW9mIG9wdGltaXN0aWNSZXNwb25zZSA9PT0gXCJmdW5jdGlvblwiID9cbiAgICAgICAgICAgIG9wdGltaXN0aWNSZXNwb25zZShtdXRhdGlvbi52YXJpYWJsZXMsIHsgSUdOT1JFIH0pXG4gICAgICAgICAgICA6IG9wdGltaXN0aWNSZXNwb25zZTtcbiAgICAgICAgaWYgKGRhdGEgPT09IElHTk9SRSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FjaGUucmVjb3JkT3B0aW1pc3RpY1RyYW5zYWN0aW9uKChjYWNoZSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtNdXRhdGlvblJlc3VsdCh7IGRhdGEgfSwgbXV0YXRpb24sIGNhY2hlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGludmFyaWFudC5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMuaWQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbWFya1N1YnNjcmlwdGlvblJlc3VsdChyZXN1bHQsIHsgZG9jdW1lbnQsIHZhcmlhYmxlcywgZXJyb3JQb2xpY3ksIGNhY2hlV3JpdGVCZWhhdmlvciwgfSkge1xuICAgICAgICBpZiAoY2FjaGVXcml0ZUJlaGF2aW9yICE9PSAwIC8qIENhY2hlV3JpdGVCZWhhdmlvci5GT1JCSUQgKi8pIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRXcml0ZVJlc3VsdChyZXN1bHQsIGVycm9yUG9saWN5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUud3JpdGUoe1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFJZDogXCJST09UX1NVQlNDUklQVElPTlwiLFxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLmJyb2FkY2FzdFF1ZXJpZXMoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNob3VsZFdyaXRlUmVzdWx0KHJlc3VsdCwgZXJyb3JQb2xpY3kgPSBcIm5vbmVcIikge1xuICAgIGNvbnN0IGlnbm9yZUVycm9ycyA9IGVycm9yUG9saWN5ID09PSBcImlnbm9yZVwiIHx8IGVycm9yUG9saWN5ID09PSBcImFsbFwiO1xuICAgIGxldCB3cml0ZVdpdGhFcnJvcnMgPSAhZ3JhcGhRTFJlc3VsdEhhc0Vycm9yKHJlc3VsdCk7XG4gICAgaWYgKCF3cml0ZVdpdGhFcnJvcnMgJiYgaWdub3JlRXJyb3JzICYmIHJlc3VsdC5kYXRhKSB7XG4gICAgICAgIHdyaXRlV2l0aEVycm9ycyA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB3cml0ZVdpdGhFcnJvcnM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1RdWVyeUluZm8uanMubWFwXG4iLAogICAgImltcG9ydCB7IFRyaWUgfSBmcm9tIFwiQHdyeS90cmllXCI7XG5pbXBvcnQgeyBCUkVBSywgS2luZCwgT3BlcmF0aW9uVHlwZU5vZGUsIHZpc2l0IH0gZnJvbSBcImdyYXBocWxcIjtcbmltcG9ydCB7IE9ic2VydmFibGUsIHRocm93RXJyb3IgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgY2F0Y2hFcnJvciwgY29uY2F0LCBFTVBUWSwgZmlsdGVyLCBmaW5hbGl6ZSwgZnJvbSwgbGFzdFZhbHVlRnJvbSwgbWFwLCBtYXRlcmlhbGl6ZSwgbWVyZ2VNYXAsIG9mLCBzaGFyZSwgc2hhcmVSZXBsYXksIFN1YmplY3QsIHRhcCwgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgY2Fub25pY2FsU3RyaW5naWZ5IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L2NhY2hlXCI7XG5pbXBvcnQgeyBDb21iaW5lZEdyYXBoUUxFcnJvcnMsIGdyYXBoUUxSZXN1bHRIYXNQcm90b2NvbEVycm9ycywgcmVnaXN0ZXJMaW5rRXJyb3IsIHRvRXJyb3JMaWtlLCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9lcnJvcnNcIjtcbmltcG9ydCB7IFBST1RPQ09MX0VSUk9SU19TWU1CT0wgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvZXJyb3JzXCI7XG5pbXBvcnQgeyBleGVjdXRlIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L2xpbmtcIjtcbmltcG9ydCB7IG1hc2tGcmFnbWVudCwgbWFza09wZXJhdGlvbiB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9tYXNraW5nXCI7XG5pbXBvcnQgeyBjYWNoZVNpemVzLCBEb2N1bWVudFRyYW5zZm9ybSwgcHJpbnQgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBfX0RFVl9fIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9lbnZpcm9ubWVudFwiO1xuaW1wb3J0IHsgQXV0b0NsZWFuZWRXZWFrQ2FjaGUsIGNoZWNrRG9jdW1lbnQsIGZpbHRlck1hcCwgZ2V0RGVmYXVsdFZhbHVlcywgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbiwgZ2V0T3BlcmF0aW9uTmFtZSwgZ3JhcGhRTFJlc3VsdEhhc0Vycm9yLCBoYXNEaXJlY3RpdmVzLCBoYXNGb3JjZWRSZXNvbHZlcnMsIGlzRG9jdW1lbnROb2RlLCBpc05vbk51bGxPYmplY3QsIG1ha2VVbmlxdWVJZCwgcmVtb3ZlRGlyZWN0aXZlc0Zyb21Eb2N1bWVudCwgdG9RdWVyeVJlc3VsdCwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIG5ld0ludmFyaWFudEVycm9yLCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW52YXJpYW50XCI7XG5pbXBvcnQgeyBpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQsIE5ldHdvcmtTdGF0dXMgfSBmcm9tIFwiLi9uZXR3b3JrU3RhdHVzLmpzXCI7XG5pbXBvcnQgeyBsb2dNaXNzaW5nRmllbGRFcnJvcnMsIE9ic2VydmFibGVRdWVyeSB9IGZyb20gXCIuL09ic2VydmFibGVRdWVyeS5qc1wiO1xuaW1wb3J0IHsgUXVlcnlJbmZvIH0gZnJvbSBcIi4vUXVlcnlJbmZvLmpzXCI7XG5leHBvcnQgY2xhc3MgUXVlcnlNYW5hZ2VyIHtcbiAgICBkZWZhdWx0T3B0aW9ucztcbiAgICBjbGllbnQ7XG4gICAgLyoqXG4gICAgICogVGhlIG9wdGlvbnMgdGhhdCB3ZXJlIHBhc3NlZCB0byB0aGUgQXBvbGxvQ2xpZW50IGNvbnN0cnVjdG9yLlxuICAgICAqL1xuICAgIGNsaWVudE9wdGlvbnM7XG4gICAgYXNzdW1lSW1tdXRhYmxlUmVzdWx0cztcbiAgICBkb2N1bWVudFRyYW5zZm9ybTtcbiAgICBzc3JNb2RlO1xuICAgIGRlZmF1bHRDb250ZXh0O1xuICAgIGRhdGFNYXNraW5nO1xuICAgIGluY3JlbWVudGFsSGFuZGxlcjtcbiAgICBsb2NhbFN0YXRlO1xuICAgIHF1ZXJ5RGVkdXBsaWNhdGlvbjtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHByaW9yaXRpemUgY2FjaGUgdmFsdWVzIG92ZXIgbmV0d29yayByZXN1bHRzIHdoZW5cbiAgICAgKiBgZmV0Y2hPYnNlcnZhYmxlV2l0aEluZm9gIGlzIGNhbGxlZC5cbiAgICAgKiBUaGlzIHdpbGwgZXNzZW50aWFsbHkgdHVybiBhIGBcIm5ldHdvcmstb25seVwiYCBvciBgXCJjYWNoZS1hbmQtbmV0d29ya1wiYFxuICAgICAqIGZldGNoUG9saWN5IGludG8gYSBgXCJjYWNoZS1maXJzdFwiYCBmZXRjaFBvbGljeSwgYnV0IHdpdGhvdXQgaW5mbHVlbmNpbmdcbiAgICAgKiB0aGUgYGZldGNoUG9saWN5YCBvZiB0aGUgYE9ic2VydmFibGVRdWVyeWAuXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBlLmcuIGJlIHVzZWQgdG8gcHJpb3JpdGl6ZSB0aGUgY2FjaGUgZHVyaW5nIHRoZSBmaXJzdCByZW5kZXIgYWZ0ZXJcbiAgICAgKiBTU1IuXG4gICAgICovXG4gICAgcHJpb3JpdGl6ZUNhY2hlVmFsdWVzID0gZmFsc2U7XG4gICAgb25Ccm9hZGNhc3Q7XG4gICAgbXV0YXRpb25TdG9yZTtcbiAgICAvKipcbiAgICAgKiBBbGwgT2JzZXJ2YWJsZVF1ZXJpZXMgdGhhdCBjdXJyZW50bHkgaGF2ZSBhdCBsZWFzdCBvbmUgc3Vic2NyaWJlci5cbiAgICAgKi9cbiAgICBvYnNRdWVyaWVzID0gbmV3IFNldCgpO1xuICAgIC8vIE1hcHMgZnJvbSBxdWVyeUluZm8uaWQgc3RyaW5ncyB0byBQcm9taXNlIHJlamVjdGlvbiBmdW5jdGlvbnMgZm9yXG4gICAgLy8gY3VycmVudGx5IGFjdGl2ZSBxdWVyaWVzIGFuZCBmZXRjaGVzLlxuICAgIC8vIFVzZSBwcm90ZWN0ZWQgaW5zdGVhZCBvZiBwcml2YXRlIGZpZWxkIHNvXG4gICAgLy8gQGFwb2xsby9leHBlcmltZW50YWwtbmV4dGpzLWFwcC1zdXBwb3J0IGNhbiBhY2Nlc3MgdHlwZSBpbmZvLlxuICAgIGZldGNoQ2FuY2VsRm5zID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdERvY3VtZW50VHJhbnNmb3JtID0gbmV3IERvY3VtZW50VHJhbnNmb3JtKChkb2N1bWVudCkgPT4gdGhpcy5jYWNoZS50cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudCksIFxuICAgICAgICAvLyBBbGxvdyB0aGUgYXBvbGxvIGNhY2hlIHRvIG1hbmFnZSBpdHMgb3duIHRyYW5zZm9ybSBjYWNoZXNcbiAgICAgICAgeyBjYWNoZTogZmFsc2UgfSk7XG4gICAgICAgIHRoaXMuY2xpZW50ID0gb3B0aW9ucy5jbGllbnQ7XG4gICAgICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSBvcHRpb25zLmRlZmF1bHRPcHRpb25zO1xuICAgICAgICB0aGlzLnF1ZXJ5RGVkdXBsaWNhdGlvbiA9IG9wdGlvbnMucXVlcnlEZWR1cGxpY2F0aW9uO1xuICAgICAgICB0aGlzLmNsaWVudE9wdGlvbnMgPSBvcHRpb25zLmNsaWVudE9wdGlvbnM7XG4gICAgICAgIHRoaXMuc3NyTW9kZSA9IG9wdGlvbnMuc3NyTW9kZTtcbiAgICAgICAgdGhpcy5hc3N1bWVJbW11dGFibGVSZXN1bHRzID0gb3B0aW9ucy5hc3N1bWVJbW11dGFibGVSZXN1bHRzO1xuICAgICAgICB0aGlzLmRhdGFNYXNraW5nID0gb3B0aW9ucy5kYXRhTWFza2luZztcbiAgICAgICAgdGhpcy5sb2NhbFN0YXRlID0gb3B0aW9ucy5sb2NhbFN0YXRlO1xuICAgICAgICB0aGlzLmluY3JlbWVudGFsSGFuZGxlciA9IG9wdGlvbnMuaW5jcmVtZW50YWxIYW5kbGVyO1xuICAgICAgICBjb25zdCBkb2N1bWVudFRyYW5zZm9ybSA9IG9wdGlvbnMuZG9jdW1lbnRUcmFuc2Zvcm07XG4gICAgICAgIHRoaXMuZG9jdW1lbnRUcmFuc2Zvcm0gPVxuICAgICAgICAgICAgZG9jdW1lbnRUcmFuc2Zvcm0gP1xuICAgICAgICAgICAgICAgIGRlZmF1bHREb2N1bWVudFRyYW5zZm9ybVxuICAgICAgICAgICAgICAgICAgICAuY29uY2F0KGRvY3VtZW50VHJhbnNmb3JtKVxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY3VzdG9tIGRvY3VtZW50IHRyYW5zZm9ybSBtYXkgYWRkIG5ldyBmcmFnbWVudCBzcHJlYWRzIG9yIG5ld1xuICAgICAgICAgICAgICAgICAgICAvLyBmaWVsZCBzZWxlY3Rpb25zLCBzbyB3ZSB3YW50IHRvIGdpdmUgdGhlIGNhY2hlIGEgY2hhbmNlIHRvIHJ1blxuICAgICAgICAgICAgICAgICAgICAvLyBhZ2Fpbi4gRm9yIGV4YW1wbGUsIHRoZSBJbk1lbW9yeUNhY2hlIGFkZHMgX190eXBlbmFtZSB0byBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3Rpb25zIGFuZCBmcmFnbWVudHMgZnJvbSB0aGUgZnJhZ21lbnQgcmVnaXN0cnkuXG4gICAgICAgICAgICAgICAgICAgIC5jb25jYXQoZGVmYXVsdERvY3VtZW50VHJhbnNmb3JtKVxuICAgICAgICAgICAgICAgIDogZGVmYXVsdERvY3VtZW50VHJhbnNmb3JtO1xuICAgICAgICB0aGlzLmRlZmF1bHRDb250ZXh0ID0gb3B0aW9ucy5kZWZhdWx0Q29udGV4dCB8fCB7fTtcbiAgICAgICAgaWYgKCh0aGlzLm9uQnJvYWRjYXN0ID0gb3B0aW9ucy5vbkJyb2FkY2FzdCkpIHtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25TdG9yZSA9IHt9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBsaW5rKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQubGluaztcbiAgICB9XG4gICAgZ2V0IGNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGllbnQuY2FjaGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgdGhpcyBtZXRob2QgdG8gdGVybWluYXRlIGFueSBhY3RpdmUgcXVlcnkgcHJvY2Vzc2VzLCBtYWtpbmcgaXQgc2FmZVxuICAgICAqIHRvIGRpc3Bvc2Ugb2YgdGhpcyBRdWVyeU1hbmFnZXIgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5vYnNRdWVyaWVzLmZvckVhY2goKG9xKSA9PiBvcS5zdG9wKCkpO1xuICAgICAgICB0aGlzLmNhbmNlbFBlbmRpbmdGZXRjaGVzKG5ld0ludmFyaWFudEVycm9yKDgzKSk7XG4gICAgfVxuICAgIGNhbmNlbFBlbmRpbmdGZXRjaGVzKGVycm9yKSB7XG4gICAgICAgIHRoaXMuZmV0Y2hDYW5jZWxGbnMuZm9yRWFjaCgoY2FuY2VsKSA9PiBjYW5jZWwoZXJyb3IpKTtcbiAgICAgICAgdGhpcy5mZXRjaENhbmNlbEZucy5jbGVhcigpO1xuICAgIH1cbiAgICBhc3luYyBtdXRhdGUoeyBtdXRhdGlvbiwgdmFyaWFibGVzLCBvcHRpbWlzdGljUmVzcG9uc2UsIHVwZGF0ZVF1ZXJpZXMsIHJlZmV0Y2hRdWVyaWVzID0gW10sIGF3YWl0UmVmZXRjaFF1ZXJpZXMgPSBmYWxzZSwgdXBkYXRlOiB1cGRhdGVXaXRoUHJveHlGbiwgb25RdWVyeVVwZGF0ZWQsIGZldGNoUG9saWN5LCBlcnJvclBvbGljeSwga2VlcFJvb3RGaWVsZHMsIGNvbnRleHQsIH0pIHtcbiAgICAgICAgY29uc3QgcXVlcnlJbmZvID0gbmV3IFF1ZXJ5SW5mbyh0aGlzKTtcbiAgICAgICAgbXV0YXRpb24gPSB0aGlzLmNhY2hlLnRyYW5zZm9ybUZvckxpbmsodGhpcy50cmFuc2Zvcm0obXV0YXRpb24pKTtcbiAgICAgICAgY29uc3QgeyBoYXNDbGllbnRFeHBvcnRzIH0gPSB0aGlzLmdldERvY3VtZW50SW5mbyhtdXRhdGlvbik7XG4gICAgICAgIHZhcmlhYmxlcyA9IHRoaXMuZ2V0VmFyaWFibGVzKG11dGF0aW9uLCB2YXJpYWJsZXMpO1xuICAgICAgICBpZiAoaGFzQ2xpZW50RXhwb3J0cykge1xuICAgICAgICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgICAgICAgICBpbnZhcmlhbnQodGhpcy5sb2NhbFN0YXRlLCA4NCwgZ2V0T3BlcmF0aW9uTmFtZShtdXRhdGlvbiwgXCIoYW5vbnltb3VzKVwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXJpYWJsZXMgPSBhd2FpdCB0aGlzLmxvY2FsU3RhdGUuZ2V0RXhwb3J0ZWRWYXJpYWJsZXMoe1xuICAgICAgICAgICAgICAgIGNsaWVudDogdGhpcy5jbGllbnQsXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IG11dGF0aW9uLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbXV0YXRpb25TdG9yZVZhbHVlID0gdGhpcy5tdXRhdGlvblN0b3JlICYmXG4gICAgICAgICAgICAodGhpcy5tdXRhdGlvblN0b3JlW3F1ZXJ5SW5mby5pZF0gPSB7XG4gICAgICAgICAgICAgICAgbXV0YXRpb24sXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaXNPcHRpbWlzdGljID0gb3B0aW1pc3RpY1Jlc3BvbnNlICYmXG4gICAgICAgICAgICBxdWVyeUluZm8ubWFya011dGF0aW9uT3B0aW1pc3RpYyhvcHRpbWlzdGljUmVzcG9uc2UsIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogbXV0YXRpb24sXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgIGNhY2hlV3JpdGVCZWhhdmlvcjogZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIiA/XG4gICAgICAgICAgICAgICAgICAgIDAgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLkZPUkJJRCAqL1xuICAgICAgICAgICAgICAgICAgICA6IDIgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLk1FUkdFICovLFxuICAgICAgICAgICAgICAgIGVycm9yUG9saWN5LFxuICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgdXBkYXRlUXVlcmllcyxcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHVwZGF0ZVdpdGhQcm94eUZuLFxuICAgICAgICAgICAgICAgIGtlZXBSb290RmllbGRzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2F1c2UgPSB7fTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9ic2VydmFibGVGcm9tTGluayhtdXRhdGlvbiwge1xuICAgICAgICAgICAgICAgIC4uLmNvbnRleHQsXG4gICAgICAgICAgICAgICAgb3B0aW1pc3RpY1Jlc3BvbnNlOiBpc09wdGltaXN0aWMgPyBvcHRpbWlzdGljUmVzcG9uc2UgOiB2b2lkIDAsXG4gICAgICAgICAgICB9LCB2YXJpYWJsZXMsIHt9LCBmYWxzZSlcbiAgICAgICAgICAgICAgICAub2JzZXJ2YWJsZS5waXBlKHZhbGlkYXRlRGlkRW1pdFZhbHVlKCksIG1lcmdlTWFwKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZVJlc3VsdCA9IHsgLi4ucmVzdWx0IH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb20ocXVlcnlJbmZvLm1hcmtNdXRhdGlvblJlc3VsdChzdG9yZVJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogbXV0YXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVXcml0ZUJlaGF2aW9yOiBmZXRjaFBvbGljeSA9PT0gXCJuby1jYWNoZVwiID9cbiAgICAgICAgICAgICAgICAgICAgICAgIDAgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLkZPUkJJRCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAyIC8qIENhY2hlV3JpdGVCZWhhdmlvci5NRVJHRSAqLyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogdXBkYXRlV2l0aFByb3h5Rm4sXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0UmVmZXRjaFF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgICAgIHJlZmV0Y2hRdWVyaWVzLFxuICAgICAgICAgICAgICAgICAgICByZW1vdmVPcHRpbWlzdGljOiBpc09wdGltaXN0aWMgPyBxdWVyeUluZm8uaWQgOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgICAgIG9uUXVlcnlVcGRhdGVkLFxuICAgICAgICAgICAgICAgICAgICBrZWVwUm9vdEZpZWxkcyxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucGlwZShtYXAoKHN0b3JlUmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzRXJyb3JzID0gZ3JhcGhRTFJlc3VsdEhhc0Vycm9yKHN0b3JlUmVzdWx0KTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzRXJyb3JzICYmIGVycm9yUG9saWN5ID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29tYmluZWRHcmFwaFFMRXJyb3JzKHN0b3JlUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uU3RvcmVWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBtdXRhdGlvblN0b3JlVmFsdWUubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBtdXRhdGlvblN0b3JlVmFsdWUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVSZXN1bHQ7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgICAgICBuZXh0OiAoc3RvcmVSZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIG11dGF0aW9ucyBtaWdodCByZWNlaXZlIG11bHRpcGxlIHBheWxvYWRzIGZyb20gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIEFwb2xsb0xpbmsgY2hhaW4gKGUuZy4gd2hlbiB1c2VkIHdpdGggQGRlZmVyKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgcmVzb2x2ZSB3aXRoIGEgU2luZ2xlRXhlY3V0aW9uUmVzdWx0IG9yIGFmdGVyIHRoZSBmaW5hbFxuICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRpb25QYXRjaFJlc3VsdCBoYXMgYXJyaXZlZCBhbmQgd2UgaGF2ZSBhc3NlbWJsZWQgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIG11bHRpcGFydCByZXNwb25zZSBpbnRvIGEgc2luZ2xlIHJlc3VsdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeUluZm8uaGFzTmV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMubWFza09wZXJhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBtdXRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogc3RvcmVSZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdXNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncmFwaFFMUmVzdWx0SGFzRXJyb3Ioc3RvcmVSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmVycm9yID0gbmV3IENvbWJpbmVkR3JhcGhRTEVycm9ycyhzdG9yZVJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3RvcmVSZXN1bHQuZXh0ZW5zaW9ucyB8fCB7fSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmV4dGVuc2lvbnMgPSBzdG9yZVJlc3VsdC5leHRlbnNpb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvblN0b3JlVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uU3RvcmVWYWx1ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvblN0b3JlVmFsdWUuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNPcHRpbWlzdGljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLnJlbW92ZU9wdGltaXN0aWMocXVlcnlJbmZvLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJyb2FkY2FzdFF1ZXJpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yUG9saWN5ID09PSBcImlnbm9yZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IGRhdGE6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JQb2xpY3kgPT09IFwiYWxsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgZGF0YTogdW5kZWZpbmVkLCBlcnJvciB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZldGNoUXVlcnkob3B0aW9ucywgbmV0d29ya1N0YXR1cykge1xuICAgICAgICBjaGVja0RvY3VtZW50KG9wdGlvbnMucXVlcnksIE9wZXJhdGlvblR5cGVOb2RlLlFVRVJZKTtcbiAgICAgICAgLy8gZG8gdGhlIHJlc3QgYXN5bmNocm9ub3VzbHkgdG8ga2VlcCB0aGUgc2FtZSByZWplY3Rpb24gdGltaW5nIGFzXG4gICAgICAgIC8vIGNoZWNrcyBmdXJ0aGVyIGluIGAubXV0YXRlYFxuICAgICAgICByZXR1cm4gKGFzeW5jICgpID0+IGxhc3RWYWx1ZUZyb20odGhpcy5mZXRjaE9ic2VydmFibGVXaXRoSW5mbyhvcHRpb25zLCB7XG4gICAgICAgICAgICBuZXR3b3JrU3RhdHVzLFxuICAgICAgICB9KS5vYnNlcnZhYmxlLnBpcGUoZmlsdGVyTWFwKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkVcIjpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgdmFsdWUuZXJyb3I7XG4gICAgICAgICAgICAgICAgY2FzZSBcIk5cIjoge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc291cmNlICE9PSBcIm5ld05ldHdvcmtTdGF0dXNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b1F1ZXJ5UmVzdWx0KHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgLy8gVGhpcyBkZWZhdWx0IGlzIG5lZWRlZCB3aGVuIGEgYHN0YW5kYnlgIGZldGNoIHBvbGljeSBpcyB1c2VkIHRvIGF2b2lkXG4gICAgICAgICAgICAvLyBhbiBFbXB0eUVycm9yIGZyb20gcmVqZWN0aW5nIHRoaXMgcHJvbWlzZS5cbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogeyBkYXRhOiB1bmRlZmluZWQgfSxcbiAgICAgICAgfSkpKCk7XG4gICAgfVxuICAgIHRyYW5zZm9ybShkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFRyYW5zZm9ybS50cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudCk7XG4gICAgfVxuICAgIHRyYW5zZm9ybUNhY2hlID0gbmV3IEF1dG9DbGVhbmVkV2Vha0NhY2hlKGNhY2hlU2l6ZXNbXCJxdWVyeU1hbmFnZXIuZ2V0RG9jdW1lbnRJbmZvXCJdIHx8XG4gICAgICAgIDIwMDAgLyogZGVmYXVsdENhY2hlU2l6ZXNbXCJxdWVyeU1hbmFnZXIuZ2V0RG9jdW1lbnRJbmZvXCJdICovKTtcbiAgICBnZXREb2N1bWVudEluZm8oZG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgeyB0cmFuc2Zvcm1DYWNoZSB9ID0gdGhpcztcbiAgICAgICAgaWYgKCF0cmFuc2Zvcm1DYWNoZS5oYXMoZG9jdW1lbnQpKSB7XG4gICAgICAgICAgICBjb25zdCBvcGVyYXRpb25EZWZpbml0aW9uID0gZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbihkb2N1bWVudCk7XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8gVGhlc2UgdGhyZWUgY2FsbHMgKGhhc0NsaWVudEV4cG9ydHMsIHNob3VsZEZvcmNlUmVzb2x2ZXJzLCBhbmRcbiAgICAgICAgICAgICAgICAvLyB1c2VzTm9ucmVhY3RpdmVEaXJlY3RpdmUpIGFyZSBwZXJmb3JtaW5nIGluZGVwZW5kZW50IGZ1bGwgdHJhdmVyc2Fsc1xuICAgICAgICAgICAgICAgIC8vIG9mIHRoZSB0cmFuc2Zvcm1lZCBkb2N1bWVudC4gV2Ugc2hvdWxkIGNvbnNpZGVyIG1lcmdpbmcgdGhlc2VcbiAgICAgICAgICAgICAgICAvLyB0cmF2ZXJzYWxzIGludG8gYSBzaW5nbGUgcGFzcyBpbiB0aGUgZnV0dXJlLCB0aG91Z2ggdGhlIHdvcmsgaXNcbiAgICAgICAgICAgICAgICAvLyBjYWNoZWQgYWZ0ZXIgdGhlIGZpcnN0IHRpbWUuXG4gICAgICAgICAgICAgICAgaGFzQ2xpZW50RXhwb3J0czogaGFzRGlyZWN0aXZlcyhbXCJjbGllbnRcIiwgXCJleHBvcnRcIl0sIGRvY3VtZW50LCB0cnVlKSxcbiAgICAgICAgICAgICAgICBoYXNGb3JjZWRSZXNvbHZlcnM6IGhhc0ZvcmNlZFJlc29sdmVycyhkb2N1bWVudCksXG4gICAgICAgICAgICAgICAgaGFzTm9ucmVhY3RpdmVEaXJlY3RpdmU6IGhhc0RpcmVjdGl2ZXMoW1wibm9ucmVhY3RpdmVcIl0sIGRvY3VtZW50KSxcbiAgICAgICAgICAgICAgICBoYXNJbmNyZW1lbnRhbERpcmVjdGl2ZTogaGFzRGlyZWN0aXZlcyhbXCJkZWZlclwiXSwgZG9jdW1lbnQpLFxuICAgICAgICAgICAgICAgIG5vblJlYWN0aXZlUXVlcnk6IGFkZE5vblJlYWN0aXZlVG9OYW1lZEZyYWdtZW50cyhkb2N1bWVudCksXG4gICAgICAgICAgICAgICAgY2xpZW50UXVlcnk6IGhhc0RpcmVjdGl2ZXMoW1wiY2xpZW50XCJdLCBkb2N1bWVudCkgPyBkb2N1bWVudCA6IG51bGwsXG4gICAgICAgICAgICAgICAgc2VydmVyUXVlcnk6IHJlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQoW1xuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6IFwiY2xpZW50XCIsIHJlbW92ZTogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgICB7IG5hbWU6IFwiY29ubmVjdGlvblwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogXCJub25yZWFjdGl2ZVwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZTogXCJ1bm1hc2tcIiB9LFxuICAgICAgICAgICAgICAgIF0sIGRvY3VtZW50KSxcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25UeXBlOiBvcGVyYXRpb25EZWZpbml0aW9uPy5vcGVyYXRpb24sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhcnM6IGdldERlZmF1bHRWYWx1ZXMob3BlcmF0aW9uRGVmaW5pdGlvbiksXG4gICAgICAgICAgICAgICAgLy8gVHJhbnNmb3JtIGFueSBtdXRhdGlvbiBvciBzdWJzY3JpcHRpb24gb3BlcmF0aW9ucyB0byBxdWVyeSBvcGVyYXRpb25zXG4gICAgICAgICAgICAgICAgLy8gc28gd2UgY2FuIHJlYWQvd3JpdGUgdGhlbSBmcm9tL3RvIHRoZSBjYWNoZS5cbiAgICAgICAgICAgICAgICBhc1F1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9uczogZG9jdW1lbnQuZGVmaW5pdGlvbnMubWFwKChkZWYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWYua2luZCA9PT0gXCJPcGVyYXRpb25EZWZpbml0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWYub3BlcmF0aW9uICE9PSBcInF1ZXJ5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5kZWYsIG9wZXJhdGlvbjogXCJxdWVyeVwiIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmO1xuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldChkb2N1bWVudCwgY2FjaGVFbnRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW50cnkgPSB0cmFuc2Zvcm1DYWNoZS5nZXQoZG9jdW1lbnQpO1xuICAgICAgICBpZiAoZW50cnkudmlvbGF0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBlbnRyeS52aW9sYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgIH1cbiAgICBnZXRWYXJpYWJsZXMoZG9jdW1lbnQsIHZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFycyA9IHRoaXMuZ2V0RG9jdW1lbnRJbmZvKGRvY3VtZW50KS5kZWZhdWx0VmFycztcbiAgICAgICAgY29uc3QgdmFyc1dpdGhEZWZhdWx0cyA9IE9iamVjdC5lbnRyaWVzKHZhcmlhYmxlcyA/PyB7fSkubWFwKChba2V5LCB2YWx1ZV0pID0+IFtrZXksIHZhbHVlID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFyc1trZXldIDogdmFsdWVdKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRWYXJzLFxuICAgICAgICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKHZhcnNXaXRoRGVmYXVsdHMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB3YXRjaFF1ZXJ5KG9wdGlvbnMpIHtcbiAgICAgICAgY2hlY2tEb2N1bWVudChvcHRpb25zLnF1ZXJ5LCBPcGVyYXRpb25UeXBlTm9kZS5RVUVSWSk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy50cmFuc2Zvcm0ob3B0aW9ucy5xdWVyeSk7XG4gICAgICAgIC8vIGFzc2lnbiB2YXJpYWJsZSBkZWZhdWx0IHZhbHVlcyBpZiBzdXBwbGllZFxuICAgICAgICAvLyBOT1RFOiBXZSBkb24ndCBtb2RpZnkgb3B0aW9ucy5xdWVyeSBoZXJlIHdpdGggdGhlIHRyYW5zZm9ybWVkIHF1ZXJ5IHRvXG4gICAgICAgIC8vIGVuc3VyZSBvYnNlcnZhYmxlLm9wdGlvbnMucXVlcnkgaXMgc2V0IHRvIHRoZSByYXcgdW50cmFuc2Zvcm1lZCBxdWVyeS5cbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHRoaXMuZ2V0VmFyaWFibGVzKHF1ZXJ5LCBvcHRpb25zLnZhcmlhYmxlcyksXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5ub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG9wdGlvbnMubm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGVRdWVyeSh7XG4gICAgICAgICAgICBxdWVyeU1hbmFnZXI6IHRoaXMsXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgdHJhbnNmb3JtZWRRdWVyeTogcXVlcnksXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9XG4gICAgcXVlcnkob3B0aW9ucykge1xuICAgICAgICBjb25zdCBxdWVyeSA9IHRoaXMudHJhbnNmb3JtKG9wdGlvbnMucXVlcnkpO1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaFF1ZXJ5KHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgfSkudGhlbigodmFsdWUpID0+ICh7XG4gICAgICAgICAgICAuLi52YWx1ZSxcbiAgICAgICAgICAgIGRhdGE6IHRoaXMubWFza09wZXJhdGlvbih7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgIGRhdGE6IHZhbHVlPy5kYXRhLFxuICAgICAgICAgICAgICAgIGZldGNoUG9saWN5OiBvcHRpb25zLmZldGNoUG9saWN5LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmVxdWVzdElkQ291bnRlciA9IDE7XG4gICAgZ2VuZXJhdGVSZXF1ZXN0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RJZENvdW50ZXIrKztcbiAgICB9XG4gICAgY2xlYXJTdG9yZShvcHRpb25zID0ge1xuICAgICAgICBkaXNjYXJkV2F0Y2hlczogdHJ1ZSxcbiAgICB9KSB7XG4gICAgICAgIC8vIEJlZm9yZSB3ZSBoYXZlIHNlbnQgdGhlIHJlc2V0IGFjdGlvbiB0byB0aGUgc3RvcmUsIHdlIGNhbiBubyBsb25nZXJcbiAgICAgICAgLy8gcmVseSBvbiB0aGUgcmVzdWx0cyByZXR1cm5lZCBieSBpbi1mbGlnaHQgcmVxdWVzdHMgc2luY2UgdGhlc2UgbWF5XG4gICAgICAgIC8vIGRlcGVuZCBvbiB2YWx1ZXMgdGhhdCBwcmV2aW91c2x5IGV4aXN0ZWQgaW4gdGhlIGRhdGEgcG9ydGlvbiBvZiB0aGVcbiAgICAgICAgLy8gc3RvcmUuIFNvLCB3ZSBjYW5jZWwgdGhlIHByb21pc2VzIGFuZCBvYnNlcnZlcnMgdGhhdCB3ZSBoYXZlIGlzc3VlZFxuICAgICAgICAvLyBzbyBmYXIgYW5kIG5vdCB5ZXQgcmVzb2x2ZWQgKGluIHRoZSBjYXNlIG9mIHF1ZXJpZXMpLlxuICAgICAgICB0aGlzLmNhbmNlbFBlbmRpbmdGZXRjaGVzKG5ld0ludmFyaWFudEVycm9yKDg1KSk7XG4gICAgICAgIHRoaXMub2JzUXVlcmllcy5mb3JFYWNoKChvYnNlcnZhYmxlUXVlcnkpID0+IHtcbiAgICAgICAgICAgIC8vIFNldCBsb2FkaW5nIHRvIHRydWUgc28gbGlzdGVuZXJzIGRvbid0IHRyaWdnZXIgdW5sZXNzIHRoZXkgd2FudFxuICAgICAgICAgICAgLy8gcmVzdWx0cyB3aXRoIHBhcnRpYWwgZGF0YS5cbiAgICAgICAgICAgIG9ic2VydmFibGVRdWVyeS5yZXNldCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMubXV0YXRpb25TdG9yZSkge1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvblN0b3JlID0ge307XG4gICAgICAgIH1cbiAgICAgICAgLy8gYmVnaW4gcmVtb3ZpbmcgZGF0YSBmcm9tIHRoZSBzdG9yZVxuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5yZXNldChvcHRpb25zKTtcbiAgICB9XG4gICAgZ2V0T2JzZXJ2YWJsZVF1ZXJpZXMoaW5jbHVkZSA9IFwiYWN0aXZlXCIpIHtcbiAgICAgICAgY29uc3QgcXVlcmllcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgY29uc3QgcXVlcnlOYW1lcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgcXVlcnlOYW1lc0FuZFF1ZXJ5U3RyaW5ncyA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgbGVnYWN5UXVlcnlPcHRpb25zID0gbmV3IFNldCgpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbmNsdWRlKSkge1xuICAgICAgICAgICAgaW5jbHVkZS5mb3JFYWNoKChkZXNjKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5TmFtZXMuc2V0KGRlc2MsIGRlc2MpO1xuICAgICAgICAgICAgICAgICAgICBxdWVyeU5hbWVzQW5kUXVlcnlTdHJpbmdzLnNldChkZXNjLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzRG9jdW1lbnROb2RlKGRlc2MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcHJpbnQodGhpcy50cmFuc2Zvcm0oZGVzYykpO1xuICAgICAgICAgICAgICAgICAgICBxdWVyeU5hbWVzLnNldChxdWVyeVN0cmluZywgZ2V0T3BlcmF0aW9uTmFtZShkZXNjKSk7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5TmFtZXNBbmRRdWVyeVN0cmluZ3Muc2V0KHF1ZXJ5U3RyaW5nLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTm9uTnVsbE9iamVjdChkZXNjKSAmJiBkZXNjLnF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZ2FjeVF1ZXJ5T3B0aW9ucy5hZGQoZGVzYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNRdWVyaWVzLmZvckVhY2goKG9xKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IHByaW50KHRoaXMudHJhbnNmb3JtKG9xLm9wdGlvbnMucXVlcnkpKTtcbiAgICAgICAgICAgIGlmIChpbmNsdWRlID09PSBcImFsbFwiKSB7XG4gICAgICAgICAgICAgICAgcXVlcmllcy5hZGQob3EpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgcXVlcnlOYW1lLCBvcHRpb25zOiB7IGZldGNoUG9saWN5IH0sIH0gPSBvcTtcbiAgICAgICAgICAgIGlmIChpbmNsdWRlID09PSBcImFjdGl2ZVwiICYmIGZldGNoUG9saWN5ID09PSBcInN0YW5kYnlcIikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmNsdWRlID09PSBcImFjdGl2ZVwiIHx8XG4gICAgICAgICAgICAgICAgKHF1ZXJ5TmFtZSAmJiBxdWVyeU5hbWVzQW5kUXVlcnlTdHJpbmdzLmhhcyhxdWVyeU5hbWUpKSB8fFxuICAgICAgICAgICAgICAgIChkb2N1bWVudCAmJiBxdWVyeU5hbWVzQW5kUXVlcnlTdHJpbmdzLmhhcyhkb2N1bWVudCkpKSB7XG4gICAgICAgICAgICAgICAgcXVlcmllcy5hZGQob3EpO1xuICAgICAgICAgICAgICAgIGlmIChxdWVyeU5hbWUpXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5TmFtZXNBbmRRdWVyeVN0cmluZ3Muc2V0KHF1ZXJ5TmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50KVxuICAgICAgICAgICAgICAgICAgICBxdWVyeU5hbWVzQW5kUXVlcnlTdHJpbmdzLnNldChkb2N1bWVudCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobGVnYWN5UXVlcnlPcHRpb25zLnNpemUpIHtcbiAgICAgICAgICAgIGxlZ2FjeVF1ZXJ5T3B0aW9ucy5mb3JFYWNoKChvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3EgPSBuZXcgT2JzZXJ2YWJsZVF1ZXJ5KHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlNYW5hZ2VyOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3k6IFwibmV0d29yay1vbmx5XCIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcXVlcmllcy5hZGQob3EpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9fREVWX18gJiYgcXVlcnlOYW1lc0FuZFF1ZXJ5U3RyaW5ncy5zaXplKSB7XG4gICAgICAgICAgICBxdWVyeU5hbWVzQW5kUXVlcnlTdHJpbmdzLmZvckVhY2goKGluY2x1ZGVkLCBuYW1lT3JRdWVyeVN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaW5jbHVkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcXVlcnlOYW1lID0gcXVlcnlOYW1lcy5nZXQobmFtZU9yUXVlcnlTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKDg2LCBxdWVyeU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQud2Fybig4Nyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcXVlcmllcztcbiAgICB9XG4gICAgcmVmZXRjaE9ic2VydmFibGVRdWVyaWVzKGluY2x1ZGVTdGFuZGJ5ID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2YWJsZVF1ZXJ5UHJvbWlzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXRPYnNlcnZhYmxlUXVlcmllcyhpbmNsdWRlU3RhbmRieSA/IFwiYWxsXCIgOiBcImFjdGl2ZVwiKS5mb3JFYWNoKChvYnNlcnZhYmxlUXVlcnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZmV0Y2hQb2xpY3kgfSA9IG9ic2VydmFibGVRdWVyeS5vcHRpb25zO1xuICAgICAgICAgICAgaWYgKChpbmNsdWRlU3RhbmRieSB8fCBmZXRjaFBvbGljeSAhPT0gXCJzdGFuZGJ5XCIpICYmXG4gICAgICAgICAgICAgICAgZmV0Y2hQb2xpY3kgIT09IFwiY2FjaGUtb25seVwiKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2YWJsZVF1ZXJ5UHJvbWlzZXMucHVzaChvYnNlcnZhYmxlUXVlcnkucmVmZXRjaCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob2JzZXJ2YWJsZVF1ZXJ5UHJvbWlzZXMpO1xuICAgIH1cbiAgICBzdGFydEdyYXBoUUxTdWJzY3JpcHRpb24ob3B0aW9ucykge1xuICAgICAgICBsZXQgeyBxdWVyeSwgdmFyaWFibGVzIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7IGZldGNoUG9saWN5LCBlcnJvclBvbGljeSA9IFwibm9uZVwiLCBjb250ZXh0ID0ge30sIGV4dGVuc2lvbnMgPSB7fSwgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNoZWNrRG9jdW1lbnQocXVlcnksIE9wZXJhdGlvblR5cGVOb2RlLlNVQlNDUklQVElPTik7XG4gICAgICAgIHF1ZXJ5ID0gdGhpcy50cmFuc2Zvcm0ocXVlcnkpO1xuICAgICAgICB2YXJpYWJsZXMgPSB0aGlzLmdldFZhcmlhYmxlcyhxdWVyeSwgdmFyaWFibGVzKTtcbiAgICAgICAgbGV0IHJlc3RhcnQ7XG4gICAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgICAgICBpbnZhcmlhbnQoXG4gICAgICAgICAgICAgICAgIXRoaXMuZ2V0RG9jdW1lbnRJbmZvKHF1ZXJ5KS5oYXNDbGllbnRFeHBvcnRzIHx8IHRoaXMubG9jYWxTdGF0ZSxcbiAgICAgICAgICAgICAgICA4OCxcbiAgICAgICAgICAgICAgICBnZXRPcGVyYXRpb25OYW1lKHF1ZXJ5LCBcIihhbm9ueW1vdXMpXCIpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9ic2VydmFibGUgPSAodGhpcy5nZXREb2N1bWVudEluZm8ocXVlcnkpLmhhc0NsaWVudEV4cG9ydHMgP1xuICAgICAgICAgICAgZnJvbSh0aGlzLmxvY2FsU3RhdGUuZ2V0RXhwb3J0ZWRWYXJpYWJsZXMoe1xuICAgICAgICAgICAgICAgIGNsaWVudDogdGhpcy5jbGllbnQsXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICA6IG9mKHZhcmlhYmxlcykpLnBpcGUobWVyZ2VNYXAoKHZhcmlhYmxlcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBvYnNlcnZhYmxlLCByZXN0YXJ0OiByZXMgfSA9IHRoaXMuZ2V0T2JzZXJ2YWJsZUZyb21MaW5rKHF1ZXJ5LCBjb250ZXh0LCB2YXJpYWJsZXMsIGV4dGVuc2lvbnMpO1xuICAgICAgICAgICAgY29uc3QgcXVlcnlJbmZvID0gbmV3IFF1ZXJ5SW5mbyh0aGlzKTtcbiAgICAgICAgICAgIHJlc3RhcnQgPSByZXM7XG4gICAgICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZS5waXBlKG1hcCgocmF3UmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLm1hcmtTdWJzY3JpcHRpb25SZXN1bHQocmF3UmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBxdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvclBvbGljeSxcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVXcml0ZUJlaGF2aW9yOiBmZXRjaFBvbGljeSA9PT0gXCJuby1jYWNoZVwiID9cbiAgICAgICAgICAgICAgICAgICAgICAgIDAgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLkZPUkJJRCAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAyIC8qIENhY2hlV3JpdGVCZWhhdmlvci5NRVJHRSAqLyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHJhd1Jlc3VsdC5kYXRhID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChncmFwaFFMUmVzdWx0SGFzRXJyb3IocmF3UmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXJyb3IgPSBuZXcgQ29tYmluZWRHcmFwaFFMRXJyb3JzKHJhd1Jlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdyYXBoUUxSZXN1bHRIYXNQcm90b2NvbEVycm9ycyhyYXdSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5lcnJvciA9IHJhd1Jlc3VsdC5leHRlbnNpb25zW1BST1RPQ09MX0VSUk9SU19TWU1CT0xdO1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBlbWl0IHByb3RvY29sIGVycm9ycyBhZGRlZCBieSBIdHRwTGlua1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmF3UmVzdWx0LmV4dGVuc2lvbnNbUFJPVE9DT0xfRVJST1JTX1NZTUJPTF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyYXdSZXN1bHQuZXh0ZW5zaW9ucyAmJlxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhyYXdSZXN1bHQuZXh0ZW5zaW9ucykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5leHRlbnNpb25zID0gcmF3UmVzdWx0LmV4dGVuc2lvbnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3IgJiYgZXJyb3JQb2xpY3kgPT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JQb2xpY3kgPT09IFwiaWdub3JlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5lcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0pLCBjYXRjaEVycm9yKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvclBvbGljeSA9PT0gXCJpZ25vcmVcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9mKHsgZGF0YTogdW5kZWZpbmVkLCBlcnJvciB9KTtcbiAgICAgICAgICAgIH0pLCBmaWx0ZXIoKHJlc3VsdCkgPT4gISEocmVzdWx0LmRhdGEgfHwgcmVzdWx0LmVycm9yKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG9ic2VydmFibGUsIHsgcmVzdGFydDogKCkgPT4gcmVzdGFydD8uKCkgfSk7XG4gICAgfVxuICAgIGJyb2FkY2FzdFF1ZXJpZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLm9uQnJvYWRjYXN0KVxuICAgICAgICAgICAgdGhpcy5vbkJyb2FkY2FzdCgpO1xuICAgICAgICB0aGlzLm9ic1F1ZXJpZXMuZm9yRWFjaCgob2JzZXJ2YWJsZVF1ZXJ5KSA9PiBvYnNlcnZhYmxlUXVlcnkubm90aWZ5KCkpO1xuICAgIH1cbiAgICAvLyBVc2UgcHJvdGVjdGVkIGluc3RlYWQgb2YgcHJpdmF0ZSBmaWVsZCBzb1xuICAgIC8vIEBhcG9sbG8vZXhwZXJpbWVudGFsLW5leHRqcy1hcHAtc3VwcG9ydCBjYW4gYWNjZXNzIHR5cGUgaW5mby5cbiAgICBpbkZsaWdodExpbmtPYnNlcnZhYmxlcyA9IG5ldyBUcmllKGZhbHNlKTtcbiAgICBnZXRPYnNlcnZhYmxlRnJvbUxpbmsocXVlcnksIGNvbnRleHQsIHZhcmlhYmxlcywgZXh0ZW5zaW9ucywgXG4gICAgLy8gUHJlZmVyIGNvbnRleHQucXVlcnlEZWR1cGxpY2F0aW9uIGlmIHNwZWNpZmllZC5cbiAgICBkZWR1cGxpY2F0aW9uID0gY29udGV4dD8ucXVlcnlEZWR1cGxpY2F0aW9uID8/XG4gICAgICAgIHRoaXMucXVlcnlEZWR1cGxpY2F0aW9uKSB7XG4gICAgICAgIGxldCBlbnRyeSA9IHt9O1xuICAgICAgICBjb25zdCB7IHNlcnZlclF1ZXJ5LCBjbGllbnRRdWVyeSwgb3BlcmF0aW9uVHlwZSwgaGFzSW5jcmVtZW50YWxEaXJlY3RpdmUgfSA9IHRoaXMuZ2V0RG9jdW1lbnRJbmZvKHF1ZXJ5KTtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uTmFtZSA9IGdldE9wZXJhdGlvbk5hbWUocXVlcnkpO1xuICAgICAgICBjb25zdCBleGVjdXRlQ29udGV4dCA9IHtcbiAgICAgICAgICAgIGNsaWVudDogdGhpcy5jbGllbnQsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZXJ2ZXJRdWVyeSkge1xuICAgICAgICAgICAgY29uc3QgeyBpbkZsaWdodExpbmtPYnNlcnZhYmxlcywgbGluayB9ID0gdGhpcztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gdGhpcy5pbmNyZW1lbnRhbEhhbmRsZXIucHJlcGFyZVJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgICAgICBxdWVyeTogc2VydmVyUXVlcnksXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5kZWZhdWx0Q29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURlZHVwbGljYXRpb246IGRlZHVwbGljYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IG9wZXJhdGlvbi5jb250ZXh0O1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdpdGhSZXN0YXJ0KHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoKG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBvYnNlcnZlci5uZXh0LmJpbmQob2JzZXJ2ZXIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogb2JzZXJ2ZXIuY29tcGxldGUuYmluZChvYnNlcnZlciksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBvYnNlcnZlci5lcnJvci5iaW5kKG9ic2VydmVyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWJzY3JpcHRpb24gPSBzdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnJlc3RhcnQgfHw9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBzdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5LnJlc3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRlZHVwbGljYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpbnRlZFNlcnZlclF1ZXJ5ID0gcHJpbnQoc2VydmVyUXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXJKc29uID0gY2Fub25pY2FsU3RyaW5naWZ5KHZhcmlhYmxlcyk7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gaW5GbGlnaHRMaW5rT2JzZXJ2YWJsZXMubG9va3VwKHByaW50ZWRTZXJ2ZXJRdWVyeSwgdmFySnNvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZW50cnkub2JzZXJ2YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW50cnkub2JzZXJ2YWJsZSA9IGV4ZWN1dGUobGluaywgb3BlcmF0aW9uLCBleGVjdXRlQ29udGV4dCkucGlwZSh3aXRoUmVzdGFydCwgZmluYWxpemUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbkZsaWdodExpbmtPYnNlcnZhYmxlcy5wZWVrKHByaW50ZWRTZXJ2ZXJRdWVyeSwgdmFySnNvbikgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluRmxpZ2h0TGlua09ic2VydmFibGVzLnJlbW92ZShwcmludGVkU2VydmVyUXVlcnksIHZhckpzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gcmVwbGF5IHRoZSBsYXN0IGVtaXR0ZWQgdmFsdWUgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdWJzY3JpcHRpb25zIGFuZCBpbnN0ZWFkIG9wdCB0byB3YWl0IHRvIHJlY2VpdmUgdXBkYXRlcyB1bnRpbFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHN1YnNjcmlwdGlvbiBlbWl0cyBuZXcgdmFsdWVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uVHlwZSA9PT0gT3BlcmF0aW9uVHlwZU5vZGUuU1VCU0NSSVBUSU9OID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzaGFyZVJlcGxheSh7IHJlZkNvdW50OiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkub2JzZXJ2YWJsZSA9IGV4ZWN1dGUobGluaywgb3BlcmF0aW9uLCBleGVjdXRlQ29udGV4dCkucGlwZSh3aXRoUmVzdGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZW50cnkub2JzZXJ2YWJsZSA9IHRocm93RXJyb3IoKCkgPT4gZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW50cnkub2JzZXJ2YWJsZSA9IG9mKHsgZGF0YToge30gfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsaWVudFF1ZXJ5KSB7XG4gICAgICAgICAgICBjb25zdCB7IG9wZXJhdGlvbiB9ID0gZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbihxdWVyeSk7XG4gICAgICAgICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAgICAgICAgIGludmFyaWFudChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFN0YXRlLFxuICAgICAgICAgICAgICAgICAgICA4OSxcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uWzBdLnRvVXBwZXJDYXNlKCkgKyBvcGVyYXRpb24uc2xpY2UoMSksXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbk5hbWUgPz8gXCIoYW5vbnltb3VzKVwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGludmFyaWFudChcbiAgICAgICAgICAgICAgICAhaGFzSW5jcmVtZW50YWxEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgOTAsXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uWzBdLnRvVXBwZXJDYXNlKCkgKyBvcGVyYXRpb24uc2xpY2UoMSksXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uTmFtZSA/PyBcIihhbm9ueW1vdXMpXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBlbnRyeS5vYnNlcnZhYmxlID0gZW50cnkub2JzZXJ2YWJsZS5waXBlKG1lcmdlTWFwKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbSh0aGlzLmxvY2FsU3RhdGUuZXhlY3V0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudDogdGhpcy5jbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiBjbGllbnRRdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlUmVzdWx0OiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RhcnQ6ICgpID0+IGVudHJ5LnJlc3RhcnQ/LigpLFxuICAgICAgICAgICAgb2JzZXJ2YWJsZTogZW50cnkub2JzZXJ2YWJsZS5waXBlKGNhdGNoRXJyb3IoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSB0b0Vycm9yTGlrZShlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJMaW5rRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRSZXN1bHRzRnJvbUxpbmsob3B0aW9ucywgeyBxdWVyeUluZm8sIGNhY2hlV3JpdGVCZWhhdmlvciwgb2JzZXJ2YWJsZVF1ZXJ5LCB9KSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RJZCA9IChxdWVyeUluZm8ubGFzdFJlcXVlc3RJZCA9IHRoaXMuZ2VuZXJhdGVSZXF1ZXN0SWQoKSk7XG4gICAgICAgIGNvbnN0IHsgZXJyb3JQb2xpY3kgfSA9IG9wdGlvbnM7XG4gICAgICAgIC8vIFBlcmZvcm1pbmcgdHJhbnNmb3JtRm9yTGluayBoZXJlIGdpdmVzIHRoaXMuY2FjaGUgYSBjaGFuY2UgdG8gZmlsbCBpblxuICAgICAgICAvLyBtaXNzaW5nIGZyYWdtZW50IGRlZmluaXRpb25zIChmb3IgZXhhbXBsZSkgYmVmb3JlIHNlbmRpbmcgdGhpcyBkb2N1bWVudFxuICAgICAgICAvLyB0aHJvdWdoIHRoZSBsaW5rIGNoYWluLlxuICAgICAgICBjb25zdCBsaW5rRG9jdW1lbnQgPSB0aGlzLmNhY2hlLnRyYW5zZm9ybUZvckxpbmsob3B0aW9ucy5xdWVyeSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9ic2VydmFibGVGcm9tTGluayhsaW5rRG9jdW1lbnQsIG9wdGlvbnMuY29udGV4dCwgb3B0aW9ucy52YXJpYWJsZXMpLm9ic2VydmFibGUucGlwZShtYXAoKGluY29taW5nKSA9PiB7XG4gICAgICAgICAgICAvLyBVc2UgbGlua0RvY3VtZW50IHJhdGhlciB0aGFuIHF1ZXJ5SW5mby5kb2N1bWVudCBzbyB0aGVcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbi9mcmFnbWVudHMgdXNlZCB0byB3cml0ZSB0aGUgcmVzdWx0IGFyZSB0aGUgc2FtZSBhcyB0aGVcbiAgICAgICAgICAgIC8vIG9uZXMgdXNlZCB0byBvYnRhaW4gaXQgZnJvbSB0aGUgbGluay5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHF1ZXJ5SW5mby5tYXJrUXVlcnlSZXN1bHQoaW5jb21pbmcsIHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBsaW5rRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgY2FjaGVXcml0ZUJlaGF2aW9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBoYXNFcnJvcnMgPSBncmFwaFFMUmVzdWx0SGFzRXJyb3IocmVzdWx0KTtcbiAgICAgICAgICAgIGlmIChoYXNFcnJvcnMgJiYgZXJyb3JQb2xpY3kgPT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLnJlc2V0TGFzdFdyaXRlKCk7XG4gICAgICAgICAgICAgICAgb2JzZXJ2YWJsZVF1ZXJ5Py5bXCJyZXNldE5vdGlmaWNhdGlvbnNcIl0oKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29tYmluZWRHcmFwaFFMRXJyb3JzKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhcXIgPSB7XG4gICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgLi4uKHF1ZXJ5SW5mby5oYXNOZXh0ID9cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtTdGF0dXM6IE5ldHdvcmtTdGF0dXMuc3RyZWFtaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVN0YXRlOiBcInN0cmVhbWluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTdGF0ZTogcmVzdWx0LmRhdGEgPyBcImNvbXBsZXRlXCIgOiBcImVtcHR5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldHdvcmtTdGF0dXM6IE5ldHdvcmtTdGF0dXMucmVhZHksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsOiAhcmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEluIHRoZSBjYXNlIHdlIHN0YXJ0IG11bHRpcGxlIG5ldHdvcmsgcmVxdWVzdHMgc2ltdWxhdGVub3VzbHksIHdlXG4gICAgICAgICAgICAvLyB3YW50IHRvIGVuc3VyZSB3ZSBwcm9wZXJseSBzZXQgYGRhdGFgIGlmIHdlJ3JlIHJlcG9ydGluZyBvbiBhbiBvbGRcbiAgICAgICAgICAgIC8vIHJlc3VsdCB3aGljaCB3aWxsIG5vdCBiZSBjYXVnaHQgYnkgdGhlIGNvbmRpdGlvbmFsIGFib3ZlIHRoYXQgZW5kcyB1cFxuICAgICAgICAgICAgLy8gdGhyb3dpbmcgdGhlIG1hcmtFcnJvciByZXN1bHQuXG4gICAgICAgICAgICBpZiAoaGFzRXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yUG9saWN5ID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICBhcXIuZGF0YSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgYXFyLmRhdGFTdGF0ZSA9IFwiZW1wdHlcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yUG9saWN5ICE9PSBcImlnbm9yZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFxci5lcnJvciA9IG5ldyBDb21iaW5lZEdyYXBoUUxFcnJvcnMocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFxci5kYXRhU3RhdGUgIT09IFwic3RyZWFtaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFxci5uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcXI7XG4gICAgICAgIH0pLCBjYXRjaEVycm9yKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgLy8gQXZvaWQgc3RvcmluZyBlcnJvcnMgZnJvbSBvbGRlciBpbnRlcnJ1cHRlZCBxdWVyaWVzLlxuICAgICAgICAgICAgaWYgKHJlcXVlc3RJZCA+PSBxdWVyeUluZm8ubGFzdFJlcXVlc3RJZCAmJiBlcnJvclBvbGljeSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICBxdWVyeUluZm8ucmVzZXRMYXN0V3JpdGUoKTtcbiAgICAgICAgICAgICAgICBvYnNlcnZhYmxlUXVlcnk/LltcInJlc2V0Tm90aWZpY2F0aW9uc1wiXSgpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXFyID0ge1xuICAgICAgICAgICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBkYXRhU3RhdGU6IFwiZW1wdHlcIixcbiAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuZXR3b3JrU3RhdHVzOiBOZXR3b3JrU3RhdHVzLnJlYWR5LFxuICAgICAgICAgICAgICAgIHBhcnRpYWw6IHRydWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGVycm9yUG9saWN5ICE9PSBcImlnbm9yZVwiKSB7XG4gICAgICAgICAgICAgICAgYXFyLmVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgYXFyLm5ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLmVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9mKGFxcik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZmV0Y2hPYnNlcnZhYmxlV2l0aEluZm8ob3B0aW9ucywgeyBcbiAgICAvLyBUaGUgaW5pdGlhbCBuZXR3b3JrU3RhdHVzIGZvciB0aGlzIGZldGNoLCBtb3N0IG9mdGVuXG4gICAgLy8gTmV0d29ya1N0YXR1cy5sb2FkaW5nLCBidXQgYWxzbyBwb3NzaWJseSBmZXRjaE1vcmUsIHBvbGwsIHJlZmV0Y2gsXG4gICAgLy8gb3Igc2V0VmFyaWFibGVzLlxuICAgIG5ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLmxvYWRpbmcsIHF1ZXJ5ID0gb3B0aW9ucy5xdWVyeSwgZmV0Y2hRdWVyeU9wZXJhdG9yID0gKHgpID0+IHgsIG9uQ2FjaGVIaXQgPSAoKSA9PiB7IH0sIG9ic2VydmFibGVRdWVyeSwgfSkge1xuICAgICAgICBjb25zdCB2YXJpYWJsZXMgPSB0aGlzLmdldFZhcmlhYmxlcyhxdWVyeSwgb3B0aW9ucy52YXJpYWJsZXMpO1xuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHRoaXMuZGVmYXVsdE9wdGlvbnMud2F0Y2hRdWVyeTtcbiAgICAgICAgbGV0IHsgZmV0Y2hQb2xpY3kgPSAoZGVmYXVsdHMgJiYgZGVmYXVsdHMuZmV0Y2hQb2xpY3kpIHx8IFwiY2FjaGUtZmlyc3RcIiwgZXJyb3JQb2xpY3kgPSAoZGVmYXVsdHMgJiYgZGVmYXVsdHMuZXJyb3JQb2xpY3kpIHx8IFwibm9uZVwiLCByZXR1cm5QYXJ0aWFsRGF0YSA9IGZhbHNlLCBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2UgPSB0cnVlLCBjb250ZXh0ID0ge30sIH0gPSBvcHRpb25zO1xuICAgICAgICBpZiAodGhpcy5wcmlvcml0aXplQ2FjaGVWYWx1ZXMgJiZcbiAgICAgICAgICAgIChmZXRjaFBvbGljeSA9PT0gXCJuZXR3b3JrLW9ubHlcIiB8fCBmZXRjaFBvbGljeSA9PT0gXCJjYWNoZS1hbmQtbmV0d29ya1wiKSkge1xuICAgICAgICAgICAgZmV0Y2hQb2xpY3kgPSBcImNhY2hlLWZpcnN0XCI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMsIHtcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgZmV0Y2hQb2xpY3ksXG4gICAgICAgICAgICBlcnJvclBvbGljeSxcbiAgICAgICAgICAgIHJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgICAgICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlLFxuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5SW5mbyA9IG5ldyBRdWVyeUluZm8odGhpcywgb2JzZXJ2YWJsZVF1ZXJ5KTtcbiAgICAgICAgY29uc3QgZnJvbVZhcmlhYmxlcyA9ICh2YXJpYWJsZXMpID0+IHtcbiAgICAgICAgICAgIC8vIFNpbmNlIG5vcm1hbGl6ZWQgaXMgYWx3YXlzIGEgZnJlc2ggY29weSBvZiBvcHRpb25zLCBpdCdzIHNhZmUgdG9cbiAgICAgICAgICAgIC8vIG1vZGlmeSBpdHMgcHJvcGVydGllcyBoZXJlLCByYXRoZXIgdGhhbiBjcmVhdGluZyB5ZXQgYW5vdGhlciBuZXdcbiAgICAgICAgICAgIC8vIFdhdGNoUXVlcnlPcHRpb25zIG9iamVjdC5cbiAgICAgICAgICAgIG5vcm1hbGl6ZWQudmFyaWFibGVzID0gdmFyaWFibGVzO1xuICAgICAgICAgICAgY29uc3QgY2FjaGVXcml0ZUJlaGF2aW9yID0gZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIiA/IDAgLyogQ2FjaGVXcml0ZUJlaGF2aW9yLkZPUkJJRCAqL1xuICAgICAgICAgICAgICAgIC8vIFdhdGNoZWQgcXVlcmllcyBtdXN0IG9wdCBpbnRvIG92ZXJ3cml0aW5nIGV4aXN0aW5nIGRhdGEgb24gcmVmZXRjaCxcbiAgICAgICAgICAgICAgICAvLyBieSBwYXNzaW5nIHJlZmV0Y2hXcml0ZVBvbGljeTogXCJvdmVyd3JpdGVcIiBpbiB0aGVpciBXYXRjaFF1ZXJ5T3B0aW9ucy5cbiAgICAgICAgICAgICAgICA6IChuZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLnJlZmV0Y2ggJiZcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZC5yZWZldGNoV3JpdGVQb2xpY3kgIT09IFwibWVyZ2VcIikgP1xuICAgICAgICAgICAgICAgICAgICAxIC8qIENhY2hlV3JpdGVCZWhhdmlvci5PVkVSV1JJVEUgKi9cbiAgICAgICAgICAgICAgICAgICAgOiAyIC8qIENhY2hlV3JpdGVCZWhhdmlvci5NRVJHRSAqLztcbiAgICAgICAgICAgIGNvbnN0IG9ic2VydmFibGVXaXRoSW5mbyA9IHRoaXMuZmV0Y2hRdWVyeUJ5UG9saWN5KG5vcm1hbGl6ZWQsIHsgcXVlcnlJbmZvLCBjYWNoZVdyaXRlQmVoYXZpb3IsIG9uQ2FjaGVIaXQsIG9ic2VydmFibGVRdWVyeSB9KTtcbiAgICAgICAgICAgIG9ic2VydmFibGVXaXRoSW5mby5vYnNlcnZhYmxlID1cbiAgICAgICAgICAgICAgICBvYnNlcnZhYmxlV2l0aEluZm8ub2JzZXJ2YWJsZS5waXBlKGZldGNoUXVlcnlPcGVyYXRvcik7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBJZiB3ZSdyZSBpbiBzdGFuZGJ5LCBwb3N0cG9uZSBhZHZhbmNpbmcgb3B0aW9ucy5mZXRjaFBvbGljeSB1c2luZ1xuICAgICAgICAgICAgLy8gYXBwbHlOZXh0RmV0Y2hQb2xpY3kuXG4gICAgICAgICAgICBub3JtYWxpemVkLmZldGNoUG9saWN5ICE9PSBcInN0YW5kYnlcIikge1xuICAgICAgICAgICAgICAgIG9ic2VydmFibGVRdWVyeT8uW1wiYXBwbHlOZXh0RmV0Y2hQb2xpY3lcIl0oXCJhZnRlci1mZXRjaFwiLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYnNlcnZhYmxlV2l0aEluZm87XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRoaXMgY2FuY2VsIGZ1bmN0aW9uIG5lZWRzIHRvIGJlIHNldCBiZWZvcmUgdGhlIGNvbmNhc3QgaXMgY3JlYXRlZCxcbiAgICAgICAgLy8gaW4gY2FzZSBjb25jYXN0IGNyZWF0aW9uIHN5bmNocm9ub3VzbHkgY2FuY2VscyB0aGUgcmVxdWVzdC5cbiAgICAgICAgY29uc3QgY2xlYW51cENhbmNlbEZuID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mZXRjaENhbmNlbEZucy5kZWxldGUocXVlcnlJbmZvLmlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mZXRjaENhbmNlbEZucy5zZXQocXVlcnlJbmZvLmlkLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGZldGNoQ2FuY2VsU3ViamVjdC5uZXh0KHtcbiAgICAgICAgICAgICAgICBraW5kOiBcIkVcIixcbiAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICBzb3VyY2U6IFwibmV0d29ya1wiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmZXRjaENhbmNlbFN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICBsZXQgb2JzZXJ2YWJsZSwgY29udGFpbnNEYXRhRnJvbUxpbms7XG4gICAgICAgIC8vIElmIHRoZSBxdWVyeSBoYXMgQGV4cG9ydChhczogLi4uKSBkaXJlY3RpdmVzLCB0aGVuIHdlIG5lZWQgdG9cbiAgICAgICAgLy8gcHJvY2VzcyB0aG9zZSBkaXJlY3RpdmVzIGFzeW5jaHJvbm91c2x5LiBXaGVuIHRoZXJlIGFyZSBub1xuICAgICAgICAvLyBAZXhwb3J0IGRpcmVjdGl2ZXMgKHRoZSBjb21tb24gY2FzZSksIHdlIGRlbGliZXJhdGVseSBhdm9pZFxuICAgICAgICAvLyB3cmFwcGluZyB0aGUgcmVzdWx0IG9mIHRoaXMuZmV0Y2hRdWVyeUJ5UG9saWN5IGluIGEgUHJvbWlzZSxcbiAgICAgICAgLy8gc2luY2UgdGhlIHRpbWluZyBvZiByZXN1bHQgZGVsaXZlcnkgaXMgKHVuZm9ydHVuYXRlbHkpIGltcG9ydGFudFxuICAgICAgICAvLyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuIFRPRE8gVGhpcyBjb2RlIGNvdWxkIGJlIHNpbXBsZXIgaWZcbiAgICAgICAgLy8gd2UgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZCBMb2NhbFN0YXRlLlxuICAgICAgICBpZiAodGhpcy5nZXREb2N1bWVudEluZm8obm9ybWFsaXplZC5xdWVyeSkuaGFzQ2xpZW50RXhwb3J0cykge1xuICAgICAgICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgICAgICAgICBpbnZhcmlhbnQodGhpcy5sb2NhbFN0YXRlLCA5MSwgZ2V0T3BlcmF0aW9uTmFtZShub3JtYWxpemVkLnF1ZXJ5LCBcIihhbm9ueW1vdXMpXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9ic2VydmFibGUgPSBmcm9tKHRoaXMubG9jYWxTdGF0ZS5nZXRFeHBvcnRlZFZhcmlhYmxlcyh7XG4gICAgICAgICAgICAgICAgY2xpZW50OiB0aGlzLmNsaWVudCxcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogbm9ybWFsaXplZC5xdWVyeSxcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IG5vcm1hbGl6ZWQudmFyaWFibGVzLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IG5vcm1hbGl6ZWQuY29udGV4dCxcbiAgICAgICAgICAgIH0pKS5waXBlKG1lcmdlTWFwKCh2YXJpYWJsZXMpID0+IGZyb21WYXJpYWJsZXModmFyaWFibGVzKS5vYnNlcnZhYmxlKSk7XG4gICAgICAgICAgICAvLyB0aGVyZSBpcyBqdXN0IG5vIHdheSB3ZSBjYW4gc3luY2hyb25vdXNseSBnZXQgdGhlICpyaWdodCogdmFsdWUgaGVyZSxcbiAgICAgICAgICAgIC8vIHNvIHdlIHdpbGwgYXNzdW1lIGB0cnVlYCwgd2hpY2ggaXMgdGhlIGJlaGF2aW91ciBiZWZvcmUgdGhlIGJ1ZyBmaXggaW5cbiAgICAgICAgICAgIC8vICMxMDU5Ny4gVGhpcyBtZWFucyB0aGF0IGJ1ZyBpcyBub3QgZml4ZWQgaW4gdGhhdCBjYXNlLCBhbmQgaXMgcHJvYmFibHlcbiAgICAgICAgICAgIC8vIHVuLWZpeGFibGUgd2l0aCByZWFzb25hYmxlIGVmZm9ydCBmb3IgdGhlIGVkZ2UgY2FzZSBvZiBAZXhwb3J0IGFzXG4gICAgICAgICAgICAvLyBkaXJlY3RpdmVzLlxuICAgICAgICAgICAgY29udGFpbnNEYXRhRnJvbUxpbmsgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc291cmNlc1dpdGhJbmZvID0gZnJvbVZhcmlhYmxlcyhub3JtYWxpemVkLnZhcmlhYmxlcyk7XG4gICAgICAgICAgICBjb250YWluc0RhdGFGcm9tTGluayA9IHNvdXJjZXNXaXRoSW5mby5mcm9tTGluaztcbiAgICAgICAgICAgIG9ic2VydmFibGUgPSBzb3VyY2VzV2l0aEluZm8ub2JzZXJ2YWJsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy8gTWVyZ2UgYG9ic2VydmFibGVgIHdpdGggYGZldGNoQ2FuY2VsU3ViamVjdGAsIGluIGEgd2F5IHRoYXQgY29tcGxldGluZyBvclxuICAgICAgICAgICAgLy8gZXJyb3JpbmcgZWl0aGVyIG9mIHRoZW0gd2lsbCBjb21wbGV0ZSB0aGUgbWVyZ2VkIG9ic2VyYWJsZS5cbiAgICAgICAgICAgIG9ic2VydmFibGU6IG5ldyBPYnNlcnZhYmxlKChvYnNlcnZlcikgPT4ge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyLmFkZChjbGVhbnVwQ2FuY2VsRm4pO1xuICAgICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgICAgICAgICAgICBmZXRjaENhbmNlbFN1YmplY3Quc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgICAgICAgIH0pLnBpcGUoc2hhcmUoKSksXG4gICAgICAgICAgICBmcm9tTGluazogY29udGFpbnNEYXRhRnJvbUxpbmssXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJlZmV0Y2hRdWVyaWVzKHsgdXBkYXRlQ2FjaGUsIGluY2x1ZGUsIG9wdGltaXN0aWMgPSBmYWxzZSwgcmVtb3ZlT3B0aW1pc3RpYyA9IG9wdGltaXN0aWMgPyBtYWtlVW5pcXVlSWQoXCJyZWZldGNoUXVlcmllc1wiKSA6IHZvaWQgMCwgb25RdWVyeVVwZGF0ZWQsIH0pIHtcbiAgICAgICAgY29uc3QgaW5jbHVkZWRRdWVyaWVzQnlPcSA9IG5ldyBNYXAoKTtcbiAgICAgICAgaWYgKGluY2x1ZGUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0T2JzZXJ2YWJsZVF1ZXJpZXMoaW5jbHVkZSkuZm9yRWFjaCgob3EpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3Eub3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gXCJjYWNoZS1vbmx5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gb3EuZ2V0Q3VycmVudFJlc3VsdCgpO1xuICAgICAgICAgICAgICAgIGluY2x1ZGVkUXVlcmllc0J5T3Euc2V0KG9xLCB7XG4gICAgICAgICAgICAgICAgICAgIG9xLFxuICAgICAgICAgICAgICAgICAgICBsYXN0RGlmZjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBjdXJyZW50Py5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6ICFjdXJyZW50Py5wYXJ0aWFsLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgaWYgKHVwZGF0ZUNhY2hlKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVkID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5iYXRjaCh7XG4gICAgICAgICAgICAgICAgdXBkYXRlOiB1cGRhdGVDYWNoZSxcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSB5b3UgY2FuIHBlcmZvcm0gYW55IGNvbWJpbmF0aW9uIG9mIGNhY2hlIHJlYWRzIGFuZC9vciB3cml0ZXMgaW5cbiAgICAgICAgICAgICAgICAvLyB0aGUgY2FjaGUuYmF0Y2ggdXBkYXRlIGZ1bmN0aW9uLCBpdHMgb3B0aW1pc3RpYyBvcHRpb24gY2FuIGJlIGVpdGhlclxuICAgICAgICAgICAgICAgIC8vIGEgYm9vbGVhbiBvciBhIHN0cmluZywgcmVwcmVzZW50aW5nIHRocmVlIGRpc3RpbmN0IG1vZGVzIG9mXG4gICAgICAgICAgICAgICAgLy8gb3BlcmF0aW9uOlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gKiBmYWxzZTogcmVhZC93cml0ZSBvbmx5IHRoZSByb290IGxheWVyXG4gICAgICAgICAgICAgICAgLy8gKiB0cnVlOiByZWFkL3dyaXRlIHRoZSB0b3Btb3N0IGxheWVyXG4gICAgICAgICAgICAgICAgLy8gKiBzdHJpbmc6IHJlYWQvd3JpdGUgYSBmcmVzaCBvcHRpbWlzdGljIGxheWVyIHdpdGggdGhhdCBJRCBzdHJpbmdcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gdHlwZW9mIG9wdGltaXN0aWMgPT09IFwic3RyaW5nXCIsIGEgbmV3IG9wdGltaXN0aWMgbGF5ZXIgd2lsbCBiZVxuICAgICAgICAgICAgICAgIC8vIHRlbXBvcmFyaWx5IGNyZWF0ZWQgd2l0aGluIGNhY2hlLmJhdGNoIHdpdGggdGhhdCBzdHJpbmcgYXMgaXRzIElELiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlIHRoZW4gcGFzcyB0aGF0IHNhbWUgc3RyaW5nIGFzIHRoZSByZW1vdmVPcHRpbWlzdGljIG9wdGlvbiwgd2UgY2FuXG4gICAgICAgICAgICAgICAgLy8gbWFrZSBjYWNoZS5iYXRjaCBpbW1lZGlhdGVseSByZW1vdmUgdGhlIG9wdGltaXN0aWMgbGF5ZXIgYWZ0ZXJcbiAgICAgICAgICAgICAgICAvLyBydW5uaW5nIHRoZSB1cGRhdGVDYWNoZSBmdW5jdGlvbiwgdHJpZ2dlcmluZyBvbmx5IG9uZSBicm9hZGNhc3QuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgcmVmZXRjaFF1ZXJpZXMgbWV0aG9kIGFjY2VwdHMgb25seSB0cnVlIG9yIGZhbHNlIGZvciBpdHNcbiAgICAgICAgICAgICAgICAvLyBvcHRpbWlzdGljIG9wdGlvbiAobm90IHN0cmluZykuIFdlIGludGVycHJldCB0cnVlIHRvIG1lYW4gYSB0ZW1wb3JhcnlcbiAgICAgICAgICAgICAgICAvLyBvcHRpbWlzdGljIGxheWVyIHNob3VsZCBiZSBjcmVhdGVkLCB0byBhbGxvdyBlZmZpY2llbnRseSByb2xsaW5nIGJhY2tcbiAgICAgICAgICAgICAgICAvLyB0aGUgZWZmZWN0IG9mIHRoZSB1cGRhdGVDYWNoZSBmdW5jdGlvbiwgd2hpY2ggaW52b2x2ZXMgcGFzc2luZyBhXG4gICAgICAgICAgICAgICAgLy8gc3RyaW5nIGluc3RlYWQgb2YgdHJ1ZSBhcyB0aGUgb3B0aW1pc3RpYyBvcHRpb24gdG8gY2FjaGUuYmF0Y2gsIHdoZW5cbiAgICAgICAgICAgICAgICAvLyByZWZldGNoUXVlcmllcyByZWNlaXZlcyBvcHRpbWlzdGljOiB0cnVlLlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gSW4gb3RoZXIgd29yZHMsIHdlIGFyZSBkZWxpYmVyYXRlbHkgbm90IHN1cHBvcnRpbmcgdGhlIHVzZSBjYXNlIG9mXG4gICAgICAgICAgICAgICAgLy8gd3JpdGluZyB0byBhbiAqZXhpc3RpbmcqIG9wdGltaXN0aWMgbGF5ZXIgKHVzaW5nIHRoZSByZWZldGNoUXVlcmllc1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZUNhY2hlIGZ1bmN0aW9uKSwgc2luY2UgdGhhdCB3b3VsZCBwb3RlbnRpYWxseSBpbnRlcmZlcmUgd2l0aFxuICAgICAgICAgICAgICAgIC8vIG90aGVyIG9wdGltaXN0aWMgdXBkYXRlcyBpbiBwcm9ncmVzcy4gSW5zdGVhZCwgeW91IGNhbiByZWFkL3dyaXRlXG4gICAgICAgICAgICAgICAgLy8gb25seSB0aGUgcm9vdCBsYXllciBieSBwYXNzaW5nIG9wdGltaXN0aWM6IGZhbHNlIHRvIHJlZmV0Y2hRdWVyaWVzLFxuICAgICAgICAgICAgICAgIC8vIG9yIHlvdSBjYW4gcmVhZC93cml0ZSBhIGJyYW5kIG5ldyBvcHRpbWlzdGljIGxheWVyIHRoYXQgd2lsbCBiZVxuICAgICAgICAgICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBieSBwYXNzaW5nIG9wdGltaXN0aWM6IHRydWUuXG4gICAgICAgICAgICAgICAgb3B0aW1pc3RpYzogKG9wdGltaXN0aWMgJiYgcmVtb3ZlT3B0aW1pc3RpYykgfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgLy8gVGhlIHJlbW92ZU9wdGltaXN0aWMgb3B0aW9uIGNhbiBhbHNvIGJlIHByb3ZpZGVkIGJ5IGl0c2VsZiwgZXZlbiBpZlxuICAgICAgICAgICAgICAgIC8vIG9wdGltaXN0aWMgPT09IGZhbHNlLCB0byByZW1vdmUgc29tZSBwcmV2aW91c2x5LWFkZGVkIG9wdGltaXN0aWNcbiAgICAgICAgICAgICAgICAvLyBsYXllciBzYWZlbHkgYW5kIGVmZmljaWVudGx5LCBsaWtlIHdlIGRvIGluIG1hcmtNdXRhdGlvblJlc3VsdC5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIElmIGFuIGV4cGxpY2l0IHJlbW92ZU9wdGltaXN0aWMgc3RyaW5nIGlzIHByb3ZpZGVkIHdpdGggb3B0aW1pc3RpYzpcbiAgICAgICAgICAgICAgICAvLyB0cnVlLCB0aGUgcmVtb3ZlT3B0aW1pc3RpYyBzdHJpbmcgd2lsbCBkZXRlcm1pbmUgdGhlIElEIG9mIHRoZVxuICAgICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBvcHRpbWlzdGljIGxheWVyLCBpbiBjYXNlIHRoYXQgZXZlciBtYXR0ZXJzLlxuICAgICAgICAgICAgICAgIHJlbW92ZU9wdGltaXN0aWMsXG4gICAgICAgICAgICAgICAgb25XYXRjaFVwZGF0ZWQod2F0Y2gsIGRpZmYsIGxhc3REaWZmKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9xID0gd2F0Y2gud2F0Y2hlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9xIGluc3RhbmNlb2YgT2JzZXJ2YWJsZVF1ZXJ5ICYmICFoYW5kbGVkLmhhcyhvcSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZWQuYWRkKG9xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblF1ZXJ5VXBkYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHdlJ3JlIGFib3V0IHRvIGhhbmRsZSB0aGlzIHF1ZXJ5IG5vdywgcmVtb3ZlIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNsdWRlZFF1ZXJpZXNCeUlkLCBpbiBjYXNlIGl0IHdhcyBhZGRlZCBlYXJsaWVyIGJlY2F1c2Ugb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvcHRpb25zLmluY2x1ZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZWRRdWVyaWVzQnlPcS5kZWxldGUob3EpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBvblF1ZXJ5VXBkYXRlZChvcSwgZGlmZiwgbGFzdERpZmYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9uUXVlcnlVcGRhdGVkIGZ1bmN0aW9uIHJlcXVlc3RlZCB0aGUgZGVmYXVsdCByZWZldGNoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGJ5IHJldHVybmluZyB0cnVlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBvcVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlZmV0Y2goKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJldGFpbiggLyogY3JlYXRlIGEgcGVyc2lzdGVudCBzdWJzY3JpcHRpb24gb24gdGhlIHF1ZXJ5ICovKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSByZXN1bHQgaW4gdGhlIHJlc3VsdHMgTWFwLCBhcyBsb25nIGFzIG9uUXVlcnlVcGRhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlkIG5vdCByZXR1cm4gZmFsc2UgdG8gc2tpcC9pZ25vcmUgdGhpcyByZXN1bHQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5zZXQob3EsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IHRoZSBkZWZhdWx0IGNhY2hlIGJyb2FkY2FzdCB0byBoYXBwZW4sIGV4Y2VwdCB3aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25RdWVyeVVwZGF0ZWQgcmV0dXJucyBmYWxzZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUXVlcnlVcGRhdGVkICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Eub3B0aW9ucy5mZXRjaFBvbGljeSAhPT0gXCJjYWNoZS1vbmx5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIG9uUXVlcnlVcGRhdGVkIGZ1bmN0aW9uLCBhbmQgb25RdWVyeVVwZGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3YXMgbm90IGRpc2FibGVkIGJ5IHBhc3NpbmcgbnVsbCwgbWFrZSBzdXJlIHRoaXMgcXVlcnkgaXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcImluY2x1ZGVkXCIgbGlrZSBhbnkgb3RoZXIgb3B0aW9ucy5pbmNsdWRlLXNwZWNpZmllZCBxdWVyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZFF1ZXJpZXNCeU9xLnNldChvcSwgeyBvcSwgbGFzdERpZmYsIGRpZmYgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluY2x1ZGVkUXVlcmllc0J5T3Euc2l6ZSkge1xuICAgICAgICAgICAgaW5jbHVkZWRRdWVyaWVzQnlPcS5mb3JFYWNoKCh7IG9xLCBsYXN0RGlmZiwgZGlmZiB9KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAvLyBJZiBvblF1ZXJ5VXBkYXRlZCBpcyBwcm92aWRlZCwgd2Ugd2FudCB0byB1c2UgaXQgZm9yIGFsbCBpbmNsdWRlZFxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMsIGV2ZW4gdGhlIFF1ZXJ5T3B0aW9ucyBvbmVzLlxuICAgICAgICAgICAgICAgIGlmIChvblF1ZXJ5VXBkYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRpZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYgPSBvcS5nZXRDYWNoZURpZmYoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBvblF1ZXJ5VXBkYXRlZChvcSwgZGlmZiwgbGFzdERpZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGZhbGwgYmFjayB0byByZWZldGNoaW5nLlxuICAgICAgICAgICAgICAgIGlmICghb25RdWVyeVVwZGF0ZWQgfHwgcmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9xXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVmZXRjaCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmV0YWluKCAvKiBjcmVhdGUgYSBwZXJzaXN0ZW50IHN1YnNjcmlwdGlvbiBvbiB0aGUgcXVlcnkgKi8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnNldChvcSwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3ZlT3B0aW1pc3RpYykge1xuICAgICAgICAgICAgLy8gSW4gY2FzZSBubyB1cGRhdGVDYWNoZSBjYWxsYmFjayB3YXMgcHJvdmlkZWQgKHNvIGNhY2hlLmJhdGNoIHdhcyBub3RcbiAgICAgICAgICAgIC8vIGNhbGxlZCBhYm92ZSwgYW5kIHRodXMgZGlkIG5vdCBhbHJlYWR5IHJlbW92ZSB0aGUgb3B0aW1pc3RpYyBsYXllciksXG4gICAgICAgICAgICAvLyByZW1vdmUgaXQgaGVyZS4gU2luY2UgdGhpcyBpcyBhIG5vLW9wIHdoZW4gdGhlIGxheWVyIGhhcyBhbHJlYWR5IGJlZW5cbiAgICAgICAgICAgIC8vIHJlbW92ZWQsIHdlIGRvIGl0IGV2ZW4gaWYgd2UgY2FsbGVkIGNhY2hlLmJhdGNoIGFib3ZlLCBzaW5jZSBpdCdzXG4gICAgICAgICAgICAvLyBwb3NzaWJsZSB0aGlzLmNhY2hlIGlzIGFuIGluc3RhbmNlIG9mIHNvbWUgQXBvbGxvQ2FjaGUgc3ViY2xhc3Mgb3RoZXJcbiAgICAgICAgICAgIC8vIHRoYW4gSW5NZW1vcnlDYWNoZSwgYW5kIGRvZXMgbm90IGZ1bGx5IHN1cHBvcnQgdGhlIHJlbW92ZU9wdGltaXN0aWNcbiAgICAgICAgICAgIC8vIG9wdGlvbiBmb3IgY2FjaGUuYmF0Y2guXG4gICAgICAgICAgICB0aGlzLmNhY2hlLnJlbW92ZU9wdGltaXN0aWMocmVtb3ZlT3B0aW1pc3RpYyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIG5vQ2FjaGVXYXJuaW5nc0J5Q2F1c2UgPSBuZXcgV2Vha1NldCgpO1xuICAgIG1hc2tPcGVyYXRpb24ob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IGRvY3VtZW50LCBkYXRhIH0gPSBvcHRpb25zO1xuICAgICAgICBpZiAoX19ERVZfXykge1xuICAgICAgICAgICAgY29uc3QgeyBmZXRjaFBvbGljeSwgY2F1c2UgPSB7fSB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvY3VtZW50KT8ub3BlcmF0aW9uO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YU1hc2tpbmcgJiZcbiAgICAgICAgICAgICAgICBmZXRjaFBvbGljeSA9PT0gXCJuby1jYWNoZVwiICYmXG4gICAgICAgICAgICAgICAgIWlzRnVsbHlVbm1hc2tlZE9wZXJhdGlvbihkb2N1bWVudCkgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5ub0NhY2hlV2FybmluZ3NCeUNhdXNlLmhhcyhjYXVzZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vQ2FjaGVXYXJuaW5nc0J5Q2F1c2UuYWRkKGNhdXNlKTtcbiAgICAgICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC53YXJuKDkyLCBnZXRPcGVyYXRpb25OYW1lKGRvY3VtZW50LCBgVW5uYW1lZCAke29wZXJhdGlvblR5cGUgPz8gXCJvcGVyYXRpb25cIn1gKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICh0aGlzLmRhdGFNYXNraW5nID9cbiAgICAgICAgICAgIG1hc2tPcGVyYXRpb24oZGF0YSwgZG9jdW1lbnQsIHRoaXMuY2FjaGUpXG4gICAgICAgICAgICA6IGRhdGEpO1xuICAgIH1cbiAgICBtYXNrRnJhZ21lbnQob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IGRhdGEsIGZyYWdtZW50LCBmcmFnbWVudE5hbWUgfSA9IG9wdGlvbnM7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNraW5nID9cbiAgICAgICAgICAgIG1hc2tGcmFnbWVudChkYXRhLCBmcmFnbWVudCwgdGhpcy5jYWNoZSwgZnJhZ21lbnROYW1lKVxuICAgICAgICAgICAgOiBkYXRhO1xuICAgIH1cbiAgICBmZXRjaFF1ZXJ5QnlQb2xpY3koeyBxdWVyeSwgdmFyaWFibGVzLCBmZXRjaFBvbGljeSwgZXJyb3JQb2xpY3ksIHJldHVyblBhcnRpYWxEYXRhLCBjb250ZXh0LCB9LCB7IGNhY2hlV3JpdGVCZWhhdmlvciwgb25DYWNoZUhpdCwgcXVlcnlJbmZvLCBvYnNlcnZhYmxlUXVlcnksIH0pIHtcbiAgICAgICAgY29uc3QgcmVhZENhY2hlID0gKCkgPT4gdGhpcy5jYWNoZS5kaWZmKHtcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgcmV0dXJuUGFydGlhbERhdGE6IHRydWUsXG4gICAgICAgICAgICBvcHRpbWlzdGljOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0c0Zyb21DYWNoZSA9IChkaWZmLCBuZXR3b3JrU3RhdHVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gZGlmZi5yZXN1bHQ7XG4gICAgICAgICAgICBpZiAoX19ERVZfXyAmJiAhcmV0dXJuUGFydGlhbERhdGEgJiYgZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxvZ01pc3NpbmdGaWVsZEVycm9ycyhkaWZmLm1pc3NpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdG9SZXN1bHQgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2ZW50dWFsbHkgd2Ugc2hvdWxkIG1vdmUgdGhpcyBoYW5kbGluZyBpbnRvXG4gICAgICAgICAgICAgICAgLy8gcXVlcnlJbmZvLmdldERpZmYoKSBkaXJlY3RseS4gU2luY2UgZ2V0RGlmZiBpcyB1cGRhdGVkIHRvIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgLy8gb24gcmV0dXJuUGFydGlhbERhdGE6IGZhbHNlLCB3ZSBzaG91bGQgdGFrZSBhZHZhbnRhZ2Ugb2YgdGhhdCBpbnN0ZWFkXG4gICAgICAgICAgICAgICAgLy8gb2YgaGF2aW5nIHRvIHBhdGNoIGl0IGVsc2V3aGVyZS5cbiAgICAgICAgICAgICAgICBpZiAoIWRpZmYuY29tcGxldGUgJiYgIXJldHVyblBhcnRpYWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEhhbmRsZSBwYXJ0aWFsIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVN0YXRlOiBkaWZmLmNvbXBsZXRlID8gXCJjb21wbGV0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRhdGEgPyBcInBhcnRpYWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJlbXB0eVwiLFxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nOiBpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQobmV0d29ya1N0YXR1cyksXG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcmtTdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWw6ICFkaWZmLmNvbXBsZXRlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZnJvbURhdGEgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBvZih7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFwiTlwiLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdG9SZXN1bHQoZGF0YSksXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogXCJjYWNoZVwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIERvbid0IGF0dGVtcHQgdG8gcnVuIGZvcmNlZCByZXNvbHZlcnMgaWYgd2UgaGF2ZSBpbmNvbXBsZXRlIGNhY2hlXG4gICAgICAgICAgICAvLyBkYXRhIGFuZCBwYXJ0aWFsIGlzbid0IGFsbG93ZWQgc2luY2UgdGhpcyByZXN1bHQgd291bGQgZ2V0IHNldCB0b1xuICAgICAgICAgICAgLy8gYHVuZGVmaW5lZGAgYW55d2F5cyBpbiBgdG9SZXN1bHRgLlxuICAgICAgICAgICAgKGRpZmYuY29tcGxldGUgfHwgcmV0dXJuUGFydGlhbERhdGEpICYmXG4gICAgICAgICAgICAgICAgdGhpcy5nZXREb2N1bWVudEluZm8ocXVlcnkpLmhhc0ZvcmNlZFJlc29sdmVycykge1xuICAgICAgICAgICAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFyaWFudCh0aGlzLmxvY2FsU3RhdGUsIDkzLCBnZXRPcGVyYXRpb25OYW1lKHF1ZXJ5LCBcIihhbm9ueW1vdXMpXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25DYWNoZUhpdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tKHRoaXMubG9jYWxTdGF0ZS5leGVjdXRlKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50OiB0aGlzLmNsaWVudCxcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVSZXN1bHQ6IGRhdGEgPyB7IGRhdGEgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgICAgICAgICBvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KS50aGVuKChyZXNvbHZlZCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogXCJOXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0b1Jlc3VsdChyZXNvbHZlZC5kYXRhIHx8IHZvaWQgMCksXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogXCJjYWNoZVwiLFxuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXNvbHZlcyBodHRwczovL2dpdGh1Yi5jb20vYXBvbGxvZ3JhcGhxbC9hcG9sbG8tY2xpZW50L2lzc3Vlcy8xMDMxNy5cbiAgICAgICAgICAgIC8vIElmIGVycm9yUG9saWN5IGlzICdub25lJyBhbmQgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlIGlzIHRydWUsXG4gICAgICAgICAgICAvLyBkYXRhIHdhcyBpbmNvcnJlY3RseSByZXR1cm5lZCBmcm9tIHRoZSBjYWNoZSBvbiByZWZldGNoOlxuICAgICAgICAgICAgLy8gaWYgZGlmZi5taXNzaW5nIGV4aXN0cywgd2Ugc2hvdWxkIG5vdCByZXR1cm4gY2FjaGUgZGF0YS5cbiAgICAgICAgICAgIGlmIChlcnJvclBvbGljeSA9PT0gXCJub25lXCIgJiZcbiAgICAgICAgICAgICAgICBuZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLnJlZmV0Y2ggJiZcbiAgICAgICAgICAgICAgICBkaWZmLm1pc3NpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbURhdGEodm9pZCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmcm9tRGF0YShkYXRhIHx8IHVuZGVmaW5lZCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdHNGcm9tTGluayA9ICgpID0+IHRoaXMuZ2V0UmVzdWx0c0Zyb21MaW5rKHtcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgIGZldGNoUG9saWN5LFxuICAgICAgICAgICAgZXJyb3JQb2xpY3ksXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGNhY2hlV3JpdGVCZWhhdmlvcixcbiAgICAgICAgICAgIHF1ZXJ5SW5mbyxcbiAgICAgICAgICAgIG9ic2VydmFibGVRdWVyeSxcbiAgICAgICAgfSkucGlwZSh2YWxpZGF0ZURpZEVtaXRWYWx1ZSgpLCBtYXRlcmlhbGl6ZSgpLCBtYXAoKHJlc3VsdCkgPT4gKHtcbiAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgIHNvdXJjZTogXCJuZXR3b3JrXCIsXG4gICAgICAgIH0pKSk7XG4gICAgICAgIHN3aXRjaCAoZmV0Y2hQb2xpY3kpIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYXNlIFwiY2FjaGUtZmlyc3RcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSByZWFkQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUxpbms6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZTogcmVzdWx0c0Zyb21DYWNoZShkaWZmLCBOZXR3b3JrU3RhdHVzLnJlYWR5KSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJldHVyblBhcnRpYWxEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tTGluazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGU6IGNvbmNhdChyZXN1bHRzRnJvbUNhY2hlKGRpZmYsIE5ldHdvcmtTdGF0dXMubG9hZGluZyksIHJlc3VsdHNGcm9tTGluaygpKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbUxpbms6IHRydWUsIG9ic2VydmFibGU6IHJlc3VsdHNGcm9tTGluaygpIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiY2FjaGUtYW5kLW5ldHdvcmtcIjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSByZWFkQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZi5jb21wbGV0ZSB8fCByZXR1cm5QYXJ0aWFsRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUxpbms6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlOiBjb25jYXQocmVzdWx0c0Zyb21DYWNoZShkaWZmLCBOZXR3b3JrU3RhdHVzLmxvYWRpbmcpLCByZXN1bHRzRnJvbUxpbmsoKSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IGZyb21MaW5rOiB0cnVlLCBvYnNlcnZhYmxlOiByZXN1bHRzRnJvbUxpbmsoKSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcImNhY2hlLW9ubHlcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmcm9tTGluazogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGU6IGNvbmNhdChyZXN1bHRzRnJvbUNhY2hlKHJlYWRDYWNoZSgpLCBOZXR3b3JrU3RhdHVzLnJlYWR5KSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgXCJuZXR3b3JrLW9ubHlcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4geyBmcm9tTGluazogdHJ1ZSwgb2JzZXJ2YWJsZTogcmVzdWx0c0Zyb21MaW5rKCkgfTtcbiAgICAgICAgICAgIGNhc2UgXCJuby1jYWNoZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB7IGZyb21MaW5rOiB0cnVlLCBvYnNlcnZhYmxlOiByZXN1bHRzRnJvbUxpbmsoKSB9O1xuICAgICAgICAgICAgY2FzZSBcInN0YW5kYnlcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4geyBmcm9tTGluazogZmFsc2UsIG9ic2VydmFibGU6IEVNUFRZIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZURpZEVtaXRWYWx1ZSgpIHtcbiAgICBsZXQgZGlkRW1pdFZhbHVlID0gZmFsc2U7XG4gICAgcmV0dXJuIHRhcCh7XG4gICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICBkaWRFbWl0VmFsdWUgPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZSgpIHtcbiAgICAgICAgICAgIGludmFyaWFudChkaWRFbWl0VmFsdWUsIDk0KTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGlzRnVsbHlVbm1hc2tlZE9wZXJhdGlvbihkb2N1bWVudCkge1xuICAgIGxldCBpc1VubWFza2VkID0gdHJ1ZTtcbiAgICB2aXNpdChkb2N1bWVudCwge1xuICAgICAgICBGcmFnbWVudFNwcmVhZDogKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlzVW5tYXNrZWQgPVxuICAgICAgICAgICAgICAgICEhbm9kZS5kaXJlY3RpdmVzICYmXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZGlyZWN0aXZlcy5zb21lKChkaXJlY3RpdmUpID0+IGRpcmVjdGl2ZS5uYW1lLnZhbHVlID09PSBcInVubWFza1wiKTtcbiAgICAgICAgICAgIGlmICghaXNVbm1hc2tlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCUkVBSztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gaXNVbm1hc2tlZDtcbn1cbmZ1bmN0aW9uIGFkZE5vblJlYWN0aXZlVG9OYW1lZEZyYWdtZW50cyhkb2N1bWVudCkge1xuICAgIHJldHVybiB2aXNpdChkb2N1bWVudCwge1xuICAgICAgICBGcmFnbWVudFNwcmVhZDogKG5vZGUpID0+IHtcbiAgICAgICAgICAgIC8vIERvIG5vdCBhZGQgYEBub25yZWFjdGl2ZWAgaWYgdGhlIGZyYWdtZW50IGlzIG1hcmtlZCB3aXRoIGBAdW5tYXNrYFxuICAgICAgICAgICAgLy8gc2luY2Ugd2Ugd2FudCB0byByZWFjdCB0byBjaGFuZ2VzIGluIHRoaXMgZnJhZ21lbnQuXG4gICAgICAgICAgICBpZiAobm9kZS5kaXJlY3RpdmVzPy5zb21lKChkaXJlY3RpdmUpID0+IGRpcmVjdGl2ZS5uYW1lLnZhbHVlID09PSBcInVubWFza1wiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4ubm9kZSxcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLihub2RlLmRpcmVjdGl2ZXMgfHwgW10pLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBLaW5kLkRJUkVDVElWRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHsga2luZDogS2luZC5OQU1FLCB2YWx1ZTogXCJub25yZWFjdGl2ZVwiIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1RdWVyeU1hbmFnZXIuanMubWFwXG4iLAogICAgImltcG9ydCB7IE9wZXJhdGlvblR5cGVOb2RlIH0gZnJvbSBcImdyYXBocWxcIjtcbmltcG9ydCB7IG1hcCB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBOb3RJbXBsZW1lbnRlZEhhbmRsZXIgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvaW5jcmVtZW50YWxcIjtcbmltcG9ydCB7IGV4ZWN1dGUgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvbGlua1wiO1xuaW1wb3J0IHsgRG9jdW1lbnRUcmFuc2Zvcm0gfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzXCI7XG5pbXBvcnQgeyBfX0RFVl9fIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllcy9lbnZpcm9ubWVudFwiO1xuaW1wb3J0IHsgY2hlY2tEb2N1bWVudCwgY29tcGFjdCwgZ2V0QXBvbGxvQ2xpZW50TWVtb3J5SW50ZXJuYWxzLCBtZXJnZU9wdGlvbnMsIHJlbW92ZU1hc2tlZEZyYWdtZW50U3ByZWFkcywgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi92ZXJzaW9uLmpzXCI7XG5pbXBvcnQgeyBRdWVyeU1hbmFnZXIgfSBmcm9tIFwiLi9RdWVyeU1hbmFnZXIuanNcIjtcbmxldCBoYXNTdWdnZXN0ZWREZXZ0b29scyA9IGZhbHNlO1xuLyoqXG4gKiBUaGlzIGlzIHRoZSBwcmltYXJ5IEFwb2xsbyBDbGllbnQgY2xhc3MuIEl0IGlzIHVzZWQgdG8gc2VuZCBHcmFwaFFMIGRvY3VtZW50cyAoaS5lLiBxdWVyaWVzXG4gKiBhbmQgbXV0YXRpb25zKSB0byBhIEdyYXBoUUwgc3BlYy1jb21wbGlhbnQgc2VydmVyIG92ZXIgYW4gYEFwb2xsb0xpbmtgIGluc3RhbmNlLFxuICogcmVjZWl2ZSByZXN1bHRzIGZyb20gdGhlIHNlcnZlciBhbmQgY2FjaGUgdGhlIHJlc3VsdHMgaW4gYSBzdG9yZS4gSXQgYWxzbyBkZWxpdmVycyB1cGRhdGVzXG4gKiB0byBHcmFwaFFMIHF1ZXJpZXMgdGhyb3VnaCBgT2JzZXJ2YWJsZWAgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgQXBvbGxvQ2xpZW50IHtcbiAgICBsaW5rO1xuICAgIGNhY2hlO1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIGBkaXNhYmxlTmV0d29ya0ZldGNoZXNgIGhhcyBiZWVuIHJlbmFtZWQgdG8gYHByaW9yaXRpemVDYWNoZVZhbHVlc2AuXG4gICAgICovXG4gICAgZGlzYWJsZU5ldHdvcmtGZXRjaGVzO1xuICAgIHNldCBwcmlvcml0aXplQ2FjaGVWYWx1ZXModmFsdWUpIHtcbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIucHJpb3JpdGl6ZUNhY2hlVmFsdWVzID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gcHJpb3JpdGl6ZSBjYWNoZSB2YWx1ZXMgb3ZlciBuZXR3b3JrIHJlc3VsdHMgd2hlbiBgcXVlcnlgIG9yIGB3YXRjaFF1ZXJ5YCBpcyBjYWxsZWQuXG4gICAgICogVGhpcyB3aWxsIGVzc2VudGlhbGx5IHR1cm4gYSBgXCJuZXR3b3JrLW9ubHlcImAgb3IgYFwiY2FjaGUtYW5kLW5ldHdvcmtcImAgZmV0Y2hQb2xpY3kgaW50byBhIGBcImNhY2hlLWZpcnN0XCJgIGZldGNoUG9saWN5LFxuICAgICAqIGJ1dCB3aXRob3V0IGluZmx1ZW5jaW5nIHRoZSBgZmV0Y2hQb2xpY3lgIG9mIHRoZSBjcmVhdGVkIGBPYnNlcnZhYmxlUXVlcnlgIGxvbmctdGVybS5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGUuZy4gYmUgdXNlZCB0byBwcmlvcml0aXplIHRoZSBjYWNoZSBkdXJpbmcgdGhlIGZpcnN0IHJlbmRlciBhZnRlciBTU1IuXG4gICAgICovXG4gICAgZ2V0IHByaW9yaXRpemVDYWNoZVZhbHVlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLnByaW9yaXRpemVDYWNoZVZhbHVlcztcbiAgICB9XG4gICAgdmVyc2lvbjtcbiAgICBxdWVyeURlZHVwbGljYXRpb247XG4gICAgZGVmYXVsdE9wdGlvbnM7XG4gICAgZGV2dG9vbHNDb25maWc7XG4gICAgcXVlcnlNYW5hZ2VyO1xuICAgIGRldlRvb2xzSG9va0NiO1xuICAgIHJlc2V0U3RvcmVDYWxsYmFja3MgPSBbXTtcbiAgICBjbGVhclN0b3JlQ2FsbGJhY2tzID0gW107XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhbiBpbnN0YW5jZSBvZiBgQXBvbGxvQ2xpZW50YC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7IEFwb2xsb0NsaWVudCwgSW5NZW1vcnlDYWNoZSB9IGZyb20gXCJAYXBvbGxvL2NsaWVudFwiO1xuICAgICAqXG4gICAgICogY29uc3QgY2FjaGUgPSBuZXcgSW5NZW1vcnlDYWNoZSgpO1xuICAgICAqXG4gICAgICogY29uc3QgY2xpZW50ID0gbmV3IEFwb2xsb0NsaWVudCh7XG4gICAgICogICAvLyBQcm92aWRlIHJlcXVpcmVkIGNvbnN0cnVjdG9yIGZpZWxkc1xuICAgICAqICAgY2FjaGU6IGNhY2hlLFxuICAgICAqICAgdXJpOiBcImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9cIixcbiAgICAgKlxuICAgICAqICAgLy8gUHJvdmlkZSBzb21lIG9wdGlvbmFsIGNvbnN0cnVjdG9yIGZpZWxkc1xuICAgICAqICAgbmFtZTogXCJyZWFjdC13ZWItY2xpZW50XCIsXG4gICAgICogICB2ZXJzaW9uOiBcIjEuM1wiLFxuICAgICAqICAgcXVlcnlEZWR1cGxpY2F0aW9uOiBmYWxzZSxcbiAgICAgKiAgIGRlZmF1bHRPcHRpb25zOiB7XG4gICAgICogICAgIHdhdGNoUXVlcnk6IHtcbiAgICAgKiAgICAgICBmZXRjaFBvbGljeTogXCJjYWNoZS1hbmQtbmV0d29ya1wiLFxuICAgICAqICAgICB9LFxuICAgICAqICAgfSxcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgICAgICBpbnZhcmlhbnQob3B0aW9ucy5jYWNoZSwgNjUpO1xuICAgICAgICAgICAgaW52YXJpYW50KG9wdGlvbnMubGluaywgNjYpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgY2FjaGUsIGRvY3VtZW50VHJhbnNmb3JtLCBzc3JNb2RlID0gZmFsc2UsIHNzckZvcmNlRmV0Y2hEZWxheSA9IDAsIHF1ZXJ5RGVkdXBsaWNhdGlvbiA9IHRydWUsIGRlZmF1bHRPcHRpb25zLCBkZWZhdWx0Q29udGV4dCwgYXNzdW1lSW1tdXRhYmxlUmVzdWx0cyA9IGNhY2hlLmFzc3VtZUltbXV0YWJsZVJlc3VsdHMsIGxvY2FsU3RhdGUsIGRldnRvb2xzLCBkYXRhTWFza2luZywgbGluaywgaW5jcmVtZW50YWxIYW5kbGVyID0gbmV3IE5vdEltcGxlbWVudGVkSGFuZGxlcigpLCB9ID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5saW5rID0gbGluaztcbiAgICAgICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgICAgICB0aGlzLnF1ZXJ5RGVkdXBsaWNhdGlvbiA9IHF1ZXJ5RGVkdXBsaWNhdGlvbjtcbiAgICAgICAgdGhpcy5kZWZhdWx0T3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zIHx8IHt9O1xuICAgICAgICB0aGlzLmRldnRvb2xzQ29uZmlnID0ge1xuICAgICAgICAgICAgLi4uZGV2dG9vbHMsXG4gICAgICAgICAgICBlbmFibGVkOiBkZXZ0b29scz8uZW5hYmxlZCA/PyBfX0RFVl9fLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLndhdGNoUXVlcnkgPSB0aGlzLndhdGNoUXVlcnkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5tdXRhdGUgPSB0aGlzLm11dGF0ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLndhdGNoRnJhZ21lbnQgPSB0aGlzLndhdGNoRnJhZ21lbnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZXNldFN0b3JlID0gdGhpcy5yZXNldFN0b3JlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVGZXRjaE9ic2VydmFibGVRdWVyaWVzID0gdGhpcy5yZWZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMgPVxuICAgICAgICAgICAgdGhpcy5yZWZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIgPSBuZXcgUXVlcnlNYW5hZ2VyKHtcbiAgICAgICAgICAgIGNsaWVudDogdGhpcyxcbiAgICAgICAgICAgIGRlZmF1bHRPcHRpb25zOiB0aGlzLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgZGVmYXVsdENvbnRleHQsXG4gICAgICAgICAgICBkb2N1bWVudFRyYW5zZm9ybSxcbiAgICAgICAgICAgIHF1ZXJ5RGVkdXBsaWNhdGlvbixcbiAgICAgICAgICAgIHNzck1vZGUsXG4gICAgICAgICAgICBkYXRhTWFza2luZzogISFkYXRhTWFza2luZyxcbiAgICAgICAgICAgIGNsaWVudE9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgICAgICBpbmNyZW1lbnRhbEhhbmRsZXIsXG4gICAgICAgICAgICBhc3N1bWVJbW11dGFibGVSZXN1bHRzLFxuICAgICAgICAgICAgb25Ccm9hZGNhc3Q6IHRoaXMuZGV2dG9vbHNDb25maWcuZW5hYmxlZCA/XG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXZUb29sc0hvb2tDYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXZUb29sc0hvb2tDYigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogdm9pZCAwLFxuICAgICAgICAgICAgbG9jYWxTdGF0ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJpb3JpdGl6ZUNhY2hlVmFsdWVzID0gc3NyTW9kZSB8fCBzc3JGb3JjZUZldGNoRGVsYXkgPiAwO1xuICAgICAgICBpZiAoc3NyRm9yY2VGZXRjaERlbGF5KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByaW9yaXRpemVDYWNoZVZhbHVlcyA9IGZhbHNlO1xuICAgICAgICAgICAgfSwgc3NyRm9yY2VGZXRjaERlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZXZ0b29sc0NvbmZpZy5lbmFibGVkKVxuICAgICAgICAgICAgdGhpcy5jb25uZWN0VG9EZXZUb29scygpO1xuICAgIH1cbiAgICBjb25uZWN0VG9EZXZUb29scygpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3aW5kb3dXaXRoRGV2VG9vbHMgPSB3aW5kb3c7XG4gICAgICAgIGNvbnN0IGRldnRvb2xzU3ltYm9sID0gU3ltYm9sLmZvcihcImFwb2xsby5kZXZ0b29sc1wiKTtcbiAgICAgICAgKHdpbmRvd1dpdGhEZXZUb29sc1tkZXZ0b29sc1N5bWJvbF0gPVxuICAgICAgICAgICAgd2luZG93V2l0aERldlRvb2xzW2RldnRvb2xzU3ltYm9sXSB8fCBbXSkucHVzaCh0aGlzKTtcbiAgICAgICAgd2luZG93V2l0aERldlRvb2xzLl9fQVBPTExPX0NMSUVOVF9fID0gdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN1Z2dlc3QgaW5zdGFsbGluZyB0aGUgZGV2dG9vbHMgZm9yIGRldmVsb3BlcnMgd2hvIGRvbid0IGhhdmUgdGhlbVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCFoYXNTdWdnZXN0ZWREZXZ0b29scyAmJiBfX0RFVl9fKSB7XG4gICAgICAgICAgICBoYXNTdWdnZXN0ZWREZXZ0b29scyA9IHRydWU7XG4gICAgICAgICAgICBpZiAod2luZG93LmRvY3VtZW50ICYmXG4gICAgICAgICAgICAgICAgd2luZG93LnRvcCA9PT0gd2luZG93LnNlbGYgJiZcbiAgICAgICAgICAgICAgICAvXihodHRwcz98ZmlsZSk6JC8udGVzdCh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wpKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93Ll9fQVBPTExPX0RFVlRPT0xTX0dMT0JBTF9IT09LX18pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hdiA9IHdpbmRvdy5uYXZpZ2F0b3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1YSA9IG5hdiAmJiBuYXYudXNlckFnZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdWEgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodWEuaW5kZXhPZihcIkNocm9tZS9cIikgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL2Nocm9tZS5nb29nbGUuY29tL3dlYnN0b3JlL2RldGFpbC9cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhcG9sbG8tY2xpZW50LWRldmVsb3Blci10L2pka2tua2tiZWJiYXBpbGdvZWNjY2lnbGtmYm1ibmZtXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHVhLmluZGV4T2YoXCJGaXJlZm94L1wiKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImh0dHBzOi8vYWRkb25zLm1vemlsbGEub3JnL2VuLVVTL2ZpcmVmb3gvYWRkb24vYXBvbGxvLWRldmVsb3Blci10b29scy9cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX19ERVZfXyAmJiBpbnZhcmlhbnQubG9nKFwiRG93bmxvYWQgdGhlIEFwb2xsbyBEZXZUb29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImV4cGVyaWVuY2U6ICVzXCIsIHVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAxMDAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGBEb2N1bWVudFRyYW5zZm9ybWAgdXNlZCB0byBtb2RpZnkgR3JhcGhRTCBkb2N1bWVudHMgYmVmb3JlIGEgcmVxdWVzdFxuICAgICAqIGlzIG1hZGUuIElmIGEgY3VzdG9tIGBEb2N1bWVudFRyYW5zZm9ybWAgaXMgbm90IHByb3ZpZGVkLCB0aGlzIHdpbGwgYmUgdGhlXG4gICAgICogZGVmYXVsdCBkb2N1bWVudCB0cmFuc2Zvcm0uXG4gICAgICovXG4gICAgZ2V0IGRvY3VtZW50VHJhbnNmb3JtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIuZG9jdW1lbnRUcmFuc2Zvcm07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb25maWd1cmVkIGBMb2NhbFN0YXRlYCBpbnN0YW5jZSB1c2VkIHRvIGVuYWJsZSB0aGUgdXNlIG9mIGBAY2xpZW50YFxuICAgICAqIGZpZWxkcy5cbiAgICAgKi9cbiAgICBnZXQgbG9jYWxTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLmxvY2FsU3RhdGU7XG4gICAgfVxuICAgIHNldCBsb2NhbFN0YXRlKGxvY2FsU3RhdGUpIHtcbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIubG9jYWxTdGF0ZSA9IGxvY2FsU3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgdGhpcyBtZXRob2QgdG8gdGVybWluYXRlIGFueSBhY3RpdmUgY2xpZW50IHByb2Nlc3NlcywgbWFraW5nIGl0IHNhZmVcbiAgICAgKiB0byBkaXNwb3NlIG9mIHRoaXMgYEFwb2xsb0NsaWVudGAgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBwZXJmb3JtcyBhZ2dyZXNzaXZlIGNsZWFudXAgdG8gcHJldmVudCBtZW1vcnkgbGVha3M6XG4gICAgICpcbiAgICAgKiAtIFVuc3Vic2NyaWJlcyBhbGwgYWN0aXZlIGBPYnNlcnZhYmxlUXVlcnlgIGluc3RhbmNlcyBieSBlbWl0dGluZyBhIGBjb21wbGV0ZWRgIGV2ZW50XG4gICAgICogLSBSZWplY3RzIGFsbCBjdXJyZW50bHkgcnVubmluZyBxdWVyaWVzIHdpdGggXCJRdWVyeU1hbmFnZXIgc3RvcHBlZCB3aGlsZSBxdWVyeSB3YXMgaW4gZmxpZ2h0XCJcbiAgICAgKiAtIFJlbW92ZXMgYWxsIHF1ZXJ5UmVmcyBmcm9tIHRoZSBzdXNwZW5zZSBjYWNoZVxuICAgICAqL1xuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLnN0b3AoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyB3YXRjaGVzIHRoZSBjYWNoZSBzdG9yZSBvZiB0aGUgcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb25zIHNwZWNpZmllZCBhbmRcbiAgICAgKiByZXR1cm5zIGFuIGBPYnNlcnZhYmxlUXVlcnlgLiBXZSBjYW4gc3Vic2NyaWJlIHRvIHRoaXMgYE9ic2VydmFibGVRdWVyeWAgYW5kXG4gICAgICogcmVjZWl2ZSB1cGRhdGVkIHJlc3VsdHMgdGhyb3VnaCBhbiBvYnNlcnZlciB3aGVuIHRoZSBjYWNoZSBzdG9yZSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBhbiBpbXBsZW1lbnRhdGlvbiBvZiBHcmFwaFFMIHN1YnNjcmlwdGlvbnMuIFJhdGhlcixcbiAgICAgKiBpdCB1c2VzIEFwb2xsbydzIHN0b3JlIGluIG9yZGVyIHRvIHJlYWN0aXZlbHkgZGVsaXZlciB1cGRhdGVzIHRvIHlvdXIgcXVlcnkgcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIEZvciBleGFtcGxlLCBzdXBwb3NlIHlvdSBjYWxsIHdhdGNoUXVlcnkgb24gYSBHcmFwaFFMIHF1ZXJ5IHRoYXQgZmV0Y2hlcyBhIHBlcnNvbidzXG4gICAgICogZmlyc3QgYW5kIGxhc3QgbmFtZSBhbmQgdGhpcyBwZXJzb24gaGFzIGEgcGFydGljdWxhciBvYmplY3QgaWRlbnRpZmllciwgcHJvdmlkZWQgYnlcbiAgICAgKiBgY2FjaGUuaWRlbnRpZnlgLiBMYXRlciwgYSBkaWZmZXJlbnQgcXVlcnkgZmV0Y2hlcyB0aGF0IHNhbWUgcGVyc29uJ3NcbiAgICAgKiBmaXJzdCBhbmQgbGFzdCBuYW1lIGFuZCB0aGUgZmlyc3QgbmFtZSBoYXMgbm93IGNoYW5nZWQuIFRoZW4sIGFueSBvYnNlcnZlcnMgYXNzb2NpYXRlZFxuICAgICAqIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIGZpcnN0IHF1ZXJ5IHdpbGwgYmUgdXBkYXRlZCB3aXRoIGEgbmV3IHJlc3VsdCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaWYgdGhlIGNhY2hlIGRvZXMgbm90IGNoYW5nZSwgdGhlIHN1YnNjcmliZXIgd2lsbCBfbm90XyBiZSBub3RpZmllZC5cbiAgICAgKlxuICAgICAqIFNlZSBbaGVyZV0oaHR0cHM6Ly9tZWRpdW0uY29tL2Fwb2xsby1zdGFjay90aGUtY29uY2VwdHMtb2YtZ3JhcGhxbC1iYzY4YmQ4MTliZTMjLjNtYjBjYmNtYykgZm9yXG4gICAgICogYSBkZXNjcmlwdGlvbiBvZiBzdG9yZSByZWFjdGl2aXR5LlxuICAgICAqL1xuICAgIHdhdGNoUXVlcnkob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5kZWZhdWx0T3B0aW9ucy53YXRjaFF1ZXJ5KSB7XG4gICAgICAgICAgICBvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuZGVmYXVsdE9wdGlvbnMud2F0Y2hRdWVyeSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLndhdGNoUXVlcnkob3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgcmVzb2x2ZXMgYSBzaW5nbGUgcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb25zIHNwZWNpZmllZCBhbmRcbiAgICAgKiByZXR1cm5zIGEgYFByb21pc2VgIHdoaWNoIGlzIGVpdGhlciByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRpbmcgZGF0YVxuICAgICAqIG9yIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCBvZiB0eXBlIGBRdWVyeU9wdGlvbnNgIHRoYXQgYWxsb3dzIHVzIHRvXG4gICAgICogZGVzY3JpYmUgaG93IHRoaXMgcXVlcnkgc2hvdWxkIGJlIHRyZWF0ZWQgZS5nLiB3aGV0aGVyIGl0IHNob3VsZCBoaXQgdGhlXG4gICAgICogc2VydmVyIGF0IGFsbCBvciBqdXN0IHJlc29sdmUgZnJvbSB0aGUgY2FjaGUsIGV0Yy5cbiAgICAgKi9cbiAgICBxdWVyeShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLmRlZmF1bHRPcHRpb25zLnF1ZXJ5KSB7XG4gICAgICAgICAgICBvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuZGVmYXVsdE9wdGlvbnMucXVlcnksIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgICAgICBpbnZhcmlhbnQob3B0aW9ucy5mZXRjaFBvbGljeSAhPT0gXCJjYWNoZS1hbmQtbmV0d29ya1wiLCA2Nyk7XG4gICAgICAgICAgICBpbnZhcmlhbnQob3B0aW9ucy5mZXRjaFBvbGljeSAhPT0gXCJzdGFuZGJ5XCIsIDY4KTtcbiAgICAgICAgICAgIGludmFyaWFudChvcHRpb25zLnF1ZXJ5LCA2OSk7XG4gICAgICAgICAgICBpbnZhcmlhbnQob3B0aW9ucy5xdWVyeS5raW5kID09PSBcIkRvY3VtZW50XCIsIDcwKTtcbiAgICAgICAgICAgIGludmFyaWFudCghb3B0aW9ucy5yZXR1cm5QYXJ0aWFsRGF0YSwgNzEpO1xuICAgICAgICAgICAgaW52YXJpYW50KCFvcHRpb25zLnBvbGxJbnRlcnZhbCwgNzIpO1xuICAgICAgICAgICAgaW52YXJpYW50KCFvcHRpb25zLm5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSwgNzMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci5xdWVyeShvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyByZXNvbHZlcyBhIHNpbmdsZSBtdXRhdGlvbiBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc3BlY2lmaWVkIGFuZCByZXR1cm5zIGFcbiAgICAgKiBQcm9taXNlIHdoaWNoIGlzIGVpdGhlciByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRpbmcgZGF0YSBvciByZWplY3RlZCB3aXRoIGFuXG4gICAgICogZXJyb3IuIEluIHNvbWUgY2FzZXMgYm90aCBgZGF0YWAgYW5kIGBlcnJvcnNgIG1pZ2h0IGJlIHVuZGVmaW5lZCwgZm9yIGV4YW1wbGVcbiAgICAgKiB3aGVuIGBlcnJvclBvbGljeWAgaXMgc2V0IHRvIGAnaWdub3JlJ2AuXG4gICAgICpcbiAgICAgKiBJdCB0YWtlcyBvcHRpb25zIGFzIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcga2V5cyBhbmQgdmFsdWVzOlxuICAgICAqL1xuICAgIG11dGF0ZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnNXaXRoRGVmYXVsdHMgPSBtZXJnZU9wdGlvbnMoY29tcGFjdCh7XG4gICAgICAgICAgICBmZXRjaFBvbGljeTogXCJuZXR3b3JrLW9ubHlcIixcbiAgICAgICAgICAgIGVycm9yUG9saWN5OiBcIm5vbmVcIixcbiAgICAgICAgfSwgdGhpcy5kZWZhdWx0T3B0aW9ucy5tdXRhdGUpLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKF9fREVWX18pIHtcbiAgICAgICAgICAgIGludmFyaWFudChvcHRpb25zV2l0aERlZmF1bHRzLm11dGF0aW9uLCA3NCk7XG4gICAgICAgICAgICBpbnZhcmlhbnQob3B0aW9uc1dpdGhEZWZhdWx0cy5mZXRjaFBvbGljeSA9PT0gXCJuZXR3b3JrLW9ubHlcIiB8fFxuICAgICAgICAgICAgICAgIG9wdGlvbnNXaXRoRGVmYXVsdHMuZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIiwgNzUpO1xuICAgICAgICB9XG4gICAgICAgIGNoZWNrRG9jdW1lbnQob3B0aW9uc1dpdGhEZWZhdWx0cy5tdXRhdGlvbiwgT3BlcmF0aW9uVHlwZU5vZGUuTVVUQVRJT04pO1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIubXV0YXRlKG9wdGlvbnNXaXRoRGVmYXVsdHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIHN1YnNjcmliZXMgdG8gYSBncmFwaHFsIHN1YnNjcmlwdGlvbiBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc3BlY2lmaWVkIGFuZCByZXR1cm5zIGFuXG4gICAgICogYE9ic2VydmFibGVgIHdoaWNoIGVpdGhlciBlbWl0cyByZWNlaXZlZCBkYXRhIG9yIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHN1YnNjcmliZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNhdXNlID0ge307XG4gICAgICAgIGNvbnN0IG9ic2VydmFibGUgPSB0aGlzLnF1ZXJ5TWFuYWdlci5zdGFydEdyYXBoUUxTdWJzY3JpcHRpb24ob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IG1hcHBlZCA9IG9ic2VydmFibGUucGlwZShtYXAoKHJlc3VsdCkgPT4gKHtcbiAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgIGRhdGE6IHRoaXMucXVlcnlNYW5hZ2VyLm1hc2tPcGVyYXRpb24oe1xuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBvcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgIGZldGNoUG9saWN5OiBvcHRpb25zLmZldGNoUG9saWN5LFxuICAgICAgICAgICAgICAgIGNhdXNlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pKSk7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1hcHBlZCwgeyByZXN0YXJ0OiBvYnNlcnZhYmxlLnJlc3RhcnQgfSk7XG4gICAgfVxuICAgIHJlYWRRdWVyeShvcHRpb25zLCBvcHRpbWlzdGljID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUucmVhZFF1ZXJ5KHsgLi4ub3B0aW9ucywgcXVlcnk6IHRoaXMudHJhbnNmb3JtKG9wdGlvbnMucXVlcnkpIH0sIG9wdGltaXN0aWMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXYXRjaGVzIHRoZSBjYWNoZSBzdG9yZSBvZiB0aGUgZnJhZ21lbnQgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb25zIHNwZWNpZmllZFxuICAgICAqIGFuZCByZXR1cm5zIGFuIGBPYnNlcnZhYmxlYC4gV2UgY2FuIHN1YnNjcmliZSB0byB0aGlzXG4gICAgICogYE9ic2VydmFibGVgIGFuZCByZWNlaXZlIHVwZGF0ZWQgcmVzdWx0cyB0aHJvdWdoIGFuXG4gICAgICogb2JzZXJ2ZXIgd2hlbiB0aGUgY2FjaGUgc3RvcmUgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIFlvdSBtdXN0IHBhc3MgaW4gYSBHcmFwaFFMIGRvY3VtZW50IHdpdGggYSBzaW5nbGUgZnJhZ21lbnQgb3IgYSBkb2N1bWVudFxuICAgICAqIHdpdGggbXVsdGlwbGUgZnJhZ21lbnRzIHRoYXQgcmVwcmVzZW50IHdoYXQgeW91IGFyZSByZWFkaW5nLiBJZiB5b3UgcGFzc1xuICAgICAqIGluIGEgZG9jdW1lbnQgd2l0aCBtdWx0aXBsZSBmcmFnbWVudHMgdGhlbiB5b3UgbXVzdCBhbHNvIHNwZWNpZnkgYVxuICAgICAqIGBmcmFnbWVudE5hbWVgLlxuICAgICAqXG4gICAgICogQHNpbmNlIDMuMTAuMFxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IG9mIHR5cGUgYFdhdGNoRnJhZ21lbnRPcHRpb25zYCB0aGF0IGFsbG93c1xuICAgICAqIHRoZSBjYWNoZSB0byBpZGVudGlmeSB0aGUgZnJhZ21lbnQgYW5kIG9wdGlvbmFsbHkgc3BlY2lmeSB3aGV0aGVyIHRvIHJlYWN0XG4gICAgICogdG8gb3B0aW1pc3RpYyB1cGRhdGVzLlxuICAgICAqL1xuICAgIHdhdGNoRnJhZ21lbnQob3B0aW9ucykge1xuICAgICAgICBjb25zdCBkYXRhTWFza2luZyA9IHRoaXMucXVlcnlNYW5hZ2VyLmRhdGFNYXNraW5nO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVxuICAgICAgICAgICAgLndhdGNoRnJhZ21lbnQoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGZyYWdtZW50OiB0aGlzLnRyYW5zZm9ybShvcHRpb25zLmZyYWdtZW50LCBkYXRhTWFza2luZyksXG4gICAgICAgIH0pXG4gICAgICAgICAgICAucGlwZShtYXAoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHRyYW5zZm9ybSB3aWxsIHJlbW92ZSBmcmFnbWVudCBzcHJlYWRzIGZyb20gdGhlIGZyYWdtZW50XG4gICAgICAgICAgICAvLyBkb2N1bWVudCB3aGVuIGRhdGFNYXNraW5nIGlzIGVuYWJsZWQuIFRoZSBgbWFza0ZyYWdtZW50YCBmdW5jdGlvblxuICAgICAgICAgICAgLy8gcmVtYWlucyB0byBhcHBseSB3YXJuaW5ncyB0byBmcmFnbWVudHMgbWFya2VkIGFzXG4gICAgICAgICAgICAvLyBgQHVubWFzayhtb2RlOiBcIm1pZ3JhdGVcIilgLiBTaW5jZSB0aGVzZSB3YXJuaW5ncyBhcmUgb25seSBhcHBsaWVkXG4gICAgICAgICAgICAvLyBpbiBkZXYsIHdlIGNhbiBza2lwIHRoZSBtYXNraW5nIGFsZ29yaXRobSBlbnRpcmVseSBmb3IgcHJvZHVjdGlvbi5cbiAgICAgICAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFNYXNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnF1ZXJ5TWFuYWdlci5tYXNrRnJhZ21lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucmVzdWx0LCBkYXRhIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZWFkRnJhZ21lbnQob3B0aW9ucywgb3B0aW1pc3RpYyA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLnJlYWRGcmFnbWVudCh7IC4uLm9wdGlvbnMsIGZyYWdtZW50OiB0aGlzLnRyYW5zZm9ybShvcHRpb25zLmZyYWdtZW50KSB9LCBvcHRpbWlzdGljKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHNvbWUgZGF0YSBpbiB0aGUgc2hhcGUgb2YgdGhlIHByb3ZpZGVkIEdyYXBoUUwgcXVlcnkgZGlyZWN0bHkgdG9cbiAgICAgKiB0aGUgc3RvcmUuIFRoaXMgbWV0aG9kIHdpbGwgc3RhcnQgYXQgdGhlIHJvb3QgcXVlcnkuIFRvIHN0YXJ0IGF0IGFcbiAgICAgKiBzcGVjaWZpYyBpZCByZXR1cm5lZCBieSBgY2FjaGUuaWRlbnRpZnlgIHRoZW4gdXNlIGB3cml0ZUZyYWdtZW50YC5cbiAgICAgKi9cbiAgICB3cml0ZVF1ZXJ5KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVmID0gdGhpcy5jYWNoZS53cml0ZVF1ZXJ5KG9wdGlvbnMpO1xuICAgICAgICBpZiAob3B0aW9ucy5icm9hZGNhc3QgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlci5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHNvbWUgZGF0YSBpbiB0aGUgc2hhcGUgb2YgdGhlIHByb3ZpZGVkIEdyYXBoUUwgZnJhZ21lbnQgZGlyZWN0bHkgdG9cbiAgICAgKiB0aGUgc3RvcmUuIFRoaXMgbWV0aG9kIHdpbGwgd3JpdGUgdG8gYSBHcmFwaFFMIGZyYWdtZW50IGZyb20gYW55IGFyYml0cmFyeVxuICAgICAqIGlkIHRoYXQgaXMgY3VycmVudGx5IGNhY2hlZCwgdW5saWtlIGB3cml0ZVF1ZXJ5YCB3aGljaCB3aWxsIG9ubHkgd3JpdGVcbiAgICAgKiBmcm9tIHRoZSByb290IHF1ZXJ5LlxuICAgICAqXG4gICAgICogWW91IG11c3QgcGFzcyBpbiBhIEdyYXBoUUwgZG9jdW1lbnQgd2l0aCBhIHNpbmdsZSBmcmFnbWVudCBvciBhIGRvY3VtZW50XG4gICAgICogd2l0aCBtdWx0aXBsZSBmcmFnbWVudHMgdGhhdCByZXByZXNlbnQgd2hhdCB5b3UgYXJlIHdyaXRpbmcuIElmIHlvdSBwYXNzXG4gICAgICogaW4gYSBkb2N1bWVudCB3aXRoIG11bHRpcGxlIGZyYWdtZW50cyB0aGVuIHlvdSBtdXN0IGFsc28gc3BlY2lmeSBhXG4gICAgICogYGZyYWdtZW50TmFtZWAuXG4gICAgICovXG4gICAgd3JpdGVGcmFnbWVudChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlZiA9IHRoaXMuY2FjaGUud3JpdGVGcmFnbWVudChvcHRpb25zKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYnJvYWRjYXN0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWY7XG4gICAgfVxuICAgIF9fYWN0aW9uSG9va0ZvckRldlRvb2xzKGNiKSB7XG4gICAgICAgIHRoaXMuZGV2VG9vbHNIb29rQ2IgPSBjYjtcbiAgICB9XG4gICAgX19yZXF1ZXN0UmF3KHJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuIGV4ZWN1dGUodGhpcy5saW5rLCByZXF1ZXN0LCB7IGNsaWVudDogdGhpcyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHlvdXIgZW50aXJlIHN0b3JlIGJ5IGNsZWFyaW5nIG91dCB5b3VyIGNhY2hlIGFuZCB0aGVuIHJlLWV4ZWN1dGluZ1xuICAgICAqIGFsbCBvZiB5b3VyIGFjdGl2ZSBxdWVyaWVzLiBUaGlzIG1ha2VzIGl0IHNvIHRoYXQgeW91IG1heSBndWFyYW50ZWUgdGhhdFxuICAgICAqIHRoZXJlIGlzIG5vIGRhdGEgbGVmdCBpbiB5b3VyIHN0b3JlIGZyb20gYSB0aW1lIGJlZm9yZSB5b3UgY2FsbGVkIHRoaXNcbiAgICAgKiBtZXRob2QuXG4gICAgICpcbiAgICAgKiBgcmVzZXRTdG9yZSgpYCBpcyB1c2VmdWwgd2hlbiB5b3VyIHVzZXIganVzdCBsb2dnZWQgb3V0LiBZb3XigJl2ZSByZW1vdmVkIHRoZVxuICAgICAqIHVzZXIgc2Vzc2lvbiwgYW5kIHlvdSBub3cgd2FudCB0byBtYWtlIHN1cmUgdGhhdCBhbnkgcmVmZXJlbmNlcyB0byBkYXRhIHlvdVxuICAgICAqIG1pZ2h0IGhhdmUgZmV0Y2hlZCB3aGlsZSB0aGUgdXNlciBzZXNzaW9uIHdhcyBhY3RpdmUgaXMgZ29uZS5cbiAgICAgKlxuICAgICAqIEl0IGlzIGltcG9ydGFudCB0byByZW1lbWJlciB0aGF0IGByZXNldFN0b3JlKClgIF93aWxsXyByZWZldGNoIGFueSBhY3RpdmVcbiAgICAgKiBxdWVyaWVzLiBUaGlzIG1lYW5zIHRoYXQgYW55IGNvbXBvbmVudHMgdGhhdCBtaWdodCBiZSBtb3VudGVkIHdpbGwgZXhlY3V0ZVxuICAgICAqIHRoZWlyIHF1ZXJpZXMgYWdhaW4gdXNpbmcgeW91ciBuZXR3b3JrIGludGVyZmFjZS4gSWYgeW91IGRvIG5vdCB3YW50IHRvXG4gICAgICogcmUtZXhlY3V0ZSBhbnkgcXVlcmllcyB0aGVuIHlvdSBzaG91bGQgbWFrZSBzdXJlIHRvIHN0b3Agd2F0Y2hpbmcgYW55XG4gICAgICogYWN0aXZlIHF1ZXJpZXMuXG4gICAgICovXG4gICAgcmVzZXRTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLnF1ZXJ5TWFuYWdlci5jbGVhclN0b3JlKHtcbiAgICAgICAgICAgIGRpc2NhcmRXYXRjaGVzOiBmYWxzZSxcbiAgICAgICAgfSkpXG4gICAgICAgICAgICAudGhlbigoKSA9PiBQcm9taXNlLmFsbCh0aGlzLnJlc2V0U3RvcmVDYWxsYmFja3MubWFwKChmbikgPT4gZm4oKSkpKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5yZWZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgZGF0YSBmcm9tIHRoZSBzdG9yZS4gVW5saWtlIGByZXNldFN0b3JlYCwgYGNsZWFyU3RvcmVgIHdpbGxcbiAgICAgKiBub3QgcmVmZXRjaCBhbnkgYWN0aXZlIHF1ZXJpZXMuXG4gICAgICovXG4gICAgY2xlYXJTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLnF1ZXJ5TWFuYWdlci5jbGVhclN0b3JlKHtcbiAgICAgICAgICAgIGRpc2NhcmRXYXRjaGVzOiB0cnVlLFxuICAgICAgICB9KSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IFByb21pc2UuYWxsKHRoaXMuY2xlYXJTdG9yZUNhbGxiYWNrcy5tYXAoKGZuKSA9PiBmbigpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGxvd3MgY2FsbGJhY2tzIHRvIGJlIHJlZ2lzdGVyZWQgdGhhdCBhcmUgZXhlY3V0ZWQgd2hlbiB0aGUgc3RvcmUgaXNcbiAgICAgKiByZXNldC4gYG9uUmVzZXRTdG9yZWAgcmV0dXJucyBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkXG4gICAgICogdG8gcmVtb3ZlIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgICAqL1xuICAgIG9uUmVzZXRTdG9yZShjYikge1xuICAgICAgICB0aGlzLnJlc2V0U3RvcmVDYWxsYmFja3MucHVzaChjYik7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U3RvcmVDYWxsYmFja3MgPSB0aGlzLnJlc2V0U3RvcmVDYWxsYmFja3MuZmlsdGVyKChjKSA9PiBjICE9PSBjYik7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsbG93cyBjYWxsYmFja3MgdG8gYmUgcmVnaXN0ZXJlZCB0aGF0IGFyZSBleGVjdXRlZCB3aGVuIHRoZSBzdG9yZSBpc1xuICAgICAqIGNsZWFyZWQuIGBvbkNsZWFyU3RvcmVgIHJldHVybnMgYW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZFxuICAgICAqIHRvIHJlbW92ZSByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICAgKi9cbiAgICBvbkNsZWFyU3RvcmUoY2IpIHtcbiAgICAgICAgdGhpcy5jbGVhclN0b3JlQ2FsbGJhY2tzLnB1c2goY2IpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbGVhclN0b3JlQ2FsbGJhY2tzID0gdGhpcy5jbGVhclN0b3JlQ2FsbGJhY2tzLmZpbHRlcigoYykgPT4gYyAhPT0gY2IpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWZldGNoZXMgYWxsIG9mIHlvdXIgYWN0aXZlIHF1ZXJpZXMuXG4gICAgICpcbiAgICAgKiBgcmVGZXRjaE9ic2VydmFibGVRdWVyaWVzKClgIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0byBicmluZyB0aGUgY2xpZW50IGJhY2sgdG8gcHJvcGVyIHN0YXRlIGluIGNhc2Ugb2YgYSBuZXR3b3JrIG91dGFnZVxuICAgICAqXG4gICAgICogSXQgaXMgaW1wb3J0YW50IHRvIHJlbWVtYmVyIHRoYXQgYHJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcygpYCBfd2lsbF8gcmVmZXRjaCBhbnkgYWN0aXZlXG4gICAgICogcXVlcmllcy4gVGhpcyBtZWFucyB0aGF0IGFueSBjb21wb25lbnRzIHRoYXQgbWlnaHQgYmUgbW91bnRlZCB3aWxsIGV4ZWN1dGVcbiAgICAgKiB0aGVpciBxdWVyaWVzIGFnYWluIHVzaW5nIHlvdXIgbmV0d29yayBpbnRlcmZhY2UuIElmIHlvdSBkbyBub3Qgd2FudCB0b1xuICAgICAqIHJlLWV4ZWN1dGUgYW55IHF1ZXJpZXMgdGhlbiB5b3Ugc2hvdWxkIG1ha2Ugc3VyZSB0byBzdG9wIHdhdGNoaW5nIGFueVxuICAgICAqIGFjdGl2ZSBxdWVyaWVzLlxuICAgICAqIFRha2VzIG9wdGlvbmFsIHBhcmFtZXRlciBgaW5jbHVkZVN0YW5kYnlgIHdoaWNoIHdpbGwgaW5jbHVkZSBxdWVyaWVzIGluIHN0YW5kYnktbW9kZSB3aGVuIHJlZmV0Y2hpbmcuXG4gICAgICpcbiAgICAgKiBOb3RlOiBgY2FjaGUtb25seWAgcXVlcmllcyBhcmUgbm90IHJlZmV0Y2hlZCBieSB0aGlzIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGRlcHJlY2F0ZWQgUGxlYXNlIHVzZSBgcmVmZXRjaE9ic2VydmFibGVRdWVyaWVzYCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIHJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcztcbiAgICAvKipcbiAgICAgKiBSZWZldGNoZXMgYWxsIG9mIHlvdXIgYWN0aXZlIHF1ZXJpZXMuXG4gICAgICpcbiAgICAgKiBgcmVmZXRjaE9ic2VydmFibGVRdWVyaWVzKClgIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0byBicmluZyB0aGUgY2xpZW50IGJhY2sgdG8gcHJvcGVyIHN0YXRlIGluIGNhc2Ugb2YgYSBuZXR3b3JrIG91dGFnZVxuICAgICAqXG4gICAgICogSXQgaXMgaW1wb3J0YW50IHRvIHJlbWVtYmVyIHRoYXQgYHJlZmV0Y2hPYnNlcnZhYmxlUXVlcmllcygpYCBfd2lsbF8gcmVmZXRjaCBhbnkgYWN0aXZlXG4gICAgICogcXVlcmllcy4gVGhpcyBtZWFucyB0aGF0IGFueSBjb21wb25lbnRzIHRoYXQgbWlnaHQgYmUgbW91bnRlZCB3aWxsIGV4ZWN1dGVcbiAgICAgKiB0aGVpciBxdWVyaWVzIGFnYWluIHVzaW5nIHlvdXIgbmV0d29yayBpbnRlcmZhY2UuIElmIHlvdSBkbyBub3Qgd2FudCB0b1xuICAgICAqIHJlLWV4ZWN1dGUgYW55IHF1ZXJpZXMgdGhlbiB5b3Ugc2hvdWxkIG1ha2Ugc3VyZSB0byBzdG9wIHdhdGNoaW5nIGFueVxuICAgICAqIGFjdGl2ZSBxdWVyaWVzLlxuICAgICAqIFRha2VzIG9wdGlvbmFsIHBhcmFtZXRlciBgaW5jbHVkZVN0YW5kYnlgIHdoaWNoIHdpbGwgaW5jbHVkZSBxdWVyaWVzIGluIHN0YW5kYnktbW9kZSB3aGVuIHJlZmV0Y2hpbmcuXG4gICAgICpcbiAgICAgKiBOb3RlOiBgY2FjaGUtb25seWAgcXVlcmllcyBhcmUgbm90IHJlZmV0Y2hlZCBieSB0aGlzIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHJlZmV0Y2hPYnNlcnZhYmxlUXVlcmllcyhpbmNsdWRlU3RhbmRieSkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIucmVmZXRjaE9ic2VydmFibGVRdWVyaWVzKGluY2x1ZGVTdGFuZGJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVmZXRjaGVzIHNwZWNpZmllZCBhY3RpdmUgcXVlcmllcy4gU2ltaWxhciB0byBcInJlZmV0Y2hPYnNlcnZhYmxlUXVlcmllcygpXCIgYnV0IHdpdGggYSBzcGVjaWZpYyBsaXN0IG9mIHF1ZXJpZXMuXG4gICAgICpcbiAgICAgKiBgcmVmZXRjaFF1ZXJpZXMoKWAgaXMgdXNlZnVsIGZvciB1c2UgY2FzZXMgdG8gaW1wZXJhdGl2ZWx5IHJlZnJlc2ggYSBzZWxlY3Rpb24gb2YgcXVlcmllcy5cbiAgICAgKlxuICAgICAqIEl0IGlzIGltcG9ydGFudCB0byByZW1lbWJlciB0aGF0IGByZWZldGNoUXVlcmllcygpYCBfd2lsbF8gcmVmZXRjaCBzcGVjaWZpZWQgYWN0aXZlXG4gICAgICogcXVlcmllcy4gVGhpcyBtZWFucyB0aGF0IGFueSBjb21wb25lbnRzIHRoYXQgbWlnaHQgYmUgbW91bnRlZCB3aWxsIGV4ZWN1dGVcbiAgICAgKiB0aGVpciBxdWVyaWVzIGFnYWluIHVzaW5nIHlvdXIgbmV0d29yayBpbnRlcmZhY2UuIElmIHlvdSBkbyBub3Qgd2FudCB0b1xuICAgICAqIHJlLWV4ZWN1dGUgYW55IHF1ZXJpZXMgdGhlbiB5b3Ugc2hvdWxkIG1ha2Ugc3VyZSB0byBzdG9wIHdhdGNoaW5nIGFueVxuICAgICAqIGFjdGl2ZSBxdWVyaWVzLlxuICAgICAqL1xuICAgIHJlZmV0Y2hRdWVyaWVzKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWFwID0gdGhpcy5xdWVyeU1hbmFnZXIucmVmZXRjaFF1ZXJpZXMob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHF1ZXJpZXMgPSBbXTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgICAgICBtYXAuZm9yRWFjaCgocmVzdWx0LCBvYnNRdWVyeSkgPT4ge1xuICAgICAgICAgICAgcXVlcmllcy5wdXNoKG9ic1F1ZXJ5KTtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gUHJvbWlzZS5hbGwocmVzdWx0cyk7XG4gICAgICAgIC8vIEluIGNhc2UgeW91IG5lZWQgdGhlIHJhdyByZXN1bHRzIGltbWVkaWF0ZWx5LCB3aXRob3V0IGF3YWl0aW5nXG4gICAgICAgIC8vIFByb21pc2UuYWxsKHJlc3VsdHMpOlxuICAgICAgICByZXN1bHQucXVlcmllcyA9IHF1ZXJpZXM7XG4gICAgICAgIHJlc3VsdC5yZXN1bHRzID0gcmVzdWx0cztcbiAgICAgICAgLy8gSWYgeW91IGRlY2lkZSB0byBpZ25vcmUgdGhlIHJlc3VsdCBQcm9taXNlIGJlY2F1c2UgeW91J3JlIHVzaW5nXG4gICAgICAgIC8vIHJlc3VsdC5xdWVyaWVzIGFuZCByZXN1bHQucmVzdWx0cyBpbnN0ZWFkLCB5b3Ugc2hvdWxkbid0IGhhdmUgdG8gd29ycnlcbiAgICAgICAgLy8gYWJvdXQgcHJldmVudGluZyB1bmNhdWdodCByZWplY3Rpb25zIGZvciB0aGUgUHJvbWlzZS5hbGwgcmVzdWx0LlxuICAgICAgICByZXN1bHQuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBfX0RFVl9fICYmIGludmFyaWFudC5kZWJ1Zyg3NiwgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjdXJyZW50bHkgYWN0aXZlIGBPYnNlcnZhYmxlUXVlcnlgIG9iamVjdHMsIGluIGEgYFNldGAuXG4gICAgICpcbiAgICAgKiBBbiBcImFjdGl2ZVwiIHF1ZXJ5IGlzIG9uZSB0aGF0IGhhcyBvYnNlcnZlcnMgYW5kIGEgYGZldGNoUG9saWN5YCBvdGhlciB0aGFuXG4gICAgICogXCJzdGFuZGJ5XCIgb3IgXCJjYWNoZS1vbmx5XCIuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGluY2x1ZGUgYWxsIGBPYnNlcnZhYmxlUXVlcnlgIG9iamVjdHMgKGluY2x1ZGluZyB0aGUgaW5hY3RpdmUgb25lcylcbiAgICAgKiBieSBwYXNzaW5nIFwiYWxsXCIgaW5zdGVhZCBvZiBcImFjdGl2ZVwiLCBvciB5b3UgY2FuIGluY2x1ZGUganVzdCBhIHN1YnNldCBvZlxuICAgICAqIGFjdGl2ZSBxdWVyaWVzIGJ5IHBhc3NpbmcgYW4gYXJyYXkgb2YgcXVlcnkgbmFtZXMgb3IgRG9jdW1lbnROb2RlIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGlzIG1ldGhvZCBvbmx5IHJldHVybnMgcXVlcmllcyB0aGF0IGhhdmUgYWN0aXZlIHN1YnNjcmliZXJzLiBRdWVyaWVzXG4gICAgICogd2l0aG91dCBzdWJzY3JpYmVycyBhcmUgbm90IHRyYWNrZWQgYnkgdGhlIGNsaWVudC5cbiAgICAgKi9cbiAgICBnZXRPYnNlcnZhYmxlUXVlcmllcyhpbmNsdWRlID0gXCJhY3RpdmVcIikge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIuZ2V0T2JzZXJ2YWJsZVF1ZXJpZXMoaW5jbHVkZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMgdGhlIGNhY2hlJ3MgY29tcGxldGUgc3RhdGUsIGluIGEgc2VyaWFsaXphYmxlIGZvcm1hdCBmb3IgbGF0ZXIgcmVzdG9yYXRpb24uXG4gICAgICovXG4gICAgZXh0cmFjdChvcHRpbWlzdGljKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmV4dHJhY3Qob3B0aW1pc3RpYyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGxhY2VzIGV4aXN0aW5nIHN0YXRlIGluIHRoZSBjYWNoZSAoaWYgYW55KSB3aXRoIHRoZSB2YWx1ZXMgZXhwcmVzc2VkIGJ5XG4gICAgICogYHNlcmlhbGl6ZWRTdGF0ZWAuXG4gICAgICpcbiAgICAgKiBDYWxsZWQgd2hlbiBoeWRyYXRpbmcgYSBjYWNoZSAoc2VydmVyIHNpZGUgcmVuZGVyaW5nLCBvciBvZmZsaW5lIHN0b3JhZ2UpLFxuICAgICAqIGFuZCBhbHNvIChwb3RlbnRpYWxseSkgZHVyaW5nIGhvdCByZWxvYWRzLlxuICAgICAqL1xuICAgIHJlc3RvcmUoc2VyaWFsaXplZFN0YXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlLnJlc3RvcmUoc2VyaWFsaXplZFN0YXRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lIGEgbmV3IEFwb2xsb0xpbmsgKG9yIGxpbmsgY2hhaW4pIHRoYXQgQXBvbGxvIENsaWVudCB3aWxsIHVzZS5cbiAgICAgKi9cbiAgICBzZXRMaW5rKG5ld0xpbmspIHtcbiAgICAgICAgdGhpcy5saW5rID0gbmV3TGluaztcbiAgICB9XG4gICAgZ2V0IGRlZmF1bHRDb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeU1hbmFnZXIuZGVmYXVsdENvbnRleHQ7XG4gICAgfVxuICAgIG1hc2tlZEZyYWdtZW50VHJhbnNmb3JtID0gbmV3IERvY3VtZW50VHJhbnNmb3JtKHJlbW92ZU1hc2tlZEZyYWdtZW50U3ByZWFkcyk7XG4gICAgdHJhbnNmb3JtKGRvY3VtZW50LCBkYXRhTWFza2luZyA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkID0gdGhpcy5xdWVyeU1hbmFnZXIudHJhbnNmb3JtKGRvY3VtZW50KTtcbiAgICAgICAgcmV0dXJuIGRhdGFNYXNraW5nID9cbiAgICAgICAgICAgIHRoaXMubWFza2VkRnJhZ21lbnRUcmFuc2Zvcm0udHJhbnNmb3JtRG9jdW1lbnQodHJhbnNmb3JtZWQpXG4gICAgICAgICAgICA6IHRyYW5zZm9ybWVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZXhwZXJpbWVudGFsXG4gICAgICogVGhpcyBpcyBub3QgYSBzdGFibGUgQVBJIC0gaXQgaXMgdXNlZCBpbiBkZXZlbG9wbWVudCBidWlsZHMgdG8gZXhwb3NlXG4gICAgICogaW5mb3JtYXRpb24gdG8gdGhlIERldlRvb2xzLlxuICAgICAqIFVzZSBhdCB5b3VyIG93biByaXNrIVxuICAgICAqIEZvciBtb3JlIGRldGFpbHMsIHNlZSBbTWVtb3J5IE1hbmFnZW1lbnRdKGh0dHBzOi8vd3d3LmFwb2xsb2dyYXBocWwuY29tL2RvY3MvcmVhY3QvY2FjaGluZy9tZW1vcnktbWFuYWdlbWVudC8jbWVhc3VyaW5nLWNhY2hlLXVzYWdlKVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogY29uc29sZS5sb2coY2xpZW50LmdldE1lbW9yeUludGVybmFscygpKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIExvZ3Mgb3V0cHV0IGluIHRoZSBmb2xsb3dpbmcgSlNPTiBmb3JtYXQ6XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGBgYGpzb25cbiAgICAgKiB7XG4gICAgICogICBcImxpbWl0c1wiOiB7XG4gICAgICogICAgIFwiY2Fub25pY2FsU3RyaW5naWZ5XCI6IDEwMDAsXG4gICAgICogICAgIFwicHJpbnRcIjogMjAwMCxcbiAgICAgKiAgICAgXCJkb2N1bWVudFRyYW5zZm9ybS5jYWNoZVwiOiAyMDAwLFxuICAgICAqICAgICBcInF1ZXJ5TWFuYWdlci5nZXREb2N1bWVudEluZm9cIjogMjAwMCxcbiAgICAgKiAgICAgXCJQZXJzaXN0ZWRRdWVyeUxpbmsucGVyc2lzdGVkUXVlcnlIYXNoZXNcIjogMjAwMCxcbiAgICAgKiAgICAgXCJmcmFnbWVudFJlZ2lzdHJ5LnRyYW5zZm9ybVwiOiAyMDAwLFxuICAgICAqICAgICBcImZyYWdtZW50UmVnaXN0cnkubG9va3VwXCI6IDEwMDAsXG4gICAgICogICAgIFwiZnJhZ21lbnRSZWdpc3RyeS5maW5kRnJhZ21lbnRTcHJlYWRzXCI6IDQwMDAsXG4gICAgICogICAgIFwiY2FjaGUuZnJhZ21lbnRRdWVyeURvY3VtZW50c1wiOiAxMDAwLFxuICAgICAqICAgICBcInJlbW92ZVR5cGVuYW1lRnJvbVZhcmlhYmxlcy5nZXRWYXJpYWJsZURlZmluaXRpb25zXCI6IDIwMDAsXG4gICAgICogICAgIFwiaW5NZW1vcnlDYWNoZS5tYXliZUJyb2FkY2FzdFdhdGNoXCI6IDUwMDAsXG4gICAgICogICAgIFwiaW5NZW1vcnlDYWNoZS5leGVjdXRlU2VsZWN0aW9uU2V0XCI6IDEwMDAwLFxuICAgICAqICAgICBcImluTWVtb3J5Q2FjaGUuZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXlcIjogNTAwMFxuICAgICAqICAgfSxcbiAgICAgKiAgIFwic2l6ZXNcIjoge1xuICAgICAqICAgICBcImNhbm9uaWNhbFN0cmluZ2lmeVwiOiA0LFxuICAgICAqICAgICBcInByaW50XCI6IDE0LFxuICAgICAqICAgICBcImFkZFR5cGVuYW1lRG9jdW1lbnRUcmFuc2Zvcm1cIjogW1xuICAgICAqICAgICAgIHtcbiAgICAgKiAgICAgICAgIFwiY2FjaGVcIjogMTRcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIF0sXG4gICAgICogICAgIFwicXVlcnlNYW5hZ2VyXCI6IHtcbiAgICAgKiAgICAgICBcImdldERvY3VtZW50SW5mb1wiOiAxNCxcbiAgICAgKiAgICAgICBcImRvY3VtZW50VHJhbnNmb3Jtc1wiOiBbXG4gICAgICogICAgICAgICB7XG4gICAgICogICAgICAgICAgIFwiY2FjaGVcIjogMTRcbiAgICAgKiAgICAgICAgIH0sXG4gICAgICogICAgICAgICB7XG4gICAgICogICAgICAgICAgIFwiY2FjaGVcIjogMTRcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgICBdXG4gICAgICogICAgIH0sXG4gICAgICogICAgIFwiZnJhZ21lbnRSZWdpc3RyeVwiOiB7XG4gICAgICogICAgICAgXCJmaW5kRnJhZ21lbnRTcHJlYWRzXCI6IDM0LFxuICAgICAqICAgICAgIFwibG9va3VwXCI6IDIwLFxuICAgICAqICAgICAgIFwidHJhbnNmb3JtXCI6IDE0XG4gICAgICogICAgIH0sXG4gICAgICogICAgIFwiY2FjaGVcIjoge1xuICAgICAqICAgICAgIFwiZnJhZ21lbnRRdWVyeURvY3VtZW50c1wiOiAyMlxuICAgICAqICAgICB9LFxuICAgICAqICAgICBcImluTWVtb3J5Q2FjaGVcIjoge1xuICAgICAqICAgICAgIFwiZXhlY3V0ZVNlbGVjdGlvblNldFwiOiA0MzQ1LFxuICAgICAqICAgICAgIFwiZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXlcIjogMTIwNixcbiAgICAgKiAgICAgICBcIm1heWJlQnJvYWRjYXN0V2F0Y2hcIjogMzJcbiAgICAgKiAgICAgfSxcbiAgICAgKiAgICAgXCJsaW5rc1wiOiBbXG4gICAgICogICAgICAge1xuICAgICAqICAgICAgICAgXCJQZXJzaXN0ZWRRdWVyeUxpbmtcIjoge1xuICAgICAqICAgICAgICAgICBcInBlcnNpc3RlZFF1ZXJ5SGFzaGVzXCI6IDE0XG4gICAgICogICAgICAgICB9XG4gICAgICogICAgICAgfSxcbiAgICAgKiAgICAgICB7XG4gICAgICogICAgICAgICBcInJlbW92ZVR5cGVuYW1lRnJvbVZhcmlhYmxlc1wiOiB7XG4gICAgICogICAgICAgICAgIFwiZ2V0VmFyaWFibGVEZWZpbml0aW9uc1wiOiAxNFxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgXVxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBnZXRNZW1vcnlJbnRlcm5hbHM7XG59XG5pZiAoX19ERVZfXykge1xuICAgIEFwb2xsb0NsaWVudC5wcm90b3R5cGUuZ2V0TWVtb3J5SW50ZXJuYWxzID0gZ2V0QXBvbGxvQ2xpZW50TWVtb3J5SW50ZXJuYWxzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXBvbGxvQ2xpZW50LmpzLm1hcFxuIiwKICAgICJpbXBvcnQgeyBDb21iaW5lZFByb3RvY29sRXJyb3JzLCBQUk9UT0NPTF9FUlJPUlNfU1lNQk9MLCBTZXJ2ZXJFcnJvciwgU2VydmVyUGFyc2VFcnJvciwgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvZXJyb3JzXCI7XG5pbXBvcnQgeyBpc05vbk51bGxPYmplY3QgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuY29uc3QgeyBoYXNPd25Qcm9wZXJ0eSB9ID0gT2JqZWN0LnByb3RvdHlwZTtcbi8qKlxuICogVGhpcyBmdW5jdGlvbiBkZXRlY3RzIGFuIEFwb2xsbyBwYXlsb2FkIHJlc3VsdCBiZWZvcmUgaXQgaXMgdHJhbnNmb3JtZWRcbiAqIGludG8gYSBGZXRjaFJlc3VsdCB2aWEgSHR0cExpbms7IGl0IGNhbm5vdCBkZXRlY3QgYW4gQXBvbGxvUGF5bG9hZFJlc3VsdFxuICogb25jZSBpdCBsZWF2ZXMgdGhlIGxpbmsgY2hhaW4uXG4gKi9cbmZ1bmN0aW9uIGlzQXBvbGxvUGF5bG9hZFJlc3VsdCh2YWx1ZSkge1xuICAgIHJldHVybiBpc05vbk51bGxPYmplY3QodmFsdWUpICYmIFwicGF5bG9hZFwiIGluIHZhbHVlO1xufVxuYXN5bmMgZnVuY3Rpb24qIGNvbnN1bWVNdWx0aXBhcnRCb2R5KHJlc3BvbnNlKSB7XG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycz8uZ2V0KFwiY29udGVudC10eXBlXCIpO1xuICAgIC8vIHBhcnNlIGJvdW5kYXJ5IHZhbHVlIGFuZCBpZ25vcmUgYW55IHN1YnNlcXVlbnQgbmFtZS92YWx1ZSBwYWlycyBhZnRlciA7XG4gICAgLy8gaHR0cHM6Ly93d3cucmZjLWVkaXRvci5vcmcvcmZjL3JmYzkxMTAuaHRtbCNuYW1lLXBhcmFtZXRlcnNcbiAgICAvLyBlLmcuIG11bHRpcGFydC9taXhlZDtib3VuZGFyeT1cImdyYXBocWxcIjtkZWZlclNwZWM9MjAyMjA4MjRcbiAgICAvLyBpZiBubyBib3VuZGFyeSBpcyBzcGVjaWZpZWQsIGRlZmF1bHQgdG8gLVxuICAgIGNvbnN0IG1hdGNoID0gY29udGVudFR5cGU/Lm1hdGNoKFxuICAgIC8qXG4gICAgICA7XFxzKmJvdW5kYXJ5PSAgICAgICAgICAgICAgICAjIE1hdGNoIHRoZSBib3VuZGFyeSBwYXJhbWV0ZXJcbiAgICAgICg/OiAgICAgICAgICAgICAgICAgICAgICAgICAgIyBlaXRoZXJcbiAgICAgICAgJyhbXiddKiknICAgICAgICAgICAgICAgICAgIyBhIHN0cmluZyBzdGFydGluZyB3aXRoICcgZG9lc24ndCBjb250YWluICcsIGVuZHMgd2l0aCAnXG4gICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICMgb3JcbiAgICAgICAgXCIoW15cIl0qKVwiICAgICAgICAgICAgICAgICAgIyBhIHN0cmluZyBzdGFydGluZyB3aXRoIFwiIGRvZXNuJ3QgY29udGFpbiBcIiwgZW5kcyB3aXRoIFwiXG4gICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICMgb3JcbiAgICAgICAgKFteXCInXS4qPykgICAgICAgICAgICAgICAgICMgYSBzdHJpbmcgdGhhdCBkb2Vzbid0IHN0YXJ0IHdpdGggJyBvciBcIiwgcGFyc2VkIG5vbi1ncmVlZGlseVxuICAgICAgICApICAgICAgICAgICAgICAgICAgICAgICAgICAjIGVuZCBvZiB0aGUgZ3JvdXBcbiAgICAgIFxccyogICAgICAgICAgICAgICAgICAgICAgICAgICMgb3B0aW9uYWwgd2hpdGVzcGFjZVxuICAgICAgKD86O3wkKSAgICAgICAgICAgICAgICAgICAgICAgICMgbWF0Y2ggYSBzZW1pY29sb24gb3IgZW5kIG9mIHN0cmluZ1xuICAgICovXG4gICAgLztcXHMqYm91bmRhcnk9KD86JyhbXiddKyknfFwiKFteXCJdKylcInwoW15cIiddLis/KSlcXHMqKD86O3wkKS9pKTtcbiAgICBjb25zdCBib3VuZGFyeSA9IFwiXFxyXFxuLS1cIiArIChtYXRjaD8uZmluZExhc3QoKHZhbCkgPT4gISF2YWwpIHx8IFwiLVwiKTtcbiAgICBsZXQgYnVmZmVyID0gXCJcIjtcbiAgICBpbnZhcmlhbnQocmVzcG9uc2UuYm9keSAmJiB0eXBlb2YgcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIgPT09IFwiZnVuY3Rpb25cIiwgNjApO1xuICAgIGNvbnN0IHN0cmVhbSA9IHJlc3BvbnNlLmJvZHk7XG4gICAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgbGV0IGVuY291bnRlcmVkQm91bmRhcnkgPSBmYWxzZTtcbiAgICBsZXQgdmFsdWU7XG4gICAgLy8gY2hlY2sgdG8gc2VlIGlmIHdlIHJlY2VpdmVkIHRoZSBmaW5hbCBib3VuZGFyeSwgd2hpY2ggaXMgYSBub3JtYWwgYm91bmRhcnkgZm9sbG93ZWQgYnkgXCItLVwiXG4gICAgLy8gYXMgZGVzY3JpYmVkIGluIGh0dHBzOi8vd3d3LnJmYy1lZGl0b3Iub3JnL3JmYy9yZmMyMDQ2I3NlY3Rpb24tNS4xLjFcbiAgICBjb25zdCBwYXNzZWRGaW5hbEJvdW5kYXJ5ID0gKCkgPT4gZW5jb3VudGVyZWRCb3VuZGFyeSAmJiBidWZmZXJbMF0gPT0gXCItXCIgJiYgYnVmZmVyWzFdID09IFwiLVwiO1xuICAgIHRyeSB7XG4gICAgICAgIHdoaWxlICghZG9uZSkge1xuICAgICAgICAgICAgKHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCkpO1xuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZSA6IGRlY29kZXIuZGVjb2RlKHZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaEZyb20gPSBidWZmZXIubGVuZ3RoIC0gYm91bmRhcnkubGVuZ3RoICsgMTtcbiAgICAgICAgICAgIGJ1ZmZlciArPSBjaHVuaztcbiAgICAgICAgICAgIGxldCBiaSA9IGJ1ZmZlci5pbmRleE9mKGJvdW5kYXJ5LCBzZWFyY2hGcm9tKTtcbiAgICAgICAgICAgIHdoaWxlIChiaSA+IC0xICYmICFwYXNzZWRGaW5hbEJvdW5kYXJ5KCkpIHtcbiAgICAgICAgICAgICAgICBlbmNvdW50ZXJlZEJvdW5kYXJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZTtcbiAgICAgICAgICAgICAgICBbbWVzc2FnZSwgYnVmZmVyXSA9IFtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnNsaWNlKDAsIGJpKSxcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnNsaWNlKGJpICsgYm91bmRhcnkubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBtZXNzYWdlLmluZGV4T2YoXCJcXHJcXG5cXHJcXG5cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHBhcnNlSGVhZGVycyhtZXNzYWdlLnNsaWNlKDAsIGkpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IGhlYWRlcnNbXCJjb250ZW50LXR5cGVcIl07XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImFwcGxpY2F0aW9uL2pzb25cIikgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHBhdGNoIGNvbnRlbnQgdHlwZTogYXBwbGljYXRpb24vanNvbiBpcyByZXF1aXJlZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG5iOiBUZWNobmljYWxseSB5b3UnZCB3YW50IHRvIHNsaWNlIG9mZiB0aGUgYmVnaW5uaW5nIFwiXFxyXFxuXCIgYnV0IHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBnb2luZyB0byBiZSBgSlNPTi5wYXJzZWBkIHRoZXJlIGlzIG5vIG5lZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IG1lc3NhZ2Uuc2xpY2UoaSk7XG4gICAgICAgICAgICAgICAgaWYgKGJvZHkpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgYm9keTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmkgPSBidWZmZXIuaW5kZXhPZihib3VuZGFyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFzc2VkRmluYWxCb3VuZGFyeSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInByZW1hdHVyZSBlbmQgb2YgbXVsdGlwYXJ0IGJvZHlcIik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICByZWFkZXIuY2FuY2VsKCk7XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRNdWx0aXBhcnRCb2R5KHJlc3BvbnNlLCBuZXh0VmFsdWUpIHtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGJvZHkgb2YgY29uc3VtZU11bHRpcGFydEJvZHkocmVzcG9uc2UpKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlSnNvbkVuY29kaW5nKHJlc3BvbnNlLCBib2R5KTtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHJlc3VsdCkubGVuZ3RoID09IDApXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKGlzQXBvbGxvUGF5bG9hZFJlc3VsdChyZXN1bHQpKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0KS5sZW5ndGggPT09IDEgJiYgcmVzdWx0LnBheWxvYWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHsgLi4ucmVzdWx0LnBheWxvYWQgfTtcbiAgICAgICAgICAgIGlmIChcImVycm9yc1wiIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIG5leHQuZXh0ZW5zaW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubmV4dC5leHRlbnNpb25zLFxuICAgICAgICAgICAgICAgICAgICBbUFJPVE9DT0xfRVJST1JTX1NZTUJPTF06IG5ldyBDb21iaW5lZFByb3RvY29sRXJyb3JzKHJlc3VsdC5lcnJvcnMgPz8gW10pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0VmFsdWUobmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXh0VmFsdWUocmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJUZXh0KSB7XG4gICAgY29uc3QgaGVhZGVyc0luaXQgPSB7fTtcbiAgICBoZWFkZXJUZXh0LnNwbGl0KFwiXFxuXCIpLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IGxpbmUuaW5kZXhPZihcIjpcIik7XG4gICAgICAgIGlmIChpID4gLTEpIHtcbiAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSBoZWFkZXJzIHRvIGxvd2VyY2FzZVxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGxpbmUuc2xpY2UoMCwgaSkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGxpbmUuc2xpY2UoaSArIDEpLnRyaW0oKTtcbiAgICAgICAgICAgIGhlYWRlcnNJbml0W25hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaGVhZGVyc0luaXQ7XG59XG5mdW5jdGlvbiBwYXJzZUpzb25FbmNvZGluZyhyZXNwb25zZSwgYm9keVRleHQpIHtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDMwMCkge1xuICAgICAgICB0aHJvdyBuZXcgU2VydmVyRXJyb3IoYFJlc3BvbnNlIG5vdCBzdWNjZXNzZnVsOiBSZWNlaXZlZCBzdGF0dXMgY29kZSAke3Jlc3BvbnNlLnN0YXR1c31gLCB7IHJlc3BvbnNlLCBib2R5VGV4dCB9KTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYm9keVRleHQpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRocm93IG5ldyBTZXJ2ZXJQYXJzZUVycm9yKGVyciwgeyByZXNwb25zZSwgYm9keVRleHQgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFyc2VHcmFwaFFMUmVzcG9uc2VKc29uRW5jb2RpbmcocmVzcG9uc2UsIGJvZHlUZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYm9keVRleHQpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRocm93IG5ldyBTZXJ2ZXJQYXJzZUVycm9yKGVyciwgeyByZXNwb25zZSwgYm9keVRleHQgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgYm9keVRleHQpIHtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpO1xuICAgIGlmIChjb250ZW50VHlwZT8uaW5jbHVkZXMoXCJhcHBsaWNhdGlvbi9ncmFwaHFsLXJlc3BvbnNlK2pzb25cIikpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlR3JhcGhRTFJlc3BvbnNlSnNvbkVuY29kaW5nKHJlc3BvbnNlLCBib2R5VGV4dCk7XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUpzb25FbmNvZGluZyhyZXNwb25zZSwgYm9keVRleHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2Uob3BlcmF0aW9ucykge1xuICAgIHJldHVybiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLnRleHQoKS50aGVuKChib2R5VGV4dCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBib2R5VGV4dCk7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyZXN1bHQpICYmXG4gICAgICAgICAgICAhaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsIFwiZGF0YVwiKSAmJlxuICAgICAgICAgICAgIWhhc093blByb3BlcnR5LmNhbGwocmVzdWx0LCBcImVycm9yc1wiKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNlcnZlckVycm9yKGBTZXJ2ZXIgcmVzcG9uc2Ugd2FzIG1hbGZvcm1lZCBmb3IgcXVlcnkgJyR7QXJyYXkuaXNBcnJheShvcGVyYXRpb25zKSA/XG4gICAgICAgICAgICAgICAgb3BlcmF0aW9ucy5tYXAoKG9wKSA9PiBvcC5vcGVyYXRpb25OYW1lKVxuICAgICAgICAgICAgICAgIDogb3BlcmF0aW9ucy5vcGVyYXRpb25OYW1lfScuYCwgeyByZXNwb25zZSwgYm9keVRleHQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2UuanMubWFwXG4iLAogICAgImltcG9ydCB7IHByaW50IH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllc1wiO1xuY29uc3QgZGVmYXVsdEh0dHBPcHRpb25zID0ge1xuICAgIGluY2x1ZGVRdWVyeTogdHJ1ZSxcbiAgICBpbmNsdWRlRXh0ZW5zaW9uczogdHJ1ZSxcbiAgICBwcmVzZXJ2ZUhlYWRlckNhc2U6IGZhbHNlLFxufTtcbmNvbnN0IGRlZmF1bHRIZWFkZXJzID0ge1xuICAgIC8vIGhlYWRlcnMgYXJlIGNhc2UgaW5zZW5zaXRpdmUgKGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81MjU5MDA0KVxuICAgIGFjY2VwdDogXCJhcHBsaWNhdGlvbi9ncmFwaHFsLXJlc3BvbnNlK2pzb24sYXBwbGljYXRpb24vanNvbjtxPTAuOVwiLFxuICAgIC8vIFRoZSBjb250ZW50LXR5cGUgaGVhZGVyIGRlc2NyaWJlcyB0aGUgdHlwZSBvZiB0aGUgYm9keSBvZiB0aGUgcmVxdWVzdCwgYW5kXG4gICAgLy8gc28gaXQgdHlwaWNhbGx5IG9ubHkgaXMgc2VudCB3aXRoIHJlcXVlc3RzIHRoYXQgYWN0dWFsbHkgaGF2ZSBib2RpZXMuIE9uZVxuICAgIC8vIGNvdWxkIGltYWdpbmUgdGhhdCBBcG9sbG8gQ2xpZW50IHdvdWxkIHJlbW92ZSB0aGlzIGhlYWRlciB3aGVuIGNvbnN0cnVjdGluZ1xuICAgIC8vIGEgR0VUIHJlcXVlc3QgKHdoaWNoIGhhcyBubyBib2R5KSwgYnV0IHdlIGhpc3RvcmljYWxseSBoYXZlIG5vdCBkb25lIHRoYXQuXG4gICAgLy8gVGhpcyBtZWFucyB0aGF0IGJyb3dzZXJzIHdpbGwgcHJlZmxpZ2h0IGFsbCBBcG9sbG8gQ2xpZW50IHJlcXVlc3RzIChldmVuXG4gICAgLy8gR0VUIHJlcXVlc3RzKS4gQXBvbGxvIFNlcnZlcidzIENTUkYgcHJldmVudGlvbiBmZWF0dXJlIChpbnRyb2R1Y2VkIGluXG4gICAgLy8gQVMzLjcpIHRha2VzIGFkdmFudGFnZSBvZiB0aGlzIGZhY3QgYW5kIGRvZXMgbm90IGJsb2NrIHJlcXVlc3RzIHdpdGggdGhpc1xuICAgIC8vIGhlYWRlci4gSWYgeW91IHdhbnQgdG8gZHJvcCB0aGlzIGhlYWRlciBmcm9tIEdFVCByZXF1ZXN0cywgdGhlbiB5b3Ugc2hvdWxkXG4gICAgLy8gcHJvYmFibHkgcmVwbGFjZSBpdCB3aXRoIGEgYGFwb2xsby1yZXF1aXJlLXByZWZsaWdodGAgaGVhZGVyLCBvciBzZXJ2ZXJzXG4gICAgLy8gd2l0aCBDU1JGIHByZXZlbnRpb24gZW5hYmxlZCBtaWdodCBibG9jayB5b3VyIEdFVCByZXF1ZXN0LiBTZWVcbiAgICAvLyBodHRwczovL3d3dy5hcG9sbG9ncmFwaHFsLmNvbS9kb2NzL2Fwb2xsby1zZXJ2ZXIvc2VjdXJpdHkvY29ycy8jcHJldmVudGluZy1jcm9zcy1zaXRlLXJlcXVlc3QtZm9yZ2VyeS1jc3JmXG4gICAgLy8gZm9yIG1vcmUgZGV0YWlscy5cbiAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbn07XG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxufTtcbmV4cG9ydCBjb25zdCBmYWxsYmFja0h0dHBDb25maWcgPSB7XG4gICAgaHR0cDogZGVmYXVsdEh0dHBPcHRpb25zLFxuICAgIGhlYWRlcnM6IGRlZmF1bHRIZWFkZXJzLFxuICAgIG9wdGlvbnM6IGRlZmF1bHRPcHRpb25zLFxufTtcbmV4cG9ydCBjb25zdCBkZWZhdWx0UHJpbnRlciA9IChhc3QsIHByaW50ZXIpID0+IHByaW50ZXIoYXN0KTtcbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHkob3BlcmF0aW9uLCBmYWxsYmFja0NvbmZpZywgLi4uY29uZmlncykge1xuICAgIGNvbmZpZ3MudW5zaGlmdChmYWxsYmFja0NvbmZpZyk7XG4gICAgcmV0dXJuIHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keUludGVybmFsKG9wZXJhdGlvbiwgZGVmYXVsdFByaW50ZXIsIC4uLmNvbmZpZ3MpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keUludGVybmFsKG9wZXJhdGlvbiwgcHJpbnRlciwgLi4uY29uZmlncykge1xuICAgIGxldCBvcHRpb25zID0ge307XG4gICAgbGV0IGh0dHAgPSB7fTtcbiAgICBjb25maWdzLmZvckVhY2goKGNvbmZpZykgPT4ge1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIC4uLmNvbmZpZy5vcHRpb25zLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgICAgICAuLi5jb25maWcuaGVhZGVycyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChjb25maWcuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuY3JlZGVudGlhbHMgPSBjb25maWcuY3JlZGVudGlhbHM7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzLmFjY2VwdCA9IChjb25maWcuaHR0cD8uYWNjZXB0IHx8IFtdKVxuICAgICAgICAgICAgLmNvbmNhdChvcHRpb25zLmhlYWRlcnMuYWNjZXB0KVxuICAgICAgICAgICAgLmpvaW4oXCIsXCIpO1xuICAgICAgICBodHRwID0ge1xuICAgICAgICAgICAgLi4uaHR0cCxcbiAgICAgICAgICAgIC4uLmNvbmZpZy5odHRwLFxuICAgICAgICB9O1xuICAgIH0pO1xuICAgIG9wdGlvbnMuaGVhZGVycyA9IHJlbW92ZUR1cGxpY2F0ZUhlYWRlcnMob3B0aW9ucy5oZWFkZXJzLCBodHRwLnByZXNlcnZlSGVhZGVyQ2FzZSk7XG4gICAgLy9UaGUgYm9keSBkZXBlbmRzIG9uIHRoZSBodHRwIG9wdGlvbnNcbiAgICBjb25zdCB7IG9wZXJhdGlvbk5hbWUsIGV4dGVuc2lvbnMsIHZhcmlhYmxlcywgcXVlcnkgfSA9IG9wZXJhdGlvbjtcbiAgICBjb25zdCBib2R5ID0geyBvcGVyYXRpb25OYW1lLCB2YXJpYWJsZXMgfTtcbiAgICBpZiAoaHR0cC5pbmNsdWRlRXh0ZW5zaW9ucyAmJiBPYmplY3Qua2V5cyhleHRlbnNpb25zIHx8IHt9KS5sZW5ndGgpXG4gICAgICAgIGJvZHkuZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnM7XG4gICAgLy8gbm90IHNlbmRpbmcgdGhlIHF1ZXJ5IChpLmUgcGVyc2lzdGVkIHF1ZXJpZXMpXG4gICAgaWYgKGh0dHAuaW5jbHVkZVF1ZXJ5KVxuICAgICAgICBib2R5LnF1ZXJ5ID0gcHJpbnRlcihxdWVyeSwgcHJpbnQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGJvZHksXG4gICAgfTtcbn1cbi8vIFJlbW92ZSBwb3RlbnRpYWwgZHVwbGljYXRlIGhlYWRlciBuYW1lcywgcHJlc2VydmluZyBsYXN0IChieSBpbnNlcnRpb24gb3JkZXIpLlxuLy8gVGhpcyBpcyBkb25lIHRvIHByZXZlbnQgdW5pbnRlbnRpb25hbGx5IGR1cGxpY2F0aW5nIGEgaGVhZGVyIGluc3RlYWQgb2Zcbi8vIG92ZXJ3cml0aW5nIGl0IChTZWUgIzg0NDcgYW5kICM4NDQ5KS5cbmZ1bmN0aW9uIHJlbW92ZUR1cGxpY2F0ZUhlYWRlcnMoaGVhZGVycywgcHJlc2VydmVIZWFkZXJDYXNlKSB7XG4gICAgLy8gSWYgd2UncmUgbm90IHByZXNlcnZpbmcgdGhlIGNhc2UsIGp1c3QgcmVtb3ZlIGR1cGxpY2F0ZXMgdy8gbm9ybWFsaXphdGlvbi5cbiAgICBpZiAoIXByZXNlcnZlSGVhZGVyQ2FzZSkge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkSGVhZGVycyA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhPYmplY3QoaGVhZGVycykpLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRIZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0gPSBoZWFkZXJzW25hbWVdO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRIZWFkZXJzO1xuICAgIH1cbiAgICAvLyBJZiB3ZSBhcmUgcHJlc2VydmluZyB0aGUgY2FzZSwgcmVtb3ZlIGR1cGxpY2F0ZXMgdy8gbm9ybWFsaXphdGlvbixcbiAgICAvLyBwcmVzZXJ2aW5nIHRoZSBvcmlnaW5hbCBuYW1lLlxuICAgIC8vIFRoaXMgYWxsb3dzIGZvciBub24taHR0cC1zcGVjLWNvbXBsaWFudCBzZXJ2ZXJzIHRoYXQgZXhwZWN0IGludGVudGlvbmFsbHlcbiAgICAvLyBjYXBpdGFsaXplZCBoZWFkZXIgbmFtZXMgKFNlZSAjNjc0MSkuXG4gICAgY29uc3QgaGVhZGVyRGF0YSA9IHt9O1xuICAgIE9iamVjdC5rZXlzKE9iamVjdChoZWFkZXJzKSkuZm9yRWFjaCgobmFtZSkgPT4ge1xuICAgICAgICBoZWFkZXJEYXRhW25hbWUudG9Mb3dlckNhc2UoKV0gPSB7XG4gICAgICAgICAgICBvcmlnaW5hbE5hbWU6IG5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogaGVhZGVyc1tuYW1lXSxcbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICBjb25zdCBub3JtYWxpemVkSGVhZGVycyA9IHt9O1xuICAgIE9iamVjdC5rZXlzKGhlYWRlckRhdGEpLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgbm9ybWFsaXplZEhlYWRlcnNbaGVhZGVyRGF0YVtuYW1lXS5vcmlnaW5hbE5hbWVdID0gaGVhZGVyRGF0YVtuYW1lXS52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gbm9ybWFsaXplZEhlYWRlcnM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHkuanMubWFwIiwKICAgICJpbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludmFyaWFudFwiO1xuZXhwb3J0IGNvbnN0IGNoZWNrRmV0Y2hlciA9IChmZXRjaGVyKSA9PiB7XG4gICAgaW52YXJpYW50KGZldGNoZXIgfHwgdHlwZW9mIGZldGNoICE9PSBcInVuZGVmaW5lZFwiLCA1OSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hlY2tGZXRjaGVyLmpzLm1hcFxuIiwKICAgICJleHBvcnQgY29uc3Qgc2VsZWN0VVJJID0gKG9wZXJhdGlvbiwgZmFsbGJhY2tVUkkpID0+IHtcbiAgICBjb25zdCBjb250ZXh0ID0gb3BlcmF0aW9uLmdldENvbnRleHQoKTtcbiAgICBjb25zdCBjb250ZXh0VVJJID0gY29udGV4dC51cmk7XG4gICAgaWYgKGNvbnRleHRVUkkpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRVUkk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBmYWxsYmFja1VSSSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBmYWxsYmFja1VSSShvcGVyYXRpb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrVVJJIHx8IFwiL2dyYXBocWxcIjtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VsZWN0VVJJLmpzLm1hcCIsCiAgICAiLy8gRm9yIEdFVCBvcGVyYXRpb25zLCByZXR1cm5zIHRoZSBnaXZlbiBVUkkgcmV3cml0dGVuIHdpdGggcGFyYW1ldGVycywgb3IgYVxuLy8gcGFyc2UgZXJyb3IuXG5leHBvcnQgZnVuY3Rpb24gcmV3cml0ZVVSSUZvckdFVChjaG9zZW5VUkksIGJvZHkpIHtcbiAgICAvLyBJbXBsZW1lbnQgdGhlIHN0YW5kYXJkIEhUVFAgR0VUIHNlcmlhbGl6YXRpb24sIHBsdXMgJ2V4dGVuc2lvbnMnLiBOb3RlXG4gICAgLy8gdGhlIGV4dHJhIGxldmVsIG9mIEpTT04gc2VyaWFsaXphdGlvbiFcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IFtdO1xuICAgIGNvbnN0IGFkZFF1ZXJ5UGFyYW0gPSAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgICBxdWVyeVBhcmFtcy5wdXNoKGAke2tleX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWApO1xuICAgIH07XG4gICAgaWYgKFwicXVlcnlcIiBpbiBib2R5KSB7XG4gICAgICAgIGFkZFF1ZXJ5UGFyYW0oXCJxdWVyeVwiLCBib2R5LnF1ZXJ5KTtcbiAgICB9XG4gICAgaWYgKGJvZHkub3BlcmF0aW9uTmFtZSkge1xuICAgICAgICBhZGRRdWVyeVBhcmFtKFwib3BlcmF0aW9uTmFtZVwiLCBib2R5Lm9wZXJhdGlvbk5hbWUpO1xuICAgIH1cbiAgICBpZiAoYm9keS52YXJpYWJsZXMpIHtcbiAgICAgICAgbGV0IHNlcmlhbGl6ZWRWYXJpYWJsZXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXJpYWxpemVkVmFyaWFibGVzID0gSlNPTi5zdHJpbmdpZnkoYm9keS52YXJpYWJsZXMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4geyBwYXJzZUVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgYWRkUXVlcnlQYXJhbShcInZhcmlhYmxlc1wiLCBzZXJpYWxpemVkVmFyaWFibGVzKTtcbiAgICB9XG4gICAgaWYgKGJvZHkuZXh0ZW5zaW9ucykge1xuICAgICAgICBsZXQgc2VyaWFsaXplZEV4dGVuc2lvbnM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXJpYWxpemVkRXh0ZW5zaW9ucyA9IEpTT04uc3RyaW5naWZ5KGJvZHkuZXh0ZW5zaW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHBhcnNlRXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBhZGRRdWVyeVBhcmFtKFwiZXh0ZW5zaW9uc1wiLCBzZXJpYWxpemVkRXh0ZW5zaW9ucyk7XG4gICAgfVxuICAgIC8vIFJlY29uc3RydWN0IHRoZSBVUkkgd2l0aCBhZGRlZCBxdWVyeSBwYXJhbXMuXG4gICAgLy8gWFhYIFRoaXMgYXNzdW1lcyB0aGF0IHRoZSBVUkkgaXMgd2VsbC1mb3JtZWQgYW5kIHRoYXQgaXQgZG9lc24ndFxuICAgIC8vICAgICBhbHJlYWR5IGNvbnRhaW4gYW55IG9mIHRoZXNlIHF1ZXJ5IHBhcmFtcy4gV2UgY291bGQgaW5zdGVhZCB1c2UgdGhlXG4gICAgLy8gICAgIFVSTCBBUEkgYW5kIHRha2UgYSBwb2x5ZmlsbCAod2hhdHdnLXVybEA2KSBmb3Igb2xkZXIgYnJvd3NlcnMgdGhhdFxuICAgIC8vICAgICBkb24ndCBzdXBwb3J0IFVSTFNlYXJjaFBhcmFtcy4gTm90ZSB0aGF0IHNvbWUgYnJvd3NlcnMgKGFuZFxuICAgIC8vICAgICB2ZXJzaW9ucyBvZiB3aGF0d2ctdXJsKSBzdXBwb3J0IFVSTCBidXQgbm90IFVSTFNlYXJjaFBhcmFtcyFcbiAgICBsZXQgZnJhZ21lbnQgPSBcIlwiLCBwcmVGcmFnbWVudCA9IGNob3NlblVSSTtcbiAgICBjb25zdCBmcmFnbWVudFN0YXJ0ID0gY2hvc2VuVVJJLmluZGV4T2YoXCIjXCIpO1xuICAgIGlmIChmcmFnbWVudFN0YXJ0ICE9PSAtMSkge1xuICAgICAgICBmcmFnbWVudCA9IGNob3NlblVSSS5zdWJzdHIoZnJhZ21lbnRTdGFydCk7XG4gICAgICAgIHByZUZyYWdtZW50ID0gY2hvc2VuVVJJLnN1YnN0cigwLCBmcmFnbWVudFN0YXJ0KTtcbiAgICB9XG4gICAgY29uc3QgcXVlcnlQYXJhbXNQcmVmaXggPSBwcmVGcmFnbWVudC5pbmRleE9mKFwiP1wiKSA9PT0gLTEgPyBcIj9cIiA6IFwiJlwiO1xuICAgIGNvbnN0IG5ld1VSSSA9IHByZUZyYWdtZW50ICsgcXVlcnlQYXJhbXNQcmVmaXggKyBxdWVyeVBhcmFtcy5qb2luKFwiJlwiKSArIGZyYWdtZW50O1xuICAgIHJldHVybiB7IG5ld1VSSSB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV3cml0ZVVSSUZvckdFVC5qcy5tYXAiLAogICAgImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgQXBvbGxvTGluayB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9saW5rXCI7XG5pbXBvcnQgeyBmaWx0ZXJPcGVyYXRpb25WYXJpYWJsZXMgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvbGluay91dGlsc1wiO1xuaW1wb3J0IHsgaXNNdXRhdGlvbk9wZXJhdGlvbiwgaXNTdWJzY3JpcHRpb25PcGVyYXRpb24sIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L3V0aWxpdGllc1wiO1xuaW1wb3J0IHsgX19ERVZfXyB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvZW52aXJvbm1lbnRcIjtcbmltcG9ydCB7IGNvbXBhY3QgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvdXRpbGl0aWVzL2ludGVybmFsXCI7XG5pbXBvcnQgeyBtYXliZSB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWwvZ2xvYmFsc1wiO1xuaW1wb3J0IHsgY2hlY2tGZXRjaGVyIH0gZnJvbSBcIi4vY2hlY2tGZXRjaGVyLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlLCByZWFkTXVsdGlwYXJ0Qm9keSwgfSBmcm9tIFwiLi9wYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlLmpzXCI7XG5pbXBvcnQgeyByZXdyaXRlVVJJRm9yR0VUIH0gZnJvbSBcIi4vcmV3cml0ZVVSSUZvckdFVC5qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdFByaW50ZXIsIGZhbGxiYWNrSHR0cENvbmZpZywgc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5SW50ZXJuYWwsIH0gZnJvbSBcIi4vc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5LmpzXCI7XG5pbXBvcnQgeyBzZWxlY3RVUkkgfSBmcm9tIFwiLi9zZWxlY3RVUkkuanNcIjtcbmNvbnN0IGJhY2t1cEZldGNoID0gbWF5YmUoKCkgPT4gZmV0Y2gpO1xuZnVuY3Rpb24gbm9vcCgpIHsgfVxuLyoqXG4gKiBgQmFzZUh0dHBMaW5rYCBpcyBhIHRlcm1pbmF0aW5nIGxpbmsgdGhhdCBzZW5kcyBhIEdyYXBoUUwgb3BlcmF0aW9uIHRvIGFcbiAqIHJlbW90ZSBlbmRwb2ludCBvdmVyIEhUVFAuIEl0IHNlcnZlcyBhcyBhIGJhc2UgbGluayB0byBgSHR0cExpbmtgLlxuICpcbiAqIEByZW1hcmtzXG4gKlxuICogYEJhc2VIdHRwTGlua2Agc3VwcG9ydHMgYm90aCBQT1NUIGFuZCBHRVQgcmVxdWVzdHMsIGFuZCB5b3UgY2FuIGNvbmZpZ3VyZVxuICogSFRUUCBvcHRpb25zIG9uIGEgcGVyLW9wZXJhdGlvbiBiYXNpcy4gWW91IGNhbiB1c2UgdGhlc2Ugb3B0aW9ucyBmb3JcbiAqIGF1dGhlbnRpY2F0aW9uLCBwZXJzaXN0ZWQgcXVlcmllcywgZHluYW1pYyBVUklzLCBhbmQgb3RoZXIgZ3JhbnVsYXIgdXBkYXRlcy5cbiAqXG4gKiA+IFshTk9URV1cbiAqID4gUHJlZmVyIHVzaW5nIGBIdHRwTGlua2Agb3ZlciBgQmFzZUh0dHBMaW5rYC4gVXNlIGBCYXNlSHR0cExpbmtgIHdoZW4geW91XG4gKiA+IG5lZWQgdG8gZGlzYWJsZSBjbGllbnQgYXdhcmVuZXNzIGZlYXR1cmVzIGFuZCB3b3VsZCBsaWtlIHRvIHRyZWUtc2hha2VcbiAqID4gdGhlIGltcGxlbWVudGF0aW9uIG9mIGBDbGllbnRBd2FyZW5lc3NMaW5rYCBvdXQgb2YgeW91ciBhcHAgYnVuZGxlLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IEJhc2VIdHRwTGluayB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9saW5rL2h0dHBcIjtcbiAqXG4gKiBjb25zdCBsaW5rID0gbmV3IEJhc2VIdHRwTGluayh7XG4gKiAgIHVyaTogXCJodHRwOi8vbG9jYWxob3N0OjQwMDAvZ3JhcGhxbFwiLFxuICogICBoZWFkZXJzOiB7XG4gKiAgICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAsXG4gKiAgIH0sXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQmFzZUh0dHBMaW5rIGV4dGVuZHMgQXBvbGxvTGluayB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGxldCB7IHVyaSA9IFwiL2dyYXBocWxcIiwgXG4gICAgICAgIC8vIHVzZSBkZWZhdWx0IGdsb2JhbCBmZXRjaCBpZiBub3RoaW5nIHBhc3NlZCBpblxuICAgICAgICBmZXRjaDogcHJlZmVycmVkRmV0Y2gsIHByaW50ID0gZGVmYXVsdFByaW50ZXIsIGluY2x1ZGVFeHRlbnNpb25zLCBwcmVzZXJ2ZUhlYWRlckNhc2UsIHVzZUdFVEZvclF1ZXJpZXMsIGluY2x1ZGVVbnVzZWRWYXJpYWJsZXMgPSBmYWxzZSwgLi4ucmVxdWVzdE9wdGlvbnMgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgYXQgbGVhc3Qgb25lIG9mIHByZWZlcnJlZEZldGNoLCB3aW5kb3cuZmV0Y2gsIG9yIGJhY2t1cEZldGNoIGlzXG4gICAgICAgICAgICAvLyBkZWZpbmVkLCBzbyByZXF1ZXN0cyB3b24ndCBmYWlsIGF0IHJ1bnRpbWUuXG4gICAgICAgICAgICBjaGVja0ZldGNoZXIocHJlZmVycmVkRmV0Y2ggfHwgYmFja3VwRmV0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpbmtDb25maWcgPSB7XG4gICAgICAgICAgICBodHRwOiBjb21wYWN0KHsgaW5jbHVkZUV4dGVuc2lvbnMsIHByZXNlcnZlSGVhZGVyQ2FzZSB9KSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHJlcXVlc3RPcHRpb25zLmZldGNoT3B0aW9ucyxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiByZXF1ZXN0T3B0aW9ucy5jcmVkZW50aWFscyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHJlcXVlc3RPcHRpb25zLmhlYWRlcnMsXG4gICAgICAgIH07XG4gICAgICAgIHN1cGVyKChvcGVyYXRpb24pID0+IHtcbiAgICAgICAgICAgIGxldCBjaG9zZW5VUkkgPSBzZWxlY3RVUkkob3BlcmF0aW9uLCB1cmkpO1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IG9wZXJhdGlvbi5nZXRDb250ZXh0KCk7XG4gICAgICAgICAgICBjb25zdCBodHRwID0geyAuLi5jb250ZXh0Lmh0dHAgfTtcbiAgICAgICAgICAgIGlmIChpc1N1YnNjcmlwdGlvbk9wZXJhdGlvbihvcGVyYXRpb24ucXVlcnkpKSB7XG4gICAgICAgICAgICAgICAgaHR0cC5hY2NlcHQgPSBbXG4gICAgICAgICAgICAgICAgICAgIFwibXVsdGlwYXJ0L21peGVkO2JvdW5kYXJ5PWdyYXBocWw7c3Vic2NyaXB0aW9uU3BlYz0xLjBcIixcbiAgICAgICAgICAgICAgICAgICAgLi4uKGh0dHAuYWNjZXB0IHx8IFtdKSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29udGV4dENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBodHRwLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGNvbnRleHQuZmV0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBjb250ZXh0LmNyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvbnRleHQuaGVhZGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvL3VzZXMgZmFsbGJhY2ssIGxpbmssIGFuZCB0aGVuIGNvbnRleHQgdG8gYnVpbGQgb3B0aW9uc1xuICAgICAgICAgICAgY29uc3QgeyBvcHRpb25zLCBib2R5IH0gPSBzZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHlJbnRlcm5hbChvcGVyYXRpb24sIHByaW50LCBmYWxsYmFja0h0dHBDb25maWcsIGxpbmtDb25maWcsIGNvbnRleHRDb25maWcpO1xuICAgICAgICAgICAgaWYgKGJvZHkudmFyaWFibGVzICYmICFpbmNsdWRlVW51c2VkVmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgYm9keS52YXJpYWJsZXMgPSBmaWx0ZXJPcGVyYXRpb25WYXJpYWJsZXMoYm9keS52YXJpYWJsZXMsIG9wZXJhdGlvbi5xdWVyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgIGxldCBjbGVhbnVwQ29udHJvbGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsU2lnbmFsID0gb3B0aW9ucy5zaWduYWw7XG4gICAgICAgICAgICAgICAgLy8gaW4gYW4gaWRlYWwgd29ybGQgd2UgY291bGQgdXNlIGBBYm9ydFNpZ25hbC5hbnlgIGhlcmUsIGJ1dFxuICAgICAgICAgICAgICAgIC8vIFJlYWN0IE5hdGl2ZSB1c2VzIGh0dHBzOi8vZ2l0aHViLmNvbS9teXN0aWNhdGVhL2Fib3J0LWNvbnRyb2xsZXIgYXNcbiAgICAgICAgICAgICAgICAvLyBhIHBvbHlmaWxsIGZvciBgQWJvcnRDb250cm9sbGVyYCwgYW5kIGl0IGRvZXMgbm90IHN1cHBvcnQgYEFib3J0U2lnbmFsLmFueWAuXG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI/LmFib3J0KGV4dGVybmFsU2lnbmFsLnJlYXNvbik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBleHRlcm5hbFNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgbGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBjbGVhbnVwQ29udHJvbGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcj8uc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBjbGVhbnVwQ29udHJvbGxlcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIG9uIGNsZWFudXAsIHdlIG5lZWQgdG8gc3RvcCBsaXN0ZW5pbmcgdG8gYG9wdGlvbnMuc2lnbmFsYCB0byBhdm9pZCBtZW1vcnkgbGVha3NcbiAgICAgICAgICAgICAgICAgICAgZXh0ZXJuYWxTaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW51cENvbnRyb2xsZXIgPSBub29wO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gcmVhY3QgbmF0aXZlIGFsc28gZG9lcyBub3Qgc3VwcG9ydCB0aGUgYWRkRXZlbnRMaXN0ZW5lciBgc2lnbmFsYCBvcHRpb25cbiAgICAgICAgICAgICAgICAvLyBzbyB3ZSBoYXZlIHRvIHNpbXVsYXRlIHRoYXQgb3Vyc2VsZlxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCBjbGVhbnVwQ29udHJvbGxlciwge1xuICAgICAgICAgICAgICAgICAgICBvbmNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5zaWduYWwgPSBjb250cm9sbGVyLnNpZ25hbDtcbiAgICAgICAgICAgIGlmICh1c2VHRVRGb3JRdWVyaWVzICYmICFpc011dGF0aW9uT3BlcmF0aW9uKG9wZXJhdGlvbi5xdWVyeSkpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm1ldGhvZCA9IFwiR0VUXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoKG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWV0aG9kID09PSBcIkdFVFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbmV3VVJJLCBwYXJzZUVycm9yIH0gPSByZXdyaXRlVVJJRm9yR0VUKGNob3NlblVSSSwgYm9keSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBwYXJzZUVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNob3NlblVSSSA9IG5ld1VSSTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBQcmVmZXIgbGlua09wdGlvbnMuZmV0Y2ggKHByZWZlcnJlZEZldGNoKSBpZiBwcm92aWRlZCwgYW5kIG90aGVyd2lzZVxuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byB0aGUgKmN1cnJlbnQqIGdsb2JhbCB3aW5kb3cuZmV0Y2ggZnVuY3Rpb24gKHNlZSBpc3N1ZVxuICAgICAgICAgICAgICAgIC8vICM3ODMyKSwgb3IgKGlmIGFsbCBlbHNlIGZhaWxzKSB0aGUgYmFja3VwRmV0Y2ggZnVuY3Rpb24gd2Ugc2F2ZWQgd2hlblxuICAgICAgICAgICAgICAgIC8vIHRoaXMgbW9kdWxlIHdhcyBmaXJzdCBldmFsdWF0ZWQuIFRoaXMgbGFzdCBvcHRpb24gcHJvdGVjdHMgYWdhaW5zdCB0aGVcbiAgICAgICAgICAgICAgICAvLyByZW1vdmFsIG9mIHdpbmRvdy5mZXRjaCwgd2hpY2ggaXMgdW5saWtlbHkgYnV0IG5vdCBpbXBvc3NpYmxlLlxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGZXRjaCA9IHByZWZlcnJlZEZldGNoIHx8IG1heWJlKCgpID0+IGZldGNoKSB8fCBiYWNrdXBGZXRjaDtcbiAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlck5leHQgPSBvYnNlcnZlci5uZXh0LmJpbmQob2JzZXJ2ZXIpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRGZXRjaChjaG9zZW5VUkksIG9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24uc2V0Q29udGV4dCh7IHJlc3BvbnNlIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHlwZSA9IHJlc3BvbnNlLmhlYWRlcnM/LmdldChcImNvbnRlbnQtdHlwZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN0eXBlICE9PSBudWxsICYmIC9ebXVsdGlwYXJ0XFwvbWl4ZWQvaS50ZXN0KGN0eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRNdWx0aXBhcnRCb2R5KHJlc3BvbnNlLCBvYnNlcnZlck5leHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2Uob3BlcmF0aW9uKShyZXNwb25zZSkudGhlbihvYnNlcnZlck5leHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbGVhbnVwQ29udHJvbGxlcigpO1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXBDb250cm9sbGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gWFhYIHN1cHBvcnQgY2FuY2VsaW5nIHRoaXMgcmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE3LzA5L2Fib3J0YWJsZS1mZXRjaFxuICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2VIdHRwTGluay5qcy5tYXAiLAogICAgImltcG9ydCB7IEFwb2xsb0xpbmsgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvbGlua1wiO1xuaW1wb3J0IHsgY29tcGFjdCB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC91dGlsaXRpZXMvaW50ZXJuYWxcIjtcbi8qKlxuICogYENsaWVudEF3YXJlbmVzc0xpbmtgIHByb3ZpZGVzIHN1cHBvcnQgZm9yIHByb3ZpZGluZyBjbGllbnQgYXdhcmVuZXNzXG4gKiBmZWF0dXJlcy5cbiAqXG4gKiBAcmVtYXJrc1xuICpcbiAqIENsaWVudCBhd2FyZW5lc3MgYWRkcyBpZGVudGlmeWluZyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY2xpZW50IHRvIEhUVFBcbiAqIHJlcXVlc3RzIGZvciB1c2Ugd2l0aCBtZXRyaWNzIHJlcG9ydGluZyB0b29scywgc3VjaCBhcyBbQXBvbGxvIEdyYXBoT1NdKGh0dHBzOi8vYXBvbGxvZ3JhcGhxbC5jb20vZG9jcy9ncmFwaG9zL3BsYXRmb3JtKS5cbiAqIEl0IGlzIGluY2x1ZGVkIGluIHRoZSBmdW5jdGlvbmFsaXR5IG9mIFtgSHR0cExpbmtgXShodHRwczovL2Fwb2xsb2dyYXBocWwuY29tL2RvY3MvcmVhY3QvYXBpL2xpbmsvYXBvbGxvLWxpbmstaHR0cCkgYnkgZGVmYXVsdC5cbiAqXG4gKiBDbGllbnQgYXdhcmVuZXNzIGRpc3Rpbmd1aXNoZXMgYmV0d2VlbiB1c2VyLXByb3ZpZGVkIGNsaWVudCBhd2FyZW5lc3NcbiAqIChwcm92aWRlZCBieSB0aGUgYGNsaWVudEF3YXJlbmVzc2Agb3B0aW9uKSBhbmQgZW5oYW5jZWQgY2xpZW50IGF3YXJlbmVzc1xuICogKHByb3ZpZGVkIGJ5IHRoZSBgZW5oYW5jZWRDbGllbnRBd2FyZW5lc3NgIG9wdGlvbikuIFVzZXItcHJvdmlkZWQgY2xpZW50XG4gKiBhd2FyZW5lc3MgZW5hYmxlcyB5b3UgdG8gc2V0IGEgY3VzdG9taXplZCBjbGllbnQgbmFtZSBhbmQgdmVyc2lvbiBmb3JcbiAqIGlkZW50aWZpY2F0aW9uIGluIG1ldHJpY3MgcmVwb3J0aW5nIHRvb2xzLiBFbmhhbmNlZCBjbGllbnQgYXdhcmVuZXNzIGVuYWJsZXNcbiAqIHRoZSBpZGVudGlmaWNhdGlvbiBvZiB0aGUgQXBvbGxvIENsaWVudCBwYWNrYWdlIG5hbWUgYW5kIHZlcnNpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQ2xpZW50QXdhcmVuZXNzTGluayB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9saW5rL2NsaWVudC1hd2FyZW5lc3NcIjtcbiAqXG4gKiBjb25zdCBsaW5rID0gbmV3IENsaWVudEF3YXJlbmVzc0xpbmsoe1xuICogICBjbGllbnRBd2FyZW5lc3M6IHtcbiAqICAgICBuYW1lOiBcIk15IENsaWVudFwiLFxuICogICAgIHZlcnNpb246IFwiMVwiLFxuICogICB9LFxuICogICBlbmhhbmNlZENsaWVudEF3YXJlbmVzczoge1xuICogICAgIHRyYW5zcG9ydDogXCJleHRlbnNpb25zXCIsXG4gKiAgIH0sXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ2xpZW50QXdhcmVuZXNzTGluayBleHRlbmRzIEFwb2xsb0xpbmsge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigob3BlcmF0aW9uLCBmb3J3YXJkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjbGllbnQgPSBvcGVyYXRpb24uY2xpZW50O1xuICAgICAgICAgICAgY29uc3QgY2xpZW50T3B0aW9ucyA9IGNsaWVudFtcInF1ZXJ5TWFuYWdlclwiXS5jbGllbnRPcHRpb25zO1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IG9wZXJhdGlvbi5nZXRDb250ZXh0KCk7XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBuYW1lLCB2ZXJzaW9uLCB0cmFuc3BvcnQgPSBcImhlYWRlcnNcIiwgfSA9IGNvbXBhY3Qoe30sIGNsaWVudE9wdGlvbnMuY2xpZW50QXdhcmVuZXNzLCBvcHRpb25zLmNsaWVudEF3YXJlbmVzcywgY29udGV4dC5jbGllbnRBd2FyZW5lc3MpO1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc3BvcnQgPT09IFwiaGVhZGVyc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5zZXRDb250ZXh0KCh7IGhlYWRlcnMsIGV4dGVuc2lvbnMgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBjb21wYWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldHRpbmcgdGhlc2UgZmlyc3Qgc28gdGhhdCB0aGV5IGNhbiBiZSBvdmVycmlkZGVuIGJ5IHVzZXItcHJvdmlkZWQgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhcG9sbG9ncmFwaHFsLWNsaWVudC1uYW1lXCI6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXBvbGxvZ3JhcGhxbC1jbGllbnQtdmVyc2lvblwiOiB2ZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGhlYWRlcnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdHJhbnNwb3J0ID0gXCJleHRlbnNpb25zXCIgfSA9IGNvbXBhY3Qoe30sIGNsaWVudE9wdGlvbnMuZW5oYW5jZWRDbGllbnRBd2FyZW5lc3MsIG9wdGlvbnMuZW5oYW5jZWRDbGllbnRBd2FyZW5lc3MpO1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc3BvcnQgPT09IFwiZXh0ZW5zaW9uc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5leHRlbnNpb25zID0gY29tcGFjdChcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZyB0aGVzZSBmaXJzdCBzbyB0aGF0IGl0IGNhbiBiZSBvdmVycmlkZGVuIGJ5IHVzZXItcHJvdmlkZWQgZXh0ZW5zaW9uc1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRMaWJyYXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJAYXBvbGxvL2NsaWVudFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246IGNsaWVudC52ZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSwgb3BlcmF0aW9uLmV4dGVuc2lvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3J3YXJkKG9wZXJhdGlvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNsaWVudEF3YXJlbmVzc0xpbmsuanMubWFwIiwKICAgICJpbXBvcnQgeyBBcG9sbG9MaW5rIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L2xpbmtcIjtcbmltcG9ydCB7IENsaWVudEF3YXJlbmVzc0xpbmsgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvbGluay9jbGllbnQtYXdhcmVuZXNzXCI7XG5pbXBvcnQgeyBCYXNlSHR0cExpbmsgfSBmcm9tIFwiLi9CYXNlSHR0cExpbmsuanNcIjtcbi8qKlxuICogYEh0dHBMaW5rYCBpcyBhIHRlcm1pbmF0aW5nIGxpbmsgdGhhdCBzZW5kcyBhIEdyYXBoUUwgb3BlcmF0aW9uIHRvIGEgcmVtb3RlXG4gKiBlbmRwb2ludCBvdmVyIEhUVFAuIEl0IGNvbWJpbmVzIHRoZSBmdW5jdGlvbmFsaXR5IG9mIGBCYXNlSHR0cExpbmtgIGFuZFxuICogYENsaWVudEF3YXJlbmVzc0xpbmtgIGludG8gYSBzaW5nbGUgbGluay5cbiAqXG4gKiBAcmVtYXJrc1xuICpcbiAqIGBIdHRwTGlua2Agc3VwcG9ydHMgYm90aCBQT1NUIGFuZCBHRVQgcmVxdWVzdHMsIGFuZCB5b3UgY2FuIGNvbmZpZ3VyZSBIVFRQXG4gKiBvcHRpb25zIG9uIGEgcGVyLW9wZXJhdGlvbiBiYXNpcy4gWW91IGNhbiB1c2UgdGhlc2Ugb3B0aW9ucyBmb3JcbiAqIGF1dGhlbnRpY2F0aW9uLCBwZXJzaXN0ZWQgcXVlcmllcywgZHluYW1pYyBVUklzLCBhbmQgb3RoZXIgZ3JhbnVsYXIgdXBkYXRlcy5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBIdHRwTGluayB9IGZyb20gXCJAYXBvbGxvL2NsaWVudFwiO1xuICpcbiAqIGNvbnN0IGxpbmsgPSBuZXcgSHR0cExpbmsoe1xuICogICB1cmk6IFwiaHR0cDovL2xvY2FsaG9zdDo0MDAwL2dyYXBocWxcIixcbiAqICAgLy8gQWRkaXRpb25hbCBvcHRpb25zXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgSHR0cExpbmsgZXh0ZW5kcyBBcG9sbG9MaW5rIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgeyBsZWZ0LCByaWdodCwgcmVxdWVzdCB9ID0gQXBvbGxvTGluay5mcm9tKFtcbiAgICAgICAgICAgIG5ldyBDbGllbnRBd2FyZW5lc3NMaW5rKG9wdGlvbnMpLFxuICAgICAgICAgICAgbmV3IEJhc2VIdHRwTGluayhvcHRpb25zKSxcbiAgICAgICAgXSk7XG4gICAgICAgIHN1cGVyKHJlcXVlc3QpO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHsgbGVmdCwgcmlnaHQgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBAZGVwcmVjYXRlZFxuICogVXNlIGBIdHRwTGlua2AgZnJvbSBgQGFwb2xsby9jbGllbnQvbGluay9odHRwYCBpbnN0ZWFkLlxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlSHR0cExpbmsgPSAob3B0aW9ucyA9IHt9KSA9PiBuZXcgSHR0cExpbmsob3B0aW9ucyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1IdHRwTGluay5qcy5tYXAiLAogICAgImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gJ2dyYXBocWwnO1xudmFyIGRvY0NhY2hlID0gbmV3IE1hcCgpO1xudmFyIGZyYWdtZW50U291cmNlTWFwID0gbmV3IE1hcCgpO1xudmFyIHByaW50RnJhZ21lbnRXYXJuaW5ncyA9IHRydWU7XG52YXIgZXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMgPSBmYWxzZTtcbmZ1bmN0aW9uIG5vcm1hbGl6ZShzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1tcXHMsXSsvZywgJyAnKS50cmltKCk7XG59XG5mdW5jdGlvbiBjYWNoZUtleUZyb21Mb2MobG9jKSB7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZShsb2Muc291cmNlLmJvZHkuc3Vic3RyaW5nKGxvYy5zdGFydCwgbG9jLmVuZCkpO1xufVxuZnVuY3Rpb24gcHJvY2Vzc0ZyYWdtZW50cyhhc3QpIHtcbiAgICB2YXIgc2VlbktleXMgPSBuZXcgU2V0KCk7XG4gICAgdmFyIGRlZmluaXRpb25zID0gW107XG4gICAgYXN0LmRlZmluaXRpb25zLmZvckVhY2goZnVuY3Rpb24gKGZyYWdtZW50RGVmaW5pdGlvbikge1xuICAgICAgICBpZiAoZnJhZ21lbnREZWZpbml0aW9uLmtpbmQgPT09ICdGcmFnbWVudERlZmluaXRpb24nKSB7XG4gICAgICAgICAgICB2YXIgZnJhZ21lbnROYW1lID0gZnJhZ21lbnREZWZpbml0aW9uLm5hbWUudmFsdWU7XG4gICAgICAgICAgICB2YXIgc291cmNlS2V5ID0gY2FjaGVLZXlGcm9tTG9jKGZyYWdtZW50RGVmaW5pdGlvbi5sb2MpO1xuICAgICAgICAgICAgdmFyIHNvdXJjZUtleVNldCA9IGZyYWdtZW50U291cmNlTWFwLmdldChmcmFnbWVudE5hbWUpO1xuICAgICAgICAgICAgaWYgKHNvdXJjZUtleVNldCAmJiAhc291cmNlS2V5U2V0Lmhhcyhzb3VyY2VLZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByaW50RnJhZ21lbnRXYXJuaW5ncykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJXYXJuaW5nOiBmcmFnbWVudCB3aXRoIG5hbWUgXCIgKyBmcmFnbWVudE5hbWUgKyBcIiBhbHJlYWR5IGV4aXN0cy5cXG5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcImdyYXBocWwtdGFnIGVuZm9yY2VzIGFsbCBmcmFnbWVudCBuYW1lcyBhY3Jvc3MgeW91ciBhcHBsaWNhdGlvbiB0byBiZSB1bmlxdWU7IHJlYWQgbW9yZSBhYm91dFxcblwiXG4gICAgICAgICAgICAgICAgICAgICAgICArIFwidGhpcyBpbiB0aGUgZG9jczogaHR0cDovL2Rldi5hcG9sbG9kYXRhLmNvbS9jb3JlL2ZyYWdtZW50cy5odG1sI3VuaXF1ZS1uYW1lc1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghc291cmNlS2V5U2V0KSB7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnRTb3VyY2VNYXAuc2V0KGZyYWdtZW50TmFtZSwgc291cmNlS2V5U2V0ID0gbmV3IFNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzb3VyY2VLZXlTZXQuYWRkKHNvdXJjZUtleSk7XG4gICAgICAgICAgICBpZiAoIXNlZW5LZXlzLmhhcyhzb3VyY2VLZXkpKSB7XG4gICAgICAgICAgICAgICAgc2VlbktleXMuYWRkKHNvdXJjZUtleSk7XG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbnMucHVzaChmcmFnbWVudERlZmluaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVmaW5pdGlvbnMucHVzaChmcmFnbWVudERlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBhc3QpLCB7IGRlZmluaXRpb25zOiBkZWZpbml0aW9ucyB9KTtcbn1cbmZ1bmN0aW9uIHN0cmlwTG9jKGRvYykge1xuICAgIHZhciB3b3JrU2V0ID0gbmV3IFNldChkb2MuZGVmaW5pdGlvbnMpO1xuICAgIHdvcmtTZXQuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5sb2MpXG4gICAgICAgICAgICBkZWxldGUgbm9kZS5sb2M7XG4gICAgICAgIE9iamVjdC5rZXlzKG5vZGUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbm9kZVtrZXldO1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB3b3JrU2V0LmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHZhciBsb2MgPSBkb2MubG9jO1xuICAgIGlmIChsb2MpIHtcbiAgICAgICAgZGVsZXRlIGxvYy5zdGFydFRva2VuO1xuICAgICAgICBkZWxldGUgbG9jLmVuZFRva2VuO1xuICAgIH1cbiAgICByZXR1cm4gZG9jO1xufVxuZnVuY3Rpb24gcGFyc2VEb2N1bWVudChzb3VyY2UpIHtcbiAgICB2YXIgY2FjaGVLZXkgPSBub3JtYWxpemUoc291cmNlKTtcbiAgICBpZiAoIWRvY0NhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlKHNvdXJjZSwge1xuICAgICAgICAgICAgZXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM6IGV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzLFxuICAgICAgICAgICAgYWxsb3dMZWdhY3lGcmFnbWVudFZhcmlhYmxlczogZXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcGFyc2VkIHx8IHBhcnNlZC5raW5kICE9PSAnRG9jdW1lbnQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhIHZhbGlkIEdyYXBoUUwgZG9jdW1lbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jQ2FjaGUuc2V0KGNhY2hlS2V5LCBzdHJpcExvYyhwcm9jZXNzRnJhZ21lbnRzKHBhcnNlZCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIGRvY0NhY2hlLmdldChjYWNoZUtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ3FsKGxpdGVyYWxzKSB7XG4gICAgdmFyIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGxpdGVyYWxzID09PSAnc3RyaW5nJykge1xuICAgICAgICBsaXRlcmFscyA9IFtsaXRlcmFsc107XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBsaXRlcmFsc1swXTtcbiAgICBhcmdzLmZvckVhY2goZnVuY3Rpb24gKGFyZywgaSkge1xuICAgICAgICBpZiAoYXJnICYmIGFyZy5raW5kID09PSAnRG9jdW1lbnQnKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gYXJnLmxvYy5zb3VyY2UuYm9keTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBhcmc7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9IGxpdGVyYWxzW2kgKyAxXTtcbiAgICB9KTtcbiAgICByZXR1cm4gcGFyc2VEb2N1bWVudChyZXN1bHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q2FjaGVzKCkge1xuICAgIGRvY0NhY2hlLmNsZWFyKCk7XG4gICAgZnJhZ21lbnRTb3VyY2VNYXAuY2xlYXIoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlRnJhZ21lbnRXYXJuaW5ncygpIHtcbiAgICBwcmludEZyYWdtZW50V2FybmluZ3MgPSBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcygpIHtcbiAgICBleHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcyA9IHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzKCkge1xuICAgIGV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzID0gZmFsc2U7XG59XG52YXIgZXh0cmFzID0ge1xuICAgIGdxbDogZ3FsLFxuICAgIHJlc2V0Q2FjaGVzOiByZXNldENhY2hlcyxcbiAgICBkaXNhYmxlRnJhZ21lbnRXYXJuaW5nczogZGlzYWJsZUZyYWdtZW50V2FybmluZ3MsXG4gICAgZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM6IGVuYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzLFxuICAgIGRpc2FibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlczogZGlzYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzXG59O1xuKGZ1bmN0aW9uIChncWxfMSkge1xuICAgIGdxbF8xLmdxbCA9IGV4dHJhcy5ncWwsIGdxbF8xLnJlc2V0Q2FjaGVzID0gZXh0cmFzLnJlc2V0Q2FjaGVzLCBncWxfMS5kaXNhYmxlRnJhZ21lbnRXYXJuaW5ncyA9IGV4dHJhcy5kaXNhYmxlRnJhZ21lbnRXYXJuaW5ncywgZ3FsXzEuZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMgPSBleHRyYXMuZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMsIGdxbF8xLmRpc2FibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcyA9IGV4dHJhcy5kaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM7XG59KShncWwgfHwgKGdxbCA9IHt9KSk7XG5ncWxbXCJkZWZhdWx0XCJdID0gZ3FsO1xuZXhwb3J0IGRlZmF1bHQgZ3FsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwKICAgICJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IEFwb2xsb0xpbmsgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvbGlua1wiO1xuLyoqXG4gKiBAZGVwcmVjYXRlZFxuICogVXNlIGBTZXRDb250ZXh0TGlua2AgZnJvbSBgQGFwb2xsby9jbGllbnQvbGluay9jb250ZXh0YCBpbnN0ZWFkLiBOb3RlIHlvdVxuICogd2lsbCBuZWVkIHRvIGZsaXAgdGhlIGFyZ3VtZW50cyB3aGVuIHVzaW5nIGBTZXRDb250ZXh0TGlua2AgYXMgYHByZXZDb250ZXh0YFxuICogaXMgdGhlIGZpcnN0IGFyZ3VtZW50LlxuICpcbiAqIGBgYHRzXG4gKiBuZXcgU2V0Q29udGV4dExpbmsoKHByZXZDb250ZXh0LCBvcGVyYXRpb24pID0+IHtcbiAqICAgLy8gLi4uXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q29udGV4dChzZXR0ZXIpIHtcbiAgICByZXR1cm4gbmV3IFNldENvbnRleHRMaW5rKChwcmV2Q29udGV4dCwgb3BlcmF0aW9uKSA9PiBzZXR0ZXIob3BlcmF0aW9uLCBwcmV2Q29udGV4dCkpO1xufVxuLyoqXG4gKiBgU2V0Q29udGV4dExpbmtgIGlzIGEgbm9uLXRlcm1pbmF0aW5nIGxpbmsgdGhhdCBhbGxvd3MgeW91IHRvIG1vZGlmeSB0aGVcbiAqIGNvbnRleHQgb2YgR3JhcGhRTCBvcGVyYXRpb25zIGJlZm9yZSB0aGV5J3JlIHBhc3NlZCB0byB0aGUgbmV4dCBsaW5rIGluIHRoZVxuICogY2hhaW4uIFRoaXMgaXMgY29tbW9ubHkgdXNlZCBmb3IgYXV0aGVudGljYXRpb24sIGFkZGluZyBoZWFkZXJzLCBhbmQgb3RoZXJcbiAqIHJlcXVlc3QtdGltZSBjb25maWd1cmF0aW9uLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFNldENvbnRleHRMaW5rIH0gZnJvbSBcIkBhcG9sbG8vY2xpZW50L2xpbmsvY29udGV4dFwiO1xuICpcbiAqIGNvbnN0IGxpbmsgPSBuZXcgU2V0Q29udGV4dExpbmsoKHByZXZDb250ZXh0LCBvcGVyYXRpb24pID0+IHtcbiAqICAgcmV0dXJuIHtcbiAqICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIsXG4gKiAgICAgLy8gLi4uXG4gKiAgIH07XG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgU2V0Q29udGV4dExpbmsgZXh0ZW5kcyBBcG9sbG9MaW5rIHtcbiAgICBjb25zdHJ1Y3RvcihzZXR0ZXIpIHtcbiAgICAgICAgc3VwZXIoKG9wZXJhdGlvbiwgZm9yd2FyZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyAuLi5yZXF1ZXN0IH0gPSBvcGVyYXRpb247XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVxdWVzdCwgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBvcGVyYXRpb24uY2xpZW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoKG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGNsb3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShyZXF1ZXN0KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVxKSA9PiBzZXR0ZXIob3BlcmF0aW9uLmdldENvbnRleHQoKSwgcmVxKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ob3BlcmF0aW9uLnNldENvbnRleHQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcndhcmQob3BlcmF0aW9uKS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKG9ic2VydmVyLmVycm9yLmJpbmQob2JzZXJ2ZXIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwKICAgICIvKipcbiAqIFN0ZW5jaWwgLSBHcmFwaFFMIERPTSBCaW5kaW5ncyBMaWJyYXJ5IHdpdGggQXBvbGxvIENsaWVudFxuICogRHluYW1pYyBxdWVyeSBidWlsZGVyIHRoYXQgcmVhZHMgRE9NIHRvIGNvbnN0cnVjdCBHcmFwaFFMIHF1ZXJpZXNcbiAqL1xuXG4vLyBTZXQgZGV2ZWxvcG1lbnQgbW9kZSBmb3IgQXBvbGxvIERldlRvb2xzIEJFRk9SRSBhbnkgaW1wb3J0c1xuKGdsb2JhbFRoaXMgYXMgYW55KS5fX0RFVl9fID0gdHJ1ZTtcblxuaW1wb3J0IHsgQXBvbGxvQ2xpZW50LCBJbk1lbW9yeUNhY2hlLCBncWwsIERvY3VtZW50Tm9kZSB9IGZyb20gXCJAYXBvbGxvL2NsaWVudFwiO1xuaW1wb3J0IHsgSHR0cExpbmsgfSBmcm9tIFwiQGFwb2xsby9jbGllbnQvbGluay9odHRwXCI7XG5pbXBvcnQgeyBTZXRDb250ZXh0TGluayB9IGZyb20gXCJAYXBvbGxvL2NsaWVudC9saW5rL2NvbnRleHRcIjtcblxuLy8gR3JhcGhRTCBlbmRwb2ludCBjb25maWd1cmF0aW9uXG5jb25zdCBHUkFQSFFMX0VORFBPSU5UID0gXCJodHRwOi8vbG9jYWxob3N0OjgwODEvdjEvZ3JhcGhxbFwiO1xuY29uc3QgQURNSU5fU0VDUkVUID0gXCJteWFkbWluc2VjcmV0a2V5XCI7XG5cbi8vIENyZWF0ZSBBcG9sbG8gQ2xpZW50IElNTUVESUFURUxZICh3aXRoaW4gZmlyc3QgMTAgc2Vjb25kcykgZm9yIERldlRvb2xzIGRldGVjdGlvblxuY29uc3QgaHR0cExpbmsgPSBuZXcgSHR0cExpbmsoe1xuICB1cmk6IEdSQVBIUUxfRU5EUE9JTlQsXG59KTtcblxuY29uc3QgYXV0aExpbmsgPSBuZXcgU2V0Q29udGV4dExpbmsoKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiWC1IYXN1cmEtQWRtaW4tU2VjcmV0XCI6IEFETUlOX1NFQ1JFVCxcbiAgICB9LFxuICB9O1xufSk7XG5cbi8vIEdsb2JhbCBBcG9sbG8gQ2xpZW50IGluc3RhbmNlIGNyZWF0ZWQgaW1tZWRpYXRlbHlcbmNvbnN0IGdsb2JhbEFwb2xsb0NsaWVudCA9IG5ldyBBcG9sbG9DbGllbnQoe1xuICBsaW5rOiBhdXRoTGluay5jb25jYXQoaHR0cExpbmspLFxuICBjYWNoZTogbmV3IEluTWVtb3J5Q2FjaGUoKSxcbiAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICBjb25uZWN0VG9EZXZUb29sczogdHJ1ZSxcbiAgLy8gbmFtZTogXCJzdGVuY2lsLWFwb2xsby1jbGllbnRcIixcbiAgLy8gdmVyc2lvbjogXCIxLjAuMFwiLFxuICBkZWZhdWx0T3B0aW9uczoge1xuICAgIHdhdGNoUXVlcnk6IHtcbiAgICAgIGVycm9yUG9saWN5OiBcImFsbFwiLFxuICAgIH0sXG4gICAgcXVlcnk6IHtcbiAgICAgIGVycm9yUG9saWN5OiBcImFsbFwiLFxuICAgIH0sXG4gIH0sXG59KTtcblxuLy8gRXhwb3NlIGdsb2JhbGx5IGZvciBEZXZUb29sc1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgKHdpbmRvdyBhcyBhbnkpLl9fQVBPTExPX0NMSUVOVF9fID0gZ2xvYmFsQXBvbGxvQ2xpZW50O1xufVxuXG5pbnRlcmZhY2UgUXVlcnlGaWVsZCB7XG4gIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gIHBhdGg6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFF1ZXJ5U3RydWN0dXJlIHtcbiAgW2tleTogc3RyaW5nXTogUXVlcnlTdHJ1Y3R1cmUgfCB0cnVlO1xufVxuXG5jbGFzcyBTdGVuY2lsR3JhcGhRTCB7XG4gIHByaXZhdGUgZmllbGRzOiBRdWVyeUZpZWxkW10gPSBbXTtcbiAgcHJpdmF0ZSBjbGllbnQ6IEFwb2xsb0NsaWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwi8J+OryBTdGVuY2lsIEdyYXBoUUwgRE9NIEJpbmRpbmdzIHdpdGggQXBvbGxvIENsaWVudCArIERldlRvb2xzIGluaXRpYWxpemVkIVwiLFxuICAgICk7XG5cbiAgICAvLyBVc2UgdGhlIGdsb2JhbGx5IGNyZWF0ZWQgQXBvbGxvIENsaWVudFxuICAgIHRoaXMuY2xpZW50ID0gZ2xvYmFsQXBvbGxvQ2xpZW50O1xuXG4gICAgY29uc29sZS5sb2coXCLwn5SXIFVzaW5nIGdsb2JhbCBBcG9sbG8gQ2xpZW50IGZvciBHcmFwaFFMIHF1ZXJpZXNcIik7XG4gIH1cblxuICAvKipcbiAgICogU2NhbiB0aGUgRE9NIGZvciBlbGVtZW50cyB3aXRoIGRhdGEtZ3FsLWZpZWxkIGF0dHJpYnV0ZXNcbiAgICovXG4gIHNjYW5ET00oKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCLwn5SNIFNjYW5uaW5nIERPTSBmb3IgR3JhcGhRTCBmaWVsZCBiaW5kaW5ncy4uLlwiKTtcblxuICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWdxbC1maWVsZF1cIik7XG4gICAgdGhpcy5maWVsZHMgPSBbXTtcblxuICAgIGVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IHBhdGggPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtZ3FsLWZpZWxkXCIpO1xuICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgdGhpcy5maWVsZHMucHVzaCh7IGVsZW1lbnQsIHBhdGggfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5ONIEZvdW5kIGZpZWxkIGJpbmRpbmc6ICR7cGF0aH1gKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKGDinIUgRm91bmQgJHt0aGlzLmZpZWxkcy5sZW5ndGh9IGZpZWxkIGJpbmRpbmdzYCk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgbmVzdGVkIHF1ZXJ5IHN0cnVjdHVyZSBmcm9tIGZpZWxkIHBhdGhzXG4gICAqL1xuICBidWlsZFF1ZXJ5U3RydWN0dXJlKCk6IFF1ZXJ5U3RydWN0dXJlIHtcbiAgICBjb25zb2xlLmxvZyhcIvCfj5fvuI8gIEJ1aWxkaW5nIHF1ZXJ5IHN0cnVjdHVyZSBmcm9tIGZpZWxkIHBhdGhzLi4uXCIpO1xuXG4gICAgY29uc3Qgc3RydWN0dXJlOiBRdWVyeVN0cnVjdHVyZSA9IHt9O1xuXG4gICAgdGhpcy5maWVsZHMuZm9yRWFjaCgoeyBwYXRoIH0pID0+IHtcbiAgICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdChcIi5cIik7XG4gICAgICBsZXQgY3VycmVudCA9IHN0cnVjdHVyZTtcblxuICAgICAgcGFydHMuZm9yRWFjaCgocGFydCwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGluZGV4ID09PSBwYXJ0cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgLy8gTGVhZiBub2RlXG4gICAgICAgICAgY3VycmVudFtwYXJ0XSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTmVzdGVkIG9iamVjdFxuICAgICAgICAgIGlmICghY3VycmVudFtwYXJ0XSkge1xuICAgICAgICAgICAgY3VycmVudFtwYXJ0XSA9IHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50ID0gY3VycmVudFtwYXJ0XSBhcyBRdWVyeVN0cnVjdHVyZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIvCfk4ogUXVlcnkgc3RydWN0dXJlIGJ1aWx0OlwiLCBzdHJ1Y3R1cmUpO1xuICAgIHJldHVybiBzdHJ1Y3R1cmU7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBxdWVyeSBzdHJ1Y3R1cmUgdG8gR3JhcGhRTCBzdHJpbmdcbiAgICovXG4gIHN0cnVjdHVyZVRvR3JhcGhRTChzdHJ1Y3R1cmU6IFF1ZXJ5U3RydWN0dXJlLCBkZXB0aCA9IDApOiBzdHJpbmcge1xuICAgIGNvbnN0IGluZGVudCA9IFwiICBcIi5yZXBlYXQoZGVwdGgpO1xuICAgIGxldCByZXN1bHQgPSBcIlwiO1xuXG4gICAgT2JqZWN0LmVudHJpZXMoc3RydWN0dXJlKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXN1bHQgKz0gYCR7aW5kZW50fSR7a2V5fVxcbmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gYCR7aW5kZW50fSR7a2V5fSB7XFxuYDtcbiAgICAgICAgcmVzdWx0ICs9IHRoaXMuc3RydWN0dXJlVG9HcmFwaFFMKHZhbHVlIGFzIFF1ZXJ5U3RydWN0dXJlLCBkZXB0aCArIDEpO1xuICAgICAgICByZXN1bHQgKz0gYCR7aW5kZW50fX1cXG5gO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBjb21wbGV0ZSBHcmFwaFFMIHF1ZXJ5IGZyb20gZGlzY292ZXJlZCBmaWVsZCBwYXRoc1xuICAgKi9cbiAgYnVpbGRRdWVyeSgpOiBEb2N1bWVudE5vZGUgfCBudWxsIHtcbiAgICBjb25zb2xlLmxvZyhcIvCfj5fvuI8gIEJ1aWxkaW5nIEdyYXBoUUwgcXVlcnkgZnJvbSBmaWVsZCBwYXRocy4uLlwiKTtcblxuICAgIGlmICh0aGlzLmZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKFwi4pqg77iPICBObyBmaWVsZHMgZm91bmQgdG8gcXVlcnlcIik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBzdHJ1Y3R1cmUgPSB0aGlzLmJ1aWxkUXVlcnlTdHJ1Y3R1cmUoKTtcbiAgICBjb25zdCBxdWVyeUZpZWxkcyA9IHRoaXMuc3RydWN0dXJlVG9HcmFwaFFMKHN0cnVjdHVyZSwgMSk7XG5cbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGBcbiAgICAgIHF1ZXJ5IFN0ZW5jaWxHZW5lcmF0ZWRRdWVyeSB7XG4ke3F1ZXJ5RmllbGRzfSAgICAgIH1cbiAgICBgO1xuXG4gICAgY29uc29sZS5sb2coXCLwn5OdIEdlbmVyYXRlZCBHcmFwaFFMIHF1ZXJ5OlwiLCBxdWVyeVN0cmluZyk7XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGdxbChxdWVyeVN0cmluZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgSW52YWxpZCBHcmFwaFFMIHF1ZXJ5IGdlbmVyYXRlZDpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgR3JhcGhRTCBxdWVyeSB1c2luZyBBcG9sbG8gQ2xpZW50XG4gICAqL1xuICBhc3luYyBleGVjdXRlUXVlcnkoXG4gICAgcXVlcnk6IERvY3VtZW50Tm9kZSxcbiAgICB1c2VDYWNoZTogYm9vbGVhbiA9IHRydWUsXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc29sZS5sb2coXCLwn5qAIEV4ZWN1dGluZyBHcmFwaFFMIHF1ZXJ5IHdpdGggQXBvbGxvIENsaWVudC4uLlwiKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNsaWVudC5xdWVyeSh7XG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBmZXRjaFBvbGljeTogdXNlQ2FjaGUgPyBcImNhY2hlLWZpcnN0XCIgOiBcIm5ldHdvcmstb25seVwiLFxuICAgICAgICBlcnJvclBvbGljeTogXCJhbGxcIixcbiAgICAgICAgLy8gQWRkIHF1ZXJ5IG1ldGFkYXRhIGZvciBEZXZUb29sc1xuICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgcXVlcnlOYW1lOiBcIlN0ZW5jaWxHZW5lcmF0ZWRRdWVyeVwiLFxuICAgICAgICAgIHNvdXJjZTogXCJzdGVuY2lsLWRvbS1iaW5kaW5nc1wiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwi8J+TiiBRdWVyeSByZXN1bHQ6XCIsIHJlc3VsdC5kYXRhKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIFF1ZXJ5IGV4ZWN1dGlvbiBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgRE9NIGVsZW1lbnRzIHdpdGggcXVlcnkgcmVzdWx0c1xuICAgKi9cbiAgdXBkYXRlRE9NKGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwi8J+OqCBVcGRhdGluZyBET00gd2l0aCBxdWVyeSByZXN1bHRzLi4uXCIpO1xuXG4gICAgdGhpcy5maWVsZHMuZm9yRWFjaCgoeyBlbGVtZW50LCBwYXRoIH0pID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXROZXN0ZWRWYWx1ZShkYXRhLCBwYXRoKTtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIEZvcm1hdCBudW1iZXJzIGZvciBiZXR0ZXIgZGlzcGxheVxuICAgICAgICBjb25zdCBkaXNwbGF5VmFsdWUgPVxuICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIlxuICAgICAgICAgICAgPyBOdW1iZXIodmFsdWUpLnRvRml4ZWQoMilcbiAgICAgICAgICAgIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGRpc3BsYXlWYWx1ZTtcbiAgICAgICAgY29uc29sZS5sb2coYOKcqCBVcGRhdGVkICR7cGF0aH06ICR7ZGlzcGxheVZhbHVlfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKGDimqDvuI8gIE5vIHZhbHVlIGZvdW5kIGZvciBwYXRoOiAke3BhdGh9YCk7XG4gICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBcIk4vQVwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBuZXN0ZWQgb2JqZWN0IHZhbHVlIGZyb20gZG90IG5vdGF0aW9uIHBhdGhcbiAgICovXG4gIHByaXZhdGUgZ2V0TmVzdGVkVmFsdWUob2JqOiBhbnksIHBhdGg6IHN0cmluZyk6IGFueSB7XG4gICAgcmV0dXJuIHBhdGguc3BsaXQoXCIuXCIpLnJlZHVjZSgoY3VycmVudCwga2V5KSA9PiBjdXJyZW50Py5ba2V5XSwgb2JqKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWluIGV4ZWN1dGlvbiBtZXRob2RcbiAgICovXG4gIGFzeW5jIHJ1bigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zb2xlLmxvZyhcIvCfjqwgU3RhcnRpbmcgU3RlbmNpbCBHcmFwaFFMIERPTSBiaW5kaW5nIHByb2Nlc3MuLi5cIik7XG5cbiAgICB0aGlzLnNjYW5ET00oKTtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuYnVpbGRRdWVyeSgpO1xuXG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVRdWVyeShxdWVyeSwgdHJ1ZSk7IC8vIFVzZSBBcG9sbG8gY2FjaGVcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVET00ocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIvCfjokgU3RlbmNpbCBHcmFwaFFMIHByb2Nlc3MgY29tcGxldGUhXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2ggZGF0YSBhbmQgdXBkYXRlIERPTSAoZm9yY2VzIGZyZXNoIGRhdGEsIGJ5cGFzc2VzIGNhY2hlKVxuICAgKi9cbiAgYXN5bmMgcmVmcmVzaCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zb2xlLmxvZyhcIvCflIQgUmVmcmVzaGluZyBHcmFwaFFMIGRhdGEuLi5cIik7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLmJ1aWxkUXVlcnkoKTtcblxuICAgIGlmIChxdWVyeSkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlUXVlcnkocXVlcnksIGZhbHNlKTsgLy8gRm9yY2UgbmV0d29ya1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICB0aGlzLnVwZGF0ZURPTShyZXN1bHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBBcG9sbG8gY2FjaGVcbiAgICovXG4gIGNsZWFyQ2FjaGUoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCLwn5eR77iPICBDbGVhcmluZyBBcG9sbG8gY2FjaGUuLi5cIik7XG4gICAgdGhpcy5jbGllbnQuY2FjaGUucmVzZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQXBvbGxvIGNhY2hlIHN0YXRpc3RpY3NcbiAgICovXG4gIGdldENhY2hlU3RhdHMoKTogYW55IHtcbiAgICBjb25zdCBjYWNoZURhdGEgPSB0aGlzLmNsaWVudC5jYWNoZS5leHRyYWN0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNhY2hlU2l6ZTogY2FjaGVEYXRhID8gT2JqZWN0LmtleXMoY2FjaGVEYXRhKS5sZW5ndGggOiAwLFxuICAgICAgY2FjaGU6IGNhY2hlRGF0YSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBBcG9sbG8gQ2xpZW50IGluc3RhbmNlIGZvciBhZHZhbmNlZCB1c2FnZVxuICAgKi9cbiAgZ2V0QXBvbGxvQ2xpZW50KCkge1xuICAgIHJldHVybiB0aGlzLmNsaWVudDtcbiAgfVxufVxuXG4vLyBJbml0aWFsaXplIGFuZCBydW4gd2hlbiBET00gaXMgcmVhZHlcbmNvbnN0IHN0ZW5jaWwgPSBuZXcgU3RlbmNpbEdyYXBoUUwoKTtcblxuLy8gRXhwb3NlIHN0ZW5jaWwgZ2xvYmFsbHkgZm9yIHRlc3Rpbmdcbih3aW5kb3cgYXMgYW55KS5zdGVuY2lsID0gc3RlbmNpbDtcblxuaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwibG9hZGluZ1wiKSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIvCfmoAgRE9NIGlzIHJlYWR5LCBpbml0aWFsaXppbmcgU3RlbmNpbC4uLlwiKTtcbiAgICBzdGVuY2lsLnJ1bigpO1xuICB9KTtcbn0gZWxzZSB7XG4gIGNvbnNvbGUubG9nKFwi8J+agCBET00gYWxyZWFkeSByZWFkeSwgaW5pdGlhbGl6aW5nIFN0ZW5jaWwuLi5cIik7XG4gIHN0ZW5jaWwucnVuKCk7XG59XG4iCiAgXSwKICAibWFwcGluZ3MiOiAiO0FBQU8sU0FBUyxTQUFTLENBQUMsV0FBVyxTQUFTO0FBQzVDLFFBQU0sbUJBQW1CLFFBQVEsU0FBUztBQUUxQyxPQUFLLGtCQUFrQjtBQUNyQixVQUFNLElBQUksTUFBTSxPQUFPO0FBQUEsRUFDekI7QUFBQTs7O0FDREssU0FBUyxZQUFZLENBQUMsT0FBTztBQUNsQyxnQkFBYyxTQUFTLFlBQVksVUFBVTtBQUFBOzs7QUNMeEMsU0FBUyxTQUFTLENBQUMsV0FBVyxTQUFTO0FBQzVDLFFBQU0sbUJBQW1CLFFBQVEsU0FBUztBQUUxQyxPQUFLLGtCQUFrQjtBQUNyQixVQUFNLElBQUksTUFDUixXQUFXLE9BQU8sVUFBVSxpQ0FDOUI7QUFBQSxFQUNGO0FBQUE7OztBQ05GLElBQU0sYUFBYTtBQVNaLFNBQVMsV0FBVyxDQUFDLFFBQVEsVUFBVTtBQUM1QyxNQUFJLGdCQUFnQjtBQUNwQixNQUFJLE9BQU87QUFFWCxhQUFXLFNBQVMsT0FBTyxLQUFLLFNBQVMsVUFBVSxHQUFHO0FBQ3BELFdBQU8sTUFBTSxVQUFVLFlBQVksVUFBVSxLQUFLO0FBRWxELFFBQUksTUFBTSxTQUFTLFVBQVU7QUFDM0I7QUFBQSxJQUNGO0FBRUEsb0JBQWdCLE1BQU0sUUFBUSxNQUFNLEdBQUc7QUFDdkMsWUFBUTtBQUFBLEVBQ1Y7QUFFQSxTQUFPO0FBQUEsSUFDTDtBQUFBLElBQ0EsUUFBUSxXQUFXLElBQUk7QUFBQSxFQUN6QjtBQUFBOzs7QUN2QkssU0FBUyxhQUFhLENBQUMsVUFBVTtBQUN0QyxTQUFPLG9CQUNMLFNBQVMsUUFDVCxZQUFZLFNBQVMsUUFBUSxTQUFTLEtBQUssQ0FDN0M7QUFBQTtBQU1LLFNBQVMsbUJBQW1CLENBQUMsUUFBUSxnQkFBZ0I7QUFDMUQsUUFBTSx3QkFBd0IsT0FBTyxlQUFlLFNBQVM7QUFDN0Qs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QSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFB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QUFVLE1BQU07QUFBQSxNQUN2QjtBQUFBLElBQ0Y7QUFBQTtBQUFBLEVBTUYsVUFBVSxHQUFTO0FBQ2pCLFlBQVEsSUFBSSw4Q0FBOEI7QUFDMUMsU0FBSyxPQUFPLE1BQU0sTUFBTTtBQUFBO0FBQUEsRUFNMUIsYUFBYSxHQUFRO0FBQ25CLFVBQU0sWUFBWSxLQUFLLE9BQU8sTUFBTSxRQUFRO0FBQzVDLFdBQU87QUFBQSxNQUNMLFdBQVcsWUFBWSxPQUFPLEtBQUssU0FBUyxFQUFFLFNBQVM7QUFBQSxNQUN2RCxPQUFPO0FBQUEsSUFDVDtBQUFBO0FBQUEsRUFNRixlQUFlLEdBQUc7QUFDaEIsV0FBTyxLQUFLO0FBQUE7QUFFaEI7QUFHQSxJQUFNLFVBQVUsSUFBSTtBQUdwQixBQUFDLE9BQWUsVUFBVTtBQUUxQixJQUFJLFNBQVMsZUFBZSxXQUFXO0FBQ3JDLFdBQVMsaUJBQWlCLG9CQUFvQixNQUFNO0FBQ2xELFlBQVEsSUFBSSxvREFBeUM7QUFDckQsWUFBUSxJQUFJO0FBQUEsR0FDYjtBQUNILE9BQU87QUFDTCxVQUFRLElBQUkseURBQThDO0FBQzFELFVBQVEsSUFBSTtBQUFBOyIsCiAgImRlYnVnSWQiOiAiNjJGOUE5RTYzOTZGQTFFQjY0NzU2RTIxNjQ3NTZFMjEiLAogICJuYW1lcyI6IFtdCn0=
